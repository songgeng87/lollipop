const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./D3JwA2SD.js","./about.Db42Yf76.css","./DiCYm_E8.js","./index.BsrihJJG.css","./CUFSHycE.js","./research.DejdpGTj.css","./B7dQ1S4Q.js","./BQAVJ49v.js","./error-404.CoZKRZXM.css","./C2cLfdw7.js","./error-500.D6506J9O.css"])))=>i.map(i=>d[i]);
/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function w5(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return i=>i in t}const Ir={},Pm=[],ml=()=>{},xee=()=>!1,Y1=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),x5=e=>e.startsWith("onUpdate:"),vn=Object.assign,_5=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},_ee=Object.prototype.hasOwnProperty,ur=(e,t)=>_ee.call(e,t),ei=Array.isArray,Dm=e=>Nv(e)==="[object Map]",E_=e=>Nv(e)==="[object Set]",eO=e=>Nv(e)==="[object Date]",See=e=>Nv(e)==="[object RegExp]",yi=e=>typeof e=="function",jr=e=>typeof e=="string",bl=e=>typeof e=="symbol",Ar=e=>e!==null&&typeof e=="object",oV=e=>(Ar(e)||yi(e))&&yi(e.then)&&yi(e.catch),lV=Object.prototype.toString,Nv=e=>lV.call(e),Cee=e=>Nv(e).slice(8,-1),cV=e=>Nv(e)==="[object Object]",S5=e=>jr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Im=w5(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),A_=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},Eee=/-(\w)/g,ko=A_(e=>e.replace(Eee,(t,i)=>i?i.toUpperCase():"")),Aee=/\B([A-Z])/g,bh=A_(e=>e.replace(Aee,"-$1").toLowerCase()),M_=A_(e=>e.charAt(0).toUpperCase()+e.slice(1)),gg=A_(e=>e?`on${M_(e)}`:""),Gd=(e,t)=>!Object.is(e,t),Om=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},uV=(e,t,i,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:i})},gE=e=>{const t=parseFloat(e);return isNaN(t)?e:t},dV=e=>{const t=jr(e)?Number(e):NaN;return isNaN(t)?e:t};let tO;const T_=()=>tO||(tO=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function mt(e){if(ei(e)){const t={};for(let i=0;i<e.length;i++){const r=e[i],n=jr(r)?Dee(r):mt(r);if(n)for(const a in n)t[a]=n[a]}return t}else if(jr(e)||Ar(e))return e}const Mee=/;(?![^(]*\))/g,Tee=/:([^]+)/,Pee=/\/\*[^]*?\*\//g;function Dee(e){const t={};return e.replace(Pee,"").split(Mee).forEach(i=>{if(i){const r=i.split(Tee);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function U(e){let t="";if(jr(e))t=e;else if(ei(e))for(let i=0;i<e.length;i++){const r=U(e[i]);r&&(t+=r+" ")}else if(Ar(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}function _o(e){if(!e)return null;let{class:t,style:i}=e;return t&&!jr(t)&&(e.class=U(t)),i&&(e.style=mt(i)),e}const Iee="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Oee=w5(Iee);function hV(e){return!!e||e===""}function Ree(e,t){if(e.length!==t.length)return!1;let i=!0;for(let r=0;i&&r<e.length;r++)i=tv(e[r],t[r]);return i}function tv(e,t){if(e===t)return!0;let i=eO(e),r=eO(t);if(i||r)return i&&r?e.getTime()===t.getTime():!1;if(i=bl(e),r=bl(t),i||r)return e===t;if(i=ei(e),r=ei(t),i||r)return i&&r?Ree(e,t):!1;if(i=Ar(e),r=Ar(t),i||r){if(!i||!r)return!1;const n=Object.keys(e).length,a=Object.keys(t).length;if(n!==a)return!1;for(const s in e){const o=e.hasOwnProperty(s),l=t.hasOwnProperty(s);if(o&&!l||!o&&l||!tv(e[s],t[s]))return!1}}return String(e)===String(t)}function fV(e,t){return e.findIndex(i=>tv(i,t))}const pV=e=>!!(e&&e.__v_isRef===!0),Ye=e=>jr(e)?e:e==null?"":ei(e)||Ar(e)&&(e.toString===lV||!yi(e.toString))?pV(e)?Ye(e.value):JSON.stringify(e,mV,2):String(e),mV=(e,t)=>pV(t)?mV(e,t.value):Dm(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[r,n],a)=>(i[d3(r,a)+" =>"]=n,i),{})}:E_(t)?{[`Set(${t.size})`]:[...t.values()].map(i=>d3(i))}:bl(t)?d3(t):Ar(t)&&!ei(t)&&!cV(t)?String(t):t,d3=(e,t="")=>{var i;return bl(e)?`Symbol(${(i=e.description)!=null?i:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ns;class vV{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ns,!t&&ns&&(this.index=(ns.scopes||(ns.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].pause();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].resume();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].resume()}}run(t){if(this._active){const i=ns;try{return ns=this,t()}finally{ns=i}}}on(){ns=this}off(){ns=this.parent}stop(t){if(this._active){this._active=!1;let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(this.effects.length=0,i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function gV(e){return new vV(e)}function C5(){return ns}function yV(e,t=!1){ns&&ns.cleanups.push(e)}let kr;const h3=new WeakSet;class bV{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ns&&ns.active&&ns.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,h3.has(this)&&(h3.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||xV(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,iO(this),_V(this);const t=kr,i=vl;kr=this,vl=!0;try{return this.fn()}finally{SV(this),kr=t,vl=i,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)M5(t);this.deps=this.depsTail=void 0,iO(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?h3.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){yE(this)&&this.run()}get dirty(){return yE(this)}}let wV=0,yg,bg;function xV(e,t=!1){if(e.flags|=8,t){e.next=bg,bg=e;return}e.next=yg,yg=e}function E5(){wV++}function A5(){if(--wV>0)return;if(bg){let t=bg;for(bg=void 0;t;){const i=t.next;t.next=void 0,t.flags&=-9,t=i}}let e;for(;yg;){let t=yg;for(yg=void 0;t;){const i=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=i}}if(e)throw e}function _V(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function SV(e){let t,i=e.depsTail,r=i;for(;r;){const n=r.prevDep;r.version===-1?(r===i&&(i=n),M5(r),kee(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}e.deps=t,e.depsTail=i}function yE(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(CV(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function CV(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Kg))return;e.globalVersion=Kg;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!yE(e)){e.flags&=-3;return}const i=kr,r=vl;kr=e,vl=!0;try{_V(e);const n=e.fn(e._value);(t.version===0||Gd(n,e._value))&&(e._value=n,t.version++)}catch(n){throw t.version++,n}finally{kr=i,vl=r,SV(e),e.flags&=-3}}function M5(e,t=!1){const{dep:i,prevSub:r,nextSub:n}=e;if(r&&(r.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=r,e.nextSub=void 0),i.subs===e&&(i.subs=r,!r&&i.computed)){i.computed.flags&=-5;for(let a=i.computed.deps;a;a=a.nextDep)M5(a,!0)}!t&&!--i.sc&&i.map&&i.map.delete(i.key)}function kee(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let vl=!0;const EV=[];function wh(){EV.push(vl),vl=!1}function xh(){const e=EV.pop();vl=e===void 0?!0:e}function iO(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const i=kr;kr=void 0;try{t()}finally{kr=i}}}let Kg=0,Lee=class{constructor(t,i){this.sub=t,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class T5{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!kr||!vl||kr===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==kr)i=this.activeLink=new Lee(kr,this),kr.deps?(i.prevDep=kr.depsTail,kr.depsTail.nextDep=i,kr.depsTail=i):kr.deps=kr.depsTail=i,AV(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const r=i.nextDep;r.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=r),i.prevDep=kr.depsTail,i.nextDep=void 0,kr.depsTail.nextDep=i,kr.depsTail=i,kr.deps===i&&(kr.deps=r)}return i}trigger(t){this.version++,Kg++,this.notify(t)}notify(t){E5();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{A5()}}}function AV(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)AV(r)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const T2=new WeakMap,Tf=Symbol(""),bE=Symbol(""),Xg=Symbol("");function ka(e,t,i){if(vl&&kr){let r=T2.get(e);r||T2.set(e,r=new Map);let n=r.get(i);n||(r.set(i,n=new T5),n.map=r,n.key=i),n.track()}}function uu(e,t,i,r,n,a){const s=T2.get(e);if(!s){Kg++;return}const o=l=>{l&&l.trigger()};if(E5(),t==="clear")s.forEach(o);else{const l=ei(e),c=l&&S5(i);if(l&&i==="length"){const u=Number(r);s.forEach((d,h)=>{(h==="length"||h===Xg||!bl(h)&&h>=u)&&o(d)})}else switch((i!==void 0||s.has(void 0))&&o(s.get(i)),c&&o(s.get(Xg)),t){case"add":l?c&&o(s.get("length")):(o(s.get(Tf)),Dm(e)&&o(s.get(bE)));break;case"delete":l||(o(s.get(Tf)),Dm(e)&&o(s.get(bE)));break;case"set":Dm(e)&&o(s.get(Tf));break}}A5()}function Bee(e,t){const i=T2.get(e);return i&&i.get(t)}function gp(e){const t=Ui(e);return t===e?t:(ka(t,"iterate",Xg),Mo(e)?t:t.map(La))}function P_(e){return ka(e=Ui(e),"iterate",Xg),e}const Nee={__proto__:null,[Symbol.iterator](){return f3(this,Symbol.iterator,La)},concat(...e){return gp(this).concat(...e.map(t=>ei(t)?gp(t):t))},entries(){return f3(this,"entries",e=>(e[1]=La(e[1]),e))},every(e,t){return Vc(this,"every",e,t,void 0,arguments)},filter(e,t){return Vc(this,"filter",e,t,i=>i.map(La),arguments)},find(e,t){return Vc(this,"find",e,t,La,arguments)},findIndex(e,t){return Vc(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Vc(this,"findLast",e,t,La,arguments)},findLastIndex(e,t){return Vc(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Vc(this,"forEach",e,t,void 0,arguments)},includes(...e){return p3(this,"includes",e)},indexOf(...e){return p3(this,"indexOf",e)},join(e){return gp(this).join(e)},lastIndexOf(...e){return p3(this,"lastIndexOf",e)},map(e,t){return Vc(this,"map",e,t,void 0,arguments)},pop(){return g0(this,"pop")},push(...e){return g0(this,"push",e)},reduce(e,...t){return rO(this,"reduce",e,t)},reduceRight(e,...t){return rO(this,"reduceRight",e,t)},shift(){return g0(this,"shift")},some(e,t){return Vc(this,"some",e,t,void 0,arguments)},splice(...e){return g0(this,"splice",e)},toReversed(){return gp(this).toReversed()},toSorted(e){return gp(this).toSorted(e)},toSpliced(...e){return gp(this).toSpliced(...e)},unshift(...e){return g0(this,"unshift",e)},values(){return f3(this,"values",La)}};function f3(e,t,i){const r=P_(e),n=r[t]();return r!==e&&!Mo(e)&&(n._next=n.next,n.next=()=>{const a=n._next();return a.value&&(a.value=i(a.value)),a}),n}const Fee=Array.prototype;function Vc(e,t,i,r,n,a){const s=P_(e),o=s!==e&&!Mo(e),l=s[t];if(l!==Fee[t]){const d=l.apply(e,a);return o?La(d):d}let c=i;s!==e&&(o?c=function(d,h){return i.call(this,La(d),h,e)}:i.length>2&&(c=function(d,h){return i.call(this,d,h,e)}));const u=l.call(s,c,r);return o&&n?n(u):u}function rO(e,t,i,r){const n=P_(e);let a=i;return n!==e&&(Mo(e)?i.length>3&&(a=function(s,o,l){return i.call(this,s,o,l,e)}):a=function(s,o,l){return i.call(this,s,La(o),l,e)}),n[t](a,...r)}function p3(e,t,i){const r=Ui(e);ka(r,"iterate",Xg);const n=r[t](...i);return(n===-1||n===!1)&&I5(i[0])?(i[0]=Ui(i[0]),r[t](...i)):n}function g0(e,t,i=[]){wh(),E5();const r=Ui(e)[t].apply(e,i);return A5(),xh(),r}const zee=w5("__proto__,__v_isRef,__isVue"),MV=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(bl));function Vee(e){bl(e)||(e=String(e));const t=Ui(this);return ka(t,"has",e),t.hasOwnProperty(e)}class TV{constructor(t=!1,i=!1){this._isReadonly=t,this._isShallow=i}get(t,i,r){if(i==="__v_skip")return t.__v_skip;const n=this._isReadonly,a=this._isShallow;if(i==="__v_isReactive")return!n;if(i==="__v_isReadonly")return n;if(i==="__v_isShallow")return a;if(i==="__v_raw")return r===(n?a?Kee:OV:a?IV:DV).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const s=ei(t);if(!n){let l;if(s&&(l=Nee[i]))return l;if(i==="hasOwnProperty")return Vee}const o=Reflect.get(t,i,Ji(t)?t:r);return(bl(i)?MV.has(i):zee(i))||(n||ka(t,"get",i),a)?o:Ji(o)?s&&S5(i)?o:o.value:Ar(o)?n?K1(o):bi(o):o}}class PV extends TV{constructor(t=!1){super(!1,t)}set(t,i,r,n){let a=t[i];if(!this._isShallow){const l=rh(a);if(!Mo(r)&&!rh(r)&&(a=Ui(a),r=Ui(r)),!ei(t)&&Ji(a)&&!Ji(r))return l?!1:(a.value=r,!0)}const s=ei(t)&&S5(i)?Number(i)<t.length:ur(t,i),o=Reflect.set(t,i,r,Ji(t)?t:n);return t===Ui(n)&&(s?Gd(r,a)&&uu(t,"set",i,r):uu(t,"add",i,r)),o}deleteProperty(t,i){const r=ur(t,i);t[i];const n=Reflect.deleteProperty(t,i);return n&&r&&uu(t,"delete",i,void 0),n}has(t,i){const r=Reflect.has(t,i);return(!bl(i)||!MV.has(i))&&ka(t,"has",i),r}ownKeys(t){return ka(t,"iterate",ei(t)?"length":Tf),Reflect.ownKeys(t)}}class Uee extends TV{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const Hee=new PV,jee=new Uee,Wee=new PV(!0);const wE=e=>e,Vy=e=>Reflect.getPrototypeOf(e);function Gee(e,t,i){return function(...r){const n=this.__v_raw,a=Ui(n),s=Dm(a),o=e==="entries"||e===Symbol.iterator&&s,l=e==="keys"&&s,c=n[e](...r),u=i?wE:t?xE:La;return!t&&ka(a,"iterate",l?bE:Tf),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:o?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function Uy(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function $ee(e,t){const i={get(n){const a=this.__v_raw,s=Ui(a),o=Ui(n);e||(Gd(n,o)&&ka(s,"get",n),ka(s,"get",o));const{has:l}=Vy(s),c=t?wE:e?xE:La;if(l.call(s,n))return c(a.get(n));if(l.call(s,o))return c(a.get(o));a!==s&&a.get(n)},get size(){const n=this.__v_raw;return!e&&ka(Ui(n),"iterate",Tf),Reflect.get(n,"size",n)},has(n){const a=this.__v_raw,s=Ui(a),o=Ui(n);return e||(Gd(n,o)&&ka(s,"has",n),ka(s,"has",o)),n===o?a.has(n):a.has(n)||a.has(o)},forEach(n,a){const s=this,o=s.__v_raw,l=Ui(o),c=t?wE:e?xE:La;return!e&&ka(l,"iterate",Tf),o.forEach((u,d)=>n.call(a,c(u),c(d),s))}};return vn(i,e?{add:Uy("add"),set:Uy("set"),delete:Uy("delete"),clear:Uy("clear")}:{add(n){!t&&!Mo(n)&&!rh(n)&&(n=Ui(n));const a=Ui(this);return Vy(a).has.call(a,n)||(a.add(n),uu(a,"add",n,n)),this},set(n,a){!t&&!Mo(a)&&!rh(a)&&(a=Ui(a));const s=Ui(this),{has:o,get:l}=Vy(s);let c=o.call(s,n);c||(n=Ui(n),c=o.call(s,n));const u=l.call(s,n);return s.set(n,a),c?Gd(a,u)&&uu(s,"set",n,a):uu(s,"add",n,a),this},delete(n){const a=Ui(this),{has:s,get:o}=Vy(a);let l=s.call(a,n);l||(n=Ui(n),l=s.call(a,n)),o&&o.call(a,n);const c=a.delete(n);return l&&uu(a,"delete",n,void 0),c},clear(){const n=Ui(this),a=n.size!==0,s=n.clear();return a&&uu(n,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(n=>{i[n]=Gee(n,e,t)}),i}function P5(e,t){const i=$ee(e,t);return(r,n,a)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?r:Reflect.get(ur(i,n)&&n in r?i:r,n,a)}const Zee={get:P5(!1,!1)},qee={get:P5(!1,!0)},Yee={get:P5(!0,!1)};const DV=new WeakMap,IV=new WeakMap,OV=new WeakMap,Kee=new WeakMap;function Xee(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Qee(e){return e.__v_skip||!Object.isExtensible(e)?0:Xee(Cee(e))}function bi(e){return rh(e)?e:D5(e,!1,Hee,Zee,DV)}function oc(e){return D5(e,!1,Wee,qee,IV)}function K1(e){return D5(e,!0,jee,Yee,OV)}function D5(e,t,i,r,n){if(!Ar(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=n.get(e);if(a)return a;const s=Qee(e);if(s===0)return e;const o=new Proxy(e,s===2?r:i);return n.set(e,o),o}function Pf(e){return rh(e)?Pf(e.__v_raw):!!(e&&e.__v_isReactive)}function rh(e){return!!(e&&e.__v_isReadonly)}function Mo(e){return!!(e&&e.__v_isShallow)}function I5(e){return e?!!e.__v_raw:!1}function Ui(e){const t=e&&e.__v_raw;return t?Ui(t):e}function $d(e){return!ur(e,"__v_skip")&&Object.isExtensible(e)&&uV(e,"__v_skip",!0),e}const La=e=>Ar(e)?bi(e):e,xE=e=>Ar(e)?K1(e):e;function Ji(e){return e?e.__v_isRef===!0:!1}function j(e){return RV(e,!1)}function Wi(e){return RV(e,!0)}function RV(e,t){return Ji(e)?e:new Jee(e,t)}class Jee{constructor(t,i){this.dep=new T5,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?t:Ui(t),this._value=i?t:La(t),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(t){const i=this._rawValue,r=this.__v_isShallow||Mo(t)||rh(t);t=r?t:Ui(t),Gd(t,i)&&(this._rawValue=t,this._value=r?t:La(t),this.dep.trigger())}}function g(e){return Ji(e)?e.value:e}const ete={get:(e,t,i)=>t==="__v_raw"?e:g(Reflect.get(e,t,i)),set:(e,t,i,r)=>{const n=e[t];return Ji(n)&&!Ji(i)?(n.value=i,!0):Reflect.set(e,t,i,r)}};function kV(e){return Pf(e)?e:new Proxy(e,ete)}function Gn(e){const t=ei(e)?new Array(e.length):{};for(const i in e)t[i]=LV(e,i);return t}class tte{constructor(t,i,r){this._object=t,this._key=i,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Bee(Ui(this._object),this._key)}}class ite{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Di(e,t,i){return Ji(e)?e:yi(e)?new ite(e):Ar(e)&&arguments.length>1?LV(e,t,i):j(e)}function LV(e,t,i){const r=e[t];return Ji(r)?r:new tte(e,t,i)}class rte{constructor(t,i,r){this.fn=t,this.setter=i,this._value=void 0,this.dep=new T5(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Kg-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&kr!==this)return xV(this,!0),!0}get value(){const t=this.dep.track();return CV(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function nte(e,t,i=!1){let r,n;return yi(e)?r=e:(r=e.get,n=e.set),new rte(r,n,i)}const Hy={},P2=new WeakMap;let Kh;function ate(e,t=!1,i=Kh){if(i){let r=P2.get(i);r||P2.set(i,r=[]),r.push(e)}}function ste(e,t,i=Ir){const{immediate:r,deep:n,once:a,scheduler:s,augmentJob:o,call:l}=i,c=w=>n?w:Mo(w)||n===!1||n===0?du(w,1):du(w);let u,d,h,f,p=!1,m=!1;if(Ji(e)?(d=()=>e.value,p=Mo(e)):Pf(e)?(d=()=>c(e),p=!0):ei(e)?(m=!0,p=e.some(w=>Pf(w)||Mo(w)),d=()=>e.map(w=>{if(Ji(w))return w.value;if(Pf(w))return c(w);if(yi(w))return l?l(w,2):w()})):yi(e)?t?d=l?()=>l(e,2):e:d=()=>{if(h){wh();try{h()}finally{xh()}}const w=Kh;Kh=u;try{return l?l(e,3,[f]):e(f)}finally{Kh=w}}:d=ml,t&&n){const w=d,S=n===!0?1/0:n;d=()=>du(w(),S)}const v=C5(),y=()=>{u.stop(),v&&v.active&&_5(v.effects,u)};if(a&&t){const w=t;t=(...S)=>{w(...S),y()}}let x=m?new Array(e.length).fill(Hy):Hy;const b=w=>{if(!(!(u.flags&1)||!u.dirty&&!w))if(t){const S=u.run();if(n||p||(m?S.some((_,E)=>Gd(_,x[E])):Gd(S,x))){h&&h();const _=Kh;Kh=u;try{const E=[S,x===Hy?void 0:m&&x[0]===Hy?[]:x,f];l?l(t,3,E):t(...E),x=S}finally{Kh=_}}}else u.run()};return o&&o(b),u=new bV(d),u.scheduler=s?()=>s(b,!1):b,f=w=>ate(w,!1,u),h=u.onStop=()=>{const w=P2.get(u);if(w){if(l)l(w,4);else for(const S of w)S();P2.delete(u)}},t?r?b(!0):x=u.run():s?s(b.bind(null,!0),!0):u.run(),y.pause=u.pause.bind(u),y.resume=u.resume.bind(u),y.stop=y,y}function du(e,t=1/0,i){if(t<=0||!Ar(e)||e.__v_skip||(i=i||new Set,i.has(e)))return e;if(i.add(e),t--,Ji(e))du(e.value,t,i);else if(ei(e))for(let r=0;r<e.length;r++)du(e[r],t,i);else if(E_(e)||Dm(e))e.forEach(r=>{du(r,t,i)});else if(cV(e)){for(const r in e)du(e[r],t,i);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&du(e[r],t,i)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function X1(e,t,i,r){try{return r?e(...r):e()}catch(n){Fv(n,t,i)}}function wl(e,t,i,r){if(yi(e)){const n=X1(e,t,i,r);return n&&oV(n)&&n.catch(a=>{Fv(a,t,i)}),n}if(ei(e)){const n=[];for(let a=0;a<e.length;a++)n.push(wl(e[a],t,i,r));return n}}function Fv(e,t,i,r=!0){const n=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:s}=t&&t.appContext.config||Ir;if(t){let o=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${i}`;for(;o;){const u=o.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](e,l,c)===!1)return}o=o.parent}if(a){wh(),X1(a,null,10,[e,l,c]),xh();return}}ote(e,i,n,r,s)}function ote(e,t,i,r=!0,n=!1){if(n)throw e;console.error(e)}const ss=[];let Xl=-1;const Rm=[];let xd=null,rm=0;const BV=Promise.resolve();let D2=null;function ft(e){const t=D2||BV;return e?t.then(this?e.bind(this):e):t}function lte(e){let t=Xl+1,i=ss.length;for(;t<i;){const r=t+i>>>1,n=ss[r],a=Qg(n);a<e||a===e&&n.flags&2?t=r+1:i=r}return t}function O5(e){if(!(e.flags&1)){const t=Qg(e),i=ss[ss.length-1];!i||!(e.flags&2)&&t>=Qg(i)?ss.push(e):ss.splice(lte(t),0,e),e.flags|=1,NV()}}function NV(){D2||(D2=BV.then(FV))}function _E(e){ei(e)?Rm.push(...e):xd&&e.id===-1?xd.splice(rm+1,0,e):e.flags&1||(Rm.push(e),e.flags|=1),NV()}function nO(e,t,i=Xl+1){for(;i<ss.length;i++){const r=ss[i];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;ss.splice(i,1),i--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function I2(e){if(Rm.length){const t=[...new Set(Rm)].sort((i,r)=>Qg(i)-Qg(r));if(Rm.length=0,xd){xd.push(...t);return}for(xd=t,rm=0;rm<xd.length;rm++){const i=xd[rm];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}xd=null,rm=0}}const Qg=e=>e.id==null?e.flags&2?-1:1/0:e.id;function FV(e){try{for(Xl=0;Xl<ss.length;Xl++){const t=ss[Xl];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),X1(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Xl<ss.length;Xl++){const t=ss[Xl];t&&(t.flags&=-2)}Xl=-1,ss.length=0,I2(),D2=null,(ss.length||Rm.length)&&FV()}}let Hn=null,zV=null;function O2(e){const t=Hn;return Hn=e,zV=e&&e.type.__scopeId||null,t}function ve(e,t=Hn,i){if(!t||e._n)return e;const r=(...n)=>{r._d&&wO(-1);const a=O2(t);let s;try{s=e(...n)}finally{O2(a),r._d&&wO(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function Nt(e,t){if(Hn===null)return e;const i=L_(Hn),r=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[a,s,o,l=Ir]=t[n];a&&(yi(a)&&(a={mounted:a,updated:a}),a.deep&&du(s),r.push({dir:a,instance:i,value:s,oldValue:void 0,arg:o,modifiers:l}))}return e}function Ql(e,t,i,r){const n=e.dirs,a=t&&t.dirs;for(let s=0;s<n.length;s++){const o=n[s];a&&(o.oldValue=a[s].value);let l=o.dir[r];l&&(wh(),wl(l,i,8,[e.el,o,e,t]),xh())}}const VV=Symbol("_vte"),UV=e=>e.__isTeleport,wg=e=>e&&(e.disabled||e.disabled===""),aO=e=>e&&(e.defer||e.defer===""),sO=e=>typeof SVGElement<"u"&&e instanceof SVGElement,oO=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,SE=(e,t)=>{const i=e&&e.to;return jr(i)?t?t(i):null:i},HV={name:"Teleport",__isTeleport:!0,process(e,t,i,r,n,a,s,o,l,c){const{mc:u,pc:d,pbc:h,o:{insert:f,querySelector:p,createText:m,createComment:v}}=c,y=wg(t.props);let{shapeFlag:x,children:b,dynamicChildren:w}=t;if(e==null){const S=t.el=m(""),_=t.anchor=m("");f(S,i,r),f(_,i,r);const E=(A,M)=>{x&16&&(n&&n.isCE&&(n.ce._teleportTarget=A),u(b,A,M,n,a,s,o,l))},C=()=>{const A=t.target=SE(t.props,p),M=jV(A,t,m,f);A&&(s!=="svg"&&sO(A)?s="svg":s!=="mathml"&&oO(A)&&(s="mathml"),y||(E(A,M),zw(t,!1)))};y&&(E(i,_),zw(t,!0)),aO(t.props)?Bn(()=>{C(),t.el.__isMounted=!0},a):C()}else{if(aO(t.props)&&!e.el.__isMounted){Bn(()=>{HV.process(e,t,i,r,n,a,s,o,l,c),delete e.el.__isMounted},a);return}t.el=e.el,t.targetStart=e.targetStart;const S=t.anchor=e.anchor,_=t.target=e.target,E=t.targetAnchor=e.targetAnchor,C=wg(e.props),A=C?i:_,M=C?S:E;if(s==="svg"||sO(_)?s="svg":(s==="mathml"||oO(_))&&(s="mathml"),w?(h(e.dynamicChildren,w,A,n,a,s,o),V5(e,t,!0)):l||d(e,t,A,M,n,a,s,o,!1),y)C?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):jy(t,i,S,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const T=t.target=SE(t.props,p);T&&jy(t,T,null,c,0)}else C&&jy(t,_,E,c,1);zw(t,y)}},remove(e,t,i,{um:r,o:{remove:n}},a){const{shapeFlag:s,children:o,anchor:l,targetStart:c,targetAnchor:u,target:d,props:h}=e;if(d&&(n(c),n(u)),a&&n(l),s&16){const f=a||!wg(h);for(let p=0;p<o.length;p++){const m=o[p];r(m,t,i,f,!!m.dynamicChildren)}}},move:jy,hydrate:cte};function jy(e,t,i,{o:{insert:r},m:n},a=2){a===0&&r(e.targetAnchor,t,i);const{el:s,anchor:o,shapeFlag:l,children:c,props:u}=e,d=a===2;if(d&&r(s,t,i),(!d||wg(u))&&l&16)for(let h=0;h<c.length;h++)n(c[h],t,i,2);d&&r(o,t,i)}function cte(e,t,i,r,n,a,{o:{nextSibling:s,parentNode:o,querySelector:l,insert:c,createText:u}},d){const h=t.target=SE(t.props,l);if(h){const f=wg(t.props),p=h._lpa||h.firstChild;if(t.shapeFlag&16)if(f)t.anchor=d(s(e),t,o(e),i,r,n,a),t.targetStart=p,t.targetAnchor=p&&s(p);else{t.anchor=s(e);let m=p;for(;m;){if(m&&m.nodeType===8){if(m.data==="teleport start anchor")t.targetStart=m;else if(m.data==="teleport anchor"){t.targetAnchor=m,h._lpa=t.targetAnchor&&s(t.targetAnchor);break}}m=s(m)}t.targetAnchor||jV(h,t,u,c),d(p&&s(p),t,h,i,r,n,a)}zw(t,f)}return t.anchor&&s(t.anchor)}const ute=HV;function zw(e,t){const i=e.ctx;if(i&&i.ut){let r,n;for(t?(r=e.el,n=e.anchor):(r=e.targetStart,n=e.targetAnchor);r&&r!==n;)r.nodeType===1&&r.setAttribute("data-v-owner",i.uid),r=r.nextSibling;i.ut()}}function jV(e,t,i,r){const n=t.targetStart=i(""),a=t.targetAnchor=i("");return n[VV]=a,e&&(r(n,e),r(a,e)),a}const _d=Symbol("_leaveCb"),Wy=Symbol("_enterCb");function WV(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Lt(()=>{e.isMounted=!0}),Bi(()=>{e.isUnmounting=!0}),e}const no=[Function,Array],GV={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:no,onEnter:no,onAfterEnter:no,onEnterCancelled:no,onBeforeLeave:no,onLeave:no,onAfterLeave:no,onLeaveCancelled:no,onBeforeAppear:no,onAppear:no,onAfterAppear:no,onAppearCancelled:no},$V=e=>{const t=e.subTree;return t.component?$V(t.component):t},dte={name:"BaseTransition",props:GV,setup(e,{slots:t}){const i=Ut(),r=WV();return()=>{const n=t.default&&R5(t.default(),!0);if(!n||!n.length)return;const a=ZV(n),s=Ui(e),{mode:o}=s;if(r.isLeaving)return m3(a);const l=lO(a);if(!l)return m3(a);let c=Jg(l,s,r,i,d=>c=d);l.type!==Zr&&nh(l,c);let u=i.subTree&&lO(i.subTree);if(u&&u.type!==Zr&&!ol(l,u)&&$V(i).type!==Zr){let d=Jg(u,s,r,i);if(nh(u,d),o==="out-in"&&l.type!==Zr)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,i.job.flags&8||i.update(),delete d.afterLeave,u=void 0},m3(a);o==="in-out"&&l.type!==Zr?d.delayLeave=(h,f,p)=>{const m=qV(r,u);m[String(u.key)]=u,h[_d]=()=>{f(),h[_d]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{p(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return a}}};function ZV(e){let t=e[0];if(e.length>1){for(const i of e)if(i.type!==Zr){t=i;break}}return t}const hte=dte;function qV(e,t){const{leavingVNodes:i}=e;let r=i.get(t.type);return r||(r=Object.create(null),i.set(t.type,r)),r}function Jg(e,t,i,r,n){const{appear:a,mode:s,persisted:o=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:h,onLeave:f,onAfterLeave:p,onLeaveCancelled:m,onBeforeAppear:v,onAppear:y,onAfterAppear:x,onAppearCancelled:b}=t,w=String(e.key),S=qV(i,e),_=(A,M)=>{A&&wl(A,r,9,M)},E=(A,M)=>{const T=M[1];_(A,M),ei(A)?A.every(P=>P.length<=1)&&T():A.length<=1&&T()},C={mode:s,persisted:o,beforeEnter(A){let M=l;if(!i.isMounted)if(a)M=v||l;else return;A[_d]&&A[_d](!0);const T=S[w];T&&ol(e,T)&&T.el[_d]&&T.el[_d](),_(M,[A])},enter(A){let M=c,T=u,P=d;if(!i.isMounted)if(a)M=y||c,T=x||u,P=b||d;else return;let D=!1;const k=A[Wy]=L=>{D||(D=!0,L?_(P,[A]):_(T,[A]),C.delayedLeave&&C.delayedLeave(),A[Wy]=void 0)};M?E(M,[A,k]):k()},leave(A,M){const T=String(e.key);if(A[Wy]&&A[Wy](!0),i.isUnmounting)return M();_(h,[A]);let P=!1;const D=A[_d]=k=>{P||(P=!0,M(),k?_(m,[A]):_(p,[A]),A[_d]=void 0,S[T]===e&&delete S[T])};S[T]=e,f?E(f,[A,D]):D()},clone(A){const M=Jg(A,t,i,r,n);return n&&n(M),M}};return C}function m3(e){if(Q1(e))return e=gc(e),e.children=null,e}function lO(e){if(!Q1(e))return UV(e.type)&&e.children?ZV(e.children):e;const{shapeFlag:t,children:i}=e;if(i){if(t&16)return i[0];if(t&32&&yi(i.default))return i.default()}}function nh(e,t){e.shapeFlag&6&&e.component?(e.transition=t,nh(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function R5(e,t=!1,i){let r=[],n=0;for(let a=0;a<e.length;a++){let s=e[a];const o=i==null?s.key:String(i)+String(s.key!=null?s.key:a);s.type===ht?(s.patchFlag&128&&n++,r=r.concat(R5(s.children,t,o))):(t||s.type!==Zr)&&r.push(o!=null?gc(s,{key:o}):s)}if(n>1)for(let a=0;a<r.length;a++)r[a].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function ce(e,t){return yi(e)?vn({name:e.name},t,{setup:e}):e}function k5(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function e1(e,t,i,r,n=!1){if(ei(e)){e.forEach((p,m)=>e1(p,t&&(ei(t)?t[m]:t),i,r,n));return}if(Zd(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&e1(e,t,i,r.component.subTree);return}const a=r.shapeFlag&4?L_(r.component):r.el,s=n?null:a,{i:o,r:l}=e,c=t&&t.r,u=o.refs===Ir?o.refs={}:o.refs,d=o.setupState,h=Ui(d),f=d===Ir?()=>!1:p=>ur(h,p);if(c!=null&&c!==l&&(jr(c)?(u[c]=null,f(c)&&(d[c]=null)):Ji(c)&&(c.value=null)),yi(l))X1(l,o,12,[s,u]);else{const p=jr(l),m=Ji(l);if(p||m){const v=()=>{if(e.f){const y=p?f(l)?d[l]:u[l]:l.value;n?ei(y)&&_5(y,a):ei(y)?y.includes(a)||y.push(a):p?(u[l]=[a],f(l)&&(d[l]=u[l])):(l.value=[a],e.k&&(u[e.k]=l.value))}else p?(u[l]=s,f(l)&&(d[l]=s)):m&&(l.value=s,e.k&&(u[e.k]=s))};s?(v.id=-1,Bn(v,i)):v()}}}let cO=!1;const yp=()=>{cO||(console.error("Hydration completed but contains mismatches."),cO=!0)},fte=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",pte=e=>e.namespaceURI.includes("MathML"),Gy=e=>{if(e.nodeType===1){if(fte(e))return"svg";if(pte(e))return"mathml"}},gm=e=>e.nodeType===8;function mte(e){const{mt:t,p:i,o:{patchProp:r,createText:n,nextSibling:a,parentNode:s,remove:o,insert:l,createComment:c}}=e,u=(b,w)=>{if(!w.hasChildNodes()){i(null,b,w),I2(),w._vnode=b;return}d(w.firstChild,b,null,null,null),I2(),w._vnode=b},d=(b,w,S,_,E,C=!1)=>{C=C||!!w.dynamicChildren;const A=gm(b)&&b.data==="[",M=()=>m(b,w,S,_,E,A),{type:T,ref:P,shapeFlag:D,patchFlag:k}=w;let L=b.nodeType;w.el=b,k===-2&&(C=!1,w.dynamicChildren=null);let R=null;switch(T){case xu:L!==3?w.children===""?(l(w.el=n(""),s(b),b),R=b):R=M():(b.data!==w.children&&(yp(),b.data=w.children),R=a(b));break;case Zr:x(b)?(R=a(b),y(w.el=b.content.firstChild,b,S)):L!==8||A?R=M():R=a(b);break;case _g:if(A&&(b=a(b),L=b.nodeType),L===1||L===3){R=b;const N=!w.children.length;for(let I=0;I<w.staticCount;I++)N&&(w.children+=R.nodeType===1?R.outerHTML:R.data),I===w.staticCount-1&&(w.anchor=R),R=a(R);return A?a(R):R}else M();break;case ht:A?R=p(b,w,S,_,E,C):R=M();break;default:if(D&1)(L!==1||w.type.toLowerCase()!==b.tagName.toLowerCase())&&!x(b)?R=M():R=h(b,w,S,_,E,C);else if(D&6){w.slotScopeIds=E;const N=s(b);if(A?R=v(b):gm(b)&&b.data==="teleport start"?R=v(b,b.data,"teleport end"):R=a(b),t(w,N,null,S,_,Gy(N),C),Zd(w)&&!w.type.__asyncResolved){let I;A?(I=ne(ht),I.anchor=R?R.previousSibling:N.lastChild):I=b.nodeType===3?Xt(""):ne("div"),I.el=b,w.component.subTree=I}}else D&64?L!==8?R=M():R=w.type.hydrate(b,w,S,_,E,C,e,f):D&128&&(R=w.type.hydrate(b,w,S,_,Gy(s(b)),E,C,e,d))}return P!=null&&e1(P,null,_,w),R},h=(b,w,S,_,E,C)=>{C=C||!!w.dynamicChildren;const{type:A,props:M,patchFlag:T,shapeFlag:P,dirs:D,transition:k}=w,L=A==="input"||A==="option";if(L||T!==-1){D&&Ql(w,null,S,"created");let R=!1;if(x(b)){R=mU(null,k)&&S&&S.vnode.props&&S.vnode.props.appear;const I=b.content.firstChild;R&&k.beforeEnter(I),y(I,b,S),w.el=b=I}if(P&16&&!(M&&(M.innerHTML||M.textContent))){let I=f(b.firstChild,w,b,S,_,E,C);for(;I;){$y(b,1)||yp();const B=I;I=I.nextSibling,o(B)}}else if(P&8){let I=w.children;I[0]===`
`&&(b.tagName==="PRE"||b.tagName==="TEXTAREA")&&(I=I.slice(1)),b.textContent!==I&&($y(b,0)||yp(),b.textContent=w.children)}if(M){if(L||!C||T&48){const I=b.tagName.includes("-");for(const B in M)(L&&(B.endsWith("value")||B==="indeterminate")||Y1(B)&&!Im(B)||B[0]==="."||I)&&r(b,B,null,M[B],void 0,S)}else if(M.onClick)r(b,"onClick",null,M.onClick,void 0,S);else if(T&4&&Pf(M.style))for(const I in M.style)M.style[I]}let N;(N=M&&M.onVnodeBeforeMount)&&Cs(N,S,w),D&&Ql(w,null,S,"beforeMount"),((N=M&&M.onVnodeMounted)||D||R)&&xU(()=>{N&&Cs(N,S,w),R&&k.enter(b),D&&Ql(w,null,S,"mounted")},_)}return b.nextSibling},f=(b,w,S,_,E,C,A)=>{A=A||!!w.dynamicChildren;const M=w.children,T=M.length;for(let P=0;P<T;P++){const D=A?M[P]:M[P]=$s(M[P]),k=D.type===xu;b?(k&&!A&&P+1<T&&$s(M[P+1]).type===xu&&(l(n(b.data.slice(D.children.length)),S,a(b)),b.data=D.children),b=d(b,D,_,E,C,A)):k&&!D.children?l(D.el=n(""),S):($y(S,1)||yp(),i(null,D,S,null,_,E,Gy(S),C))}return b},p=(b,w,S,_,E,C)=>{const{slotScopeIds:A}=w;A&&(E=E?E.concat(A):A);const M=s(b),T=f(a(b),w,M,S,_,E,C);return T&&gm(T)&&T.data==="]"?a(w.anchor=T):(yp(),l(w.anchor=c("]"),M,T),T)},m=(b,w,S,_,E,C)=>{if($y(b.parentElement,1)||yp(),w.el=null,C){const T=v(b);for(;;){const P=a(b);if(P&&P!==T)o(P);else break}}const A=a(b),M=s(b);return o(b),i(null,w,M,A,S,_,Gy(M),E),S&&(S.vnode.el=w.el,k_(S,w.el)),A},v=(b,w="[",S="]")=>{let _=0;for(;b;)if(b=a(b),b&&gm(b)&&(b.data===w&&_++,b.data===S)){if(_===0)return a(b);_--}return b},y=(b,w,S)=>{const _=w.parentNode;_&&_.replaceChild(b,w);let E=S;for(;E;)E.vnode.el===w&&(E.vnode.el=E.subTree.el=b),E=E.parent},x=b=>b.nodeType===1&&b.tagName==="TEMPLATE";return[u,d]}const uO="data-allow-mismatch",vte={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function $y(e,t){if(t===0||t===1)for(;e&&!e.hasAttribute(uO);)e=e.parentElement;const i=e&&e.getAttribute(uO);if(i==null)return!1;if(i==="")return!0;{const r=i.split(",");return t===0&&r.includes("children")?!0:i.split(",").includes(vte[t])}}T_().requestIdleCallback;T_().cancelIdleCallback;function gte(e,t){if(gm(e)&&e.data==="["){let i=1,r=e.nextSibling;for(;r;){if(r.nodeType===1){if(t(r)===!1)break}else if(gm(r))if(r.data==="]"){if(--i===0)break}else r.data==="["&&i++;r=r.nextSibling}}else t(e)}const Zd=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function dO(e){yi(e)&&(e={loader:e});const{loader:t,loadingComponent:i,errorComponent:r,delay:n=200,hydrate:a,timeout:s,suspensible:o=!0,onError:l}=e;let c=null,u,d=0;const h=()=>(d++,c=null,f()),f=()=>{let p;return c||(p=c=t().catch(m=>{if(m=m instanceof Error?m:new Error(String(m)),l)return new Promise((v,y)=>{l(m,()=>v(h()),()=>y(m),d+1)});throw m}).then(m=>p!==c&&c?c:(m&&(m.__esModule||m[Symbol.toStringTag]==="Module")&&(m=m.default),u=m,m)))};return ce({name:"AsyncComponentWrapper",__asyncLoader:f,__asyncHydrate(p,m,v){const y=a?()=>{const x=a(v,b=>gte(p,b));x&&(m.bum||(m.bum=[])).push(x)}:v;u?y():f().then(()=>!m.isUnmounted&&y())},get __asyncResolved(){return u},setup(){const p=zn;if(k5(p),u)return()=>v3(u,p);const m=b=>{c=null,Fv(b,p,13,!r)};if(o&&p.suspense||rv)return f().then(b=>()=>v3(b,p)).catch(b=>(m(b),()=>r?ne(r,{error:b}):null));const v=j(!1),y=j(),x=j(!!n);return n&&setTimeout(()=>{x.value=!1},n),s!=null&&setTimeout(()=>{if(!v.value&&!y.value){const b=new Error(`Async component timed out after ${s}ms.`);m(b),y.value=b}},s),f().then(()=>{v.value=!0,p.parent&&Q1(p.parent.vnode)&&p.parent.update()}).catch(b=>{m(b),y.value=b}),()=>{if(v.value&&u)return v3(u,p);if(y.value&&r)return ne(r,{error:y.value});if(i&&!x.value)return ne(i)}}})}function v3(e,t){const{ref:i,props:r,children:n,ce:a}=t.vnode,s=ne(e,r,n);return s.ref=i,s.ce=a,delete t.vnode.ce,s}const Q1=e=>e.type.__isKeepAlive,yte={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const i=Ut(),r=i.ctx;if(!r.renderer)return()=>{const x=t.default&&t.default();return x&&x.length===1?x[0]:x};const n=new Map,a=new Set;let s=null;const o=i.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:d}}}=r,h=d("div");r.activate=(x,b,w,S,_)=>{const E=x.component;c(x,b,w,0,o),l(E.vnode,x,b,w,E,o,S,x.slotScopeIds,_),Bn(()=>{E.isDeactivated=!1,E.a&&Om(E.a);const C=x.props&&x.props.onVnodeMounted;C&&Cs(C,E.parent,x)},o)},r.deactivate=x=>{const b=x.component;k2(b.m),k2(b.a),c(x,h,null,1,o),Bn(()=>{b.da&&Om(b.da);const w=x.props&&x.props.onVnodeUnmounted;w&&Cs(w,b.parent,x),b.isDeactivated=!0},o)};function f(x){g3(x),u(x,i,o,!0)}function p(x){n.forEach((b,w)=>{const S=IE(b.type);S&&!x(S)&&m(w)})}function m(x){const b=n.get(x);b&&(!s||!ol(b,s))?f(b):s&&g3(s),n.delete(x),a.delete(x)}Ne(()=>[e.include,e.exclude],([x,b])=>{x&&p(w=>ig(x,w)),b&&p(w=>!ig(b,w))},{flush:"post",deep:!0});let v=null;const y=()=>{v!=null&&(L2(i.subTree.type)?Bn(()=>{n.set(v,Zy(i.subTree))},i.subTree.suspense):n.set(v,Zy(i.subTree)))};return Lt(y),Tl(y),Bi(()=>{n.forEach(x=>{const{subTree:b,suspense:w}=i,S=Zy(b);if(x.type===S.type&&x.key===S.key){g3(S);const _=S.component.da;_&&Bn(_,w);return}f(x)})}),()=>{if(v=null,!t.default)return s=null;const x=t.default(),b=x[0];if(x.length>1)return s=null,x;if(!rr(b)||!(b.shapeFlag&4)&&!(b.shapeFlag&128))return s=null,b;let w=Zy(b);if(w.type===Zr)return s=null,w;const S=w.type,_=IE(Zd(w)?w.type.__asyncResolved||{}:S),{include:E,exclude:C,max:A}=e;if(E&&(!_||!ig(E,_))||C&&_&&ig(C,_))return w.shapeFlag&=-257,s=w,b;const M=w.key==null?S:w.key,T=n.get(M);return w.el&&(w=gc(w),b.shapeFlag&128&&(b.ssContent=w)),v=M,T?(w.el=T.el,w.component=T.component,w.transition&&nh(w,w.transition),w.shapeFlag|=512,a.delete(M),a.add(M)):(a.add(M),A&&a.size>parseInt(A,10)&&m(a.values().next().value)),w.shapeFlag|=256,s=w,L2(b.type)?b:w}}},bte=yte;function ig(e,t){return ei(e)?e.some(i=>ig(i,t)):jr(e)?e.split(",").includes(t):See(e)?(e.lastIndex=0,e.test(t)):!1}function L5(e,t){KV(e,"a",t)}function YV(e,t){KV(e,"da",t)}function KV(e,t,i=zn){const r=e.__wdc||(e.__wdc=()=>{let n=i;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(D_(t,r,i),i){let n=i.parent;for(;n&&n.parent;)Q1(n.parent.vnode)&&wte(r,t,i,n),n=n.parent}}function wte(e,t,i,r){const n=D_(t,e,r,!0);zu(()=>{_5(r[t],n)},i)}function g3(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function Zy(e){return e.shapeFlag&128?e.ssContent:e}function D_(e,t,i=zn,r=!1){if(i){const n=i[e]||(i[e]=[]),a=t.__weh||(t.__weh=(...s)=>{wh();const o=J1(i),l=wl(t,i,e,s);return o(),xh(),l});return r?n.unshift(a):n.push(a),a}}const Fu=e=>(t,i=zn)=>{(!rv||e==="sp")&&D_(e,(...r)=>t(...r),i)},I_=Fu("bm"),Lt=Fu("m"),XV=Fu("bu"),Tl=Fu("u"),Bi=Fu("bum"),zu=Fu("um"),xte=Fu("sp"),_te=Fu("rtg"),Ste=Fu("rtc");function QV(e,t=zn){D_("ec",e,t)}const B5="components",Cte="directives";function Ht(e,t){return N5(B5,e,!0,t)||e}const JV=Symbol.for("v-ndc");function jt(e){return jr(e)?N5(B5,e,!1)||e:e||JV}function O_(e){return N5(Cte,e)}function N5(e,t,i=!0,r=!1){const n=Hn||zn;if(n){const a=n.type;if(e===B5){const o=IE(a,!1);if(o&&(o===t||o===ko(t)||o===M_(ko(t))))return a}const s=hO(n[e]||a[e],t)||hO(n.appContext[e],t);return!s&&r?a:s}}function hO(e,t){return e&&(e[t]||e[ko(t)]||e[M_(ko(t))])}function Qt(e,t,i,r){let n;const a=i,s=ei(e);if(s||jr(e)){const o=s&&Pf(e);let l=!1;o&&(l=!Mo(e),e=P_(e)),n=new Array(e.length);for(let c=0,u=e.length;c<u;c++)n[c]=t(l?La(e[c]):e[c],c,void 0,a)}else if(typeof e=="number"){n=new Array(e);for(let o=0;o<e;o++)n[o]=t(o+1,o,void 0,a)}else if(Ar(e))if(e[Symbol.iterator])n=Array.from(e,(o,l)=>t(o,l,void 0,a));else{const o=Object.keys(e);n=new Array(o.length);for(let l=0,c=o.length;l<c;l++){const u=o[l];n[l]=t(e[u],u,l,a)}}else n=[];return n}function Lo(e,t){for(let i=0;i<t.length;i++){const r=t[i];if(ei(r))for(let n=0;n<r.length;n++)e[r[n].name]=r[n].fn;else r&&(e[r.name]=r.key?(...n)=>{const a=r.fn(...n);return a&&(a.key=r.key),a}:r.fn)}return e}function Ee(e,t,i={},r,n){if(Hn.ce||Hn.parent&&Zd(Hn.parent)&&Hn.parent.ce)return t!=="default"&&(i.name=t),F(),De(ht,null,[ne("slot",i,r&&r())],64);let a=e[t];a&&a._c&&(a._d=!1),F();const s=a&&eU(a(i)),o=i.key||s&&s.key,l=De(ht,{key:(o&&!bl(o)?o:`_${t}`)+(!s&&r?"_fb":"")},s||(r?r():[]),s&&e._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),a&&a._c&&(a._d=!0),l}function eU(e){return e.some(t=>rr(t)?!(t.type===Zr||t.type===ht&&!eU(t.children)):!0)?e:null}function Ete(e,t){const i={};for(const r in e)i[gg(r)]=e[r];return i}const CE=e=>e?EU(e)?L_(e):CE(e.parent):null,xg=vn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>CE(e.parent),$root:e=>CE(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>F5(e),$forceUpdate:e=>e.f||(e.f=()=>{O5(e.update)}),$nextTick:e=>e.n||(e.n=ft.bind(e.proxy)),$watch:e=>Gte.bind(e)}),y3=(e,t)=>e!==Ir&&!e.__isScriptSetup&&ur(e,t),Ate={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:i,setupState:r,data:n,props:a,accessCache:s,type:o,appContext:l}=e;let c;if(t[0]!=="$"){const f=s[t];if(f!==void 0)switch(f){case 1:return r[t];case 2:return n[t];case 4:return i[t];case 3:return a[t]}else{if(y3(r,t))return s[t]=1,r[t];if(n!==Ir&&ur(n,t))return s[t]=2,n[t];if((c=e.propsOptions[0])&&ur(c,t))return s[t]=3,a[t];if(i!==Ir&&ur(i,t))return s[t]=4,i[t];EE&&(s[t]=0)}}const u=xg[t];let d,h;if(u)return t==="$attrs"&&ka(e.attrs,"get",""),u(e);if((d=o.__cssModules)&&(d=d[t]))return d;if(i!==Ir&&ur(i,t))return s[t]=4,i[t];if(h=l.config.globalProperties,ur(h,t))return h[t]},set({_:e},t,i){const{data:r,setupState:n,ctx:a}=e;return y3(n,t)?(n[t]=i,!0):r!==Ir&&ur(r,t)?(r[t]=i,!0):ur(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:r,appContext:n,propsOptions:a}},s){let o;return!!i[s]||e!==Ir&&ur(e,s)||y3(t,s)||(o=a[0])&&ur(o,s)||ur(r,s)||ur(xg,s)||ur(n.config.globalProperties,s)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:ur(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function In(){return tU().slots}function rp(){return tU().attrs}function tU(){const e=Ut();return e.setupContext||(e.setupContext=MU(e))}function fO(e){return ei(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let EE=!0;function Mte(e){const t=F5(e),i=e.proxy,r=e.ctx;EE=!1,t.beforeCreate&&pO(t.beforeCreate,e,"bc");const{data:n,computed:a,methods:s,watch:o,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:f,updated:p,activated:m,deactivated:v,beforeDestroy:y,beforeUnmount:x,destroyed:b,unmounted:w,render:S,renderTracked:_,renderTriggered:E,errorCaptured:C,serverPrefetch:A,expose:M,inheritAttrs:T,components:P,directives:D,filters:k}=t;if(c&&Tte(c,r,null),s)for(const N in s){const I=s[N];yi(I)&&(r[N]=I.bind(i))}if(n){const N=n.call(i,i);Ar(N)&&(e.data=bi(N))}if(EE=!0,a)for(const N in a){const I=a[N],B=yi(I)?I.bind(i,i):yi(I.get)?I.get.bind(i,i):ml,z=!yi(I)&&yi(I.set)?I.set.bind(i):ml,V=O({get:B,set:z});Object.defineProperty(r,N,{enumerable:!0,configurable:!0,get:()=>V.value,set:W=>V.value=W})}if(o)for(const N in o)iU(o[N],r,i,N);if(l){const N=yi(l)?l.call(i):l;Reflect.ownKeys(N).forEach(I=>{Yt(I,N[I])})}u&&pO(u,e,"c");function R(N,I){ei(I)?I.forEach(B=>N(B.bind(i))):I&&N(I.bind(i))}if(R(I_,d),R(Lt,h),R(XV,f),R(Tl,p),R(L5,m),R(YV,v),R(QV,C),R(Ste,_),R(_te,E),R(Bi,x),R(zu,w),R(xte,A),ei(M))if(M.length){const N=e.exposed||(e.exposed={});M.forEach(I=>{Object.defineProperty(N,I,{get:()=>i[I],set:B=>i[I]=B})})}else e.exposed||(e.exposed={});S&&e.render===ml&&(e.render=S),T!=null&&(e.inheritAttrs=T),P&&(e.components=P),D&&(e.directives=D),A&&k5(e)}function Tte(e,t,i=ml){ei(e)&&(e=AE(e));for(const r in e){const n=e[r];let a;Ar(n)?"default"in n?a=rt(n.from||r,n.default,!0):a=rt(n.from||r):a=rt(n),Ji(a)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:s=>a.value=s}):t[r]=a}}function pO(e,t,i){wl(ei(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,i)}function iU(e,t,i,r){let n=r.includes(".")?gU(i,r):()=>i[r];if(jr(e)){const a=t[e];yi(a)&&Ne(n,a)}else if(yi(e))Ne(n,e.bind(i));else if(Ar(e))if(ei(e))e.forEach(a=>iU(a,t,i,r));else{const a=yi(e.handler)?e.handler.bind(i):t[e.handler];yi(a)&&Ne(n,a,e)}}function F5(e){const t=e.type,{mixins:i,extends:r}=t,{mixins:n,optionsCache:a,config:{optionMergeStrategies:s}}=e.appContext,o=a.get(t);let l;return o?l=o:!n.length&&!i&&!r?l=t:(l={},n.length&&n.forEach(c=>R2(l,c,s,!0)),R2(l,t,s)),Ar(t)&&a.set(t,l),l}function R2(e,t,i,r=!1){const{mixins:n,extends:a}=t;a&&R2(e,a,i,!0),n&&n.forEach(s=>R2(e,s,i,!0));for(const s in t)if(!(r&&s==="expose")){const o=Pte[s]||i&&i[s];e[s]=o?o(e[s],t[s]):t[s]}return e}const Pte={data:mO,props:vO,emits:vO,methods:rg,computed:rg,beforeCreate:is,created:is,beforeMount:is,mounted:is,beforeUpdate:is,updated:is,beforeDestroy:is,beforeUnmount:is,destroyed:is,unmounted:is,activated:is,deactivated:is,errorCaptured:is,serverPrefetch:is,components:rg,directives:rg,watch:Ite,provide:mO,inject:Dte};function mO(e,t){return t?e?function(){return vn(yi(e)?e.call(this,this):e,yi(t)?t.call(this,this):t)}:t:e}function Dte(e,t){return rg(AE(e),AE(t))}function AE(e){if(ei(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function is(e,t){return e?[...new Set([].concat(e,t))]:t}function rg(e,t){return e?vn(Object.create(null),e,t):t}function vO(e,t){return e?ei(e)&&ei(t)?[...new Set([...e,...t])]:vn(Object.create(null),fO(e),fO(t??{})):t}function Ite(e,t){if(!e)return t;if(!t)return e;const i=vn(Object.create(null),e);for(const r in t)i[r]=is(e[r],t[r]);return i}function rU(){return{app:null,config:{isNativeTag:xee,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ote=0;function Rte(e,t){return function(r,n=null){yi(r)||(r=vn({},r)),n!=null&&!Ar(n)&&(n=null);const a=rU(),s=new WeakSet,o=[];let l=!1;const c=a.app={_uid:Ote++,_component:r,_props:n,_container:null,_context:a,_instance:null,version:TU,get config(){return a.config},set config(u){},use(u,...d){return s.has(u)||(u&&yi(u.install)?(s.add(u),u.install(c,...d)):yi(u)&&(s.add(u),u(c,...d))),c},mixin(u){return a.mixins.includes(u)||a.mixins.push(u),c},component(u,d){return d?(a.components[u]=d,c):a.components[u]},directive(u,d){return d?(a.directives[u]=d,c):a.directives[u]},mount(u,d,h){if(!l){const f=c._ceVNode||ne(r,n);return f.appContext=a,h===!0?h="svg":h===!1&&(h=void 0),d&&t?t(f,u):e(f,u,h),l=!0,c._container=u,u.__vue_app__=c,L_(f.component)}},onUnmount(u){o.push(u)},unmount(){l&&(wl(o,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,d){return a.provides[u]=d,c},runWithContext(u){const d=Df;Df=c;try{return u()}finally{Df=d}}};return c}}let Df=null;function Yt(e,t){if(zn){let i=zn.provides;const r=zn.parent&&zn.parent.provides;r===i&&(i=zn.provides=Object.create(r)),i[e]=t}}function rt(e,t,i=!1){const r=zn||Hn;if(r||Df){const n=Df?Df._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return i&&yi(t)?t.call(r&&r.proxy):t}}function nU(){return!!(zn||Hn||Df)}const aU={},sU=()=>Object.create(aU),oU=e=>Object.getPrototypeOf(e)===aU;function kte(e,t,i,r=!1){const n={},a=sU();e.propsDefaults=Object.create(null),lU(e,t,n,a);for(const s in e.propsOptions[0])s in n||(n[s]=void 0);i?e.props=r?n:oc(n):e.type.props?e.props=n:e.props=a,e.attrs=a}function Lte(e,t,i,r){const{props:n,attrs:a,vnode:{patchFlag:s}}=e,o=Ui(n),[l]=e.propsOptions;let c=!1;if((r||s>0)&&!(s&16)){if(s&8){const u=e.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(R_(e.emitsOptions,h))continue;const f=t[h];if(l)if(ur(a,h))f!==a[h]&&(a[h]=f,c=!0);else{const p=ko(h);n[p]=ME(l,o,p,f,e,!1)}else f!==a[h]&&(a[h]=f,c=!0)}}}else{lU(e,t,n,a)&&(c=!0);let u;for(const d in o)(!t||!ur(t,d)&&((u=bh(d))===d||!ur(t,u)))&&(l?i&&(i[d]!==void 0||i[u]!==void 0)&&(n[d]=ME(l,o,d,void 0,e,!0)):delete n[d]);if(a!==o)for(const d in a)(!t||!ur(t,d))&&(delete a[d],c=!0)}c&&uu(e.attrs,"set","")}function lU(e,t,i,r){const[n,a]=e.propsOptions;let s=!1,o;if(t)for(let l in t){if(Im(l))continue;const c=t[l];let u;n&&ur(n,u=ko(l))?!a||!a.includes(u)?i[u]=c:(o||(o={}))[u]=c:R_(e.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,s=!0)}if(a){const l=Ui(i),c=o||Ir;for(let u=0;u<a.length;u++){const d=a[u];i[d]=ME(n,l,d,c[d],e,!ur(c,d))}}return s}function ME(e,t,i,r,n,a){const s=e[i];if(s!=null){const o=ur(s,"default");if(o&&r===void 0){const l=s.default;if(s.type!==Function&&!s.skipFactory&&yi(l)){const{propsDefaults:c}=n;if(i in c)r=c[i];else{const u=J1(n);r=c[i]=l.call(null,t),u()}}else r=l;n.ce&&n.ce._setProp(i,r)}s[0]&&(a&&!o?r=!1:s[1]&&(r===""||r===bh(i))&&(r=!0))}return r}const Bte=new WeakMap;function cU(e,t,i=!1){const r=i?Bte:t.propsCache,n=r.get(e);if(n)return n;const a=e.props,s={},o=[];let l=!1;if(!yi(e)){const u=d=>{l=!0;const[h,f]=cU(d,t,!0);vn(s,h),f&&o.push(...f)};!i&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!a&&!l)return Ar(e)&&r.set(e,Pm),Pm;if(ei(a))for(let u=0;u<a.length;u++){const d=ko(a[u]);gO(d)&&(s[d]=Ir)}else if(a)for(const u in a){const d=ko(u);if(gO(d)){const h=a[u],f=s[d]=ei(h)||yi(h)?{type:h}:vn({},h),p=f.type;let m=!1,v=!0;if(ei(p))for(let y=0;y<p.length;++y){const x=p[y],b=yi(x)&&x.name;if(b==="Boolean"){m=!0;break}else b==="String"&&(v=!1)}else m=yi(p)&&p.name==="Boolean";f[0]=m,f[1]=v,(m||ur(f,"default"))&&o.push(d)}}const c=[s,o];return Ar(e)&&r.set(e,c),c}function gO(e){return e[0]!=="$"&&!Im(e)}const uU=e=>e[0]==="_"||e==="$stable",z5=e=>ei(e)?e.map($s):[$s(e)],Nte=(e,t,i)=>{if(t._n)return t;const r=ve((...n)=>z5(t(...n)),i);return r._c=!1,r},dU=(e,t,i)=>{const r=e._ctx;for(const n in e){if(uU(n))continue;const a=e[n];if(yi(a))t[n]=Nte(n,a,r);else if(a!=null){const s=z5(a);t[n]=()=>s}}},hU=(e,t)=>{const i=z5(t);e.slots.default=()=>i},fU=(e,t,i)=>{for(const r in t)(i||r!=="_")&&(e[r]=t[r])},Fte=(e,t,i)=>{const r=e.slots=sU();if(e.vnode.shapeFlag&32){const n=t._;n?(fU(r,t,i),i&&uV(r,"_",n,!0)):dU(t,r)}else t&&hU(e,t)},zte=(e,t,i)=>{const{vnode:r,slots:n}=e;let a=!0,s=Ir;if(r.shapeFlag&32){const o=t._;o?i&&o===1?a=!1:fU(n,t,i):(a=!t.$stable,dU(t,n)),s=t}else t&&(hU(e,t),s={default:1});if(a)for(const o in n)!uU(o)&&s[o]==null&&delete n[o]},Bn=xU;function Vte(e){return pU(e)}function Ute(e){return pU(e,mte)}function pU(e,t){const i=T_();i.__VUE__=!0;const{insert:r,remove:n,patchProp:a,createElement:s,createText:o,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:f=ml,insertStaticContent:p}=e,m=(Z,oe,ge,Ie=null,we=null,xe=null,Se=void 0,Le=null,Be=!!oe.dynamicChildren)=>{if(Z===oe)return;Z&&!ol(Z,oe)&&(Ie=$(Z),W(Z,we,xe,!0),Z=null),oe.patchFlag===-2&&(Be=!1,oe.dynamicChildren=null);const{type:ee,ref:X,shapeFlag:ue}=oe;switch(ee){case xu:v(Z,oe,ge,Ie);break;case Zr:y(Z,oe,ge,Ie);break;case _g:Z==null&&x(oe,ge,Ie,Se);break;case ht:P(Z,oe,ge,Ie,we,xe,Se,Le,Be);break;default:ue&1?S(Z,oe,ge,Ie,we,xe,Se,Le,Be):ue&6?D(Z,oe,ge,Ie,we,xe,Se,Le,Be):(ue&64||ue&128)&&ee.process(Z,oe,ge,Ie,we,xe,Se,Le,Be,pe)}X!=null&&we&&e1(X,Z&&Z.ref,xe,oe||Z,!oe)},v=(Z,oe,ge,Ie)=>{if(Z==null)r(oe.el=o(oe.children),ge,Ie);else{const we=oe.el=Z.el;oe.children!==Z.children&&c(we,oe.children)}},y=(Z,oe,ge,Ie)=>{Z==null?r(oe.el=l(oe.children||""),ge,Ie):oe.el=Z.el},x=(Z,oe,ge,Ie)=>{[Z.el,Z.anchor]=p(Z.children,oe,ge,Ie,Z.el,Z.anchor)},b=({el:Z,anchor:oe},ge,Ie)=>{let we;for(;Z&&Z!==oe;)we=h(Z),r(Z,ge,Ie),Z=we;r(oe,ge,Ie)},w=({el:Z,anchor:oe})=>{let ge;for(;Z&&Z!==oe;)ge=h(Z),n(Z),Z=ge;n(oe)},S=(Z,oe,ge,Ie,we,xe,Se,Le,Be)=>{oe.type==="svg"?Se="svg":oe.type==="math"&&(Se="mathml"),Z==null?_(oe,ge,Ie,we,xe,Se,Le,Be):A(Z,oe,we,xe,Se,Le,Be)},_=(Z,oe,ge,Ie,we,xe,Se,Le)=>{let Be,ee;const{props:X,shapeFlag:ue,transition:Oe,dirs:Y}=Z;if(Be=Z.el=s(Z.type,xe,X&&X.is,X),ue&8?u(Be,Z.children):ue&16&&C(Z.children,Be,null,Ie,we,b3(Z,xe),Se,Le),Y&&Ql(Z,null,Ie,"created"),E(Be,Z,Z.scopeId,Se,Ie),X){for(const et in X)et!=="value"&&!Im(et)&&a(Be,et,null,X[et],xe,Ie);"value"in X&&a(Be,"value",null,X.value,xe),(ee=X.onVnodeBeforeMount)&&Cs(ee,Ie,Z)}Y&&Ql(Z,null,Ie,"beforeMount");const qe=mU(we,Oe);qe&&Oe.beforeEnter(Be),r(Be,oe,ge),((ee=X&&X.onVnodeMounted)||qe||Y)&&Bn(()=>{ee&&Cs(ee,Ie,Z),qe&&Oe.enter(Be),Y&&Ql(Z,null,Ie,"mounted")},we)},E=(Z,oe,ge,Ie,we)=>{if(ge&&f(Z,ge),Ie)for(let xe=0;xe<Ie.length;xe++)f(Z,Ie[xe]);if(we){let xe=we.subTree;if(oe===xe||L2(xe.type)&&(xe.ssContent===oe||xe.ssFallback===oe)){const Se=we.vnode;E(Z,Se,Se.scopeId,Se.slotScopeIds,we.parent)}}},C=(Z,oe,ge,Ie,we,xe,Se,Le,Be=0)=>{for(let ee=Be;ee<Z.length;ee++){const X=Z[ee]=Le?Sd(Z[ee]):$s(Z[ee]);m(null,X,oe,ge,Ie,we,xe,Se,Le)}},A=(Z,oe,ge,Ie,we,xe,Se)=>{const Le=oe.el=Z.el;let{patchFlag:Be,dynamicChildren:ee,dirs:X}=oe;Be|=Z.patchFlag&16;const ue=Z.props||Ir,Oe=oe.props||Ir;let Y;if(ge&&Bh(ge,!1),(Y=Oe.onVnodeBeforeUpdate)&&Cs(Y,ge,oe,Z),X&&Ql(oe,Z,ge,"beforeUpdate"),ge&&Bh(ge,!0),(ue.innerHTML&&Oe.innerHTML==null||ue.textContent&&Oe.textContent==null)&&u(Le,""),ee?M(Z.dynamicChildren,ee,Le,ge,Ie,b3(oe,we),xe):Se||I(Z,oe,Le,null,ge,Ie,b3(oe,we),xe,!1),Be>0){if(Be&16)T(Le,ue,Oe,ge,we);else if(Be&2&&ue.class!==Oe.class&&a(Le,"class",null,Oe.class,we),Be&4&&a(Le,"style",ue.style,Oe.style,we),Be&8){const qe=oe.dynamicProps;for(let et=0;et<qe.length;et++){const tt=qe[et],ze=ue[tt],vt=Oe[tt];(vt!==ze||tt==="value")&&a(Le,tt,ze,vt,we,ge)}}Be&1&&Z.children!==oe.children&&u(Le,oe.children)}else!Se&&ee==null&&T(Le,ue,Oe,ge,we);((Y=Oe.onVnodeUpdated)||X)&&Bn(()=>{Y&&Cs(Y,ge,oe,Z),X&&Ql(oe,Z,ge,"updated")},Ie)},M=(Z,oe,ge,Ie,we,xe,Se)=>{for(let Le=0;Le<oe.length;Le++){const Be=Z[Le],ee=oe[Le],X=Be.el&&(Be.type===ht||!ol(Be,ee)||Be.shapeFlag&70)?d(Be.el):ge;m(Be,ee,X,null,Ie,we,xe,Se,!0)}},T=(Z,oe,ge,Ie,we)=>{if(oe!==ge){if(oe!==Ir)for(const xe in oe)!Im(xe)&&!(xe in ge)&&a(Z,xe,oe[xe],null,we,Ie);for(const xe in ge){if(Im(xe))continue;const Se=ge[xe],Le=oe[xe];Se!==Le&&xe!=="value"&&a(Z,xe,Le,Se,we,Ie)}"value"in ge&&a(Z,"value",oe.value,ge.value,we)}},P=(Z,oe,ge,Ie,we,xe,Se,Le,Be)=>{const ee=oe.el=Z?Z.el:o(""),X=oe.anchor=Z?Z.anchor:o("");let{patchFlag:ue,dynamicChildren:Oe,slotScopeIds:Y}=oe;Y&&(Le=Le?Le.concat(Y):Y),Z==null?(r(ee,ge,Ie),r(X,ge,Ie),C(oe.children||[],ge,X,we,xe,Se,Le,Be)):ue>0&&ue&64&&Oe&&Z.dynamicChildren?(M(Z.dynamicChildren,Oe,ge,we,xe,Se,Le),(oe.key!=null||we&&oe===we.subTree)&&V5(Z,oe,!0)):I(Z,oe,ge,X,we,xe,Se,Le,Be)},D=(Z,oe,ge,Ie,we,xe,Se,Le,Be)=>{oe.slotScopeIds=Le,Z==null?oe.shapeFlag&512?we.ctx.activate(oe,ge,Ie,Se,Be):k(oe,ge,Ie,we,xe,Se,Be):L(Z,oe,Be)},k=(Z,oe,ge,Ie,we,xe,Se)=>{const Le=Z.component=oie(Z,Ie,we);if(Q1(Z)&&(Le.ctx.renderer=pe),lie(Le,!1,Se),Le.asyncDep){if(we&&we.registerDep(Le,R,Se),!Z.el){const Be=Le.subTree=ne(Zr);y(null,Be,oe,ge)}}else R(Le,Z,oe,ge,we,xe,Se)},L=(Z,oe,ge)=>{const Ie=oe.component=Z.component;if(Xte(Z,oe,ge))if(Ie.asyncDep&&!Ie.asyncResolved){N(Ie,oe,ge);return}else Ie.next=oe,Ie.update();else oe.el=Z.el,Ie.vnode=oe},R=(Z,oe,ge,Ie,we,xe,Se)=>{const Le=()=>{if(Z.isMounted){let{next:ue,bu:Oe,u:Y,parent:qe,vnode:et}=Z;{const Fe=vU(Z);if(Fe){ue&&(ue.el=et.el,N(Z,ue,Se)),Fe.asyncDep.then(()=>{Z.isUnmounted||Le()});return}}let tt=ue,ze;Bh(Z,!1),ue?(ue.el=et.el,N(Z,ue,Se)):ue=et,Oe&&Om(Oe),(ze=ue.props&&ue.props.onVnodeBeforeUpdate)&&Cs(ze,qe,ue,et),Bh(Z,!0);const vt=w3(Z),_e=Z.subTree;Z.subTree=vt,m(_e,vt,d(_e.el),$(_e),Z,we,xe),ue.el=vt.el,tt===null&&k_(Z,vt.el),Y&&Bn(Y,we),(ze=ue.props&&ue.props.onVnodeUpdated)&&Bn(()=>Cs(ze,qe,ue,et),we)}else{let ue;const{el:Oe,props:Y}=oe,{bm:qe,m:et,parent:tt,root:ze,type:vt}=Z,_e=Zd(oe);if(Bh(Z,!1),qe&&Om(qe),!_e&&(ue=Y&&Y.onVnodeBeforeMount)&&Cs(ue,tt,oe),Bh(Z,!0),Oe&&le){const Fe=()=>{Z.subTree=w3(Z),le(Oe,Z.subTree,Z,we,null)};_e&&vt.__asyncHydrate?vt.__asyncHydrate(Oe,Z,Fe):Fe()}else{ze.ce&&ze.ce._injectChildStyle(vt);const Fe=Z.subTree=w3(Z);m(null,Fe,ge,Ie,Z,we,xe),oe.el=Fe.el}if(et&&Bn(et,we),!_e&&(ue=Y&&Y.onVnodeMounted)){const Fe=oe;Bn(()=>Cs(ue,tt,Fe),we)}(oe.shapeFlag&256||tt&&Zd(tt.vnode)&&tt.vnode.shapeFlag&256)&&Z.a&&Bn(Z.a,we),Z.isMounted=!0,oe=ge=Ie=null}};Z.scope.on();const Be=Z.effect=new bV(Le);Z.scope.off();const ee=Z.update=Be.run.bind(Be),X=Z.job=Be.runIfDirty.bind(Be);X.i=Z,X.id=Z.uid,Be.scheduler=()=>O5(X),Bh(Z,!0),ee()},N=(Z,oe,ge)=>{oe.component=Z;const Ie=Z.vnode.props;Z.vnode=oe,Z.next=null,Lte(Z,oe.props,Ie,ge),zte(Z,oe.children,ge),wh(),nO(Z),xh()},I=(Z,oe,ge,Ie,we,xe,Se,Le,Be=!1)=>{const ee=Z&&Z.children,X=Z?Z.shapeFlag:0,ue=oe.children,{patchFlag:Oe,shapeFlag:Y}=oe;if(Oe>0){if(Oe&128){z(ee,ue,ge,Ie,we,xe,Se,Le,Be);return}else if(Oe&256){B(ee,ue,ge,Ie,we,xe,Se,Le,Be);return}}Y&8?(X&16&&J(ee,we,xe),ue!==ee&&u(ge,ue)):X&16?Y&16?z(ee,ue,ge,Ie,we,xe,Se,Le,Be):J(ee,we,xe,!0):(X&8&&u(ge,""),Y&16&&C(ue,ge,Ie,we,xe,Se,Le,Be))},B=(Z,oe,ge,Ie,we,xe,Se,Le,Be)=>{Z=Z||Pm,oe=oe||Pm;const ee=Z.length,X=oe.length,ue=Math.min(ee,X);let Oe;for(Oe=0;Oe<ue;Oe++){const Y=oe[Oe]=Be?Sd(oe[Oe]):$s(oe[Oe]);m(Z[Oe],Y,ge,null,we,xe,Se,Le,Be)}ee>X?J(Z,we,xe,!0,!1,ue):C(oe,ge,Ie,we,xe,Se,Le,Be,ue)},z=(Z,oe,ge,Ie,we,xe,Se,Le,Be)=>{let ee=0;const X=oe.length;let ue=Z.length-1,Oe=X-1;for(;ee<=ue&&ee<=Oe;){const Y=Z[ee],qe=oe[ee]=Be?Sd(oe[ee]):$s(oe[ee]);if(ol(Y,qe))m(Y,qe,ge,null,we,xe,Se,Le,Be);else break;ee++}for(;ee<=ue&&ee<=Oe;){const Y=Z[ue],qe=oe[Oe]=Be?Sd(oe[Oe]):$s(oe[Oe]);if(ol(Y,qe))m(Y,qe,ge,null,we,xe,Se,Le,Be);else break;ue--,Oe--}if(ee>ue){if(ee<=Oe){const Y=Oe+1,qe=Y<X?oe[Y].el:Ie;for(;ee<=Oe;)m(null,oe[ee]=Be?Sd(oe[ee]):$s(oe[ee]),ge,qe,we,xe,Se,Le,Be),ee++}}else if(ee>Oe)for(;ee<=ue;)W(Z[ee],we,xe,!0),ee++;else{const Y=ee,qe=ee,et=new Map;for(ee=qe;ee<=Oe;ee++){const se=oe[ee]=Be?Sd(oe[ee]):$s(oe[ee]);se.key!=null&&et.set(se.key,ee)}let tt,ze=0;const vt=Oe-qe+1;let _e=!1,Fe=0;const he=new Array(vt);for(ee=0;ee<vt;ee++)he[ee]=0;for(ee=Y;ee<=ue;ee++){const se=Z[ee];if(ze>=vt){W(se,we,xe,!0);continue}let He;if(se.key!=null)He=et.get(se.key);else for(tt=qe;tt<=Oe;tt++)if(he[tt-qe]===0&&ol(se,oe[tt])){He=tt;break}He===void 0?W(se,we,xe,!0):(he[He-qe]=ee+1,He>=Fe?Fe=He:_e=!0,m(se,oe[He],ge,null,we,xe,Se,Le,Be),ze++)}const ke=_e?Hte(he):Pm;for(tt=ke.length-1,ee=vt-1;ee>=0;ee--){const se=qe+ee,He=oe[se],yt=se+1<X?oe[se+1].el:Ie;he[ee]===0?m(null,He,ge,yt,we,xe,Se,Le,Be):_e&&(tt<0||ee!==ke[tt]?V(He,ge,yt,2):tt--)}}},V=(Z,oe,ge,Ie,we=null)=>{const{el:xe,type:Se,transition:Le,children:Be,shapeFlag:ee}=Z;if(ee&6){V(Z.component.subTree,oe,ge,Ie);return}if(ee&128){Z.suspense.move(oe,ge,Ie);return}if(ee&64){Se.move(Z,oe,ge,pe);return}if(Se===ht){r(xe,oe,ge);for(let ue=0;ue<Be.length;ue++)V(Be[ue],oe,ge,Ie);r(Z.anchor,oe,ge);return}if(Se===_g){b(Z,oe,ge);return}if(Ie!==2&&ee&1&&Le)if(Ie===0)Le.beforeEnter(xe),r(xe,oe,ge),Bn(()=>Le.enter(xe),we);else{const{leave:ue,delayLeave:Oe,afterLeave:Y}=Le,qe=()=>r(xe,oe,ge),et=()=>{ue(xe,()=>{qe(),Y&&Y()})};Oe?Oe(xe,qe,et):et()}else r(xe,oe,ge)},W=(Z,oe,ge,Ie=!1,we=!1)=>{const{type:xe,props:Se,ref:Le,children:Be,dynamicChildren:ee,shapeFlag:X,patchFlag:ue,dirs:Oe,cacheIndex:Y}=Z;if(ue===-2&&(we=!1),Le!=null&&e1(Le,null,ge,Z,!0),Y!=null&&(oe.renderCache[Y]=void 0),X&256){oe.ctx.deactivate(Z);return}const qe=X&1&&Oe,et=!Zd(Z);let tt;if(et&&(tt=Se&&Se.onVnodeBeforeUnmount)&&Cs(tt,oe,Z),X&6)ae(Z.component,ge,Ie);else{if(X&128){Z.suspense.unmount(ge,Ie);return}qe&&Ql(Z,null,oe,"beforeUnmount"),X&64?Z.type.remove(Z,oe,ge,pe,Ie):ee&&!ee.hasOnce&&(xe!==ht||ue>0&&ue&64)?J(ee,oe,ge,!1,!0):(xe===ht&&ue&384||!we&&X&16)&&J(Be,oe,ge),Ie&&G(Z)}(et&&(tt=Se&&Se.onVnodeUnmounted)||qe)&&Bn(()=>{tt&&Cs(tt,oe,Z),qe&&Ql(Z,null,oe,"unmounted")},ge)},G=Z=>{const{type:oe,el:ge,anchor:Ie,transition:we}=Z;if(oe===ht){q(ge,Ie);return}if(oe===_g){w(Z);return}const xe=()=>{n(ge),we&&!we.persisted&&we.afterLeave&&we.afterLeave()};if(Z.shapeFlag&1&&we&&!we.persisted){const{leave:Se,delayLeave:Le}=we,Be=()=>Se(ge,xe);Le?Le(Z.el,xe,Be):Be()}else xe()},q=(Z,oe)=>{let ge;for(;Z!==oe;)ge=h(Z),n(Z),Z=ge;n(oe)},ae=(Z,oe,ge)=>{const{bum:Ie,scope:we,job:xe,subTree:Se,um:Le,m:Be,a:ee}=Z;k2(Be),k2(ee),Ie&&Om(Ie),we.stop(),xe&&(xe.flags|=8,W(Se,Z,oe,ge)),Le&&Bn(Le,oe),Bn(()=>{Z.isUnmounted=!0},oe),oe&&oe.pendingBranch&&!oe.isUnmounted&&Z.asyncDep&&!Z.asyncResolved&&Z.suspenseId===oe.pendingId&&(oe.deps--,oe.deps===0&&oe.resolve())},J=(Z,oe,ge,Ie=!1,we=!1,xe=0)=>{for(let Se=xe;Se<Z.length;Se++)W(Z[Se],oe,ge,Ie,we)},$=Z=>{if(Z.shapeFlag&6)return $(Z.component.subTree);if(Z.shapeFlag&128)return Z.suspense.next();const oe=h(Z.anchor||Z.el),ge=oe&&oe[VV];return ge?h(ge):oe};let te=!1;const Q=(Z,oe,ge)=>{Z==null?oe._vnode&&W(oe._vnode,null,null,!0):m(oe._vnode||null,Z,oe,null,null,null,ge),oe._vnode=Z,te||(te=!0,nO(),I2(),te=!1)},pe={p:m,um:W,m:V,r:G,mt:k,mc:C,pc:I,pbc:M,n:$,o:e};let me,le;return t&&([me,le]=t(pe)),{render:Q,hydrate:me,createApp:Rte(Q,me)}}function b3({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function Bh({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function mU(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function V5(e,t,i=!1){const r=e.children,n=t.children;if(ei(r)&&ei(n))for(let a=0;a<r.length;a++){const s=r[a];let o=n[a];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=n[a]=Sd(n[a]),o.el=s.el),!i&&o.patchFlag!==-2&&V5(s,o)),o.type===xu&&(o.el=s.el)}}function Hte(e){const t=e.slice(),i=[0];let r,n,a,s,o;const l=e.length;for(r=0;r<l;r++){const c=e[r];if(c!==0){if(n=i[i.length-1],e[n]<c){t[r]=n,i.push(r);continue}for(a=0,s=i.length-1;a<s;)o=a+s>>1,e[i[o]]<c?a=o+1:s=o;c<e[i[a]]&&(a>0&&(t[r]=i[a-1]),i[a]=r)}}for(a=i.length,s=i[a-1];a-- >0;)i[a]=s,s=t[s];return i}function vU(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:vU(t)}function k2(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const jte=Symbol.for("v-scx"),Wte=()=>rt(jte);function Ca(e,t){return U5(e,null,t)}function Ne(e,t,i){return U5(e,t,i)}function U5(e,t,i=Ir){const{immediate:r,deep:n,flush:a,once:s}=i,o=vn({},i),l=t&&r||!t&&a!=="post";let c;if(rv){if(a==="sync"){const f=Wte();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=ml,f.resume=ml,f.pause=ml,f}}const u=zn;o.call=(f,p,m)=>wl(f,u,p,m);let d=!1;a==="post"?o.scheduler=f=>{Bn(f,u&&u.suspense)}:a!=="sync"&&(d=!0,o.scheduler=(f,p)=>{p?f():O5(f)}),o.augmentJob=f=>{t&&(f.flags|=4),d&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const h=ste(e,t,o);return rv&&(c?c.push(h):l&&h()),h}function Gte(e,t,i){const r=this.proxy,n=jr(e)?e.includes(".")?gU(r,e):()=>r[e]:e.bind(r,r);let a;yi(t)?a=t:(a=t.handler,i=t);const s=J1(this),o=U5(n,a.bind(r),i);return s(),o}function gU(e,t){const i=t.split(".");return()=>{let r=e;for(let n=0;n<i.length&&r;n++)r=r[i[n]];return r}}const $te=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${ko(t)}Modifiers`]||e[`${bh(t)}Modifiers`];function Zte(e,t,...i){if(e.isUnmounted)return;const r=e.vnode.props||Ir;let n=i;const a=t.startsWith("update:"),s=a&&$te(r,t.slice(7));s&&(s.trim&&(n=i.map(u=>jr(u)?u.trim():u)),s.number&&(n=i.map(gE)));let o,l=r[o=gg(t)]||r[o=gg(ko(t))];!l&&a&&(l=r[o=gg(bh(t))]),l&&wl(l,e,6,n);const c=r[o+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,wl(c,e,6,n)}}function yU(e,t,i=!1){const r=t.emitsCache,n=r.get(e);if(n!==void 0)return n;const a=e.emits;let s={},o=!1;if(!yi(e)){const l=c=>{const u=yU(c,t,!0);u&&(o=!0,vn(s,u))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!a&&!o?(Ar(e)&&r.set(e,null),null):(ei(a)?a.forEach(l=>s[l]=null):vn(s,a),Ar(e)&&r.set(e,s),s)}function R_(e,t){return!e||!Y1(t)?!1:(t=t.slice(2).replace(/Once$/,""),ur(e,t[0].toLowerCase()+t.slice(1))||ur(e,bh(t))||ur(e,t))}function w3(e){const{type:t,vnode:i,proxy:r,withProxy:n,propsOptions:[a],slots:s,attrs:o,emit:l,render:c,renderCache:u,props:d,data:h,setupState:f,ctx:p,inheritAttrs:m}=e,v=O2(e);let y,x;try{if(i.shapeFlag&4){const w=n||r,S=w;y=$s(c.call(S,w,u,d,f,h,p)),x=o}else{const w=t;y=$s(w.length>1?w(d,{attrs:o,slots:s,emit:l}):w(d,null)),x=t.props?o:Yte(o)}}catch(w){Sg.length=0,Fv(w,e,1),y=ne(Zr)}let b=y;if(x&&m!==!1){const w=Object.keys(x),{shapeFlag:S}=b;w.length&&S&7&&(a&&w.some(x5)&&(x=Kte(x,a)),b=gc(b,x,!1,!0))}return i.dirs&&(b=gc(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(i.dirs):i.dirs),i.transition&&nh(b,i.transition),y=b,O2(v),y}function qte(e,t=!0){let i;for(let r=0;r<e.length;r++){const n=e[r];if(rr(n)){if(n.type!==Zr||n.children==="v-if"){if(i)return;i=n}}else return}return i}const Yte=e=>{let t;for(const i in e)(i==="class"||i==="style"||Y1(i))&&((t||(t={}))[i]=e[i]);return t},Kte=(e,t)=>{const i={};for(const r in e)(!x5(r)||!(r.slice(9)in t))&&(i[r]=e[r]);return i};function Xte(e,t,i){const{props:r,children:n,component:a}=e,{props:s,children:o,patchFlag:l}=t,c=a.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return r?yO(r,s,c):!!s;if(l&8){const u=t.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(s[h]!==r[h]&&!R_(c,h))return!0}}}else return(n||o)&&(!o||!o.$stable)?!0:r===s?!1:r?s?yO(r,s,c):!0:!!s;return!1}function yO(e,t,i){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let n=0;n<r.length;n++){const a=r[n];if(t[a]!==e[a]&&!R_(i,a))return!0}return!1}function k_({vnode:e,parent:t},i){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=i,t=t.parent;else break}}const L2=e=>e.__isSuspense;let TE=0;const Qte={name:"Suspense",__isSuspense:!0,process(e,t,i,r,n,a,s,o,l,c){if(e==null)Jte(t,i,r,n,a,s,o,l,c);else{if(a&&a.deps>0&&!e.suspense.isInFallback){t.suspense=e.suspense,t.suspense.vnode=t,t.el=e.el;return}eie(e,t,i,r,n,s,o,l,c)}},hydrate:tie,normalize:iie},bU=Qte;function t1(e,t){const i=e.props&&e.props[t];yi(i)&&i()}function Jte(e,t,i,r,n,a,s,o,l){const{p:c,o:{createElement:u}}=l,d=u("div"),h=e.suspense=wU(e,n,r,t,d,i,a,s,o,l);c(null,h.pendingBranch=e.ssContent,d,null,r,h,a,s),h.deps>0?(t1(e,"onPending"),t1(e,"onFallback"),c(null,e.ssFallback,t,i,r,null,a,s),km(h,e.ssFallback)):h.resolve(!1,!0)}function eie(e,t,i,r,n,a,s,o,{p:l,um:c,o:{createElement:u}}){const d=t.suspense=e.suspense;d.vnode=t,t.el=e.el;const h=t.ssContent,f=t.ssFallback,{activeBranch:p,pendingBranch:m,isInFallback:v,isHydrating:y}=d;if(m)d.pendingBranch=h,ol(h,m)?(l(m,h,d.hiddenContainer,null,n,d,a,s,o),d.deps<=0?d.resolve():v&&(y||(l(p,f,i,r,n,null,a,s,o),km(d,f)))):(d.pendingId=TE++,y?(d.isHydrating=!1,d.activeBranch=m):c(m,n,d),d.deps=0,d.effects.length=0,d.hiddenContainer=u("div"),v?(l(null,h,d.hiddenContainer,null,n,d,a,s,o),d.deps<=0?d.resolve():(l(p,f,i,r,n,null,a,s,o),km(d,f))):p&&ol(h,p)?(l(p,h,i,r,n,d,a,s,o),d.resolve(!0)):(l(null,h,d.hiddenContainer,null,n,d,a,s,o),d.deps<=0&&d.resolve()));else if(p&&ol(h,p))l(p,h,i,r,n,d,a,s,o),km(d,h);else if(t1(t,"onPending"),d.pendingBranch=h,h.shapeFlag&512?d.pendingId=h.component.suspenseId:d.pendingId=TE++,l(null,h,d.hiddenContainer,null,n,d,a,s,o),d.deps<=0)d.resolve();else{const{timeout:x,pendingId:b}=d;x>0?setTimeout(()=>{d.pendingId===b&&d.fallback(f)},x):x===0&&d.fallback(f)}}function wU(e,t,i,r,n,a,s,o,l,c,u=!1){const{p:d,m:h,um:f,n:p,o:{parentNode:m,remove:v}}=c;let y;const x=rie(e);x&&t&&t.pendingBranch&&(y=t.pendingId,t.deps++);const b=e.props?dV(e.props.timeout):void 0,w=a,S={vnode:e,parent:t,parentComponent:i,namespace:s,container:r,hiddenContainer:n,deps:0,pendingId:TE++,timeout:typeof b=="number"?b:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(_=!1,E=!1){const{vnode:C,activeBranch:A,pendingBranch:M,pendingId:T,effects:P,parentComponent:D,container:k}=S;let L=!1;S.isHydrating?S.isHydrating=!1:_||(L=A&&M.transition&&M.transition.mode==="out-in",L&&(A.transition.afterLeave=()=>{T===S.pendingId&&(h(M,k,a===w?p(A):a,0),_E(P))}),A&&(m(A.el)===k&&(a=p(A)),f(A,D,S,!0)),L||h(M,k,a,0)),km(S,M),S.pendingBranch=null,S.isInFallback=!1;let R=S.parent,N=!1;for(;R;){if(R.pendingBranch){R.effects.push(...P),N=!0;break}R=R.parent}!N&&!L&&_E(P),S.effects=[],x&&t&&t.pendingBranch&&y===t.pendingId&&(t.deps--,t.deps===0&&!E&&t.resolve()),t1(C,"onResolve")},fallback(_){if(!S.pendingBranch)return;const{vnode:E,activeBranch:C,parentComponent:A,container:M,namespace:T}=S;t1(E,"onFallback");const P=p(C),D=()=>{S.isInFallback&&(d(null,_,M,P,A,null,T,o,l),km(S,_))},k=_.transition&&_.transition.mode==="out-in";k&&(C.transition.afterLeave=D),S.isInFallback=!0,f(C,A,null,!0),k||D()},move(_,E,C){S.activeBranch&&h(S.activeBranch,_,E,C),S.container=_},next(){return S.activeBranch&&p(S.activeBranch)},registerDep(_,E,C){const A=!!S.pendingBranch;A&&S.deps++;const M=_.vnode.el;_.asyncDep.catch(T=>{Fv(T,_,0)}).then(T=>{if(_.isUnmounted||S.isUnmounted||S.pendingId!==_.suspenseId)return;_.asyncResolved=!0;const{vnode:P}=_;DE(_,T,!1),M&&(P.el=M);const D=!M&&_.subTree.el;E(_,P,m(M||_.subTree.el),M?null:p(_.subTree),S,s,C),D&&v(D),k_(_,P.el),A&&--S.deps===0&&S.resolve()})},unmount(_,E){S.isUnmounted=!0,S.activeBranch&&f(S.activeBranch,i,_,E),S.pendingBranch&&f(S.pendingBranch,i,_,E)}};return S}function tie(e,t,i,r,n,a,s,o,l){const c=t.suspense=wU(t,r,i,e.parentNode,document.createElement("div"),null,n,a,s,o,!0),u=l(e,c.pendingBranch=t.ssContent,i,c,a,s);return c.deps===0&&c.resolve(!1,!0),u}function iie(e){const{shapeFlag:t,children:i}=e,r=t&32;e.ssContent=bO(r?i.default:i),e.ssFallback=r?bO(i.fallback):ne(Zr)}function bO(e){let t;if(yi(e)){const i=iv&&e._c;i&&(e._d=!1,F()),e=e(),i&&(e._d=!0,t=Ds,_U())}return ei(e)&&(e=qte(e)),e=$s(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(i=>i!==e)),e}function xU(e,t){t&&t.pendingBranch?ei(e)?t.effects.push(...e):t.effects.push(e):_E(e)}function km(e,t){e.activeBranch=t;const{vnode:i,parentComponent:r}=e;let n=t.el;for(;!n&&t.component;)t=t.component.subTree,n=t.el;i.el=n,r&&r.subTree===i&&(r.vnode.el=n,k_(r,n))}function rie(e){const t=e.props&&e.props.suspensible;return t!=null&&t!==!1}const ht=Symbol.for("v-fgt"),xu=Symbol.for("v-txt"),Zr=Symbol.for("v-cmt"),_g=Symbol.for("v-stc"),Sg=[];let Ds=null;function F(e=!1){Sg.push(Ds=e?null:[])}function _U(){Sg.pop(),Ds=Sg[Sg.length-1]||null}let iv=1;function wO(e,t=!1){iv+=e,e<0&&Ds&&t&&(Ds.hasOnce=!0)}function SU(e){return e.dynamicChildren=iv>0?Ds||Pm:null,_U(),iv>0&&Ds&&Ds.push(e),e}function K(e,t,i,r,n,a){return SU(ie(e,t,i,r,n,a,!0))}function De(e,t,i,r,n){return SU(ne(e,t,i,r,n,!0))}function rr(e){return e?e.__v_isVNode===!0:!1}function ol(e,t){return e.type===t.type&&e.key===t.key}const CU=({key:e})=>e??null,Vw=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?jr(e)||Ji(e)||yi(e)?{i:Hn,r:e,k:t,f:!!i}:e:null);function ie(e,t=null,i=null,r=0,n=null,a=e===ht?0:1,s=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&CU(t),ref:t&&Vw(t),scopeId:zV,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Hn};return o?(H5(l,i),a&128&&e.normalize(l)):i&&(l.shapeFlag|=jr(i)?8:16),iv>0&&!s&&Ds&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&Ds.push(l),l}const ne=nie;function nie(e,t=null,i=null,r=0,n=null,a=!1){if((!e||e===JV)&&(e=Zr),rr(e)){const o=gc(e,t,!0);return i&&H5(o,i),iv>0&&!a&&Ds&&(o.shapeFlag&6?Ds[Ds.indexOf(e)]=o:Ds.push(o)),o.patchFlag=-2,o}if(die(e)&&(e=e.__vccOpts),t){t=Au(t);let{class:o,style:l}=t;o&&!jr(o)&&(t.class=U(o)),Ar(l)&&(I5(l)&&!ei(l)&&(l=vn({},l)),t.style=mt(l))}const s=jr(e)?1:L2(e)?128:UV(e)?64:Ar(e)?4:yi(e)?2:0;return ie(e,t,i,r,n,s,a,!0)}function Au(e){return e?I5(e)||oU(e)?vn({},e):e:null}function gc(e,t,i=!1,r=!1){const{props:n,ref:a,patchFlag:s,children:o,transition:l}=e,c=t?$t(n||{},t):n,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&CU(c),ref:t&&t.ref?i&&a?ei(a)?a.concat(Vw(t)):[a,Vw(t)]:Vw(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ht?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&gc(e.ssContent),ssFallback:e.ssFallback&&gc(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&nh(u,l.clone(u)),u}function Xt(e=" ",t=0){return ne(xu,null,e,t)}function xO(e,t){const i=ne(_g,null,e);return i.staticCount=t,i}function Ae(e="",t=!1){return t?(F(),De(Zr,null,e)):ne(Zr,null,e)}function $s(e){return e==null||typeof e=="boolean"?ne(Zr):ei(e)?ne(ht,null,e.slice()):rr(e)?Sd(e):ne(xu,null,String(e))}function Sd(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:gc(e)}function H5(e,t){let i=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(ei(t))i=16;else if(typeof t=="object")if(r&65){const n=t.default;n&&(n._c&&(n._d=!1),H5(e,n()),n._c&&(n._d=!0));return}else{i=32;const n=t._;!n&&!oU(t)?t._ctx=Hn:n===3&&Hn&&(Hn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else yi(t)?(t={default:t,_ctx:Hn},i=32):(t=String(t),r&64?(i=16,t=[Xt(t)]):i=8);e.children=t,e.shapeFlag|=i}function $t(...e){const t={};for(let i=0;i<e.length;i++){const r=e[i];for(const n in r)if(n==="class")t.class!==r.class&&(t.class=U([t.class,r.class]));else if(n==="style")t.style=mt([t.style,r.style]);else if(Y1(n)){const a=t[n],s=r[n];s&&a!==s&&!(ei(a)&&a.includes(s))&&(t[n]=a?[].concat(a,s):s)}else n!==""&&(t[n]=r[n])}return t}function Cs(e,t,i,r=null){wl(e,t,7,[i,r])}const aie=rU();let sie=0;function oie(e,t,i){const r=e.type,n=(t?t.appContext:e.appContext)||aie,a={uid:sie++,vnode:e,type:r,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new vV(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:cU(r,n),emitsOptions:yU(r,n),emit:null,emitted:null,propsDefaults:Ir,inheritAttrs:r.inheritAttrs,ctx:Ir,data:Ir,props:Ir,attrs:Ir,slots:Ir,refs:Ir,setupState:Ir,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Zte.bind(null,a),e.ce&&e.ce(a),a}let zn=null;const Ut=()=>zn||Hn;let B2,PE;{const e=T_(),t=(i,r)=>{let n;return(n=e[i])||(n=e[i]=[]),n.push(r),a=>{n.length>1?n.forEach(s=>s(a)):n[0](a)}};B2=t("__VUE_INSTANCE_SETTERS__",i=>zn=i),PE=t("__VUE_SSR_SETTERS__",i=>rv=i)}const J1=e=>{const t=zn;return B2(e),e.scope.on(),()=>{e.scope.off(),B2(t)}},_O=()=>{zn&&zn.scope.off(),B2(null)};function EU(e){return e.vnode.shapeFlag&4}let rv=!1;function lie(e,t=!1,i=!1){t&&PE(t);const{props:r,children:n}=e.vnode,a=EU(e);kte(e,r,a,t),Fte(e,n,i);const s=a?cie(e,t):void 0;return t&&PE(!1),s}function cie(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Ate);const{setup:r}=i;if(r){wh();const n=e.setupContext=r.length>1?MU(e):null,a=J1(e),s=X1(r,e,0,[e.props,n]),o=oV(s);if(xh(),a(),(o||e.sp)&&!Zd(e)&&k5(e),o){if(s.then(_O,_O),t)return s.then(l=>{DE(e,l,t)}).catch(l=>{Fv(l,e,0)});e.asyncDep=s}else DE(e,s,t)}else AU(e,t)}function DE(e,t,i){yi(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ar(t)&&(e.setupState=kV(t)),AU(e,i)}let SO;function AU(e,t,i){const r=e.type;if(!e.render){if(!t&&SO&&!r.render){const n=r.template||F5(e).template;if(n){const{isCustomElement:a,compilerOptions:s}=e.appContext.config,{delimiters:o,compilerOptions:l}=r,c=vn(vn({isCustomElement:a,delimiters:o},s),l);r.render=SO(n,c)}}e.render=r.render||ml}{const n=J1(e);wh();try{Mte(e)}finally{xh(),n()}}}const uie={get(e,t){return ka(e,"get",""),e[t]}};function MU(e){const t=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,uie),slots:e.slots,emit:e.emit,expose:t}}function L_(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(kV($d(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in xg)return xg[i](e)},has(t,i){return i in t||i in xg}})):e.proxy}function IE(e,t=!0){return yi(e)?e.displayName||e.name:e.name||t&&e.__name}function die(e){return yi(e)&&"__vccOpts"in e}const O=(e,t)=>nte(e,t,rv);function dt(e,t,i){const r=arguments.length;return r===2?Ar(t)&&!ei(t)?rr(t)?ne(e,null,[t]):ne(e,t):ne(e,null,t):(r>3?i=Array.prototype.slice.call(arguments,2):r===3&&rr(i)&&(i=[i]),ne(e,t,i))}const TU="3.5.13",hie=ml;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let OE;const CO=typeof window<"u"&&window.trustedTypes;if(CO)try{OE=CO.createPolicy("vue",{createHTML:e=>e})}catch{}const PU=OE?e=>OE.createHTML(e):e=>e,fie="http://www.w3.org/2000/svg",pie="http://www.w3.org/1998/Math/MathML",iu=typeof document<"u"?document:null,EO=iu&&iu.createElement("template"),mie={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,r)=>{const n=t==="svg"?iu.createElementNS(fie,e):t==="mathml"?iu.createElementNS(pie,e):i?iu.createElement(e,{is:i}):iu.createElement(e);return e==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:e=>iu.createTextNode(e),createComment:e=>iu.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>iu.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,r,n,a){const s=i?i.previousSibling:t.lastChild;if(n&&(n===a||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),i),!(n===a||!(n=n.nextSibling)););else{EO.innerHTML=PU(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const o=EO.content;if(r==="svg"||r==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,i)}return[s?s.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},td="transition",y0="animation",nv=Symbol("_vtc"),DU={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},IU=vn({},GV,DU),vie=e=>(e.displayName="Transition",e.props=IU,e),Pn=vie((e,{slots:t})=>dt(hte,OU(e),t)),Nh=(e,t=[])=>{ei(e)?e.forEach(i=>i(...t)):e&&e(...t)},AO=e=>e?ei(e)?e.some(t=>t.length>1):e.length>1:!1;function OU(e){const t={};for(const P in e)P in DU||(t[P]=e[P]);if(e.css===!1)return t;const{name:i="v",type:r,duration:n,enterFromClass:a=`${i}-enter-from`,enterActiveClass:s=`${i}-enter-active`,enterToClass:o=`${i}-enter-to`,appearFromClass:l=a,appearActiveClass:c=s,appearToClass:u=o,leaveFromClass:d=`${i}-leave-from`,leaveActiveClass:h=`${i}-leave-active`,leaveToClass:f=`${i}-leave-to`}=e,p=gie(n),m=p&&p[0],v=p&&p[1],{onBeforeEnter:y,onEnter:x,onEnterCancelled:b,onLeave:w,onLeaveCancelled:S,onBeforeAppear:_=y,onAppear:E=x,onAppearCancelled:C=b}=t,A=(P,D,k,L)=>{P._enterCancelled=L,gd(P,D?u:o),gd(P,D?c:s),k&&k()},M=(P,D)=>{P._isLeaving=!1,gd(P,d),gd(P,f),gd(P,h),D&&D()},T=P=>(D,k)=>{const L=P?E:x,R=()=>A(D,P,k);Nh(L,[D,R]),MO(()=>{gd(D,P?l:a),Yl(D,P?u:o),AO(L)||TO(D,r,m,R)})};return vn(t,{onBeforeEnter(P){Nh(y,[P]),Yl(P,a),Yl(P,s)},onBeforeAppear(P){Nh(_,[P]),Yl(P,l),Yl(P,c)},onEnter:T(!1),onAppear:T(!0),onLeave(P,D){P._isLeaving=!0;const k=()=>M(P,D);Yl(P,d),P._enterCancelled?(Yl(P,h),RE()):(RE(),Yl(P,h)),MO(()=>{P._isLeaving&&(gd(P,d),Yl(P,f),AO(w)||TO(P,r,v,k))}),Nh(w,[P,k])},onEnterCancelled(P){A(P,!1,void 0,!0),Nh(b,[P])},onAppearCancelled(P){A(P,!0,void 0,!0),Nh(C,[P])},onLeaveCancelled(P){M(P),Nh(S,[P])}})}function gie(e){if(e==null)return null;if(Ar(e))return[x3(e.enter),x3(e.leave)];{const t=x3(e);return[t,t]}}function x3(e){return dV(e)}function Yl(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.add(i)),(e[nv]||(e[nv]=new Set)).add(t)}function gd(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const i=e[nv];i&&(i.delete(t),i.size||(e[nv]=void 0))}function MO(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let yie=0;function TO(e,t,i,r){const n=e._endId=++yie,a=()=>{n===e._endId&&r()};if(i!=null)return setTimeout(a,i);const{type:s,timeout:o,propCount:l}=RU(e,t);if(!s)return r();const c=s+"end";let u=0;const d=()=>{e.removeEventListener(c,h),a()},h=f=>{f.target===e&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},o+1),e.addEventListener(c,h)}function RU(e,t){const i=window.getComputedStyle(e),r=p=>(i[p]||"").split(", "),n=r(`${td}Delay`),a=r(`${td}Duration`),s=PO(n,a),o=r(`${y0}Delay`),l=r(`${y0}Duration`),c=PO(o,l);let u=null,d=0,h=0;t===td?s>0&&(u=td,d=s,h=a.length):t===y0?c>0&&(u=y0,d=c,h=l.length):(d=Math.max(s,c),u=d>0?s>c?td:y0:null,h=u?u===td?a.length:l.length:0);const f=u===td&&/\b(transform|all)(,|$)/.test(r(`${td}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:f}}function PO(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((i,r)=>DO(i)+DO(e[r])))}function DO(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function RE(){return document.body.offsetHeight}function bie(e,t,i){const r=e[nv];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const N2=Symbol("_vod"),kU=Symbol("_vsh"),_i={beforeMount(e,{value:t},{transition:i}){e[N2]=e.style.display==="none"?"":e.style.display,i&&t?i.beforeEnter(e):b0(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:r}){!t!=!i&&(r?t?(r.beforeEnter(e),b0(e,!0),r.enter(e)):r.leave(e,()=>{b0(e,!1)}):b0(e,t))},beforeUnmount(e,{value:t}){b0(e,t)}};function b0(e,t){e.style.display=t?e[N2]:"none",e[kU]=!t}const wie=Symbol(""),xie=/(^|;)\s*display\s*:/;function _ie(e,t,i){const r=e.style,n=jr(i);let a=!1;if(i&&!n){if(t)if(jr(t))for(const s of t.split(";")){const o=s.slice(0,s.indexOf(":")).trim();i[o]==null&&Uw(r,o,"")}else for(const s in t)i[s]==null&&Uw(r,s,"");for(const s in i)s==="display"&&(a=!0),Uw(r,s,i[s])}else if(n){if(t!==i){const s=r[wie];s&&(i+=";"+s),r.cssText=i,a=xie.test(i)}}else t&&e.removeAttribute("style");N2 in e&&(e[N2]=a?r.display:"",e[kU]&&(r.display="none"))}const IO=/\s*!important$/;function Uw(e,t,i){if(ei(i))i.forEach(r=>Uw(e,t,r));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const r=Sie(e,t);IO.test(i)?e.setProperty(bh(r),i.replace(IO,""),"important"):e[r]=i}}const OO=["Webkit","Moz","ms"],_3={};function Sie(e,t){const i=_3[t];if(i)return i;let r=ko(t);if(r!=="filter"&&r in e)return _3[t]=r;r=M_(r);for(let n=0;n<OO.length;n++){const a=OO[n]+r;if(a in e)return _3[t]=a}return t}const RO="http://www.w3.org/1999/xlink";function kO(e,t,i,r,n,a=Oee(t)){r&&t.startsWith("xlink:")?i==null?e.removeAttributeNS(RO,t.slice(6,t.length)):e.setAttributeNS(RO,t,i):i==null||a&&!hV(i)?e.removeAttribute(t):e.setAttribute(t,a?"":bl(i)?String(i):i)}function LO(e,t,i,r,n){if(t==="innerHTML"||t==="textContent"){i!=null&&(e[t]=t==="innerHTML"?PU(i):i);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const o=a==="OPTION"?e.getAttribute("value")||"":e.value,l=i==null?e.type==="checkbox"?"on":"":String(i);(o!==l||!("_value"in e))&&(e.value=l),i==null&&e.removeAttribute(t),e._value=i;return}let s=!1;if(i===""||i==null){const o=typeof e[t];o==="boolean"?i=hV(i):i==null&&o==="string"?(i="",s=!0):o==="number"&&(i=0,s=!0)}try{e[t]=i}catch{}s&&e.removeAttribute(n||t)}function Td(e,t,i,r){e.addEventListener(t,i,r)}function Cie(e,t,i,r){e.removeEventListener(t,i,r)}const BO=Symbol("_vei");function Eie(e,t,i,r,n=null){const a=e[BO]||(e[BO]={}),s=a[t];if(r&&s)s.value=r;else{const[o,l]=Aie(t);if(r){const c=a[t]=Pie(r,n);Td(e,o,c,l)}else s&&(Cie(e,o,s,l),a[t]=void 0)}}const NO=/(?:Once|Passive|Capture)$/;function Aie(e){let t;if(NO.test(e)){t={};let r;for(;r=e.match(NO);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):bh(e.slice(2)),t]}let S3=0;const Mie=Promise.resolve(),Tie=()=>S3||(Mie.then(()=>S3=0),S3=Date.now());function Pie(e,t){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;wl(Die(r,i.value),t,5,[r])};return i.value=e,i.attached=Tie(),i}function Die(e,t){if(ei(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(r=>n=>!n._stopped&&r&&r(n))}else return t}const FO=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Iie=(e,t,i,r,n,a)=>{const s=n==="svg";t==="class"?bie(e,r,s):t==="style"?_ie(e,i,r):Y1(t)?x5(t)||Eie(e,t,i,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Oie(e,t,r,s))?(LO(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&kO(e,t,r,s,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!jr(r))?LO(e,ko(t),r,a,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),kO(e,t,r,s))};function Oie(e,t,i,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&FO(t)&&yi(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return FO(t)&&jr(i)?!1:t in e}const LU=new WeakMap,BU=new WeakMap,F2=Symbol("_moveCb"),zO=Symbol("_enterCb"),Rie=e=>(delete e.props.mode,e),kie=Rie({name:"TransitionGroup",props:vn({},IU,{tag:String,moveClass:String}),setup(e,{slots:t}){const i=Ut(),r=WV();let n,a;return Tl(()=>{if(!n.length)return;const s=e.moveClass||`${e.name||"v"}-move`;if(!Fie(n[0].el,i.vnode.el,s))return;n.forEach(Lie),n.forEach(Bie);const o=n.filter(Nie);RE(),o.forEach(l=>{const c=l.el,u=c.style;Yl(c,s),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[F2]=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",d),c[F2]=null,gd(c,s))};c.addEventListener("transitionend",d)})}),()=>{const s=Ui(e),o=OU(s);let l=s.tag||ht;if(n=[],a)for(let c=0;c<a.length;c++){const u=a[c];u.el&&u.el instanceof Element&&(n.push(u),nh(u,Jg(u,o,r,i)),LU.set(u,u.el.getBoundingClientRect()))}a=t.default?R5(t.default()):[];for(let c=0;c<a.length;c++){const u=a[c];u.key!=null&&nh(u,Jg(u,o,r,i))}return ne(l,null,a)}}}),NU=kie;function Lie(e){const t=e.el;t[F2]&&t[F2](),t[zO]&&t[zO]()}function Bie(e){BU.set(e,e.el.getBoundingClientRect())}function Nie(e){const t=LU.get(e),i=BU.get(e),r=t.left-i.left,n=t.top-i.top;if(r||n){const a=e.el.style;return a.transform=a.webkitTransform=`translate(${r}px,${n}px)`,a.transitionDuration="0s",e}}function Fie(e,t,i){const r=e.cloneNode(),n=e[nv];n&&n.forEach(o=>{o.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),i.split(/\s+/).forEach(o=>o&&r.classList.add(o)),r.style.display="none";const a=t.nodeType===1?t:t.parentNode;a.appendChild(r);const{hasTransform:s}=RU(r);return a.removeChild(r),s}const av=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ei(t)?i=>Om(t,i):t};function zie(e){e.target.composing=!0}function VO(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const _u=Symbol("_assign"),j5={created(e,{modifiers:{lazy:t,trim:i,number:r}},n){e[_u]=av(n);const a=r||n.props&&n.props.type==="number";Td(e,t?"change":"input",s=>{if(s.target.composing)return;let o=e.value;i&&(o=o.trim()),a&&(o=gE(o)),e[_u](o)}),i&&Td(e,"change",()=>{e.value=e.value.trim()}),t||(Td(e,"compositionstart",zie),Td(e,"compositionend",VO),Td(e,"change",VO))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:i,modifiers:{lazy:r,trim:n,number:a}},s){if(e[_u]=av(s),e.composing)return;const o=(a||e.type==="number")&&!/^0\d/.test(e.value)?gE(e.value):e.value,l=t??"";o!==l&&(document.activeElement===e&&e.type!=="range"&&(r&&t===i||n&&e.value.trim()===l)||(e.value=l))}},z2={deep:!0,created(e,t,i){e[_u]=av(i),Td(e,"change",()=>{const r=e._modelValue,n=zU(e),a=e.checked,s=e[_u];if(ei(r)){const o=fV(r,n),l=o!==-1;if(a&&!l)s(r.concat(n));else if(!a&&l){const c=[...r];c.splice(o,1),s(c)}}else if(E_(r)){const o=new Set(r);a?o.add(n):o.delete(n),s(o)}else s(VU(e,a))})},mounted:UO,beforeUpdate(e,t,i){e[_u]=av(i),UO(e,t,i)}};function UO(e,{value:t,oldValue:i},r){e._modelValue=t;let n;if(ei(t))n=fV(t,r.props.value)>-1;else if(E_(t))n=t.has(r.props.value);else{if(t===i)return;n=tv(t,VU(e,!0))}e.checked!==n&&(e.checked=n)}const FU={created(e,{value:t},i){e.checked=tv(t,i.props.value),e[_u]=av(i),Td(e,"change",()=>{e[_u](zU(e))})},beforeUpdate(e,{value:t,oldValue:i},r){e[_u]=av(r),t!==i&&(e.checked=tv(t,r.props.value))}};function zU(e){return"_value"in e?e._value:e.value}function VU(e,t){const i=t?"_trueValue":"_falseValue";return i in e?e[i]:t}const Vie=["ctrl","shift","alt","meta"],Uie={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Vie.some(i=>e[`${i}Key`]&&!t.includes(i))},xt=(e,t)=>{const i=e._withMods||(e._withMods={}),r=t.join(".");return i[r]||(i[r]=(n,...a)=>{for(let s=0;s<t.length;s++){const o=Uie[t[s]];if(o&&o(n,t))return}return e(n,...a)})},Hie={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Hi=(e,t)=>{const i=e._withKeys||(e._withKeys={}),r=t.join(".");return i[r]||(i[r]=n=>{if(!("key"in n))return;const a=bh(n.key);if(t.some(s=>s===a||Hie[s]===a))return e(n)})},UU=vn({patchProp:Iie},mie);let Cg,HO=!1;function HU(){return Cg||(Cg=Vte(UU))}function jie(){return Cg=HO?Cg:Ute(UU),HO=!0,Cg}const ah=(...e)=>{HU().render(...e)},jU=(...e)=>{const t=HU().createApp(...e),{mount:i}=t;return t.mount=r=>{const n=GU(r);if(!n)return;const a=t._component;!yi(a)&&!a.render&&!a.template&&(a.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const s=i(n,!1,WU(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),s},t},Wie=(...e)=>{const t=jie().createApp(...e),{mount:i}=t;return t.mount=r=>{const n=GU(r);if(n)return i(n,!0,WU(n))},t};function WU(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function GU(e){return jr(e)?document.querySelector(e):e}const Gie=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,$ie=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Zie=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function qie(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){Yie(e);return}return t}function Yie(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function V2(e,t={}){if(typeof e!="string")return e;const i=e.trim();if(e[0]==='"'&&e.endsWith('"')&&!e.includes("\\"))return i.slice(1,-1);if(i.length<=9){const r=i.toLowerCase();if(r==="true")return!0;if(r==="false")return!1;if(r==="undefined")return;if(r==="null")return null;if(r==="nan")return Number.NaN;if(r==="infinity")return Number.POSITIVE_INFINITY;if(r==="-infinity")return Number.NEGATIVE_INFINITY}if(!Zie.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(Gie.test(e)||$ie.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,qie)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}const Kie=/#/g,Xie=/&/g,Qie=/\//g,Jie=/=/g,W5=/\+/g,ere=/%5e/gi,tre=/%60/gi,ire=/%7c/gi,rre=/%20/gi;function nre(e){return encodeURI(""+e).replace(ire,"|")}function kE(e){return nre(typeof e=="string"?e:JSON.stringify(e)).replace(W5,"%2B").replace(rre,"+").replace(Kie,"%23").replace(Xie,"%26").replace(tre,"`").replace(ere,"^").replace(Qie,"%2F")}function C3(e){return kE(e).replace(Jie,"%3D")}function U2(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function are(e){return U2(e.replace(W5," "))}function sre(e){return U2(e.replace(W5," "))}function $U(e=""){const t={};e[0]==="?"&&(e=e.slice(1));for(const i of e.split("&")){const r=i.match(/([^=]+)=?(.*)/)||[];if(r.length<2)continue;const n=are(r[1]);if(n==="__proto__"||n==="constructor")continue;const a=sre(r[2]||"");t[n]===void 0?t[n]=a:Array.isArray(t[n])?t[n].push(a):t[n]=[t[n],a]}return t}function ore(e,t){return(typeof t=="number"||typeof t=="boolean")&&(t=String(t)),t?Array.isArray(t)?t.map(i=>`${C3(e)}=${kE(i)}`).join("&"):`${C3(e)}=${kE(t)}`:C3(e)}function lre(e){return Object.keys(e).filter(t=>e[t]!==void 0).map(t=>ore(t,e[t])).filter(Boolean).join("&")}const cre=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,ure=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,dre=/^([/\\]\s*){2,}[^/\\]/,hre=/^[\s\0]*(blob|data|javascript|vbscript):$/i,fre=/\/$|\/\?|\/#/,pre=/^\.?\//;function Vu(e,t={}){return typeof t=="boolean"&&(t={acceptRelative:t}),t.strict?cre.test(e):ure.test(e)||(t.acceptRelative?dre.test(e):!1)}function mre(e){return!!e&&hre.test(e)}function LE(e="",t){return t?fre.test(e):e.endsWith("/")}function B_(e="",t){if(!t)return(LE(e)?e.slice(0,-1):e)||"/";if(!LE(e,!0))return e||"/";let i=e,r="";const n=e.indexOf("#");n>=0&&(i=e.slice(0,n),r=e.slice(n));const[a,...s]=i.split("?");return((a.endsWith("/")?a.slice(0,-1):a)||"/")+(s.length>0?`?${s.join("?")}`:"")+r}function H2(e="",t){if(!t)return e.endsWith("/")?e:e+"/";if(LE(e,!0))return e||"/";let i=e,r="";const n=e.indexOf("#");if(n>=0&&(i=e.slice(0,n),r=e.slice(n),!i))return r;const[a,...s]=i.split("?");return a+"/"+(s.length>0?`?${s.join("?")}`:"")+r}function vre(e=""){return e.startsWith("/")}function jO(e=""){return vre(e)?e:"/"+e}function gre(e,t){if(qU(t)||Vu(e))return e;const i=B_(t);return e.startsWith(i)?e:N_(i,e)}function WO(e,t){if(qU(t))return e;const i=B_(t);if(!e.startsWith(i))return e;const r=e.slice(i.length);return r[0]==="/"?r:"/"+r}function ZU(e,t){const i=wre(e),r={...$U(i.search),...t};return i.search=lre(r),xre(i)}function qU(e){return!e||e==="/"}function yre(e){return e&&e!=="/"}function N_(e,...t){let i=e||"";for(const r of t.filter(n=>yre(n)))if(i){const n=r.replace(pre,"");i=H2(i)+n}else i=r;return i}function YU(...e){var s,o,l,c;const t=/\/(?!\/)/,i=e.filter(Boolean),r=[];let n=0;for(const u of i)if(!(!u||u==="/")){for(const[d,h]of u.split(t).entries())if(!(!h||h===".")){if(h===".."){if(r.length===1&&Vu(r[0]))continue;r.pop(),n--;continue}if(d===1&&((s=r[r.length-1])!=null&&s.endsWith(":/"))){r[r.length-1]+="/"+h;continue}r.push(h),n++}}let a=r.join("/");return n>=0?(o=i[0])!=null&&o.startsWith("/")&&!a.startsWith("/")?a="/"+a:(l=i[0])!=null&&l.startsWith("./")&&!a.startsWith("./")&&(a="./"+a):a="../".repeat(-1*n)+a,(c=i[i.length-1])!=null&&c.endsWith("/")&&!a.endsWith("/")&&(a+="/"),a}function bre(e,t,i={}){return i.trailingSlash||(e=H2(e),t=H2(t)),i.leadingSlash||(e=jO(e),t=jO(t)),i.encoding||(e=U2(e),t=U2(t)),e===t}const KU=Symbol.for("ufo:protocolRelative");function wre(e="",t){const i=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(i){const[,d,h=""]=i;return{protocol:d.toLowerCase(),pathname:h,href:d+h,auth:"",host:"",search:"",hash:""}}if(!Vu(e,{acceptRelative:!0}))return GO(e);const[,r="",n,a=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,s="",o=""]=a.match(/([^#/?]*)(.*)?/)||[];r==="file:"&&(o=o.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:l,search:c,hash:u}=GO(o);return{protocol:r.toLowerCase(),auth:n?n.slice(0,Math.max(0,n.length-1)):"",host:s,pathname:l,search:c,hash:u,[KU]:!r}}function GO(e=""){const[t="",i="",r=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:i,hash:r}}function xre(e){const t=e.pathname||"",i=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",r=e.hash||"",n=e.auth?e.auth+"@":"",a=e.host||"";return(e.protocol||e[KU]?(e.protocol||"")+"//":"")+n+a+t+i+r}class _re extends Error{constructor(t,i){super(t,i),this.name="FetchError",i!=null&&i.cause&&!this.cause&&(this.cause=i.cause)}}function Sre(e){var l,c,u,d,h;const t=((l=e.error)==null?void 0:l.message)||((c=e.error)==null?void 0:c.toString())||"",i=((u=e.request)==null?void 0:u.method)||((d=e.options)==null?void 0:d.method)||"GET",r=((h=e.request)==null?void 0:h.url)||String(e.request)||"/",n=`[${i}] ${JSON.stringify(r)}`,a=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",s=`${n}: ${a}${t?` ${t}`:""}`,o=new _re(s,e.error?{cause:e.error}:void 0);for(const f of["request","options","response"])Object.defineProperty(o,f,{get(){return e[f]}});for(const[f,p]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(o,f,{get(){return e.response&&e.response[p]}});return o}const Cre=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function $O(e="GET"){return Cre.has(e.toUpperCase())}function Ere(e){if(e===void 0)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"||t===null?!0:t!=="object"?!1:Array.isArray(e)?!0:e.buffer?!1:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}const Are=new Set(["image/svg","application/xml","application/xhtml","application/html"]),Mre=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function Tre(e=""){if(!e)return"json";const t=e.split(";").shift()||"";return Mre.test(t)?"json":Are.has(t)||t.startsWith("text/")?"text":"blob"}function Pre(e,t,i,r){const n=Dre((t==null?void 0:t.headers)??(e==null?void 0:e.headers),i==null?void 0:i.headers,r);let a;return(i!=null&&i.query||i!=null&&i.params||t!=null&&t.params||t!=null&&t.query)&&(a={...i==null?void 0:i.params,...i==null?void 0:i.query,...t==null?void 0:t.params,...t==null?void 0:t.query}),{...i,...t,query:a,params:a,headers:n}}function Dre(e,t,i){if(!t)return new i(e);const r=new i(t);if(e)for(const[n,a]of Symbol.iterator in e||Array.isArray(e)?e:new i(e))r.set(n,a);return r}async function qy(e,t){if(t)if(Array.isArray(t))for(const i of t)await i(e);else await t(e)}const Ire=new Set([408,409,425,429,500,502,503,504]),Ore=new Set([101,204,205,304]);function XU(e={}){const{fetch:t=globalThis.fetch,Headers:i=globalThis.Headers,AbortController:r=globalThis.AbortController}=e;async function n(o){const l=o.error&&o.error.name==="AbortError"&&!o.options.timeout||!1;if(o.options.retry!==!1&&!l){let u;typeof o.options.retry=="number"?u=o.options.retry:u=$O(o.options.method)?0:1;const d=o.response&&o.response.status||500;if(u>0&&(Array.isArray(o.options.retryStatusCodes)?o.options.retryStatusCodes.includes(d):Ire.has(d))){const h=typeof o.options.retryDelay=="function"?o.options.retryDelay(o):o.options.retryDelay||0;return h>0&&await new Promise(f=>setTimeout(f,h)),a(o.request,{...o.options,retry:u-1})}}const c=Sre(o);throw Error.captureStackTrace&&Error.captureStackTrace(c,a),c}const a=async function(l,c={}){const u={request:l,options:Pre(l,c,e.defaults,i),response:void 0,error:void 0};u.options.method&&(u.options.method=u.options.method.toUpperCase()),u.options.onRequest&&await qy(u,u.options.onRequest),typeof u.request=="string"&&(u.options.baseURL&&(u.request=gre(u.request,u.options.baseURL)),u.options.query&&(u.request=ZU(u.request,u.options.query),delete u.options.query),"query"in u.options&&delete u.options.query,"params"in u.options&&delete u.options.params),u.options.body&&$O(u.options.method)&&(Ere(u.options.body)?(u.options.body=typeof u.options.body=="string"?u.options.body:JSON.stringify(u.options.body),u.options.headers=new i(u.options.headers||{}),u.options.headers.has("content-type")||u.options.headers.set("content-type","application/json"),u.options.headers.has("accept")||u.options.headers.set("accept","application/json")):("pipeTo"in u.options.body&&typeof u.options.body.pipeTo=="function"||typeof u.options.body.pipe=="function")&&("duplex"in u.options||(u.options.duplex="half")));let d;if(!u.options.signal&&u.options.timeout){const f=new r;d=setTimeout(()=>{const p=new Error("[TimeoutError]: The operation was aborted due to timeout");p.name="TimeoutError",p.code=23,f.abort(p)},u.options.timeout),u.options.signal=f.signal}try{u.response=await t(u.request,u.options)}catch(f){return u.error=f,u.options.onRequestError&&await qy(u,u.options.onRequestError),await n(u)}finally{d&&clearTimeout(d)}if((u.response.body||u.response._bodyInit)&&!Ore.has(u.response.status)&&u.options.method!=="HEAD"){const f=(u.options.parseResponse?"json":u.options.responseType)||Tre(u.response.headers.get("content-type")||"");switch(f){case"json":{const p=await u.response.text(),m=u.options.parseResponse||V2;u.response._data=m(p);break}case"stream":{u.response._data=u.response.body||u.response._bodyInit;break}default:u.response._data=await u.response[f]()}}return u.options.onResponse&&await qy(u,u.options.onResponse),!u.options.ignoreResponseError&&u.response.status>=400&&u.response.status<600?(u.options.onResponseError&&await qy(u,u.options.onResponseError),await n(u)):u.response},s=async function(l,c){return(await a(l,c))._data};return s.raw=a,s.native=(...o)=>t(...o),s.create=(o={},l={})=>XU({...e,...l,defaults:{...e.defaults,...l.defaults,...o}}),s}const j2=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),Rre=j2.fetch?(...e)=>j2.fetch(...e):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),kre=j2.Headers,Lre=j2.AbortController,Bre=XU({fetch:Rre,Headers:kre,AbortController:Lre}),Nre=Bre,Fre=()=>{var e;return((e=window==null?void 0:window.__NUXT__)==null?void 0:e.config)||{}},W2=Fre().app,zre=()=>W2.baseURL,Vre=()=>W2.buildAssetsDir,G5=(...e)=>YU(QU(),Vre(),...e),QU=(...e)=>{const t=W2.cdnURL||W2.baseURL;return e.length?YU(t,...e):t};globalThis.__buildAssetsURL=G5,globalThis.__publicAssetsURL=QU;globalThis.$fetch||(globalThis.$fetch=Nre.create({baseURL:zre()}));function BE(e,t={},i){for(const r in e){const n=e[r],a=i?`${i}:${r}`:r;typeof n=="object"&&n!==null?BE(n,t,a):typeof n=="function"&&(t[a]=n)}return t}const Ure={run:e=>e()},Hre=()=>Ure,JU=typeof console.createTask<"u"?console.createTask:Hre;function jre(e,t){const i=t.shift(),r=JU(i);return e.reduce((n,a)=>n.then(()=>r.run(()=>a(...t))),Promise.resolve())}function Wre(e,t){const i=t.shift(),r=JU(i);return Promise.all(e.map(n=>r.run(()=>n(...t))))}function E3(e,t){for(const i of[...e])i(t)}class Gre{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(t,i,r={}){if(!t||typeof i!="function")return()=>{};const n=t;let a;for(;this._deprecatedHooks[t];)a=this._deprecatedHooks[t],t=a.to;if(a&&!r.allowDeprecated){let s=a.message;s||(s=`${n} hook has been deprecated`+(a.to?`, please use ${a.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(s)||(console.warn(s),this._deprecatedMessages.add(s))}if(!i.name)try{Object.defineProperty(i,"name",{get:()=>"_"+t.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[t]=this._hooks[t]||[],this._hooks[t].push(i),()=>{i&&(this.removeHook(t,i),i=void 0)}}hookOnce(t,i){let r,n=(...a)=>(typeof r=="function"&&r(),r=void 0,n=void 0,i(...a));return r=this.hook(t,n),r}removeHook(t,i){if(this._hooks[t]){const r=this._hooks[t].indexOf(i);r!==-1&&this._hooks[t].splice(r,1),this._hooks[t].length===0&&delete this._hooks[t]}}deprecateHook(t,i){this._deprecatedHooks[t]=typeof i=="string"?{to:i}:i;const r=this._hooks[t]||[];delete this._hooks[t];for(const n of r)this.hook(t,n)}deprecateHooks(t){Object.assign(this._deprecatedHooks,t);for(const i in t)this.deprecateHook(i,t[i])}addHooks(t){const i=BE(t),r=Object.keys(i).map(n=>this.hook(n,i[n]));return()=>{for(const n of r.splice(0,r.length))n()}}removeHooks(t){const i=BE(t);for(const r in i)this.removeHook(r,i[r])}removeAllHooks(){for(const t in this._hooks)delete this._hooks[t]}callHook(t,...i){return i.unshift(t),this.callHookWith(jre,t,...i)}callHookParallel(t,...i){return i.unshift(t),this.callHookWith(Wre,t,...i)}callHookWith(t,i,...r){const n=this._before||this._after?{name:i,args:r,context:{}}:void 0;this._before&&E3(this._before,n);const a=t(i in this._hooks?[...this._hooks[i]]:[],r);return a instanceof Promise?a.finally(()=>{this._after&&n&&E3(this._after,n)}):(this._after&&n&&E3(this._after,n),a)}beforeEach(t){return this._before=this._before||[],this._before.push(t),()=>{if(this._before!==void 0){const i=this._before.indexOf(t);i!==-1&&this._before.splice(i,1)}}}afterEach(t){return this._after=this._after||[],this._after.push(t),()=>{if(this._after!==void 0){const i=this._after.indexOf(t);i!==-1&&this._after.splice(i,1)}}}}function eH(){return new Gre}function $re(e={}){let t,i=!1;const r=s=>{if(t&&t!==s)throw new Error("Context conflict")};let n;if(e.asyncContext){const s=e.AsyncLocalStorage||globalThis.AsyncLocalStorage;s?n=new s:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const a=()=>{if(n&&t===void 0){const s=n.getStore();if(s!==void 0)return s}return t};return{use:()=>{const s=a();if(s===void 0)throw new Error("Context is not available");return s},tryUse:()=>a(),set:(s,o)=>{o||r(s),t=s,i=!0},unset:()=>{t=void 0,i=!1},call:(s,o)=>{r(s),t=s;try{return n?n.run(s,o):o()}finally{i||(t=void 0)}},async callAsync(s,o){t=s;const l=()=>{t=s},c=()=>t===s?l:void 0;NE.add(c);try{const u=n?n.run(s,o):o();return i||(t=void 0),await u}finally{NE.delete(c)}}}}function Zre(e={}){const t={};return{get(i,r={}){return t[i]||(t[i]=$re({...e,...r})),t[i],t[i]}}}const G2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},ZO="__unctx__",qre=G2[ZO]||(G2[ZO]=Zre()),Yre=(e,t={})=>qre.get(e,t),qO="__unctx_async_handlers__",NE=G2[qO]||(G2[qO]=new Set);function Lm(e){const t=[];for(const n of NE){const a=n();a&&t.push(a)}const i=()=>{for(const n of t)n()};let r=e();return r&&typeof r=="object"&&"catch"in r&&(r=r.catch(n=>{throw i(),n})),[r,i]}const FE=!1,Kre=!1,Xre={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},Qre=null,Jre="#__nuxt",tH="nuxt-app",YO=36e5,ene="vite:preloadError";function iH(e=tH){return Yre(e,{asyncContext:!1})}const tne="__nuxt_plugin";function ine(e){var n;let t=0;const i={_id:e.id||tH||"nuxt-app",_scope:gV(),provide:void 0,globalName:"nuxt",versions:{get nuxt(){return"3.14.1592"},get vue(){return i.vueApp.version}},payload:oc({...((n=e.ssrContext)==null?void 0:n.payload)||{},data:oc({}),state:bi({}),once:new Set,_errors:oc({})}),static:{data:{}},runWithContext(a){return i._scope.active&&!C5()?i._scope.run(()=>KO(i,a)):KO(i,a)},isHydrating:!0,deferHydration(){if(!i.isHydrating)return()=>{};t++;let a=!1;return()=>{if(!a&&(a=!0,t--,t===0))return i.isHydrating=!1,i.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:oc({}),_payloadRevivers:{},...e};{const a=window.__NUXT__;if(a)for(const s in a)switch(s){case"data":case"state":case"_errors":Object.assign(i.payload[s],a[s]);break;default:i.payload[s]=a[s]}}i.hooks=eH(),i.hook=i.hooks.hook,i.callHook=i.hooks.callHook,i.provide=(a,s)=>{const o="$"+a;Yy(i,o,s),Yy(i.vueApp.config.globalProperties,o,s)},Yy(i.vueApp,"$nuxt",i),Yy(i.vueApp.config.globalProperties,"$nuxt",i);{window.addEventListener(ene,s=>{i.callHook("app:chunkError",{error:s.payload}),(i.isHydrating||s.payload.message.includes("Unable to preload CSS"))&&s.preventDefault()}),window.useNuxtApp=window.useNuxtApp||Xr;const a=i.hook("app:error",(...s)=>{console.error("[nuxt] error caught during app initialization",...s)});i.hook("app:mounted",a)}const r=i.payload.config;return i.provide("config",r),i}function rne(e,t){t.hooks&&e.hooks.addHooks(t.hooks)}async function nne(e,t){if(typeof t=="function"){const{provide:i}=await e.runWithContext(()=>t(e))||{};if(i&&typeof i=="object")for(const r in i)e.provide(r,i[r])}}async function ane(e,t){const i=[],r=[],n=[],a=[];let s=0;async function o(l){var u;const c=((u=l.dependsOn)==null?void 0:u.filter(d=>t.some(h=>h._name===d)&&!i.includes(d)))??[];if(c.length>0)r.push([new Set(c),l]);else{const d=nne(e,l).then(async()=>{l._name&&(i.push(l._name),await Promise.all(r.map(async([h,f])=>{h.has(l._name)&&(h.delete(l._name),h.size===0&&(s++,await o(f)))})))});l.parallel?n.push(d.catch(h=>a.push(h))):await d}}for(const l of t)rne(e,l);for(const l of t)await o(l);if(await Promise.all(n),s)for(let l=0;l<s;l++)await Promise.all(n);if(a.length)throw a[0]}function Wo(e){if(typeof e=="function")return e;const t=e._name||e.name;return delete e.name,Object.assign(e.setup||(()=>{}),e,{[tne]:!0,_name:t})}function KO(e,t,i){const r=()=>t();return iH(e._id).set(e),e.vueApp.runWithContext(r)}function sne(e){var i;let t;return nU()&&(t=(i=Ut())==null?void 0:i.appContext.app.$nuxt),t=t||iH(e).tryUse(),t||null}function Xr(e){const t=sne(e);if(!t)throw new Error("[nuxt] instance unavailable");return t}function ey(e){return Xr().$config}function Yy(e,t,i){Object.defineProperty(e,t,{get:()=>i})}function one(e,t){return{ctx:{table:e},matchAll:i=>nH(i,e)}}function rH(e){const t={};for(const i in e)t[i]=i==="dynamic"?new Map(Object.entries(e[i]).map(([r,n])=>[r,rH(n)])):new Map(Object.entries(e[i]));return t}function lne(e){return one(rH(e))}function nH(e,t,i){e.endsWith("/")&&(e=e.slice(0,-1)||"/");const r=[];for(const[a,s]of XO(t.wildcard))(e===a||e.startsWith(a+"/"))&&r.push(s);for(const[a,s]of XO(t.dynamic))if(e.startsWith(a+"/")){const o="/"+e.slice(a.length).split("/").splice(2).join("/");r.push(...nH(o,s))}const n=t.static.get(e);return n&&r.push(n),r.filter(Boolean)}function XO(e){return[...e.entries()].sort((t,i)=>t[0].length-i[0].length)}function A3(e){if(e===null||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in e?!1:Symbol.toStringTag in e?Object.prototype.toString.call(e)==="[object Module]":!0}function zE(e,t,i=".",r){if(!A3(t))return zE(e,{},i,r);const n=Object.assign({},t);for(const a in e){if(a==="__proto__"||a==="constructor")continue;const s=e[a];s!=null&&(r&&r(n,a,s,i)||(Array.isArray(s)&&Array.isArray(n[a])?n[a]=[...s,...n[a]]:A3(s)&&A3(n[a])?n[a]=zE(s,n[a],(i?`${i}.`:"")+a.toString(),r):n[a]=s))}return n}function cne(e){return(...t)=>t.reduce((i,r)=>zE(i,r,"",e),{})}const aH=cne();function une(e,t){try{return t in e}catch{return!1}}var dne=Object.defineProperty,hne=(e,t,i)=>t in e?dne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Xh=(e,t,i)=>(hne(e,typeof t!="symbol"?t+"":t,i),i);class VE extends Error{constructor(t,i={}){super(t,i),Xh(this,"statusCode",500),Xh(this,"fatal",!1),Xh(this,"unhandled",!1),Xh(this,"statusMessage"),Xh(this,"data"),Xh(this,"cause"),i.cause&&!this.cause&&(this.cause=i.cause)}toJSON(){const t={message:this.message,statusCode:HE(this.statusCode,500)};return this.statusMessage&&(t.statusMessage=sH(this.statusMessage)),this.data!==void 0&&(t.data=this.data),t}}Xh(VE,"__h3_error__",!0);function UE(e){if(typeof e=="string")return new VE(e);if(fne(e))return e;const t=new VE(e.message??e.statusMessage??"",{cause:e.cause||e});if(une(e,"stack"))try{Object.defineProperty(t,"stack",{get(){return e.stack}})}catch{try{t.stack=e.stack}catch{}}if(e.data&&(t.data=e.data),e.statusCode?t.statusCode=HE(e.statusCode,t.statusCode):e.status&&(t.statusCode=HE(e.status,t.statusCode)),e.statusMessage?t.statusMessage=e.statusMessage:e.statusText&&(t.statusMessage=e.statusText),t.statusMessage){const i=t.statusMessage;sH(t.statusMessage)!==i&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return e.fatal!==void 0&&(t.fatal=e.fatal),e.unhandled!==void 0&&(t.unhandled=e.unhandled),t}function fne(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.__h3_error__)===!0}const pne=/[^\u0009\u0020-\u007E]/g;function sH(e=""){return e.replace(pne,"")}function HE(e,t=200){return!e||(typeof e=="string"&&(e=Number.parseInt(e,10)),e<100||e>999)?t:e}const mne=Symbol("layout-meta"),F_=Symbol("route"),Ns=()=>{var e;return(e=Xr())==null?void 0:e.$router},oH=()=>nU()?rt(F_,Xr()._route):Xr()._route;const vne=()=>{try{if(Xr()._processingMiddleware)return!0}catch{return!1}return!1},gne=(e,t)=>{e||(e="/");const i=typeof e=="string"?e:"path"in e?jE(e):Ns().resolve(e).href;if(t!=null&&t.open){const{target:l="_blank",windowFeatures:c={}}=t.open,u=Object.entries(c).filter(([d,h])=>h!==void 0).map(([d,h])=>`${d.toLowerCase()}=${h}`).join(", ");return open(i,l,u),Promise.resolve()}const r=Vu(i,{acceptRelative:!0}),n=(t==null?void 0:t.external)||r;if(n){if(!(t!=null&&t.external))throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:l}=new URL(i,window.location.href);if(l&&mre(l))throw new Error(`Cannot navigate to a URL with '${l}' protocol.`)}const a=vne();if(!n&&a)return e;const s=Ns(),o=Xr();return n?(o._scope.stop(),t!=null&&t.replace?location.replace(i):location.href=i,a?o.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):t!=null&&t.replace?s.replace(e):s.push(e)};function jE(e){return ZU(e.path||"",e.query||{})+(e.hash||"")}const lH="__nuxt_error",z_=()=>Di(Xr().payload,"error"),ym=e=>{const t=V_(e);try{const i=Xr(),r=z_();i.hooks.callHook("app:error",t),r.value=r.value||t}catch{throw t}return t},yne=async(e={})=>{const t=Xr(),i=z_();t.callHook("app:error:cleared",e),e.redirect&&await Ns().replace(e.redirect),i.value=Qre},bne=e=>!!e&&typeof e=="object"&&lH in e,V_=e=>{const t=UE(e);return Object.defineProperty(t,lH,{value:!0,configurable:!1,writable:!1}),t};function QO(e){const t=xne(e),i=new ArrayBuffer(t.length),r=new DataView(i);for(let n=0;n<i.byteLength;n++)r.setUint8(n,t.charCodeAt(n));return i}const wne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function xne(e){e.length%4===0&&(e=e.replace(/==?$/,""));let t="",i=0,r=0;for(let n=0;n<e.length;n++)i<<=6,i|=wne.indexOf(e[n]),r+=6,r===24&&(t+=String.fromCharCode((i&16711680)>>16),t+=String.fromCharCode((i&65280)>>8),t+=String.fromCharCode(i&255),i=r=0);return r===12?(i>>=4,t+=String.fromCharCode(i)):r===18&&(i>>=2,t+=String.fromCharCode((i&65280)>>8),t+=String.fromCharCode(i&255)),t}const _ne=-1,Sne=-2,Cne=-3,Ene=-4,Ane=-5,Mne=-6;function Tne(e,t){return Pne(JSON.parse(e),t)}function Pne(e,t){if(typeof e=="number")return n(e,!0);if(!Array.isArray(e)||e.length===0)throw new Error("Invalid input");const i=e,r=Array(i.length);function n(a,s=!1){if(a===_ne)return;if(a===Cne)return NaN;if(a===Ene)return 1/0;if(a===Ane)return-1/0;if(a===Mne)return-0;if(s)throw new Error("Invalid input");if(a in r)return r[a];const o=i[a];if(!o||typeof o!="object")r[a]=o;else if(Array.isArray(o))if(typeof o[0]=="string"){const l=o[0],c=t==null?void 0:t[l];if(c)return r[a]=c(n(o[1]));switch(l){case"Date":r[a]=new Date(o[1]);break;case"Set":const u=new Set;r[a]=u;for(let f=1;f<o.length;f+=1)u.add(n(o[f]));break;case"Map":const d=new Map;r[a]=d;for(let f=1;f<o.length;f+=2)d.set(n(o[f]),n(o[f+1]));break;case"RegExp":r[a]=new RegExp(o[1],o[2]);break;case"Object":r[a]=Object(o[1]);break;case"BigInt":r[a]=BigInt(o[1]);break;case"null":const h=Object.create(null);r[a]=h;for(let f=1;f<o.length;f+=2)h[o[f]]=n(o[f+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const f=globalThis[l],p=o[1],m=QO(p),v=new f(m);r[a]=v;break}case"ArrayBuffer":{const f=o[1],p=QO(f);r[a]=p;break}default:throw new Error(`Unknown type ${l}`)}}else{const l=new Array(o.length);r[a]=l;for(let c=0;c<o.length;c+=1){const u=o[c];u!==Sne&&(l[c]=n(u))}}else{const l={};r[a]=l;for(const c in o){const u=o[c];l[c]=n(u)}}return r[a]}return n(0)}const Dne=new Set(["title","titleTemplate","script","style","noscript"]),Hw=new Set(["base","meta","link","style","script","noscript"]),Ine=new Set(["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),One=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),cH=new Set(["tagPosition","tagPriority","tagDuplicateStrategy","children","innerHTML","textContent","processTemplateParams"]),Rne=typeof window<"u";function $2(e){let t=9;for(let i=0;i<e.length;)t=Math.imul(t^e.charCodeAt(i++),9**9);return((t^t>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function WE(e){if(e._h)return e._h;if(e._d)return $2(e._d);let t=`${e.tag}:${e.textContent||e.innerHTML||""}:`;for(const i in e.props)t+=`${i}:${String(e.props[i])},`;return $2(t)}function kne(e,t){return e instanceof Promise?e.then(t):t(e)}function GE(e,t,i,r){const n=r||dH(typeof t=="object"&&typeof t!="function"&&!(t instanceof Promise)?{...t}:{[e==="script"||e==="noscript"||e==="style"?"innerHTML":"textContent"]:t},e==="templateParams"||e==="titleTemplate");if(n instanceof Promise)return n.then(s=>GE(e,t,i,s));const a={tag:e,props:n};for(const s of cH){const o=a.props[s]!==void 0?a.props[s]:i[s];o!==void 0&&((!(s==="innerHTML"||s==="textContent"||s==="children")||Dne.has(a.tag))&&(a[s==="children"?"innerHTML":s]=o),delete a.props[s])}return a.props.body&&(a.tagPosition="bodyClose",delete a.props.body),a.tag==="script"&&typeof a.innerHTML=="object"&&(a.innerHTML=JSON.stringify(a.innerHTML),a.props.type=a.props.type||"application/json"),Array.isArray(a.props.content)?a.props.content.map(s=>({...a,props:{...a.props,content:s}})):a}function Lne(e,t){var r;const i=e==="class"?" ":";";return t&&typeof t=="object"&&!Array.isArray(t)&&(t=Object.entries(t).filter(([,n])=>n).map(([n,a])=>e==="style"?`${n}:${a}`:n)),(r=String(Array.isArray(t)?t.join(i):t))==null?void 0:r.split(i).filter(n=>!!n.trim()).join(i)}function uH(e,t,i,r){for(let n=r;n<i.length;n+=1){const a=i[n];if(a==="class"||a==="style"){e[a]=Lne(a,e[a]);continue}if(e[a]instanceof Promise)return e[a].then(s=>(e[a]=s,uH(e,t,i,n)));if(!t&&!cH.has(a)){const s=String(e[a]),o=a.startsWith("data-");s==="true"||s===""?e[a]=o?"true":!0:e[a]||(o&&s==="false"?e[a]="false":delete e[a])}}}function dH(e,t=!1){const i=uH(e,t,Object.keys(e),0);return i instanceof Promise?i.then(()=>e):e}const Bne=10;function hH(e,t,i){for(let r=i;r<t.length;r+=1){const n=t[r];if(n instanceof Promise)return n.then(a=>(t[r]=a,hH(e,t,r)));Array.isArray(n)?e.push(...n):e.push(n)}}function Nne(e){const t=[],i=e.resolvedInput;for(const n in i){if(!Object.prototype.hasOwnProperty.call(i,n))continue;const a=i[n];if(!(a===void 0||!Ine.has(n))){if(Array.isArray(a)){for(const s of a)t.push(GE(n,s,e));continue}t.push(GE(n,a,e))}}if(t.length===0)return[];const r=[];return kne(hH(r,t,0),()=>r.map((n,a)=>(n._e=e._i,e.mode&&(n._m=e.mode),n._p=(e._i<<Bne)+a,n)))}const JO=new Set(["onload","onerror","onabort","onprogress","onloadstart"]),eR={base:-10,title:10},tR={critical:-80,high:-10,low:20};function Z2(e){const t=e.tagPriority;if(typeof t=="number")return t;let i=100;return e.tag==="meta"?e.props["http-equiv"]==="content-security-policy"?i=-30:e.props.charset?i=-20:e.props.name==="viewport"&&(i=-15):e.tag==="link"&&e.props.rel==="preconnect"?i=20:e.tag in eR&&(i=eR[e.tag]),t&&t in tR?i+tR[t]:i}const Fne=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}],zne=["name","property","http-equiv"];function fH(e){const{props:t,tag:i}=e;if(One.has(i))return i;if(i==="link"&&t.rel==="canonical")return"canonical";if(t.charset)return"charset";if(t.id)return`${i}:id:${t.id}`;for(const r of zne)if(t[r]!==void 0)return`${i}:${r}:${t[r]}`;return!1}const Cd="%separator";function Vne(e,t,i=!1){var n;let r;if(t==="s"||t==="pageTitle")r=e.pageTitle;else if(t.includes(".")){const a=t.indexOf(".");r=(n=e[t.substring(0,a)])==null?void 0:n[t.substring(a+1)]}else r=e[t];if(r!==void 0)return i?(r||"").replace(/"/g,'\\"'):r||""}const Une=new RegExp(`${Cd}(?:\\s*${Cd})*`,"g");function Ky(e,t,i,r=!1){if(typeof e!="string"||!e.includes("%"))return e;let n=e;try{n=decodeURI(e)}catch{}const a=n.match(/%\w+(?:\.\w+)?/g);if(!a)return e;const s=e.includes(Cd);return e=e.replace(/%\w+(?:\.\w+)?/g,o=>{if(o===Cd||!a.includes(o))return o;const l=Vne(t,o.slice(1),r);return l!==void 0?l:o}).trim(),s&&(e.endsWith(Cd)&&(e=e.slice(0,-Cd.length)),e.startsWith(Cd)&&(e=e.slice(Cd.length)),e=e.replace(Une,i).trim()),e}function iR(e,t){return e==null?t||null:typeof e=="function"?e(t):e}async function pH(e,t={}){const i=t.document||e.resolvedOptions.document;if(!i||!e.dirty)return;const r={shouldRender:!0,tags:[]};if(await e.hooks.callHook("dom:beforeRender",r),!!r.shouldRender)return e._domUpdatePromise||(e._domUpdatePromise=new Promise(async n=>{var d;const a=(await e.resolveTags()).map(h=>({tag:h,id:Hw.has(h.tag)?WE(h):h.tag,shouldRender:!0}));let s=e._dom;if(!s){s={elMap:{htmlAttrs:i.documentElement,bodyAttrs:i.body}};const h=new Set;for(const f of["body","head"]){const p=(d=i[f])==null?void 0:d.children;for(const m of p){const v=m.tagName.toLowerCase();if(!Hw.has(v))continue;const y={tag:v,props:await dH(m.getAttributeNames().reduce((S,_)=>({...S,[_]:m.getAttribute(_)}),{})),innerHTML:m.innerHTML},x=fH(y);let b=x,w=1;for(;b&&h.has(b);)b=`${x}:${w++}`;b&&(y._d=b,h.add(b)),s.elMap[m.getAttribute("data-hid")||WE(y)]=m}}}s.pendingSideEffects={...s.sideEffects},s.sideEffects={};function o(h,f,p){const m=`${h}:${f}`;s.sideEffects[m]=p,delete s.pendingSideEffects[m]}function l({id:h,$el:f,tag:p}){const m=p.tag.endsWith("Attrs");if(s.elMap[h]=f,m||(p.textContent&&p.textContent!==f.textContent&&(f.textContent=p.textContent),p.innerHTML&&p.innerHTML!==f.innerHTML&&(f.innerHTML=p.innerHTML),o(h,"el",()=>{var v;(v=s.elMap[h])==null||v.remove(),delete s.elMap[h]})),p._eventHandlers)for(const v in p._eventHandlers)Object.prototype.hasOwnProperty.call(p._eventHandlers,v)&&f.getAttribute(`data-${v}`)!==""&&((p.tag==="bodyAttrs"?i.defaultView:f).addEventListener(v.substring(2),p._eventHandlers[v].bind(f)),f.setAttribute(`data-${v}`,""));for(const v in p.props){if(!Object.prototype.hasOwnProperty.call(p.props,v))continue;const y=p.props[v],x=`attr:${v}`;if(v==="class"){if(!y)continue;for(const b of y.split(" "))m&&o(h,`${x}:${b}`,()=>f.classList.remove(b)),!f.classList.contains(b)&&f.classList.add(b)}else if(v==="style"){if(!y)continue;for(const b of y.split(";")){const w=b.indexOf(":"),S=b.substring(0,w).trim(),_=b.substring(w+1).trim();o(h,`${x}:${S}`,()=>{f.style.removeProperty(S)}),f.style.setProperty(S,_)}}else f.getAttribute(v)!==y&&f.setAttribute(v,y===!0?"":String(y)),m&&o(h,x,()=>f.removeAttribute(v))}}const c=[],u={bodyClose:void 0,bodyOpen:void 0,head:void 0};for(const h of a){const{tag:f,shouldRender:p,id:m}=h;if(p){if(f.tag==="title"){i.title=f.textContent;continue}h.$el=h.$el||s.elMap[m],h.$el?l(h):Hw.has(f.tag)&&c.push(h)}}for(const h of c){const f=h.tag.tagPosition||"head";h.$el=i.createElement(h.tag.tag),l(h),u[f]=u[f]||i.createDocumentFragment(),u[f].appendChild(h.$el)}for(const h of a)await e.hooks.callHook("dom:renderTag",h,i,o);u.head&&i.head.appendChild(u.head),u.bodyOpen&&i.body.insertBefore(u.bodyOpen,i.body.firstChild),u.bodyClose&&i.body.appendChild(u.bodyClose);for(const h in s.pendingSideEffects)s.pendingSideEffects[h]();e._dom=s,await e.hooks.callHook("dom:rendered",{renders:a}),n()}).finally(()=>{e._domUpdatePromise=void 0,e.dirty=!1})),e._domUpdatePromise}function Hne(e,t={}){const i=t.delayFn||(r=>setTimeout(r,10));return e._domDebouncedUpdatePromise=e._domDebouncedUpdatePromise||new Promise(r=>i(()=>pH(e,t).then(()=>{delete e._domDebouncedUpdatePromise,r()})))}function jne(e){return t=>{var r,n;const i=((n=(r=t.resolvedOptions.document)==null?void 0:r.head.querySelector('script[id="unhead:payload"]'))==null?void 0:n.innerHTML)||!1;return i&&t.push(JSON.parse(i)),{mode:"client",hooks:{"entries:updated":a=>{Hne(a,e)}}}}}const Wne=new Set(["templateParams","htmlAttrs","bodyAttrs"]),Gne={hooks:{"tag:normalise":({tag:e})=>{e.props.hid&&(e.key=e.props.hid,delete e.props.hid),e.props.vmid&&(e.key=e.props.vmid,delete e.props.vmid),e.props.key&&(e.key=e.props.key,delete e.props.key);const t=fH(e);t&&!t.startsWith("meta:og:")&&!t.startsWith("meta:twitter:")&&delete e.key;const i=t||(e.key?`${e.tag}:${e.key}`:!1);i&&(e._d=i)},"tags:resolve":e=>{const t=Object.create(null);for(const r of e.tags){const n=(r.key?`${r.tag}:${r.key}`:r._d)||WE(r),a=t[n];if(a){let o=r==null?void 0:r.tagDuplicateStrategy;if(!o&&Wne.has(r.tag)&&(o="merge"),o==="merge"){const l=a.props;l.style&&r.props.style&&(l.style[l.style.length-1]!==";"&&(l.style+=";"),r.props.style=`${l.style} ${r.props.style}`),l.class&&r.props.class?r.props.class=`${l.class} ${r.props.class}`:l.class&&(r.props.class=l.class),t[n].props={...l,...r.props};continue}else if(r._e===a._e){a._duped=a._duped||[],r._d=`${a._d}:${a._duped.length+1}`,a._duped.push(r);continue}else if(Z2(r)>Z2(a))continue}if(!(r.innerHTML||r.textContent||Object.keys(r.props).length!==0)&&Hw.has(r.tag)){delete t[n];continue}t[n]=r}const i=[];for(const r in t){const n=t[r],a=n._duped;i.push(n),a&&(delete n._duped,i.push(...a))}e.tags=i,e.tags=e.tags.filter(r=>!(r.tag==="meta"&&(r.props.name||r.props.property)&&!r.props.content))}}},$ne=new Set(["script","link","bodyAttrs"]),Zne=e=>({hooks:{"tags:resolve":t=>{for(const i of t.tags){if(!$ne.has(i.tag))continue;const r=i.props;for(const n in r){if(n[0]!=="o"||n[1]!=="n"||!Object.prototype.hasOwnProperty.call(r,n))continue;const a=r[n];typeof a=="function"&&(e.ssr&&JO.has(n)?r[n]=`this.dataset.${n}fired = true`:delete r[n],i._eventHandlers=i._eventHandlers||{},i._eventHandlers[n]=a)}e.ssr&&i._eventHandlers&&(i.props.src||i.props.href)&&(i.key=i.key||$2(i.props.src||i.props.href))}},"dom:renderTag":({$el:t,tag:i})=>{var n,a;const r=t==null?void 0:t.dataset;if(r)for(const s in r){if(!s.endsWith("fired"))continue;const o=s.slice(0,-5);JO.has(o)&&((a=(n=i._eventHandlers)==null?void 0:n[o])==null||a.call(t,new Event(o.substring(2))))}}}}),qne=new Set(["link","style","script","noscript"]),Yne={hooks:{"tag:normalise":({tag:e})=>{e.key&&qne.has(e.tag)&&(e.props["data-hid"]=e._h=$2(e.key))}}},Kne={mode:"server",hooks:{"tags:beforeResolve":e=>{const t={};let i=!1;for(const r of e.tags)r._m!=="server"||r.tag!=="titleTemplate"&&r.tag!=="templateParams"&&r.tag!=="title"||(t[r.tag]=r.tag==="title"||r.tag==="titleTemplate"?r.textContent:r.props,i=!0);i&&e.tags.push({tag:"script",innerHTML:JSON.stringify(t),props:{id:"unhead:payload",type:"application/json"}})}}},Xne={hooks:{"tags:resolve":e=>{var t;for(const i of e.tags)if(typeof i.tagPriority=="string")for(const{prefix:r,offset:n}of Fne){if(!i.tagPriority.startsWith(r))continue;const a=i.tagPriority.substring(r.length),s=(t=e.tags.find(o=>o._d===a))==null?void 0:t._p;if(s!==void 0){i._p=s+n;break}}e.tags.sort((i,r)=>{const n=Z2(i),a=Z2(r);return n<a?-1:n>a?1:i._p-r._p})}}},Qne={meta:"content",link:"href",htmlAttrs:"lang"},Jne=["innerHTML","textContent"],eae=e=>({hooks:{"tags:resolve":t=>{var s;const{tags:i}=t;let r;for(let o=0;o<i.length;o+=1)i[o].tag==="templateParams"&&(r=t.tags.splice(o,1)[0].props,o-=1);const n=r||{},a=n.separator||"|";delete n.separator,n.pageTitle=Ky(n.pageTitle||((s=i.find(o=>o.tag==="title"))==null?void 0:s.textContent)||"",n,a);for(const o of i){if(o.processTemplateParams===!1)continue;const l=Qne[o.tag];if(l&&typeof o.props[l]=="string")o.props[l]=Ky(o.props[l],n,a);else if(o.processTemplateParams||o.tag==="titleTemplate"||o.tag==="title")for(const c of Jne)typeof o[c]=="string"&&(o[c]=Ky(o[c],n,a,o.tag==="script"&&o.props.type.endsWith("json")))}e._templateParams=n,e._separator=a},"tags:afterResolve":({tags:t})=>{let i;for(let r=0;r<t.length;r+=1){const n=t[r];n.tag==="title"&&n.processTemplateParams!==!1&&(i=n)}i!=null&&i.textContent&&(i.textContent=Ky(i.textContent,e._templateParams,e._separator))}}}),tae={hooks:{"tags:resolve":e=>{const{tags:t}=e;let i,r;for(let n=0;n<t.length;n+=1){const a=t[n];a.tag==="title"?i=a:a.tag==="titleTemplate"&&(r=a)}if(r&&i){const n=iR(r.textContent,i.textContent);n!==null?i.textContent=n||i.textContent:e.tags.splice(e.tags.indexOf(i),1)}else if(r){const n=iR(r.textContent);n!==null&&(r.textContent=n,r.tag="title",r=void 0)}r&&e.tags.splice(e.tags.indexOf(r),1)}}},iae={hooks:{"tags:afterResolve":e=>{for(const t of e.tags)typeof t.innerHTML=="string"&&(t.innerHTML&&(t.props.type==="application/ld+json"||t.props.type==="application/json")?t.innerHTML=t.innerHTML.replace(/</g,"\\u003C"):t.innerHTML=t.innerHTML.replace(new RegExp(`</${t.tag}`,"g"),`<\\/${t.tag}`))}}};let mH;function rae(e={}){const t=nae(e);return t.use(jne()),mH=t}function rR(e,t){return!e||e==="server"&&t||e==="client"&&!t}function nae(e={}){const t=eH();t.addHooks(e.hooks||{}),e.document=e.document||(Rne?document:void 0);const i=!e.document,r=()=>{o.dirty=!0,t.callHook("entries:updated",o)};let n=0,a=[];const s=[],o={plugins:s,dirty:!1,resolvedOptions:e,hooks:t,headEntries(){return a},use(l){const c=typeof l=="function"?l(o):l;(!c.key||!s.some(u=>u.key===c.key))&&(s.push(c),rR(c.mode,i)&&t.addHooks(c.hooks||{}))},push(l,c){c==null||delete c.head;const u={_i:n++,input:l,...c};return rR(u.mode,i)&&(a.push(u),r()),{dispose(){a=a.filter(d=>d._i!==u._i),r()},patch(d){for(const h of a)h._i===u._i&&(h.input=u.input=d);r()}}},async resolveTags(){const l={tags:[],entries:[...a]};await t.callHook("entries:resolve",l);for(const c of l.entries){const u=c.resolvedInput||c.input;if(c.resolvedInput=await(c.transform?c.transform(u):u),c.resolvedInput)for(const d of await Nne(c)){const h={tag:d,entry:c,resolvedOptions:o.resolvedOptions};await t.callHook("tag:normalise",h),l.tags.push(h.tag)}}return await t.callHook("tags:beforeResolve",l),await t.callHook("tags:resolve",l),await t.callHook("tags:afterResolve",l),l.tags},ssr:i};return[Gne,Kne,Zne,Yne,Xne,eae,tae,iae,...(e==null?void 0:e.plugins)||[]].forEach(l=>o.use(l)),o.hooks.callHook("init",o),o}function aae(){return mH}const sae=TU[0]==="3";function oae(e){return typeof e=="function"?e():g(e)}function $E(e){if(e instanceof Promise||e instanceof Date||e instanceof RegExp)return e;const t=oae(e);if(!e||!t)return t;if(Array.isArray(t))return t.map(i=>$E(i));if(typeof t=="object"){const i={};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(r==="titleTemplate"||r[0]==="o"&&r[1]==="n"){i[r]=g(t[r]);continue}i[r]=$E(t[r])}return i}return t}const lae={hooks:{"entries:resolve":e=>{for(const t of e.entries)t.resolvedInput=$E(t.input)}}},vH="usehead";function cae(e){return{install(i){sae&&(i.config.globalProperties.$unhead=e,i.config.globalProperties.$head=e,i.provide(vH,e))}}.install}function uae(e={}){e.domDelayFn=e.domDelayFn||(i=>ft(()=>setTimeout(()=>i(),0)));const t=rae(e);return t.use(lae),t.install=cae(t),t}const ZE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qE="__unhead_injection_handler__";function dae(e){ZE[qE]=e}function dft(){if(qE in ZE)return ZE[qE]();const e=rt(vH);return e||aae()}let jw,Ww;function hae(){return jw=$fetch(G5(`builds/meta/${ey().app.buildId}.json`),{responseType:"json"}),jw.then(e=>{Ww=lne(e.matcher)}).catch(e=>{console.error("[nuxt] Error fetching app manifest.",e)}),jw}function U_(){return jw||hae()}async function $5(e){if(await U_(),!Ww)return console.error("[nuxt] Error creating app manifest matcher.",Ww),{};try{return aH({},...Ww.matchAll(e).reverse())}catch(t){return console.error("[nuxt] Error matching route rules.",t),{}}}async function nR(e,t={}){const i=await pae(e,t),r=Xr(),n=r._payloadCache=r._payloadCache||{};return i in n?n[i]||null:(n[i]=yH(e).then(a=>a?gH(i).then(s=>s||(delete n[i],null)):(n[i]=null,null)),n[i])}const fae="_payload.json";async function pae(e,t={}){const i=new URL(e,"http://localhost");if(i.host!=="localhost"||Vu(i.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+e);const r=ey(),n=t.hash||(t.fresh?Date.now():r.app.buildId),a=r.app.cdnURL,s=a&&await yH(e)?a:r.app.baseURL;return N_(s,i.pathname,fae+(n?`?${n}`:""))}async function gH(e){const t=fetch(e).then(i=>i.text().then(bH));try{return await t}catch(i){console.warn("[nuxt] Cannot load payload ",e,i)}return null}async function yH(e=oH().path){if(e=B_(e),(await U_()).prerendered.includes(e))return!0;const i=await $5(e);return!!i.prerender&&!i.redirect}let Fh=null;async function mae(){var r;if(Fh)return Fh;const e=document.getElementById("__NUXT_DATA__");if(!e)return{};const t=await bH(e.textContent||""),i=e.dataset.src?await gH(e.dataset.src):void 0;return Fh={...t,...i,...window.__NUXT__},(r=Fh.config)!=null&&r.public&&(Fh.config.public=bi(Fh.config.public)),Fh}async function bH(e){return await Tne(e,Xr()._payloadRevivers)}function vae(e,t){Xr()._payloadRevivers[e]=t}const gae=[["NuxtError",e=>V_(e)],["EmptyShallowRef",e=>Wi(e==="_"?void 0:e==="0n"?BigInt(0):V2(e))],["EmptyRef",e=>j(e==="_"?void 0:e==="0n"?BigInt(0):V2(e))],["ShallowRef",e=>Wi(e)],["ShallowReactive",e=>oc(e)],["Ref",e=>j(e)],["Reactive",e=>bi(e)]],yae=Wo({name:"nuxt:revive-payload:client",order:-30,async setup(e){let t,i;for(const[r,n]of gae)vae(r,n);Object.assign(e.payload,([t,i]=Lm(()=>e.runWithContext(mae)),t=await t,i(),t)),window.__NUXT__=e.payload}}),bae=[],wae=Wo({name:"nuxt:head",enforce:"pre",setup(e){const t=uae({plugins:bae});dae(()=>Xr().vueApp._context.provides.usehead),e.vueApp.use(t);{let i=!0;const r=async()=>{i=!1,await pH(t)};t.hooks.hook("dom:beforeRender",n=>{n.shouldRender=!i}),e.hooks.hook("page:start",()=>{i=!0}),e.hooks.hook("page:finish",()=>{e.isHydrating||r()}),e.hooks.hook("app:error",r),e.hooks.hook("app:suspense:resolve",r)}}});/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const nm=typeof document<"u";function wH(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function xae(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&wH(e.default)}const vr=Object.assign;function M3(e,t){const i={};for(const r in t){const n=t[r];i[r]=xl(n)?n.map(e):e(n)}return i}const Eg=()=>{},xl=Array.isArray,xH=/#/g,_ae=/&/g,Sae=/\//g,Cae=/=/g,Eae=/\?/g,_H=/\+/g,Aae=/%5B/g,Mae=/%5D/g,SH=/%5E/g,Tae=/%60/g,CH=/%7B/g,Pae=/%7C/g,EH=/%7D/g,Dae=/%20/g;function Z5(e){return encodeURI(""+e).replace(Pae,"|").replace(Aae,"[").replace(Mae,"]")}function Iae(e){return Z5(e).replace(CH,"{").replace(EH,"}").replace(SH,"^")}function YE(e){return Z5(e).replace(_H,"%2B").replace(Dae,"+").replace(xH,"%23").replace(_ae,"%26").replace(Tae,"`").replace(CH,"{").replace(EH,"}").replace(SH,"^")}function Oae(e){return YE(e).replace(Cae,"%3D")}function Rae(e){return Z5(e).replace(xH,"%23").replace(Eae,"%3F")}function kae(e){return e==null?"":Rae(e).replace(Sae,"%2F")}function i1(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Lae=/\/$/,Bae=e=>e.replace(Lae,"");function T3(e,t,i="/"){let r,n={},a="",s="";const o=t.indexOf("#");let l=t.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(r=t.slice(0,l),a=t.slice(l+1,o>-1?o:t.length),n=e(a)),o>-1&&(r=r||t.slice(0,o),s=t.slice(o,t.length)),r=Vae(r??t,i),{fullPath:r+(a&&"?")+a+s,path:r,query:n,hash:i1(s)}}function Nae(e,t){const i=t.query?e(t.query):"";return t.path+(i&&"?")+i+(t.hash||"")}function aR(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Fae(e,t,i){const r=t.matched.length-1,n=i.matched.length-1;return r>-1&&r===n&&sv(t.matched[r],i.matched[n])&&AH(t.params,i.params)&&e(t.query)===e(i.query)&&t.hash===i.hash}function sv(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function AH(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!zae(e[i],t[i]))return!1;return!0}function zae(e,t){return xl(e)?sR(e,t):xl(t)?sR(t,e):e===t}function sR(e,t){return xl(t)?e.length===t.length&&e.every((i,r)=>i===t[r]):e.length===1&&e[0]===t}function Vae(e,t){if(e.startsWith("/"))return e;if(!e)return t;const i=t.split("/"),r=e.split("/"),n=r[r.length-1];(n===".."||n===".")&&r.push("");let a=i.length-1,s,o;for(s=0;s<r.length;s++)if(o=r[s],o!==".")if(o==="..")a>1&&a--;else break;return i.slice(0,a).join("/")+"/"+r.slice(s).join("/")}const al={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var r1;(function(e){e.pop="pop",e.push="push"})(r1||(r1={}));var Ag;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Ag||(Ag={}));function Uae(e){if(!e)if(nm){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Bae(e)}const Hae=/^[^#]+#/;function jae(e,t){return e.replace(Hae,"#")+t}function Wae(e,t){const i=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-i.left-(t.left||0),top:r.top-i.top-(t.top||0)}}const H_=()=>({left:window.scrollX,top:window.scrollY});function Gae(e){let t;if("el"in e){const i=e.el,r=typeof i=="string"&&i.startsWith("#"),n=typeof i=="string"?r?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!n)return;t=Wae(n,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function oR(e,t){return(history.state?history.state.position-t:-1)+e}const KE=new Map;function $ae(e,t){KE.set(e,t)}function Zae(e){const t=KE.get(e);return KE.delete(e),t}let qae=()=>location.protocol+"//"+location.host;function MH(e,t){const{pathname:i,search:r,hash:n}=t,a=e.indexOf("#");if(a>-1){let o=n.includes(e.slice(a))?e.slice(a).length:1,l=n.slice(o);return l[0]!=="/"&&(l="/"+l),aR(l,"")}return aR(i,e)+r+n}function Yae(e,t,i,r){let n=[],a=[],s=null;const o=({state:h})=>{const f=MH(e,location),p=i.value,m=t.value;let v=0;if(h){if(i.value=f,t.value=h,s&&s===p){s=null;return}v=m?h.position-m.position:0}else r(f);n.forEach(y=>{y(i.value,p,{delta:v,type:r1.pop,direction:v?v>0?Ag.forward:Ag.back:Ag.unknown})})};function l(){s=i.value}function c(h){n.push(h);const f=()=>{const p=n.indexOf(h);p>-1&&n.splice(p,1)};return a.push(f),f}function u(){const{history:h}=window;h.state&&h.replaceState(vr({},h.state,{scroll:H_()}),"")}function d(){for(const h of a)h();a=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function lR(e,t,i,r=!1,n=!1){return{back:e,current:t,forward:i,replaced:r,position:window.history.length,scroll:n?H_():null}}function Kae(e){const{history:t,location:i}=window,r={value:MH(e,i)},n={value:t.state};n.value||a(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(l,c,u){const d=e.indexOf("#"),h=d>-1?(i.host&&document.querySelector("base")?e:e.slice(d))+l:qae()+e+l;try{t[u?"replaceState":"pushState"](c,"",h),n.value=c}catch(f){console.error(f),i[u?"replace":"assign"](h)}}function s(l,c){const u=vr({},t.state,lR(n.value.back,l,n.value.forward,!0),c,{position:n.value.position});a(l,u,!0),r.value=l}function o(l,c){const u=vr({},n.value,t.state,{forward:l,scroll:H_()});a(u.current,u,!0);const d=vr({},lR(r.value,l,null),{position:u.position+1},c);a(l,d,!1),r.value=l}return{location:r,state:n,push:o,replace:s}}function TH(e){e=Uae(e);const t=Kae(e),i=Yae(e,t.state,t.location,t.replace);function r(a,s=!0){s||i.pauseListeners(),history.go(a)}const n=vr({location:"",base:e,go:r,createHref:jae.bind(null,e)},t,i);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}function Xae(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),TH(e)}function Qae(e){return typeof e=="string"||e&&typeof e=="object"}function PH(e){return typeof e=="string"||typeof e=="symbol"}const DH=Symbol("");var cR;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(cR||(cR={}));function ov(e,t){return vr(new Error,{type:e,[DH]:!0},t)}function Uc(e,t){return e instanceof Error&&DH in e&&(t==null||!!(e.type&t))}const uR="[^/]+?",Jae={sensitive:!1,strict:!1,start:!0,end:!0},ese=/[.+*?^${}()[\]/\\]/g;function tse(e,t){const i=vr({},Jae,t),r=[];let n=i.start?"^":"";const a=[];for(const c of e){const u=c.length?[]:[90];i.strict&&!c.length&&(n+="/");for(let d=0;d<c.length;d++){const h=c[d];let f=40+(i.sensitive?.25:0);if(h.type===0)d||(n+="/"),n+=h.value.replace(ese,"\\$&"),f+=40;else if(h.type===1){const{value:p,repeatable:m,optional:v,regexp:y}=h;a.push({name:p,repeatable:m,optional:v});const x=y||uR;if(x!==uR){f+=10;try{new RegExp(`(${x})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${p}" (${x}): `+w.message)}}let b=m?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;d||(b=v&&c.length<2?`(?:/${b})`:"/"+b),v&&(b+="?"),n+=b,f+=20,v&&(f+=-8),m&&(f+=-20),x===".*"&&(f+=-50)}u.push(f)}r.push(u)}if(i.strict&&i.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}i.strict||(n+="/?"),i.end?n+="$":i.strict&&(n+="(?:/|$)");const s=new RegExp(n,i.sensitive?"":"i");function o(c){const u=c.match(s),d={};if(!u)return null;for(let h=1;h<u.length;h++){const f=u[h]||"",p=a[h-1];d[p.name]=f&&p.repeatable?f.split("/"):f}return d}function l(c){let u="",d=!1;for(const h of e){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const f of h)if(f.type===0)u+=f.value;else if(f.type===1){const{value:p,repeatable:m,optional:v}=f,y=p in c?c[p]:"";if(xl(y)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const x=xl(y)?y.join("/"):y;if(!x)if(v)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);u+=x}}return u||"/"}return{re:s,score:r,keys:a,parse:o,stringify:l}}function ise(e,t){let i=0;for(;i<e.length&&i<t.length;){const r=t[i]-e[i];if(r)return r;i++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function IH(e,t){let i=0;const r=e.score,n=t.score;for(;i<r.length&&i<n.length;){const a=ise(r[i],n[i]);if(a)return a;i++}if(Math.abs(n.length-r.length)===1){if(dR(r))return 1;if(dR(n))return-1}return n.length-r.length}function dR(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const rse={type:0,value:""},nse=/[a-zA-Z0-9_]/;function ase(e){if(!e)return[[]];if(e==="/")return[[rse]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(f){throw new Error(`ERR (${i})/"${c}": ${f}`)}let i=0,r=i;const n=[];let a;function s(){a&&n.push(a),a=[]}let o=0,l,c="",u="";function d(){c&&(i===0?a.push({type:0,value:c}):i===1||i===2||i===3?(a.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;o<e.length;){if(l=e[o++],l==="\\"&&i!==2){r=i,i=4;continue}switch(i){case 0:l==="/"?(c&&d(),s()):l===":"?(d(),i=1):h();break;case 4:h(),i=r;break;case 1:l==="("?i=2:nse.test(l)?h():(d(),i=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:i=3:u+=l;break;case 3:d(),i=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,u="";break;default:t("Unknown state");break}}return i===2&&t(`Unfinished custom RegExp for param "${c}"`),d(),s(),n}function sse(e,t,i){const r=tse(ase(e.path),i),n=vr(r,{record:e,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function ose(e,t){const i=[],r=new Map;t=mR({strict:!1,end:!0,sensitive:!1},t);function n(d){return r.get(d)}function a(d,h,f){const p=!f,m=fR(d);m.aliasOf=f&&f.record;const v=mR(t,d),y=[m];if("alias"in d){const w=typeof d.alias=="string"?[d.alias]:d.alias;for(const S of w)y.push(fR(vr({},m,{components:f?f.record.components:m.components,path:S,aliasOf:f?f.record:m})))}let x,b;for(const w of y){const{path:S}=w;if(h&&S[0]!=="/"){const _=h.record.path,E=_[_.length-1]==="/"?"":"/";w.path=h.record.path+(S&&E+S)}if(x=sse(w,h,v),f?f.alias.push(x):(b=b||x,b!==x&&b.alias.push(x),p&&d.name&&!pR(x)&&s(d.name)),OH(x)&&l(x),m.children){const _=m.children;for(let E=0;E<_.length;E++)a(_[E],x,f&&f.children[E])}f=f||x}return b?()=>{s(b)}:Eg}function s(d){if(PH(d)){const h=r.get(d);h&&(r.delete(d),i.splice(i.indexOf(h),1),h.children.forEach(s),h.alias.forEach(s))}else{const h=i.indexOf(d);h>-1&&(i.splice(h,1),d.record.name&&r.delete(d.record.name),d.children.forEach(s),d.alias.forEach(s))}}function o(){return i}function l(d){const h=use(d,i);i.splice(h,0,d),d.record.name&&!pR(d)&&r.set(d.record.name,d)}function c(d,h){let f,p={},m,v;if("name"in d&&d.name){if(f=r.get(d.name),!f)throw ov(1,{location:d});v=f.record.name,p=vr(hR(h.params,f.keys.filter(b=>!b.optional).concat(f.parent?f.parent.keys.filter(b=>b.optional):[]).map(b=>b.name)),d.params&&hR(d.params,f.keys.map(b=>b.name))),m=f.stringify(p)}else if(d.path!=null)m=d.path,f=i.find(b=>b.re.test(m)),f&&(p=f.parse(m),v=f.record.name);else{if(f=h.name?r.get(h.name):i.find(b=>b.re.test(h.path)),!f)throw ov(1,{location:d,currentLocation:h});v=f.record.name,p=vr({},h.params,d.params),m=f.stringify(p)}const y=[];let x=f;for(;x;)y.unshift(x.record),x=x.parent;return{name:v,path:m,params:p,matched:y,meta:cse(y)}}e.forEach(d=>a(d));function u(){i.length=0,r.clear()}return{addRoute:a,resolve:c,removeRoute:s,clearRoutes:u,getRoutes:o,getRecordMatcher:n}}function hR(e,t){const i={};for(const r of t)r in e&&(i[r]=e[r]);return i}function fR(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:lse(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function lse(e){const t={},i=e.props||!1;if("component"in e)t.default=i;else for(const r in e.components)t[r]=typeof i=="object"?i[r]:i;return t}function pR(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function cse(e){return e.reduce((t,i)=>vr(t,i.meta),{})}function mR(e,t){const i={};for(const r in e)i[r]=r in t?t[r]:e[r];return i}function use(e,t){let i=0,r=t.length;for(;i!==r;){const a=i+r>>1;IH(e,t[a])<0?r=a:i=a+1}const n=dse(e);return n&&(r=t.lastIndexOf(n,r-1)),r}function dse(e){let t=e;for(;t=t.parent;)if(OH(t)&&IH(e,t)===0)return t}function OH({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function hse(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<r.length;++n){const a=r[n].replace(_H," "),s=a.indexOf("="),o=i1(s<0?a:a.slice(0,s)),l=s<0?null:i1(a.slice(s+1));if(o in t){let c=t[o];xl(c)||(c=t[o]=[c]),c.push(l)}else t[o]=l}return t}function vR(e){let t="";for(let i in e){const r=e[i];if(i=Oae(i),r==null){r!==void 0&&(t+=(t.length?"&":"")+i);continue}(xl(r)?r.map(a=>a&&YE(a)):[r&&YE(r)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+i,a!=null&&(t+="="+a))})}return t}function fse(e){const t={};for(const i in e){const r=e[i];r!==void 0&&(t[i]=xl(r)?r.map(n=>n==null?null:""+n):r==null?r:""+r)}return t}const pse=Symbol(""),gR=Symbol(""),q5=Symbol(""),RH=Symbol(""),XE=Symbol("");function w0(){let e=[];function t(r){return e.push(r),()=>{const n=e.indexOf(r);n>-1&&e.splice(n,1)}}function i(){e=[]}return{add:t,list:()=>e.slice(),reset:i}}function Ed(e,t,i,r,n,a=s=>s()){const s=r&&(r.enterCallbacks[n]=r.enterCallbacks[n]||[]);return()=>new Promise((o,l)=>{const c=h=>{h===!1?l(ov(4,{from:i,to:t})):h instanceof Error?l(h):Qae(h)?l(ov(2,{from:t,to:h})):(s&&r.enterCallbacks[n]===s&&typeof h=="function"&&s.push(h),o())},u=a(()=>e.call(r&&r.instances[n],t,i,c));let d=Promise.resolve(u);e.length<3&&(d=d.then(c)),d.catch(h=>l(h))})}function P3(e,t,i,r,n=a=>a()){const a=[];for(const s of e)for(const o in s.components){let l=s.components[o];if(!(t!=="beforeRouteEnter"&&!s.instances[o]))if(wH(l)){const u=(l.__vccOpts||l)[t];u&&a.push(Ed(u,i,r,s,o,n))}else{let c=l();a.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${o}" at "${s.path}"`);const d=xae(u)?u.default:u;s.mods[o]=u,s.components[o]=d;const f=(d.__vccOpts||d)[t];return f&&Ed(f,i,r,s,o,n)()}))}}return a}function yR(e){const t=rt(q5),i=rt(RH),r=O(()=>{const l=g(e.to);return t.resolve(l)}),n=O(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],d=i.matched;if(!u||!d.length)return-1;const h=d.findIndex(sv.bind(null,u));if(h>-1)return h;const f=bR(l[c-2]);return c>1&&bR(u)===f&&d[d.length-1].path!==f?d.findIndex(sv.bind(null,l[c-2])):h}),a=O(()=>n.value>-1&&yse(i.params,r.value.params)),s=O(()=>n.value>-1&&n.value===i.matched.length-1&&AH(i.params,r.value.params));function o(l={}){return gse(l)?t[g(e.replace)?"replace":"push"](g(e.to)).catch(Eg):Promise.resolve()}return{route:r,href:O(()=>r.value.href),isActive:a,isExactActive:s,navigate:o}}const mse=ce({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:yR,setup(e,{slots:t}){const i=bi(yR(e)),{options:r}=rt(q5),n=O(()=>({[wR(e.activeClass,r.linkActiveClass,"router-link-active")]:i.isActive,[wR(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const a=t.default&&t.default(i);return e.custom?a:dt("a",{"aria-current":i.isExactActive?e.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:n.value},a)}}}),vse=mse;function gse(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function yse(e,t){for(const i in t){const r=t[i],n=e[i];if(typeof r=="string"){if(r!==n)return!1}else if(!xl(n)||n.length!==r.length||r.some((a,s)=>a!==n[s]))return!1}return!0}function bR(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const wR=(e,t,i)=>e??t??i,bse=ce({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:i}){const r=rt(XE),n=O(()=>e.route||r.value),a=rt(gR,0),s=O(()=>{let c=g(a);const{matched:u}=n.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),o=O(()=>n.value.matched[s.value]);Yt(gR,O(()=>s.value+1)),Yt(pse,o),Yt(XE,n);const l=j();return Ne(()=>[l.value,o.value,e.name],([c,u,d],[h,f,p])=>{u&&(u.instances[d]=c,f&&f!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!sv(u,f)||!h)&&(u.enterCallbacks[d]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=n.value,u=e.name,d=o.value,h=d&&d.components[u];if(!h)return xR(i.default,{Component:h,route:c});const f=d.props[u],p=f?f===!0?c.params:typeof f=="function"?f(c):f:null,v=dt(h,vr({},p,t,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return xR(i.default,{Component:v,route:c})||v}}});function xR(e,t){if(!e)return null;const i=e(t);return i.length===1?i[0]:i}const kH=bse;function wse(e){const t=ose(e.routes,e),i=e.parseQuery||hse,r=e.stringifyQuery||vR,n=e.history,a=w0(),s=w0(),o=w0(),l=Wi(al);let c=al;nm&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=M3.bind(null,$=>""+$),d=M3.bind(null,kae),h=M3.bind(null,i1);function f($,te){let Q,pe;return PH($)?(Q=t.getRecordMatcher($),pe=te):pe=$,t.addRoute(pe,Q)}function p($){const te=t.getRecordMatcher($);te&&t.removeRoute(te)}function m(){return t.getRoutes().map($=>$.record)}function v($){return!!t.getRecordMatcher($)}function y($,te){if(te=vr({},te||l.value),typeof $=="string"){const oe=T3(i,$,te.path),ge=t.resolve({path:oe.path},te),Ie=n.createHref(oe.fullPath);return vr(oe,ge,{params:h(ge.params),hash:i1(oe.hash),redirectedFrom:void 0,href:Ie})}let Q;if($.path!=null)Q=vr({},$,{path:T3(i,$.path,te.path).path});else{const oe=vr({},$.params);for(const ge in oe)oe[ge]==null&&delete oe[ge];Q=vr({},$,{params:d(oe)}),te.params=d(te.params)}const pe=t.resolve(Q,te),me=$.hash||"";pe.params=u(h(pe.params));const le=Nae(r,vr({},$,{hash:Iae(me),path:pe.path})),Z=n.createHref(le);return vr({fullPath:le,hash:me,query:r===vR?fse($.query):$.query||{}},pe,{redirectedFrom:void 0,href:Z})}function x($){return typeof $=="string"?T3(i,$,l.value.path):vr({},$)}function b($,te){if(c!==$)return ov(8,{from:te,to:$})}function w($){return E($)}function S($){return w(vr(x($),{replace:!0}))}function _($){const te=$.matched[$.matched.length-1];if(te&&te.redirect){const{redirect:Q}=te;let pe=typeof Q=="function"?Q($):Q;return typeof pe=="string"&&(pe=pe.includes("?")||pe.includes("#")?pe=x(pe):{path:pe},pe.params={}),vr({query:$.query,hash:$.hash,params:pe.path!=null?{}:$.params},pe)}}function E($,te){const Q=c=y($),pe=l.value,me=$.state,le=$.force,Z=$.replace===!0,oe=_(Q);if(oe)return E(vr(x(oe),{state:typeof oe=="object"?vr({},me,oe.state):me,force:le,replace:Z}),te||Q);const ge=Q;ge.redirectedFrom=te;let Ie;return!le&&Fae(r,pe,Q)&&(Ie=ov(16,{to:ge,from:pe}),V(pe,pe,!0,!1)),(Ie?Promise.resolve(Ie):M(ge,pe)).catch(we=>Uc(we)?Uc(we,2)?we:z(we):I(we,ge,pe)).then(we=>{if(we){if(Uc(we,2))return E(vr({replace:Z},x(we.to),{state:typeof we.to=="object"?vr({},me,we.to.state):me,force:le}),te||ge)}else we=P(ge,pe,!0,Z,me);return T(ge,pe,we),we})}function C($,te){const Q=b($,te);return Q?Promise.reject(Q):Promise.resolve()}function A($){const te=q.values().next().value;return te&&typeof te.runWithContext=="function"?te.runWithContext($):$()}function M($,te){let Q;const[pe,me,le]=xse($,te);Q=P3(pe.reverse(),"beforeRouteLeave",$,te);for(const oe of pe)oe.leaveGuards.forEach(ge=>{Q.push(Ed(ge,$,te))});const Z=C.bind(null,$,te);return Q.push(Z),J(Q).then(()=>{Q=[];for(const oe of a.list())Q.push(Ed(oe,$,te));return Q.push(Z),J(Q)}).then(()=>{Q=P3(me,"beforeRouteUpdate",$,te);for(const oe of me)oe.updateGuards.forEach(ge=>{Q.push(Ed(ge,$,te))});return Q.push(Z),J(Q)}).then(()=>{Q=[];for(const oe of le)if(oe.beforeEnter)if(xl(oe.beforeEnter))for(const ge of oe.beforeEnter)Q.push(Ed(ge,$,te));else Q.push(Ed(oe.beforeEnter,$,te));return Q.push(Z),J(Q)}).then(()=>($.matched.forEach(oe=>oe.enterCallbacks={}),Q=P3(le,"beforeRouteEnter",$,te,A),Q.push(Z),J(Q))).then(()=>{Q=[];for(const oe of s.list())Q.push(Ed(oe,$,te));return Q.push(Z),J(Q)}).catch(oe=>Uc(oe,8)?oe:Promise.reject(oe))}function T($,te,Q){o.list().forEach(pe=>A(()=>pe($,te,Q)))}function P($,te,Q,pe,me){const le=b($,te);if(le)return le;const Z=te===al,oe=nm?history.state:{};Q&&(pe||Z?n.replace($.fullPath,vr({scroll:Z&&oe&&oe.scroll},me)):n.push($.fullPath,me)),l.value=$,V($,te,Q,Z),z()}let D;function k(){D||(D=n.listen(($,te,Q)=>{if(!ae.listening)return;const pe=y($),me=_(pe);if(me){E(vr(me,{replace:!0}),pe).catch(Eg);return}c=pe;const le=l.value;nm&&$ae(oR(le.fullPath,Q.delta),H_()),M(pe,le).catch(Z=>Uc(Z,12)?Z:Uc(Z,2)?(E(Z.to,pe).then(oe=>{Uc(oe,20)&&!Q.delta&&Q.type===r1.pop&&n.go(-1,!1)}).catch(Eg),Promise.reject()):(Q.delta&&n.go(-Q.delta,!1),I(Z,pe,le))).then(Z=>{Z=Z||P(pe,le,!1),Z&&(Q.delta&&!Uc(Z,8)?n.go(-Q.delta,!1):Q.type===r1.pop&&Uc(Z,20)&&n.go(-1,!1)),T(pe,le,Z)}).catch(Eg)}))}let L=w0(),R=w0(),N;function I($,te,Q){z($);const pe=R.list();return pe.length?pe.forEach(me=>me($,te,Q)):console.error($),Promise.reject($)}function B(){return N&&l.value!==al?Promise.resolve():new Promise(($,te)=>{L.add([$,te])})}function z($){return N||(N=!$,k(),L.list().forEach(([te,Q])=>$?Q($):te()),L.reset()),$}function V($,te,Q,pe){const{scrollBehavior:me}=e;if(!nm||!me)return Promise.resolve();const le=!Q&&Zae(oR($.fullPath,0))||(pe||!Q)&&history.state&&history.state.scroll||null;return ft().then(()=>me($,te,le)).then(Z=>Z&&Gae(Z)).catch(Z=>I(Z,$,te))}const W=$=>n.go($);let G;const q=new Set,ae={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,clearRoutes:t.clearRoutes,hasRoute:v,getRoutes:m,resolve:y,options:e,push:w,replace:S,go:W,back:()=>W(-1),forward:()=>W(1),beforeEach:a.add,beforeResolve:s.add,afterEach:o.add,onError:R.add,isReady:B,install($){const te=this;$.component("RouterLink",vse),$.component("RouterView",kH),$.config.globalProperties.$router=te,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>g(l)}),nm&&!G&&l.value===al&&(G=!0,w(n.location).catch(me=>{}));const Q={};for(const me in al)Object.defineProperty(Q,me,{get:()=>l.value[me],enumerable:!0});$.provide(q5,te),$.provide(RH,oc(Q)),$.provide(XE,l);const pe=$.unmount;q.add($),$.unmount=function(){q.delete($),q.size<1&&(c=al,D&&D(),D=null,l.value=al,G=!1,N=!1),pe()}}};function J($){return $.reduce((te,Q)=>te.then(()=>A(Q)),Promise.resolve())}return ae}function xse(e,t){const i=[],r=[],n=[],a=Math.max(t.matched.length,e.matched.length);for(let s=0;s<a;s++){const o=t.matched[s];o&&(e.matched.find(c=>sv(c,o))?r.push(o):i.push(o));const l=e.matched[s];l&&(t.matched.find(c=>sv(c,l))||n.push(l))}return[i,r,n]}const _se=/(:\w+)\([^)]+\)/g,Sse=/(:\w+)[?+*]/g,Cse=/:\w+/g,Ese=(e,t)=>t.path.replace(_se,"$1").replace(Sse,"$1").replace(Cse,i=>{var r;return((r=e.params[i.slice(1)])==null?void 0:r.toString())||""}),QE=(e,t)=>{const i=e.route.matched.find(n=>{var a;return((a=n.components)==null?void 0:a.default)===e.Component.type}),r=t??(i==null?void 0:i.meta.key)??(i&&Ese(e.route,i));return typeof r=="function"?r(e.route):r},Ase=(e,t)=>({default:()=>e?dt(bte,e===!0?{}:e,t):t});function Y5(e){return Array.isArray(e)?e:[e]}const Mse="modulepreload",Tse=function(e,t){return new URL(e,t).href},_R={},Ks=function(t,i,r){let n=Promise.resolve();if(i&&i.length>0){const s=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(i.map(c=>{if(c=Tse(c,r),c in _R)return;_R[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(!!r)for(let p=s.length-1;p>=0;p--){const m=s[p];if(m.href===c&&(!u||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Mse,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return n.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})},D3=[{name:"about",path:"/about",component:()=>Ks(()=>import("./D3JwA2SD.js"),__vite__mapDeps([0,1]),import.meta.url)},{name:"index",path:"/",component:()=>Ks(()=>import("./DiCYm_E8.js"),__vite__mapDeps([2,3]),import.meta.url)},{name:"research",path:"/research",component:()=>Ks(()=>import("./CUFSHycE.js"),__vite__mapDeps([4,5]),import.meta.url)}],Pse=(e,t,i)=>(t=t===!0?{}:t,{default:()=>{var r;return t?dt(e,t,i):(r=i.default)==null?void 0:r.call(i)}}),Dse=/(:\w+)\([^)]+\)/g,Ise=/(:\w+)[?+*]/g,Ose=/:\w+/g;function SR(e){const t=(e==null?void 0:e.meta.key)??e.path.replace(Dse,"$1").replace(Ise,"$1").replace(Ose,i=>{var r;return((r=e.params[i.slice(1)])==null?void 0:r.toString())||""});return typeof t=="function"?t(e):t}function Rse(e,t){return e===t||t===al?!1:SR(e)!==SR(t)?!0:!e.matched.every((r,n)=>{var a,s;return r.components&&r.components.default===((s=(a=t.matched[n])==null?void 0:a.components)==null?void 0:s.default)})}const kse={scrollBehavior(e,t,i){var c;const r=Xr(),n=((c=Ns().options)==null?void 0:c.scrollBehaviorType)??"auto";let a=i||void 0;const s=typeof e.meta.scrollToTop=="function"?e.meta.scrollToTop(e,t):e.meta.scrollToTop;if(!a&&t&&e&&s!==!1&&Rse(e,t)&&(a={left:0,top:0}),e.path===t.path)return t.hash&&!e.hash?{left:0,top:0}:e.hash?{el:e.hash,top:CR(e.hash),behavior:n}:!1;const o=u=>!!(u.meta.pageTransition??FE),l=o(t)&&o(e)?"page:transition:finish":"page:finish";return new Promise(u=>{r.hooks.hookOnce(l,async()=>{await new Promise(d=>setTimeout(d,0)),e.hash&&(a={el:e.hash,top:CR(e.hash),behavior:n}),u(a)})})}};function CR(e){try{const t=document.querySelector(e);if(t)return(Number.parseFloat(getComputedStyle(t).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle(document.documentElement).scrollPaddingTop)||0)}catch{}return 0}const Lse={hashMode:!1,scrollBehaviorType:"auto"},ao={...Lse,...kse},Bse=async e=>{var l;let t,i;if(!((l=e.meta)!=null&&l.validate))return;const r=Xr(),n=Ns(),a=([t,i]=Lm(()=>Promise.resolve(e.meta.validate(e))),t=await t,i(),t);if(a===!0)return;const s=V_({statusCode:a&&a.statusCode||404,statusMessage:a&&a.statusMessage||`Page Not Found: ${e.fullPath}`,data:{path:e.fullPath}}),o=n.beforeResolve(c=>{if(o(),c===e){const u=n.afterEach(async()=>{u(),await r.runWithContext(()=>ym(s)),window==null||window.history.pushState({},"",e.fullPath)});return!1}})},Nse=async e=>{let t,i;const r=([t,i]=Lm(()=>$5(e.path)),t=await t,i(),t);if(r.redirect)return Vu(r.redirect,{acceptRelative:!0})?(window.location.href=r.redirect,!1):r.redirect},Fse=[Bse,Nse],Mg={};function zse(e,t,i){const{pathname:r,search:n,hash:a}=t,s=e.indexOf("#");if(s>-1){const c=a.includes(e.slice(s))?e.slice(s).length:1;let u=a.slice(c);return u[0]!=="/"&&(u="/"+u),WO(u,"")}const o=WO(r,e),l=!i||bre(o,i,{trailingSlash:!0})?o:i;return l+(l.includes("?")?"":n)+a}const Vse=Wo({name:"nuxt:router",enforce:"pre",async setup(e){var v;let t,i,r=ey().app.baseURL;ao.hashMode&&!r.includes("#")&&(r+="#");const n=((v=ao.history)==null?void 0:v.call(ao,r))??(ao.hashMode?Xae(r):TH(r)),a=ao.routes?([t,i]=Lm(()=>ao.routes(D3)),t=await t,i(),t??D3):D3;let s;const o=wse({...ao,scrollBehavior:(y,x,b)=>{if(x===al){s=b;return}if(ao.scrollBehavior){if(o.options.scrollBehavior=ao.scrollBehavior,"scrollRestoration"in window.history){const w=o.beforeEach(()=>{w(),window.history.scrollRestoration="manual"})}return ao.scrollBehavior(y,al,s||b)}},history:n,routes:a});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),e.vueApp.use(o);const l=Wi(o.currentRoute.value);o.afterEach((y,x)=>{l.value=x}),Object.defineProperty(e.vueApp.config.globalProperties,"previousRoute",{get:()=>l.value});const c=zse(r,window.location,e.payload.path),u=Wi(o.currentRoute.value),d=()=>{u.value=o.currentRoute.value};e.hook("page:finish",d),o.afterEach((y,x)=>{var b,w,S,_;((w=(b=y.matched[0])==null?void 0:b.components)==null?void 0:w.default)===((_=(S=x.matched[0])==null?void 0:S.components)==null?void 0:_.default)&&d()});const h={};for(const y in u.value)Object.defineProperty(h,y,{get:()=>u.value[y],enumerable:!0});e._route=oc(h),e._middleware=e._middleware||{global:[],named:{}};const f=z_();o.afterEach(async(y,x,b)=>{delete e._processingMiddleware,!e.isHydrating&&f.value&&await e.runWithContext(yne),b&&await e.callHook("page:loading:end")});try{[t,i]=Lm(()=>o.isReady()),await t,i()}catch(y){[t,i]=Lm(()=>e.runWithContext(()=>ym(y))),await t,i()}const p=c!==o.currentRoute.value.fullPath?o.resolve(c):o.currentRoute.value;d();const m=e.payload.state._layout;return o.beforeEach(async(y,x)=>{var b;await e.callHook("page:loading:start"),y.meta=bi(y.meta),e.isHydrating&&m&&!rh(y.meta.layout)&&(y.meta.layout=m),e._processingMiddleware=!0;{const w=new Set([...Fse,...e._middleware.global]);for(const S of y.matched){const _=S.meta.middleware;if(_)for(const E of Y5(_))w.add(E)}{const S=await e.runWithContext(()=>$5(y.path));if(S.appMiddleware)for(const _ in S.appMiddleware)S.appMiddleware[_]?w.add(_):w.delete(_)}for(const S of w){const _=typeof S=="string"?e._middleware.named[S]||await((b=Mg[S])==null?void 0:b.call(Mg).then(C=>C.default||C)):S;if(!_)throw new Error(`Unknown route middleware: '${S}'.`);const E=await e.runWithContext(()=>_(y,x));if(!e.payload.serverRendered&&e.isHydrating&&(E===!1||E instanceof Error)){const C=E||UE({statusCode:404,statusMessage:`Page Not Found: ${c}`});return await e.runWithContext(()=>ym(C)),!1}if(E!==!0&&(E||E===!1))return E}}}),o.onError(async()=>{delete e._processingMiddleware,await e.callHook("page:loading:end")}),o.afterEach(async(y,x)=>{y.matched.length===0&&await e.runWithContext(()=>ym(UE({statusCode:404,fatal:!1,statusMessage:`Page not found: ${y.fullPath}`,data:{path:y.fullPath}})))}),e.hooks.hookOnce("app:created",async()=>{try{"name"in p&&(p.name=void 0),await o.replace({...p,force:!0}),o.options.scrollBehavior=ao.scrollBehavior}catch(y){await e.runWithContext(()=>ym(y))}}),{provide:{router:o}}}}),JE=globalThis.requestIdleCallback||(e=>{const t=Date.now(),i={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))};return setTimeout(()=>{e(i)},1)}),Use=globalThis.cancelIdleCallback||(e=>{clearTimeout(e)}),j_=e=>{const t=Xr();t.isHydrating?t.hooks.hookOnce("app:suspense:resolve",()=>{JE(()=>e())}):JE(()=>e())},Hse=Wo({name:"nuxt:payload",setup(e){Ns().beforeResolve(async(t,i)=>{if(t.path===i.path)return;const r=await nR(t.path);r&&Object.assign(e.static.data,r.data)}),j_(()=>{var t;e.hooks.hook("link:prefetch",async i=>{const{hostname:r}=new URL(i,window.location.href);r===window.location.hostname&&await nR(i)}),((t=navigator.connection)==null?void 0:t.effectiveType)!=="slow-2g"&&setTimeout(U_,1e3)})}}),jse=Wo(()=>{const e=Ns();j_(()=>{e.beforeResolve(async()=>{await new Promise(t=>{setTimeout(t,100),requestAnimationFrame(()=>{setTimeout(t,0)})})})})}),Wse=Wo(e=>{let t;async function i(){const r=await U_();t&&clearTimeout(t),t=setTimeout(i,YO);try{const n=await $fetch(G5("builds/latest.json")+`?${Date.now()}`);n.id!==r.id&&e.hooks.callHook("app:manifest:update",n)}catch{}}j_(()=>{t=setTimeout(i,YO)})});function Gse(e={}){const t=e.path||window.location.pathname;let i={};try{i=V2(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(e.force||(i==null?void 0:i.path)!==t||(i==null?void 0:i.expires)<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:t,expires:Date.now()+(e.ttl??1e4)}))}catch{}if(e.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:Xr().payload.state}))}catch{}window.location.pathname!==t?window.location.href=t:window.location.reload()}}const $se=Wo({name:"nuxt:chunk-reload",setup(e){const t=Ns(),i=ey(),r=new Set;t.beforeEach(()=>{r.clear()}),e.hook("app:chunkError",({error:a})=>{r.add(a)});function n(a){const o="href"in a&&a.href[0]==="#"?i.app.baseURL+a.href:N_(i.app.baseURL,a.fullPath);Gse({path:o,persistState:!0})}e.hook("app:manifest:update",()=>{t.beforeResolve(n)}),t.onError((a,s)=>{r.has(a)&&n(s)})}}),Zse=Wo({name:"nuxt:global-components"}),Xy={},qse=Wo({name:"nuxt:prefetch",setup(e){const t=Ns();e.hooks.hook("app:mounted",()=>{t.beforeEach(async i=>{var n;const r=(n=i==null?void 0:i.meta)==null?void 0:n.layout;r&&typeof Xy[r]=="function"&&await Xy[r]()})}),e.hooks.hook("link:prefetch",i=>{if(Vu(i))return;const r=t.resolve(i);if(!r)return;const n=r.meta.layout;let a=Y5(r.meta.middleware);a=a.filter(s=>typeof s=="string");for(const s of a)typeof Mg[s]=="function"&&Mg[s]();n&&typeof Xy[n]=="function"&&Xy[n]()})}});async function LH(e,t=Ns()){const{path:i,matched:r}=t.resolve(e);if(!r.length||(t._routePreloaded||(t._routePreloaded=new Set),t._routePreloaded.has(i)))return;const n=t._preloadPromises=t._preloadPromises||[];if(n.length>4)return Promise.all(n).then(()=>LH(e,t));t._routePreloaded.add(i);const a=r.map(s=>{var o;return(o=s.components)==null?void 0:o.default}).filter(s=>typeof s=="function");for(const s of a){const o=Promise.resolve(s()).catch(()=>{}).finally(()=>n.splice(n.indexOf(o)));n.push(o)}await Promise.all(n)}const Yse=(...e)=>e.find(t=>t!==void 0);function Kse(e){const t=e.componentName||"NuxtLink";function i(n,a){if(!n||e.trailingSlash!=="append"&&e.trailingSlash!=="remove")return n;if(typeof n=="string")return ER(n,e.trailingSlash);const s="path"in n&&n.path!==void 0?n.path:a(n).path;return{...n,name:void 0,path:ER(s,e.trailingSlash)}}function r(n){const a=Ns(),s=ey(),o=O(()=>!!n.target&&n.target!=="_self"),l=O(()=>{const m=n.to||n.href||"";return typeof m=="string"&&Vu(m,{acceptRelative:!0})}),c=Ht("RouterLink"),u=c&&typeof c!="string"?c.useLink:void 0,d=O(()=>{if(n.external)return!0;const m=n.to||n.href||"";return typeof m=="object"?!1:m===""||l.value}),h=O(()=>{const m=n.to||n.href||"";return d.value?m:i(m,a.resolve)}),f=d.value||u==null?void 0:u({...n,to:h}),p=O(()=>{var m;if(!h.value||l.value)return h.value;if(d.value){const v=typeof h.value=="object"&&"path"in h.value?jE(h.value):h.value,y=typeof v=="object"?a.resolve(v).href:v;return i(y,a.resolve)}return typeof h.value=="object"?((m=a.resolve(h.value))==null?void 0:m.href)??null:i(N_(s.app.baseURL,h.value),a.resolve)});return{to:h,hasTarget:o,isAbsoluteUrl:l,isExternal:d,href:p,isActive:(f==null?void 0:f.isActive)??O(()=>h.value===a.currentRoute.value.path),isExactActive:(f==null?void 0:f.isExactActive)??O(()=>h.value===a.currentRoute.value.path),route:(f==null?void 0:f.route)??O(()=>a.resolve(h.value)),async navigate(){await gne(p.value,{replace:n.replace,external:d.value||o.value})}}}return ce({name:t,props:{to:{type:[String,Object],default:void 0,required:!1},href:{type:[String,Object],default:void 0,required:!1},target:{type:String,default:void 0,required:!1},rel:{type:String,default:void 0,required:!1},noRel:{type:Boolean,default:void 0,required:!1},prefetch:{type:Boolean,default:void 0,required:!1},prefetchOn:{type:[String,Object],default:void 0,required:!1},noPrefetch:{type:Boolean,default:void 0,required:!1},activeClass:{type:String,default:void 0,required:!1},exactActiveClass:{type:String,default:void 0,required:!1},prefetchedClass:{type:String,default:void 0,required:!1},replace:{type:Boolean,default:void 0,required:!1},ariaCurrentValue:{type:String,default:void 0,required:!1},external:{type:Boolean,default:void 0,required:!1},custom:{type:Boolean,default:void 0,required:!1}},useLink:r,setup(n,{slots:a}){const s=Ns(),{to:o,href:l,navigate:c,isExternal:u,hasTarget:d,isAbsoluteUrl:h}=r(n),f=j(!1),p=j(null),m=x=>{var b;p.value=n.custom?(b=x==null?void 0:x.$el)==null?void 0:b.nextElementSibling:x==null?void 0:x.$el};function v(x){var b,w;return!f.value&&(typeof n.prefetchOn=="string"?n.prefetchOn===x:((b=n.prefetchOn)==null?void 0:b[x])??((w=e.prefetchOn)==null?void 0:w[x]))&&(n.prefetch??e.prefetch)!==!1&&n.noPrefetch!==!0&&n.target!=="_blank"&&!Jse()}async function y(x=Xr()){if(f.value)return;f.value=!0;const b=typeof o.value=="string"?o.value:u.value?jE(o.value):s.resolve(o.value).fullPath,w=u.value?new URL(b,window.location.href).href:b;await Promise.all([x.hooks.callHook("link:prefetch",w).catch(()=>{}),!u.value&&!d.value&&LH(o.value,s).catch(()=>{})])}if(v("visibility")){const x=Xr();let b,w=null;Lt(()=>{const S=Xse();j_(()=>{b=JE(()=>{var _;(_=p==null?void 0:p.value)!=null&&_.tagName&&(w=S.observe(p.value,async()=>{w==null||w(),w=null,await y(x)}))})})}),Bi(()=>{b&&Use(b),w==null||w(),w=null})}return()=>{var w;if(!u.value&&!d.value){const S={ref:m,to:o.value,activeClass:n.activeClass||e.activeClass,exactActiveClass:n.exactActiveClass||e.exactActiveClass,replace:n.replace,ariaCurrentValue:n.ariaCurrentValue,custom:n.custom};return n.custom||(v("interaction")&&(S.onPointerenter=y.bind(null,void 0),S.onFocus=y.bind(null,void 0)),f.value&&(S.class=n.prefetchedClass||e.prefetchedClass),S.rel=n.rel||void 0),dt(Ht("RouterLink"),S,a.default)}const x=n.target||null,b=Yse(n.noRel?"":n.rel,e.externalRelAttribute,h.value||d.value?"noopener noreferrer":"")||null;return n.custom?a.default?a.default({href:l.value,navigate:c,prefetch:y,get route(){if(!l.value)return;const S=new URL(l.value,window.location.href);return{path:S.pathname,fullPath:S.pathname,get query(){return $U(S.search)},hash:S.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:l.value}},rel:b,target:x,isExternal:u.value||d.value,isActive:!1,isExactActive:!1}):null:dt("a",{ref:p,href:l.value||null,rel:b,target:x},(w=a.default)==null?void 0:w.call(a))}}})}const BH=Kse(Xre);function ER(e,t){const i=t==="append"?H2:B_;return Vu(e)&&!e.startsWith("http")?e:i(e,!0)}function Xse(){const e=Xr();if(e._observer)return e._observer;let t=null;const i=new Map,r=(a,s)=>(t||(t=new IntersectionObserver(o=>{for(const l of o){const c=i.get(l.target);(l.isIntersecting||l.intersectionRatio>0)&&c&&c()}})),i.set(a,s),t.observe(a),()=>{i.delete(a),t.unobserve(a),i.size===0&&(t.disconnect(),t=null)});return e._observer={observe:r}}const Qse=/2g/;function Jse(){const e=navigator.connection;return!!(e&&(e.saveData||Qse.test(e.effectiveType)))}var eoe=Object.create,W_=Object.defineProperty,toe=Object.getOwnPropertyDescriptor,ioe=Object.getOwnPropertyNames,roe=Object.getPrototypeOf,noe=Object.prototype.hasOwnProperty,aoe=(e,t,i)=>t in e?W_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,np=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),soe=(e,t)=>{for(var i in t)W_(e,i,{get:t[i],enumerable:!0})},ooe=(e,t,i,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of ioe(t))!noe.call(e,n)&&n!==i&&W_(e,n,{get:()=>t[n],enumerable:!(r=toe(t,n))||r.enumerable});return e},_h=(e,t,i)=>(i=e!=null?eoe(roe(e)):{},ooe(t||!e||!e.__esModule?W_(i,"default",{value:e,enumerable:!0}):i,e)),df=(e,t,i)=>(aoe(e,typeof t!="symbol"?t+"":t,i),i),loe=np((e,t)=>{(function(i,r){typeof e=="object"?t.exports=r():typeof define=="function"&&define.amd?define(r):i.Alea=r()})(e,function(){return i.importState=function(n){var a=new i;return a.importState(n),a},i;function i(){return function(n){var a=0,s=0,o=0,l=1;n.length==0&&(n=[+new Date]);var c=r();a=c(" "),s=c(" "),o=c(" ");for(var u=0;u<n.length;u++)a-=c(n[u]),a<0&&(a+=1),s-=c(n[u]),s<0&&(s+=1),o-=c(n[u]),o<0&&(o+=1);c=null;var d=function(){var h=2091639*a+l*23283064365386963e-26;return a=s,s=o,o=h-(l=h|0)};return d.next=d,d.uint32=function(){return d()*4294967296},d.fract53=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.version="Alea 0.9",d.args=n,d.exportState=function(){return[a,s,o,l]},d.importState=function(h){a=+h[0]||0,s=+h[1]||0,o=+h[2]||0,l=+h[3]||0},d}(Array.prototype.slice.call(arguments))}function r(){var n=4022871197,a=function(s){s=s.toString();for(var o=0;o<s.length;o++){n+=s.charCodeAt(o);var l=.02519603282416938*n;n=l>>>0,l-=n,l*=n,n=l>>>0,l-=n,n+=l*4294967296}return(n>>>0)*23283064365386963e-26};return a.version="Mash 0.9",a}})}),NH=np((e,t)=>{(function(i,r){typeof e=="object"&&typeof t<"u"?r(e):typeof define=="function"&&define.amd?define(["exports"],r):r((i=typeof globalThis<"u"?globalThis:i||self).SVDJS={})})(e,function(i){i.SVD=function(r,n,a,s,o){if(n=n===void 0||n,a=a===void 0||a,o=1e-64/(s=s||Math.pow(2,-52)),!r)throw new TypeError("Matrix a is not defined");var l,c,u,d,h,f,p,m,v,y,x,b,w=r[0].length,S=r.length;if(S<w)throw new TypeError("Invalid matrix: m < n");for(var _=[],E=[],C=[],A=n==="f"?S:w,M=y=p=0;M<S;M++)E[M]=new Array(A).fill(0);for(M=0;M<w;M++)C[M]=new Array(w).fill(0);var T,P=new Array(w).fill(0);for(M=0;M<S;M++)for(l=0;l<w;l++)E[M][l]=r[M][l];for(M=0;M<w;M++){for(_[M]=p,v=0,u=M+1,l=M;l<S;l++)v+=Math.pow(E[l][M],2);if(v<o)p=0;else for(m=(f=E[M][M])*(p=f<0?Math.sqrt(v):-Math.sqrt(v))-v,E[M][M]=f-p,l=u;l<w;l++){for(v=0,c=M;c<S;c++)v+=E[c][M]*E[c][l];for(f=v/m,c=M;c<S;c++)E[c][l]=E[c][l]+f*E[c][M]}for(P[M]=p,v=0,l=u;l<w;l++)v+=Math.pow(E[M][l],2);if(v<o)p=0;else{for(m=(f=E[M][M+1])*(p=f<0?Math.sqrt(v):-Math.sqrt(v))-v,E[M][M+1]=f-p,l=u;l<w;l++)_[l]=E[M][l]/m;for(l=u;l<S;l++){for(v=0,c=u;c<w;c++)v+=E[l][c]*E[M][c];for(c=u;c<w;c++)E[l][c]=E[l][c]+v*_[c]}}y<(x=Math.abs(P[M])+Math.abs(_[M]))&&(y=x)}if(a)for(M=w-1;0<=M;M--){if(p!==0){for(m=E[M][M+1]*p,l=u;l<w;l++)C[l][M]=E[M][l]/m;for(l=u;l<w;l++){for(v=0,c=u;c<w;c++)v+=E[M][c]*C[c][l];for(c=u;c<w;c++)C[c][l]=C[c][l]+v*C[c][M]}}for(l=u;l<w;l++)C[M][l]=0,C[l][M]=0;C[M][M]=1,p=_[M],u=M}if(n){if(n==="f")for(M=w;M<S;M++){for(l=w;l<S;l++)E[M][l]=0;E[M][M]=1}for(M=w-1;0<=M;M--){for(u=M+1,p=P[M],l=u;l<A;l++)E[M][l]=0;if(p!==0){for(m=E[M][M]*p,l=u;l<A;l++){for(v=0,c=u;c<S;c++)v+=E[c][M]*E[c][l];for(f=v/m,c=M;c<S;c++)E[c][l]=E[c][l]+f*E[c][M]}for(l=M;l<S;l++)E[l][M]=E[l][M]/p}else for(l=M;l<S;l++)E[l][M]=0;E[M][M]=E[M][M]+1}}for(s*=y,c=w-1;0<=c;c--)for(var D=0;D<50;D++){for(T=!1,u=c;0<=u;u--){if(Math.abs(_[u])<=s){T=!0;break}if(Math.abs(P[u-1])<=s)break}if(!T){for(h=0,d=u-(v=1),M=u;M<c+1&&(f=v*_[M],_[M]=h*_[M],!(Math.abs(f)<=s));M++)if(p=P[M],P[M]=Math.sqrt(f*f+p*p),h=p/(m=P[M]),v=-f/m,n)for(l=0;l<S;l++)x=E[l][d],b=E[l][M],E[l][d]=x*h+b*v,E[l][M]=-x*v+b*h}if(b=P[c],u===c){if(b<0&&(P[c]=-b,a))for(l=0;l<w;l++)C[l][c]=-C[l][c];break}for(y=P[u],f=(((x=P[c-1])-b)*(x+b)+((p=_[c-1])-(m=_[c]))*(p+m))/(2*m*x),p=Math.sqrt(f*f+1),f=((y-b)*(y+b)+m*(x/(f<0?f-p:f+p)-m))/y,M=u+(v=h=1);M<c+1;M++){if(p=_[M],x=P[M],m=v*p,p*=h,b=Math.sqrt(f*f+m*m),f=y*(h=f/(_[M-1]=b))+p*(v=m/b),p=-y*v+p*h,m=x*v,x*=h,a)for(l=0;l<w;l++)y=C[l][M-1],b=C[l][M],C[l][M-1]=y*h+b*v,C[l][M]=-y*v+b*h;if(b=Math.sqrt(f*f+m*m),f=(h=f/(P[M-1]=b))*p+(v=m/b)*x,y=-v*p+h*x,n)for(l=0;l<S;l++)x=E[l][M-1],b=E[l][M],E[l][M-1]=x*h+b*v,E[l][M]=-x*v+b*h}_[u]=0,_[c]=f,P[c]=y}for(M=0;M<w;M++)P[M]<s&&(P[M]=0);return{u:E,q:P,v:C}},i.VERSION="1.1.1",Object.defineProperty(i,"__esModule",{value:!0})})}),coe=np((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;function i(r){if(r===null||r===!0||r===!1)return NaN;var n=Number(r);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}t.exports=e.default}),uoe=np((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;function i(r){var n=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return n.setUTCFullYear(r.getFullYear()),r.getTime()-n.getTime()}t.exports=e.default}),doe=np((e,t)=>{function i(a,s){function o(){this.constructor=a}o.prototype=s.prototype,a.prototype=new o}function r(a,s,o,l){this.message=a,this.expected=s,this.found=o,this.location=l,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,r)}i(r,Error),r.buildMessage=function(a,s){var o={literal:function(p){return'"'+c(p.text)+'"'},class:function(p){var m="",v;for(v=0;v<p.parts.length;v++)m+=p.parts[v]instanceof Array?u(p.parts[v][0])+"-"+u(p.parts[v][1]):u(p.parts[v]);return"["+(p.inverted?"^":"")+m+"]"},any:function(p){return"any character"},end:function(p){return"end of input"},other:function(p){return p.description}};function l(p){return p.charCodeAt(0).toString(16).toUpperCase()}function c(p){return p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(m){return"\\x0"+l(m)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(m){return"\\x"+l(m)})}function u(p){return p.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(m){return"\\x0"+l(m)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(m){return"\\x"+l(m)})}function d(p){return o[p.type](p)}function h(p){var m=new Array(p.length),v,y;for(v=0;v<p.length;v++)m[v]=d(p[v]);if(m.sort(),m.length>0){for(v=1,y=1;v<m.length;v++)m[v-1]!==m[v]&&(m[y]=m[v],y++);m.length=y}switch(m.length){case 1:return m[0];case 2:return m[0]+" or "+m[1];default:return m.slice(0,-1).join(", ")+", or "+m[m.length-1]}}function f(p){return p?'"'+c(p)+'"':"end of input"}return"Expected "+h(a)+" but "+f(s)+" found."};function n(a,s){s=s!==void 0?s:{};var o={},l={svg_path:yt},c=yt,u=function(re){if(!re)return[];for(var de=[],Re=0;Re<re.length;Re++)de=de.concat.apply(de,re[Re]);var ye=de[0];return ye&&ye.code=="m"&&(delete ye.relative,ye.code="M"),de},d=function(re,de){return Fc(re,de)},h=/^[Mm]/,f=_e(["M","m"],!1,!1),p=function(re,de,Re){var ye=Nl(re,[de]);return Re&&(ye=ye.concat(Nl(re=="M"?"L":"l",Re[1]))),ye},m=/^[Zz]/,v=_e(["Z","z"],!1,!1),y=function(){return Nl("Z")},x=/^[Ll]/,b=_e(["L","l"],!1,!1),w=function(re,de){return Nl(re,de)},S=/^[Hh]/,_=_e(["H","h"],!1,!1),E=function(re,de){return Nl(re,de.map(function(Re){return{x:Re}}))},C=/^[Vv]/,A=_e(["V","v"],!1,!1),M=function(re,de){return Nl(re,de.map(function(Re){return{y:Re}}))},T=/^[Cc]/,P=_e(["C","c"],!1,!1),D=function(re,de,Re){return{x1:re.x,y1:re.y,x2:de.x,y2:de.y,x:Re.x,y:Re.y}},k=/^[Ss]/,L=_e(["S","s"],!1,!1),R=function(re,de){return{x2:re.x,y2:re.y,x:de.x,y:de.y}},N=/^[Qq]/,I=_e(["Q","q"],!1,!1),B=function(re,de){return{x1:re.x,y1:re.y,x:de.x,y:de.y}},z=/^[Tt]/,V=_e(["T","t"],!1,!1),W=/^[Aa]/,G=_e(["A","a"],!1,!1),q=function(re,de,Re,ye,Ue,bt){return{rx:re,ry:de,xAxisRotation:Re,largeArc:ye,sweep:Ue,x:bt.x,y:bt.y}},ae=function(re,de){return{x:re,y:de}},J=function(re){return re*1},$=function(re){return re.join("")*1},te=/^[01]/,Q=_e(["0","1"],!1,!1),pe=function(re){return re=="1"},me=function(){return""},le=",",Z=vt(",",!1),oe=function(re){return re.join("")},ge=".",Ie=vt(".",!1),we=/^[eE]/,xe=_e(["e","E"],!1,!1),Se=/^[+\-]/,Le=_e(["+","-"],!1,!1),Be=/^[0-9]/,ee=_e([["0","9"]],!1,!1),X=function(re){return re.join("")},ue=/^[ \t\n\r]/,Oe=_e([" ","	",`
`,"\r"],!1,!1),Y=0,qe=[{line:1,column:1}],et=0,tt=[],ze;if("startRule"in s){if(!(s.startRule in l))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');c=l[s.startRule]}function vt(re,de){return{type:"literal",text:re,ignoreCase:de}}function _e(re,de,Re){return{type:"class",parts:re,inverted:de,ignoreCase:Re}}function Fe(){return{type:"end"}}function he(re){var de=qe[re],Re;if(de)return de;for(Re=re-1;!qe[Re];)Re--;for(de=qe[Re],de={line:de.line,column:de.column};Re<re;)a.charCodeAt(Re)===10?(de.line++,de.column=1):de.column++,Re++;return qe[re]=de,de}function ke(re,de){var Re=he(re),ye=he(de);return{start:{offset:re,line:Re.line,column:Re.column},end:{offset:de,line:ye.line,column:ye.column}}}function se(re){Y<et||(Y>et&&(et=Y,tt=[]),tt.push(re))}function He(re,de,Re){return new r(r.buildMessage(re,de),re,de,Re)}function yt(){var re,de,Re,ye,Ue;for(re=Y,de=[],Re=pi();Re!==o;)de.push(Re),Re=pi();if(de!==o)if(Re=Te(),Re===o&&(Re=null),Re!==o){for(ye=[],Ue=pi();Ue!==o;)ye.push(Ue),Ue=pi();ye!==o?(de=u(Re),re=de):(Y=re,re=o)}else Y=re,re=o;else Y=re,re=o;return re}function Te(){var re,de,Re,ye,Ue,bt;if(re=Y,de=$e(),de!==o){for(Re=[],ye=Y,Ue=[],bt=pi();bt!==o;)Ue.push(bt),bt=pi();for(Ue!==o?(bt=$e(),bt!==o?(Ue=[Ue,bt],ye=Ue):(Y=ye,ye=o)):(Y=ye,ye=o);ye!==o;){for(Re.push(ye),ye=Y,Ue=[],bt=pi();bt!==o;)Ue.push(bt),bt=pi();Ue!==o?(bt=$e(),bt!==o?(Ue=[Ue,bt],ye=Ue):(Y=ye,ye=o)):(Y=ye,ye=o)}Re!==o?(de=d(de,Re),re=de):(Y=re,re=o)}else Y=re,re=o;return re}function $e(){var re,de,Re,ye,Ue,bt;if(re=Y,de=wt(),de!==o){for(Re=[],ye=Y,Ue=[],bt=pi();bt!==o;)Ue.push(bt),bt=pi();for(Ue!==o?(bt=st(),bt!==o?(Ue=[Ue,bt],ye=Ue):(Y=ye,ye=o)):(Y=ye,ye=o);ye!==o;){for(Re.push(ye),ye=Y,Ue=[],bt=pi();bt!==o;)Ue.push(bt),bt=pi();Ue!==o?(bt=st(),bt!==o?(Ue=[Ue,bt],ye=Ue):(Y=ye,ye=o)):(Y=ye,ye=o)}Re!==o?(de=d(de,Re),re=de):(Y=re,re=o)}else Y=re,re=o;return re}function st(){var re;return re=Pt(),re===o&&(re=_t(),re===o&&(re=$r(),re===o&&(re=ar(),re===o&&(re=fa(),re===o&&(re=kh(),re===o&&(re=Ce(),re===o&&(re=We(),re===o&&(re=Je())))))))),re}function wt(){var re,de,Re,ye,Ue,bt,zc;if(re=Y,h.test(a.charAt(Y))?(de=a.charAt(Y),Y++):(de=o,se(f)),de!==o){for(Re=[],ye=pi();ye!==o;)Re.push(ye),ye=pi();Re!==o?(ye=zt(),ye!==o?(Ue=Y,bt=fi(),bt===o&&(bt=null),bt!==o?(zc=Vi(),zc!==o?(bt=[bt,zc],Ue=bt):(Y=Ue,Ue=o)):(Y=Ue,Ue=o),Ue===o&&(Ue=null),Ue!==o?(de=p(de,ye,Ue),re=de):(Y=re,re=o)):(Y=re,re=o)):(Y=re,re=o)}else Y=re,re=o;return re}function Pt(){var re,de;return re=Y,m.test(a.charAt(Y))?(de=a.charAt(Y),Y++):(de=o,se(v)),de!==o&&(de=y()),re=de,re}function _t(){var re,de,Re,ye;if(re=Y,x.test(a.charAt(Y))?(de=a.charAt(Y),Y++):(de=o,se(b)),de!==o){for(Re=[],ye=pi();ye!==o;)Re.push(ye),ye=pi();Re!==o?(ye=Vi(),ye!==o?(de=w(de,ye),re=de):(Y=re,re=o)):(Y=re,re=o)}else Y=re,re=o;return re}function Vi(){var re,de,Re,ye,Ue,bt;if(re=Y,de=zt(),de!==o){for(Re=[],ye=Y,Ue=fi(),Ue===o&&(Ue=null),Ue!==o?(bt=zt(),bt!==o?(Ue=[Ue,bt],ye=Ue):(Y=ye,ye=o)):(Y=ye,ye=o);ye!==o;)Re.push(ye),ye=Y,Ue=fi(),Ue===o&&(Ue=null),Ue!==o?(bt=zt(),bt!==o?(Ue=[Ue,bt],ye=Ue):(Y=ye,ye=o)):(Y=ye,ye=o);Re!==o?(de=d(de,Re),re=de):(Y=re,re=o)}else Y=re,re=o;return re}function $r(){var re,de,Re,ye;if(re=Y,S.test(a.charAt(Y))?(de=a.charAt(Y),Y++):(de=o,se(_)),de!==o){for(Re=[],ye=pi();ye!==o;)Re.push(ye),ye=pi();Re!==o?(ye=Ka(),ye!==o?(de=E(de,ye),re=de):(Y=re,re=o)):(Y=re,re=o)}else Y=re,re=o;return re}function Ka(){var re,de,Re,ye,Ue,bt;if(re=Y,de=hi(),de!==o){for(Re=[],ye=Y,Ue=fi(),Ue===o&&(Ue=null),Ue!==o?(bt=hi(),bt!==o?(Ue=[Ue,bt],ye=Ue):(Y=ye,ye=o)):(Y=ye,ye=o);ye!==o;)Re.push(ye),ye=Y,Ue=fi(),Ue===o&&(Ue=null),Ue!==o?(bt=hi(),bt!==o?(Ue=[Ue,bt],ye=Ue):(Y=ye,ye=o)):(Y=ye,ye=o);Re!==o?(de=d(de,Re),re=de):(Y=re,re=o)}else Y=re,re=o;return re}function ar(){var re,de,Re,ye;if(re=Y,C.test(a.charAt(Y))?(de=a.charAt(Y),Y++):(de=o,se(A)),de!==o){for(Re=[],ye=pi();ye!==o;)Re.push(ye),ye=pi();Re!==o?(ye=Ka(),ye!==o?(de=M(de,ye),re=de):(Y=re,re=o)):(Y=re,re=o)}else Y=re,re=o;return re}function fa(){var re,de,Re,ye;if(re=Y,T.test(a.charAt(Y))?(de=a.charAt(Y),Y++):(de=o,se(P)),de!==o){for(Re=[],ye=pi();ye!==o;)Re.push(ye),ye=pi();Re!==o?(ye=Qr(),ye!==o?(de=w(de,ye),re=de):(Y=re,re=o)):(Y=re,re=o)}else Y=re,re=o;return re}function Qr(){var re,de,Re,ye,Ue,bt;if(re=Y,de=$o(),de!==o){for(Re=[],ye=Y,Ue=fi(),Ue===o&&(Ue=null),Ue!==o?(bt=$o(),bt!==o?(Ue=[Ue,bt],ye=Ue):(Y=ye,ye=o)):(Y=ye,ye=o);ye!==o;)Re.push(ye),ye=Y,Ue=fi(),Ue===o&&(Ue=null),Ue!==o?(bt=$o(),bt!==o?(Ue=[Ue,bt],ye=Ue):(Y=ye,ye=o)):(Y=ye,ye=o);Re!==o?(de=d(de,Re),re=de):(Y=re,re=o)}else Y=re,re=o;return re}function $o(){var re,de,Re,ye,Ue,bt;return re=Y,de=zt(),de!==o?(Re=fi(),Re===o&&(Re=null),Re!==o?(ye=zt(),ye!==o?(Ue=fi(),Ue===o&&(Ue=null),Ue!==o?(bt=zt(),bt!==o?(de=D(de,ye,bt),re=de):(Y=re,re=o)):(Y=re,re=o)):(Y=re,re=o)):(Y=re,re=o)):(Y=re,re=o),re}function kh(){var re,de,Re,ye;if(re=Y,k.test(a.charAt(Y))?(de=a.charAt(Y),Y++):(de=o,se(L)),de!==o){for(Re=[],ye=pi();ye!==o;)Re.push(ye),ye=pi();Re!==o?(ye=Ll(),ye!==o?(de=w(de,ye),re=de):(Y=re,re=o)):(Y=re,re=o)}else Y=re,re=o;return re}function Ll(){var re,de,Re,ye,Ue,bt;if(re=Y,de=Bl(),de!==o){for(Re=[],ye=Y,Ue=fi(),Ue===o&&(Ue=null),Ue!==o?(bt=Bl(),bt!==o?(Ue=[Ue,bt],ye=Ue):(Y=ye,ye=o)):(Y=ye,ye=o);ye!==o;)Re.push(ye),ye=Y,Ue=fi(),Ue===o&&(Ue=null),Ue!==o?(bt=Bl(),bt!==o?(Ue=[Ue,bt],ye=Ue):(Y=ye,ye=o)):(Y=ye,ye=o);Re!==o?(de=d(de,Re),re=de):(Y=re,re=o)}else Y=re,re=o;return re}function Bl(){var re,de,Re,ye;return re=Y,de=zt(),de!==o?(Re=fi(),Re===o&&(Re=null),Re!==o?(ye=zt(),ye!==o?(de=R(de,ye),re=de):(Y=re,re=o)):(Y=re,re=o)):(Y=re,re=o),re}function Ce(){var re,de,Re,ye;if(re=Y,N.test(a.charAt(Y))?(de=a.charAt(Y),Y++):(de=o,se(I)),de!==o){for(Re=[],ye=pi();ye!==o;)Re.push(ye),ye=pi();Re!==o?(ye=Ke(),ye!==o?(de=w(de,ye),re=de):(Y=re,re=o)):(Y=re,re=o)}else Y=re,re=o;return re}function Ke(){var re,de,Re,ye,Ue,bt;if(re=Y,de=nt(),de!==o){for(Re=[],ye=Y,Ue=fi(),Ue===o&&(Ue=null),Ue!==o?(bt=nt(),bt!==o?(Ue=[Ue,bt],ye=Ue):(Y=ye,ye=o)):(Y=ye,ye=o);ye!==o;)Re.push(ye),ye=Y,Ue=fi(),Ue===o&&(Ue=null),Ue!==o?(bt=nt(),bt!==o?(Ue=[Ue,bt],ye=Ue):(Y=ye,ye=o)):(Y=ye,ye=o);Re!==o?(de=d(de,Re),re=de):(Y=re,re=o)}else Y=re,re=o;return re}function nt(){var re,de,Re,ye;return re=Y,de=zt(),de!==o?(Re=fi(),Re===o&&(Re=null),Re!==o?(ye=zt(),ye!==o?(de=B(de,ye),re=de):(Y=re,re=o)):(Y=re,re=o)):(Y=re,re=o),re}function We(){var re,de,Re,ye;if(re=Y,z.test(a.charAt(Y))?(de=a.charAt(Y),Y++):(de=o,se(V)),de!==o){for(Re=[],ye=pi();ye!==o;)Re.push(ye),ye=pi();Re!==o?(ye=Me(),ye!==o?(de=w(de,ye),re=de):(Y=re,re=o)):(Y=re,re=o)}else Y=re,re=o;return re}function Me(){var re,de,Re,ye,Ue,bt;if(re=Y,de=zt(),de!==o){for(Re=[],ye=Y,Ue=fi(),Ue===o&&(Ue=null),Ue!==o?(bt=zt(),bt!==o?(Ue=[Ue,bt],ye=Ue):(Y=ye,ye=o)):(Y=ye,ye=o);ye!==o;)Re.push(ye),ye=Y,Ue=fi(),Ue===o&&(Ue=null),Ue!==o?(bt=zt(),bt!==o?(Ue=[Ue,bt],ye=Ue):(Y=ye,ye=o)):(Y=ye,ye=o);Re!==o?(de=d(de,Re),re=de):(Y=re,re=o)}else Y=re,re=o;return re}function Je(){var re,de,Re,ye;if(re=Y,W.test(a.charAt(Y))?(de=a.charAt(Y),Y++):(de=o,se(G)),de!==o){for(Re=[],ye=pi();ye!==o;)Re.push(ye),ye=pi();Re!==o?(ye=St(),ye!==o?(de=w(de,ye),re=de):(Y=re,re=o)):(Y=re,re=o)}else Y=re,re=o;return re}function St(){var re,de,Re,ye,Ue,bt;if(re=Y,de=Gt(),de!==o){for(Re=[],ye=Y,Ue=fi(),Ue===o&&(Ue=null),Ue!==o?(bt=Gt(),bt!==o?(Ue=[Ue,bt],ye=Ue):(Y=ye,ye=o)):(Y=ye,ye=o);ye!==o;)Re.push(ye),ye=Y,Ue=fi(),Ue===o&&(Ue=null),Ue!==o?(bt=Gt(),bt!==o?(Ue=[Ue,bt],ye=Ue):(Y=ye,ye=o)):(Y=ye,ye=o);Re!==o?(de=d(de,Re),re=de):(Y=re,re=o)}else Y=re,re=o;return re}function Gt(){var re,de,Re,ye,Ue,bt,zc,l3,Fy,c3,zy,u3;return re=Y,de=Li(),de!==o?(Re=fi(),Re===o&&(Re=null),Re!==o?(ye=Li(),ye!==o?(Ue=fi(),Ue===o&&(Ue=null),Ue!==o?(bt=hi(),bt!==o?(zc=fi(),zc!==o?(l3=wi(),l3!==o?(Fy=fi(),Fy===o&&(Fy=null),Fy!==o?(c3=wi(),c3!==o?(zy=fi(),zy===o&&(zy=null),zy!==o?(u3=zt(),u3!==o?(de=q(de,ye,bt,l3,c3,u3),re=de):(Y=re,re=o)):(Y=re,re=o)):(Y=re,re=o)):(Y=re,re=o)):(Y=re,re=o)):(Y=re,re=o)):(Y=re,re=o)):(Y=re,re=o)):(Y=re,re=o)):(Y=re,re=o)):(Y=re,re=o),re}function zt(){var re,de,Re,ye;return re=Y,de=hi(),de!==o?(Re=fi(),Re===o&&(Re=null),Re!==o?(ye=hi(),ye!==o?(de=ae(de,ye),re=de):(Y=re,re=o)):(Y=re,re=o)):(Y=re,re=o),re}function Li(){var re,de;return re=Y,de=Xe(),de===o&&(de=Pr()),de!==o&&(de=J(de)),re=de,re}function hi(){var re,de,Re,ye;return re=Y,de=Y,Re=Mt(),Re===o&&(Re=null),Re!==o?(ye=Xe(),ye!==o?(Re=[Re,ye],de=Re):(Y=de,de=o)):(Y=de,de=o),de===o&&(de=Y,Re=Mt(),Re===o&&(Re=null),Re!==o?(ye=Pr(),ye!==o?(Re=[Re,ye],de=Re):(Y=de,de=o)):(Y=de,de=o)),de!==o&&(de=$(de)),re=de,re}function wi(){var re,de;return re=Y,te.test(a.charAt(Y))?(de=a.charAt(Y),Y++):(de=o,se(Q)),de!==o&&(de=pe(de)),re=de,re}function fi(){var re,de,Re,ye,Ue;if(re=Y,de=[],Re=pi(),Re!==o)for(;Re!==o;)de.push(Re),Re=pi();else de=o;if(de!==o)if(Re=Jr(),Re===o&&(Re=null),Re!==o){for(ye=[],Ue=pi();Ue!==o;)ye.push(Ue),Ue=pi();ye!==o?(de=[de,Re,ye],re=de):(Y=re,re=o)}else Y=re,re=o;else Y=re,re=o;if(re===o){if(re=Y,de=Y,Re=Jr(),Re!==o){for(ye=[],Ue=pi();Ue!==o;)ye.push(Ue),Ue=pi();ye!==o?(Re=[Re,ye],de=Re):(Y=de,de=o)}else Y=de,de=o;de!==o&&(de=me()),re=de}return re}function Jr(){var re;return a.charCodeAt(Y)===44?(re=le,Y++):(re=o,se(Z)),re}function Xe(){var re,de,Re,ye;return re=Y,de=Y,Re=Ct(),Re!==o?(ye=Ot(),ye===o&&(ye=null),ye!==o?(Re=[Re,ye],de=Re):(Y=de,de=o)):(Y=de,de=o),de===o&&(de=Y,Re=Pr(),Re!==o?(ye=Ot(),ye!==o?(Re=[Re,ye],de=Re):(Y=de,de=o)):(Y=de,de=o)),de!==o&&(de=oe(de)),re=de,re}function Ct(){var re,de,Re,ye,Ue;return re=Y,de=Y,Re=Pr(),Re===o&&(Re=null),Re!==o?(a.charCodeAt(Y)===46?(ye=ge,Y++):(ye=o,se(Ie)),ye!==o?(Ue=Pr(),Ue!==o?(Re=[Re,ye,Ue],de=Re):(Y=de,de=o)):(Y=de,de=o)):(Y=de,de=o),de===o&&(de=Y,Re=Pr(),Re!==o?(a.charCodeAt(Y)===46?(ye=ge,Y++):(ye=o,se(Ie)),ye!==o?(Re=[Re,ye],de=Re):(Y=de,de=o)):(Y=de,de=o)),de!==o&&(de=oe(de)),re=de,re}function Ot(){var re,de,Re,ye,Ue;return re=Y,de=Y,we.test(a.charAt(Y))?(Re=a.charAt(Y),Y++):(Re=o,se(xe)),Re!==o?(ye=Mt(),ye===o&&(ye=null),ye!==o?(Ue=Pr(),Ue!==o?(Re=[Re,ye,Ue],de=Re):(Y=de,de=o)):(Y=de,de=o)):(Y=de,de=o),de!==o&&(de=oe(de)),re=de,re}function Mt(){var re;return Se.test(a.charAt(Y))?(re=a.charAt(Y),Y++):(re=o,se(Le)),re}function Pr(){var re,de,Re;if(re=Y,de=[],Be.test(a.charAt(Y))?(Re=a.charAt(Y),Y++):(Re=o,se(ee)),Re!==o)for(;Re!==o;)de.push(Re),Be.test(a.charAt(Y))?(Re=a.charAt(Y),Y++):(Re=o,se(ee));else de=o;return de!==o&&(de=X(de)),re=de,re}function pi(){var re,de;return re=Y,ue.test(a.charAt(Y))?(de=a.charAt(Y),Y++):(de=o,se(Oe)),de!==o&&(de=me()),re=de,re}function Fc(re,de){if(!de)return[re];for(var Re=[re],ye=0,Ue=de.length;ye<Ue;ye++)Re[ye+1]=de[ye][1];return Re}var Lh={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var ed in Lh)Lh[ed.toUpperCase()]=Lh[ed];function Nl(re,de){de||(de=[{}]);for(var Re=de.length;Re--;){var ye={code:re,command:Lh[re]};re==re.toLowerCase()&&(ye.relative=!0);for(var Ue in de[Re])ye[Ue]=de[Re][Ue];de[Re]=ye}return de}if(ze=c(),ze!==o&&Y===a.length)return ze;throw ze!==o&&Y<a.length&&se(Fe()),He(tt,et<a.length?a.charAt(et):null,et<a.length?ke(et,et+1):ke(et,et))}t.exports={SyntaxError:r,parse:n}}),FH=np((e,t)=>{var i=doe().parse;i.parseSVG=i,i.makeAbsolute=r,t.exports=i;function r(n){var a,s={x:0,y:0},o={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return n.forEach(function(l){l.command==="moveto"&&(a=l),l.x0=s.x,l.y0=s.y;for(var c in o)c in l&&(l[c]+=l.relative?l[o[c]]:0);"x"in l||(l.x=s.x),"y"in l||(l.y=s.y),l.relative=!1,l.code=l.code.toUpperCase(),l.command=="closepath"&&(l.x=a.x,l.y=a.y),s=l}),n}}),hoe=np((e,t)=>{t.exports=function(i,r){for(var n=i.split("."),a=r.split("."),s=0;s<3;s++){var o=Number(n[s]),l=Number(a[s]);if(o>l)return 1;if(l>o)return-1;if(!isNaN(o)&&isNaN(l))return 1;if(isNaN(o)&&!isNaN(l))return-1}return 0}}),zv="149",so={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},foe=0,AR=1,poe=2,K5=1,moe=2,ng=3,_l=0,aa=1,za=2,Mn=0,If=1,MR=2,TR=3,PR=4,voe=5,am=100,goe=101,yoe=102,DR=103,IR=104,boe=200,woe=201,xoe=202,_oe=203,zH=204,VH=205,Soe=206,Coe=207,Eoe=208,Aoe=209,Moe=210,Toe=0,Poe=1,Doe=2,eA=3,Ioe=4,Ooe=5,Roe=6,koe=7,UH=0,Loe=1,Boe=2,dc=0,Noe=1,Foe=2,zoe=3,Voe=4,Uoe=5,HH=300,Vf=301,Uf=302,tA=303,iA=304,ty=306,mu=1e3,Hr=1001,rA=1002,or=1003,OR=1004,I3=1005,Ti=1006,Hoe=1007,lv=1008,Ga=1009,joe=1010,Woe=1011,jH=1012,Goe=1013,vu=1014,En=1015,Mu=1016,$oe=1017,Zoe=1018,Of=1020,qoe=1021,ra=1023,Yoe=1024,Koe=1025,Rf=1026,Hf=1027,Xoe=1028,Qoe=1029,q2=1030,Joe=1031,WH=1033,O3=33776,R3=33777,k3=33778,L3=33779,RR=35840,kR=35841,LR=35842,BR=35843,ele=36196,NR=37492,FR=37496,zR=37808,VR=37809,UR=37810,HR=37811,jR=37812,WR=37813,GR=37814,$R=37815,ZR=37816,qR=37817,YR=37818,KR=37819,XR=37820,QR=37821,B3=36492,tle=36283,JR=36284,ek=36285,tk=36286,GH=2200,$H=2201,X5=2202,Y2=2300,K2=2301,N3=2302,bm=2400,wm=2401,X2=2402,Q5=2500,ile=2501,Sl=3e3,Ei=3001,Uu=3200,ZH=3201,rle=0,nle=1,Jl="srgb",Q2="srgb-linear",F3=7680,ale=519,nA=35044,sle=35048,ik="300 es",aA=1035,Pa=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let i=this._listeners[e];if(i!==void 0){let r=i.indexOf(t);r!==-1&&i.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let t=this._listeners[e.type];if(t!==void 0){e.target=this;let i=t.slice(0);for(let r=0,n=i.length;r<n;r++)i[r].call(this,e);e.target=null}}},Ia=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],rk=1234567,Tg=Math.PI/180,n1=180/Math.PI;function To(){let e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Ia[e&255]+Ia[e>>8&255]+Ia[e>>16&255]+Ia[e>>24&255]+"-"+Ia[t&255]+Ia[t>>8&255]+"-"+Ia[t>>16&15|64]+Ia[t>>24&255]+"-"+Ia[i&63|128]+Ia[i>>8&255]+"-"+Ia[i>>16&255]+Ia[i>>24&255]+Ia[r&255]+Ia[r>>8&255]+Ia[r>>16&255]+Ia[r>>24&255]).toLowerCase()}function Sn(e,t,i){return Math.max(t,Math.min(i,e))}function J5(e,t){return(e%t+t)%t}function ole(e,t,i,r,n){return r+(e-t)*(n-r)/(i-t)}function lle(e,t,i){return e!==t?(i-e)/(t-e):0}function Pg(e,t,i){return(1-i)*e+i*t}function cle(e,t,i,r){return Pg(e,t,1-Math.exp(-i*r))}function ule(e,t=1){return t-Math.abs(J5(e,t*2)-t)}function dle(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t),e*e*(3-2*e))}function hle(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t),e*e*e*(e*(e*6-15)+10))}function fle(e,t){return e+Math.floor(Math.random()*(t-e+1))}function ple(e,t){return e+Math.random()*(t-e)}function mle(e){return e*(.5-Math.random())}function vle(e){e!==void 0&&(rk=e);let t=rk+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function gle(e){return e*Tg}function yle(e){return e*n1}function sA(e){return(e&e-1)===0&&e!==0}function qH(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function J2(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function ble(e,t,i,r,n){let a=Math.cos,s=Math.sin,o=a(i/2),l=s(i/2),c=a((t+r)/2),u=s((t+r)/2),d=a((t-r)/2),h=s((t-r)/2),f=a((r-t)/2),p=s((r-t)/2);switch(n){case"XYX":e.set(o*u,l*d,l*h,o*c);break;case"YZY":e.set(l*h,o*u,l*d,o*c);break;case"ZXZ":e.set(l*d,l*h,o*u,o*c);break;case"XZX":e.set(o*u,l*p,l*f,o*c);break;case"YXY":e.set(l*f,o*u,l*p,o*c);break;case"ZYZ":e.set(l*p,l*f,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}function gu(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Dr(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(e*65535);case Uint8Array:return Math.round(e*255);case Int16Array:return Math.round(e*32767);case Int8Array:return Math.round(e*127);default:throw new Error("Invalid component type.")}}var kt=Object.freeze({__proto__:null,DEG2RAD:Tg,RAD2DEG:n1,ceilPowerOfTwo:qH,clamp:Sn,damp:cle,degToRad:gle,denormalize:gu,euclideanModulo:J5,floorPowerOfTwo:J2,generateUUID:To,inverseLerp:lle,isPowerOfTwo:sA,lerp:Pg,mapLinear:ole,normalize:Dr,pingpong:ule,radToDeg:yle,randFloat:ple,randFloatSpread:mle,randInt:fle,seededRandom:vle,setQuaternionFromProperEuler:ble,smootherstep:hle,smoothstep:dle}),Pe=class{constructor(e=0,t=0){Pe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),r=Math.sin(t),n=this.x-e.x,a=this.y-e.y;return this.x=n*i-a*r+e.x,this.y=n*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},An=class{constructor(){An.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,n,a,s,o,l){let c=this.elements;return c[0]=e,c[1]=r,c[2]=s,c[3]=t,c[4]=n,c[5]=o,c[6]=i,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,n=this.elements,a=i[0],s=i[3],o=i[6],l=i[1],c=i[4],u=i[7],d=i[2],h=i[5],f=i[8],p=r[0],m=r[3],v=r[6],y=r[1],x=r[4],b=r[7],w=r[2],S=r[5],_=r[8];return n[0]=a*p+s*y+o*w,n[3]=a*m+s*x+o*S,n[6]=a*v+s*b+o*_,n[1]=l*p+c*y+u*w,n[4]=l*m+c*x+u*S,n[7]=l*v+c*b+u*_,n[2]=d*p+h*y+f*w,n[5]=d*m+h*x+f*S,n[8]=d*v+h*b+f*_,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],r=e[2],n=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8];return t*a*c-t*s*l-i*n*c+i*s*o+r*n*l-r*a*o}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],n=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=c*a-s*l,d=s*o-c*n,h=l*n-a*o,f=t*u+i*d+r*h;if(f===0)return this.set(0,0,0,0,0,0,0,0,0);let p=1/f;return e[0]=u*p,e[1]=(r*l-c*i)*p,e[2]=(s*i-r*a)*p,e[3]=d*p,e[4]=(c*t-r*o)*p,e[5]=(r*n-s*t)*p,e[6]=h*p,e[7]=(i*o-l*t)*p,e[8]=(a*t-i*n)*p,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,n,a,s){let o=Math.cos(n),l=Math.sin(n);return this.set(i*o,i*l,-i*(o*a+l*s)+a+e,-r*l,r*o,-r*(-l*a+o*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(z3.makeScale(e,t)),this}rotate(e){return this.premultiply(z3.makeRotation(-e)),this}translate(e,t){return this.premultiply(z3.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}},z3=new An;function YH(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var wle={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Qy(e,t){return new wle[e](t)}function a1(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function kf(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function Gw(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}var V3={[Jl]:{[Q2]:kf},[Q2]:{[Jl]:Gw}},Xa={legacyMode:!0,get workingColorSpace(){return Q2},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,i){if(this.legacyMode||t===i||!t||!i)return e;if(V3[t]&&V3[t][i]!==void 0){let r=V3[t][i];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},KH={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},On={r:0,g:0,b:0},Zo={h:0,s:0,l:0},Jy={h:0,s:0,l:0};function U3(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*6*(2/3-i):e}function eb(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var ii=class{constructor(t,i,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,i===void 0&&r===void 0?this.set(t):this.setRGB(t,i,r)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,i=Jl){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Xa.toWorkingColorSpace(this,i),this}setRGB(t,i,r,n=Xa.workingColorSpace){return this.r=t,this.g=i,this.b=r,Xa.toWorkingColorSpace(this,n),this}setHSL(t,i,r,n=Xa.workingColorSpace){if(t=J5(t,1),i=Sn(i,0,1),r=Sn(r,0,1),i===0)this.r=this.g=this.b=r;else{let a=r<=.5?r*(1+i):r+i-r*i,s=2*r-a;this.r=U3(s,a,t+1/3),this.g=U3(s,a,t),this.b=U3(s,a,t-1/3)}return Xa.toWorkingColorSpace(this,n),this}setStyle(t,i=Jl){function r(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let a,s=n[1],o=n[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,Xa.toWorkingColorSpace(this,i),r(a[4]),this;if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(a[1],10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.b=Math.min(100,parseInt(a[3],10))/100,Xa.toWorkingColorSpace(this,i),r(a[4]),this;break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){let l=parseFloat(a[1])/360,c=parseFloat(a[2])/100,u=parseFloat(a[3])/100;return r(a[4]),this.setHSL(l,c,u,i)}break}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){let a=n[1],s=a.length;if(s===3)return this.r=parseInt(a.charAt(0)+a.charAt(0),16)/255,this.g=parseInt(a.charAt(1)+a.charAt(1),16)/255,this.b=parseInt(a.charAt(2)+a.charAt(2),16)/255,Xa.toWorkingColorSpace(this,i),this;if(s===6)return this.r=parseInt(a.charAt(0)+a.charAt(1),16)/255,this.g=parseInt(a.charAt(2)+a.charAt(3),16)/255,this.b=parseInt(a.charAt(4)+a.charAt(5),16)/255,Xa.toWorkingColorSpace(this,i),this}return t&&t.length>0?this.setColorName(t,i):this}setColorName(t,i=Jl){let r=KH[t.toLowerCase()];return r!==void 0?this.setHex(r,i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=kf(t.r),this.g=kf(t.g),this.b=kf(t.b),this}copyLinearToSRGB(t){return this.r=Gw(t.r),this.g=Gw(t.g),this.b=Gw(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Jl){return Xa.fromWorkingColorSpace(eb(this,On),t),Sn(On.r*255,0,255)<<16^Sn(On.g*255,0,255)<<8^Sn(On.b*255,0,255)<<0}getHexString(t=Jl){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,i=Xa.workingColorSpace){Xa.fromWorkingColorSpace(eb(this,On),i);let r=On.r,n=On.g,a=On.b,s=Math.max(r,n,a),o=Math.min(r,n,a),l,c,u=(o+s)/2;if(o===s)l=0,c=0;else{let d=s-o;switch(c=u<=.5?d/(s+o):d/(2-s-o),s){case r:l=(n-a)/d+(n<a?6:0);break;case n:l=(a-r)/d+2;break;case a:l=(r-n)/d+4;break}l/=6}return t.h=l,t.s=c,t.l=u,t}getRGB(t,i=Xa.workingColorSpace){return Xa.fromWorkingColorSpace(eb(this,On),i),t.r=On.r,t.g=On.g,t.b=On.b,t}getStyle(t=Jl){return Xa.fromWorkingColorSpace(eb(this,On),t),t!==Jl?`color(${t} ${On.r} ${On.g} ${On.b})`:`rgb(${On.r*255|0},${On.g*255|0},${On.b*255|0})`}offsetHSL(t,i,r){return this.getHSL(Zo),Zo.h+=t,Zo.s+=i,Zo.l+=r,this.setHSL(Zo.h,Zo.s,Zo.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,r){return this.r=t.r+(i.r-t.r)*r,this.g=t.g+(i.g-t.g)*r,this.b=t.b+(i.b-t.b)*r,this}lerpHSL(t,i){this.getHSL(Zo),t.getHSL(Jy);let r=Pg(Zo.h,Jy.h,i),n=Pg(Zo.s,Jy.s,i),a=Pg(Zo.l,Jy.l,i);return this.setHSL(r,n,a),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};ii.NAMES=KH;var bp,XH=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{bp===void 0&&(bp=a1("canvas")),bp.width=e.width,bp.height=e.height;let i=bp.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=bp}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=a1("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let r=i.getImageData(0,0,e.width,e.height),n=r.data;for(let a=0;a<n.length;a++)n[a]=kf(n[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(kf(t[i]/255)*255):t[i]=kf(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},QH=class{constructor(e=null){this.isSource=!0,this.uuid=To(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let n;if(Array.isArray(r)){n=[];for(let a=0,s=r.length;a<s;a++)r[a].isDataTexture?n.push(H3(r[a].image)):n.push(H3(r[a]))}else n=H3(r);i.url=n}return t||(e.images[this.uuid]=i),i}};function H3(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?XH.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var xle=0,Kr=class extends Pa{constructor(e=Kr.DEFAULT_IMAGE,t=Kr.DEFAULT_MAPPING,i=Hr,r=Hr,n=Ti,a=lv,s=ra,o=Ga,l=Kr.DEFAULT_ANISOTROPY,c=Sl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:xle++}),this.uuid=To(),this.name="",this.source=new QH(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=n,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new Pe(0,0),this.repeat=new Pe(1,1),this.center=new Pe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new An,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==HH)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case mu:e.x=e.x-Math.floor(e.x);break;case Hr:e.x=e.x<0?0:1;break;case rA:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case mu:e.y=e.y-Math.floor(e.y);break;case Hr:e.y=e.y<0?0:1;break;case rA:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};Kr.DEFAULT_IMAGE=null;Kr.DEFAULT_MAPPING=HH;Kr.DEFAULT_ANISOTROPY=1;var vi=class{constructor(t=0,i=0,r=0,n=1){vi.prototype.isVector4=!0,this.x=t,this.y=i,this.z=r,this.w=n}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,i,r,n){return this.x=t,this.y=i,this.z=r,this.w=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this.w+=t.w*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){let i=this.x,r=this.y,n=this.z,a=this.w,s=t.elements;return this.x=s[0]*i+s[4]*r+s[8]*n+s[12]*a,this.y=s[1]*i+s[5]*r+s[9]*n+s[13]*a,this.z=s[2]*i+s[6]*r+s[10]*n+s[14]*a,this.w=s[3]*i+s[7]*r+s[11]*n+s[15]*a,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);let i=Math.sqrt(1-t.w*t.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/i,this.y=t.y/i,this.z=t.z/i),this}setAxisAngleFromRotationMatrix(t){let i,r,n,a,s=t.elements,o=s[0],l=s[4],c=s[8],u=s[1],d=s[5],h=s[9],f=s[2],p=s[6],m=s[10];if(Math.abs(l-u)<.01&&Math.abs(c-f)<.01&&Math.abs(h-p)<.01){if(Math.abs(l+u)<.1&&Math.abs(c+f)<.1&&Math.abs(h+p)<.1&&Math.abs(o+d+m-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;let y=(o+1)/2,x=(d+1)/2,b=(m+1)/2,w=(l+u)/4,S=(c+f)/4,_=(h+p)/4;return y>x&&y>b?y<.01?(r=0,n=.707106781,a=.707106781):(r=Math.sqrt(y),n=w/r,a=S/r):x>b?x<.01?(r=.707106781,n=0,a=.707106781):(n=Math.sqrt(x),r=w/n,a=_/n):b<.01?(r=.707106781,n=.707106781,a=0):(a=Math.sqrt(b),r=S/a,n=_/a),this.set(r,n,a,i),this}let v=Math.sqrt((p-h)*(p-h)+(c-f)*(c-f)+(u-l)*(u-l));return Math.abs(v)<.001&&(v=1),this.x=(p-h)/v,this.y=(c-f)/v,this.z=(u-l)/v,this.w=Math.acos((o+d+m-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this.w=Math.max(t.w,Math.min(i.w,this.w)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this.w=Math.max(t,Math.min(i,this.w)),this}clampLength(t,i){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(i,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this.w+=(t.w-this.w)*i,this}lerpVectors(t,i,r){return this.x=t.x+(i.x-t.x)*r,this.y=t.y+(i.y-t.y)*r,this.z=t.z+(i.z-t.z)*r,this.w=t.w+(i.w-t.w)*r,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this.w=t.getW(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},ir=class extends Pa{constructor(t=1,i=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=i,this.depth=1,this.scissor=new vi(0,0,t,i),this.scissorTest=!1,this.viewport=new vi(0,0,t,i);let n={width:t,height:i,depth:1};this.texture=new Kr(n,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Ti,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(t,i,r=1){(this.width!==t||this.height!==i||this.depth!==r)&&(this.width=t,this.height=i,this.depth=r,this.texture.image.width=t,this.texture.image.height=i,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,t,i),this.scissor.set(0,0,t,i)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;let i=Object.assign({},t.texture.image);return this.texture.source=new QH(i),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},JH=class extends Kr{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=or,this.minFilter=or,this.wrapR=Hr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},_le=class extends Kr{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=or,this.minFilter=or,this.wrapR=Hr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Sle=class extends ir{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;let n=this.texture;this.texture=[];for(let a=0;a<i;a++)this.texture[a]=n.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,n=this.texture.length;r<n;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}},mi=class{constructor(t=0,i=0,r=0,n=1){this.isQuaternion=!0,this._x=t,this._y=i,this._z=r,this._w=n}static slerpFlat(t,i,r,n,a,s,o){let l=r[n+0],c=r[n+1],u=r[n+2],d=r[n+3],h=a[s+0],f=a[s+1],p=a[s+2],m=a[s+3];if(o===0){t[i+0]=l,t[i+1]=c,t[i+2]=u,t[i+3]=d;return}if(o===1){t[i+0]=h,t[i+1]=f,t[i+2]=p,t[i+3]=m;return}if(d!==m||l!==h||c!==f||u!==p){let v=1-o,y=l*h+c*f+u*p+d*m,x=y>=0?1:-1,b=1-y*y;if(b>Number.EPSILON){let S=Math.sqrt(b),_=Math.atan2(S,y*x);v=Math.sin(v*_)/S,o=Math.sin(o*_)/S}let w=o*x;if(l=l*v+h*w,c=c*v+f*w,u=u*v+p*w,d=d*v+m*w,v===1-o){let S=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=S,c*=S,u*=S,d*=S}}t[i]=l,t[i+1]=c,t[i+2]=u,t[i+3]=d}static multiplyQuaternionsFlat(t,i,r,n,a,s){let o=r[n],l=r[n+1],c=r[n+2],u=r[n+3],d=a[s],h=a[s+1],f=a[s+2],p=a[s+3];return t[i]=o*p+u*d+l*f-c*h,t[i+1]=l*p+u*h+c*d-o*f,t[i+2]=c*p+u*f+o*h-l*d,t[i+3]=u*p-o*d-l*h-c*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,i,r,n){return this._x=t,this._y=i,this._z=r,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,i){let r=t._x,n=t._y,a=t._z,s=t._order,o=Math.cos,l=Math.sin,c=o(r/2),u=o(n/2),d=o(a/2),h=l(r/2),f=l(n/2),p=l(a/2);switch(s){case"XYZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"YXZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"ZXY":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"ZYX":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"YZX":this._x=h*u*d+c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d-h*f*p;break;case"XZY":this._x=h*u*d-c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return i!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,i){let r=i/2,n=Math.sin(r);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(t){let i=t.elements,r=i[0],n=i[4],a=i[8],s=i[1],o=i[5],l=i[9],c=i[2],u=i[6],d=i[10],h=r+o+d;if(h>0){let f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(a-c)*f,this._z=(s-n)*f}else if(r>o&&r>d){let f=2*Math.sqrt(1+r-o-d);this._w=(u-l)/f,this._x=.25*f,this._y=(n+s)/f,this._z=(a+c)/f}else if(o>d){let f=2*Math.sqrt(1+o-r-d);this._w=(a-c)/f,this._x=(n+s)/f,this._y=.25*f,this._z=(l+u)/f}else{let f=2*Math.sqrt(1+d-r-o);this._w=(s-n)/f,this._x=(a+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(t,i){let r=t.dot(i)+1;return r<Number.EPSILON?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=r):(this._x=0,this._y=-t.z,this._z=t.y,this._w=r)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=r),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Sn(this.dot(t),-1,1)))}rotateTowards(t,i){let r=this.angleTo(t);if(r===0)return this;let n=Math.min(1,i/r);return this.slerp(t,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,i){let r=t._x,n=t._y,a=t._z,s=t._w,o=i._x,l=i._y,c=i._z,u=i._w;return this._x=r*u+s*o+n*c-a*l,this._y=n*u+s*l+a*o-r*c,this._z=a*u+s*c+r*l-n*o,this._w=s*u-r*o-n*l-a*c,this._onChangeCallback(),this}slerp(t,i){if(i===0)return this;if(i===1)return this.copy(t);let r=this._x,n=this._y,a=this._z,s=this._w,o=s*t._w+r*t._x+n*t._y+a*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=r,this._y=n,this._z=a,this;let l=1-o*o;if(l<=Number.EPSILON){let f=1-i;return this._w=f*s+i*this._w,this._x=f*r+i*this._x,this._y=f*n+i*this._y,this._z=f*a+i*this._z,this.normalize(),this._onChangeCallback(),this}let c=Math.sqrt(l),u=Math.atan2(c,o),d=Math.sin((1-i)*u)/c,h=Math.sin(i*u)/c;return this._w=s*d+this._w*h,this._x=r*d+this._x*h,this._y=n*d+this._y*h,this._z=a*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,i,r){return this.copy(t).slerp(i,r)}random(){let t=Math.random(),i=Math.sqrt(1-t),r=Math.sqrt(t),n=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(i*Math.cos(n),r*Math.sin(a),r*Math.cos(a),i*Math.sin(n))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,i=0){return this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t}fromBufferAttribute(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},H=class{constructor(t=0,i=0,r=0){H.prototype.isVector3=!0,this.x=t,this.y=i,this.z=r}set(t,i,r){return r===void 0&&(r=this.z),this.x=t,this.y=i,this.z=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this}applyEuler(t){return this.applyQuaternion(nk.setFromEuler(t))}applyAxisAngle(t,i){return this.applyQuaternion(nk.setFromAxisAngle(t,i))}applyMatrix3(t){let i=this.x,r=this.y,n=this.z,a=t.elements;return this.x=a[0]*i+a[3]*r+a[6]*n,this.y=a[1]*i+a[4]*r+a[7]*n,this.z=a[2]*i+a[5]*r+a[8]*n,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){let i=this.x,r=this.y,n=this.z,a=t.elements,s=1/(a[3]*i+a[7]*r+a[11]*n+a[15]);return this.x=(a[0]*i+a[4]*r+a[8]*n+a[12])*s,this.y=(a[1]*i+a[5]*r+a[9]*n+a[13])*s,this.z=(a[2]*i+a[6]*r+a[10]*n+a[14])*s,this}applyQuaternion(t){let i=this.x,r=this.y,n=this.z,a=t.x,s=t.y,o=t.z,l=t.w,c=l*i+s*n-o*r,u=l*r+o*i-a*n,d=l*n+a*r-s*i,h=-a*i-s*r-o*n;return this.x=c*l+h*-a+u*-o-d*-s,this.y=u*l+h*-s+d*-a-c*-o,this.z=d*l+h*-o+c*-s-u*-a,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){let i=this.x,r=this.y,n=this.z,a=t.elements;return this.x=a[0]*i+a[4]*r+a[8]*n,this.y=a[1]*i+a[5]*r+a[9]*n,this.z=a[2]*i+a[6]*r+a[10]*n,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this}clampLength(t,i){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(i,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}lerpVectors(t,i,r){return this.x=t.x+(i.x-t.x)*r,this.y=t.y+(i.y-t.y)*r,this.z=t.z+(i.z-t.z)*r,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,i){let r=t.x,n=t.y,a=t.z,s=i.x,o=i.y,l=i.z;return this.x=n*l-a*o,this.y=a*s-r*l,this.z=r*o-n*s,this}projectOnVector(t){let i=t.lengthSq();if(i===0)return this.set(0,0,0);let r=t.dot(this)/i;return this.copy(t).multiplyScalar(r)}projectOnPlane(t){return j3.copy(this).projectOnVector(t),this.sub(j3)}reflect(t){return this.sub(j3.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){let i=Math.sqrt(this.lengthSq()*t.lengthSq());if(i===0)return Math.PI/2;let r=this.dot(t)/i;return Math.acos(Sn(r,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let i=this.x-t.x,r=this.y-t.y,n=this.z-t.z;return i*i+r*r+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,i,r){let n=Math.sin(i)*t;return this.x=n*Math.sin(r),this.y=Math.cos(i)*t,this.z=n*Math.cos(r),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,i,r){return this.x=t*Math.sin(i),this.y=r,this.z=t*Math.cos(i),this}setFromMatrixPosition(t){let i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(t){let i=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=r,this.z=n,this}setFromMatrixColumn(t,i){return this.fromArray(t.elements,i*4)}setFromMatrix3Column(t,i){return this.fromArray(t.elements,i*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let t=(Math.random()-.5)*2,i=Math.random()*Math.PI*2,r=Math.sqrt(1-t**2);return this.x=r*Math.cos(i),this.y=r*Math.sin(i),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},j3=new H,nk=new mi,gn=class{constructor(t=new H(1/0,1/0,1/0),i=new H(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=i}set(t,i){return this.min.copy(t),this.max.copy(i),this}setFromArray(t){let i=1/0,r=1/0,n=1/0,a=-1/0,s=-1/0,o=-1/0;for(let l=0,c=t.length;l<c;l+=3){let u=t[l],d=t[l+1],h=t[l+2];u<i&&(i=u),d<r&&(r=d),h<n&&(n=h),u>a&&(a=u),d>s&&(s=d),h>o&&(o=h)}return this.min.set(i,r,n),this.max.set(a,s,o),this}setFromBufferAttribute(t){let i=1/0,r=1/0,n=1/0,a=-1/0,s=-1/0,o=-1/0;for(let l=0,c=t.count;l<c;l++){let u=t.getX(l),d=t.getY(l),h=t.getZ(l);u<i&&(i=u),d<r&&(r=d),h<n&&(n=h),u>a&&(a=u),d>s&&(s=d),h>o&&(o=h)}return this.min.set(i,r,n),this.max.set(a,s,o),this}setFromPoints(t){this.makeEmpty();for(let i=0,r=t.length;i<r;i++)this.expandByPoint(t[i]);return this}setFromCenterAndSize(t,i){let r=zh.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}setFromObject(t,i=!1){return this.makeEmpty(),this.expandByObject(t,i)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,i=!1){t.updateWorldMatrix(!1,!1);let r=t.geometry;if(r!==void 0)if(i&&r.attributes!=null&&r.attributes.position!==void 0){let a=r.attributes.position;for(let s=0,o=a.count;s<o;s++)zh.fromBufferAttribute(a,s).applyMatrix4(t.matrixWorld),this.expandByPoint(zh)}else r.boundingBox===null&&r.computeBoundingBox(),W3.copy(r.boundingBox),W3.applyMatrix4(t.matrixWorld),this.union(W3);let n=t.children;for(let a=0,s=n.length;a<s;a++)this.expandByObject(n[a],i);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,i){return i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,zh),zh.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let i,r;return t.normal.x>0?(i=t.normal.x*this.min.x,r=t.normal.x*this.max.x):(i=t.normal.x*this.max.x,r=t.normal.x*this.min.x),t.normal.y>0?(i+=t.normal.y*this.min.y,r+=t.normal.y*this.max.y):(i+=t.normal.y*this.max.y,r+=t.normal.y*this.min.y),t.normal.z>0?(i+=t.normal.z*this.min.z,r+=t.normal.z*this.max.z):(i+=t.normal.z*this.max.z,r+=t.normal.z*this.min.z),i<=-t.constant&&r>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(x0),tb.subVectors(this.max,x0),wp.subVectors(t.a,x0),xp.subVectors(t.b,x0),_p.subVectors(t.c,x0),id.subVectors(xp,wp),rd.subVectors(_p,xp),Vh.subVectors(wp,_p);let i=[0,-id.z,id.y,0,-rd.z,rd.y,0,-Vh.z,Vh.y,id.z,0,-id.x,rd.z,0,-rd.x,Vh.z,0,-Vh.x,-id.y,id.x,0,-rd.y,rd.x,0,-Vh.y,Vh.x,0];return!G3(i,wp,xp,_p,tb)||(i=[1,0,0,0,1,0,0,0,1],!G3(i,wp,xp,_p,tb))?!1:(ib.crossVectors(id,rd),i=[ib.x,ib.y,ib.z],G3(i,wp,xp,_p,tb))}clampPoint(t,i){return i.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return zh.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=this.getSize(zh).length()*.5,t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Hc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Hc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Hc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Hc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Hc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Hc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Hc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Hc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Hc),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},Hc=[new H,new H,new H,new H,new H,new H,new H,new H],zh=new H,W3=new gn,wp=new H,xp=new H,_p=new H,id=new H,rd=new H,Vh=new H,x0=new H,tb=new H,ib=new H,Uh=new H;function G3(e,t,i,r,n){for(let a=0,s=e.length-3;a<=s;a+=3){Uh.fromArray(e,a);let o=n.x*Math.abs(Uh.x)+n.y*Math.abs(Uh.y)+n.z*Math.abs(Uh.z),l=t.dot(Uh),c=i.dot(Uh),u=r.dot(Uh);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}var Cle=new gn,_0=new H,$3=new H,Fs=class{constructor(e=new H,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;t!==void 0?i.copy(t):Cle.setFromPoints(e).getCenter(i);let r=0;for(let n=0,a=e.length;n<a;n++)r=Math.max(r,i.distanceToSquared(e[n]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;_0.subVectors(e,this.center);let t=_0.lengthSq();if(t>this.radius*this.radius){let i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(_0,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):($3.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(_0.copy(e.center).add($3)),this.expandByPoint(_0.copy(e.center).sub($3))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},jc=new H,Z3=new H,rb=new H,nd=new H,q3=new H,nb=new H,Y3=new H,Vv=class{constructor(e=new H,t=new H(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,jc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=jc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(jc.copy(this.direction).multiplyScalar(t).add(this.origin),jc.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Z3.copy(e).add(t).multiplyScalar(.5),rb.copy(t).sub(e).normalize(),nd.copy(this.origin).sub(Z3);let n=e.distanceTo(t)*.5,a=-this.direction.dot(rb),s=nd.dot(this.direction),o=-nd.dot(rb),l=nd.lengthSq(),c=Math.abs(1-a*a),u,d,h,f;if(c>0)if(u=a*o-s,d=a*s-o,f=n*c,u>=0)if(d>=-f)if(d<=f){let p=1/c;u*=p,d*=p,h=u*(u+a*d+2*s)+d*(a*u+d+2*o)+l}else d=n,u=Math.max(0,-(a*d+s)),h=-u*u+d*(d+2*o)+l;else d=-n,u=Math.max(0,-(a*d+s)),h=-u*u+d*(d+2*o)+l;else d<=-f?(u=Math.max(0,-(-a*n+s)),d=u>0?-n:Math.min(Math.max(-n,-o),n),h=-u*u+d*(d+2*o)+l):d<=f?(u=0,d=Math.min(Math.max(-n,-o),n),h=d*(d+2*o)+l):(u=Math.max(0,-(a*n+s)),d=u>0?n:Math.min(Math.max(-n,-o),n),h=-u*u+d*(d+2*o)+l);else d=a>0?-n:n,u=Math.max(0,-(a*d+s)),h=-u*u+d*(d+2*o)+l;return i&&i.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(rb).multiplyScalar(d).add(Z3),h}intersectSphere(e,t){jc.subVectors(e.center,this.origin);let i=jc.dot(this.direction),r=jc.dot(jc)-i*i,n=e.radius*e.radius;if(r>n)return null;let a=Math.sqrt(n-r),s=i-a,o=i+a;return s<0&&o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,n,a,s,o,l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(i=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(i=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),c>=0?(n=(e.min.y-d.y)*c,a=(e.max.y-d.y)*c):(n=(e.max.y-d.y)*c,a=(e.min.y-d.y)*c),i>a||n>r||((n>i||isNaN(i))&&(i=n),(a<r||isNaN(r))&&(r=a),u>=0?(s=(e.min.z-d.z)*u,o=(e.max.z-d.z)*u):(s=(e.max.z-d.z)*u,o=(e.min.z-d.z)*u),i>o||s>r)||((s>i||i!==i)&&(i=s),(o<r||r!==r)&&(r=o),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,jc)!==null}intersectTriangle(e,t,i,r,n){q3.subVectors(t,e),nb.subVectors(i,e),Y3.crossVectors(q3,nb);let a=this.direction.dot(Y3),s;if(a>0){if(r)return null;s=1}else if(a<0)s=-1,a=-a;else return null;nd.subVectors(this.origin,e);let o=s*this.direction.dot(nb.crossVectors(nd,nb));if(o<0)return null;let l=s*this.direction.dot(q3.cross(nd));if(l<0||o+l>a)return null;let c=-s*nd.dot(Y3);return c<0?null:this.at(c/a,n)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},pt=class{constructor(){pt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,n,a,s,o,l,c,u,d,h,f,p,m){let v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=n,v[5]=a,v[9]=s,v[13]=o,v[2]=l,v[6]=c,v[10]=u,v[14]=d,v[3]=h,v[7]=f,v[11]=p,v[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new pt().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,r=1/Sp.setFromMatrixColumn(e,0).length(),n=1/Sp.setFromMatrixColumn(e,1).length(),a=1/Sp.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*n,t[5]=i[5]*n,t[6]=i[6]*n,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,i=e.x,r=e.y,n=e.z,a=Math.cos(i),s=Math.sin(i),o=Math.cos(r),l=Math.sin(r),c=Math.cos(n),u=Math.sin(n);if(e.order==="XYZ"){let d=a*c,h=a*u,f=s*c,p=s*u;t[0]=o*c,t[4]=-o*u,t[8]=l,t[1]=h+f*l,t[5]=d-p*l,t[9]=-s*o,t[2]=p-d*l,t[6]=f+h*l,t[10]=a*o}else if(e.order==="YXZ"){let d=o*c,h=o*u,f=l*c,p=l*u;t[0]=d+p*s,t[4]=f*s-h,t[8]=a*l,t[1]=a*u,t[5]=a*c,t[9]=-s,t[2]=h*s-f,t[6]=p+d*s,t[10]=a*o}else if(e.order==="ZXY"){let d=o*c,h=o*u,f=l*c,p=l*u;t[0]=d-p*s,t[4]=-a*u,t[8]=f+h*s,t[1]=h+f*s,t[5]=a*c,t[9]=p-d*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if(e.order==="ZYX"){let d=a*c,h=a*u,f=s*c,p=s*u;t[0]=o*c,t[4]=f*l-h,t[8]=d*l+p,t[1]=o*u,t[5]=p*l+d,t[9]=h*l-f,t[2]=-l,t[6]=s*o,t[10]=a*o}else if(e.order==="YZX"){let d=a*o,h=a*l,f=s*o,p=s*l;t[0]=o*c,t[4]=p-d*u,t[8]=f*u+h,t[1]=u,t[5]=a*c,t[9]=-s*c,t[2]=-l*c,t[6]=h*u+f,t[10]=d-p*u}else if(e.order==="XZY"){let d=a*o,h=a*l,f=s*o,p=s*l;t[0]=o*c,t[4]=-u,t[8]=l*c,t[1]=d*u+p,t[5]=a*c,t[9]=h*u-f,t[2]=f*u-h,t[6]=s*c,t[10]=p*u+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Ele,e,Ale)}lookAt(e,t,i){let r=this.elements;return Hs.subVectors(e,t),Hs.lengthSq()===0&&(Hs.z=1),Hs.normalize(),ad.crossVectors(i,Hs),ad.lengthSq()===0&&(Math.abs(i.z)===1?Hs.x+=1e-4:Hs.z+=1e-4,Hs.normalize(),ad.crossVectors(i,Hs)),ad.normalize(),ab.crossVectors(Hs,ad),r[0]=ad.x,r[4]=ab.x,r[8]=Hs.x,r[1]=ad.y,r[5]=ab.y,r[9]=Hs.y,r[2]=ad.z,r[6]=ab.z,r[10]=Hs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,n=this.elements,a=i[0],s=i[4],o=i[8],l=i[12],c=i[1],u=i[5],d=i[9],h=i[13],f=i[2],p=i[6],m=i[10],v=i[14],y=i[3],x=i[7],b=i[11],w=i[15],S=r[0],_=r[4],E=r[8],C=r[12],A=r[1],M=r[5],T=r[9],P=r[13],D=r[2],k=r[6],L=r[10],R=r[14],N=r[3],I=r[7],B=r[11],z=r[15];return n[0]=a*S+s*A+o*D+l*N,n[4]=a*_+s*M+o*k+l*I,n[8]=a*E+s*T+o*L+l*B,n[12]=a*C+s*P+o*R+l*z,n[1]=c*S+u*A+d*D+h*N,n[5]=c*_+u*M+d*k+h*I,n[9]=c*E+u*T+d*L+h*B,n[13]=c*C+u*P+d*R+h*z,n[2]=f*S+p*A+m*D+v*N,n[6]=f*_+p*M+m*k+v*I,n[10]=f*E+p*T+m*L+v*B,n[14]=f*C+p*P+m*R+v*z,n[3]=y*S+x*A+b*D+w*N,n[7]=y*_+x*M+b*k+w*I,n[11]=y*E+x*T+b*L+w*B,n[15]=y*C+x*P+b*R+w*z,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],r=e[8],n=e[12],a=e[1],s=e[5],o=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14],f=e[3],p=e[7],m=e[11],v=e[15];return f*(+n*o*u-r*l*u-n*s*d+i*l*d+r*s*h-i*o*h)+p*(+t*o*h-t*l*d+n*a*d-r*a*h+r*l*c-n*o*c)+m*(+t*l*u-t*s*h-n*a*u+i*a*h+n*s*c-i*l*c)+v*(-r*s*c-t*o*u+t*s*d+r*a*u-i*a*d+i*o*c)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],n=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],f=e[12],p=e[13],m=e[14],v=e[15],y=u*m*l-p*d*l+p*o*h-s*m*h-u*o*v+s*d*v,x=f*d*l-c*m*l-f*o*h+a*m*h+c*o*v-a*d*v,b=c*p*l-f*u*l+f*s*h-a*p*h-c*s*v+a*u*v,w=f*u*o-c*p*o-f*s*d+a*p*d+c*s*m-a*u*m,S=t*y+i*x+r*b+n*w;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let _=1/S;return e[0]=y*_,e[1]=(p*d*n-u*m*n-p*r*h+i*m*h+u*r*v-i*d*v)*_,e[2]=(s*m*n-p*o*n+p*r*l-i*m*l-s*r*v+i*o*v)*_,e[3]=(u*o*n-s*d*n-u*r*l+i*d*l+s*r*h-i*o*h)*_,e[4]=x*_,e[5]=(c*m*n-f*d*n+f*r*h-t*m*h-c*r*v+t*d*v)*_,e[6]=(f*o*n-a*m*n-f*r*l+t*m*l+a*r*v-t*o*v)*_,e[7]=(a*d*n-c*o*n+c*r*l-t*d*l-a*r*h+t*o*h)*_,e[8]=b*_,e[9]=(f*u*n-c*p*n-f*i*h+t*p*h+c*i*v-t*u*v)*_,e[10]=(a*p*n-f*s*n+f*i*l-t*p*l-a*i*v+t*s*v)*_,e[11]=(c*s*n-a*u*n-c*i*l+t*u*l+a*i*h-t*s*h)*_,e[12]=w*_,e[13]=(c*p*r-f*u*r+f*i*d-t*p*d-c*i*m+t*u*m)*_,e[14]=(f*s*r-a*p*r-f*i*o+t*p*o+a*i*m-t*s*m)*_,e[15]=(a*u*r-c*s*r+c*i*o-t*u*o-a*i*d+t*s*d)*_,this}scale(e){let t=this.elements,i=e.x,r=e.y,n=e.z;return t[0]*=i,t[4]*=r,t[8]*=n,t[1]*=i,t[5]*=r,t[9]*=n,t[2]*=i,t[6]*=r,t[10]*=n,t[3]*=i,t[7]*=r,t[11]*=n,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),r=Math.sin(t),n=1-i,a=e.x,s=e.y,o=e.z,l=n*a,c=n*s;return this.set(l*a+i,l*s-r*o,l*o+r*s,0,l*s+r*o,c*s+i,c*o-r*a,0,l*o-r*s,c*o+r*a,n*o*o+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,n,a){return this.set(1,i,n,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){let r=this.elements,n=t._x,a=t._y,s=t._z,o=t._w,l=n+n,c=a+a,u=s+s,d=n*l,h=n*c,f=n*u,p=a*c,m=a*u,v=s*u,y=o*l,x=o*c,b=o*u,w=i.x,S=i.y,_=i.z;return r[0]=(1-(p+v))*w,r[1]=(h+b)*w,r[2]=(f-x)*w,r[3]=0,r[4]=(h-b)*S,r[5]=(1-(d+v))*S,r[6]=(m+y)*S,r[7]=0,r[8]=(f+x)*_,r[9]=(m-y)*_,r[10]=(1-(d+p))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){let r=this.elements,n=Sp.set(r[0],r[1],r[2]).length(),a=Sp.set(r[4],r[5],r[6]).length(),s=Sp.set(r[8],r[9],r[10]).length();this.determinant()<0&&(n=-n),e.x=r[12],e.y=r[13],e.z=r[14],qo.copy(this);let o=1/n,l=1/a,c=1/s;return qo.elements[0]*=o,qo.elements[1]*=o,qo.elements[2]*=o,qo.elements[4]*=l,qo.elements[5]*=l,qo.elements[6]*=l,qo.elements[8]*=c,qo.elements[9]*=c,qo.elements[10]*=c,t.setFromRotationMatrix(qo),i.x=n,i.y=a,i.z=s,this}makePerspective(e,t,i,r,n,a){let s=this.elements,o=2*n/(t-e),l=2*n/(i-r),c=(t+e)/(t-e),u=(i+r)/(i-r),d=-(a+n)/(a-n),h=-2*a*n/(a-n);return s[0]=o,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=l,s[9]=u,s[13]=0,s[2]=0,s[6]=0,s[10]=d,s[14]=h,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,i,r,n,a){let s=this.elements,o=1/(t-e),l=1/(i-r),c=1/(a-n),u=(t+e)*o,d=(i+r)*l,h=(a+n)*c;return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-u,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-d,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-h,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},Sp=new H,qo=new pt,Ele=new H(0,0,0),Ale=new H(1,1,1),ad=new H,ab=new H,Hs=new H,ak=new pt,sk=new mi,Vn=class{constructor(e=0,t=0,i=0,r=Vn.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){let r=e.elements,n=r[0],a=r[4],s=r[8],o=r[1],l=r[5],c=r[9],u=r[2],d=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(Sn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-a,n)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Sn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,h),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,n),this._z=0);break;case"ZXY":this._x=Math.asin(Sn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,n));break;case"ZYX":this._y=Math.asin(-Sn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(o,n)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(Sn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,n)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-Sn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,n)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return ak.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ak,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return sk.setFromEuler(this),this.setFromQuaternion(sk,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};Vn.DEFAULT_ORDER="XYZ";var eP=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},Mle=0,ok=new H,Cp=new mi,Wc=new pt,sb=new H,S0=new H,Tle=new H,Ple=new mi,lk=new H(1,0,0),ck=new H(0,1,0),uk=new H(0,0,1),Dle={type:"added"},dk={type:"removed"},dr=class extends Pa{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Mle++}),this.uuid=To(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=dr.DEFAULT_UP.clone();let t=new H,i=new Vn,r=new mi,n=new H(1,1,1);function a(){r.setFromEuler(i,!1)}function s(){i.setFromQuaternion(r,void 0,!1)}i._onChange(a),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new pt},normalMatrix:{value:new An}}),this.matrix=new pt,this.matrixWorld=new pt,this.matrixAutoUpdate=dr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=dr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new eP,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Cp.setFromAxisAngle(t,i),this.quaternion.multiply(Cp),this}rotateOnWorldAxis(t,i){return Cp.setFromAxisAngle(t,i),this.quaternion.premultiply(Cp),this}rotateX(t){return this.rotateOnAxis(lk,t)}rotateY(t){return this.rotateOnAxis(ck,t)}rotateZ(t){return this.rotateOnAxis(uk,t)}translateOnAxis(t,i){return ok.copy(t).applyQuaternion(this.quaternion),this.position.add(ok.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(lk,t)}translateY(t){return this.translateOnAxis(ck,t)}translateZ(t){return this.translateOnAxis(uk,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Wc.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?sb.copy(t):sb.set(t,i,r);let n=this.parent;this.updateWorldMatrix(!0,!1),S0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Wc.lookAt(S0,sb,this.up):Wc.lookAt(sb,S0,this.up),this.quaternion.setFromRotationMatrix(Wc),n&&(Wc.extractRotation(n.matrixWorld),Cp.setFromRotationMatrix(Wc),this.quaternion.premultiply(Cp.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Dle)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(dk)),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){let i=this.children[t];i.parent=null,i.dispatchEvent(dk)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Wc.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Wc.multiply(t.parent.matrixWorld)),t.applyMatrix4(Wc),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,n=this.children.length;r<n;r++){let a=this.children[r].getObjectByProperty(t,i);if(a!==void 0)return a}}getObjectsByProperty(t,i){let r=[];this[t]===i&&r.push(this);for(let n=0,a=this.children.length;n<a;n++){let s=this.children[n].getObjectsByProperty(t,i);s.length>0&&(r=r.concat(s))}return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(S0,t,Tle),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(S0,Ple,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);let i=this.children;for(let r=0,n=i.length;r<n;r++)i[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let i=this.children;for(let r=0,n=i.length;r<n;r++)i[r].traverseVisible(t)}traverseAncestors(t){let i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);let i=this.children;for(let r=0,n=i.length;r<n;r++){let a=i[r];(a.matrixWorldAutoUpdate===!0||t===!0)&&a.updateMatrixWorld(t)}}updateWorldMatrix(t,i){let r=this.parent;if(t===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),i===!0){let n=this.children;for(let a=0,s=n.length;a<s;a++){let o=n[a];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(t){let i=t===void 0||typeof t=="string",r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let n={};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.castShadow===!0&&(n.castShadow=!0),this.receiveShadow===!0&&(n.receiveShadow=!0),this.visible===!1&&(n.visible=!1),this.frustumCulled===!1&&(n.frustumCulled=!1),this.renderOrder!==0&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(n.instanceColor=this.instanceColor.toJSON()));function a(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(t)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(n.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=a(t.geometries,this.geometry);let o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){let l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){let d=l[c];a(t.shapes,d)}else a(t.shapes,l)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(t.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(a(t.materials,this.material[l]));n.material=o}else n.material=a(t.materials,this.material);if(this.children.length>0){n.children=[];for(let o=0;o<this.children.length;o++)n.children.push(this.children[o].toJSON(t).object)}if(this.animations.length>0){n.animations=[];for(let o=0;o<this.animations.length;o++){let l=this.animations[o];n.animations.push(a(t.animations,l))}}if(i){let o=s(t.geometries),l=s(t.materials),c=s(t.textures),u=s(t.images),d=s(t.shapes),h=s(t.skeletons),f=s(t.animations),p=s(t.nodes);o.length>0&&(r.geometries=o),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),h.length>0&&(r.skeletons=h),f.length>0&&(r.animations=f),p.length>0&&(r.nodes=p)}return r.object=n,r;function s(o){let l=[];for(let c in o){let u=o[c];delete u.metadata,l.push(u)}return l}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let r=0;r<t.children.length;r++){let n=t.children[r];this.add(n.clone())}return this}};dr.DEFAULT_UP=new H(0,1,0);dr.DEFAULT_MATRIX_AUTO_UPDATE=!0;dr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Yo=new H,Gc=new H,K3=new H,$c=new H,Ep=new H,Ap=new H,hk=new H,X3=new H,Q3=new H,J3=new H,ba=class{constructor(e=new H,t=new H,i=new H){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Yo.subVectors(e,t),r.cross(Yo);let n=r.lengthSq();return n>0?r.multiplyScalar(1/Math.sqrt(n)):r.set(0,0,0)}static getBarycoord(e,t,i,r,n){Yo.subVectors(r,t),Gc.subVectors(i,t),K3.subVectors(e,t);let a=Yo.dot(Yo),s=Yo.dot(Gc),o=Yo.dot(K3),l=Gc.dot(Gc),c=Gc.dot(K3),u=a*l-s*s;if(u===0)return n.set(-2,-1,-1);let d=1/u,h=(l*o-s*c)*d,f=(a*c-s*o)*d;return n.set(1-h-f,f,h)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,$c),$c.x>=0&&$c.y>=0&&$c.x+$c.y<=1}static getUV(e,t,i,r,n,a,s,o){return this.getBarycoord(e,t,i,r,$c),o.set(0,0),o.addScaledVector(n,$c.x),o.addScaledVector(a,$c.y),o.addScaledVector(s,$c.z),o}static isFrontFacing(e,t,i,r){return Yo.subVectors(i,t),Gc.subVectors(e,t),Yo.cross(Gc).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Yo.subVectors(this.c,this.b),Gc.subVectors(this.a,this.b),Yo.cross(Gc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ba.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ba.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,n){return ba.getUV(e,this.a,this.b,this.c,t,i,r,n)}containsPoint(e){return ba.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ba.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i=this.a,r=this.b,n=this.c,a,s;Ep.subVectors(r,i),Ap.subVectors(n,i),X3.subVectors(e,i);let o=Ep.dot(X3),l=Ap.dot(X3);if(o<=0&&l<=0)return t.copy(i);Q3.subVectors(e,r);let c=Ep.dot(Q3),u=Ap.dot(Q3);if(c>=0&&u<=c)return t.copy(r);let d=o*u-c*l;if(d<=0&&o>=0&&c<=0)return a=o/(o-c),t.copy(i).addScaledVector(Ep,a);J3.subVectors(e,n);let h=Ep.dot(J3),f=Ap.dot(J3);if(f>=0&&h<=f)return t.copy(n);let p=h*l-o*f;if(p<=0&&l>=0&&f<=0)return s=l/(l-f),t.copy(i).addScaledVector(Ap,s);let m=c*f-h*u;if(m<=0&&u-c>=0&&h-f>=0)return hk.subVectors(n,r),s=(u-c)/(u-c+(h-f)),t.copy(r).addScaledVector(hk,s);let v=1/(m+p+d);return a=p*v,s=d*v,t.copy(i).addScaledVector(Ep,a).addScaledVector(Ap,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},Ile=0,iy=class extends Pa{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ile++}),this.uuid=To(),this.name="",this.type="Material",this.blending=If,this.side=_l,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=zH,this.blendDst=VH,this.blendEquation=am,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=eA,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ale,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=F3,this.stencilZFail=F3,this.stencilZPass=F3,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}let r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==If&&(i.blending=this.blending),this.side!==_l&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(n){let a=[];for(let s in n){let o=n[s];delete o.metadata,a.push(o)}return a}if(t){let n=r(e.textures),a=r(e.images);n.length>0&&(i.textures=n),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(t!==null){let r=t.length;i=new Array(r);for(let n=0;n!==r;++n)i[n]=t[n].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Tu=class extends iy{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ii(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=UH,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}},xn=new H,ob=new Pe,ui=class{constructor(t,i,r=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=i,this.count=t!==void 0?t.length/i:0,this.normalized=r,this.usage=nA,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,i,r){t*=this.itemSize,r*=i.itemSize;for(let n=0,a=this.itemSize;n<a;n++)this.array[t+n]=i.array[r+n];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let i=0,r=this.count;i<r;i++)ob.fromBufferAttribute(this,i),ob.applyMatrix3(t),this.setXY(i,ob.x,ob.y);else if(this.itemSize===3)for(let i=0,r=this.count;i<r;i++)xn.fromBufferAttribute(this,i),xn.applyMatrix3(t),this.setXYZ(i,xn.x,xn.y,xn.z);return this}applyMatrix4(t){for(let i=0,r=this.count;i<r;i++)xn.fromBufferAttribute(this,i),xn.applyMatrix4(t),this.setXYZ(i,xn.x,xn.y,xn.z);return this}applyNormalMatrix(t){for(let i=0,r=this.count;i<r;i++)xn.fromBufferAttribute(this,i),xn.applyNormalMatrix(t),this.setXYZ(i,xn.x,xn.y,xn.z);return this}transformDirection(t){for(let i=0,r=this.count;i<r;i++)xn.fromBufferAttribute(this,i),xn.transformDirection(t),this.setXYZ(i,xn.x,xn.y,xn.z);return this}set(t,i=0){return this.array.set(t,i),this}getX(t){let i=this.array[t*this.itemSize];return this.normalized&&(i=gu(i,this.array)),i}setX(t,i){return this.normalized&&(i=Dr(i,this.array)),this.array[t*this.itemSize]=i,this}getY(t){let i=this.array[t*this.itemSize+1];return this.normalized&&(i=gu(i,this.array)),i}setY(t,i){return this.normalized&&(i=Dr(i,this.array)),this.array[t*this.itemSize+1]=i,this}getZ(t){let i=this.array[t*this.itemSize+2];return this.normalized&&(i=gu(i,this.array)),i}setZ(t,i){return this.normalized&&(i=Dr(i,this.array)),this.array[t*this.itemSize+2]=i,this}getW(t){let i=this.array[t*this.itemSize+3];return this.normalized&&(i=gu(i,this.array)),i}setW(t,i){return this.normalized&&(i=Dr(i,this.array)),this.array[t*this.itemSize+3]=i,this}setXY(t,i,r){return t*=this.itemSize,this.normalized&&(i=Dr(i,this.array),r=Dr(r,this.array)),this.array[t+0]=i,this.array[t+1]=r,this}setXYZ(t,i,r,n){return t*=this.itemSize,this.normalized&&(i=Dr(i,this.array),r=Dr(r,this.array),n=Dr(n,this.array)),this.array[t+0]=i,this.array[t+1]=r,this.array[t+2]=n,this}setXYZW(t,i,r,n,a){return t*=this.itemSize,this.normalized&&(i=Dr(i,this.array),r=Dr(r,this.array),n=Dr(n,this.array),a=Dr(a,this.array)),this.array[t+0]=i,this.array[t+1]=r,this.array[t+2]=n,this.array[t+3]=a,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==nA&&(t.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},ej=class extends ui{constructor(e,t,i){super(new Uint16Array(e),t,i)}},Bm=class extends ui{constructor(e,t,i){super(new Uint32Array(e),t,i)}},It=class extends ui{constructor(t,i,r){super(new Float32Array(t),i,r)}},Ole=0,oo=new pt,eC=new dr,Mp=new H,js=new gn,C0=new gn,Xn=new H,Kt=class extends Pa{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Ole++}),this.uuid=To(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(YH(e)?Bm:ej)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let n=new An().getNormalMatrix(e);i.applyNormalMatrix(n),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return oo.makeRotationFromQuaternion(e),this.applyMatrix4(oo),this}rotateX(e){return oo.makeRotationX(e),this.applyMatrix4(oo),this}rotateY(e){return oo.makeRotationY(e),this.applyMatrix4(oo),this}rotateZ(e){return oo.makeRotationZ(e),this.applyMatrix4(oo),this}translate(e,t,i){return oo.makeTranslation(e,t,i),this.applyMatrix4(oo),this}scale(e,t,i){return oo.makeScale(e,t,i),this.applyMatrix4(oo),this}lookAt(e){return eC.lookAt(e),eC.updateMatrix(),this.applyMatrix4(eC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Mp).negate(),this.translate(Mp.x,Mp.y,Mp.z),this}setFromPoints(e){let t=[];for(let i=0,r=e.length;i<r;i++){let n=e[i];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new It(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new gn);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new H(-1/0,-1/0,-1/0),new H(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){let n=t[i];js.setFromBufferAttribute(n),this.morphTargetsRelative?(Xn.addVectors(this.boundingBox.min,js.min),this.boundingBox.expandByPoint(Xn),Xn.addVectors(this.boundingBox.max,js.max),this.boundingBox.expandByPoint(Xn)):(this.boundingBox.expandByPoint(js.min),this.boundingBox.expandByPoint(js.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fs);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new H,1/0);return}if(e){let i=this.boundingSphere.center;if(js.setFromBufferAttribute(e),t)for(let n=0,a=t.length;n<a;n++){let s=t[n];C0.setFromBufferAttribute(s),this.morphTargetsRelative?(Xn.addVectors(js.min,C0.min),js.expandByPoint(Xn),Xn.addVectors(js.max,C0.max),js.expandByPoint(Xn)):(js.expandByPoint(C0.min),js.expandByPoint(C0.max))}js.getCenter(i);let r=0;for(let n=0,a=e.count;n<a;n++)Xn.fromBufferAttribute(e,n),r=Math.max(r,i.distanceToSquared(Xn));if(t)for(let n=0,a=t.length;n<a;n++){let s=t[n],o=this.morphTargetsRelative;for(let l=0,c=s.count;l<c;l++)Xn.fromBufferAttribute(s,l),o&&(Mp.fromBufferAttribute(e,l),Xn.add(Mp)),r=Math.max(r,i.distanceToSquared(Xn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=e.array,r=t.position.array,n=t.normal.array,a=t.uv.array,s=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ui(new Float32Array(4*s),4));let o=this.getAttribute("tangent").array,l=[],c=[];for(let A=0;A<s;A++)l[A]=new H,c[A]=new H;let u=new H,d=new H,h=new H,f=new Pe,p=new Pe,m=new Pe,v=new H,y=new H;function x(A,M,T){u.fromArray(r,A*3),d.fromArray(r,M*3),h.fromArray(r,T*3),f.fromArray(a,A*2),p.fromArray(a,M*2),m.fromArray(a,T*2),d.sub(u),h.sub(u),p.sub(f),m.sub(f);let P=1/(p.x*m.y-m.x*p.y);!isFinite(P)||(v.copy(d).multiplyScalar(m.y).addScaledVector(h,-p.y).multiplyScalar(P),y.copy(h).multiplyScalar(p.x).addScaledVector(d,-m.x).multiplyScalar(P),l[A].add(v),l[M].add(v),l[T].add(v),c[A].add(y),c[M].add(y),c[T].add(y))}let b=this.groups;b.length===0&&(b=[{start:0,count:i.length}]);for(let A=0,M=b.length;A<M;++A){let T=b[A],P=T.start,D=T.count;for(let k=P,L=P+D;k<L;k+=3)x(i[k+0],i[k+1],i[k+2])}let w=new H,S=new H,_=new H,E=new H;function C(A){_.fromArray(n,A*3),E.copy(_);let M=l[A];w.copy(M),w.sub(_.multiplyScalar(_.dot(M))).normalize(),S.crossVectors(E,M);let T=S.dot(c[A])<0?-1:1;o[A*4]=w.x,o[A*4+1]=w.y,o[A*4+2]=w.z,o[A*4+3]=T}for(let A=0,M=b.length;A<M;++A){let T=b[A],P=T.start,D=T.count;for(let k=P,L=P+D;k<L;k+=3)C(i[k+0]),C(i[k+1]),C(i[k+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new ui(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let d=0,h=i.count;d<h;d++)i.setXYZ(d,0,0,0);let r=new H,n=new H,a=new H,s=new H,o=new H,l=new H,c=new H,u=new H;if(e)for(let d=0,h=e.count;d<h;d+=3){let f=e.getX(d+0),p=e.getX(d+1),m=e.getX(d+2);r.fromBufferAttribute(t,f),n.fromBufferAttribute(t,p),a.fromBufferAttribute(t,m),c.subVectors(a,n),u.subVectors(r,n),c.cross(u),s.fromBufferAttribute(i,f),o.fromBufferAttribute(i,p),l.fromBufferAttribute(i,m),s.add(c),o.add(c),l.add(c),i.setXYZ(f,s.x,s.y,s.z),i.setXYZ(p,o.x,o.y,o.z),i.setXYZ(m,l.x,l.y,l.z)}else for(let d=0,h=t.count;d<h;d+=3)r.fromBufferAttribute(t,d+0),n.fromBufferAttribute(t,d+1),a.fromBufferAttribute(t,d+2),c.subVectors(a,n),u.subVectors(r,n),c.cross(u),i.setXYZ(d+0,c.x,c.y,c.z),i.setXYZ(d+1,c.x,c.y,c.z),i.setXYZ(d+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Xn.fromBufferAttribute(e,t),Xn.normalize(),e.setXYZ(t,Xn.x,Xn.y,Xn.z)}toNonIndexed(){function e(s,o){let l=s.array,c=s.itemSize,u=s.normalized,d=new l.constructor(o.length*c),h=0,f=0;for(let p=0,m=o.length;p<m;p++){s.isInterleavedBufferAttribute?h=o[p]*s.data.stride+s.offset:h=o[p]*c;for(let v=0;v<c;v++)d[f++]=l[h++]}return new ui(d,c,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new Kt,i=this.index.array,r=this.attributes;for(let s in r){let o=r[s],l=e(o,i);t.setAttribute(s,l)}let n=this.morphAttributes;for(let s in n){let o=[],l=n[s];for(let c=0,u=l.length;c<u;c++){let d=l[c],h=e(d,i);o.push(h)}t.morphAttributes[s]=o}t.morphTargetsRelative=this.morphTargetsRelative;let a=this.groups;for(let s=0,o=a.length;s<o;s++){let l=a[s];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let o=this.parameters;for(let l in o)o[l]!==void 0&&(e[l]=o[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let o in i){let l=i[o];e.data.attributes[o]=l.toJSON(e.data)}let r={},n=!1;for(let o in this.morphAttributes){let l=this.morphAttributes[o],c=[];for(let u=0,d=l.length;u<d;u++){let h=l[u];c.push(h.toJSON(e.data))}c.length>0&&(r[o]=c,n=!0)}n&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));let s=this.boundingSphere;return s!==null&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone(t));let r=e.attributes;for(let l in r){let c=r[l];this.setAttribute(l,c.clone(t))}let n=e.morphAttributes;for(let l in n){let c=[],u=n[l];for(let d=0,h=u.length;d<h;d++)c.push(u[d].clone(t));this.morphAttributes[l]=c}this.morphTargetsRelative=e.morphTargetsRelative;let a=e.groups;for(let l=0,c=a.length;l<c;l++){let u=a[l];this.addGroup(u.start,u.count,u.materialIndex)}let s=e.boundingBox;s!==null&&(this.boundingBox=s.clone());let o=e.boundingSphere;return o!==null&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},fk=new pt,Tp=new Vv,tC=new Fs,E0=new H,A0=new H,M0=new H,iC=new H,lb=new H,cb=new Pe,ub=new Pe,db=new Pe,rC=new H,hb=new H,Yr=class extends dr{constructor(t=new Kt,i=new Tu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=i,this.updateMorphTargets()}copy(t,i){return super.copy(t,i),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,a=r.length;n<a;n++){let s=r[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=n}}}}getVertexPosition(t,i){let r=this.geometry,n=r.attributes.position,a=r.morphAttributes.position,s=r.morphTargetsRelative;i.fromBufferAttribute(n,t);let o=this.morphTargetInfluences;if(a&&o){lb.set(0,0,0);for(let l=0,c=a.length;l<c;l++){let u=o[l],d=a[l];u!==0&&(iC.fromBufferAttribute(d,t),s?lb.addScaledVector(iC,u):lb.addScaledVector(iC.sub(i),u))}i.add(lb)}return this.isSkinnedMesh&&this.boneTransform(t,i),i}raycast(t,i){let r=this.geometry,n=this.material,a=this.matrixWorld;if(n===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),tC.copy(r.boundingSphere),tC.applyMatrix4(a),t.ray.intersectsSphere(tC)===!1)||(fk.copy(a).invert(),Tp.copy(t.ray).applyMatrix4(fk),r.boundingBox!==null&&Tp.intersectsBox(r.boundingBox)===!1))return;let s,o=r.index,l=r.attributes.position,c=r.attributes.uv,u=r.attributes.uv2,d=r.groups,h=r.drawRange;if(o!==null)if(Array.isArray(n))for(let f=0,p=d.length;f<p;f++){let m=d[f],v=n[m.materialIndex],y=Math.max(m.start,h.start),x=Math.min(o.count,Math.min(m.start+m.count,h.start+h.count));for(let b=y,w=x;b<w;b+=3){let S=o.getX(b),_=o.getX(b+1),E=o.getX(b+2);s=fb(this,v,t,Tp,c,u,S,_,E),s&&(s.faceIndex=Math.floor(b/3),s.face.materialIndex=m.materialIndex,i.push(s))}}else{let f=Math.max(0,h.start),p=Math.min(o.count,h.start+h.count);for(let m=f,v=p;m<v;m+=3){let y=o.getX(m),x=o.getX(m+1),b=o.getX(m+2);s=fb(this,n,t,Tp,c,u,y,x,b),s&&(s.faceIndex=Math.floor(m/3),i.push(s))}}else if(l!==void 0)if(Array.isArray(n))for(let f=0,p=d.length;f<p;f++){let m=d[f],v=n[m.materialIndex],y=Math.max(m.start,h.start),x=Math.min(l.count,Math.min(m.start+m.count,h.start+h.count));for(let b=y,w=x;b<w;b+=3){let S=b,_=b+1,E=b+2;s=fb(this,v,t,Tp,c,u,S,_,E),s&&(s.faceIndex=Math.floor(b/3),s.face.materialIndex=m.materialIndex,i.push(s))}}else{let f=Math.max(0,h.start),p=Math.min(l.count,h.start+h.count);for(let m=f,v=p;m<v;m+=3){let y=m,x=m+1,b=m+2;s=fb(this,n,t,Tp,c,u,y,x,b),s&&(s.faceIndex=Math.floor(m/3),i.push(s))}}}};function Rle(e,t,i,r,n,a,s,o){let l;if(t.side===aa?l=r.intersectTriangle(s,a,n,!0,o):l=r.intersectTriangle(n,a,s,t.side===_l,o),l===null)return null;hb.copy(o),hb.applyMatrix4(e.matrixWorld);let c=i.ray.origin.distanceTo(hb);return c<i.near||c>i.far?null:{distance:c,point:hb.clone(),object:e}}function fb(e,t,i,r,n,a,s,o,l){e.getVertexPosition(s,E0),e.getVertexPosition(o,A0),e.getVertexPosition(l,M0);let c=Rle(e,t,i,r,E0,A0,M0,rC);if(c){n&&(cb.fromBufferAttribute(n,s),ub.fromBufferAttribute(n,o),db.fromBufferAttribute(n,l),c.uv=ba.getUV(rC,E0,A0,M0,cb,ub,db,new Pe)),a&&(cb.fromBufferAttribute(a,s),ub.fromBufferAttribute(a,o),db.fromBufferAttribute(a,l),c.uv2=ba.getUV(rC,E0,A0,M0,cb,ub,db,new Pe));let u={a:s,b:o,c:l,normal:new H,materialIndex:0};ba.getNormal(E0,A0,M0,u.normal),c.face=u}return c}var Cl=class extends Kt{constructor(e=1,t=1,i=1,r=1,n=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:n,depthSegments:a};let s=this;r=Math.floor(r),n=Math.floor(n),a=Math.floor(a);let o=[],l=[],c=[],u=[],d=0,h=0;f("z","y","x",-1,-1,i,t,e,a,n,0),f("z","y","x",1,-1,i,t,-e,a,n,1),f("x","z","y",1,1,e,i,t,r,a,2),f("x","z","y",1,-1,e,i,-t,r,a,3),f("x","y","z",1,-1,e,t,i,r,n,4),f("x","y","z",-1,-1,e,t,-i,r,n,5),this.setIndex(o),this.setAttribute("position",new It(l,3)),this.setAttribute("normal",new It(c,3)),this.setAttribute("uv",new It(u,2));function f(p,m,v,y,x,b,w,S,_,E,C){let A=b/_,M=w/E,T=b/2,P=w/2,D=S/2,k=_+1,L=E+1,R=0,N=0,I=new H;for(let B=0;B<L;B++){let z=B*M-P;for(let V=0;V<k;V++){let W=V*A-T;I[p]=W*y,I[m]=z*x,I[v]=D,l.push(I.x,I.y,I.z),I[p]=0,I[m]=0,I[v]=S>0?1:-1,c.push(I.x,I.y,I.z),u.push(V/_),u.push(1-B/E),R+=1}}for(let B=0;B<E;B++)for(let z=0;z<_;z++){let V=d+z+k*B,W=d+z+k*(B+1),G=d+(z+1)+k*(B+1),q=d+(z+1)+k*B;o.push(V,W,q),o.push(W,G,q),N+=6}s.addGroup(h,N,C),h+=N,d+=R}}static fromJSON(e){return new Cl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function cv(e){let t={};for(let i in e){t[i]={};for(let r in e[i]){let n=e[i][r];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?t[i][r]=n.clone():Array.isArray(n)?t[i][r]=n.slice():t[i][r]=n}}return t}function rs(e){let t={};for(let i=0;i<e.length;i++){let r=cv(e[i]);for(let n in r)t[n]=r[n]}return t}function kle(e){let t=[];for(let i=0;i<e.length;i++)t.push(e[i].clone());return t}function tj(e){return e.getRenderTarget()===null&&e.outputEncoding===Ei?Jl:Q2}var Uv={clone:cv,merge:rs},Lle=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Ble=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,er=class extends iy{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Lle,this.fragmentShader=Ble,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=cv(t.uniforms),this.uniformsGroups=kle(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){let i=super.toJSON(t);i.glslVersion=this.glslVersion,i.uniforms={};for(let n in this.uniforms){let a=this.uniforms[n].value;a&&a.isTexture?i.uniforms[n]={type:"t",value:a.toJSON(t).uuid}:a&&a.isColor?i.uniforms[n]={type:"c",value:a.getHex()}:a&&a.isVector2?i.uniforms[n]={type:"v2",value:a.toArray()}:a&&a.isVector3?i.uniforms[n]={type:"v3",value:a.toArray()}:a&&a.isVector4?i.uniforms[n]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?i.uniforms[n]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?i.uniforms[n]={type:"m4",value:a.toArray()}:i.uniforms[n]={value:a}}Object.keys(this.defines).length>0&&(i.defines=this.defines),i.vertexShader=this.vertexShader,i.fragmentShader=this.fragmentShader;let r={};for(let n in this.extensions)this.extensions[n]===!0&&(r[n]=!0);return Object.keys(r).length>0&&(i.extensions=r),i}},ap=class extends dr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new pt,this.projectionMatrix=new pt,this.projectionMatrixInverse=new pt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Ba=class extends ap{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=n1*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(Tg*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return n1*2*Math.atan(Math.tan(Tg*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,n,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(Tg*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,n=-.5*r,a=this.view;if(this.view!==null&&this.view.enabled){let o=a.fullWidth,l=a.fullHeight;n+=a.offsetX*r/o,t-=a.offsetY*i/l,r*=a.width/o,i*=a.height/l}let s=this.filmOffset;s!==0&&(n+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},Pp=-90,Dp=1,Nle=class extends dr{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;let r=new Ba(Pp,Dp,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);let n=new Ba(Pp,Dp,e,t);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(-1,0,0),this.add(n);let a=new Ba(Pp,Dp,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(0,1,0),this.add(a);let s=new Ba(Pp,Dp,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(0,-1,0),this.add(s);let o=new Ba(Pp,Dp,e,t);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(0,0,1),this.add(o);let l=new Ba(Pp,Dp,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){this.parent===null&&this.updateMatrixWorld();let i=this.renderTarget,[r,n,a,s,o,l]=this.children,c=e.getRenderTarget(),u=e.toneMapping,d=e.xr.enabled;e.toneMapping=dc,e.xr.enabled=!1;let h=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,n),e.setRenderTarget(i,2),e.render(t,a),e.setRenderTarget(i,3),e.render(t,s),e.setRenderTarget(i,4),e.render(t,o),i.texture.generateMipmaps=h,e.setRenderTarget(i,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=d,i.texture.needsPMREMUpdate=!0}},tP=class extends Kr{constructor(e,t,i,r,n,a,s,o,l,c){e=e!==void 0?e:[],t=t!==void 0?t:Vf,super(e,t,i,r,n,a,s,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},Fle=class extends ir{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new tP(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Ti}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Cl(5,5,5),n=new er({name:"CubemapFromEquirect",uniforms:cv(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:aa,blending:Mn});n.uniforms.tEquirect.value=t;let a=new Yr(r,n),s=t.minFilter;return t.minFilter===lv&&(t.minFilter=Ti),new Nle(1,10,this).update(e,a),t.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,r){let n=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(n)}},nC=new H,zle=new H,Vle=new An,As=class{constructor(e=new H(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let r=nC.subVectors(i,t).cross(zle.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let i=e.delta(nC),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let n=-(e.start.dot(this.normal)+this.constant)/r;return n<0||n>1?null:t.copy(i).multiplyScalar(n).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||Vle.getNormalMatrix(e),r=this.coplanarPoint(nC).applyMatrix4(e),n=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(n),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},Ip=new Fs,pb=new H,iP=class{constructor(e=new As,t=new As,i=new As,r=new As,n=new As,a=new As){this.planes=[e,t,i,r,n,a]}set(e,t,i,r,n,a){let s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(i),s[3].copy(r),s[4].copy(n),s[5].copy(a),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){let t=this.planes,i=e.elements,r=i[0],n=i[1],a=i[2],s=i[3],o=i[4],l=i[5],c=i[6],u=i[7],d=i[8],h=i[9],f=i[10],p=i[11],m=i[12],v=i[13],y=i[14],x=i[15];return t[0].setComponents(s-r,u-o,p-d,x-m).normalize(),t[1].setComponents(s+r,u+o,p+d,x+m).normalize(),t[2].setComponents(s+n,u+l,p+h,x+v).normalize(),t[3].setComponents(s-n,u-l,p-h,x-v).normalize(),t[4].setComponents(s-a,u-c,p-f,x-y).normalize(),t[5].setComponents(s+a,u+c,p+f,x+y).normalize(),this}intersectsObject(e){let t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Ip.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Ip)}intersectsSprite(e){return Ip.center.set(0,0,0),Ip.radius=.7071067811865476,Ip.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ip)}intersectsSphere(e){let t=this.planes,i=e.center,r=-e.radius;for(let n=0;n<6;n++)if(t[n].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let r=t[i];if(pb.x=r.normal.x>0?e.max.x:e.min.x,pb.y=r.normal.y>0?e.max.y:e.min.y,pb.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(pb)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function ij(){let e=null,t=!1,i=null,r=null;function n(a,s){i(a,s),r=e.requestAnimationFrame(n)}return{start:function(){t!==!0&&i!==null&&(r=e.requestAnimationFrame(n),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(a){i=a},setContext:function(a){e=a}}}function Ule(e,t){let i=t.isWebGL2,r=new WeakMap;function n(c,u){let d=c.array,h=c.usage,f=e.createBuffer();e.bindBuffer(u,f),e.bufferData(u,d,h),c.onUploadCallback();let p;if(d instanceof Float32Array)p=5126;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(i)p=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=5123;else if(d instanceof Int16Array)p=5122;else if(d instanceof Uint32Array)p=5125;else if(d instanceof Int32Array)p=5124;else if(d instanceof Int8Array)p=5120;else if(d instanceof Uint8Array)p=5121;else if(d instanceof Uint8ClampedArray)p=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:f,type:p,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}function a(c,u,d){let h=u.array,f=u.updateRange;e.bindBuffer(d,c),f.count===-1?e.bufferSubData(d,0,h):(i?e.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):e.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1),u.onUploadCallback()}function s(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function o(c){c.isInterleavedBufferAttribute&&(c=c.data);let u=r.get(c);u&&(e.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){if(c.isGLBufferAttribute){let h=r.get(c);(!h||h.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);let d=r.get(c);d===void 0?r.set(c,n(c,u)):d.version<c.version&&(a(d.buffer,c,u),d.version=c.version)}return{get:s,remove:o,update:l}}var Pu=class extends Kt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};let n=e/2,a=t/2,s=Math.floor(i),o=Math.floor(r),l=s+1,c=o+1,u=e/s,d=t/o,h=[],f=[],p=[],m=[];for(let v=0;v<c;v++){let y=v*d-a;for(let x=0;x<l;x++){let b=x*u-n;f.push(b,-y,0),p.push(0,0,1),m.push(x/s),m.push(1-v/o)}}for(let v=0;v<o;v++)for(let y=0;y<s;y++){let x=y+l*v,b=y+l*(v+1),w=y+1+l*(v+1),S=y+1+l*v;h.push(x,b,S),h.push(b,w,S)}this.setIndex(h),this.setAttribute("position",new It(f,3)),this.setAttribute("normal",new It(p,3)),this.setAttribute("uv",new It(m,2))}static fromJSON(e){return new Pu(e.width,e.height,e.widthSegments,e.heightSegments)}},Hle=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,jle=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Wle=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Gle=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,$le=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Zle=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,qle="vec3 transformed = vec3( position );",Yle=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Kle=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,Xle=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Qle=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Jle=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,ece=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,tce=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,ice=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,rce=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,nce=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,ace=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,sce=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,oce=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,lce=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,cce=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,uce=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,dce=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,hce=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,fce=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,pce="gl_FragColor = linearToOutputTexel( gl_FragColor );",mce=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,vce=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,gce=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,yce=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,bce=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,wce=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,xce=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,_ce=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Sce=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Cce=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Ece=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Ace=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Mce=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Tce=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Pce=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Dce=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Ice=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Oce=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Rce=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,kce=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Lce=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Bce=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Nce=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Fce=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,zce=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Vce=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Uce=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Hce=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,jce=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Wce=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Gce=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,$ce=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Zce=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,qce=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Yce=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Kce=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Xce=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Qce=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Jce=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,eue=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,tue=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,iue=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,rue=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,nue=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,aue=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,sue=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,oue=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,lue=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,cue=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,uue=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,due=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,hue=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,fue=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,pue=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,mue=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,vue=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,gue=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,yue=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,bue=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,wue=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,xue=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,_ue=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Sue=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Cue=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Eue=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Aue=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Mue=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Tue=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Pue=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Due=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Iue=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,Oue=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,Rue=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,kue=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Lue=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Bue=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Nue=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Fue=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,zue=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,Vue=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Uue=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Hue=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,jue=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Wue=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Gue=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,$ue=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Zue=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,que=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Yue=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Kue=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Xue=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Que=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Jue=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ede=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,tde=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ide=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rde=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nde=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,ade=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sde=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,ode=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,lde=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cde=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ude=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,dde=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hde=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fde=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pde=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,mde=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vde=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gde=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,yde=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,bde=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Mi={alphamap_fragment:Hle,alphamap_pars_fragment:jle,alphatest_fragment:Wle,alphatest_pars_fragment:Gle,aomap_fragment:$le,aomap_pars_fragment:Zle,begin_vertex:qle,beginnormal_vertex:Yle,bsdfs:Kle,iridescence_fragment:Xle,bumpmap_pars_fragment:Qle,clipping_planes_fragment:Jle,clipping_planes_pars_fragment:ece,clipping_planes_pars_vertex:tce,clipping_planes_vertex:ice,color_fragment:rce,color_pars_fragment:nce,color_pars_vertex:ace,color_vertex:sce,common:oce,cube_uv_reflection_fragment:lce,defaultnormal_vertex:cce,displacementmap_pars_vertex:uce,displacementmap_vertex:dce,emissivemap_fragment:hce,emissivemap_pars_fragment:fce,encodings_fragment:pce,encodings_pars_fragment:mce,envmap_fragment:vce,envmap_common_pars_fragment:gce,envmap_pars_fragment:yce,envmap_pars_vertex:bce,envmap_physical_pars_fragment:Ice,envmap_vertex:wce,fog_vertex:xce,fog_pars_vertex:_ce,fog_fragment:Sce,fog_pars_fragment:Cce,gradientmap_pars_fragment:Ece,lightmap_fragment:Ace,lightmap_pars_fragment:Mce,lights_lambert_fragment:Tce,lights_lambert_pars_fragment:Pce,lights_pars_begin:Dce,lights_toon_fragment:Oce,lights_toon_pars_fragment:Rce,lights_phong_fragment:kce,lights_phong_pars_fragment:Lce,lights_physical_fragment:Bce,lights_physical_pars_fragment:Nce,lights_fragment_begin:Fce,lights_fragment_maps:zce,lights_fragment_end:Vce,logdepthbuf_fragment:Uce,logdepthbuf_pars_fragment:Hce,logdepthbuf_pars_vertex:jce,logdepthbuf_vertex:Wce,map_fragment:Gce,map_pars_fragment:$ce,map_particle_fragment:Zce,map_particle_pars_fragment:qce,metalnessmap_fragment:Yce,metalnessmap_pars_fragment:Kce,morphcolor_vertex:Xce,morphnormal_vertex:Qce,morphtarget_pars_vertex:Jce,morphtarget_vertex:eue,normal_fragment_begin:tue,normal_fragment_maps:iue,normal_pars_fragment:rue,normal_pars_vertex:nue,normal_vertex:aue,normalmap_pars_fragment:sue,clearcoat_normal_fragment_begin:oue,clearcoat_normal_fragment_maps:lue,clearcoat_pars_fragment:cue,iridescence_pars_fragment:uue,output_fragment:due,packing:hue,premultiplied_alpha_fragment:fue,project_vertex:pue,dithering_fragment:mue,dithering_pars_fragment:vue,roughnessmap_fragment:gue,roughnessmap_pars_fragment:yue,shadowmap_pars_fragment:bue,shadowmap_pars_vertex:wue,shadowmap_vertex:xue,shadowmask_pars_fragment:_ue,skinbase_vertex:Sue,skinning_pars_vertex:Cue,skinning_vertex:Eue,skinnormal_vertex:Aue,specularmap_fragment:Mue,specularmap_pars_fragment:Tue,tonemapping_fragment:Pue,tonemapping_pars_fragment:Due,transmission_fragment:Iue,transmission_pars_fragment:Oue,uv_pars_fragment:Rue,uv_pars_vertex:kue,uv_vertex:Lue,uv2_pars_fragment:Bue,uv2_pars_vertex:Nue,uv2_vertex:Fue,worldpos_vertex:zue,background_vert:Vue,background_frag:Uue,backgroundCube_vert:Hue,backgroundCube_frag:jue,cube_vert:Wue,cube_frag:Gue,depth_vert:$ue,depth_frag:Zue,distanceRGBA_vert:que,distanceRGBA_frag:Yue,equirect_vert:Kue,equirect_frag:Xue,linedashed_vert:Que,linedashed_frag:Jue,meshbasic_vert:ede,meshbasic_frag:tde,meshlambert_vert:ide,meshlambert_frag:rde,meshmatcap_vert:nde,meshmatcap_frag:ade,meshnormal_vert:sde,meshnormal_frag:ode,meshphong_vert:lde,meshphong_frag:cde,meshphysical_vert:ude,meshphysical_frag:dde,meshtoon_vert:hde,meshtoon_frag:fde,points_vert:pde,points_frag:mde,shadow_vert:vde,shadow_frag:gde,sprite_vert:yde,sprite_frag:bde},At={common:{diffuse:{value:new ii(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new An},uv2Transform:{value:new An},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Pe(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ii(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ii(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new An}},sprite:{diffuse:{value:new ii(16777215)},opacity:{value:1},center:{value:new Pe(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new An}}},tc={basic:{uniforms:rs([At.common,At.specularmap,At.envmap,At.aomap,At.lightmap,At.fog]),vertexShader:Mi.meshbasic_vert,fragmentShader:Mi.meshbasic_frag},lambert:{uniforms:rs([At.common,At.specularmap,At.envmap,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.fog,At.lights,{emissive:{value:new ii(0)}}]),vertexShader:Mi.meshlambert_vert,fragmentShader:Mi.meshlambert_frag},phong:{uniforms:rs([At.common,At.specularmap,At.envmap,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.fog,At.lights,{emissive:{value:new ii(0)},specular:{value:new ii(1118481)},shininess:{value:30}}]),vertexShader:Mi.meshphong_vert,fragmentShader:Mi.meshphong_frag},standard:{uniforms:rs([At.common,At.envmap,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.roughnessmap,At.metalnessmap,At.fog,At.lights,{emissive:{value:new ii(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Mi.meshphysical_vert,fragmentShader:Mi.meshphysical_frag},toon:{uniforms:rs([At.common,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.gradientmap,At.fog,At.lights,{emissive:{value:new ii(0)}}]),vertexShader:Mi.meshtoon_vert,fragmentShader:Mi.meshtoon_frag},matcap:{uniforms:rs([At.common,At.bumpmap,At.normalmap,At.displacementmap,At.fog,{matcap:{value:null}}]),vertexShader:Mi.meshmatcap_vert,fragmentShader:Mi.meshmatcap_frag},points:{uniforms:rs([At.points,At.fog]),vertexShader:Mi.points_vert,fragmentShader:Mi.points_frag},dashed:{uniforms:rs([At.common,At.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Mi.linedashed_vert,fragmentShader:Mi.linedashed_frag},depth:{uniforms:rs([At.common,At.displacementmap]),vertexShader:Mi.depth_vert,fragmentShader:Mi.depth_frag},normal:{uniforms:rs([At.common,At.bumpmap,At.normalmap,At.displacementmap,{opacity:{value:1}}]),vertexShader:Mi.meshnormal_vert,fragmentShader:Mi.meshnormal_frag},sprite:{uniforms:rs([At.sprite,At.fog]),vertexShader:Mi.sprite_vert,fragmentShader:Mi.sprite_frag},background:{uniforms:{uvTransform:{value:new An},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Mi.background_vert,fragmentShader:Mi.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Mi.backgroundCube_vert,fragmentShader:Mi.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Mi.cube_vert,fragmentShader:Mi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Mi.equirect_vert,fragmentShader:Mi.equirect_frag},distanceRGBA:{uniforms:rs([At.common,At.displacementmap,{referencePosition:{value:new H},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Mi.distanceRGBA_vert,fragmentShader:Mi.distanceRGBA_frag},shadow:{uniforms:rs([At.lights,At.fog,{color:{value:new ii(0)},opacity:{value:1}}]),vertexShader:Mi.shadow_vert,fragmentShader:Mi.shadow_frag}};tc.physical={uniforms:rs([tc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Pe(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new ii(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Pe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ii(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new ii(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Mi.meshphysical_vert,fragmentShader:Mi.meshphysical_frag};var mb={r:0,b:0,g:0};function wde(e,t,i,r,n,a,s){let o=new ii(0),l=a===!0?0:1,c,u,d=null,h=0,f=null;function p(v,y){let x=!1,b=y.isScene===!0?y.background:null;b&&b.isTexture&&(b=(y.backgroundBlurriness>0?i:t).get(b));let w=e.xr,S=w.getSession&&w.getSession();S&&S.environmentBlendMode==="additive"&&(b=null),b===null?m(o,l):b&&b.isColor&&(m(b,1),x=!0),(e.autoClear||x)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),b&&(b.isCubeTexture||b.mapping===ty)?(u===void 0&&(u=new Yr(new Cl(1,1,1),new er({name:"BackgroundCubeMaterial",uniforms:cv(tc.backgroundCube.uniforms),vertexShader:tc.backgroundCube.vertexShader,fragmentShader:tc.backgroundCube.fragmentShader,side:aa,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(_,E,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(u)),u.material.uniforms.envMap.value=b,u.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=y.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,u.material.toneMapped=b.encoding!==Ei,(d!==b||h!==b.version||f!==e.toneMapping)&&(u.material.needsUpdate=!0,d=b,h=b.version,f=e.toneMapping),u.layers.enableAll(),v.unshift(u,u.geometry,u.material,0,0,null)):b&&b.isTexture&&(c===void 0&&(c=new Yr(new Pu(2,2),new er({name:"BackgroundMaterial",uniforms:cv(tc.background.uniforms),vertexShader:tc.background.vertexShader,fragmentShader:tc.background.fragmentShader,side:_l,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(c)),c.material.uniforms.t2D.value=b,c.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,c.material.toneMapped=b.encoding!==Ei,b.matrixAutoUpdate===!0&&b.updateMatrix(),c.material.uniforms.uvTransform.value.copy(b.matrix),(d!==b||h!==b.version||f!==e.toneMapping)&&(c.material.needsUpdate=!0,d=b,h=b.version,f=e.toneMapping),c.layers.enableAll(),v.unshift(c,c.geometry,c.material,0,0,null))}function m(v,y){v.getRGB(mb,tj(e)),r.buffers.color.setClear(mb.r,mb.g,mb.b,y,s)}return{getClearColor:function(){return o},setClearColor:function(v,y=1){o.set(v),l=y,m(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(v){l=v,m(o,l)},render:p}}function xde(e,t,i,r){let n=e.getParameter(34921),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),s=r.isWebGL2||a!==null,o={},l=v(null),c=l,u=!1;function d(k,L,R,N,I){let B=!1;if(s){let z=m(N,R,L);c!==z&&(c=z,f(c.object)),B=y(k,N,R,I),B&&x(k,N,R,I)}else{let z=L.wireframe===!0;(c.geometry!==N.id||c.program!==R.id||c.wireframe!==z)&&(c.geometry=N.id,c.program=R.id,c.wireframe=z,B=!0)}I!==null&&i.update(I,34963),(B||u)&&(u=!1,C(k,L,R,N),I!==null&&e.bindBuffer(34963,i.get(I).buffer))}function h(){return r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()}function f(k){return r.isWebGL2?e.bindVertexArray(k):a.bindVertexArrayOES(k)}function p(k){return r.isWebGL2?e.deleteVertexArray(k):a.deleteVertexArrayOES(k)}function m(k,L,R){let N=R.wireframe===!0,I=o[k.id];I===void 0&&(I={},o[k.id]=I);let B=I[L.id];B===void 0&&(B={},I[L.id]=B);let z=B[N];return z===void 0&&(z=v(h()),B[N]=z),z}function v(k){let L=[],R=[],N=[];for(let I=0;I<n;I++)L[I]=0,R[I]=0,N[I]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:L,enabledAttributes:R,attributeDivisors:N,object:k,attributes:{},index:null}}function y(k,L,R,N){let I=c.attributes,B=L.attributes,z=0,V=R.getAttributes();for(let W in V)if(V[W].location>=0){let G=I[W],q=B[W];if(q===void 0&&(W==="instanceMatrix"&&k.instanceMatrix&&(q=k.instanceMatrix),W==="instanceColor"&&k.instanceColor&&(q=k.instanceColor)),G===void 0||G.attribute!==q||q&&G.data!==q.data)return!0;z++}return c.attributesNum!==z||c.index!==N}function x(k,L,R,N){let I={},B=L.attributes,z=0,V=R.getAttributes();for(let W in V)if(V[W].location>=0){let G=B[W];G===void 0&&(W==="instanceMatrix"&&k.instanceMatrix&&(G=k.instanceMatrix),W==="instanceColor"&&k.instanceColor&&(G=k.instanceColor));let q={};q.attribute=G,G&&G.data&&(q.data=G.data),I[W]=q,z++}c.attributes=I,c.attributesNum=z,c.index=N}function b(){let k=c.newAttributes;for(let L=0,R=k.length;L<R;L++)k[L]=0}function w(k){S(k,0)}function S(k,L){let R=c.newAttributes,N=c.enabledAttributes,I=c.attributeDivisors;R[k]=1,N[k]===0&&(e.enableVertexAttribArray(k),N[k]=1),I[k]!==L&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](k,L),I[k]=L)}function _(){let k=c.newAttributes,L=c.enabledAttributes;for(let R=0,N=L.length;R<N;R++)L[R]!==k[R]&&(e.disableVertexAttribArray(R),L[R]=0)}function E(k,L,R,N,I,B){r.isWebGL2===!0&&(R===5124||R===5125)?e.vertexAttribIPointer(k,L,R,I,B):e.vertexAttribPointer(k,L,R,N,I,B)}function C(k,L,R,N){if(r.isWebGL2===!1&&(k.isInstancedMesh||N.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;b();let I=N.attributes,B=R.getAttributes(),z=L.defaultAttributeValues;for(let V in B){let W=B[V];if(W.location>=0){let G=I[V];if(G===void 0&&(V==="instanceMatrix"&&k.instanceMatrix&&(G=k.instanceMatrix),V==="instanceColor"&&k.instanceColor&&(G=k.instanceColor)),G!==void 0){let q=G.normalized,ae=G.itemSize,J=i.get(G);if(J===void 0)continue;let $=J.buffer,te=J.type,Q=J.bytesPerElement;if(G.isInterleavedBufferAttribute){let pe=G.data,me=pe.stride,le=G.offset;if(pe.isInstancedInterleavedBuffer){for(let Z=0;Z<W.locationSize;Z++)S(W.location+Z,pe.meshPerAttribute);k.isInstancedMesh!==!0&&N._maxInstanceCount===void 0&&(N._maxInstanceCount=pe.meshPerAttribute*pe.count)}else for(let Z=0;Z<W.locationSize;Z++)w(W.location+Z);e.bindBuffer(34962,$);for(let Z=0;Z<W.locationSize;Z++)E(W.location+Z,ae/W.locationSize,te,q,me*Q,(le+ae/W.locationSize*Z)*Q)}else{if(G.isInstancedBufferAttribute){for(let pe=0;pe<W.locationSize;pe++)S(W.location+pe,G.meshPerAttribute);k.isInstancedMesh!==!0&&N._maxInstanceCount===void 0&&(N._maxInstanceCount=G.meshPerAttribute*G.count)}else for(let pe=0;pe<W.locationSize;pe++)w(W.location+pe);e.bindBuffer(34962,$);for(let pe=0;pe<W.locationSize;pe++)E(W.location+pe,ae/W.locationSize,te,q,ae*Q,ae/W.locationSize*pe*Q)}}else if(z!==void 0){let q=z[V];if(q!==void 0)switch(q.length){case 2:e.vertexAttrib2fv(W.location,q);break;case 3:e.vertexAttrib3fv(W.location,q);break;case 4:e.vertexAttrib4fv(W.location,q);break;default:e.vertexAttrib1fv(W.location,q)}}}}_()}function A(){P();for(let k in o){let L=o[k];for(let R in L){let N=L[R];for(let I in N)p(N[I].object),delete N[I];delete L[R]}delete o[k]}}function M(k){if(o[k.id]===void 0)return;let L=o[k.id];for(let R in L){let N=L[R];for(let I in N)p(N[I].object),delete N[I];delete L[R]}delete o[k.id]}function T(k){for(let L in o){let R=o[L];if(R[k.id]===void 0)continue;let N=R[k.id];for(let I in N)p(N[I].object),delete N[I];delete R[k.id]}}function P(){D(),u=!0,c!==l&&(c=l,f(c.object))}function D(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:P,resetDefaultState:D,dispose:A,releaseStatesOfGeometry:M,releaseStatesOfProgram:T,initAttributes:b,enableAttribute:w,disableUnusedAttributes:_}}function _de(e,t,i,r){let n=r.isWebGL2,a;function s(c){a=c}function o(c,u){e.drawArrays(a,c,u),i.update(u,a,1)}function l(c,u,d){if(d===0)return;let h,f;if(n)h=e,f="drawArraysInstanced";else if(h=t.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[f](a,c,u,d),i.update(u,a,d)}this.setMode=s,this.render=o,this.renderInstances=l}function Sde(e,t,i){let r;function n(){if(r!==void 0)return r;if(t.has("EXT_texture_filter_anisotropic")===!0){let E=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(E){if(E==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";E="mediump"}return E==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let s=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext,o=i.precision!==void 0?i.precision:"highp",l=a(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);let c=s||t.has("WEBGL_draw_buffers"),u=i.logarithmicDepthBuffer===!0,d=e.getParameter(34930),h=e.getParameter(35660),f=e.getParameter(3379),p=e.getParameter(34076),m=e.getParameter(34921),v=e.getParameter(36347),y=e.getParameter(36348),x=e.getParameter(36349),b=h>0,w=s||t.has("OES_texture_float"),S=b&&w,_=s?e.getParameter(36183):0;return{isWebGL2:s,drawBuffers:c,getMaxAnisotropy:n,getMaxPrecision:a,precision:o,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:v,maxVaryings:y,maxFragmentUniforms:x,vertexTextures:b,floatFragmentTextures:w,floatVertexTextures:S,maxSamples:_}}function Cde(e){let t=this,i=null,r=0,n=!1,a=!1,s=new As,o=new An,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){let f=d.length!==0||h||r!==0||n;return n=h,r=d.length,f},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(d,h){i=u(d,h,0)},this.setState=function(d,h,f){let p=d.clippingPlanes,m=d.clipIntersection,v=d.clipShadows,y=e.get(d);if(!n||p===null||p.length===0||a&&!v)a?u(null):c();else{let x=a?0:r,b=x*4,w=y.clippingState||null;l.value=w,w=u(p,h,b,f);for(let S=0;S!==b;++S)w[S]=i[S];y.clippingState=w,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=x}};function c(){l.value!==i&&(l.value=i,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function u(d,h,f,p){let m=d!==null?d.length:0,v=null;if(m!==0){if(v=l.value,p!==!0||v===null){let y=f+m*4,x=h.matrixWorldInverse;o.getNormalMatrix(x),(v===null||v.length<y)&&(v=new Float32Array(y));for(let b=0,w=f;b!==m;++b,w+=4)s.copy(d[b]).applyMatrix4(x,o),s.normal.toArray(v,w),v[w+3]=s.constant}l.value=v,l.needsUpdate=!0}return t.numPlanes=m,t.numIntersection=0,v}}function Ede(e){let t=new WeakMap;function i(s,o){return o===tA?s.mapping=Vf:o===iA&&(s.mapping=Uf),s}function r(s){if(s&&s.isTexture&&s.isRenderTargetTexture===!1){let o=s.mapping;if(o===tA||o===iA)if(t.has(s)){let l=t.get(s).texture;return i(l,s.mapping)}else{let l=s.image;if(l&&l.height>0){let c=new Fle(l.height/2);return c.fromEquirectangularTexture(e,s),t.set(s,c),s.addEventListener("dispose",n),i(c.texture,s.mapping)}else return null}}return s}function n(s){let o=s.target;o.removeEventListener("dispose",n);let l=t.get(o);l!==void 0&&(t.delete(o),l.dispose())}function a(){t=new WeakMap}return{get:r,dispose:a}}var G_=class extends ap{constructor(e=-1,t=1,i=1,r=-1,n=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=n,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,n,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,n=i-e,a=i+e,s=r+t,o=r-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;n+=l*this.view.offsetX,a=n+l*this.view.width,s-=c*this.view.offsetY,o=s-c*this.view.height}this.projectionMatrix.makeOrthographic(n,a,s,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},xm=4,pk=[.125,.215,.35,.446,.526,.582],nf=20,aC=new G_,mk=new ii,sC=null,Qh=(1+Math.sqrt(5))/2,Op=1/Qh,vk=[new H(1,1,1),new H(-1,1,1),new H(1,1,-1),new H(-1,1,-1),new H(0,Qh,Op),new H(0,Qh,-Op),new H(Op,0,Qh),new H(-Op,0,Qh),new H(Qh,Op,0),new H(-Qh,Op,0)],gk=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){sC=this._renderer.getRenderTarget(),this._setSize(256);let n=this._allocateTargets();return n.depthBuffer=!0,this._sceneToCubeUV(e,i,r,n),t>0&&this._blur(n,0,0,t),this._applyPMREM(n),this._cleanup(n),n}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=wk(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=bk(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(sC),e.scissorTest=!1,vb(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Vf||e.mapping===Uf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),sC=this._renderer.getRenderTarget();let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Ti,minFilter:Ti,generateMipmaps:!1,type:Mu,format:ra,encoding:Sl,depthBuffer:!1},r=yk(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=yk(e,t,i);let{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Ade(n)),this._blurMaterial=Mde(n,e,t)}return r}_compileMaterial(e){let t=new Yr(this._lodPlanes[0],e);this._renderer.compile(t,aC)}_sceneToCubeUV(e,t,i,r){let n=new Ba(90,1,t,i),a=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.toneMapping;o.getClearColor(mk),o.toneMapping=dc,o.autoClear=!1;let u=new Tu({name:"PMREM.Background",side:aa,depthWrite:!1,depthTest:!1}),d=new Yr(new Cl,u),h=!1,f=e.background;f?f.isColor&&(u.color.copy(f),e.background=null,h=!0):(u.color.copy(mk),h=!0);for(let p=0;p<6;p++){let m=p%3;m===0?(n.up.set(0,a[p],0),n.lookAt(s[p],0,0)):m===1?(n.up.set(0,0,a[p]),n.lookAt(0,s[p],0)):(n.up.set(0,a[p],0),n.lookAt(0,0,s[p]));let v=this._cubeSize;vb(r,m*v,p>2?v:0,v,v),o.setRenderTarget(r),h&&o.render(d,n),o.render(e,n)}d.geometry.dispose(),d.material.dispose(),o.toneMapping=c,o.autoClear=l,e.background=f}_textureToCubeUV(e,t){let i=this._renderer,r=e.mapping===Vf||e.mapping===Uf;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=wk()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=bk());let n=r?this._cubemapMaterial:this._equirectMaterial,a=new Yr(this._lodPlanes[0],n),s=n.uniforms;s.envMap.value=e;let o=this._cubeSize;vb(t,0,0,3*o,2*o),i.setRenderTarget(t),i.render(a,aC)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){let n=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=vk[(r-1)%vk.length];this._blur(e,r-1,r,n,a)}t.autoClear=i}_blur(e,t,i,r,n){let a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",n),this._halfBlur(a,e,i,i,r,"longitudinal",n)}_halfBlur(e,t,i,r,n,a,s){let o=this._renderer,l=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let c=3,u=new Yr(this._lodPlanes[r],l),d=l.uniforms,h=this._sizeLods[i]-1,f=isFinite(n)?Math.PI/(2*h):2*Math.PI/(2*nf-1),p=n/f,m=isFinite(n)?1+Math.floor(c*p):nf;m>nf&&console.warn(`sigmaRadians, ${n}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${nf}`);let v=[],y=0;for(let _=0;_<nf;++_){let E=_/p,C=Math.exp(-E*E/2);v.push(C),_===0?y+=C:_<m&&(y+=2*C)}for(let _=0;_<v.length;_++)v[_]=v[_]/y;d.envMap.value=e.texture,d.samples.value=m,d.weights.value=v,d.latitudinal.value=a==="latitudinal",s&&(d.poleAxis.value=s);let{_lodMax:x}=this;d.dTheta.value=f,d.mipInt.value=x-i;let b=this._sizeLods[r],w=3*b*(r>x-xm?r-x+xm:0),S=4*(this._cubeSize-b);vb(t,w,S,3*b,2*b),o.setRenderTarget(t),o.render(u,aC)}};function Ade(e){let t=[],i=[],r=[],n=e,a=e-xm+1+pk.length;for(let s=0;s<a;s++){let o=Math.pow(2,n);i.push(o);let l=1/o;s>e-xm?l=pk[s-e+xm-1]:s===0&&(l=0),r.push(l);let c=1/(o-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,p=6,m=3,v=2,y=1,x=new Float32Array(m*p*f),b=new Float32Array(v*p*f),w=new Float32Array(y*p*f);for(let _=0;_<f;_++){let E=_%3*2/3-1,C=_>2?0:-1,A=[E,C,0,E+2/3,C,0,E+2/3,C+1,0,E,C,0,E+2/3,C+1,0,E,C+1,0];x.set(A,m*p*_),b.set(h,v*p*_);let M=[_,_,_,_,_,_];w.set(M,y*p*_)}let S=new Kt;S.setAttribute("position",new ui(x,m)),S.setAttribute("uv",new ui(b,v)),S.setAttribute("faceIndex",new ui(w,y)),t.push(S),n>xm&&n--}return{lodPlanes:t,sizeLods:i,sigmas:r}}function yk(e,t,i){let r=new ir(e,t,i);return r.texture.mapping=ty,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function vb(e,t,i,r,n){e.viewport.set(t,i,r,n),e.scissor.set(t,i,r,n)}function Mde(e,t,i){let r=new Float32Array(nf),n=new H(0,1,0);return new er({name:"SphericalGaussianBlur",defines:{n:nf,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:rP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Mn,depthTest:!1,depthWrite:!1})}function bk(){return new er({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:rP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Mn,depthTest:!1,depthWrite:!1})}function wk(){return new er({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:rP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Mn,depthTest:!1,depthWrite:!1})}function rP(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Tde(e){let t=new WeakMap,i=null;function r(o){if(o&&o.isTexture){let l=o.mapping,c=l===tA||l===iA,u=l===Vf||l===Uf;if(c||u)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let d=t.get(o);return i===null&&(i=new gk(e)),d=c?i.fromEquirectangular(o,d):i.fromCubemap(o,d),t.set(o,d),d.texture}else{if(t.has(o))return t.get(o).texture;{let d=o.image;if(c&&d&&d.height>0||u&&d&&n(d)){i===null&&(i=new gk(e));let h=c?i.fromEquirectangular(o):i.fromCubemap(o);return t.set(o,h),o.addEventListener("dispose",a),h.texture}else return null}}}return o}function n(o){let l=0,c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function a(o){let l=o.target;l.removeEventListener("dispose",a);let c=t.get(l);c!==void 0&&(t.delete(l),c.dispose())}function s(){t=new WeakMap,i!==null&&(i.dispose(),i=null)}return{get:r,dispose:s}}function Pde(e){let t={};function i(r){if(t[r]!==void 0)return t[r];let n;switch(r){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(r)}return t[r]=n,n}return{has:function(r){return i(r)!==null},init:function(r){r.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture")},get:function(r){let n=i(r);return n===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),n}}}function Dde(e,t,i,r){let n={},a=new WeakMap;function s(d){let h=d.target;h.index!==null&&t.remove(h.index);for(let p in h.attributes)t.remove(h.attributes[p]);h.removeEventListener("dispose",s),delete n[h.id];let f=a.get(h);f&&(t.remove(f),a.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,i.memory.geometries--}function o(d,h){return n[h.id]===!0||(h.addEventListener("dispose",s),n[h.id]=!0,i.memory.geometries++),h}function l(d){let h=d.attributes;for(let p in h)t.update(h[p],34962);let f=d.morphAttributes;for(let p in f){let m=f[p];for(let v=0,y=m.length;v<y;v++)t.update(m[v],34962)}}function c(d){let h=[],f=d.index,p=d.attributes.position,m=0;if(f!==null){let x=f.array;m=f.version;for(let b=0,w=x.length;b<w;b+=3){let S=x[b+0],_=x[b+1],E=x[b+2];h.push(S,_,_,E,E,S)}}else{let x=p.array;m=p.version;for(let b=0,w=x.length/3-1;b<w;b+=3){let S=b+0,_=b+1,E=b+2;h.push(S,_,_,E,E,S)}}let v=new(YH(h)?Bm:ej)(h,1);v.version=m;let y=a.get(d);y&&t.remove(y),a.set(d,v)}function u(d){let h=a.get(d);if(h){let f=d.index;f!==null&&h.version<f.version&&c(d)}else c(d);return a.get(d)}return{get:o,update:l,getWireframeAttribute:u}}function Ide(e,t,i,r){let n=r.isWebGL2,a;function s(h){a=h}let o,l;function c(h){o=h.type,l=h.bytesPerElement}function u(h,f){e.drawElements(a,f,o,h*l),i.update(f,a,1)}function d(h,f,p){if(p===0)return;let m,v;if(n)m=e,v="drawElementsInstanced";else if(m=t.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[v](a,f,o,h*l,p),i.update(f,a,p)}this.setMode=s,this.setIndex=c,this.render=u,this.renderInstances=d}function Ode(e){let t={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,s,o){switch(i.calls++,s){case 4:i.triangles+=o*(a/3);break;case 1:i.lines+=o*(a/2);break;case 3:i.lines+=o*(a-1);break;case 2:i.lines+=o*a;break;case 0:i.points+=o*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function n(){i.frame++,i.calls=0,i.triangles=0,i.points=0,i.lines=0}return{memory:t,render:i,programs:null,autoReset:!0,reset:n,update:r}}function Rde(e,t){return e[0]-t[0]}function kde(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Lde(e,t,i){let r={},n=new Float32Array(8),a=new WeakMap,s=new vi,o=[];for(let c=0;c<8;c++)o[c]=[c,0];function l(c,u,d,h){let f=c.morphTargetInfluences;if(t.isWebGL2===!0){let p=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,m=p!==void 0?p.length:0,v=a.get(u);if(v===void 0||v.count!==m){let b=function(){k.dispose(),a.delete(u),u.removeEventListener("dispose",b)};v!==void 0&&v.texture.dispose();let w=u.morphAttributes.position!==void 0,S=u.morphAttributes.normal!==void 0,_=u.morphAttributes.color!==void 0,E=u.morphAttributes.position||[],C=u.morphAttributes.normal||[],A=u.morphAttributes.color||[],M=0;w===!0&&(M=1),S===!0&&(M=2),_===!0&&(M=3);let T=u.attributes.position.count*M,P=1;T>t.maxTextureSize&&(P=Math.ceil(T/t.maxTextureSize),T=t.maxTextureSize);let D=new Float32Array(T*P*4*m),k=new JH(D,T,P,m);k.type=En,k.needsUpdate=!0;let L=M*4;for(let R=0;R<m;R++){let N=E[R],I=C[R],B=A[R],z=T*P*4*R;for(let V=0;V<N.count;V++){let W=V*L;w===!0&&(s.fromBufferAttribute(N,V),D[z+W+0]=s.x,D[z+W+1]=s.y,D[z+W+2]=s.z,D[z+W+3]=0),S===!0&&(s.fromBufferAttribute(I,V),D[z+W+4]=s.x,D[z+W+5]=s.y,D[z+W+6]=s.z,D[z+W+7]=0),_===!0&&(s.fromBufferAttribute(B,V),D[z+W+8]=s.x,D[z+W+9]=s.y,D[z+W+10]=s.z,D[z+W+11]=B.itemSize===4?s.w:1)}}v={count:m,texture:k,size:new Pe(T,P)},a.set(u,v),u.addEventListener("dispose",b)}let y=0;for(let b=0;b<f.length;b++)y+=f[b];let x=u.morphTargetsRelative?1:1-y;h.getUniforms().setValue(e,"morphTargetBaseInfluence",x),h.getUniforms().setValue(e,"morphTargetInfluences",f),h.getUniforms().setValue(e,"morphTargetsTexture",v.texture,i),h.getUniforms().setValue(e,"morphTargetsTextureSize",v.size)}else{let p=f===void 0?0:f.length,m=r[u.id];if(m===void 0||m.length!==p){m=[];for(let w=0;w<p;w++)m[w]=[w,0];r[u.id]=m}for(let w=0;w<p;w++){let S=m[w];S[0]=w,S[1]=f[w]}m.sort(kde);for(let w=0;w<8;w++)w<p&&m[w][1]?(o[w][0]=m[w][0],o[w][1]=m[w][1]):(o[w][0]=Number.MAX_SAFE_INTEGER,o[w][1]=0);o.sort(Rde);let v=u.morphAttributes.position,y=u.morphAttributes.normal,x=0;for(let w=0;w<8;w++){let S=o[w],_=S[0],E=S[1];_!==Number.MAX_SAFE_INTEGER&&E?(v&&u.getAttribute("morphTarget"+w)!==v[_]&&u.setAttribute("morphTarget"+w,v[_]),y&&u.getAttribute("morphNormal"+w)!==y[_]&&u.setAttribute("morphNormal"+w,y[_]),n[w]=E,x+=E):(v&&u.hasAttribute("morphTarget"+w)===!0&&u.deleteAttribute("morphTarget"+w),y&&u.hasAttribute("morphNormal"+w)===!0&&u.deleteAttribute("morphNormal"+w),n[w]=0)}let b=u.morphTargetsRelative?1:1-x;h.getUniforms().setValue(e,"morphTargetBaseInfluence",b),h.getUniforms().setValue(e,"morphTargetInfluences",n)}}return{update:l}}function Bde(e,t,i,r){let n=new WeakMap;function a(l){let c=r.render.frame,u=l.geometry,d=t.get(l,u);return n.get(d)!==c&&(t.update(d),n.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.update(l.instanceMatrix,34962),l.instanceColor!==null&&i.update(l.instanceColor,34962)),d}function s(){n=new WeakMap}function o(l){let c=l.target;c.removeEventListener("dispose",o),i.remove(c.instanceMatrix),c.instanceColor!==null&&i.remove(c.instanceColor)}return{update:a,dispose:s}}var rj=new Kr,nj=new JH,aj=new _le,sj=new tP,xk=[],_k=[],Sk=new Float32Array(16),Ck=new Float32Array(9),Ek=new Float32Array(4);function Hv(e,t,i){let r=e[0];if(r<=0||r>0)return e;let n=t*i,a=xk[n];if(a===void 0&&(a=new Float32Array(n),xk[n]=a),t!==0){r.toArray(a,0);for(let s=1,o=0;s!==t;++s)o+=i,e[s].toArray(a,o)}return a}function $n(e,t){if(e.length!==t.length)return!1;for(let i=0,r=e.length;i<r;i++)if(e[i]!==t[i])return!1;return!0}function Zn(e,t){for(let i=0,r=t.length;i<r;i++)e[i]=t[i]}function $_(e,t){let i=_k[t];i===void 0&&(i=new Int32Array(t),_k[t]=i);for(let r=0;r!==t;++r)i[r]=e.allocateTextureUnit();return i}function Nde(e,t){let i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function Fde(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if($n(i,t))return;e.uniform2fv(this.addr,t),Zn(i,t)}}function zde(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(t.r!==void 0)(i[0]!==t.r||i[1]!==t.g||i[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if($n(i,t))return;e.uniform3fv(this.addr,t),Zn(i,t)}}function Vde(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if($n(i,t))return;e.uniform4fv(this.addr,t),Zn(i,t)}}function Ude(e,t){let i=this.cache,r=t.elements;if(r===void 0){if($n(i,t))return;e.uniformMatrix2fv(this.addr,!1,t),Zn(i,t)}else{if($n(i,r))return;Ek.set(r),e.uniformMatrix2fv(this.addr,!1,Ek),Zn(i,r)}}function Hde(e,t){let i=this.cache,r=t.elements;if(r===void 0){if($n(i,t))return;e.uniformMatrix3fv(this.addr,!1,t),Zn(i,t)}else{if($n(i,r))return;Ck.set(r),e.uniformMatrix3fv(this.addr,!1,Ck),Zn(i,r)}}function jde(e,t){let i=this.cache,r=t.elements;if(r===void 0){if($n(i,t))return;e.uniformMatrix4fv(this.addr,!1,t),Zn(i,t)}else{if($n(i,r))return;Sk.set(r),e.uniformMatrix4fv(this.addr,!1,Sk),Zn(i,r)}}function Wde(e,t){let i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function Gde(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if($n(i,t))return;e.uniform2iv(this.addr,t),Zn(i,t)}}function $de(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if($n(i,t))return;e.uniform3iv(this.addr,t),Zn(i,t)}}function Zde(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if($n(i,t))return;e.uniform4iv(this.addr,t),Zn(i,t)}}function qde(e,t){let i=this.cache;i[0]!==t&&(e.uniform1ui(this.addr,t),i[0]=t)}function Yde(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if($n(i,t))return;e.uniform2uiv(this.addr,t),Zn(i,t)}}function Kde(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if($n(i,t))return;e.uniform3uiv(this.addr,t),Zn(i,t)}}function Xde(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if($n(i,t))return;e.uniform4uiv(this.addr,t),Zn(i,t)}}function Qde(e,t,i){let r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTexture2D(t||rj,n)}function Jde(e,t,i){let r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTexture3D(t||aj,n)}function ehe(e,t,i){let r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTextureCube(t||sj,n)}function the(e,t,i){let r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTexture2DArray(t||nj,n)}function ihe(e){switch(e){case 5126:return Nde;case 35664:return Fde;case 35665:return zde;case 35666:return Vde;case 35674:return Ude;case 35675:return Hde;case 35676:return jde;case 5124:case 35670:return Wde;case 35667:case 35671:return Gde;case 35668:case 35672:return $de;case 35669:case 35673:return Zde;case 5125:return qde;case 36294:return Yde;case 36295:return Kde;case 36296:return Xde;case 35678:case 36198:case 36298:case 36306:case 35682:return Qde;case 35679:case 36299:case 36307:return Jde;case 35680:case 36300:case 36308:case 36293:return ehe;case 36289:case 36303:case 36311:case 36292:return the}}function rhe(e,t){e.uniform1fv(this.addr,t)}function nhe(e,t){let i=Hv(t,this.size,2);e.uniform2fv(this.addr,i)}function ahe(e,t){let i=Hv(t,this.size,3);e.uniform3fv(this.addr,i)}function she(e,t){let i=Hv(t,this.size,4);e.uniform4fv(this.addr,i)}function ohe(e,t){let i=Hv(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,i)}function lhe(e,t){let i=Hv(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,i)}function che(e,t){let i=Hv(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,i)}function uhe(e,t){e.uniform1iv(this.addr,t)}function dhe(e,t){e.uniform2iv(this.addr,t)}function hhe(e,t){e.uniform3iv(this.addr,t)}function fhe(e,t){e.uniform4iv(this.addr,t)}function phe(e,t){e.uniform1uiv(this.addr,t)}function mhe(e,t){e.uniform2uiv(this.addr,t)}function vhe(e,t){e.uniform3uiv(this.addr,t)}function ghe(e,t){e.uniform4uiv(this.addr,t)}function yhe(e,t,i){let r=this.cache,n=t.length,a=$_(i,n);$n(r,a)||(e.uniform1iv(this.addr,a),Zn(r,a));for(let s=0;s!==n;++s)i.setTexture2D(t[s]||rj,a[s])}function bhe(e,t,i){let r=this.cache,n=t.length,a=$_(i,n);$n(r,a)||(e.uniform1iv(this.addr,a),Zn(r,a));for(let s=0;s!==n;++s)i.setTexture3D(t[s]||aj,a[s])}function whe(e,t,i){let r=this.cache,n=t.length,a=$_(i,n);$n(r,a)||(e.uniform1iv(this.addr,a),Zn(r,a));for(let s=0;s!==n;++s)i.setTextureCube(t[s]||sj,a[s])}function xhe(e,t,i){let r=this.cache,n=t.length,a=$_(i,n);$n(r,a)||(e.uniform1iv(this.addr,a),Zn(r,a));for(let s=0;s!==n;++s)i.setTexture2DArray(t[s]||nj,a[s])}function _he(e){switch(e){case 5126:return rhe;case 35664:return nhe;case 35665:return ahe;case 35666:return she;case 35674:return ohe;case 35675:return lhe;case 35676:return che;case 5124:case 35670:return uhe;case 35667:case 35671:return dhe;case 35668:case 35672:return hhe;case 35669:case 35673:return fhe;case 5125:return phe;case 36294:return mhe;case 36295:return vhe;case 36296:return ghe;case 35678:case 36198:case 36298:case 36306:case 35682:return yhe;case 35679:case 36299:case 36307:return bhe;case 35680:case 36300:case 36308:case 36293:return whe;case 36289:case 36303:case 36311:case 36292:return xhe}}var She=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=ihe(t.type)}},Che=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=_he(t.type)}},Ehe=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){let r=this.seq;for(let n=0,a=r.length;n!==a;++n){let s=r[n];s.setValue(e,t[s.id],i)}}},oC=/(\w+)(\])?(\[|\.)?/g;function Ak(e,t){e.seq.push(t),e.map[t.id]=t}function Ahe(e,t,i){let r=e.name,n=r.length;for(oC.lastIndex=0;;){let a=oC.exec(r),s=oC.lastIndex,o=a[1],l=a[2]==="]",c=a[3];if(l&&(o=o|0),c===void 0||c==="["&&s+2===n){Ak(i,c===void 0?new She(o,e,t):new Che(o,e,t));break}else{let u=i.map[o];u===void 0&&(u=new Ehe(o),Ak(i,u)),i=u}}}var $w=class{constructor(e,t){this.seq=[],this.map={};let i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){let n=e.getActiveUniform(t,r),a=e.getUniformLocation(t,n.name);Ahe(n,a,this)}}setValue(e,t,i,r){let n=this.map[t];n!==void 0&&n.setValue(e,i,r)}setOptional(e,t,i){let r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let n=0,a=t.length;n!==a;++n){let s=t[n],o=i[s.id];o.needsUpdate!==!1&&s.setValue(e,o.value,r)}}static seqWithValue(e,t){let i=[];for(let r=0,n=e.length;r!==n;++r){let a=e[r];a.id in t&&i.push(a)}return i}};function Mk(e,t,i){let r=e.createShader(t);return e.shaderSource(r,i),e.compileShader(r),r}var Mhe=0;function The(e,t){let i=e.split(`
`),r=[],n=Math.max(t-6,0),a=Math.min(t+6,i.length);for(let s=n;s<a;s++){let o=s+1;r.push(`${o===t?">":" "} ${o}: ${i[s]}`)}return r.join(`
`)}function Phe(e){switch(e){case Sl:return["Linear","( value )"];case Ei:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function Tk(e,t,i){let r=e.getShaderParameter(t,35713),n=e.getShaderInfoLog(t).trim();if(r&&n==="")return"";let a=/ERROR: 0:(\d+)/.exec(n);if(a){let s=parseInt(a[1]);return i.toUpperCase()+`

`+n+`

`+The(e.getShaderSource(t),s)}else return n}function Dhe(e,t){let i=Phe(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function Ihe(e,t){let i;switch(t){case Noe:i="Linear";break;case Foe:i="Reinhard";break;case zoe:i="OptimizedCineon";break;case Voe:i="ACESFilmic";break;case Uoe:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function Ohe(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ag).join(`
`)}function Rhe(e){let t=[];for(let i in e){let r=e[i];r!==!1&&t.push("#define "+i+" "+r)}return t.join(`
`)}function khe(e,t){let i={},r=e.getProgramParameter(t,35721);for(let n=0;n<r;n++){let a=e.getActiveAttrib(t,n),s=a.name,o=1;a.type===35674&&(o=2),a.type===35675&&(o=3),a.type===35676&&(o=4),i[s]={type:a.type,location:e.getAttribLocation(t,s),locationSize:o}}return i}function ag(e){return e!==""}function Pk(e,t){let i=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Dk(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Lhe=/^[ \t]*#include +<([\w\d./]+)>/gm;function oA(e){return e.replace(Lhe,Bhe)}function Bhe(e,t){let i=Mi[t];if(i===void 0)throw new Error("Can not resolve #include <"+t+">");return oA(i)}var Nhe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ik(e){return e.replace(Nhe,Fhe)}function Fhe(e,t,i,r){let n="";for(let a=parseInt(t);a<parseInt(i);a++)n+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return n}function Ok(e){let t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function zhe(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===K5?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===moe?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===ng&&(t="SHADOWMAP_TYPE_VSM"),t}function Vhe(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Vf:case Uf:t="ENVMAP_TYPE_CUBE";break;case ty:t="ENVMAP_TYPE_CUBE_UV";break}return t}function Uhe(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case Uf:t="ENVMAP_MODE_REFRACTION";break}return t}function Hhe(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case UH:t="ENVMAP_BLENDING_MULTIPLY";break;case Loe:t="ENVMAP_BLENDING_MIX";break;case Boe:t="ENVMAP_BLENDING_ADD";break}return t}function jhe(e){let t=e.envMapCubeUVHeight;if(t===null)return null;let i=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,i),7*16)),texelHeight:r,maxMip:i}}function Whe(e,t,i,r){let n=e.getContext(),a=i.defines,s=i.vertexShader,o=i.fragmentShader,l=zhe(i),c=Vhe(i),u=Uhe(i),d=Hhe(i),h=jhe(i),f=i.isWebGL2?"":Ohe(i),p=Rhe(a),m=n.createProgram(),v,y,x=i.glslVersion?"#version "+i.glslVersion+`
`:"";i.isRawShaderMaterial?(v=[p].filter(ag).join(`
`),v.length>0&&(v+=`
`),y=[f,p].filter(ag).join(`
`),y.length>0&&(y+=`
`)):(v=[Ok(i),"#define SHADER_NAME "+i.shaderName,p,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+u:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.morphColors&&i.isWebGL2?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ag).join(`
`),y=[f,Ok(i),"#define SHADER_NAME "+i.shaderName,p,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+c:"",i.envMap?"#define "+u:"",i.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==dc?"#define TONE_MAPPING":"",i.toneMapping!==dc?Mi.tonemapping_pars_fragment:"",i.toneMapping!==dc?Ihe("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",Mi.encodings_pars_fragment,Dhe("linearToOutputTexel",i.outputEncoding),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter(ag).join(`
`)),s=oA(s),s=Pk(s,i),s=Dk(s,i),o=oA(o),o=Pk(o,i),o=Dk(o,i),s=Ik(s),o=Ik(o),i.isWebGL2&&i.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,y=["#define varying in",i.glslVersion===ik?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===ik?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);let b=x+v+s,w=x+y+o,S=Mk(n,35633,b),_=Mk(n,35632,w);if(n.attachShader(m,S),n.attachShader(m,_),i.index0AttributeName!==void 0?n.bindAttribLocation(m,0,i.index0AttributeName):i.morphTargets===!0&&n.bindAttribLocation(m,0,"position"),n.linkProgram(m),e.debug.checkShaderErrors){let A=n.getProgramInfoLog(m).trim(),M=n.getShaderInfoLog(S).trim(),T=n.getShaderInfoLog(_).trim(),P=!0,D=!0;if(n.getProgramParameter(m,35714)===!1){P=!1;let k=Tk(n,S,"vertex"),L=Tk(n,_,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(m,35715)+`

Program Info Log: `+A+`
`+k+`
`+L)}else A!==""?console.warn("THREE.WebGLProgram: Program Info Log:",A):(M===""||T==="")&&(D=!1);D&&(this.diagnostics={runnable:P,programLog:A,vertexShader:{log:M,prefix:v},fragmentShader:{log:T,prefix:y}})}n.deleteShader(S),n.deleteShader(_);let E;this.getUniforms=function(){return E===void 0&&(E=new $w(n,m)),E};let C;return this.getAttributes=function(){return C===void 0&&(C=khe(n,m)),C},this.destroy=function(){r.releaseStatesOfProgram(this),n.deleteProgram(m),this.program=void 0},this.name=i.shaderName,this.id=Mhe++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=S,this.fragmentShader=_,this}var Ghe=0,$he=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),n=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(n)===!1&&(a.add(n),n.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){let t=this.shaderCache,i=t.get(e);return i===void 0&&(i=new Zhe(e),t.set(e,i)),i}},Zhe=class{constructor(e){this.id=Ghe++,this.code=e,this.usedTimes=0}};function qhe(e,t,i,r,n,a,s){let o=new eP,l=new $he,c=[],u=n.isWebGL2,d=n.logarithmicDepthBuffer,h=n.vertexTextures,f=n.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(C,A,M,T,P){let D=T.fog,k=P.geometry,L=C.isMeshStandardMaterial?T.environment:null,R=(C.isMeshStandardMaterial?i:t).get(C.envMap||L),N=R&&R.mapping===ty?R.image.height:null,I=p[C.type];C.precision!==null&&(f=n.getMaxPrecision(C.precision),f!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",f,"instead."));let B=k.morphAttributes.position||k.morphAttributes.normal||k.morphAttributes.color,z=B!==void 0?B.length:0,V=0;k.morphAttributes.position!==void 0&&(V=1),k.morphAttributes.normal!==void 0&&(V=2),k.morphAttributes.color!==void 0&&(V=3);let W,G,q,ae;if(I){let pe=tc[I];W=pe.vertexShader,G=pe.fragmentShader}else W=C.vertexShader,G=C.fragmentShader,l.update(C),q=l.getVertexShaderID(C),ae=l.getFragmentShaderID(C);let J=e.getRenderTarget(),$=C.alphaTest>0,te=C.clearcoat>0,Q=C.iridescence>0;return{isWebGL2:u,shaderID:I,shaderName:C.type,vertexShader:W,fragmentShader:G,defines:C.defines,customVertexShaderID:q,customFragmentShaderID:ae,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:f,instancing:P.isInstancedMesh===!0,instancingColor:P.isInstancedMesh===!0&&P.instanceColor!==null,supportsVertexTextures:h,outputEncoding:J===null?e.outputEncoding:J.isXRRenderTarget===!0?J.texture.encoding:Sl,map:!!C.map,matcap:!!C.matcap,envMap:!!R,envMapMode:R&&R.mapping,envMapCubeUVHeight:N,lightMap:!!C.lightMap,aoMap:!!C.aoMap,emissiveMap:!!C.emissiveMap,bumpMap:!!C.bumpMap,normalMap:!!C.normalMap,objectSpaceNormalMap:C.normalMapType===nle,tangentSpaceNormalMap:C.normalMapType===rle,decodeVideoTexture:!!C.map&&C.map.isVideoTexture===!0&&C.map.encoding===Ei,clearcoat:te,clearcoatMap:te&&!!C.clearcoatMap,clearcoatRoughnessMap:te&&!!C.clearcoatRoughnessMap,clearcoatNormalMap:te&&!!C.clearcoatNormalMap,iridescence:Q,iridescenceMap:Q&&!!C.iridescenceMap,iridescenceThicknessMap:Q&&!!C.iridescenceThicknessMap,displacementMap:!!C.displacementMap,roughnessMap:!!C.roughnessMap,metalnessMap:!!C.metalnessMap,specularMap:!!C.specularMap,specularIntensityMap:!!C.specularIntensityMap,specularColorMap:!!C.specularColorMap,opaque:C.transparent===!1&&C.blending===If,alphaMap:!!C.alphaMap,alphaTest:$,gradientMap:!!C.gradientMap,sheen:C.sheen>0,sheenColorMap:!!C.sheenColorMap,sheenRoughnessMap:!!C.sheenRoughnessMap,transmission:C.transmission>0,transmissionMap:!!C.transmissionMap,thicknessMap:!!C.thicknessMap,combine:C.combine,vertexTangents:!!C.normalMap&&!!k.attributes.tangent,vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!k.attributes.color&&k.attributes.color.itemSize===4,vertexUvs:!!C.map||!!C.bumpMap||!!C.normalMap||!!C.specularMap||!!C.alphaMap||!!C.emissiveMap||!!C.roughnessMap||!!C.metalnessMap||!!C.clearcoatMap||!!C.clearcoatRoughnessMap||!!C.clearcoatNormalMap||!!C.iridescenceMap||!!C.iridescenceThicknessMap||!!C.displacementMap||!!C.transmissionMap||!!C.thicknessMap||!!C.specularIntensityMap||!!C.specularColorMap||!!C.sheenColorMap||!!C.sheenRoughnessMap,uvsVertexOnly:!(C.map||C.bumpMap||C.normalMap||C.specularMap||C.alphaMap||C.emissiveMap||C.roughnessMap||C.metalnessMap||C.clearcoatNormalMap||C.iridescenceMap||C.iridescenceThicknessMap||C.transmission>0||C.transmissionMap||C.thicknessMap||C.specularIntensityMap||C.specularColorMap||C.sheen>0||C.sheenColorMap||C.sheenRoughnessMap)&&!!C.displacementMap,fog:!!D,useFog:C.fog===!0,fogExp2:D&&D.isFogExp2,flatShading:!!C.flatShading,sizeAttenuation:C.sizeAttenuation,logarithmicDepthBuffer:d,skinning:P.isSkinnedMesh===!0,morphTargets:k.morphAttributes.position!==void 0,morphNormals:k.morphAttributes.normal!==void 0,morphColors:k.morphAttributes.color!==void 0,morphTargetsCount:z,morphTextureStride:V,numDirLights:A.directional.length,numPointLights:A.point.length,numSpotLights:A.spot.length,numSpotLightMaps:A.spotLightMap.length,numRectAreaLights:A.rectArea.length,numHemiLights:A.hemi.length,numDirLightShadows:A.directionalShadowMap.length,numPointLightShadows:A.pointShadowMap.length,numSpotLightShadows:A.spotShadowMap.length,numSpotLightShadowsWithMaps:A.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:C.dithering,shadowMapEnabled:e.shadowMap.enabled&&M.length>0,shadowMapType:e.shadowMap.type,toneMapping:C.toneMapped?e.toneMapping:dc,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===za,flipSided:C.side===aa,useDepthPacking:!!C.depthPacking,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionDerivatives:C.extensions&&C.extensions.derivatives,extensionFragDepth:C.extensions&&C.extensions.fragDepth,extensionDrawBuffers:C.extensions&&C.extensions.drawBuffers,extensionShaderTextureLOD:C.extensions&&C.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:C.customProgramCacheKey()}}function v(C){let A=[];if(C.shaderID?A.push(C.shaderID):(A.push(C.customVertexShaderID),A.push(C.customFragmentShaderID)),C.defines!==void 0)for(let M in C.defines)A.push(M),A.push(C.defines[M]);return C.isRawShaderMaterial===!1&&(y(A,C),x(A,C),A.push(e.outputEncoding)),A.push(C.customProgramCacheKey),A.join()}function y(C,A){C.push(A.precision),C.push(A.outputEncoding),C.push(A.envMapMode),C.push(A.envMapCubeUVHeight),C.push(A.combine),C.push(A.vertexUvs),C.push(A.fogExp2),C.push(A.sizeAttenuation),C.push(A.morphTargetsCount),C.push(A.morphAttributeCount),C.push(A.numDirLights),C.push(A.numPointLights),C.push(A.numSpotLights),C.push(A.numSpotLightMaps),C.push(A.numHemiLights),C.push(A.numRectAreaLights),C.push(A.numDirLightShadows),C.push(A.numPointLightShadows),C.push(A.numSpotLightShadows),C.push(A.numSpotLightShadowsWithMaps),C.push(A.shadowMapType),C.push(A.toneMapping),C.push(A.numClippingPlanes),C.push(A.numClipIntersection),C.push(A.depthPacking)}function x(C,A){o.disableAll(),A.isWebGL2&&o.enable(0),A.supportsVertexTextures&&o.enable(1),A.instancing&&o.enable(2),A.instancingColor&&o.enable(3),A.map&&o.enable(4),A.matcap&&o.enable(5),A.envMap&&o.enable(6),A.lightMap&&o.enable(7),A.aoMap&&o.enable(8),A.emissiveMap&&o.enable(9),A.bumpMap&&o.enable(10),A.normalMap&&o.enable(11),A.objectSpaceNormalMap&&o.enable(12),A.tangentSpaceNormalMap&&o.enable(13),A.clearcoat&&o.enable(14),A.clearcoatMap&&o.enable(15),A.clearcoatRoughnessMap&&o.enable(16),A.clearcoatNormalMap&&o.enable(17),A.iridescence&&o.enable(18),A.iridescenceMap&&o.enable(19),A.iridescenceThicknessMap&&o.enable(20),A.displacementMap&&o.enable(21),A.specularMap&&o.enable(22),A.roughnessMap&&o.enable(23),A.metalnessMap&&o.enable(24),A.gradientMap&&o.enable(25),A.alphaMap&&o.enable(26),A.alphaTest&&o.enable(27),A.vertexColors&&o.enable(28),A.vertexAlphas&&o.enable(29),A.vertexUvs&&o.enable(30),A.vertexTangents&&o.enable(31),A.uvsVertexOnly&&o.enable(32),C.push(o.mask),o.disableAll(),A.fog&&o.enable(0),A.useFog&&o.enable(1),A.flatShading&&o.enable(2),A.logarithmicDepthBuffer&&o.enable(3),A.skinning&&o.enable(4),A.morphTargets&&o.enable(5),A.morphNormals&&o.enable(6),A.morphColors&&o.enable(7),A.premultipliedAlpha&&o.enable(8),A.shadowMapEnabled&&o.enable(9),A.physicallyCorrectLights&&o.enable(10),A.doubleSided&&o.enable(11),A.flipSided&&o.enable(12),A.useDepthPacking&&o.enable(13),A.dithering&&o.enable(14),A.specularIntensityMap&&o.enable(15),A.specularColorMap&&o.enable(16),A.transmission&&o.enable(17),A.transmissionMap&&o.enable(18),A.thicknessMap&&o.enable(19),A.sheen&&o.enable(20),A.sheenColorMap&&o.enable(21),A.sheenRoughnessMap&&o.enable(22),A.decodeVideoTexture&&o.enable(23),A.opaque&&o.enable(24),C.push(o.mask)}function b(C){let A=p[C.type],M;if(A){let T=tc[A];M=Uv.clone(T.uniforms)}else M=C.uniforms;return M}function w(C,A){let M;for(let T=0,P=c.length;T<P;T++){let D=c[T];if(D.cacheKey===A){M=D,++M.usedTimes;break}}return M===void 0&&(M=new Whe(e,A,C,a),c.push(M)),M}function S(C){if(--C.usedTimes===0){let A=c.indexOf(C);c[A]=c[c.length-1],c.pop(),C.destroy()}}function _(C){l.remove(C)}function E(){l.dispose()}return{getParameters:m,getProgramCacheKey:v,getUniforms:b,acquireProgram:w,releaseProgram:S,releaseShaderCache:_,programs:c,dispose:E}}function Yhe(){let e=new WeakMap;function t(a){let s=e.get(a);return s===void 0&&(s={},e.set(a,s)),s}function i(a){e.delete(a)}function r(a,s,o){e.get(a)[s]=o}function n(){e=new WeakMap}return{get:t,remove:i,update:r,dispose:n}}function Khe(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Rk(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function kk(){let e=[],t=0,i=[],r=[],n=[];function a(){t=0,i.length=0,r.length=0,n.length=0}function s(d,h,f,p,m,v){let y=e[t];return y===void 0?(y={id:d.id,object:d,geometry:h,material:f,groupOrder:p,renderOrder:d.renderOrder,z:m,group:v},e[t]=y):(y.id=d.id,y.object=d,y.geometry=h,y.material=f,y.groupOrder=p,y.renderOrder=d.renderOrder,y.z=m,y.group=v),t++,y}function o(d,h,f,p,m,v){let y=s(d,h,f,p,m,v);f.transmission>0?r.push(y):f.transparent===!0?n.push(y):i.push(y)}function l(d,h,f,p,m,v){let y=s(d,h,f,p,m,v);f.transmission>0?r.unshift(y):f.transparent===!0?n.unshift(y):i.unshift(y)}function c(d,h){i.length>1&&i.sort(d||Khe),r.length>1&&r.sort(h||Rk),n.length>1&&n.sort(h||Rk)}function u(){for(let d=t,h=e.length;d<h;d++){let f=e[d];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:i,transmissive:r,transparent:n,init:a,push:o,unshift:l,finish:u,sort:c}}function Xhe(){let e=new WeakMap;function t(r,n){let a=e.get(r),s;return a===void 0?(s=new kk,e.set(r,[s])):n>=a.length?(s=new kk,a.push(s)):s=a[n],s}function i(){e=new WeakMap}return{get:t,dispose:i}}function Qhe(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let i;switch(t.type){case"DirectionalLight":i={direction:new H,color:new ii};break;case"SpotLight":i={position:new H,direction:new H,color:new ii,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new H,color:new ii,distance:0,decay:0};break;case"HemisphereLight":i={direction:new H,skyColor:new ii,groundColor:new ii};break;case"RectAreaLight":i={color:new ii,position:new H,halfWidth:new H,halfHeight:new H};break}return e[t.id]=i,i}}}function Jhe(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let i;switch(t.type){case"DirectionalLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pe};break;case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pe};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pe,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=i,i}}}var efe=0;function tfe(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function ife(e,t){let i=new Qhe,r=Jhe(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)n.probe.push(new H);let a=new H,s=new pt,o=new pt;function l(u,d){let h=0,f=0,p=0;for(let T=0;T<9;T++)n.probe[T].set(0,0,0);let m=0,v=0,y=0,x=0,b=0,w=0,S=0,_=0,E=0,C=0;u.sort(tfe);let A=d!==!0?Math.PI:1;for(let T=0,P=u.length;T<P;T++){let D=u[T],k=D.color,L=D.intensity,R=D.distance,N=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)h+=k.r*L*A,f+=k.g*L*A,p+=k.b*L*A;else if(D.isLightProbe)for(let I=0;I<9;I++)n.probe[I].addScaledVector(D.sh.coefficients[I],L);else if(D.isDirectionalLight){let I=i.get(D);if(I.color.copy(D.color).multiplyScalar(D.intensity*A),D.castShadow){let B=D.shadow,z=r.get(D);z.shadowBias=B.bias,z.shadowNormalBias=B.normalBias,z.shadowRadius=B.radius,z.shadowMapSize=B.mapSize,n.directionalShadow[m]=z,n.directionalShadowMap[m]=N,n.directionalShadowMatrix[m]=D.shadow.matrix,w++}n.directional[m]=I,m++}else if(D.isSpotLight){let I=i.get(D);I.position.setFromMatrixPosition(D.matrixWorld),I.color.copy(k).multiplyScalar(L*A),I.distance=R,I.coneCos=Math.cos(D.angle),I.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),I.decay=D.decay,n.spot[y]=I;let B=D.shadow;if(D.map&&(n.spotLightMap[E]=D.map,E++,B.updateMatrices(D),D.castShadow&&C++),n.spotLightMatrix[y]=B.matrix,D.castShadow){let z=r.get(D);z.shadowBias=B.bias,z.shadowNormalBias=B.normalBias,z.shadowRadius=B.radius,z.shadowMapSize=B.mapSize,n.spotShadow[y]=z,n.spotShadowMap[y]=N,_++}y++}else if(D.isRectAreaLight){let I=i.get(D);I.color.copy(k).multiplyScalar(L),I.halfWidth.set(D.width*.5,0,0),I.halfHeight.set(0,D.height*.5,0),n.rectArea[x]=I,x++}else if(D.isPointLight){let I=i.get(D);if(I.color.copy(D.color).multiplyScalar(D.intensity*A),I.distance=D.distance,I.decay=D.decay,D.castShadow){let B=D.shadow,z=r.get(D);z.shadowBias=B.bias,z.shadowNormalBias=B.normalBias,z.shadowRadius=B.radius,z.shadowMapSize=B.mapSize,z.shadowCameraNear=B.camera.near,z.shadowCameraFar=B.camera.far,n.pointShadow[v]=z,n.pointShadowMap[v]=N,n.pointShadowMatrix[v]=D.shadow.matrix,S++}n.point[v]=I,v++}else if(D.isHemisphereLight){let I=i.get(D);I.skyColor.copy(D.color).multiplyScalar(L*A),I.groundColor.copy(D.groundColor).multiplyScalar(L*A),n.hemi[b]=I,b++}}x>0&&(t.isWebGL2||e.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=At.LTC_FLOAT_1,n.rectAreaLTC2=At.LTC_FLOAT_2):e.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=At.LTC_HALF_1,n.rectAreaLTC2=At.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=h,n.ambient[1]=f,n.ambient[2]=p;let M=n.hash;(M.directionalLength!==m||M.pointLength!==v||M.spotLength!==y||M.rectAreaLength!==x||M.hemiLength!==b||M.numDirectionalShadows!==w||M.numPointShadows!==S||M.numSpotShadows!==_||M.numSpotMaps!==E)&&(n.directional.length=m,n.spot.length=y,n.rectArea.length=x,n.point.length=v,n.hemi.length=b,n.directionalShadow.length=w,n.directionalShadowMap.length=w,n.pointShadow.length=S,n.pointShadowMap.length=S,n.spotShadow.length=_,n.spotShadowMap.length=_,n.directionalShadowMatrix.length=w,n.pointShadowMatrix.length=S,n.spotLightMatrix.length=_+E-C,n.spotLightMap.length=E,n.numSpotLightShadowsWithMaps=C,M.directionalLength=m,M.pointLength=v,M.spotLength=y,M.rectAreaLength=x,M.hemiLength=b,M.numDirectionalShadows=w,M.numPointShadows=S,M.numSpotShadows=_,M.numSpotMaps=E,n.version=efe++)}function c(u,d){let h=0,f=0,p=0,m=0,v=0,y=d.matrixWorldInverse;for(let x=0,b=u.length;x<b;x++){let w=u[x];if(w.isDirectionalLight){let S=n.directional[h];S.direction.setFromMatrixPosition(w.matrixWorld),a.setFromMatrixPosition(w.target.matrixWorld),S.direction.sub(a),S.direction.transformDirection(y),h++}else if(w.isSpotLight){let S=n.spot[p];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(y),S.direction.setFromMatrixPosition(w.matrixWorld),a.setFromMatrixPosition(w.target.matrixWorld),S.direction.sub(a),S.direction.transformDirection(y),p++}else if(w.isRectAreaLight){let S=n.rectArea[m];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(y),o.identity(),s.copy(w.matrixWorld),s.premultiply(y),o.extractRotation(s),S.halfWidth.set(w.width*.5,0,0),S.halfHeight.set(0,w.height*.5,0),S.halfWidth.applyMatrix4(o),S.halfHeight.applyMatrix4(o),m++}else if(w.isPointLight){let S=n.point[f];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(y),f++}else if(w.isHemisphereLight){let S=n.hemi[v];S.direction.setFromMatrixPosition(w.matrixWorld),S.direction.transformDirection(y),v++}}}return{setup:l,setupView:c,state:n}}function Lk(e,t){let i=new ife(e,t),r=[],n=[];function a(){r.length=0,n.length=0}function s(u){r.push(u)}function o(u){n.push(u)}function l(u){i.setup(r,u)}function c(u){i.setupView(r,u)}return{init:a,state:{lightsArray:r,shadowsArray:n,lights:i},setupLights:l,setupLightsView:c,pushLight:s,pushShadow:o}}function rfe(e,t){let i=new WeakMap;function r(a,s=0){let o=i.get(a),l;return o===void 0?(l=new Lk(e,t),i.set(a,[l])):s>=o.length?(l=new Lk(e,t),o.push(l)):l=o[s],l}function n(){i=new WeakMap}return{get:r,dispose:n}}var oj=class extends iy{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Uu,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},nfe=class extends iy{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new H,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},afe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,sfe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function ofe(e,t,i){let r=new iP,n=new Pe,a=new Pe,s=new vi,o=new oj({depthPacking:ZH}),l=new nfe,c={},u=i.maxTextureSize,d={[_l]:aa,[aa]:_l,[za]:za},h=new er({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Pe},radius:{value:4}},vertexShader:afe,fragmentShader:sfe}),f=h.clone();f.defines.HORIZONTAL_PASS=1;let p=new Kt;p.setAttribute("position",new ui(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let m=new Yr(p,h),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=K5,this.render=function(w,S,_){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||w.length===0)return;let E=e.getRenderTarget(),C=e.getActiveCubeFace(),A=e.getActiveMipmapLevel(),M=e.state;M.setBlending(Mn),M.buffers.color.setClear(1,1,1,1),M.buffers.depth.setTest(!0),M.setScissorTest(!1);for(let T=0,P=w.length;T<P;T++){let D=w[T],k=D.shadow;if(k===void 0){console.warn("THREE.WebGLShadowMap:",D,"has no shadow.");continue}if(k.autoUpdate===!1&&k.needsUpdate===!1)continue;n.copy(k.mapSize);let L=k.getFrameExtents();if(n.multiply(L),a.copy(k.mapSize),(n.x>u||n.y>u)&&(n.x>u&&(a.x=Math.floor(u/L.x),n.x=a.x*L.x,k.mapSize.x=a.x),n.y>u&&(a.y=Math.floor(u/L.y),n.y=a.y*L.y,k.mapSize.y=a.y)),k.map===null){let N=this.type!==ng?{minFilter:or,magFilter:or}:{};k.map=new ir(n.x,n.y,N),k.map.texture.name=D.name+".shadowMap",k.camera.updateProjectionMatrix()}e.setRenderTarget(k.map),e.clear();let R=k.getViewportCount();for(let N=0;N<R;N++){let I=k.getViewport(N);s.set(a.x*I.x,a.y*I.y,a.x*I.z,a.y*I.w),M.viewport(s),k.updateMatrices(D,N),r=k.getFrustum(),b(S,_,k.camera,D,this.type)}k.isPointLightShadow!==!0&&this.type===ng&&y(k,_),k.needsUpdate=!1}v.needsUpdate=!1,e.setRenderTarget(E,C,A)};function y(w,S){let _=t.update(m);h.defines.VSM_SAMPLES!==w.blurSamples&&(h.defines.VSM_SAMPLES=w.blurSamples,f.defines.VSM_SAMPLES=w.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new ir(n.x,n.y)),h.uniforms.shadow_pass.value=w.map.texture,h.uniforms.resolution.value=w.mapSize,h.uniforms.radius.value=w.radius,e.setRenderTarget(w.mapPass),e.clear(),e.renderBufferDirect(S,null,_,h,m,null),f.uniforms.shadow_pass.value=w.mapPass.texture,f.uniforms.resolution.value=w.mapSize,f.uniforms.radius.value=w.radius,e.setRenderTarget(w.map),e.clear(),e.renderBufferDirect(S,null,_,f,m,null)}function x(w,S,_,E,C,A){let M=null,T=_.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(T!==void 0)M=T;else if(M=_.isPointLight===!0?l:o,e.localClippingEnabled&&S.clipShadows===!0&&Array.isArray(S.clippingPlanes)&&S.clippingPlanes.length!==0||S.displacementMap&&S.displacementScale!==0||S.alphaMap&&S.alphaTest>0||S.map&&S.alphaTest>0){let P=M.uuid,D=S.uuid,k=c[P];k===void 0&&(k={},c[P]=k);let L=k[D];L===void 0&&(L=M.clone(),k[D]=L),M=L}return M.visible=S.visible,M.wireframe=S.wireframe,A===ng?M.side=S.shadowSide!==null?S.shadowSide:S.side:M.side=S.shadowSide!==null?S.shadowSide:d[S.side],M.alphaMap=S.alphaMap,M.alphaTest=S.alphaTest,M.map=S.map,M.clipShadows=S.clipShadows,M.clippingPlanes=S.clippingPlanes,M.clipIntersection=S.clipIntersection,M.displacementMap=S.displacementMap,M.displacementScale=S.displacementScale,M.displacementBias=S.displacementBias,M.wireframeLinewidth=S.wireframeLinewidth,M.linewidth=S.linewidth,_.isPointLight===!0&&M.isMeshDistanceMaterial===!0&&(M.referencePosition.setFromMatrixPosition(_.matrixWorld),M.nearDistance=E,M.farDistance=C),M}function b(w,S,_,E,C){if(w.visible===!1)return;if(w.layers.test(S.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&C===ng)&&(!w.frustumCulled||r.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(_.matrixWorldInverse,w.matrixWorld);let M=t.update(w),T=w.material;if(Array.isArray(T)){let P=M.groups;for(let D=0,k=P.length;D<k;D++){let L=P[D],R=T[L.materialIndex];if(R&&R.visible){let N=x(w,R,E,_.near,_.far,C);e.renderBufferDirect(_,null,M,N,w,L)}}}else if(T.visible){let P=x(w,T,E,_.near,_.far,C);e.renderBufferDirect(_,null,M,P,w,null)}}let A=w.children;for(let M=0,T=A.length;M<T;M++)b(A[M],S,_,E,C)}}function lfe(e,t,i){let r=i.isWebGL2;function n(){let Te=!1,$e=new vi,st=null,wt=new vi(0,0,0,0);return{setMask:function(Pt){st!==Pt&&!Te&&(e.colorMask(Pt,Pt,Pt,Pt),st=Pt)},setLocked:function(Pt){Te=Pt},setClear:function(Pt,_t,Vi,$r,Ka){Ka===!0&&(Pt*=$r,_t*=$r,Vi*=$r),$e.set(Pt,_t,Vi,$r),wt.equals($e)===!1&&(e.clearColor(Pt,_t,Vi,$r),wt.copy($e))},reset:function(){Te=!1,st=null,wt.set(-1,0,0,0)}}}function a(){let Te=!1,$e=null,st=null,wt=null;return{setTest:function(Pt){Pt?$(2929):te(2929)},setMask:function(Pt){$e!==Pt&&!Te&&(e.depthMask(Pt),$e=Pt)},setFunc:function(Pt){if(st!==Pt){switch(Pt){case Toe:e.depthFunc(512);break;case Poe:e.depthFunc(519);break;case Doe:e.depthFunc(513);break;case eA:e.depthFunc(515);break;case Ioe:e.depthFunc(514);break;case Ooe:e.depthFunc(518);break;case Roe:e.depthFunc(516);break;case koe:e.depthFunc(517);break;default:e.depthFunc(515)}st=Pt}},setLocked:function(Pt){Te=Pt},setClear:function(Pt){wt!==Pt&&(e.clearDepth(Pt),wt=Pt)},reset:function(){Te=!1,$e=null,st=null,wt=null}}}function s(){let Te=!1,$e=null,st=null,wt=null,Pt=null,_t=null,Vi=null,$r=null,Ka=null;return{setTest:function(ar){Te||(ar?$(2960):te(2960))},setMask:function(ar){$e!==ar&&!Te&&(e.stencilMask(ar),$e=ar)},setFunc:function(ar,fa,Qr){(st!==ar||wt!==fa||Pt!==Qr)&&(e.stencilFunc(ar,fa,Qr),st=ar,wt=fa,Pt=Qr)},setOp:function(ar,fa,Qr){(_t!==ar||Vi!==fa||$r!==Qr)&&(e.stencilOp(ar,fa,Qr),_t=ar,Vi=fa,$r=Qr)},setLocked:function(ar){Te=ar},setClear:function(ar){Ka!==ar&&(e.clearStencil(ar),Ka=ar)},reset:function(){Te=!1,$e=null,st=null,wt=null,Pt=null,_t=null,Vi=null,$r=null,Ka=null}}}let o=new n,l=new a,c=new s,u=new WeakMap,d=new WeakMap,h={},f={},p=new WeakMap,m=[],v=null,y=!1,x=null,b=null,w=null,S=null,_=null,E=null,C=null,A=!1,M=null,T=null,P=null,D=null,k=null,L=e.getParameter(35661),R=!1,N=0,I=e.getParameter(7938);I.indexOf("WebGL")!==-1?(N=parseFloat(/^WebGL (\d)/.exec(I)[1]),R=N>=1):I.indexOf("OpenGL ES")!==-1&&(N=parseFloat(/^OpenGL ES (\d)/.exec(I)[1]),R=N>=2);let B=null,z={},V=e.getParameter(3088),W=e.getParameter(2978),G=new vi().fromArray(V),q=new vi().fromArray(W);function ae(Te,$e,st){let wt=new Uint8Array(4),Pt=e.createTexture();e.bindTexture(Te,Pt),e.texParameteri(Te,10241,9728),e.texParameteri(Te,10240,9728);for(let _t=0;_t<st;_t++)e.texImage2D($e+_t,0,6408,1,1,0,6408,5121,wt);return Pt}let J={};J[3553]=ae(3553,3553,1),J[34067]=ae(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),c.setClear(0),$(2929),l.setFunc(eA),Ie(!1),we(AR),$(2884),oe(Mn);function $(Te){h[Te]!==!0&&(e.enable(Te),h[Te]=!0)}function te(Te){h[Te]!==!1&&(e.disable(Te),h[Te]=!1)}function Q(Te,$e){return f[Te]!==$e?(e.bindFramebuffer(Te,$e),f[Te]=$e,r&&(Te===36009&&(f[36160]=$e),Te===36160&&(f[36009]=$e)),!0):!1}function pe(Te,$e){let st=m,wt=!1;if(Te)if(st=p.get($e),st===void 0&&(st=[],p.set($e,st)),Te.isWebGLMultipleRenderTargets){let Pt=Te.texture;if(st.length!==Pt.length||st[0]!==36064){for(let _t=0,Vi=Pt.length;_t<Vi;_t++)st[_t]=36064+_t;st.length=Pt.length,wt=!0}}else st[0]!==36064&&(st[0]=36064,wt=!0);else st[0]!==1029&&(st[0]=1029,wt=!0);wt&&(i.isWebGL2?e.drawBuffers(st):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(st))}function me(Te){return v!==Te?(e.useProgram(Te),v=Te,!0):!1}let le={[am]:32774,[goe]:32778,[yoe]:32779};if(r)le[DR]=32775,le[IR]=32776;else{let Te=t.get("EXT_blend_minmax");Te!==null&&(le[DR]=Te.MIN_EXT,le[IR]=Te.MAX_EXT)}let Z={[boe]:0,[woe]:1,[xoe]:768,[zH]:770,[Moe]:776,[Eoe]:774,[Soe]:772,[_oe]:769,[VH]:771,[Aoe]:775,[Coe]:773};function oe(Te,$e,st,wt,Pt,_t,Vi,$r){if(Te===Mn){y===!0&&(te(3042),y=!1);return}if(y===!1&&($(3042),y=!0),Te!==voe){if(Te!==x||$r!==A){if((b!==am||_!==am)&&(e.blendEquation(32774),b=am,_=am),$r)switch(Te){case If:e.blendFuncSeparate(1,771,1,771);break;case MR:e.blendFunc(1,1);break;case TR:e.blendFuncSeparate(0,769,0,1);break;case PR:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Te);break}else switch(Te){case If:e.blendFuncSeparate(770,771,1,771);break;case MR:e.blendFunc(770,1);break;case TR:e.blendFuncSeparate(0,769,0,1);break;case PR:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Te);break}w=null,S=null,E=null,C=null,x=Te,A=$r}return}Pt=Pt||$e,_t=_t||st,Vi=Vi||wt,($e!==b||Pt!==_)&&(e.blendEquationSeparate(le[$e],le[Pt]),b=$e,_=Pt),(st!==w||wt!==S||_t!==E||Vi!==C)&&(e.blendFuncSeparate(Z[st],Z[wt],Z[_t],Z[Vi]),w=st,S=wt,E=_t,C=Vi),x=Te,A=!1}function ge(Te,$e){Te.side===za?te(2884):$(2884);let st=Te.side===aa;$e&&(st=!st),Ie(st),Te.blending===If&&Te.transparent===!1?oe(Mn):oe(Te.blending,Te.blendEquation,Te.blendSrc,Te.blendDst,Te.blendEquationAlpha,Te.blendSrcAlpha,Te.blendDstAlpha,Te.premultipliedAlpha),l.setFunc(Te.depthFunc),l.setTest(Te.depthTest),l.setMask(Te.depthWrite),o.setMask(Te.colorWrite);let wt=Te.stencilWrite;c.setTest(wt),wt&&(c.setMask(Te.stencilWriteMask),c.setFunc(Te.stencilFunc,Te.stencilRef,Te.stencilFuncMask),c.setOp(Te.stencilFail,Te.stencilZFail,Te.stencilZPass)),Se(Te.polygonOffset,Te.polygonOffsetFactor,Te.polygonOffsetUnits),Te.alphaToCoverage===!0?$(32926):te(32926)}function Ie(Te){M!==Te&&(Te?e.frontFace(2304):e.frontFace(2305),M=Te)}function we(Te){Te!==foe?($(2884),Te!==T&&(Te===AR?e.cullFace(1029):Te===poe?e.cullFace(1028):e.cullFace(1032))):te(2884),T=Te}function xe(Te){Te!==P&&(R&&e.lineWidth(Te),P=Te)}function Se(Te,$e,st){Te?($(32823),(D!==$e||k!==st)&&(e.polygonOffset($e,st),D=$e,k=st)):te(32823)}function Le(Te){Te?$(3089):te(3089)}function Be(Te){Te===void 0&&(Te=33984+L-1),B!==Te&&(e.activeTexture(Te),B=Te)}function ee(Te,$e,st){st===void 0&&(B===null?st=33984+L-1:st=B);let wt=z[st];wt===void 0&&(wt={type:void 0,texture:void 0},z[st]=wt),(wt.type!==Te||wt.texture!==$e)&&(B!==st&&(e.activeTexture(st),B=st),e.bindTexture(Te,$e||J[Te]),wt.type=Te,wt.texture=$e)}function X(){let Te=z[B];Te!==void 0&&Te.type!==void 0&&(e.bindTexture(Te.type,null),Te.type=void 0,Te.texture=void 0)}function ue(){try{e.compressedTexImage2D.apply(e,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Oe(){try{e.compressedTexImage3D.apply(e,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Y(){try{e.texSubImage2D.apply(e,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function qe(){try{e.texSubImage3D.apply(e,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function et(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function tt(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function ze(){try{e.texStorage2D.apply(e,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function vt(){try{e.texStorage3D.apply(e,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function _e(){try{e.texImage2D.apply(e,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Fe(){try{e.texImage3D.apply(e,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function he(Te){G.equals(Te)===!1&&(e.scissor(Te.x,Te.y,Te.z,Te.w),G.copy(Te))}function ke(Te){q.equals(Te)===!1&&(e.viewport(Te.x,Te.y,Te.z,Te.w),q.copy(Te))}function se(Te,$e){let st=d.get($e);st===void 0&&(st=new WeakMap,d.set($e,st));let wt=st.get(Te);wt===void 0&&(wt=e.getUniformBlockIndex($e,Te.name),st.set(Te,wt))}function He(Te,$e){let st=d.get($e).get(Te);u.get($e)!==st&&(e.uniformBlockBinding($e,st,Te.__bindingPointIndex),u.set($e,st))}function yt(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),r===!0&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),h={},B=null,z={},f={},p=new WeakMap,m=[],v=null,y=!1,x=null,b=null,w=null,S=null,_=null,E=null,C=null,A=!1,M=null,T=null,P=null,D=null,k=null,G.set(0,0,e.canvas.width,e.canvas.height),q.set(0,0,e.canvas.width,e.canvas.height),o.reset(),l.reset(),c.reset()}return{buffers:{color:o,depth:l,stencil:c},enable:$,disable:te,bindFramebuffer:Q,drawBuffers:pe,useProgram:me,setBlending:oe,setMaterial:ge,setFlipSided:Ie,setCullFace:we,setLineWidth:xe,setPolygonOffset:Se,setScissorTest:Le,activeTexture:Be,bindTexture:ee,unbindTexture:X,compressedTexImage2D:ue,compressedTexImage3D:Oe,texImage2D:_e,texImage3D:Fe,updateUBOMapping:se,uniformBlockBinding:He,texStorage2D:ze,texStorage3D:vt,texSubImage2D:Y,texSubImage3D:qe,compressedTexSubImage2D:et,compressedTexSubImage3D:tt,scissor:he,viewport:ke,reset:yt}}function cfe(e,t,i,r,n,a,s){let o=n.isWebGL2,l=n.maxTextures,c=n.maxCubemapSize,u=n.maxTextureSize,d=n.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap,m,v=new WeakMap,y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(ee,X){return y?new OffscreenCanvas(ee,X):a1("canvas")}function b(ee,X,ue,Oe){let Y=1;if((ee.width>Oe||ee.height>Oe)&&(Y=Oe/Math.max(ee.width,ee.height)),Y<1||X===!0)if(typeof HTMLImageElement<"u"&&ee instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ee instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ee instanceof ImageBitmap){let qe=X?J2:Math.floor,et=qe(Y*ee.width),tt=qe(Y*ee.height);m===void 0&&(m=x(et,tt));let ze=ue?x(et,tt):m;return ze.width=et,ze.height=tt,ze.getContext("2d").drawImage(ee,0,0,et,tt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ee.width+"x"+ee.height+") to ("+et+"x"+tt+")."),ze}else return"data"in ee&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ee.width+"x"+ee.height+")."),ee;return ee}function w(ee){return sA(ee.width)&&sA(ee.height)}function S(ee){return o?!1:ee.wrapS!==Hr||ee.wrapT!==Hr||ee.minFilter!==or&&ee.minFilter!==Ti}function _(ee,X){return ee.generateMipmaps&&X&&ee.minFilter!==or&&ee.minFilter!==Ti}function E(ee){e.generateMipmap(ee)}function C(ee,X,ue,Oe,Y=!1){if(o===!1)return X;if(ee!==null){if(e[ee]!==void 0)return e[ee];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ee+"'")}let qe=X;return X===6403&&(ue===5126&&(qe=33326),ue===5131&&(qe=33325),ue===5121&&(qe=33321)),X===33319&&(ue===5126&&(qe=33328),ue===5131&&(qe=33327),ue===5121&&(qe=33323)),X===6408&&(ue===5126&&(qe=34836),ue===5131&&(qe=34842),ue===5121&&(qe=Oe===Ei&&Y===!1?35907:32856),ue===32819&&(qe=32854),ue===32820&&(qe=32855)),(qe===33325||qe===33326||qe===33327||qe===33328||qe===34842||qe===34836)&&t.get("EXT_color_buffer_float"),qe}function A(ee,X,ue){return _(ee,ue)===!0||ee.isFramebufferTexture&&ee.minFilter!==or&&ee.minFilter!==Ti?Math.log2(Math.max(X.width,X.height))+1:ee.mipmaps!==void 0&&ee.mipmaps.length>0?ee.mipmaps.length:ee.isCompressedTexture&&Array.isArray(ee.image)?X.mipmaps.length:1}function M(ee){return ee===or||ee===OR||ee===I3?9728:9729}function T(ee){let X=ee.target;X.removeEventListener("dispose",T),D(X),X.isVideoTexture&&p.delete(X)}function P(ee){let X=ee.target;X.removeEventListener("dispose",P),L(X)}function D(ee){let X=r.get(ee);if(X.__webglInit===void 0)return;let ue=ee.source,Oe=v.get(ue);if(Oe){let Y=Oe[X.__cacheKey];Y.usedTimes--,Y.usedTimes===0&&k(ee),Object.keys(Oe).length===0&&v.delete(ue)}r.remove(ee)}function k(ee){let X=r.get(ee);e.deleteTexture(X.__webglTexture);let ue=ee.source,Oe=v.get(ue);delete Oe[X.__cacheKey],s.memory.textures--}function L(ee){let X=ee.texture,ue=r.get(ee),Oe=r.get(X);if(Oe.__webglTexture!==void 0&&(e.deleteTexture(Oe.__webglTexture),s.memory.textures--),ee.depthTexture&&ee.depthTexture.dispose(),ee.isWebGLCubeRenderTarget)for(let Y=0;Y<6;Y++)e.deleteFramebuffer(ue.__webglFramebuffer[Y]),ue.__webglDepthbuffer&&e.deleteRenderbuffer(ue.__webglDepthbuffer[Y]);else{if(e.deleteFramebuffer(ue.__webglFramebuffer),ue.__webglDepthbuffer&&e.deleteRenderbuffer(ue.__webglDepthbuffer),ue.__webglMultisampledFramebuffer&&e.deleteFramebuffer(ue.__webglMultisampledFramebuffer),ue.__webglColorRenderbuffer)for(let Y=0;Y<ue.__webglColorRenderbuffer.length;Y++)ue.__webglColorRenderbuffer[Y]&&e.deleteRenderbuffer(ue.__webglColorRenderbuffer[Y]);ue.__webglDepthRenderbuffer&&e.deleteRenderbuffer(ue.__webglDepthRenderbuffer)}if(ee.isWebGLMultipleRenderTargets)for(let Y=0,qe=X.length;Y<qe;Y++){let et=r.get(X[Y]);et.__webglTexture&&(e.deleteTexture(et.__webglTexture),s.memory.textures--),r.remove(X[Y])}r.remove(X),r.remove(ee)}let R=0;function N(){R=0}function I(){let ee=R;return ee>=l&&console.warn("THREE.WebGLTextures: Trying to use "+ee+" texture units while this GPU supports only "+l),R+=1,ee}function B(ee){let X=[];return X.push(ee.wrapS),X.push(ee.wrapT),X.push(ee.wrapR||0),X.push(ee.magFilter),X.push(ee.minFilter),X.push(ee.anisotropy),X.push(ee.internalFormat),X.push(ee.format),X.push(ee.type),X.push(ee.generateMipmaps),X.push(ee.premultiplyAlpha),X.push(ee.flipY),X.push(ee.unpackAlignment),X.push(ee.encoding),X.join()}function z(ee,X){let ue=r.get(ee);if(ee.isVideoTexture&&Le(ee),ee.isRenderTargetTexture===!1&&ee.version>0&&ue.__version!==ee.version){let Oe=ee.image;if(Oe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Oe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{te(ue,ee,X);return}}i.bindTexture(3553,ue.__webglTexture,33984+X)}function V(ee,X){let ue=r.get(ee);if(ee.version>0&&ue.__version!==ee.version){te(ue,ee,X);return}i.bindTexture(35866,ue.__webglTexture,33984+X)}function W(ee,X){let ue=r.get(ee);if(ee.version>0&&ue.__version!==ee.version){te(ue,ee,X);return}i.bindTexture(32879,ue.__webglTexture,33984+X)}function G(ee,X){let ue=r.get(ee);if(ee.version>0&&ue.__version!==ee.version){Q(ue,ee,X);return}i.bindTexture(34067,ue.__webglTexture,33984+X)}let q={[mu]:10497,[Hr]:33071,[rA]:33648},ae={[or]:9728,[OR]:9984,[I3]:9986,[Ti]:9729,[Hoe]:9985,[lv]:9987};function J(ee,X,ue){if(ue?(e.texParameteri(ee,10242,q[X.wrapS]),e.texParameteri(ee,10243,q[X.wrapT]),(ee===32879||ee===35866)&&e.texParameteri(ee,32882,q[X.wrapR]),e.texParameteri(ee,10240,ae[X.magFilter]),e.texParameteri(ee,10241,ae[X.minFilter])):(e.texParameteri(ee,10242,33071),e.texParameteri(ee,10243,33071),(ee===32879||ee===35866)&&e.texParameteri(ee,32882,33071),(X.wrapS!==Hr||X.wrapT!==Hr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(ee,10240,M(X.magFilter)),e.texParameteri(ee,10241,M(X.minFilter)),X.minFilter!==or&&X.minFilter!==Ti&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){let Oe=t.get("EXT_texture_filter_anisotropic");if(X.magFilter===or||X.minFilter!==I3&&X.minFilter!==lv||X.type===En&&t.has("OES_texture_float_linear")===!1||o===!1&&X.type===Mu&&t.has("OES_texture_half_float_linear")===!1)return;(X.anisotropy>1||r.get(X).__currentAnisotropy)&&(e.texParameterf(ee,Oe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(X.anisotropy,n.getMaxAnisotropy())),r.get(X).__currentAnisotropy=X.anisotropy)}}function $(ee,X){let ue=!1;ee.__webglInit===void 0&&(ee.__webglInit=!0,X.addEventListener("dispose",T));let Oe=X.source,Y=v.get(Oe);Y===void 0&&(Y={},v.set(Oe,Y));let qe=B(X);if(qe!==ee.__cacheKey){Y[qe]===void 0&&(Y[qe]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,ue=!0),Y[qe].usedTimes++;let et=Y[ee.__cacheKey];et!==void 0&&(Y[ee.__cacheKey].usedTimes--,et.usedTimes===0&&k(X)),ee.__cacheKey=qe,ee.__webglTexture=Y[qe].texture}return ue}function te(ee,X,ue){let Oe=3553;(X.isDataArrayTexture||X.isCompressedArrayTexture)&&(Oe=35866),X.isData3DTexture&&(Oe=32879);let Y=$(ee,X),qe=X.source;i.bindTexture(Oe,ee.__webglTexture,33984+ue);let et=r.get(qe);if(qe.version!==et.__version||Y===!0){i.activeTexture(33984+ue),e.pixelStorei(37440,X.flipY),e.pixelStorei(37441,X.premultiplyAlpha),e.pixelStorei(3317,X.unpackAlignment),e.pixelStorei(37443,0);let tt=S(X)&&w(X.image)===!1,ze=b(X.image,tt,!1,u);ze=Be(X,ze);let vt=w(ze)||o,_e=a.convert(X.format,X.encoding),Fe=a.convert(X.type),he=C(X.internalFormat,_e,Fe,X.encoding,X.isVideoTexture);J(Oe,X,vt);let ke,se=X.mipmaps,He=o&&X.isVideoTexture!==!0,yt=et.__version===void 0||Y===!0,Te=A(X,ze,vt);if(X.isDepthTexture)he=6402,o?X.type===En?he=36012:X.type===vu?he=33190:X.type===Of?he=35056:he=33189:X.type===En&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),X.format===Rf&&he===6402&&X.type!==jH&&X.type!==vu&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),X.type=vu,Fe=a.convert(X.type)),X.format===Hf&&he===6402&&(he=34041,X.type!==Of&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),X.type=Of,Fe=a.convert(X.type))),yt&&(He?i.texStorage2D(3553,1,he,ze.width,ze.height):i.texImage2D(3553,0,he,ze.width,ze.height,0,_e,Fe,null));else if(X.isDataTexture)if(se.length>0&&vt){He&&yt&&i.texStorage2D(3553,Te,he,se[0].width,se[0].height);for(let $e=0,st=se.length;$e<st;$e++)ke=se[$e],He?i.texSubImage2D(3553,$e,0,0,ke.width,ke.height,_e,Fe,ke.data):i.texImage2D(3553,$e,he,ke.width,ke.height,0,_e,Fe,ke.data);X.generateMipmaps=!1}else He?(yt&&i.texStorage2D(3553,Te,he,ze.width,ze.height),i.texSubImage2D(3553,0,0,0,ze.width,ze.height,_e,Fe,ze.data)):i.texImage2D(3553,0,he,ze.width,ze.height,0,_e,Fe,ze.data);else if(X.isCompressedTexture)if(X.isCompressedArrayTexture){He&&yt&&i.texStorage3D(35866,Te,he,se[0].width,se[0].height,ze.depth);for(let $e=0,st=se.length;$e<st;$e++)ke=se[$e],X.format!==ra?_e!==null?He?i.compressedTexSubImage3D(35866,$e,0,0,0,ke.width,ke.height,ze.depth,_e,ke.data,0,0):i.compressedTexImage3D(35866,$e,he,ke.width,ke.height,ze.depth,0,ke.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):He?i.texSubImage3D(35866,$e,0,0,0,ke.width,ke.height,ze.depth,_e,Fe,ke.data):i.texImage3D(35866,$e,he,ke.width,ke.height,ze.depth,0,_e,Fe,ke.data)}else{He&&yt&&i.texStorage2D(3553,Te,he,se[0].width,se[0].height);for(let $e=0,st=se.length;$e<st;$e++)ke=se[$e],X.format!==ra?_e!==null?He?i.compressedTexSubImage2D(3553,$e,0,0,ke.width,ke.height,_e,ke.data):i.compressedTexImage2D(3553,$e,he,ke.width,ke.height,0,ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):He?i.texSubImage2D(3553,$e,0,0,ke.width,ke.height,_e,Fe,ke.data):i.texImage2D(3553,$e,he,ke.width,ke.height,0,_e,Fe,ke.data)}else if(X.isDataArrayTexture)He?(yt&&i.texStorage3D(35866,Te,he,ze.width,ze.height,ze.depth),i.texSubImage3D(35866,0,0,0,0,ze.width,ze.height,ze.depth,_e,Fe,ze.data)):i.texImage3D(35866,0,he,ze.width,ze.height,ze.depth,0,_e,Fe,ze.data);else if(X.isData3DTexture)He?(yt&&i.texStorage3D(32879,Te,he,ze.width,ze.height,ze.depth),i.texSubImage3D(32879,0,0,0,0,ze.width,ze.height,ze.depth,_e,Fe,ze.data)):i.texImage3D(32879,0,he,ze.width,ze.height,ze.depth,0,_e,Fe,ze.data);else if(X.isFramebufferTexture){if(yt)if(He)i.texStorage2D(3553,Te,he,ze.width,ze.height);else{let $e=ze.width,st=ze.height;for(let wt=0;wt<Te;wt++)i.texImage2D(3553,wt,he,$e,st,0,_e,Fe,null),$e>>=1,st>>=1}}else if(se.length>0&&vt){He&&yt&&i.texStorage2D(3553,Te,he,se[0].width,se[0].height);for(let $e=0,st=se.length;$e<st;$e++)ke=se[$e],He?i.texSubImage2D(3553,$e,0,0,_e,Fe,ke):i.texImage2D(3553,$e,he,_e,Fe,ke);X.generateMipmaps=!1}else He?(yt&&i.texStorage2D(3553,Te,he,ze.width,ze.height),i.texSubImage2D(3553,0,0,0,_e,Fe,ze)):i.texImage2D(3553,0,he,_e,Fe,ze);_(X,vt)&&E(Oe),et.__version=qe.version,X.onUpdate&&X.onUpdate(X)}ee.__version=X.version}function Q(ee,X,ue){if(X.image.length!==6)return;let Oe=$(ee,X),Y=X.source;i.bindTexture(34067,ee.__webglTexture,33984+ue);let qe=r.get(Y);if(Y.version!==qe.__version||Oe===!0){i.activeTexture(33984+ue),e.pixelStorei(37440,X.flipY),e.pixelStorei(37441,X.premultiplyAlpha),e.pixelStorei(3317,X.unpackAlignment),e.pixelStorei(37443,0);let et=X.isCompressedTexture||X.image[0].isCompressedTexture,tt=X.image[0]&&X.image[0].isDataTexture,ze=[];for(let $e=0;$e<6;$e++)!et&&!tt?ze[$e]=b(X.image[$e],!1,!0,c):ze[$e]=tt?X.image[$e].image:X.image[$e],ze[$e]=Be(X,ze[$e]);let vt=ze[0],_e=w(vt)||o,Fe=a.convert(X.format,X.encoding),he=a.convert(X.type),ke=C(X.internalFormat,Fe,he,X.encoding),se=o&&X.isVideoTexture!==!0,He=qe.__version===void 0||Oe===!0,yt=A(X,vt,_e);J(34067,X,_e);let Te;if(et){se&&He&&i.texStorage2D(34067,yt,ke,vt.width,vt.height);for(let $e=0;$e<6;$e++){Te=ze[$e].mipmaps;for(let st=0;st<Te.length;st++){let wt=Te[st];X.format!==ra?Fe!==null?se?i.compressedTexSubImage2D(34069+$e,st,0,0,wt.width,wt.height,Fe,wt.data):i.compressedTexImage2D(34069+$e,st,ke,wt.width,wt.height,0,wt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):se?i.texSubImage2D(34069+$e,st,0,0,wt.width,wt.height,Fe,he,wt.data):i.texImage2D(34069+$e,st,ke,wt.width,wt.height,0,Fe,he,wt.data)}}}else{Te=X.mipmaps,se&&He&&(Te.length>0&&yt++,i.texStorage2D(34067,yt,ke,ze[0].width,ze[0].height));for(let $e=0;$e<6;$e++)if(tt){se?i.texSubImage2D(34069+$e,0,0,0,ze[$e].width,ze[$e].height,Fe,he,ze[$e].data):i.texImage2D(34069+$e,0,ke,ze[$e].width,ze[$e].height,0,Fe,he,ze[$e].data);for(let st=0;st<Te.length;st++){let wt=Te[st].image[$e].image;se?i.texSubImage2D(34069+$e,st+1,0,0,wt.width,wt.height,Fe,he,wt.data):i.texImage2D(34069+$e,st+1,ke,wt.width,wt.height,0,Fe,he,wt.data)}}else{se?i.texSubImage2D(34069+$e,0,0,0,Fe,he,ze[$e]):i.texImage2D(34069+$e,0,ke,Fe,he,ze[$e]);for(let st=0;st<Te.length;st++){let wt=Te[st];se?i.texSubImage2D(34069+$e,st+1,0,0,Fe,he,wt.image[$e]):i.texImage2D(34069+$e,st+1,ke,Fe,he,wt.image[$e])}}}_(X,_e)&&E(34067),qe.__version=Y.version,X.onUpdate&&X.onUpdate(X)}ee.__version=X.version}function pe(ee,X,ue,Oe,Y){let qe=a.convert(ue.format,ue.encoding),et=a.convert(ue.type),tt=C(ue.internalFormat,qe,et,ue.encoding);r.get(X).__hasExternalTextures||(Y===32879||Y===35866?i.texImage3D(Y,0,tt,X.width,X.height,X.depth,0,qe,et,null):i.texImage2D(Y,0,tt,X.width,X.height,0,qe,et,null)),i.bindFramebuffer(36160,ee),Se(X)?h.framebufferTexture2DMultisampleEXT(36160,Oe,Y,r.get(ue).__webglTexture,0,xe(X)):(Y===3553||Y>=34069&&Y<=34074)&&e.framebufferTexture2D(36160,Oe,Y,r.get(ue).__webglTexture,0),i.bindFramebuffer(36160,null)}function me(ee,X,ue){if(e.bindRenderbuffer(36161,ee),X.depthBuffer&&!X.stencilBuffer){let Oe=33189;if(ue||Se(X)){let Y=X.depthTexture;Y&&Y.isDepthTexture&&(Y.type===En?Oe=36012:Y.type===vu&&(Oe=33190));let qe=xe(X);Se(X)?h.renderbufferStorageMultisampleEXT(36161,qe,Oe,X.width,X.height):e.renderbufferStorageMultisample(36161,qe,Oe,X.width,X.height)}else e.renderbufferStorage(36161,Oe,X.width,X.height);e.framebufferRenderbuffer(36160,36096,36161,ee)}else if(X.depthBuffer&&X.stencilBuffer){let Oe=xe(X);ue&&Se(X)===!1?e.renderbufferStorageMultisample(36161,Oe,35056,X.width,X.height):Se(X)?h.renderbufferStorageMultisampleEXT(36161,Oe,35056,X.width,X.height):e.renderbufferStorage(36161,34041,X.width,X.height),e.framebufferRenderbuffer(36160,33306,36161,ee)}else{let Oe=X.isWebGLMultipleRenderTargets===!0?X.texture:[X.texture];for(let Y=0;Y<Oe.length;Y++){let qe=Oe[Y],et=a.convert(qe.format,qe.encoding),tt=a.convert(qe.type),ze=C(qe.internalFormat,et,tt,qe.encoding),vt=xe(X);ue&&Se(X)===!1?e.renderbufferStorageMultisample(36161,vt,ze,X.width,X.height):Se(X)?h.renderbufferStorageMultisampleEXT(36161,vt,ze,X.width,X.height):e.renderbufferStorage(36161,ze,X.width,X.height)}}e.bindRenderbuffer(36161,null)}function le(ee,X){if(X&&X.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(36160,ee),!(X.depthTexture&&X.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(X.depthTexture).__webglTexture||X.depthTexture.image.width!==X.width||X.depthTexture.image.height!==X.height)&&(X.depthTexture.image.width=X.width,X.depthTexture.image.height=X.height,X.depthTexture.needsUpdate=!0),z(X.depthTexture,0);let ue=r.get(X.depthTexture).__webglTexture,Oe=xe(X);if(X.depthTexture.format===Rf)Se(X)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,ue,0,Oe):e.framebufferTexture2D(36160,36096,3553,ue,0);else if(X.depthTexture.format===Hf)Se(X)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,ue,0,Oe):e.framebufferTexture2D(36160,33306,3553,ue,0);else throw new Error("Unknown depthTexture format")}function Z(ee){let X=r.get(ee),ue=ee.isWebGLCubeRenderTarget===!0;if(ee.depthTexture&&!X.__autoAllocateDepthBuffer){if(ue)throw new Error("target.depthTexture not supported in Cube render targets");le(X.__webglFramebuffer,ee)}else if(ue){X.__webglDepthbuffer=[];for(let Oe=0;Oe<6;Oe++)i.bindFramebuffer(36160,X.__webglFramebuffer[Oe]),X.__webglDepthbuffer[Oe]=e.createRenderbuffer(),me(X.__webglDepthbuffer[Oe],ee,!1)}else i.bindFramebuffer(36160,X.__webglFramebuffer),X.__webglDepthbuffer=e.createRenderbuffer(),me(X.__webglDepthbuffer,ee,!1);i.bindFramebuffer(36160,null)}function oe(ee,X,ue){let Oe=r.get(ee);X!==void 0&&pe(Oe.__webglFramebuffer,ee,ee.texture,36064,3553),ue!==void 0&&Z(ee)}function ge(ee){let X=ee.texture,ue=r.get(ee),Oe=r.get(X);ee.addEventListener("dispose",P),ee.isWebGLMultipleRenderTargets!==!0&&(Oe.__webglTexture===void 0&&(Oe.__webglTexture=e.createTexture()),Oe.__version=X.version,s.memory.textures++);let Y=ee.isWebGLCubeRenderTarget===!0,qe=ee.isWebGLMultipleRenderTargets===!0,et=w(ee)||o;if(Y){ue.__webglFramebuffer=[];for(let tt=0;tt<6;tt++)ue.__webglFramebuffer[tt]=e.createFramebuffer()}else{if(ue.__webglFramebuffer=e.createFramebuffer(),qe)if(n.drawBuffers){let tt=ee.texture;for(let ze=0,vt=tt.length;ze<vt;ze++){let _e=r.get(tt[ze]);_e.__webglTexture===void 0&&(_e.__webglTexture=e.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&ee.samples>0&&Se(ee)===!1){let tt=qe?X:[X];ue.__webglMultisampledFramebuffer=e.createFramebuffer(),ue.__webglColorRenderbuffer=[],i.bindFramebuffer(36160,ue.__webglMultisampledFramebuffer);for(let ze=0;ze<tt.length;ze++){let vt=tt[ze];ue.__webglColorRenderbuffer[ze]=e.createRenderbuffer(),e.bindRenderbuffer(36161,ue.__webglColorRenderbuffer[ze]);let _e=a.convert(vt.format,vt.encoding),Fe=a.convert(vt.type),he=C(vt.internalFormat,_e,Fe,vt.encoding,ee.isXRRenderTarget===!0),ke=xe(ee);e.renderbufferStorageMultisample(36161,ke,he,ee.width,ee.height),e.framebufferRenderbuffer(36160,36064+ze,36161,ue.__webglColorRenderbuffer[ze])}e.bindRenderbuffer(36161,null),ee.depthBuffer&&(ue.__webglDepthRenderbuffer=e.createRenderbuffer(),me(ue.__webglDepthRenderbuffer,ee,!0)),i.bindFramebuffer(36160,null)}}if(Y){i.bindTexture(34067,Oe.__webglTexture),J(34067,X,et);for(let tt=0;tt<6;tt++)pe(ue.__webglFramebuffer[tt],ee,X,36064,34069+tt);_(X,et)&&E(34067),i.unbindTexture()}else if(qe){let tt=ee.texture;for(let ze=0,vt=tt.length;ze<vt;ze++){let _e=tt[ze],Fe=r.get(_e);i.bindTexture(3553,Fe.__webglTexture),J(3553,_e,et),pe(ue.__webglFramebuffer,ee,_e,36064+ze,3553),_(_e,et)&&E(3553)}i.unbindTexture()}else{let tt=3553;(ee.isWebGL3DRenderTarget||ee.isWebGLArrayRenderTarget)&&(o?tt=ee.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),i.bindTexture(tt,Oe.__webglTexture),J(tt,X,et),pe(ue.__webglFramebuffer,ee,X,36064,tt),_(X,et)&&E(tt),i.unbindTexture()}ee.depthBuffer&&Z(ee)}function Ie(ee){let X=w(ee)||o,ue=ee.isWebGLMultipleRenderTargets===!0?ee.texture:[ee.texture];for(let Oe=0,Y=ue.length;Oe<Y;Oe++){let qe=ue[Oe];if(_(qe,X)){let et=ee.isWebGLCubeRenderTarget?34067:3553,tt=r.get(qe).__webglTexture;i.bindTexture(et,tt),E(et),i.unbindTexture()}}}function we(ee){if(o&&ee.samples>0&&Se(ee)===!1){let X=ee.isWebGLMultipleRenderTargets?ee.texture:[ee.texture],ue=ee.width,Oe=ee.height,Y=16384,qe=[],et=ee.stencilBuffer?33306:36096,tt=r.get(ee),ze=ee.isWebGLMultipleRenderTargets===!0;if(ze)for(let vt=0;vt<X.length;vt++)i.bindFramebuffer(36160,tt.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+vt,36161,null),i.bindFramebuffer(36160,tt.__webglFramebuffer),e.framebufferTexture2D(36009,36064+vt,3553,null,0);i.bindFramebuffer(36008,tt.__webglMultisampledFramebuffer),i.bindFramebuffer(36009,tt.__webglFramebuffer);for(let vt=0;vt<X.length;vt++){qe.push(36064+vt),ee.depthBuffer&&qe.push(et);let _e=tt.__ignoreDepthValues!==void 0?tt.__ignoreDepthValues:!1;if(_e===!1&&(ee.depthBuffer&&(Y|=256),ee.stencilBuffer&&(Y|=1024)),ze&&e.framebufferRenderbuffer(36008,36064,36161,tt.__webglColorRenderbuffer[vt]),_e===!0&&(e.invalidateFramebuffer(36008,[et]),e.invalidateFramebuffer(36009,[et])),ze){let Fe=r.get(X[vt]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,Fe,0)}e.blitFramebuffer(0,0,ue,Oe,0,0,ue,Oe,Y,9728),f&&e.invalidateFramebuffer(36008,qe)}if(i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),ze)for(let vt=0;vt<X.length;vt++){i.bindFramebuffer(36160,tt.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+vt,36161,tt.__webglColorRenderbuffer[vt]);let _e=r.get(X[vt]).__webglTexture;i.bindFramebuffer(36160,tt.__webglFramebuffer),e.framebufferTexture2D(36009,36064+vt,3553,_e,0)}i.bindFramebuffer(36009,tt.__webglMultisampledFramebuffer)}}function xe(ee){return Math.min(d,ee.samples)}function Se(ee){let X=r.get(ee);return o&&ee.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&X.__useRenderToTexture!==!1}function Le(ee){let X=s.render.frame;p.get(ee)!==X&&(p.set(ee,X),ee.update())}function Be(ee,X){let ue=ee.encoding,Oe=ee.format,Y=ee.type;return ee.isCompressedTexture===!0||ee.isVideoTexture===!0||ee.format===aA||ue!==Sl&&(ue===Ei?o===!1?t.has("EXT_sRGB")===!0&&Oe===ra?(ee.format=aA,ee.minFilter=Ti,ee.generateMipmaps=!1):X=XH.sRGBToLinear(X):(Oe!==ra||Y!==Ga)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ue)),X}this.allocateTextureUnit=I,this.resetTextureUnits=N,this.setTexture2D=z,this.setTexture2DArray=V,this.setTexture3D=W,this.setTextureCube=G,this.rebindTextures=oe,this.setupRenderTarget=ge,this.updateRenderTargetMipmap=Ie,this.updateMultisampleRenderTarget=we,this.setupDepthRenderbuffer=Z,this.setupFrameBufferTexture=pe,this.useMultisampledRTT=Se}function ufe(e,t,i){let r=i.isWebGL2;function n(a,s=null){let o;if(a===Ga)return 5121;if(a===$oe)return 32819;if(a===Zoe)return 32820;if(a===joe)return 5120;if(a===Woe)return 5122;if(a===jH)return 5123;if(a===Goe)return 5124;if(a===vu)return 5125;if(a===En)return 5126;if(a===Mu)return r?5131:(o=t.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(a===qoe)return 6406;if(a===ra)return 6408;if(a===Yoe)return 6409;if(a===Koe)return 6410;if(a===Rf)return 6402;if(a===Hf)return 34041;if(a===aA)return o=t.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(a===Xoe)return 6403;if(a===Qoe)return 36244;if(a===q2)return 33319;if(a===Joe)return 33320;if(a===WH)return 36249;if(a===O3||a===R3||a===k3||a===L3)if(s===Ei)if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(a===O3)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(a===R3)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(a===k3)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(a===L3)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(a===O3)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===R3)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===k3)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===L3)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===RR||a===kR||a===LR||a===BR)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(a===RR)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===kR)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===LR)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===BR)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===ele)return o=t.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(a===NR||a===FR)if(o=t.get("WEBGL_compressed_texture_etc"),o!==null){if(a===NR)return s===Ei?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(a===FR)return s===Ei?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(a===zR||a===VR||a===UR||a===HR||a===jR||a===WR||a===GR||a===$R||a===ZR||a===qR||a===YR||a===KR||a===XR||a===QR)if(o=t.get("WEBGL_compressed_texture_astc"),o!==null){if(a===zR)return s===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(a===VR)return s===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(a===UR)return s===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(a===HR)return s===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(a===jR)return s===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(a===WR)return s===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(a===GR)return s===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(a===$R)return s===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(a===ZR)return s===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(a===qR)return s===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(a===YR)return s===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(a===KR)return s===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(a===XR)return s===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(a===QR)return s===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(a===B3)if(o=t.get("EXT_texture_compression_bptc"),o!==null){if(a===B3)return s===Ei?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(a===tle||a===JR||a===ek||a===tk)if(o=t.get("EXT_texture_compression_rgtc"),o!==null){if(a===B3)return o.COMPRESSED_RED_RGTC1_EXT;if(a===JR)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(a===ek)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(a===tk)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return a===Of?r?34042:(o=t.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):e[a]!==void 0?e[a]:null}return{convert:n}}var dfe=class extends Ba{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},yu=class extends dr{constructor(){super(),this.isGroup=!0,this.type="Group"}},hfe={type:"move"},lC=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new yu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new yu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new H,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new H),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new yu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new H,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new H),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,n=null,a=null,s=this._targetRay,o=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){a=!0;for(let p of e.hand.values()){let m=t.getJointPose(p,i),v=this._getHandJoint(l,p);m!==null&&(v.matrix.fromArray(m.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=m.radius),v.visible=m!==null}let c=l.joints["index-finger-tip"],u=l.joints["thumb-tip"],d=c.position.distanceTo(u.position),h=.02,f=.005;l.inputState.pinching&&d>h+f?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&d<=h-f&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else o!==null&&e.gripSpace&&(n=t.getPose(e.gripSpace,i),n!==null&&(o.matrix.fromArray(n.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),n.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(n.linearVelocity)):o.hasLinearVelocity=!1,n.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(n.angularVelocity)):o.hasAngularVelocity=!1));s!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&n!==null&&(r=n),r!==null&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(hfe)))}return s!==null&&(s.visible=r!==null),o!==null&&(o.visible=n!==null),l!==null&&(l.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let i=new yu;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}},uv=class extends Kr{constructor(e,t,i,r,n,a,s,o,l,c){if(c=c!==void 0?c:Rf,c!==Rf&&c!==Hf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&c===Rf&&(i=vu),i===void 0&&c===Hf&&(i=Of),super(null,r,n,a,s,o,c,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=s!==void 0?s:or,this.minFilter=o!==void 0?o:or,this.flipY=!1,this.generateMipmaps=!1}},ffe=class extends Pa{constructor(e,t){super();let i=this,r=null,n=1,a=null,s="local-floor",o=1,l=null,c=null,u=null,d=null,h=null,f=null,p=t.getContextAttributes(),m=null,v=null,y=[],x=[],b=new Set,w=new Map,S=new Ba;S.layers.enable(1),S.viewport=new vi;let _=new Ba;_.layers.enable(2),_.viewport=new vi;let E=[S,_],C=new dfe;C.layers.enable(1),C.layers.enable(2);let A=null,M=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(V){let W=y[V];return W===void 0&&(W=new lC,y[V]=W),W.getTargetRaySpace()},this.getControllerGrip=function(V){let W=y[V];return W===void 0&&(W=new lC,y[V]=W),W.getGripSpace()},this.getHand=function(V){let W=y[V];return W===void 0&&(W=new lC,y[V]=W),W.getHandSpace()};function T(V){let W=x.indexOf(V.inputSource);if(W===-1)return;let G=y[W];G!==void 0&&G.dispatchEvent({type:V.type,data:V.inputSource})}function P(){r.removeEventListener("select",T),r.removeEventListener("selectstart",T),r.removeEventListener("selectend",T),r.removeEventListener("squeeze",T),r.removeEventListener("squeezestart",T),r.removeEventListener("squeezeend",T),r.removeEventListener("end",P),r.removeEventListener("inputsourceschange",D);for(let V=0;V<y.length;V++){let W=x[V];W!==null&&(x[V]=null,y[V].disconnect(W))}A=null,M=null,e.setRenderTarget(m),h=null,d=null,u=null,r=null,v=null,z.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(V){n=V,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(V){s=V,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(V){l=V},this.getBaseLayer=function(){return d!==null?d:h},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=async function(V){if(r=V,r!==null){if(m=e.getRenderTarget(),r.addEventListener("select",T),r.addEventListener("selectstart",T),r.addEventListener("selectend",T),r.addEventListener("squeeze",T),r.addEventListener("squeezestart",T),r.addEventListener("squeezeend",T),r.addEventListener("end",P),r.addEventListener("inputsourceschange",D),p.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){let W={antialias:r.renderState.layers===void 0?p.antialias:!0,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:n};h=new XRWebGLLayer(r,t,W),r.updateRenderState({baseLayer:h}),v=new ir(h.framebufferWidth,h.framebufferHeight,{format:ra,type:Ga,encoding:e.outputEncoding,stencilBuffer:p.stencil})}else{let W=null,G=null,q=null;p.depth&&(q=p.stencil?35056:33190,W=p.stencil?Hf:Rf,G=p.stencil?Of:vu);let ae={colorFormat:32856,depthFormat:q,scaleFactor:n};u=new XRWebGLBinding(r,t),d=u.createProjectionLayer(ae),r.updateRenderState({layers:[d]}),v=new ir(d.textureWidth,d.textureHeight,{format:ra,type:Ga,depthTexture:new uv(d.textureWidth,d.textureHeight,G,void 0,void 0,void 0,void 0,void 0,void 0,W),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0});let J=e.properties.get(v);J.__ignoreDepthValues=d.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(o),l=null,a=await r.requestReferenceSpace(s),z.setContext(r),z.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function D(V){for(let W=0;W<V.removed.length;W++){let G=V.removed[W],q=x.indexOf(G);q>=0&&(x[q]=null,y[q].disconnect(G))}for(let W=0;W<V.added.length;W++){let G=V.added[W],q=x.indexOf(G);if(q===-1){for(let J=0;J<y.length;J++)if(J>=x.length){x.push(G),q=J;break}else if(x[J]===null){x[J]=G,q=J;break}if(q===-1)break}let ae=y[q];ae&&ae.connect(G)}}let k=new H,L=new H;function R(V,W,G){k.setFromMatrixPosition(W.matrixWorld),L.setFromMatrixPosition(G.matrixWorld);let q=k.distanceTo(L),ae=W.projectionMatrix.elements,J=G.projectionMatrix.elements,$=ae[14]/(ae[10]-1),te=ae[14]/(ae[10]+1),Q=(ae[9]+1)/ae[5],pe=(ae[9]-1)/ae[5],me=(ae[8]-1)/ae[0],le=(J[8]+1)/J[0],Z=$*me,oe=$*le,ge=q/(-me+le),Ie=ge*-me;W.matrixWorld.decompose(V.position,V.quaternion,V.scale),V.translateX(Ie),V.translateZ(ge),V.matrixWorld.compose(V.position,V.quaternion,V.scale),V.matrixWorldInverse.copy(V.matrixWorld).invert();let we=$+ge,xe=te+ge,Se=Z-Ie,Le=oe+(q-Ie),Be=Q*te/xe*we,ee=pe*te/xe*we;V.projectionMatrix.makePerspective(Se,Le,Be,ee,we,xe)}function N(V,W){W===null?V.matrixWorld.copy(V.matrix):V.matrixWorld.multiplyMatrices(W.matrixWorld,V.matrix),V.matrixWorldInverse.copy(V.matrixWorld).invert()}this.updateCamera=function(V){if(r===null)return;C.near=_.near=S.near=V.near,C.far=_.far=S.far=V.far,(A!==C.near||M!==C.far)&&(r.updateRenderState({depthNear:C.near,depthFar:C.far}),A=C.near,M=C.far);let W=V.parent,G=C.cameras;N(C,W);for(let ae=0;ae<G.length;ae++)N(G[ae],W);C.matrixWorld.decompose(C.position,C.quaternion,C.scale),V.matrix.copy(C.matrix),V.matrix.decompose(V.position,V.quaternion,V.scale);let q=V.children;for(let ae=0,J=q.length;ae<J;ae++)q[ae].updateMatrixWorld(!0);G.length===2?R(C,S,_):C.projectionMatrix.copy(S.projectionMatrix)},this.getCamera=function(){return C},this.getFoveation=function(){if(!(d===null&&h===null))return o},this.setFoveation=function(V){o=V,d!==null&&(d.fixedFoveation=V),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=V)},this.getPlanes=function(){return b};let I=null;function B(V,W){if(c=W.getViewerPose(l||a),f=W,c!==null){let G=c.views;h!==null&&(e.setRenderTargetFramebuffer(v,h.framebuffer),e.setRenderTarget(v));let q=!1;G.length!==C.cameras.length&&(C.cameras.length=0,q=!0);for(let ae=0;ae<G.length;ae++){let J=G[ae],$=null;if(h!==null)$=h.getViewport(J);else{let Q=u.getViewSubImage(d,J);$=Q.viewport,ae===0&&(e.setRenderTargetTextures(v,Q.colorTexture,d.ignoreDepthValues?void 0:Q.depthStencilTexture),e.setRenderTarget(v))}let te=E[ae];te===void 0&&(te=new Ba,te.layers.enable(ae),te.viewport=new vi,E[ae]=te),te.matrix.fromArray(J.transform.matrix),te.projectionMatrix.fromArray(J.projectionMatrix),te.viewport.set($.x,$.y,$.width,$.height),ae===0&&C.matrix.copy(te.matrix),q===!0&&C.cameras.push(te)}}for(let G=0;G<y.length;G++){let q=x[G],ae=y[G];q!==null&&ae!==void 0&&ae.update(q,W,l||a)}if(I&&I(V,W),W.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:W.detectedPlanes});let G=null;for(let q of b)W.detectedPlanes.has(q)||(G===null&&(G=[]),G.push(q));if(G!==null)for(let q of G)b.delete(q),w.delete(q),i.dispatchEvent({type:"planeremoved",data:q});for(let q of W.detectedPlanes)if(!b.has(q))b.add(q),w.set(q,W.lastChangedTime),i.dispatchEvent({type:"planeadded",data:q});else{let ae=w.get(q);q.lastChangedTime>ae&&(w.set(q,q.lastChangedTime),i.dispatchEvent({type:"planechanged",data:q}))}}f=null}let z=new ij;z.setAnimationLoop(B),this.setAnimationLoop=function(V){I=V},this.dispose=function(){}}};function pfe(e,t){function i(m,v){v.color.getRGB(m.fogColor.value,tj(e)),v.isFog?(m.fogNear.value=v.near,m.fogFar.value=v.far):v.isFogExp2&&(m.fogDensity.value=v.density)}function r(m,v,y,x,b){v.isMeshBasicMaterial||v.isMeshLambertMaterial?n(m,v):v.isMeshToonMaterial?(n(m,v),u(m,v)):v.isMeshPhongMaterial?(n(m,v),c(m,v)):v.isMeshStandardMaterial?(n(m,v),d(m,v),v.isMeshPhysicalMaterial&&h(m,v,b)):v.isMeshMatcapMaterial?(n(m,v),f(m,v)):v.isMeshDepthMaterial?n(m,v):v.isMeshDistanceMaterial?(n(m,v),p(m,v)):v.isMeshNormalMaterial?n(m,v):v.isLineBasicMaterial?(a(m,v),v.isLineDashedMaterial&&s(m,v)):v.isPointsMaterial?o(m,v,y,x):v.isSpriteMaterial?l(m,v):v.isShadowMaterial?(m.color.value.copy(v.color),m.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function n(m,v){m.opacity.value=v.opacity,v.color&&m.diffuse.value.copy(v.color),v.emissive&&m.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(m.map.value=v.map),v.alphaMap&&(m.alphaMap.value=v.alphaMap),v.bumpMap&&(m.bumpMap.value=v.bumpMap,m.bumpScale.value=v.bumpScale,v.side===aa&&(m.bumpScale.value*=-1)),v.displacementMap&&(m.displacementMap.value=v.displacementMap,m.displacementScale.value=v.displacementScale,m.displacementBias.value=v.displacementBias),v.emissiveMap&&(m.emissiveMap.value=v.emissiveMap),v.normalMap&&(m.normalMap.value=v.normalMap,m.normalScale.value.copy(v.normalScale),v.side===aa&&m.normalScale.value.negate()),v.specularMap&&(m.specularMap.value=v.specularMap),v.alphaTest>0&&(m.alphaTest.value=v.alphaTest);let y=t.get(v).envMap;if(y&&(m.envMap.value=y,m.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=v.reflectivity,m.ior.value=v.ior,m.refractionRatio.value=v.refractionRatio),v.lightMap){m.lightMap.value=v.lightMap;let w=e.physicallyCorrectLights!==!0?Math.PI:1;m.lightMapIntensity.value=v.lightMapIntensity*w}v.aoMap&&(m.aoMap.value=v.aoMap,m.aoMapIntensity.value=v.aoMapIntensity);let x;v.map?x=v.map:v.specularMap?x=v.specularMap:v.displacementMap?x=v.displacementMap:v.normalMap?x=v.normalMap:v.bumpMap?x=v.bumpMap:v.roughnessMap?x=v.roughnessMap:v.metalnessMap?x=v.metalnessMap:v.alphaMap?x=v.alphaMap:v.emissiveMap?x=v.emissiveMap:v.clearcoatMap?x=v.clearcoatMap:v.clearcoatNormalMap?x=v.clearcoatNormalMap:v.clearcoatRoughnessMap?x=v.clearcoatRoughnessMap:v.iridescenceMap?x=v.iridescenceMap:v.iridescenceThicknessMap?x=v.iridescenceThicknessMap:v.specularIntensityMap?x=v.specularIntensityMap:v.specularColorMap?x=v.specularColorMap:v.transmissionMap?x=v.transmissionMap:v.thicknessMap?x=v.thicknessMap:v.sheenColorMap?x=v.sheenColorMap:v.sheenRoughnessMap&&(x=v.sheenRoughnessMap),x!==void 0&&(x.isWebGLRenderTarget&&(x=x.texture),x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uvTransform.value.copy(x.matrix));let b;v.aoMap?b=v.aoMap:v.lightMap&&(b=v.lightMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),m.uv2Transform.value.copy(b.matrix))}function a(m,v){m.diffuse.value.copy(v.color),m.opacity.value=v.opacity}function s(m,v){m.dashSize.value=v.dashSize,m.totalSize.value=v.dashSize+v.gapSize,m.scale.value=v.scale}function o(m,v,y,x){m.diffuse.value.copy(v.color),m.opacity.value=v.opacity,m.size.value=v.size*y,m.scale.value=x*.5,v.map&&(m.map.value=v.map),v.alphaMap&&(m.alphaMap.value=v.alphaMap),v.alphaTest>0&&(m.alphaTest.value=v.alphaTest);let b;v.map?b=v.map:v.alphaMap&&(b=v.alphaMap),b!==void 0&&(b.matrixAutoUpdate===!0&&b.updateMatrix(),m.uvTransform.value.copy(b.matrix))}function l(m,v){m.diffuse.value.copy(v.color),m.opacity.value=v.opacity,m.rotation.value=v.rotation,v.map&&(m.map.value=v.map),v.alphaMap&&(m.alphaMap.value=v.alphaMap),v.alphaTest>0&&(m.alphaTest.value=v.alphaTest);let y;v.map?y=v.map:v.alphaMap&&(y=v.alphaMap),y!==void 0&&(y.matrixAutoUpdate===!0&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix))}function c(m,v){m.specular.value.copy(v.specular),m.shininess.value=Math.max(v.shininess,1e-4)}function u(m,v){v.gradientMap&&(m.gradientMap.value=v.gradientMap)}function d(m,v){m.roughness.value=v.roughness,m.metalness.value=v.metalness,v.roughnessMap&&(m.roughnessMap.value=v.roughnessMap),v.metalnessMap&&(m.metalnessMap.value=v.metalnessMap),t.get(v).envMap&&(m.envMapIntensity.value=v.envMapIntensity)}function h(m,v,y){m.ior.value=v.ior,v.sheen>0&&(m.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),m.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(m.sheenColorMap.value=v.sheenColorMap),v.sheenRoughnessMap&&(m.sheenRoughnessMap.value=v.sheenRoughnessMap)),v.clearcoat>0&&(m.clearcoat.value=v.clearcoat,m.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(m.clearcoatMap.value=v.clearcoatMap),v.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap),v.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),m.clearcoatNormalMap.value=v.clearcoatNormalMap,v.side===aa&&m.clearcoatNormalScale.value.negate())),v.iridescence>0&&(m.iridescence.value=v.iridescence,m.iridescenceIOR.value=v.iridescenceIOR,m.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(m.iridescenceMap.value=v.iridescenceMap),v.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=v.iridescenceThicknessMap)),v.transmission>0&&(m.transmission.value=v.transmission,m.transmissionSamplerMap.value=y.texture,m.transmissionSamplerSize.value.set(y.width,y.height),v.transmissionMap&&(m.transmissionMap.value=v.transmissionMap),m.thickness.value=v.thickness,v.thicknessMap&&(m.thicknessMap.value=v.thicknessMap),m.attenuationDistance.value=v.attenuationDistance,m.attenuationColor.value.copy(v.attenuationColor)),m.specularIntensity.value=v.specularIntensity,m.specularColor.value.copy(v.specularColor),v.specularIntensityMap&&(m.specularIntensityMap.value=v.specularIntensityMap),v.specularColorMap&&(m.specularColorMap.value=v.specularColorMap)}function f(m,v){v.matcap&&(m.matcap.value=v.matcap)}function p(m,v){m.referencePosition.value.copy(v.referencePosition),m.nearDistance.value=v.nearDistance,m.farDistance.value=v.farDistance}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function mfe(e,t,i,r){let n={},a={},s=[],o=i.isWebGL2?e.getParameter(35375):0;function l(x,b){let w=b.program;r.uniformBlockBinding(x,w)}function c(x,b){let w=n[x.id];w===void 0&&(p(x),w=u(x),n[x.id]=w,x.addEventListener("dispose",v));let S=b.program;r.updateUBOMapping(x,S);let _=t.render.frame;a[x.id]!==_&&(h(x),a[x.id]=_)}function u(x){let b=d();x.__bindingPointIndex=b;let w=e.createBuffer(),S=x.__size,_=x.usage;return e.bindBuffer(35345,w),e.bufferData(35345,S,_),e.bindBuffer(35345,null),e.bindBufferBase(35345,b,w),w}function d(){for(let x=0;x<o;x++)if(s.indexOf(x)===-1)return s.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(x){let b=n[x.id],w=x.uniforms,S=x.__cache;e.bindBuffer(35345,b);for(let _=0,E=w.length;_<E;_++){let C=w[_];if(f(C,_,S)===!0){let A=C.__offset,M=Array.isArray(C.value)?C.value:[C.value],T=0;for(let P=0;P<M.length;P++){let D=M[P],k=m(D);typeof D=="number"?(C.__data[0]=D,e.bufferSubData(35345,A+T,C.__data)):D.isMatrix3?(C.__data[0]=D.elements[0],C.__data[1]=D.elements[1],C.__data[2]=D.elements[2],C.__data[3]=D.elements[0],C.__data[4]=D.elements[3],C.__data[5]=D.elements[4],C.__data[6]=D.elements[5],C.__data[7]=D.elements[0],C.__data[8]=D.elements[6],C.__data[9]=D.elements[7],C.__data[10]=D.elements[8],C.__data[11]=D.elements[0]):(D.toArray(C.__data,T),T+=k.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,A,C.__data)}}e.bindBuffer(35345,null)}function f(x,b,w){let S=x.value;if(w[b]===void 0){if(typeof S=="number")w[b]=S;else{let _=Array.isArray(S)?S:[S],E=[];for(let C=0;C<_.length;C++)E.push(_[C].clone());w[b]=E}return!0}else if(typeof S=="number"){if(w[b]!==S)return w[b]=S,!0}else{let _=Array.isArray(w[b])?w[b]:[w[b]],E=Array.isArray(S)?S:[S];for(let C=0;C<_.length;C++){let A=_[C];if(A.equals(E[C])===!1)return A.copy(E[C]),!0}}return!1}function p(x){let b=x.uniforms,w=0,S=16,_=0;for(let E=0,C=b.length;E<C;E++){let A=b[E],M={boundary:0,storage:0},T=Array.isArray(A.value)?A.value:[A.value];for(let P=0,D=T.length;P<D;P++){let k=T[P],L=m(k);M.boundary+=L.boundary,M.storage+=L.storage}if(A.__data=new Float32Array(M.storage/Float32Array.BYTES_PER_ELEMENT),A.__offset=w,E>0){_=w%S;let P=S-_;_!==0&&P-M.boundary<0&&(w+=S-_,A.__offset=w)}w+=M.storage}return _=w%S,_>0&&(w+=S-_),x.__size=w,x.__cache={},this}function m(x){let b={boundary:0,storage:0};return typeof x=="number"?(b.boundary=4,b.storage=4):x.isVector2?(b.boundary=8,b.storage=8):x.isVector3||x.isColor?(b.boundary=16,b.storage=12):x.isVector4?(b.boundary=16,b.storage=16):x.isMatrix3?(b.boundary=48,b.storage=48):x.isMatrix4?(b.boundary=64,b.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),b}function v(x){let b=x.target;b.removeEventListener("dispose",v);let w=s.indexOf(b.__bindingPointIndex);s.splice(w,1),e.deleteBuffer(n[b.id]),delete n[b.id],delete a[b.id]}function y(){for(let x in n)e.deleteBuffer(n[x]);s=[],n={},a={}}return{bind:l,update:c,dispose:y}}function vfe(){let e=a1("canvas");return e.style.display="block",e}function lj(e={}){this.isWebGLRenderer=!0;let t=e.canvas!==void 0?e.canvas:vfe(),i=e.context!==void 0?e.context:null,r=e.depth!==void 0?e.depth:!0,n=e.stencil!==void 0?e.stencil:!0,a=e.antialias!==void 0?e.antialias:!1,s=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,o=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,l=e.powerPreference!==void 0?e.powerPreference:"default",c=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1,u;i!==null?u=i.getContextAttributes().alpha:u=e.alpha!==void 0?e.alpha:!1;let d=null,h=null,f=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Sl,this.physicallyCorrectLights=!1,this.toneMapping=dc,this.toneMappingExposure=1;let m=this,v=!1,y=0,x=0,b=null,w=-1,S=null,_=new vi,E=new vi,C=null,A=t.width,M=t.height,T=1,P=null,D=null,k=new vi(0,0,A,M),L=new vi(0,0,A,M),R=!1,N=new iP,I=!1,B=!1,z=null,V=new pt,W=new Pe,G=new H,q={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ae(){return b===null?T:1}let J=i;function $(Ce,Ke){for(let nt=0;nt<Ce.length;nt++){let We=Ce[nt],Me=t.getContext(We,Ke);if(Me!==null)return Me}return null}try{let Ce={alpha:!0,depth:r,stencil:n,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:o,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${zv}`),t.addEventListener("webglcontextlost",he,!1),t.addEventListener("webglcontextrestored",ke,!1),t.addEventListener("webglcontextcreationerror",se,!1),J===null){let Ke=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&Ke.shift(),J=$(Ke,Ce),J===null)throw $(Ke)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}J.getShaderPrecisionFormat===void 0&&(J.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ce){throw console.error("THREE.WebGLRenderer: "+Ce.message),Ce}let te,Q,pe,me,le,Z,oe,ge,Ie,we,xe,Se,Le,Be,ee,X,ue,Oe,Y,qe,et,tt,ze,vt;function _e(){te=new Pde(J),Q=new Sde(J,te,e),te.init(Q),tt=new ufe(J,te,Q),pe=new lfe(J,te,Q),me=new Ode,le=new Yhe,Z=new cfe(J,te,pe,le,Q,tt,me),oe=new Ede(m),ge=new Tde(m),Ie=new Ule(J,Q),ze=new xde(J,te,Ie,Q),we=new Dde(J,Ie,me,ze),xe=new Bde(J,we,Ie,me),Y=new Lde(J,Q,Z),X=new Cde(le),Se=new qhe(m,oe,ge,te,Q,ze,X),Le=new pfe(m,le),Be=new Xhe,ee=new rfe(te,Q),Oe=new wde(m,oe,ge,pe,xe,u,s),ue=new ofe(m,xe,Q),vt=new mfe(J,me,Q,pe),qe=new _de(J,te,me,Q),et=new Ide(J,te,me,Q),me.programs=Se.programs,m.capabilities=Q,m.extensions=te,m.properties=le,m.renderLists=Be,m.shadowMap=ue,m.state=pe,m.info=me}_e();let Fe=new ffe(m,J);this.xr=Fe,this.getContext=function(){return J},this.getContextAttributes=function(){return J.getContextAttributes()},this.forceContextLoss=function(){let Ce=te.get("WEBGL_lose_context");Ce&&Ce.loseContext()},this.forceContextRestore=function(){let Ce=te.get("WEBGL_lose_context");Ce&&Ce.restoreContext()},this.getPixelRatio=function(){return T},this.setPixelRatio=function(Ce){Ce!==void 0&&(T=Ce,this.setSize(A,M,!1))},this.getSize=function(Ce){return Ce.set(A,M)},this.setSize=function(Ce,Ke,nt){if(Fe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}A=Ce,M=Ke,t.width=Math.floor(Ce*T),t.height=Math.floor(Ke*T),nt!==!1&&(t.style.width=Ce+"px",t.style.height=Ke+"px"),this.setViewport(0,0,Ce,Ke)},this.getDrawingBufferSize=function(Ce){return Ce.set(A*T,M*T).floor()},this.setDrawingBufferSize=function(Ce,Ke,nt){A=Ce,M=Ke,T=nt,t.width=Math.floor(Ce*nt),t.height=Math.floor(Ke*nt),this.setViewport(0,0,Ce,Ke)},this.getCurrentViewport=function(Ce){return Ce.copy(_)},this.getViewport=function(Ce){return Ce.copy(k)},this.setViewport=function(Ce,Ke,nt,We){Ce.isVector4?k.set(Ce.x,Ce.y,Ce.z,Ce.w):k.set(Ce,Ke,nt,We),pe.viewport(_.copy(k).multiplyScalar(T).floor())},this.getScissor=function(Ce){return Ce.copy(L)},this.setScissor=function(Ce,Ke,nt,We){Ce.isVector4?L.set(Ce.x,Ce.y,Ce.z,Ce.w):L.set(Ce,Ke,nt,We),pe.scissor(E.copy(L).multiplyScalar(T).floor())},this.getScissorTest=function(){return R},this.setScissorTest=function(Ce){pe.setScissorTest(R=Ce)},this.setOpaqueSort=function(Ce){P=Ce},this.setTransparentSort=function(Ce){D=Ce},this.getClearColor=function(Ce){return Ce.copy(Oe.getClearColor())},this.setClearColor=function(){Oe.setClearColor.apply(Oe,arguments)},this.getClearAlpha=function(){return Oe.getClearAlpha()},this.setClearAlpha=function(){Oe.setClearAlpha.apply(Oe,arguments)},this.clear=function(Ce=!0,Ke=!0,nt=!0){let We=0;Ce&&(We|=16384),Ke&&(We|=256),nt&&(We|=1024),J.clear(We)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",he,!1),t.removeEventListener("webglcontextrestored",ke,!1),t.removeEventListener("webglcontextcreationerror",se,!1),Be.dispose(),ee.dispose(),le.dispose(),oe.dispose(),ge.dispose(),xe.dispose(),ze.dispose(),vt.dispose(),Se.dispose(),Fe.dispose(),Fe.removeEventListener("sessionstart",wt),Fe.removeEventListener("sessionend",Pt),z&&(z.dispose(),z=null),_t.stop()};function he(Ce){Ce.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function ke(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1;let Ce=me.autoReset,Ke=ue.enabled,nt=ue.autoUpdate,We=ue.needsUpdate,Me=ue.type;_e(),me.autoReset=Ce,ue.enabled=Ke,ue.autoUpdate=nt,ue.needsUpdate=We,ue.type=Me}function se(Ce){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ce.statusMessage)}function He(Ce){let Ke=Ce.target;Ke.removeEventListener("dispose",He),yt(Ke)}function yt(Ce){Te(Ce),le.remove(Ce)}function Te(Ce){let Ke=le.get(Ce).programs;Ke!==void 0&&(Ke.forEach(function(nt){Se.releaseProgram(nt)}),Ce.isShaderMaterial&&Se.releaseShaderCache(Ce))}this.renderBufferDirect=function(Ce,Ke,nt,We,Me,Je){Ke===null&&(Ke=q);let St=Me.isMesh&&Me.matrixWorld.determinant()<0,Gt=kh(Ce,Ke,nt,We,Me);pe.setMaterial(We,St);let zt=nt.index,Li=1;We.wireframe===!0&&(zt=we.getWireframeAttribute(nt),Li=2);let hi=nt.drawRange,wi=nt.attributes.position,fi=hi.start*Li,Jr=(hi.start+hi.count)*Li;Je!==null&&(fi=Math.max(fi,Je.start*Li),Jr=Math.min(Jr,(Je.start+Je.count)*Li)),zt!==null?(fi=Math.max(fi,0),Jr=Math.min(Jr,zt.count)):wi!=null&&(fi=Math.max(fi,0),Jr=Math.min(Jr,wi.count));let Xe=Jr-fi;if(Xe<0||Xe===1/0)return;ze.setup(Me,We,Gt,nt,zt);let Ct,Ot=qe;if(zt!==null&&(Ct=Ie.get(zt),Ot=et,Ot.setIndex(Ct)),Me.isMesh)We.wireframe===!0?(pe.setLineWidth(We.wireframeLinewidth*ae()),Ot.setMode(1)):Ot.setMode(4);else if(Me.isLine){let Mt=We.linewidth;Mt===void 0&&(Mt=1),pe.setLineWidth(Mt*ae()),Me.isLineSegments?Ot.setMode(1):Me.isLineLoop?Ot.setMode(2):Ot.setMode(3)}else Me.isPoints?Ot.setMode(0):Me.isSprite&&Ot.setMode(4);if(Me.isInstancedMesh)Ot.renderInstances(fi,Xe,Me.count);else if(nt.isInstancedBufferGeometry){let Mt=nt._maxInstanceCount!==void 0?nt._maxInstanceCount:1/0,Pr=Math.min(nt.instanceCount,Mt);Ot.renderInstances(fi,Xe,Pr)}else Ot.render(fi,Xe)},this.compile=function(Ce,Ke){function nt(We,Me,Je){We.transparent===!0&&We.side===za&&We.forceSinglePass===!1?(We.side=aa,We.needsUpdate=!0,Qr(We,Me,Je),We.side=_l,We.needsUpdate=!0,Qr(We,Me,Je),We.side=za):Qr(We,Me,Je)}h=ee.get(Ce),h.init(),p.push(h),Ce.traverseVisible(function(We){We.isLight&&We.layers.test(Ke.layers)&&(h.pushLight(We),We.castShadow&&h.pushShadow(We))}),h.setupLights(m.physicallyCorrectLights),Ce.traverse(function(We){let Me=We.material;if(Me)if(Array.isArray(Me))for(let Je=0;Je<Me.length;Je++){let St=Me[Je];nt(St,Ce,We)}else nt(Me,Ce,We)}),p.pop(),h=null};let $e=null;function st(Ce){$e&&$e(Ce)}function wt(){_t.stop()}function Pt(){_t.start()}let _t=new ij;_t.setAnimationLoop(st),typeof self<"u"&&_t.setContext(self),this.setAnimationLoop=function(Ce){$e=Ce,Fe.setAnimationLoop(Ce),Ce===null?_t.stop():_t.start()},Fe.addEventListener("sessionstart",wt),Fe.addEventListener("sessionend",Pt),this.render=function(Ce,Ke){if(Ke!==void 0&&Ke.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(v===!0)return;Ce.matrixWorldAutoUpdate===!0&&Ce.updateMatrixWorld(),Ke.parent===null&&Ke.matrixWorldAutoUpdate===!0&&Ke.updateMatrixWorld(),Fe.enabled===!0&&Fe.isPresenting===!0&&(Fe.cameraAutoUpdate===!0&&Fe.updateCamera(Ke),Ke=Fe.getCamera()),Ce.isScene===!0&&Ce.onBeforeRender(m,Ce,Ke,b),h=ee.get(Ce,p.length),h.init(),p.push(h),V.multiplyMatrices(Ke.projectionMatrix,Ke.matrixWorldInverse),N.setFromProjectionMatrix(V),B=this.localClippingEnabled,I=X.init(this.clippingPlanes,B),d=Be.get(Ce,f.length),d.init(),f.push(d),Vi(Ce,Ke,0,m.sortObjects),d.finish(),m.sortObjects===!0&&d.sort(P,D),I===!0&&X.beginShadows();let nt=h.state.shadowsArray;if(ue.render(nt,Ce,Ke),I===!0&&X.endShadows(),this.info.autoReset===!0&&this.info.reset(),Oe.render(d,Ce),h.setupLights(m.physicallyCorrectLights),Ke.isArrayCamera){let We=Ke.cameras;for(let Me=0,Je=We.length;Me<Je;Me++){let St=We[Me];$r(d,Ce,St,St.viewport)}}else $r(d,Ce,Ke);b!==null&&(Z.updateMultisampleRenderTarget(b),Z.updateRenderTargetMipmap(b)),Ce.isScene===!0&&Ce.onAfterRender(m,Ce,Ke),ze.resetDefaultState(),w=-1,S=null,p.pop(),p.length>0?h=p[p.length-1]:h=null,f.pop(),f.length>0?d=f[f.length-1]:d=null};function Vi(Ce,Ke,nt,We){if(Ce.visible===!1)return;if(Ce.layers.test(Ke.layers)){if(Ce.isGroup)nt=Ce.renderOrder;else if(Ce.isLOD)Ce.autoUpdate===!0&&Ce.update(Ke);else if(Ce.isLight)h.pushLight(Ce),Ce.castShadow&&h.pushShadow(Ce);else if(Ce.isSprite){if(!Ce.frustumCulled||N.intersectsSprite(Ce)){We&&G.setFromMatrixPosition(Ce.matrixWorld).applyMatrix4(V);let Je=xe.update(Ce),St=Ce.material;St.visible&&d.push(Ce,Je,St,nt,G.z,null)}}else if((Ce.isMesh||Ce.isLine||Ce.isPoints)&&(Ce.isSkinnedMesh&&Ce.skeleton.frame!==me.render.frame&&(Ce.skeleton.update(),Ce.skeleton.frame=me.render.frame),!Ce.frustumCulled||N.intersectsObject(Ce))){We&&G.setFromMatrixPosition(Ce.matrixWorld).applyMatrix4(V);let Je=xe.update(Ce),St=Ce.material;if(Array.isArray(St)){let Gt=Je.groups;for(let zt=0,Li=Gt.length;zt<Li;zt++){let hi=Gt[zt],wi=St[hi.materialIndex];wi&&wi.visible&&d.push(Ce,Je,wi,nt,G.z,hi)}}else St.visible&&d.push(Ce,Je,St,nt,G.z,null)}}let Me=Ce.children;for(let Je=0,St=Me.length;Je<St;Je++)Vi(Me[Je],Ke,nt,We)}function $r(Ce,Ke,nt,We){let Me=Ce.opaque,Je=Ce.transmissive,St=Ce.transparent;h.setupLightsView(nt),I===!0&&X.setGlobalState(m.clippingPlanes,nt),Je.length>0&&Ka(Me,Ke,nt),We&&pe.viewport(_.copy(We)),Me.length>0&&ar(Me,Ke,nt),Je.length>0&&ar(Je,Ke,nt),St.length>0&&ar(St,Ke,nt),pe.buffers.depth.setTest(!0),pe.buffers.depth.setMask(!0),pe.buffers.color.setMask(!0),pe.setPolygonOffset(!1)}function Ka(Ce,Ke,nt){let We=Q.isWebGL2;z===null&&(z=new ir(1,1,{generateMipmaps:!0,type:te.has("EXT_color_buffer_half_float")?Mu:Ga,minFilter:lv,samples:We&&a===!0?4:0})),m.getDrawingBufferSize(W),We?z.setSize(W.x,W.y):z.setSize(J2(W.x),J2(W.y));let Me=m.getRenderTarget();m.setRenderTarget(z),m.clear();let Je=m.toneMapping;m.toneMapping=dc,ar(Ce,Ke,nt),m.toneMapping=Je,Z.updateMultisampleRenderTarget(z),Z.updateRenderTargetMipmap(z),m.setRenderTarget(Me)}function ar(Ce,Ke,nt){let We=Ke.isScene===!0?Ke.overrideMaterial:null;for(let Me=0,Je=Ce.length;Me<Je;Me++){let St=Ce[Me],Gt=St.object,zt=St.geometry,Li=We===null?St.material:We,hi=St.group;Gt.layers.test(nt.layers)&&fa(Gt,Ke,nt,zt,Li,hi)}}function fa(Ce,Ke,nt,We,Me,Je){Ce.onBeforeRender(m,Ke,nt,We,Me,Je),Ce.modelViewMatrix.multiplyMatrices(nt.matrixWorldInverse,Ce.matrixWorld),Ce.normalMatrix.getNormalMatrix(Ce.modelViewMatrix),Me.onBeforeRender(m,Ke,nt,We,Ce,Je),Me.transparent===!0&&Me.side===za&&Me.forceSinglePass===!1?(Me.side=aa,Me.needsUpdate=!0,m.renderBufferDirect(nt,Ke,We,Me,Ce,Je),Me.side=_l,Me.needsUpdate=!0,m.renderBufferDirect(nt,Ke,We,Me,Ce,Je),Me.side=za):m.renderBufferDirect(nt,Ke,We,Me,Ce,Je),Ce.onAfterRender(m,Ke,nt,We,Me,Je)}function Qr(Ce,Ke,nt){Ke.isScene!==!0&&(Ke=q);let We=le.get(Ce),Me=h.state.lights,Je=h.state.shadowsArray,St=Me.state.version,Gt=Se.getParameters(Ce,Me.state,Je,Ke,nt),zt=Se.getProgramCacheKey(Gt),Li=We.programs;We.environment=Ce.isMeshStandardMaterial?Ke.environment:null,We.fog=Ke.fog,We.envMap=(Ce.isMeshStandardMaterial?ge:oe).get(Ce.envMap||We.environment),Li===void 0&&(Ce.addEventListener("dispose",He),Li=new Map,We.programs=Li);let hi=Li.get(zt);if(hi!==void 0){if(We.currentProgram===hi&&We.lightsStateVersion===St)return $o(Ce,Gt),hi}else Gt.uniforms=Se.getUniforms(Ce),Ce.onBuild(nt,Gt,m),Ce.onBeforeCompile(Gt,m),hi=Se.acquireProgram(Gt,zt),Li.set(zt,hi),We.uniforms=Gt.uniforms;let wi=We.uniforms;(!Ce.isShaderMaterial&&!Ce.isRawShaderMaterial||Ce.clipping===!0)&&(wi.clippingPlanes=X.uniform),$o(Ce,Gt),We.needsLights=Bl(Ce),We.lightsStateVersion=St,We.needsLights&&(wi.ambientLightColor.value=Me.state.ambient,wi.lightProbe.value=Me.state.probe,wi.directionalLights.value=Me.state.directional,wi.directionalLightShadows.value=Me.state.directionalShadow,wi.spotLights.value=Me.state.spot,wi.spotLightShadows.value=Me.state.spotShadow,wi.rectAreaLights.value=Me.state.rectArea,wi.ltc_1.value=Me.state.rectAreaLTC1,wi.ltc_2.value=Me.state.rectAreaLTC2,wi.pointLights.value=Me.state.point,wi.pointLightShadows.value=Me.state.pointShadow,wi.hemisphereLights.value=Me.state.hemi,wi.directionalShadowMap.value=Me.state.directionalShadowMap,wi.directionalShadowMatrix.value=Me.state.directionalShadowMatrix,wi.spotShadowMap.value=Me.state.spotShadowMap,wi.spotLightMatrix.value=Me.state.spotLightMatrix,wi.spotLightMap.value=Me.state.spotLightMap,wi.pointShadowMap.value=Me.state.pointShadowMap,wi.pointShadowMatrix.value=Me.state.pointShadowMatrix);let fi=hi.getUniforms(),Jr=$w.seqWithValue(fi.seq,wi);return We.currentProgram=hi,We.uniformsList=Jr,hi}function $o(Ce,Ke){let nt=le.get(Ce);nt.outputEncoding=Ke.outputEncoding,nt.instancing=Ke.instancing,nt.skinning=Ke.skinning,nt.morphTargets=Ke.morphTargets,nt.morphNormals=Ke.morphNormals,nt.morphColors=Ke.morphColors,nt.morphTargetsCount=Ke.morphTargetsCount,nt.numClippingPlanes=Ke.numClippingPlanes,nt.numIntersection=Ke.numClipIntersection,nt.vertexAlphas=Ke.vertexAlphas,nt.vertexTangents=Ke.vertexTangents,nt.toneMapping=Ke.toneMapping}function kh(Ce,Ke,nt,We,Me){Ke.isScene!==!0&&(Ke=q),Z.resetTextureUnits();let Je=Ke.fog,St=We.isMeshStandardMaterial?Ke.environment:null,Gt=b===null?m.outputEncoding:b.isXRRenderTarget===!0?b.texture.encoding:Sl,zt=(We.isMeshStandardMaterial?ge:oe).get(We.envMap||St),Li=We.vertexColors===!0&&!!nt.attributes.color&&nt.attributes.color.itemSize===4,hi=!!We.normalMap&&!!nt.attributes.tangent,wi=!!nt.morphAttributes.position,fi=!!nt.morphAttributes.normal,Jr=!!nt.morphAttributes.color,Xe=We.toneMapped?m.toneMapping:dc,Ct=nt.morphAttributes.position||nt.morphAttributes.normal||nt.morphAttributes.color,Ot=Ct!==void 0?Ct.length:0,Mt=le.get(We),Pr=h.state.lights;if(I===!0&&(B===!0||Ce!==S)){let ye=Ce===S&&We.id===w;X.setState(We,Ce,ye)}let pi=!1;We.version===Mt.__version?(Mt.needsLights&&Mt.lightsStateVersion!==Pr.state.version||Mt.outputEncoding!==Gt||Me.isInstancedMesh&&Mt.instancing===!1||!Me.isInstancedMesh&&Mt.instancing===!0||Me.isSkinnedMesh&&Mt.skinning===!1||!Me.isSkinnedMesh&&Mt.skinning===!0||Mt.envMap!==zt||We.fog===!0&&Mt.fog!==Je||Mt.numClippingPlanes!==void 0&&(Mt.numClippingPlanes!==X.numPlanes||Mt.numIntersection!==X.numIntersection)||Mt.vertexAlphas!==Li||Mt.vertexTangents!==hi||Mt.morphTargets!==wi||Mt.morphNormals!==fi||Mt.morphColors!==Jr||Mt.toneMapping!==Xe||Q.isWebGL2===!0&&Mt.morphTargetsCount!==Ot)&&(pi=!0):(pi=!0,Mt.__version=We.version);let Fc=Mt.currentProgram;pi===!0&&(Fc=Qr(We,Ke,Me));let Lh=!1,ed=!1,Nl=!1,re=Fc.getUniforms(),de=Mt.uniforms;if(pe.useProgram(Fc.program)&&(Lh=!0,ed=!0,Nl=!0),We.id!==w&&(w=We.id,ed=!0),Lh||S!==Ce){if(re.setValue(J,"projectionMatrix",Ce.projectionMatrix),Q.logarithmicDepthBuffer&&re.setValue(J,"logDepthBufFC",2/(Math.log(Ce.far+1)/Math.LN2)),S!==Ce&&(S=Ce,ed=!0,Nl=!0),We.isShaderMaterial||We.isMeshPhongMaterial||We.isMeshToonMaterial||We.isMeshStandardMaterial||We.envMap){let ye=re.map.cameraPosition;ye!==void 0&&ye.setValue(J,G.setFromMatrixPosition(Ce.matrixWorld))}(We.isMeshPhongMaterial||We.isMeshToonMaterial||We.isMeshLambertMaterial||We.isMeshBasicMaterial||We.isMeshStandardMaterial||We.isShaderMaterial)&&re.setValue(J,"isOrthographic",Ce.isOrthographicCamera===!0),(We.isMeshPhongMaterial||We.isMeshToonMaterial||We.isMeshLambertMaterial||We.isMeshBasicMaterial||We.isMeshStandardMaterial||We.isShaderMaterial||We.isShadowMaterial||Me.isSkinnedMesh)&&re.setValue(J,"viewMatrix",Ce.matrixWorldInverse)}if(Me.isSkinnedMesh){re.setOptional(J,Me,"bindMatrix"),re.setOptional(J,Me,"bindMatrixInverse");let ye=Me.skeleton;ye&&(Q.floatVertexTextures?(ye.boneTexture===null&&ye.computeBoneTexture(),re.setValue(J,"boneTexture",ye.boneTexture,Z),re.setValue(J,"boneTextureSize",ye.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let Re=nt.morphAttributes;if((Re.position!==void 0||Re.normal!==void 0||Re.color!==void 0&&Q.isWebGL2===!0)&&Y.update(Me,nt,We,Fc),(ed||Mt.receiveShadow!==Me.receiveShadow)&&(Mt.receiveShadow=Me.receiveShadow,re.setValue(J,"receiveShadow",Me.receiveShadow)),We.isMeshGouraudMaterial&&We.envMap!==null&&(de.envMap.value=zt,de.flipEnvMap.value=zt.isCubeTexture&&zt.isRenderTargetTexture===!1?-1:1),ed&&(re.setValue(J,"toneMappingExposure",m.toneMappingExposure),Mt.needsLights&&Ll(de,Nl),Je&&We.fog===!0&&Le.refreshFogUniforms(de,Je),Le.refreshMaterialUniforms(de,We,T,M,z),$w.upload(J,Mt.uniformsList,de,Z)),We.isShaderMaterial&&We.uniformsNeedUpdate===!0&&($w.upload(J,Mt.uniformsList,de,Z),We.uniformsNeedUpdate=!1),We.isSpriteMaterial&&re.setValue(J,"center",Me.center),re.setValue(J,"modelViewMatrix",Me.modelViewMatrix),re.setValue(J,"normalMatrix",Me.normalMatrix),re.setValue(J,"modelMatrix",Me.matrixWorld),Me.previousModelViewMatrix&&re.setValue(J,"previousModelViewMatrix",Me.previousModelViewMatrix),Ce.previousProjectionMatrix&&re.setValue(J,"previousProjectionMatrix",Ce.previousProjectionMatrix),We.isShaderMaterial||We.isRawShaderMaterial){let ye=We.uniformsGroups;for(let Ue=0,bt=ye.length;Ue<bt;Ue++)if(Q.isWebGL2){let zc=ye[Ue];vt.update(zc,Fc),vt.bind(zc,Fc)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Fc}function Ll(Ce,Ke){Ce.ambientLightColor.needsUpdate=Ke,Ce.lightProbe.needsUpdate=Ke,Ce.directionalLights.needsUpdate=Ke,Ce.directionalLightShadows.needsUpdate=Ke,Ce.pointLights.needsUpdate=Ke,Ce.pointLightShadows.needsUpdate=Ke,Ce.spotLights.needsUpdate=Ke,Ce.spotLightShadows.needsUpdate=Ke,Ce.rectAreaLights.needsUpdate=Ke,Ce.hemisphereLights.needsUpdate=Ke}function Bl(Ce){return Ce.isMeshLambertMaterial||Ce.isMeshToonMaterial||Ce.isMeshPhongMaterial||Ce.isMeshStandardMaterial||Ce.isShadowMaterial||Ce.isShaderMaterial&&Ce.lights===!0}this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(Ce,Ke,nt){le.get(Ce.texture).__webglTexture=Ke,le.get(Ce.depthTexture).__webglTexture=nt;let We=le.get(Ce);We.__hasExternalTextures=!0,We.__hasExternalTextures&&(We.__autoAllocateDepthBuffer=nt===void 0,We.__autoAllocateDepthBuffer||te.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),We.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Ce,Ke){let nt=le.get(Ce);nt.__webglFramebuffer=Ke,nt.__useDefaultFramebuffer=Ke===void 0},this.setRenderTarget=function(Ce,Ke=0,nt=0){b=Ce,y=Ke,x=nt;let We=!0,Me=null,Je=!1,St=!1;if(Ce){let Gt=le.get(Ce);Gt.__useDefaultFramebuffer!==void 0?(pe.bindFramebuffer(36160,null),We=!1):Gt.__webglFramebuffer===void 0?Z.setupRenderTarget(Ce):Gt.__hasExternalTextures&&Z.rebindTextures(Ce,le.get(Ce.texture).__webglTexture,le.get(Ce.depthTexture).__webglTexture);let zt=Ce.texture;(zt.isData3DTexture||zt.isDataArrayTexture||zt.isCompressedArrayTexture)&&(St=!0);let Li=le.get(Ce).__webglFramebuffer;Ce.isWebGLCubeRenderTarget?(Me=Li[Ke],Je=!0):Q.isWebGL2&&Ce.samples>0&&Z.useMultisampledRTT(Ce)===!1?Me=le.get(Ce).__webglMultisampledFramebuffer:Me=Li,_.copy(Ce.viewport),E.copy(Ce.scissor),C=Ce.scissorTest}else _.copy(k).multiplyScalar(T).floor(),E.copy(L).multiplyScalar(T).floor(),C=R;if(pe.bindFramebuffer(36160,Me)&&Q.drawBuffers&&We&&pe.drawBuffers(Ce,Me),pe.viewport(_),pe.scissor(E),pe.setScissorTest(C),Je){let Gt=le.get(Ce.texture);J.framebufferTexture2D(36160,36064,34069+Ke,Gt.__webglTexture,nt)}else if(St){let Gt=le.get(Ce.texture),zt=Ke||0;J.framebufferTextureLayer(36160,36064,Gt.__webglTexture,nt||0,zt)}w=-1},this.readRenderTargetPixels=function(Ce,Ke,nt,We,Me,Je,St){if(!(Ce&&Ce.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Gt=le.get(Ce).__webglFramebuffer;if(Ce.isWebGLCubeRenderTarget&&St!==void 0&&(Gt=Gt[St]),Gt){pe.bindFramebuffer(36160,Gt);try{let zt=Ce.texture,Li=zt.format,hi=zt.type;if(Li!==ra&&tt.convert(Li)!==J.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let wi=hi===Mu&&(te.has("EXT_color_buffer_half_float")||Q.isWebGL2&&te.has("EXT_color_buffer_float"));if(hi!==Ga&&tt.convert(hi)!==J.getParameter(35738)&&!(hi===En&&(Q.isWebGL2||te.has("OES_texture_float")||te.has("WEBGL_color_buffer_float")))&&!wi){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ke>=0&&Ke<=Ce.width-We&&nt>=0&&nt<=Ce.height-Me&&J.readPixels(Ke,nt,We,Me,tt.convert(Li),tt.convert(hi),Je)}finally{let zt=b!==null?le.get(b).__webglFramebuffer:null;pe.bindFramebuffer(36160,zt)}}},this.copyFramebufferToTexture=function(Ce,Ke,nt=0){let We=Math.pow(2,-nt),Me=Math.floor(Ke.image.width*We),Je=Math.floor(Ke.image.height*We);Z.setTexture2D(Ke,0),J.copyTexSubImage2D(3553,nt,0,0,Ce.x,Ce.y,Me,Je),pe.unbindTexture()},this.copyTextureToTexture=function(Ce,Ke,nt,We=0){let Me=Ke.image.width,Je=Ke.image.height,St=tt.convert(nt.format),Gt=tt.convert(nt.type);Z.setTexture2D(nt,0),J.pixelStorei(37440,nt.flipY),J.pixelStorei(37441,nt.premultiplyAlpha),J.pixelStorei(3317,nt.unpackAlignment),Ke.isDataTexture?J.texSubImage2D(3553,We,Ce.x,Ce.y,Me,Je,St,Gt,Ke.image.data):Ke.isCompressedTexture?J.compressedTexSubImage2D(3553,We,Ce.x,Ce.y,Ke.mipmaps[0].width,Ke.mipmaps[0].height,St,Ke.mipmaps[0].data):J.texSubImage2D(3553,We,Ce.x,Ce.y,St,Gt,Ke.image),We===0&&nt.generateMipmaps&&J.generateMipmap(3553),pe.unbindTexture()},this.copyTextureToTexture3D=function(Ce,Ke,nt,We,Me=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let Je=Ce.max.x-Ce.min.x+1,St=Ce.max.y-Ce.min.y+1,Gt=Ce.max.z-Ce.min.z+1,zt=tt.convert(We.format),Li=tt.convert(We.type),hi;if(We.isData3DTexture)Z.setTexture3D(We,0),hi=32879;else if(We.isDataArrayTexture)Z.setTexture2DArray(We,0),hi=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}J.pixelStorei(37440,We.flipY),J.pixelStorei(37441,We.premultiplyAlpha),J.pixelStorei(3317,We.unpackAlignment);let wi=J.getParameter(3314),fi=J.getParameter(32878),Jr=J.getParameter(3316),Xe=J.getParameter(3315),Ct=J.getParameter(32877),Ot=nt.isCompressedTexture?nt.mipmaps[0]:nt.image;J.pixelStorei(3314,Ot.width),J.pixelStorei(32878,Ot.height),J.pixelStorei(3316,Ce.min.x),J.pixelStorei(3315,Ce.min.y),J.pixelStorei(32877,Ce.min.z),nt.isDataTexture||nt.isData3DTexture?J.texSubImage3D(hi,Me,Ke.x,Ke.y,Ke.z,Je,St,Gt,zt,Li,Ot.data):nt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),J.compressedTexSubImage3D(hi,Me,Ke.x,Ke.y,Ke.z,Je,St,Gt,zt,Ot.data)):J.texSubImage3D(hi,Me,Ke.x,Ke.y,Ke.z,Je,St,Gt,zt,Li,Ot),J.pixelStorei(3314,wi),J.pixelStorei(32878,fi),J.pixelStorei(3316,Jr),J.pixelStorei(3315,Xe),J.pixelStorei(32877,Ct),Me===0&&We.generateMipmaps&&J.generateMipmap(hi),pe.unbindTexture()},this.initTexture=function(Ce){Ce.isCubeTexture?Z.setTextureCube(Ce,0):Ce.isData3DTexture?Z.setTexture3D(Ce,0):Ce.isDataArrayTexture||Ce.isCompressedArrayTexture?Z.setTexture2DArray(Ce,0):Z.setTexture2D(Ce,0),pe.unbindTexture()},this.resetState=function(){y=0,x=0,b=null,pe.reset(),ze.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var gfe=class extends lj{};gfe.prototype.isWebGL1Renderer=!0;var cj=class{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new ii(e),this.near=t,this.far=i}clone(){return new cj(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},hc=class extends dr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}},yfe=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=nA,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=To()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,n=this.stride;r<n;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=To()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=To()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},Qa=new H,lA=class{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Qa.fromBufferAttribute(this,t),Qa.applyMatrix4(e),this.setXYZ(t,Qa.x,Qa.y,Qa.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Qa.fromBufferAttribute(this,t),Qa.applyNormalMatrix(e),this.setXYZ(t,Qa.x,Qa.y,Qa.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Qa.fromBufferAttribute(this,t),Qa.transformDirection(e),this.setXYZ(t,Qa.x,Qa.y,Qa.z);return this}setX(e,t){return this.normalized&&(t=Dr(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Dr(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Dr(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Dr(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=gu(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=gu(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=gu(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=gu(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Dr(t,this.array),i=Dr(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Dr(t,this.array),i=Dr(i,this.array),r=Dr(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Dr(t,this.array),i=Dr(i,this.array),r=Dr(r,this.array),n=Dr(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=n,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[r+n])}return new ui(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new lA(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[r+n])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},uj=class extends dr{constructor(){super(),this.isBone=!0,this.type="Bone"}},So=class extends Kr{constructor(e=null,t=1,i=1,r,n,a,s,o,l=or,c=or,u,d){super(null,a,s,o,l,c,r,n,u,d),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Bk=new pt,bfe=new pt,nP=class{constructor(e=[],t=[]){this.uuid=To(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new pt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let i=new pt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let n=0,a=e.length;n<a;n++){let s=e[n]?e[n].matrixWorld:bfe;Bk.multiplyMatrices(s,t[n]),Bk.toArray(i,n*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new nP(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=qH(e),e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let i=new So(t,e,e,ra,En);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){let r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){let n=e.bones[i],a=t[n];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",n),a=new uj),this.bones.push(a),this.boneInverses.push(new pt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){let e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,i=this.boneInverses;for(let r=0,n=t.length;r<n;r++){let a=t[r];e.bones.push(a.uuid);let s=i[r];e.boneInverses.push(s.toArray())}return e}},s1=class extends ui{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},Nk=new pt,Fk=new pt,gb=[],wfe=new pt,T0=new Yr,xfe=class extends Yr{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new s1(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1;for(let r=0;r<i;r++)this.setMatrixAt(r,wfe)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){let i=this.matrixWorld,r=this.count;if(T0.geometry=this.geometry,T0.material=this.material,T0.material!==void 0)for(let n=0;n<r;n++){this.getMatrixAt(n,Nk),Fk.multiplyMatrices(i,Nk),T0.matrixWorld=Fk,T0.raycast(e,gb);for(let a=0,s=gb.length;a<s;a++){let o=gb[a];o.instanceId=n,o.object=this,t.push(o)}gb.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new s1(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}},Sh=class extends iy{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ii(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},zk=new H,Vk=new H,Uk=new pt,cC=new Vv,yb=new Fs,ex=class extends dr{constructor(e=new Kt,t=new Sh){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[0];for(let r=1,n=t.count;r<n;r++)zk.fromBufferAttribute(t,r-1),Vk.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=zk.distanceTo(Vk);e.setAttribute("lineDistance",new It(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,n=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),yb.copy(i.boundingSphere),yb.applyMatrix4(r),yb.radius+=n,e.ray.intersectsSphere(yb)===!1)return;Uk.copy(r).invert(),cC.copy(e.ray).applyMatrix4(Uk);let s=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=new H,c=new H,u=new H,d=new H,h=this.isLineSegments?2:1,f=i.index,p=i.attributes.position;if(f!==null){let m=Math.max(0,a.start),v=Math.min(f.count,a.start+a.count);for(let y=m,x=v-1;y<x;y+=h){let b=f.getX(y),w=f.getX(y+1);if(l.fromBufferAttribute(p,b),c.fromBufferAttribute(p,w),cC.distanceSqToSegment(l,c,d,u)>o)continue;d.applyMatrix4(this.matrixWorld);let S=e.ray.origin.distanceTo(d);S<e.near||S>e.far||t.push({distance:S,point:u.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else{let m=Math.max(0,a.start),v=Math.min(p.count,a.start+a.count);for(let y=m,x=v-1;y<x;y+=h){if(l.fromBufferAttribute(p,y),c.fromBufferAttribute(p,y+1),cC.distanceSqToSegment(l,c,d,u)>o)continue;d.applyMatrix4(this.matrixWorld);let b=e.ray.origin.distanceTo(d);b<e.near||b>e.far||t.push({distance:b,point:u.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,n=i.length;r<n;r++){let a=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}},Hk=new H,jk=new H,ry=class extends ex{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[];for(let r=0,n=t.count;r<n;r+=2)Hk.fromBufferAttribute(t,r),jk.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+Hk.distanceTo(jk);e.setAttribute("lineDistance",new It(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},_fe=class extends Kr{constructor(e,t,i,r,n,a,s,o,l){super(e,t,i,r,n,a,s,o,l),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:Ti,this.magFilter=n!==void 0?n:Ti,this.generateMipmaps=!1;let c=this;function u(){c.needsUpdate=!0,e.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(u)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},Sfe=class extends Kr{constructor(e,t,i,r,n,a,s,o,l){super(e,t,i,r,n,a,s,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},Mc=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],i,r=this.getPoint(0),n=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),n+=i.distanceTo(r),t.push(n),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let i=this.getLengths(),r=0,n=i.length,a;t?a=t:a=e*i[n-1];let s=0,o=n-1,l;for(;s<=o;)if(r=Math.floor(s+(o-s)/2),l=i[r]-a,l<0)s=r+1;else if(l>0)o=r-1;else{o=r;break}if(r=o,i[r]===a)return r/(n-1);let c=i[r],u=i[r+1]-c,d=(a-c)/u;return(r+d)/(n-1)}getTangent(e,t){let i=e-1e-4,r=e+1e-4;i<0&&(i=0),r>1&&(r=1);let n=this.getPoint(i),a=this.getPoint(r),s=t||(n.isVector2?new Pe:new H);return s.copy(a).sub(n).normalize(),s}getTangentAt(e,t){let i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){let i=new H,r=[],n=[],a=[],s=new H,o=new pt;for(let h=0;h<=e;h++){let f=h/e;r[h]=this.getTangentAt(f,new H)}n[0]=new H,a[0]=new H;let l=Number.MAX_VALUE,c=Math.abs(r[0].x),u=Math.abs(r[0].y),d=Math.abs(r[0].z);c<=l&&(l=c,i.set(1,0,0)),u<=l&&(l=u,i.set(0,1,0)),d<=l&&i.set(0,0,1),s.crossVectors(r[0],i).normalize(),n[0].crossVectors(r[0],s),a[0].crossVectors(r[0],n[0]);for(let h=1;h<=e;h++){if(n[h]=n[h-1].clone(),a[h]=a[h-1].clone(),s.crossVectors(r[h-1],r[h]),s.length()>Number.EPSILON){s.normalize();let f=Math.acos(Sn(r[h-1].dot(r[h]),-1,1));n[h].applyMatrix4(o.makeRotationAxis(s,f))}a[h].crossVectors(r[h],n[h])}if(t===!0){let h=Math.acos(Sn(n[0].dot(n[e]),-1,1));h/=e,r[0].dot(s.crossVectors(n[0],n[e]))>0&&(h=-h);for(let f=1;f<=e;f++)n[f].applyMatrix4(o.makeRotationAxis(r[f],h*f)),a[f].crossVectors(r[f],n[f])}return{tangents:r,normals:n,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},Z_=class extends Mc{constructor(e=0,t=0,i=1,r=1,n=0,a=Math.PI*2,s=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=n,this.aEndAngle=a,this.aClockwise=s,this.aRotation=o}getPoint(e,t){let i=t||new Pe,r=Math.PI*2,n=this.aEndAngle-this.aStartAngle,a=Math.abs(n)<Number.EPSILON;for(;n<0;)n+=r;for(;n>r;)n-=r;n<Number.EPSILON&&(a?n=0:n=r),this.aClockwise===!0&&!a&&(n===r?n=-r:n=n-r);let s=this.aStartAngle+e*n,o=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(this.aRotation!==0){let c=Math.cos(this.aRotation),u=Math.sin(this.aRotation),d=o-this.aX,h=l-this.aY;o=d*c-h*u+this.aX,l=d*u+h*c+this.aY}return i.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},Cfe=class extends Z_{constructor(e,t,i,r,n,a){super(e,t,i,i,r,n,a),this.isArcCurve=!0,this.type="ArcCurve"}};function aP(){let e=0,t=0,i=0,r=0;function n(a,s,o,l){e=a,t=o,i=-3*a+3*s-2*o-l,r=2*a-2*s+o+l}return{initCatmullRom:function(a,s,o,l,c){n(s,o,c*(o-a),c*(l-s))},initNonuniformCatmullRom:function(a,s,o,l,c,u,d){let h=(s-a)/c-(o-a)/(c+u)+(o-s)/u,f=(o-s)/u-(l-s)/(u+d)+(l-o)/d;h*=u,f*=u,n(s,o,h,f)},calc:function(a){let s=a*a,o=s*a;return e+t*a+i*s+r*o}}}var bb=new H,uC=new aP,dC=new aP,hC=new aP,Efe=class extends Mc{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new H){let i=t,r=this.points,n=r.length,a=(n-(this.closed?0:1))*e,s=Math.floor(a),o=a-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/n)+1)*n:o===0&&s===n-1&&(s=n-2,o=1);let l,c;this.closed||s>0?l=r[(s-1)%n]:(bb.subVectors(r[0],r[1]).add(r[0]),l=bb);let u=r[s%n],d=r[(s+1)%n];if(this.closed||s+2<n?c=r[(s+2)%n]:(bb.subVectors(r[n-1],r[n-2]).add(r[n-1]),c=bb),this.curveType==="centripetal"||this.curveType==="chordal"){let h=this.curveType==="chordal"?.5:.25,f=Math.pow(l.distanceToSquared(u),h),p=Math.pow(u.distanceToSquared(d),h),m=Math.pow(d.distanceToSquared(c),h);p<1e-4&&(p=1),f<1e-4&&(f=p),m<1e-4&&(m=p),uC.initNonuniformCatmullRom(l.x,u.x,d.x,c.x,f,p,m),dC.initNonuniformCatmullRom(l.y,u.y,d.y,c.y,f,p,m),hC.initNonuniformCatmullRom(l.z,u.z,d.z,c.z,f,p,m)}else this.curveType==="catmullrom"&&(uC.initCatmullRom(l.x,u.x,d.x,c.x,this.tension),dC.initCatmullRom(l.y,u.y,d.y,c.y,this.tension),hC.initCatmullRom(l.z,u.z,d.z,c.z,this.tension));return i.set(uC.calc(o),dC.calc(o),hC.calc(o)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new H().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function Wk(e,t,i,r,n){let a=(r-t)*.5,s=(n-i)*.5,o=e*e,l=e*o;return(2*i-2*r+a+s)*l+(-3*i+3*r-2*a-s)*o+a*e+i}function Afe(e,t){let i=1-e;return i*i*t}function Mfe(e,t){return 2*(1-e)*e*t}function Tfe(e,t){return e*e*t}function Dg(e,t,i,r){return Afe(e,t)+Mfe(e,i)+Tfe(e,r)}function Pfe(e,t){let i=1-e;return i*i*i*t}function Dfe(e,t){let i=1-e;return 3*i*i*e*t}function Ife(e,t){return 3*(1-e)*e*e*t}function Ofe(e,t){return e*e*e*t}function Ig(e,t,i,r,n){return Pfe(e,t)+Dfe(e,i)+Ife(e,r)+Ofe(e,n)}var ul=class extends Mc{constructor(t=new Pe,i=new Pe,r=new Pe,n=new Pe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=i,this.v2=r,this.v3=n}getPoint(t,i=new Pe){let r=i,n=this.v0,a=this.v1,s=this.v2,o=this.v3;return r.set(Ig(t,n.x,a.x,s.x,o.x),Ig(t,n.y,a.y,s.y,o.y)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},Zw=class extends Mc{constructor(e=new H,t=new H,i=new H,r=new H){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new H){let i=t,r=this.v0,n=this.v1,a=this.v2,s=this.v3;return i.set(Ig(e,r.x,n.x,a.x,s.x),Ig(e,r.y,n.y,a.y,s.y),Ig(e,r.z,n.z,a.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},gl=class extends Mc{constructor(t=new Pe,i=new Pe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=i}getPoint(t,i=new Pe){let r=i;return t===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r}getPointAt(t,i){return this.getPoint(t,i)}getTangent(t,i){let r=i||new Pe;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},dj=class extends Mc{constructor(e=new H,t=new H){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new H){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},sh=class extends Mc{constructor(e=new Pe,t=new Pe,i=new Pe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Pe){let i=t,r=this.v0,n=this.v1,a=this.v2;return i.set(Dg(e,r.x,n.x,a.x),Dg(e,r.y,n.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Rfe=class extends Mc{constructor(e=new H,t=new H,i=new H){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new H){let i=t,r=this.v0,n=this.v1,a=this.v2;return i.set(Dg(e,r.x,n.x,a.x),Dg(e,r.y,n.y,a.y),Dg(e,r.z,n.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},sP=class extends Mc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Pe){let i=t,r=this.points,n=(r.length-1)*e,a=Math.floor(n),s=n-a,o=r[a===0?a:a-1],l=r[a],c=r[a>r.length-2?r.length-1:a+1],u=r[a>r.length-3?r.length-1:a+2];return i.set(Wk(s,o.x,l.x,c.x,u.x),Wk(s,o.y,l.y,c.y,u.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new Pe().fromArray(r))}return this}},kfe=Object.freeze({__proto__:null,ArcCurve:Cfe,CatmullRomCurve3:Efe,CubicBezierCurve:ul,CubicBezierCurve3:Zw,EllipseCurve:Z_,LineCurve:gl,LineCurve3:dj,QuadraticBezierCurve:sh,QuadraticBezierCurve3:Rfe,SplineCurve:sP}),hj=class extends Mc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new gl(t,e))}getPoint(e,t){let i=e*this.getLength(),r=this.getCurveLengths(),n=0;for(;n<r.length;){if(r[n]>=i){let a=r[n]-i,s=this.curves[n],o=s.getLength(),l=o===0?0:1-a/o;return s.getPointAt(l,t)}n++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],i;for(let r=0,n=this.curves;r<n.length;r++){let a=n[r],s=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,o=a.getPoints(s);for(let l=0;l<o.length;l++){let c=o[l];i&&i.equals(c)||(t.push(c),i=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){let r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(new kfe[r.type]().fromJSON(r))}return this}},tx=class extends hj{constructor(e){super(),this.type="Path",this.currentPoint=new Pe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let i=new gl(this.currentPoint.clone(),new Pe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){let n=new sh(this.currentPoint.clone(),new Pe(e,t),new Pe(i,r));return this.curves.push(n),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,n,a){let s=new ul(this.currentPoint.clone(),new Pe(e,t),new Pe(i,r),new Pe(n,a));return this.curves.push(s),this.currentPoint.set(n,a),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),i=new sP(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,n,a){let s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,i,r,n,a),this}absarc(e,t,i,r,n,a){return this.absellipse(e,t,i,i,r,n,a),this}ellipse(e,t,i,r,n,a,s,o){let l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,i,r,n,a,s,o),this}absellipse(e,t,i,r,n,a,s,o){let l=new Z_(e,t,i,r,n,a,s,o);if(this.curves.length>0){let u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);let c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},fj=class extends Kt{constructor(e=[new Pe(0,-.5),new Pe(.5,0),new Pe(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Sn(r,0,Math.PI*2);let n=[],a=[],s=[],o=[],l=[],c=1/t,u=new H,d=new Pe,h=new H,f=new H,p=new H,m=0,v=0;for(let y=0;y<=e.length-1;y++)switch(y){case 0:m=e[y+1].x-e[y].x,v=e[y+1].y-e[y].y,h.x=v*1,h.y=-m,h.z=v*0,p.copy(h),h.normalize(),o.push(h.x,h.y,h.z);break;case e.length-1:o.push(p.x,p.y,p.z);break;default:m=e[y+1].x-e[y].x,v=e[y+1].y-e[y].y,h.x=v*1,h.y=-m,h.z=v*0,f.copy(h),h.x+=p.x,h.y+=p.y,h.z+=p.z,h.normalize(),o.push(h.x,h.y,h.z),p.copy(f)}for(let y=0;y<=t;y++){let x=i+y*c*r,b=Math.sin(x),w=Math.cos(x);for(let S=0;S<=e.length-1;S++){u.x=e[S].x*b,u.y=e[S].y,u.z=e[S].x*w,a.push(u.x,u.y,u.z),d.x=y/t,d.y=S/(e.length-1),s.push(d.x,d.y);let _=o[3*S+0]*b,E=o[3*S+1],C=o[3*S+0]*w;l.push(_,E,C)}}for(let y=0;y<t;y++)for(let x=0;x<e.length-1;x++){let b=x+y*e.length,w=b,S=b+e.length,_=b+e.length+1,E=b+1;n.push(w,S,E),n.push(_,E,S)}this.setIndex(n),this.setAttribute("position",new It(a,3)),this.setAttribute("uv",new It(s,2)),this.setAttribute("normal",new It(l,3))}static fromJSON(e){return new fj(e.points,e.segments,e.phiStart,e.phiLength)}},oP=class extends Kt{constructor(e=1,t=1,i=1,r=32,n=1,a=!1,s=0,o=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:n,openEnded:a,thetaStart:s,thetaLength:o};let l=this;r=Math.floor(r),n=Math.floor(n);let c=[],u=[],d=[],h=[],f=0,p=[],m=i/2,v=0;y(),a===!1&&(e>0&&x(!0),t>0&&x(!1)),this.setIndex(c),this.setAttribute("position",new It(u,3)),this.setAttribute("normal",new It(d,3)),this.setAttribute("uv",new It(h,2));function y(){let b=new H,w=new H,S=0,_=(t-e)/i;for(let E=0;E<=n;E++){let C=[],A=E/n,M=A*(t-e)+e;for(let T=0;T<=r;T++){let P=T/r,D=P*o+s,k=Math.sin(D),L=Math.cos(D);w.x=M*k,w.y=-A*i+m,w.z=M*L,u.push(w.x,w.y,w.z),b.set(k,_,L).normalize(),d.push(b.x,b.y,b.z),h.push(P,1-A),C.push(f++)}p.push(C)}for(let E=0;E<r;E++)for(let C=0;C<n;C++){let A=p[C][E],M=p[C+1][E],T=p[C+1][E+1],P=p[C][E+1];c.push(A,M,P),c.push(M,T,P),S+=6}l.addGroup(v,S,0),v+=S}function x(b){let w=f,S=new Pe,_=new H,E=0,C=b===!0?e:t,A=b===!0?1:-1;for(let T=1;T<=r;T++)u.push(0,m*A,0),d.push(0,A,0),h.push(.5,.5),f++;let M=f;for(let T=0;T<=r;T++){let P=T/r*o+s,D=Math.cos(P),k=Math.sin(P);_.x=C*k,_.y=m*A,_.z=C*D,u.push(_.x,_.y,_.z),d.push(0,A,0),S.x=D*.5+.5,S.y=k*.5*A+.5,h.push(S.x,S.y),f++}for(let T=0;T<r;T++){let P=w+T,D=M+T;b===!0?c.push(D,D+1,P):c.push(D+1,D,P),E+=3}l.addGroup(v,E,b===!0?1:2),v+=E}}static fromJSON(e){return new oP(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},lP=class extends oP{constructor(e=1,t=1,i=32,r=1,n=!1,a=0,s=Math.PI*2){super(0,e,t,i,r,n,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:n,thetaStart:a,thetaLength:s}}static fromJSON(e){return new lP(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},cP=class extends Kt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};let n=[],a=[];s(r),l(i),c(),this.setAttribute("position",new It(n,3)),this.setAttribute("normal",new It(n.slice(),3)),this.setAttribute("uv",new It(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function s(y){let x=new H,b=new H,w=new H;for(let S=0;S<t.length;S+=3)h(t[S+0],x),h(t[S+1],b),h(t[S+2],w),o(x,b,w,y)}function o(y,x,b,w){let S=w+1,_=[];for(let E=0;E<=S;E++){_[E]=[];let C=y.clone().lerp(b,E/S),A=x.clone().lerp(b,E/S),M=S-E;for(let T=0;T<=M;T++)T===0&&E===S?_[E][T]=C:_[E][T]=C.clone().lerp(A,T/M)}for(let E=0;E<S;E++)for(let C=0;C<2*(S-E)-1;C++){let A=Math.floor(C/2);C%2===0?(d(_[E][A+1]),d(_[E+1][A]),d(_[E][A])):(d(_[E][A+1]),d(_[E+1][A+1]),d(_[E+1][A]))}}function l(y){let x=new H;for(let b=0;b<n.length;b+=3)x.x=n[b+0],x.y=n[b+1],x.z=n[b+2],x.normalize().multiplyScalar(y),n[b+0]=x.x,n[b+1]=x.y,n[b+2]=x.z}function c(){let y=new H;for(let x=0;x<n.length;x+=3){y.x=n[x+0],y.y=n[x+1],y.z=n[x+2];let b=m(y)/2/Math.PI+.5,w=v(y)/Math.PI+.5;a.push(b,1-w)}f(),u()}function u(){for(let y=0;y<a.length;y+=6){let x=a[y+0],b=a[y+2],w=a[y+4],S=Math.max(x,b,w),_=Math.min(x,b,w);S>.9&&_<.1&&(x<.2&&(a[y+0]+=1),b<.2&&(a[y+2]+=1),w<.2&&(a[y+4]+=1))}}function d(y){n.push(y.x,y.y,y.z)}function h(y,x){let b=y*3;x.x=e[b+0],x.y=e[b+1],x.z=e[b+2]}function f(){let y=new H,x=new H,b=new H,w=new H,S=new Pe,_=new Pe,E=new Pe;for(let C=0,A=0;C<n.length;C+=9,A+=6){y.set(n[C+0],n[C+1],n[C+2]),x.set(n[C+3],n[C+4],n[C+5]),b.set(n[C+6],n[C+7],n[C+8]),S.set(a[A+0],a[A+1]),_.set(a[A+2],a[A+3]),E.set(a[A+4],a[A+5]),w.copy(y).add(x).add(b).divideScalar(3);let M=m(w);p(S,A+0,y,M),p(_,A+2,x,M),p(E,A+4,b,M)}}function p(y,x,b,w){w<0&&y.x===1&&(a[x]=y.x-1),b.x===0&&b.z===0&&(a[x]=w/2/Math.PI+.5)}function m(y){return Math.atan2(y.z,-y.x)}function v(y){return Math.atan2(-y.y,Math.sqrt(y.x*y.x+y.z*y.z))}}static fromJSON(e){return new cP(e.vertices,e.indices,e.radius,e.details)}},pj=class extends cP{constructor(e=1,t=0){let i=(1+Math.sqrt(5))/2,r=1/i,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(n,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new pj(e.radius,e.detail)}},ix=class extends tx{constructor(e){super(e),this.uuid=To(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){let r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(new tx().fromJSON(r))}return this}},Lfe={triangulate:function(e,t,i=2){let r=t&&t.length,n=r?t[0]*i:e.length,a=mj(e,0,n,i,!0),s=[];if(!a||a.next===a.prev)return s;let o,l,c,u,d,h,f;if(r&&(a=Vfe(e,t,a,i)),e.length>80*i){o=c=e[0],l=u=e[1];for(let p=i;p<n;p+=i)d=e[p],h=e[p+1],d<o&&(o=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);f=Math.max(c-o,u-l),f=f!==0?32767/f:0}return o1(a,s,i,o,l,f,0),s}};function mj(e,t,i,r,n){let a,s;if(n===Xfe(e,t,i,r)>0)for(a=t;a<i;a+=r)s=Gk(a,e[a],e[a+1],s);else for(a=i-r;a>=t;a-=r)s=Gk(a,e[a],e[a+1],s);return s&&q_(s,s.next)&&(c1(s),s=s.next),s}function jf(e,t){if(!e)return e;t||(t=e);let i=e,r;do if(r=!1,!i.steiner&&(q_(i,i.next)||qr(i.prev,i,i.next)===0)){if(c1(i),i=t=i.prev,i===i.next)break;r=!0}else i=i.next;while(r||i!==t);return t}function o1(e,t,i,r,n,a,s){if(!e)return;!s&&a&&Gfe(e,r,n,a);let o=e,l,c;for(;e.prev!==e.next;){if(l=e.prev,c=e.next,a?Nfe(e,r,n,a):Bfe(e)){t.push(l.i/i|0),t.push(e.i/i|0),t.push(c.i/i|0),c1(e),e=c.next,o=c.next;continue}if(e=c,e===o){s?s===1?(e=Ffe(jf(e),t,i),o1(e,t,i,r,n,a,2)):s===2&&zfe(e,t,i,r,n,a):o1(jf(e),t,i,r,n,a,1);break}}}function Bfe(e){let t=e.prev,i=e,r=e.next;if(qr(t,i,r)>=0)return!1;let n=t.x,a=i.x,s=r.x,o=t.y,l=i.y,c=r.y,u=n<a?n<s?n:s:a<s?a:s,d=o<l?o<c?o:c:l<c?l:c,h=n>a?n>s?n:s:a>s?a:s,f=o>l?o>c?o:c:l>c?l:c,p=r.next;for(;p!==t;){if(p.x>=u&&p.x<=h&&p.y>=d&&p.y<=f&&_m(n,o,a,l,s,c,p.x,p.y)&&qr(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Nfe(e,t,i,r){let n=e.prev,a=e,s=e.next;if(qr(n,a,s)>=0)return!1;let o=n.x,l=a.x,c=s.x,u=n.y,d=a.y,h=s.y,f=o<l?o<c?o:c:l<c?l:c,p=u<d?u<h?u:h:d<h?d:h,m=o>l?o>c?o:c:l>c?l:c,v=u>d?u>h?u:h:d>h?d:h,y=cA(f,p,t,i,r),x=cA(m,v,t,i,r),b=e.prevZ,w=e.nextZ;for(;b&&b.z>=y&&w&&w.z<=x;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=v&&b!==n&&b!==s&&_m(o,u,l,d,c,h,b.x,b.y)&&qr(b.prev,b,b.next)>=0||(b=b.prevZ,w.x>=f&&w.x<=m&&w.y>=p&&w.y<=v&&w!==n&&w!==s&&_m(o,u,l,d,c,h,w.x,w.y)&&qr(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;b&&b.z>=y;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=v&&b!==n&&b!==s&&_m(o,u,l,d,c,h,b.x,b.y)&&qr(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;w&&w.z<=x;){if(w.x>=f&&w.x<=m&&w.y>=p&&w.y<=v&&w!==n&&w!==s&&_m(o,u,l,d,c,h,w.x,w.y)&&qr(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function Ffe(e,t,i){let r=e;do{let n=r.prev,a=r.next.next;!q_(n,a)&&vj(n,r,r.next,a)&&l1(n,a)&&l1(a,n)&&(t.push(n.i/i|0),t.push(r.i/i|0),t.push(a.i/i|0),c1(r),c1(r.next),r=e=a),r=r.next}while(r!==e);return jf(r)}function zfe(e,t,i,r,n,a){let s=e;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&qfe(s,o)){let l=gj(s,o);s=jf(s,s.next),l=jf(l,l.next),o1(s,t,i,r,n,a,0),o1(l,t,i,r,n,a,0);return}o=o.next}s=s.next}while(s!==e)}function Vfe(e,t,i,r){let n=[],a,s,o,l,c;for(a=0,s=t.length;a<s;a++)o=t[a]*r,l=a<s-1?t[a+1]*r:e.length,c=mj(e,o,l,r,!1),c===c.next&&(c.steiner=!0),n.push(Zfe(c));for(n.sort(Ufe),a=0;a<n.length;a++)i=Hfe(n[a],i);return i}function Ufe(e,t){return e.x-t.x}function Hfe(e,t){let i=jfe(e,t);if(!i)return t;let r=gj(i,e);return jf(r,r.next),jf(i,i.next)}function jfe(e,t){let i=t,r=-1/0,n,a=e.x,s=e.y;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){let h=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(h<=a&&h>r&&(r=h,n=i.x<i.next.x?i:i.next,h===a))return n}i=i.next}while(i!==t);if(!n)return null;let o=n,l=n.x,c=n.y,u=1/0,d;i=n;do a>=i.x&&i.x>=l&&a!==i.x&&_m(s<c?a:r,s,l,c,s<c?r:a,s,i.x,i.y)&&(d=Math.abs(s-i.y)/(a-i.x),l1(i,e)&&(d<u||d===u&&(i.x>n.x||i.x===n.x&&Wfe(n,i)))&&(n=i,u=d)),i=i.next;while(i!==o);return n}function Wfe(e,t){return qr(e.prev,e,t.prev)<0&&qr(t.next,e,e.next)<0}function Gfe(e,t,i,r){let n=e;do n.z===0&&(n.z=cA(n.x,n.y,t,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,$fe(n)}function $fe(e){let t,i,r,n,a,s,o,l,c=1;do{for(i=e,e=null,a=null,s=0;i;){for(s++,r=i,o=0,t=0;t<c&&(o++,r=r.nextZ,!!r);t++);for(l=c;o>0||l>0&&r;)o!==0&&(l===0||!r||i.z<=r.z)?(n=i,i=i.nextZ,o--):(n=r,r=r.nextZ,l--),a?a.nextZ=n:e=n,n.prevZ=a,a=n;i=r}a.nextZ=null,c*=2}while(s>1);return e}function cA(e,t,i,r,n){return e=(e-i)*n|0,t=(t-r)*n|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function Zfe(e){let t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function _m(e,t,i,r,n,a,s,o){return(n-s)*(t-o)>=(e-s)*(a-o)&&(e-s)*(r-o)>=(i-s)*(t-o)&&(i-s)*(a-o)>=(n-s)*(r-o)}function qfe(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Yfe(e,t)&&(l1(e,t)&&l1(t,e)&&Kfe(e,t)&&(qr(e.prev,e,t.prev)||qr(e,t.prev,t))||q_(e,t)&&qr(e.prev,e,e.next)>0&&qr(t.prev,t,t.next)>0)}function qr(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function q_(e,t){return e.x===t.x&&e.y===t.y}function vj(e,t,i,r){let n=xb(qr(e,t,i)),a=xb(qr(e,t,r)),s=xb(qr(i,r,e)),o=xb(qr(i,r,t));return!!(n!==a&&s!==o||n===0&&wb(e,i,t)||a===0&&wb(e,r,t)||s===0&&wb(i,e,r)||o===0&&wb(i,t,r))}function wb(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function xb(e){return e>0?1:e<0?-1:0}function Yfe(e,t){let i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&vj(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}function l1(e,t){return qr(e.prev,e,e.next)<0?qr(e,t,e.next)>=0&&qr(e,e.prev,t)>=0:qr(e,t,e.prev)<0||qr(e,e.next,t)<0}function Kfe(e,t){let i=e,r=!1,n=(e.x+t.x)/2,a=(e.y+t.y)/2;do i.y>a!=i.next.y>a&&i.next.y!==i.y&&n<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==e);return r}function gj(e,t){let i=new uA(e.i,e.x,e.y),r=new uA(t.i,t.x,t.y),n=e.next,a=t.prev;return e.next=t,t.prev=e,i.next=n,n.prev=i,r.next=i,i.prev=r,a.next=r,r.prev=a,r}function Gk(e,t,i,r){let n=new uA(e,t,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function c1(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function uA(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Xfe(e,t,i,r){let n=0;for(let a=t,s=i-r;a<i;a+=r)n+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return n}var yj=class{static area(e){let t=e.length,i=0;for(let r=t-1,n=0;n<t;r=n++)i+=e[r].x*e[n].y-e[n].x*e[r].y;return i*.5}static isClockWise(e){return yj.area(e)<0}static triangulateShape(e,t){let i=[],r=[],n=[];$k(e),Zk(i,e);let a=e.length;t.forEach($k);for(let o=0;o<t.length;o++)r.push(a),a+=t[o].length,Zk(i,t[o]);let s=Lfe.triangulate(i,r);for(let o=0;o<s.length;o+=3)n.push(s.slice(o,o+3));return n}};function $k(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Zk(e,t){for(let i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}var bj=class extends cP{constructor(e=1,t=0){let i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,n,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new bj(e.radius,e.detail)}},Nm=class extends Kt{constructor(e=1,t=32,i=16,r=0,n=Math.PI*2,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:n,thetaStart:a,thetaLength:s},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));let o=Math.min(a+s,Math.PI),l=0,c=[],u=new H,d=new H,h=[],f=[],p=[],m=[];for(let v=0;v<=i;v++){let y=[],x=v/i,b=0;v==0&&a==0?b=.5/t:v==i&&o==Math.PI&&(b=-.5/t);for(let w=0;w<=t;w++){let S=w/t;u.x=-e*Math.cos(r+S*n)*Math.sin(a+x*s),u.y=e*Math.cos(a+x*s),u.z=e*Math.sin(r+S*n)*Math.sin(a+x*s),f.push(u.x,u.y,u.z),d.copy(u).normalize(),p.push(d.x,d.y,d.z),m.push(S+b,1-x),y.push(l++)}c.push(y)}for(let v=0;v<i;v++)for(let y=0;y<t;y++){let x=c[v][y+1],b=c[v][y],w=c[v+1][y],S=c[v+1][y+1];(v!==0||a>0)&&h.push(x,b,S),(v!==i-1||o<Math.PI)&&h.push(b,w,S)}this.setIndex(h),this.setAttribute("position",new It(f,3)),this.setAttribute("normal",new It(p,3)),this.setAttribute("uv",new It(m,2))}static fromJSON(e){return new Nm(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},wj=class extends Kt{constructor(e=1,t=.4,i=12,r=48,n=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:n},i=Math.floor(i),r=Math.floor(r);let a=[],s=[],o=[],l=[],c=new H,u=new H,d=new H;for(let h=0;h<=i;h++)for(let f=0;f<=r;f++){let p=f/r*n,m=h/i*Math.PI*2;u.x=(e+t*Math.cos(m))*Math.cos(p),u.y=(e+t*Math.cos(m))*Math.sin(p),u.z=t*Math.sin(m),s.push(u.x,u.y,u.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),d.subVectors(u,c).normalize(),o.push(d.x,d.y,d.z),l.push(f/r),l.push(h/i)}for(let h=1;h<=i;h++)for(let f=1;f<=r;f++){let p=(r+1)*h+f-1,m=(r+1)*(h-1)+f-1,v=(r+1)*(h-1)+f,y=(r+1)*h+f;a.push(p,m,y),a.push(m,v,y)}this.setIndex(a),this.setAttribute("position",new It(s,3)),this.setAttribute("normal",new It(o,3)),this.setAttribute("uv",new It(l,2))}static fromJSON(e){return new wj(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}},xj=class extends Kt{constructor(e=1,t=.4,i=64,r=8,n=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:n,q:a},i=Math.floor(i),r=Math.floor(r);let s=[],o=[],l=[],c=[],u=new H,d=new H,h=new H,f=new H,p=new H,m=new H,v=new H;for(let x=0;x<=i;++x){let b=x/i*n*Math.PI*2;y(b,n,a,e,h),y(b+.01,n,a,e,f),m.subVectors(f,h),v.addVectors(f,h),p.crossVectors(m,v),v.crossVectors(p,m),p.normalize(),v.normalize();for(let w=0;w<=r;++w){let S=w/r*Math.PI*2,_=-t*Math.cos(S),E=t*Math.sin(S);u.x=h.x+(_*v.x+E*p.x),u.y=h.y+(_*v.y+E*p.y),u.z=h.z+(_*v.z+E*p.z),o.push(u.x,u.y,u.z),d.subVectors(u,h).normalize(),l.push(d.x,d.y,d.z),c.push(x/i),c.push(w/r)}}for(let x=1;x<=i;x++)for(let b=1;b<=r;b++){let w=(r+1)*(x-1)+(b-1),S=(r+1)*x+(b-1),_=(r+1)*x+b,E=(r+1)*(x-1)+b;s.push(w,S,E),s.push(S,_,E)}this.setIndex(s),this.setAttribute("position",new It(o,3)),this.setAttribute("normal",new It(l,3)),this.setAttribute("uv",new It(c,2));function y(x,b,w,S,_){let E=Math.cos(x),C=Math.sin(x),A=w/b*x,M=Math.cos(A);_.x=S*(2+M)*.5*E,_.y=S*(2+M)*C*.5,_.z=S*Math.sin(A)*.5}}static fromJSON(e){return new xj(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}};function sd(e,t,i){return _j(e)?new e.constructor(e.subarray(t,i!==void 0?i:e.length)):e.slice(t,i)}function _b(e,t,i){return!e||e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)}function _j(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Qfe(e){function t(n,a){return e[n]-e[a]}let i=e.length,r=new Array(i);for(let n=0;n!==i;++n)r[n]=n;return r.sort(t),r}function qk(e,t,i){let r=e.length,n=new e.constructor(r);for(let a=0,s=0;s!==r;++a){let o=i[a]*t;for(let l=0;l!==t;++l)n[s++]=e[o+l]}return n}function Sj(e,t,i,r){let n=1,a=e[0];for(;a!==void 0&&a[r]===void 0;)a=e[n++];if(a===void 0)return;let s=a[r];if(s!==void 0)if(Array.isArray(s))do s=a[r],s!==void 0&&(t.push(a.time),i.push.apply(i,s)),a=e[n++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[r],s!==void 0&&(t.push(a.time),s.toArray(i,i.length)),a=e[n++];while(a!==void 0);else do s=a[r],s!==void 0&&(t.push(a.time),i.push(s)),a=e[n++];while(a!==void 0)}var Y_=class{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,i=this._cachedIndex,r=t[i],n=t[i-1];e:{t:{let a;i:{r:if(!(e<r)){for(let s=i+2;;){if(r===void 0){if(e<n)break r;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===s)break;if(n=r,r=t[++i],e<r)break t}a=t.length;break i}if(!(e>=n)){let s=t[1];e<s&&(i=2,n=s);for(let o=i-2;;){if(n===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===o)break;if(r=n,n=t[--i-1],e>=n)break t}a=i,i=0;break i}break e}for(;i<a;){let s=i+a>>>1;e<t[s]?a=s:i=s+1}if(r=t[i],n=t[i-1],n===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,n,r)}return this.interpolate_(i,n,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,n=e*r;for(let a=0;a!==r;++a)t[a]=i[n+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},Jfe=class extends Y_{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:bm,endingEnd:bm}}intervalChanged_(e,t,i){let r=this.parameterPositions,n=e-2,a=e+1,s=r[n],o=r[a];if(s===void 0)switch(this.getSettings_().endingStart){case wm:n=e,s=2*t-i;break;case X2:n=r.length-2,s=t+r[n]-r[n+1];break;default:n=e,s=i}if(o===void 0)switch(this.getSettings_().endingEnd){case wm:a=e,o=2*i-t;break;case X2:a=1,o=i+r[1]-r[0];break;default:a=e-1,o=t}let l=(i-t)*.5,c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-i),this._offsetPrev=n*c,this._offsetNext=a*c}interpolate_(e,t,i,r){let n=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,f=(i-t)/(r-t),p=f*f,m=p*f,v=-d*m+2*d*p-d*f,y=(1+d)*m+(-1.5-2*d)*p+(-.5+d)*f+1,x=(-1-h)*m+(1.5+h)*p+.5*f,b=h*m-h*p;for(let w=0;w!==s;++w)n[w]=v*a[c+w]+y*a[l+w]+x*a[o+w]+b*a[u+w];return n}},Cj=class extends Y_{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let n=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=(i-t)/(r-t),u=1-c;for(let d=0;d!==s;++d)n[d]=a[l+d]*u+a[o+d]*c;return n}},epe=class extends Y_{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}},Tc=class{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=_b(t,this.TimeBufferType),this.values=_b(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:_b(e.times,Array),values:_b(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new epe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Cj(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Jfe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Y2:t=this.InterpolantFactoryMethodDiscrete;break;case K2:t=this.InterpolantFactoryMethodLinear;break;case N3:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Y2;case this.InterpolantFactoryMethodLinear:return K2;case this.InterpolantFactoryMethodSmooth:return N3}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){let i=this.times,r=i.length,n=0,a=r-1;for(;n!==r&&i[n]<e;)++n;for(;a!==-1&&i[a]>t;)--a;if(++a,n!==0||a!==r){n>=a&&(a=Math.max(a,1),n=a-1);let s=this.getValueSize();this.times=sd(i,n,a),this.values=sd(this.values,n*s,a*s)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let i=this.times,r=this.values,n=i.length;n===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let s=0;s!==n;s++){let o=i[s];if(typeof o=="number"&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,o),e=!1;break}if(a!==null&&a>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,o,a),e=!1;break}a=o}if(r!==void 0&&_j(r))for(let s=0,o=r.length;s!==o;++s){let l=r[s];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,l),e=!1;break}}return e}optimize(){let e=sd(this.times),t=sd(this.values),i=this.getValueSize(),r=this.getInterpolation()===N3,n=e.length-1,a=1;for(let s=1;s<n;++s){let o=!1,l=e[s],c=e[s+1];if(l!==c&&(s!==1||l!==e[0]))if(r)o=!0;else{let u=s*i,d=u-i,h=u+i;for(let f=0;f!==i;++f){let p=t[u+f];if(p!==t[d+f]||p!==t[h+f]){o=!0;break}}}if(o){if(s!==a){e[a]=e[s];let u=s*i,d=a*i;for(let h=0;h!==i;++h)t[d+h]=t[u+h]}++a}}if(n>0){e[a]=e[n];for(let s=n*i,o=a*i,l=0;l!==i;++l)t[o+l]=t[s+l];++a}return a!==e.length?(this.times=sd(e,0,a),this.values=sd(t,0,a*i)):(this.times=e,this.values=t),this}clone(){let e=sd(this.times,0),t=sd(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};Tc.prototype.TimeBufferType=Float32Array;Tc.prototype.ValueBufferType=Float32Array;Tc.prototype.DefaultInterpolation=K2;var jv=class extends Tc{};jv.prototype.ValueTypeName="bool";jv.prototype.ValueBufferType=Array;jv.prototype.DefaultInterpolation=Y2;jv.prototype.InterpolantFactoryMethodLinear=void 0;jv.prototype.InterpolantFactoryMethodSmooth=void 0;var Ej=class extends Tc{};Ej.prototype.ValueTypeName="color";var rx=class extends Tc{};rx.prototype.ValueTypeName="number";var tpe=class extends Y_{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let n=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(i-t)/(r-t),l=e*s;for(let c=l+s;l!==c;l+=4)mi.slerpFlat(n,0,a,l-s,a,l,o);return n}},ny=class extends Tc{InterpolantFactoryMethodLinear(e){return new tpe(this.times,this.values,this.getValueSize(),e)}};ny.prototype.ValueTypeName="quaternion";ny.prototype.DefaultInterpolation=K2;ny.prototype.InterpolantFactoryMethodSmooth=void 0;var Wv=class extends Tc{};Wv.prototype.ValueTypeName="string";Wv.prototype.ValueBufferType=Array;Wv.prototype.DefaultInterpolation=Y2;Wv.prototype.InterpolantFactoryMethodLinear=void 0;Wv.prototype.InterpolantFactoryMethodSmooth=void 0;var nx=class extends Tc{};nx.prototype.ValueTypeName="vector";var dA=class{constructor(e,t=-1,i,r=Q5){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=To(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],i=e.tracks,r=1/(e.fps||1);for(let a=0,s=i.length;a!==s;++a)t.push(rpe(i[a]).scale(r));let n=new this(e.name,e.duration,t,e.blendMode);return n.uuid=e.uuid,n}static toJSON(e){let t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let n=0,a=i.length;n!==a;++n)t.push(Tc.toJSON(i[n]));return r}static CreateFromMorphTargetSequence(e,t,i,r){let n=t.length,a=[];for(let s=0;s<n;s++){let o=[],l=[];o.push((s+n-1)%n,s,(s+1)%n),l.push(0,1,0);let c=Qfe(o);o=qk(o,1,c),l=qk(l,1,c),!r&&o[0]===0&&(o.push(n),l.push(l[0])),a.push(new rx(".morphTargetInfluences["+t[s].name+"]",o,l).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){let r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){let r={},n=/^([\w-]*?)([\d]+)$/;for(let s=0,o=e.length;s<o;s++){let l=e[s],c=l.name.match(n);if(c&&c.length>1){let u=c[1],d=r[u];d||(r[u]=d=[]),d.push(l)}}let a=[];for(let s in r)a.push(this.CreateFromMorphTargetSequence(s,r[s],t,i));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function(c,u,d,h,f){if(d.length!==0){let p=[],m=[];Sj(d,p,m,h),p.length!==0&&f.push(new c(u,p,m))}},r=[],n=e.name||"default",a=e.fps||30,s=e.blendMode,o=e.length||-1,l=e.hierarchy||[];for(let c=0;c<l.length;c++){let u=l[c].keys;if(!(!u||u.length===0))if(u[0].morphTargets){let d={},h;for(h=0;h<u.length;h++)if(u[h].morphTargets)for(let f=0;f<u[h].morphTargets.length;f++)d[u[h].morphTargets[f]]=-1;for(let f in d){let p=[],m=[];for(let v=0;v!==u[h].morphTargets.length;++v){let y=u[h];p.push(y.time),m.push(y.morphTarget===f?1:0)}r.push(new rx(".morphTargetInfluence["+f+"]",p,m))}o=d.length*a}else{let d=".bones["+t[c].name+"]";i(nx,d+".position",u,"pos",r),i(ny,d+".quaternion",u,"rot",r),i(nx,d+".scale",u,"scl",r)}}return r.length===0?null:new this(n,o,r,s)}resetDuration(){let e=this.tracks,t=0;for(let i=0,r=e.length;i!==r;++i){let n=this.tracks[i];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function ipe(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return rx;case"vector":case"vector2":case"vector3":case"vector4":return nx;case"color":return Ej;case"quaternion":return ny;case"bool":case"boolean":return jv;case"string":return Wv}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function rpe(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=ipe(e.type);if(e.times===void 0){let i=[],r=[];Sj(e.keys,i,r,"value"),e.times=i,e.values=r}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var ax={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Aj=class{constructor(e,t,i){let r=this,n=!1,a=0,s=0,o,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(c){s++,n===!1&&r.onStart!==void 0&&r.onStart(c,a,s),n=!0},this.itemEnd=function(c){a++,r.onProgress!==void 0&&r.onProgress(c,a,s),a===s&&(n=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(c){r.onError!==void 0&&r.onError(c)},this.resolveURL=function(c){return o?o(c):c},this.setURLModifier=function(c){return o=c,this},this.addHandler=function(c,u){return l.push(c,u),this},this.removeHandler=function(c){let u=l.indexOf(c);return u!==-1&&l.splice(u,2),this},this.getHandler=function(c){for(let u=0,d=l.length;u<d;u+=2){let h=l[u],f=l[u+1];if(h.global&&(h.lastIndex=0),h.test(c))return f}return null}}},npe=new Aj,ay=class{constructor(e){this.manager=e!==void 0?e:npe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let i=this;return new Promise(function(r,n){i.load(e,r,t,n)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},Zc={},ape=class extends Error{constructor(e,t){super(e),this.response=t}},hA=class extends ay{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let n=ax.get(e);if(n!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(n),this.manager.itemEnd(e)},0),n;if(Zc[e]!==void 0){Zc[e].push({onLoad:t,onProgress:i,onError:r});return}Zc[e]=[],Zc[e].push({onLoad:t,onProgress:i,onError:r});let a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,o=this.responseType;fetch(a).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let c=Zc[e],u=l.body.getReader(),d=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),h=d?parseInt(d):0,f=h!==0,p=0,m=new ReadableStream({start(v){y();function y(){u.read().then(({done:x,value:b})=>{if(x)v.close();else{p+=b.byteLength;let w=new ProgressEvent("progress",{lengthComputable:f,loaded:p,total:h});for(let S=0,_=c.length;S<_;S++){let E=c[S];E.onProgress&&E.onProgress(w)}v.enqueue(b),y()}})}}});return new Response(m)}else throw new ape(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(o){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(c=>new DOMParser().parseFromString(c,s));case"json":return l.json();default:if(s===void 0)return l.text();{let c=/charset="?([^;"\s]*)"?/i.exec(s),u=c&&c[1]?c[1].toLowerCase():void 0,d=new TextDecoder(u);return l.arrayBuffer().then(h=>d.decode(h))}}}).then(l=>{ax.add(e,l);let c=Zc[e];delete Zc[e];for(let u=0,d=c.length;u<d;u++){let h=c[u];h.onLoad&&h.onLoad(l)}}).catch(l=>{let c=Zc[e];if(c===void 0)throw this.manager.itemError(e),l;delete Zc[e];for(let u=0,d=c.length;u<d;u++){let h=c[u];h.onError&&h.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},spe=class extends ay{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let n=this,a=ax.get(e);if(a!==void 0)return n.manager.itemStart(e),setTimeout(function(){t&&t(a),n.manager.itemEnd(e)},0),a;let s=a1("img");function o(){c(),ax.add(e,this),t&&t(this),n.manager.itemEnd(e)}function l(u){c(),r&&r(u),n.manager.itemError(e),n.manager.itemEnd(e)}function c(){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",o,!1),s.addEventListener("error",l,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),n.manager.itemStart(e),s.src=e,s}},ope=class extends ay{constructor(e){super(e)}load(e,t,i,r){let n=new Kr,a=new spe(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(s){n.image=s,n.needsUpdate=!0,t!==void 0&&t(n)},i,r),n}},sy=class extends dr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ii(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}},lpe=class extends sy{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(dr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ii(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},fC=new pt,Yk=new H,Kk=new H,uP=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Pe(512,512),this.map=null,this.mapPass=null,this.matrix=new pt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new iP,this._frameExtents=new Pe(1,1),this._viewportCount=1,this._viewports=[new vi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,i=this.matrix;Yk.setFromMatrixPosition(e.matrixWorld),t.position.copy(Yk),Kk.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Kk),t.updateMatrixWorld(),fC.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(fC),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(fC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},cpe=class extends uP{constructor(){super(new Ba(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,i=n1*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,n=e.distance||t.far;(i!==t.fov||r!==t.aspect||n!==t.far)&&(t.fov=i,t.aspect=r,t.far=n,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},upe=class extends sy{constructor(e,t,i=0,r=Math.PI/3,n=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(dr.DEFAULT_UP),this.updateMatrix(),this.target=new dr,this.distance=i,this.angle=r,this.penumbra=n,this.decay=a,this.map=null,this.shadow=new cpe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},Xk=new pt,P0=new H,pC=new H,dpe=class extends uP{constructor(){super(new Ba(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Pe(4,2),this._viewportCount=6,this._viewports=[new vi(2,1,1,1),new vi(0,1,1,1),new vi(3,1,1,1),new vi(1,1,1,1),new vi(3,0,1,1),new vi(1,0,1,1)],this._cubeDirections=[new H(1,0,0),new H(-1,0,0),new H(0,0,1),new H(0,0,-1),new H(0,1,0),new H(0,-1,0)],this._cubeUps=[new H(0,1,0),new H(0,1,0),new H(0,1,0),new H(0,1,0),new H(0,0,1),new H(0,0,-1)]}updateMatrices(e,t=0){let i=this.camera,r=this.matrix,n=e.distance||i.far;n!==i.far&&(i.far=n,i.updateProjectionMatrix()),P0.setFromMatrixPosition(e.matrixWorld),i.position.copy(P0),pC.copy(i.position),pC.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(pC),i.updateMatrixWorld(),r.makeTranslation(-P0.x,-P0.y,-P0.z),Xk.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Xk)}},hpe=class extends sy{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new dpe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},fpe=class extends uP{constructor(){super(new G_(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},ppe=class extends sy{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(dr.DEFAULT_UP),this.updateMatrix(),this.target=new dr,this.shadow=new fpe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},Mj=class extends Kt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},Tj=class extends ay{constructor(e){super(e)}load(e,t,i,r){let n=this,a=new hA(n.manager);a.setPath(n.path),a.setRequestHeader(n.requestHeader),a.setWithCredentials(n.withCredentials),a.load(e,function(s){try{t(n.parse(JSON.parse(s)))}catch(o){r?r(o):console.error(o),n.manager.itemError(e)}},i,r)}parse(e){let t={},i={};function r(d,h){if(t[h]!==void 0)return t[h];let f=d.interleavedBuffers[h],p=n(d,f.buffer),m=Qy(f.type,p),v=new yfe(m,f.stride);return v.uuid=f.uuid,t[h]=v,v}function n(d,h){if(i[h]!==void 0)return i[h];let f=d.arrayBuffers[h],p=new Uint32Array(f).buffer;return i[h]=p,p}let a=e.isInstancedBufferGeometry?new Mj:new Kt,s=e.data.index;if(s!==void 0){let d=Qy(s.type,s.array);a.setIndex(new ui(d,1))}let o=e.data.attributes;for(let d in o){let h=o[d],f;if(h.isInterleavedBufferAttribute){let p=r(e.data,h.data);f=new lA(p,h.itemSize,h.offset,h.normalized)}else{let p=Qy(h.type,h.array),m=h.isInstancedBufferAttribute?s1:ui;f=new m(p,h.itemSize,h.normalized)}h.name!==void 0&&(f.name=h.name),h.usage!==void 0&&f.setUsage(h.usage),h.updateRange!==void 0&&(f.updateRange.offset=h.updateRange.offset,f.updateRange.count=h.updateRange.count),a.setAttribute(d,f)}let l=e.data.morphAttributes;if(l)for(let d in l){let h=l[d],f=[];for(let p=0,m=h.length;p<m;p++){let v=h[p],y;if(v.isInterleavedBufferAttribute){let x=r(e.data,v.data);y=new lA(x,v.itemSize,v.offset,v.normalized)}else{let x=Qy(v.type,v.array);y=new ui(x,v.itemSize,v.normalized)}v.name!==void 0&&(y.name=v.name),f.push(y)}a.morphAttributes[d]=f}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);let c=e.data.groups||e.data.drawcalls||e.data.offsets;if(c!==void 0)for(let d=0,h=c.length;d!==h;++d){let f=c[d];a.addGroup(f.start,f.count,f.materialIndex)}let u=e.data.boundingSphere;if(u!==void 0){let d=new H;u.center!==void 0&&d.fromArray(u.center),a.boundingSphere=new Fs(d,u.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}},mpe=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Qk(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=Qk();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function Qk(){return(typeof performance>"u"?Date:performance).now()}var vpe=class{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,n,a;switch(t){case"quaternion":r=this._slerp,n=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,n=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,n=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=n,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let i=this.buffer,r=this.valueSize,n=e*r+r,a=this.cumulativeWeight;if(a===0){for(let s=0;s!==r;++s)i[n+s]=i[s];a=t}else{a+=t;let s=t/a;this._mixBufferRegion(i,n,0,s,r)}this.cumulativeWeight=a}accumulateAdditive(e){let t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,i=this.buffer,r=e*t+t,n=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,n<1){let o=t*this._origIndex;this._mixBufferRegion(i,r,o,1-n,t)}a>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let o=t,l=t+t;o!==l;++o)if(i[o]!==i[o+t]){s.setValue(i,r);break}}saveOriginalState(){let e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let n=i,a=r;n!==a;++n)t[n]=t[r+n%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,n){if(r>=.5)for(let a=0;a!==n;++a)e[t+a]=e[i+a]}_slerp(e,t,i,r){mi.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,n){let a=this._workIndex*n;mi.multiplyQuaternionsFlat(e,a,e,t,e,i),mi.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,i,r,n){let a=1-r;for(let s=0;s!==n;++s){let o=t+s;e[o]=e[o]*a+e[i+s]*r}}_lerpAdditive(e,t,i,r,n){for(let a=0;a!==n;++a){let s=t+a;e[s]=e[s]+e[i+a]*r}}},dP="\\[\\]\\.:\\/",gpe=new RegExp("["+dP+"]","g"),hP="[^"+dP+"]",ype="[^"+dP.replace("\\.","")+"]",bpe=/((?:WC+[\/:])*)/.source.replace("WC",hP),wpe=/(WCOD+)?/.source.replace("WCOD",ype),xpe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",hP),_pe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",hP),Spe=new RegExp("^"+bpe+wpe+xpe+_pe+"$"),Cpe=["material","materials","bones","map"],Epe=class{constructor(e,t,i){let r=i||xr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,n=i.length;r!==n;++r)i[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},xr=class{constructor(t,i,r){this.path=i,this.parsedPath=r||xr.parseTrackName(i),this.node=xr.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new xr.Composite(t,i,r):new xr(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(gpe,"")}static parseTrackName(t){let i=Spe.exec(t);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},n=r.nodeName&&r.nodeName.lastIndexOf(".");if(n!==void 0&&n!==-1){let a=r.nodeName.substring(n+1);Cpe.indexOf(a)!==-1&&(r.nodeName=r.nodeName.substring(0,n),r.objectName=a)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(i===void 0||i===""||i==="."||i===-1||i===t.name||i===t.uuid)return t;if(t.skeleton){let r=t.skeleton.getBoneByName(i);if(r!==void 0)return r}if(t.children){let r=function(a){for(let s=0;s<a.length;s++){let o=a[s];if(o.name===i||o.uuid===i)return o;let l=r(o.children);if(l)return l}return null},n=r(t.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){let r=this.resolvedProperty;for(let n=0,a=r.length;n!==a;++n)t[i++]=r[n]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){let r=this.resolvedProperty;for(let n=0,a=r.length;n!==a;++n)r[n]=t[i++]}_setValue_array_setNeedsUpdate(t,i){let r=this.resolvedProperty;for(let n=0,a=r.length;n!==a;++n)r[n]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){let r=this.resolvedProperty;for(let n=0,a=r.length;n!==a;++n)r[n]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node,i=this.parsedPath,r=i.objectName,n=i.propertyName,a=i.propertyIndex;if(t||(t=xr.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let c=i.objectIndex;switch(r){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let u=0;u<t.length;u++)if(t[u].name===c){c=u;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(c!==void 0){if(t[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[c]}}let s=t[n];if(s===void 0){let c=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+n+" but it wasn't found.",t);return}let o=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(a!==void 0){if(n==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[a]!==void 0&&(a=t.morphTargetDictionary[a])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=n;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};xr.Composite=Epe;xr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};xr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};xr.prototype.GetterByBindingType=[xr.prototype._getValue_direct,xr.prototype._getValue_array,xr.prototype._getValue_arrayElement,xr.prototype._getValue_toArray];xr.prototype.SetterByBindingTypeAndVersioning=[[xr.prototype._setValue_direct,xr.prototype._setValue_direct_setNeedsUpdate,xr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[xr.prototype._setValue_array,xr.prototype._setValue_array_setNeedsUpdate,xr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[xr.prototype._setValue_arrayElement,xr.prototype._setValue_arrayElement_setNeedsUpdate,xr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[xr.prototype._setValue_fromArray,xr.prototype._setValue_fromArray_setNeedsUpdate,xr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Ape=class{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;let n=t.tracks,a=n.length,s=new Array(a),o={endingStart:bm,endingEnd:bm};for(let l=0;l!==a;++l){let c=n[l].createInterpolant(null);s[l]=c,c.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=$H,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){let r=this._clip.duration,n=e._clip.duration,a=n/r,s=r/n;e.warp(1,a,t),this.warp(s,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){let r=this._mixer,n=r.time,a=this.timeScale,s=this._timeScaleInterpolant;s===null&&(s=r._lendControlInterpolant(),this._timeScaleInterpolant=s);let o=s.parameterPositions,l=s.sampleValues;return o[0]=n,o[1]=n+i,l[0]=e/a,l[1]=t/a,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}let n=this._startTime;if(n!==null){let o=(e-n)*i;o<0||i===0?t=0:(this._startTime=null,t=i*o)}t*=this._updateTimeScale(e);let a=this._updateTime(t),s=this._updateWeight(e);if(s>0){let o=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case ile:for(let c=0,u=o.length;c!==u;++c)o[c].evaluate(a),l[c].accumulateAdditive(s);break;case Q5:default:for(let c=0,u=o.length;c!==u;++c)o[c].evaluate(a),l[c].accumulate(r,s)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let i=this._weightInterpolant;if(i!==null){let r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let i=this._timeScaleInterpolant;if(i!==null){let r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,i=this.loop,r=this.time+e,n=this._loopCount,a=i===X5;if(e===0)return n===-1?r:a&&(n&1)===1?t-r:r;if(i===GH){n===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(n===-1&&(e>=0?(n=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){let s=Math.floor(r/t);r-=t*s,n+=Math.abs(s);let o=this.repetitions-n;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(o===1){let l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=n,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=r;if(a&&(n&1)===1)return t-r}return r}_setEndings(e,t,i){let r=this._interpolantSettings;i?(r.endingStart=wm,r.endingEnd=wm):(e?r.endingStart=this.zeroSlopeAtStart?wm:bm:r.endingStart=X2,t?r.endingEnd=this.zeroSlopeAtEnd?wm:bm:r.endingEnd=X2)}_scheduleFading(e,t,i){let r=this._mixer,n=r.time,a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);let s=a.parameterPositions,o=a.sampleValues;return s[0]=n,o[0]=t,s[1]=n+e,o[1]=i,this}},Mpe=new Float32Array(1),Tpe=class extends Pa{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let i=e._localRoot||this._root,r=e._clip.tracks,n=r.length,a=e._propertyBindings,s=e._interpolants,o=i.uuid,l=this._bindingsByRootAndName,c=l[o];c===void 0&&(c={},l[o]=c);for(let u=0;u!==n;++u){let d=r[u],h=d.name,f=c[h];if(f!==void 0)++f.referenceCount,a[u]=f;else{if(f=a[u],f!==void 0){f._cacheIndex===null&&(++f.referenceCount,this._addInactiveBinding(f,o,h));continue}let p=t&&t._propertyBindings[u].binding.parsedPath;f=new vpe(xr.create(i,h,p),d.ValueTypeName,d.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,o,h),a[u]=f}s[u].resultBuffer=f.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let i=(e._localRoot||this._root).uuid,r=e._clip.uuid,n=this._actionsByClip[r];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,r,i)}let t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){let n=t[i];n.useCount++===0&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){let n=t[i];--n.useCount===0&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){let r=this._actions,n=this._actionsByClip,a=n[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,n[t]=a;else{let s=a.knownActions;e._byClipCacheIndex=s.length,s.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){let t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;let n=e._clip.uuid,a=this._actionsByClip,s=a[n],o=s.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null;let u=s.actionByRoot,d=(e._localRoot||this._root).uuid;delete u[d],o.length===0&&delete a[n],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){let n=t[i];--n.referenceCount===0&&this._removeInactiveBinding(n)}}_lendAction(e){let t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,n=t[r];e._cacheIndex=r,t[r]=e,n._cacheIndex=i,t[i]=n}_takeBackAction(e){let t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,n=t[r];e._cacheIndex=r,t[r]=e,n._cacheIndex=i,t[i]=n}_addInactiveBinding(e,t,i){let r=this._bindingsByRootAndName,n=this._bindings,a=r[t];a===void 0&&(a={},r[t]=a),a[i]=e,e._cacheIndex=n.length,n.push(e)}_removeInactiveBinding(e){let t=this._bindings,i=e.binding,r=i.rootNode.uuid,n=i.path,a=this._bindingsByRootAndName,s=a[r],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete s[n],Object.keys(s).length===0&&delete a[r]}_lendBinding(e){let t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,n=t[r];e._cacheIndex=r,t[r]=e,n._cacheIndex=i,t[i]=n}_takeBackBinding(e){let t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,n=t[r];e._cacheIndex=r,t[r]=e,n._cacheIndex=i,t[i]=n}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,i=e[t];return i===void 0&&(i=new Cj(new Float32Array(2),new Float32Array(2),1,Mpe),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){let t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,n=t[r];e.__cacheIndex=r,t[r]=e,n.__cacheIndex=i,t[i]=n}clipAction(e,t,i){let r=t||this._root,n=r.uuid,a=typeof e=="string"?dA.findByName(r,e):e,s=a!==null?a.uuid:e,o=this._actionsByClip[s],l=null;if(i===void 0&&(a!==null?i=a.blendMode:i=Q5),o!==void 0){let u=o.actionByRoot[n];if(u!==void 0&&u.blendMode===i)return u;l=o.knownActions[0],a===null&&(a=l._clip)}if(a===null)return null;let c=new Ape(this,a,t,i);return this._bindAction(c,l),this._addInactiveAction(c,s,n),c}existingAction(e,t){let i=t||this._root,r=i.uuid,n=typeof e=="string"?dA.findByName(i,e):e,a=n?n.uuid:e,s=this._actionsByClip[a];return s!==void 0&&s.actionByRoot[r]||null}stopAllAction(){let e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;let t=this._actions,i=this._nActiveActions,r=this.time+=e,n=Math.sign(e),a=this._accuIndex^=1;for(let l=0;l!==i;++l)t[l]._update(r,e,n,a);let s=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)s[l].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,i=e.uuid,r=this._actionsByClip,n=r[i];if(n!==void 0){let a=n.knownActions;for(let s=0,o=a.length;s!==o;++s){let l=a[s];this._deactivateAction(l);let c=l._cacheIndex,u=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=c,t[c]=u,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[i]}}uncacheRoot(e){let t=e.uuid,i=this._actionsByClip;for(let a in i){let s=i[a].actionByRoot,o=s[t];o!==void 0&&(this._deactivateAction(o),this._removeInactiveAction(o))}let r=this._bindingsByRootAndName,n=r[t];if(n!==void 0)for(let a in n){let s=n[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}}uncacheAction(e,t){let i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}},ot=class{constructor(e){this.value=e}clone(){return new ot(this.value.clone===void 0?this.value:this.value.clone())}},Pj=class{constructor(e,t,i=0,r=1/0){this.ray=new Vv(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new eP,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return fA(e,this,i,t),i.sort(Jk),i}intersectObjects(e,t=!0,i=[]){for(let r=0,n=e.length;r<n;r++)fA(e[r],this,i,t);return i.sort(Jk),i}};function Jk(e,t){return e.distance-t.distance}function fA(e,t,i,r){if(e.layers.test(t.layers)&&e.raycast(t,i),r===!0){let n=e.children;for(let a=0,s=n.length;a<s;a++)fA(n[a],t,i,!0)}}var e6=class{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Sn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},t6=new Pe,Dj=class{constructor(e=new Pe(1/0,1/0),t=new Pe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=t6.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return t6.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},i6=new H,Sb=new H,Po=class{constructor(e=new H,t=new H){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){i6.subVectors(e,this.start),Sb.subVectors(this.end,this.start);let i=Sb.dot(Sb),r=Sb.dot(i6)/i;return t&&(r=Sn(r,0,1)),r}closestPointToPoint(e,t,i){let r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},r6=new H,Ppe=class extends dr{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let i=new Kt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,s=1,o=32;a<o;a++,s++){let l=a/o*Math.PI*2,c=s/o*Math.PI*2;r.push(Math.cos(l),Math.sin(l),1,Math.cos(c),Math.sin(c),1)}i.setAttribute("position",new It(r,3));let n=new Sh({fog:!1,toneMapped:!1});this.cone=new ry(i,n),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),r6.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(r6),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},Dpe=class extends Yr{constructor(e,t,i){let r=new Nm(t,4,2),n=new Tu({wireframe:!0,fog:!1,toneMapped:!1});super(r,n),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},n6=new H,Cb=new H,a6=new H,Ipe=class extends dr{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Kt;r.setAttribute("position",new It([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let n=new Sh({fog:!1,toneMapped:!1});this.lightPlane=new ex(r,n),this.add(this.lightPlane),r=new Kt,r.setAttribute("position",new It([0,0,0,0,0,1],3)),this.targetLine=new ex(r,n),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),n6.setFromMatrixPosition(this.light.matrixWorld),Cb.setFromMatrixPosition(this.light.target.matrixWorld),a6.subVectors(Cb,n6),this.lightPlane.lookAt(Cb),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Cb),this.targetLine.scale.z=a6.length()}},Eb=new H,en=new ap,sx=class extends ry{constructor(e){let t=new Kt,i=new Sh({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],n=[],a={};s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4");function s(f,p){o(f),o(p)}function o(f){r.push(0,0,0),n.push(0,0,0),a[f]===void 0&&(a[f]=[]),a[f].push(r.length/3-1)}t.setAttribute("position",new It(r,3)),t.setAttribute("color",new It(n,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();let l=new ii(16755200),c=new ii(16711680),u=new ii(43775),d=new ii(16777215),h=new ii(3355443);this.setColors(l,c,u,d,h)}setColors(e,t,i,r,n){let a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,n.r,n.g,n.b),a.setXYZ(41,n.r,n.g,n.b),a.setXYZ(42,n.r,n.g,n.b),a.setXYZ(43,n.r,n.g,n.b),a.setXYZ(44,n.r,n.g,n.b),a.setXYZ(45,n.r,n.g,n.b),a.setXYZ(46,n.r,n.g,n.b),a.setXYZ(47,n.r,n.g,n.b),a.setXYZ(48,n.r,n.g,n.b),a.setXYZ(49,n.r,n.g,n.b),a.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap,i=1,r=1;en.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),cn("c",t,e,en,0,0,-1),cn("t",t,e,en,0,0,1),cn("n1",t,e,en,-i,-r,-1),cn("n2",t,e,en,i,-r,-1),cn("n3",t,e,en,-i,r,-1),cn("n4",t,e,en,i,r,-1),cn("f1",t,e,en,-i,-r,1),cn("f2",t,e,en,i,-r,1),cn("f3",t,e,en,-i,r,1),cn("f4",t,e,en,i,r,1),cn("u1",t,e,en,i*.7,r*1.1,-1),cn("u2",t,e,en,-i*.7,r*1.1,-1),cn("u3",t,e,en,0,r*2,-1),cn("cf1",t,e,en,-i,0,1),cn("cf2",t,e,en,i,0,1),cn("cf3",t,e,en,0,-r,1),cn("cf4",t,e,en,0,r,1),cn("cn1",t,e,en,-i,0,-1),cn("cn2",t,e,en,i,0,-1),cn("cn3",t,e,en,0,-r,-1),cn("cn4",t,e,en,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function cn(e,t,i,r,n,a,s){Eb.set(n,a,s).unproject(r);let o=t[e];if(o!==void 0){let l=i.getAttribute("position");for(let c=0,u=o.length;c<u;c++)l.setXYZ(o[c],Eb.x,Eb.y,Eb.z)}}var ox=class extends ry{constructor(e,t=16776960){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],n=new Kt;n.setIndex(new ui(i,1)),n.setAttribute("position",new It(r,3)),super(n,new Sh({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},Ope=class extends ry{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Kt;r.setAttribute("position",new It(t,3)),r.setAttribute("color",new It(i,3));let n=new Sh({vertexColors:!0,toneMapped:!1});super(r,n),this.type="AxesHelper"}setColors(e,t,i){let r=new ii,n=this.geometry.attributes.color.array;return r.set(e),r.toArray(n,0),r.toArray(n,3),r.set(t),r.toArray(n,6),r.toArray(n,9),r.set(i),r.toArray(n,12),r.toArray(n,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},hu=Rpe();function Rpe(){let e=new ArrayBuffer(4),t=new Float32Array(e),i=new Uint32Array(e),r=new Uint32Array(512),n=new Uint32Array(512);for(let l=0;l<256;++l){let c=l-127;c<-27?(r[l]=0,r[l|256]=32768,n[l]=24,n[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,n[l]=-c-1,n[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,n[l]=13,n[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,n[l]=24,n[l|256]=24):(r[l]=31744,r[l|256]=64512,n[l]=13,n[l|256]=13)}let a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,a[l]=c|u}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:t,uint32View:i,baseTable:r,shiftTable:n,mantissaTable:a,exponentTable:s,offsetTable:o}}function kpe(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Sn(e,-65504,65504),hu.floatView[0]=e;let t=hu.uint32View[0],i=t>>23&511;return hu.baseTable[i]+((t&8388607)>>hu.shiftTable[i])}function Lpe(e){let t=e>>10;return hu.uint32View[0]=hu.mantissaTable[hu.offsetTable[t]+(e&1023)]+hu.exponentTable[t],hu.floatView[0]}var Bpe=Object.freeze({__proto__:null,fromHalfFloat:Lpe,toHalfFloat:kpe});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:zv}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=zv);var D0=".",fP=Symbol("target"),Ij=Symbol("unsubscribe");function pA(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}function Npe(e){return(typeof e=="object"?e===null:typeof e!="function")||e instanceof RegExp}var rc=Array.isArray;function pP(e){return typeof e=="symbol"}var Fpe={after:(e,t)=>rc(e)?e.slice(t.length):t===""?e:e.slice(t.length+1),concat:(e,t)=>rc(e)?(e=[...e],t&&e.push(t),e):t&&t.toString!==void 0?(e!==""&&(e+=D0),pP(t)?e+t.toString():e+t):e,initial:e=>{if(rc(e))return e.slice(0,-1);if(e==="")return e;let t=e.lastIndexOf(D0);return t===-1?"":e.slice(0,t)},last:e=>{if(rc(e))return e[e.length-1]||"";if(e==="")return e;let t=e.lastIndexOf(D0);return t===-1?e:e.slice(t+1)},walk:(e,t)=>{if(rc(e))for(let i of e)t(i);else if(e!==""){let i=0,r=e.indexOf(D0);if(r===-1)t(e);else for(;i<e.length;)r===-1&&(r=e.length),t(e.slice(i,r)),i=r+1,r=e.indexOf(D0,i)}},get(e,t){return this.walk(t,i=>{e&&(e=e[i])}),e}},mo=Fpe;function zpe(e){return typeof e=="object"&&typeof e.next=="function"}function Vpe(e,t,i,r,n){let a=e.next;if(t.name==="entries")e.next=function(){let s=a.call(this);return s.done===!1&&(s.value[0]=n(s.value[0],t,s.value[0],r),s.value[1]=n(s.value[1],t,s.value[0],r)),s};else if(t.name==="values"){let s=i[fP].keys();e.next=function(){let o=a.call(this);return o.done===!1&&(o.value=n(o.value,t,s.next().value,r)),o}}else e.next=function(){let s=a.call(this);return s.done===!1&&(s.value=n(s.value,t,s.value,r)),s};return e}function s6(e,t,i){return e.isUnsubscribed||t.ignoreSymbols&&pP(i)||t.ignoreUnderscores&&i.charAt(0)==="_"||"ignoreKeys"in t&&t.ignoreKeys.includes(i)}var Upe=class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let t=this._getDescriptorCache(),i=t.get(e);return i===void 0&&(i={},t.set(e,i)),i}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);let i=this._getProperties(e),r=i[t];return r===void 0&&(r=Reflect.getOwnPropertyDescriptor(e,t),i[t]=r),r}getProxy(e,t,i,r){if(this.isUnsubscribed)return e;let n=e[r],a=n||e;this._pathCache.set(a,t);let s=this._proxyCache.get(a);return s===void 0&&(s=n===void 0?new Proxy(e,i):e,this._proxyCache.set(a,s)),s}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,mo.get(t,this.getPath(e)))}defineProperty(e,t,i){return Reflect.defineProperty(e,t,i)?(this.isUnsubscribed||(this._getProperties(e)[t]=i),!0):!1}setProperty(e,t,i,r,n){if(!this._equals(n,i)||!(t in e)){let a=this._getOwnPropertyDescriptor(e,t);return a!==void 0&&"set"in a?Reflect.set(e,t,i,r):Reflect.set(e,t,i)}return!0}deleteProperty(e,t,i){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){let r=this._getDescriptorCache().get(e);r&&(delete r[t],this._pathCache.delete(i))}return!0}return!1}isSameDescriptor(e,t,i){let r=this._getOwnPropertyDescriptor(t,i);return e!==void 0&&r!==void 0&&Object.is(e.value,r.value)&&(e.writable||!1)===(r.writable||!1)&&(e.enumerable||!1)===(r.enumerable||!1)&&(e.configurable||!1)===(r.configurable||!1)&&e.get===r.get&&e.set===r.set}isGetInvariant(e,t){let i=this._getOwnPropertyDescriptor(e,t);return i!==void 0&&i.configurable!==!0&&i.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function mA(e){return toString.call(e)==="[object Object]"}function Ab(){return!0}function Rp(e,t){return e.length!==t.length||e.some((i,r)=>t[r]!==i)}var Oj=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),Hpe=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),Rj={push:Ab,pop:Ab,shift:Ab,unshift:Ab,copyWithin:Rp,reverse:Rp,sort:Rp,splice:Rp,flat:Rp,fill:Rp},jpe=new Set([...Oj,...Hpe,...Object.keys(Rj)]);function Mb(e,t){if(e.size!==t.size)return!0;for(let i of e)if(!t.has(i))return!0;return!1}var kj=["keys","values","entries"],Lj=new Set(["has","toString"]),Bj={add:Mb,clear:Mb,delete:Mb,forEach:Mb},Wpe=new Set([...Lj,...Object.keys(Bj),...kj]);function Tb(e,t){if(e.size!==t.size)return!0;let i;for(let[r,n]of e)if(i=t.get(r),i!==n||i===void 0&&!t.has(r))return!0;return!1}var Gpe=new Set([...Lj,"get"]),Nj={set:Tb,clear:Tb,delete:Tb,forEach:Tb},$pe=new Set([...Gpe,...Object.keys(Nj),...kj]),oh=class{constructor(e,t,i,r){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=r,this._changes=r?[]:null,this.clone=t===void 0?e:this._shallowClone(e)}static isHandledMethod(e){return Oj.has(e)}_shallowClone(e){let t=e;if(mA(e))t={...e};else if(rc(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map(i=>this._shallowClone(i)));else if(e instanceof Map){t=new Map;for(let[i,r]of e.entries())t.set(i,this._shallowClone(r))}return this._clonedCache.add(t),t}preferredThisArg(e,t,i,r){return e?(rc(r)?this._onIsChanged=Rj[t]:r instanceof Set?this._onIsChanged=Bj[t]:r instanceof Map&&(this._onIsChanged=Nj[t]),r):i}update(e,t,i){let r=mo.after(e,this._path);if(t!=="length"){let n=this.clone;mo.walk(r,a=>{n&&n[a]&&(this._clonedCache.has(n[a])||(n[a]=this._shallowClone(n[a])),n=n[a])}),this._hasOnValidate&&this._changes.push({path:r,property:t,previous:i}),n&&n[t]&&(n[t]=i)}this._isChanged=!0}undo(e){let t;for(let i=this._changes.length-1;i!==-1;i--)t=this._changes[i],mo.get(e,t.path)[t.property]=t.previous}isChanged(e){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,e)}},o6=class extends oh{static isHandledMethod(e){return jpe.has(e)}},Zpe=class extends oh{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}},l6=class extends oh{static isHandledMethod(e){return Wpe.has(e)}undo(e){for(let t of this.clone)e.add(t);for(let t of e)this.clone.has(t)||e.delete(t)}},c6=class extends oh{static isHandledMethod(e){return $pe.has(e)}undo(e){for(let[t,i]of this.clone.entries())e.set(t,i);for(let t of e.keys())this.clone.has(t)||e.delete(t)}},qpe=class extends oh{constructor(e,t,i,r){super(void 0,t,i,r),this._arg1=i[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},Ype=class extends oh{constructor(e,t,i,r){super(void 0,t,i,r),this._weakKey=i[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},sm=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return mA(e)||rc(e)||pA(e)}static isHandledMethod(e,t){return mA(e)?oh.isHandledMethod(t):rc(e)?o6.isHandledMethod(t):e instanceof Set?l6.isHandledMethod(t):e instanceof Map?c6.isHandledMethod(t):pA(e)}get isCloning(){return this._stack.length>0}start(e,t,i){let r=oh;rc(e)?r=o6:e instanceof Date?r=Zpe:e instanceof Set?r=l6:e instanceof Map?r=c6:e instanceof WeakSet?r=qpe:e instanceof WeakMap&&(r=Ype),this._stack.push(new r(e,t,i,this._hasOnValidate))}update(e,t,i){this._stack[this._stack.length-1].update(e,t,i)}preferredThisArg(e,t,i){let{name:r}=e,n=sm.isHandledMethod(i,r);return this._stack[this._stack.length-1].preferredThisArg(n,r,t,i)}isChanged(e,t,i){return this._stack[this._stack.length-1].isChanged(e,t,i)}undo(e){this._previousClone!==void 0&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},Kpe={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},mP=(e,t,i={})=>{i={...Kpe,...i};let r=Symbol("ProxyTarget"),{equals:n,isShallow:a,ignoreDetached:s,details:o}=i,l=new Upe(n),c=typeof i.onValidate=="function",u=new sm(c),d=(x,b,w,S,_)=>!c||u.isCloning||i.onValidate(mo.concat(l.getPath(x),b),w,S,_)===!0,h=(x,b,w,S)=>{!s6(l,i,b)&&!(s&&l.isDetached(x,e))&&f(l.getPath(x),b,w,S)},f=(x,b,w,S,_)=>{u.isCloning?u.update(x,b,S):t(mo.concat(x,b),w,S,_)},p=x=>x&&(x[r]||x),m=(x,b,w,S)=>Npe(x)||w==="constructor"||a&&!sm.isHandledMethod(b,w)||s6(l,i,w)||l.isGetInvariant(b,w)||s&&l.isDetached(b,e)?x:(S===void 0&&(S=l.getPath(b)),l.getProxy(x,mo.concat(S,w),v,r)),v={get(x,b,w){if(pP(b)){if(b===r||b===fP)return x;if(b===Ij&&!l.isUnsubscribed&&l.getPath(x).length===0)return l.unsubscribe(),x}let S=pA(x)?Reflect.get(x,b):Reflect.get(x,b,w);return m(S,x,b)},set(x,b,w,S){w=p(w);let _=x[r]||x,E=_[b];if(n(E,w)&&b in x)return!0;let C=d(x,b,w,E);return C&&l.setProperty(_,b,w,S,E)?(h(x,b,x[b],E),!0):!C},defineProperty(x,b,w){if(!l.isSameDescriptor(w,x,b)){let S=x[b];d(x,b,w.value,S)&&l.defineProperty(x,b,w,S)&&h(x,b,w.value,S)}return!0},deleteProperty(x,b){if(!Reflect.has(x,b))return!0;let w=Reflect.get(x,b),S=d(x,b,void 0,w);return S&&l.deleteProperty(x,b,w)?(h(x,b,void 0,w),!0):!S},apply(x,b,w){let S=b[r]||b;if(l.isUnsubscribed)return Reflect.apply(x,S,w);if((o===!1||o!==!0&&!o.includes(x.name))&&sm.isHandledType(S)){let _=mo.initial(l.getPath(x)),E=sm.isHandledMethod(S,x.name);u.start(S,_,w);let C=Reflect.apply(x,u.preferredThisArg(x,b,S),E?w.map(T=>p(T)):w),A=u.isChanged(S,n),M=u.stop();if(sm.isHandledType(C)&&E&&(b instanceof Map&&x.name==="get"&&(_=mo.concat(_,w[0])),C=l.getProxy(C,_,v)),A){let T={name:x.name,args:w,result:C},P=u.isCloning?mo.initial(_):_,D=u.isCloning?mo.last(_):"";d(mo.get(e,P),D,S,M,T)?f(P,D,S,M,T):u.undo(S)}return(b instanceof Map||b instanceof Set)&&zpe(C)?Vpe(C,x,b,_,m):C}return Reflect.apply(x,b,w)}},y=l.getProxy(e,i.pathAsArray?[]:"",v);return t=t.bind(y),c&&(i.onValidate=i.onValidate.bind(y)),y};mP.target=e=>e&&e[fP]||e;mP.unsubscribe=e=>e[Ij]||e;var u6=mP,Xpe=typeof global=="object"&&global&&global.Object===Object&&global,Fj=Xpe,Qpe=typeof self=="object"&&self&&self.Object===Object&&self,Jpe=Fj||Qpe||Function("return this")(),Pl=Jpe,eme=Pl.Symbol,Bo=eme,zj=Object.prototype,tme=zj.hasOwnProperty,ime=zj.toString,I0=Bo?Bo.toStringTag:void 0;function rme(e){var t=tme.call(e,I0),i=e[I0];try{e[I0]=void 0;var r=!0}catch{}var n=ime.call(e);return r&&(t?e[I0]=i:delete e[I0]),n}var nme=rme,ame=Object.prototype,sme=ame.toString;function ome(e){return sme.call(e)}var lme=ome,cme="[object Null]",ume="[object Undefined]",d6=Bo?Bo.toStringTag:void 0;function dme(e){return e==null?e===void 0?ume:cme:d6&&d6 in Object(e)?nme(e):lme(e)}var sp=dme;function hme(e){return e!=null&&typeof e=="object"}var Du=hme,fme="[object Symbol]";function pme(e){return typeof e=="symbol"||Du(e)&&sp(e)==fme}var oy=pme;function mme(e,t){for(var i=-1,r=e==null?0:e.length,n=Array(r);++i<r;)n[i]=t(e[i],i,e);return n}var Vj=mme,vme=Array.isArray,yc=vme,gme=1/0,h6=Bo?Bo.prototype:void 0,f6=h6?h6.toString:void 0;function Uj(e){if(typeof e=="string")return e;if(yc(e))return Vj(e,Uj)+"";if(oy(e))return f6?f6.call(e):"";var t=e+"";return t=="0"&&1/e==-gme?"-0":t}var yme=Uj,bme=/\s/;function wme(e){for(var t=e.length;t--&&bme.test(e.charAt(t)););return t}var xme=wme,_me=/^\s+/;function Sme(e){return e&&e.slice(0,xme(e)+1).replace(_me,"")}var Cme=Sme;function Eme(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var El=Eme,p6=NaN,Ame=/^[-+]0x[0-9a-f]+$/i,Mme=/^0b[01]+$/i,Tme=/^0o[0-7]+$/i,Pme=parseInt;function Dme(e){if(typeof e=="number")return e;if(oy(e))return p6;if(El(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=El(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Cme(e);var i=Mme.test(e);return i||Tme.test(e)?Pme(e.slice(2),i?2:8):Ame.test(e)?p6:+e}var m6=Dme;function Ime(e){return e}var Hj=Ime,Ome="[object AsyncFunction]",Rme="[object Function]",kme="[object GeneratorFunction]",Lme="[object Proxy]";function Bme(e){if(!El(e))return!1;var t=sp(e);return t==Rme||t==kme||t==Ome||t==Lme}var jj=Bme,Nme=Pl["__core-js_shared__"],mC=Nme,v6=function(){var e=/[^.]+$/.exec(mC&&mC.keys&&mC.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Fme(e){return!!v6&&v6 in e}var zme=Fme,Vme=Function.prototype,Ume=Vme.toString;function Hme(e){if(e!=null){try{return Ume.call(e)}catch{}try{return e+""}catch{}}return""}var op=Hme,jme=/[\\^$.*+?()[\]{}|]/g,Wme=/^\[object .+?Constructor\]$/,Gme=Function.prototype,$me=Object.prototype,Zme=Gme.toString,qme=$me.hasOwnProperty,Yme=RegExp("^"+Zme.call(qme).replace(jme,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Kme(e){if(!El(e)||zme(e))return!1;var t=jj(e)?Yme:Wme;return t.test(op(e))}var Xme=Kme;function Qme(e,t){return e==null?void 0:e[t]}var Jme=Qme;function eve(e,t){var i=Jme(e,t);return Xme(i)?i:void 0}var lp=eve,tve=lp(Pl,"WeakMap"),vA=tve,g6=Object.create,ive=function(){function e(){}return function(t){if(!El(t))return{};if(g6)return g6(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}(),rve=ive;function nve(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}var ave=nve;function sve(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}var ove=sve,lve=800,cve=16,uve=Date.now;function dve(e){var t=0,i=0;return function(){var r=uve(),n=cve-(r-i);if(i=r,n>0){if(++t>=lve)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var hve=dve;function fve(e){return function(){return e}}var pve=fve,mve=function(){try{var e=lp(Object,"defineProperty");return e({},"",{}),e}catch{}}(),lx=mve,vve=lx?function(e,t){return lx(e,"toString",{configurable:!0,enumerable:!1,value:pve(t),writable:!0})}:Hj,gve=vve,yve=hve(gve),bve=yve;function wve(e,t){for(var i=-1,r=e==null?0:e.length;++i<r&&t(e[i],i,e)!==!1;);return e}var xve=wve,_ve=9007199254740991,Sve=/^(?:0|[1-9]\d*)$/;function Cve(e,t){var i=typeof e;return t=t??_ve,!!t&&(i=="number"||i!="symbol"&&Sve.test(e))&&e>-1&&e%1==0&&e<t}var vP=Cve;function Eve(e,t,i){t=="__proto__"&&lx?lx(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}var Wj=Eve;function Ave(e,t){return e===t||e!==e&&t!==t}var gP=Ave,Mve=Object.prototype,Tve=Mve.hasOwnProperty;function Pve(e,t,i){var r=e[t];(!(Tve.call(e,t)&&gP(r,i))||i===void 0&&!(t in e))&&Wj(e,t,i)}var yP=Pve;function Dve(e,t,i,r){var n=!i;i||(i={});for(var a=-1,s=t.length;++a<s;){var o=t[a],l=r?r(i[o],e[o],o,i,e):void 0;l===void 0&&(l=e[o]),n?Wj(i,o,l):yP(i,o,l)}return i}var ly=Dve,y6=Math.max;function Ive(e,t,i){return t=y6(t===void 0?e.length-1:t,0),function(){for(var r=arguments,n=-1,a=y6(r.length-t,0),s=Array(a);++n<a;)s[n]=r[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=r[n];return o[t]=i(s),ave(e,this,o)}}var Ove=Ive,Rve=9007199254740991;function kve(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Rve}var bP=kve;function Lve(e){return e!=null&&bP(e.length)&&!jj(e)}var Gj=Lve,Bve=Object.prototype;function Nve(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||Bve;return e===i}var wP=Nve;function Fve(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}var zve=Fve,Vve="[object Arguments]";function Uve(e){return Du(e)&&sp(e)==Vve}var b6=Uve,$j=Object.prototype,Hve=$j.hasOwnProperty,jve=$j.propertyIsEnumerable,Wve=b6(function(){return arguments}())?b6:function(e){return Du(e)&&Hve.call(e,"callee")&&!jve.call(e,"callee")},xP=Wve;function Gve(){return!1}var $ve=Gve,Zj=typeof exports=="object"&&exports&&!exports.nodeType&&exports,w6=Zj&&typeof module=="object"&&module&&!module.nodeType&&module,Zve=w6&&w6.exports===Zj,x6=Zve?Pl.Buffer:void 0,qve=x6?x6.isBuffer:void 0,Yve=qve||$ve,cx=Yve,Kve="[object Arguments]",Xve="[object Array]",Qve="[object Boolean]",Jve="[object Date]",e0e="[object Error]",t0e="[object Function]",i0e="[object Map]",r0e="[object Number]",n0e="[object Object]",a0e="[object RegExp]",s0e="[object Set]",o0e="[object String]",l0e="[object WeakMap]",c0e="[object ArrayBuffer]",u0e="[object DataView]",d0e="[object Float32Array]",h0e="[object Float64Array]",f0e="[object Int8Array]",p0e="[object Int16Array]",m0e="[object Int32Array]",v0e="[object Uint8Array]",g0e="[object Uint8ClampedArray]",y0e="[object Uint16Array]",b0e="[object Uint32Array]",Vr={};Vr[d0e]=Vr[h0e]=Vr[f0e]=Vr[p0e]=Vr[m0e]=Vr[v0e]=Vr[g0e]=Vr[y0e]=Vr[b0e]=!0;Vr[Kve]=Vr[Xve]=Vr[c0e]=Vr[Qve]=Vr[u0e]=Vr[Jve]=Vr[e0e]=Vr[t0e]=Vr[i0e]=Vr[r0e]=Vr[n0e]=Vr[a0e]=Vr[s0e]=Vr[o0e]=Vr[l0e]=!1;function w0e(e){return Du(e)&&bP(e.length)&&!!Vr[sp(e)]}var x0e=w0e;function _0e(e){return function(t){return e(t)}}var _P=_0e,qj=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Og=qj&&typeof module=="object"&&module&&!module.nodeType&&module,S0e=Og&&Og.exports===qj,vC=S0e&&Fj.process,C0e=function(){try{var e=Og&&Og.require&&Og.require("util").types;return e||vC&&vC.binding&&vC.binding("util")}catch{}}(),dv=C0e,_6=dv&&dv.isTypedArray,E0e=_6?_P(_6):x0e,Yj=E0e,A0e=Object.prototype,M0e=A0e.hasOwnProperty;function T0e(e,t){var i=yc(e),r=!i&&xP(e),n=!i&&!r&&cx(e),a=!i&&!r&&!n&&Yj(e),s=i||r||n||a,o=s?zve(e.length,String):[],l=o.length;for(var c in e)(t||M0e.call(e,c))&&!(s&&(c=="length"||n&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||vP(c,l)))&&o.push(c);return o}var Kj=T0e;function P0e(e,t){return function(i){return e(t(i))}}var Xj=P0e,D0e=Xj(Object.keys,Object),I0e=D0e,O0e=Object.prototype,R0e=O0e.hasOwnProperty;function k0e(e){if(!wP(e))return I0e(e);var t=[];for(var i in Object(e))R0e.call(e,i)&&i!="constructor"&&t.push(i);return t}var L0e=k0e;function B0e(e){return Gj(e)?Kj(e):L0e(e)}var SP=B0e;function N0e(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}var F0e=N0e,z0e=Object.prototype,V0e=z0e.hasOwnProperty;function U0e(e){if(!El(e))return F0e(e);var t=wP(e),i=[];for(var r in e)r=="constructor"&&(t||!V0e.call(e,r))||i.push(r);return i}var H0e=U0e;function j0e(e){return Gj(e)?Kj(e,!0):H0e(e)}var hf=j0e,W0e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,G0e=/^\w*$/;function $0e(e,t){if(yc(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||oy(e)?!0:G0e.test(e)||!W0e.test(e)||t!=null&&e in Object(t)}var Z0e=$0e,q0e=lp(Object,"create"),u1=q0e;function Y0e(){this.__data__=u1?u1(null):{},this.size=0}var K0e=Y0e;function X0e(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Q0e=X0e,J0e="__lodash_hash_undefined__",ege=Object.prototype,tge=ege.hasOwnProperty;function ige(e){var t=this.__data__;if(u1){var i=t[e];return i===J0e?void 0:i}return tge.call(t,e)?t[e]:void 0}var rge=ige,nge=Object.prototype,age=nge.hasOwnProperty;function sge(e){var t=this.__data__;return u1?t[e]!==void 0:age.call(t,e)}var oge=sge,lge="__lodash_hash_undefined__";function cge(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=u1&&t===void 0?lge:t,this}var uge=cge;function Gv(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Gv.prototype.clear=K0e;Gv.prototype.delete=Q0e;Gv.prototype.get=rge;Gv.prototype.has=oge;Gv.prototype.set=uge;var S6=Gv;function dge(){this.__data__=[],this.size=0}var hge=dge;function fge(e,t){for(var i=e.length;i--;)if(gP(e[i][0],t))return i;return-1}var K_=fge,pge=Array.prototype,mge=pge.splice;function vge(e){var t=this.__data__,i=K_(t,e);if(i<0)return!1;var r=t.length-1;return i==r?t.pop():mge.call(t,i,1),--this.size,!0}var gge=vge;function yge(e){var t=this.__data__,i=K_(t,e);return i<0?void 0:t[i][1]}var bge=yge;function wge(e){return K_(this.__data__,e)>-1}var xge=wge;function _ge(e,t){var i=this.__data__,r=K_(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this}var Sge=_ge;function $v(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}$v.prototype.clear=hge;$v.prototype.delete=gge;$v.prototype.get=bge;$v.prototype.has=xge;$v.prototype.set=Sge;var X_=$v,Cge=lp(Pl,"Map"),d1=Cge;function Ege(){this.size=0,this.__data__={hash:new S6,map:new(d1||X_),string:new S6}}var Age=Ege;function Mge(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Tge=Mge;function Pge(e,t){var i=e.__data__;return Tge(t)?i[typeof t=="string"?"string":"hash"]:i.map}var Q_=Pge;function Dge(e){var t=Q_(this,e).delete(e);return this.size-=t?1:0,t}var Ige=Dge;function Oge(e){return Q_(this,e).get(e)}var Rge=Oge;function kge(e){return Q_(this,e).has(e)}var Lge=kge;function Bge(e,t){var i=Q_(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this}var Nge=Bge;function Zv(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Zv.prototype.clear=Age;Zv.prototype.delete=Ige;Zv.prototype.get=Rge;Zv.prototype.has=Lge;Zv.prototype.set=Nge;var J_=Zv,Fge="Expected a function";function CP(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Fge);var i=function(){var r=arguments,n=t?t.apply(this,r):r[0],a=i.cache;if(a.has(n))return a.get(n);var s=e.apply(this,r);return i.cache=a.set(n,s)||a,s};return i.cache=new(CP.Cache||J_),i}CP.Cache=J_;var zge=CP,Vge=500;function Uge(e){var t=zge(e,function(r){return i.size===Vge&&i.clear(),r}),i=t.cache;return t}var Hge=Uge,jge=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wge=/\\(\\)?/g,Gge=Hge(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(jge,function(i,r,n,a){t.push(n?a.replace(Wge,"$1"):r||i)}),t}),$ge=Gge;function Zge(e){return e==null?"":yme(e)}var qge=Zge;function Yge(e,t){return yc(e)?e:Z0e(e,t)?[e]:$ge(qge(e))}var qv=Yge,Kge=1/0;function Xge(e){if(typeof e=="string"||oy(e))return e;var t=e+"";return t=="0"&&1/e==-Kge?"-0":t}var eS=Xge;function Qge(e,t){t=qv(t,e);for(var i=0,r=t.length;e!=null&&i<r;)e=e[eS(t[i++])];return i&&i==r?e:void 0}var Qj=Qge;function Jge(e,t){for(var i=-1,r=t.length,n=e.length;++i<r;)e[n+i]=t[i];return e}var EP=Jge,C6=Bo?Bo.isConcatSpreadable:void 0;function e1e(e){return yc(e)||xP(e)||!!(C6&&e&&e[C6])}var t1e=e1e;function Jj(e,t,i,r,n){var a=-1,s=e.length;for(i||(i=t1e),n||(n=[]);++a<s;){var o=e[a];t>0&&i(o)?t>1?Jj(o,t-1,i,r,n):EP(n,o):r||(n[n.length]=o)}return n}var i1e=Jj;function r1e(e){var t=e==null?0:e.length;return t?i1e(e,1):[]}var n1e=r1e;function a1e(e){return bve(Ove(e,void 0,n1e),e+"")}var eW=a1e,s1e=Xj(Object.getPrototypeOf,Object),AP=s1e,o1e="[object Object]",l1e=Function.prototype,c1e=Object.prototype,tW=l1e.toString,u1e=c1e.hasOwnProperty,d1e=tW.call(Object);function h1e(e){if(!Du(e)||sp(e)!=o1e)return!1;var t=AP(e);if(t===null)return!0;var i=u1e.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&tW.call(i)==d1e}var f1e=h1e;function p1e(e,t,i){var r=-1,n=e.length;t<0&&(t=-t>n?0:n+t),i=i>n?n:i,i<0&&(i+=n),n=t>i?0:i-t>>>0,t>>>=0;for(var a=Array(n);++r<n;)a[r]=e[r+t];return a}var m1e=p1e;function v1e(){this.__data__=new X_,this.size=0}var g1e=v1e;function y1e(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}var b1e=y1e;function w1e(e){return this.__data__.get(e)}var x1e=w1e;function _1e(e){return this.__data__.has(e)}var S1e=_1e,C1e=200;function E1e(e,t){var i=this.__data__;if(i instanceof X_){var r=i.__data__;if(!d1||r.length<C1e-1)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new J_(r)}return i.set(e,t),this.size=i.size,this}var A1e=E1e;function Yv(e){var t=this.__data__=new X_(e);this.size=t.size}Yv.prototype.clear=g1e;Yv.prototype.delete=b1e;Yv.prototype.get=x1e;Yv.prototype.has=S1e;Yv.prototype.set=A1e;var qw=Yv;function M1e(e,t){return e&&ly(t,SP(t),e)}var T1e=M1e;function P1e(e,t){return e&&ly(t,hf(t),e)}var D1e=P1e,iW=typeof exports=="object"&&exports&&!exports.nodeType&&exports,E6=iW&&typeof module=="object"&&module&&!module.nodeType&&module,I1e=E6&&E6.exports===iW,A6=I1e?Pl.Buffer:void 0,M6=A6?A6.allocUnsafe:void 0;function O1e(e,t){if(t)return e.slice();var i=e.length,r=M6?M6(i):new e.constructor(i);return e.copy(r),r}var R1e=O1e;function k1e(e,t){for(var i=-1,r=e==null?0:e.length,n=0,a=[];++i<r;){var s=e[i];t(s,i,e)&&(a[n++]=s)}return a}var L1e=k1e;function B1e(){return[]}var rW=B1e,N1e=Object.prototype,F1e=N1e.propertyIsEnumerable,T6=Object.getOwnPropertySymbols,z1e=T6?function(e){return e==null?[]:(e=Object(e),L1e(T6(e),function(t){return F1e.call(e,t)}))}:rW,MP=z1e;function V1e(e,t){return ly(e,MP(e),t)}var U1e=V1e,H1e=Object.getOwnPropertySymbols,j1e=H1e?function(e){for(var t=[];e;)EP(t,MP(e)),e=AP(e);return t}:rW,nW=j1e;function W1e(e,t){return ly(e,nW(e),t)}var G1e=W1e;function $1e(e,t,i){var r=t(e);return yc(e)?r:EP(r,i(e))}var aW=$1e;function Z1e(e){return aW(e,SP,MP)}var gA=Z1e;function q1e(e){return aW(e,hf,nW)}var sW=q1e,Y1e=lp(Pl,"DataView"),yA=Y1e,K1e=lp(Pl,"Promise"),bA=K1e,X1e=lp(Pl,"Set"),wA=X1e,P6="[object Map]",Q1e="[object Object]",D6="[object Promise]",I6="[object Set]",O6="[object WeakMap]",R6="[object DataView]",J1e=op(yA),eye=op(d1),tye=op(bA),iye=op(wA),rye=op(vA),Jh=sp;(yA&&Jh(new yA(new ArrayBuffer(1)))!=R6||d1&&Jh(new d1)!=P6||bA&&Jh(bA.resolve())!=D6||wA&&Jh(new wA)!=I6||vA&&Jh(new vA)!=O6)&&(Jh=function(e){var t=sp(e),i=t==Q1e?e.constructor:void 0,r=i?op(i):"";if(r)switch(r){case J1e:return R6;case eye:return P6;case tye:return D6;case iye:return I6;case rye:return O6}return t});var h1=Jh,nye=Object.prototype,aye=nye.hasOwnProperty;function sye(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&aye.call(e,"index")&&(i.index=e.index,i.input=e.input),i}var oye=sye,lye=Pl.Uint8Array,ux=lye;function cye(e){var t=new e.constructor(e.byteLength);return new ux(t).set(new ux(e)),t}var TP=cye;function uye(e,t){var i=t?TP(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}var dye=uye,hye=/\w*$/;function fye(e){var t=new e.constructor(e.source,hye.exec(e));return t.lastIndex=e.lastIndex,t}var pye=fye,k6=Bo?Bo.prototype:void 0,L6=k6?k6.valueOf:void 0;function mye(e){return L6?Object(L6.call(e)):{}}var vye=mye;function gye(e,t){var i=t?TP(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}var yye=gye,bye="[object Boolean]",wye="[object Date]",xye="[object Map]",_ye="[object Number]",Sye="[object RegExp]",Cye="[object Set]",Eye="[object String]",Aye="[object Symbol]",Mye="[object ArrayBuffer]",Tye="[object DataView]",Pye="[object Float32Array]",Dye="[object Float64Array]",Iye="[object Int8Array]",Oye="[object Int16Array]",Rye="[object Int32Array]",kye="[object Uint8Array]",Lye="[object Uint8ClampedArray]",Bye="[object Uint16Array]",Nye="[object Uint32Array]";function Fye(e,t,i){var r=e.constructor;switch(t){case Mye:return TP(e);case bye:case wye:return new r(+e);case Tye:return dye(e,i);case Pye:case Dye:case Iye:case Oye:case Rye:case kye:case Lye:case Bye:case Nye:return yye(e,i);case xye:return new r;case _ye:case Eye:return new r(e);case Sye:return pye(e);case Cye:return new r;case Aye:return vye(e)}}var zye=Fye;function Vye(e){return typeof e.constructor=="function"&&!wP(e)?rve(AP(e)):{}}var Uye=Vye,Hye="[object Map]";function jye(e){return Du(e)&&h1(e)==Hye}var Wye=jye,B6=dv&&dv.isMap,Gye=B6?_P(B6):Wye,$ye=Gye,Zye="[object Set]";function qye(e){return Du(e)&&h1(e)==Zye}var Yye=qye,N6=dv&&dv.isSet,Kye=N6?_P(N6):Yye,Xye=Kye,Qye=1,Jye=2,ebe=4,oW="[object Arguments]",tbe="[object Array]",ibe="[object Boolean]",rbe="[object Date]",nbe="[object Error]",lW="[object Function]",abe="[object GeneratorFunction]",sbe="[object Map]",obe="[object Number]",cW="[object Object]",lbe="[object RegExp]",cbe="[object Set]",ube="[object String]",dbe="[object Symbol]",hbe="[object WeakMap]",fbe="[object ArrayBuffer]",pbe="[object DataView]",mbe="[object Float32Array]",vbe="[object Float64Array]",gbe="[object Int8Array]",ybe="[object Int16Array]",bbe="[object Int32Array]",wbe="[object Uint8Array]",xbe="[object Uint8ClampedArray]",_be="[object Uint16Array]",Sbe="[object Uint32Array]",Or={};Or[oW]=Or[tbe]=Or[fbe]=Or[pbe]=Or[ibe]=Or[rbe]=Or[mbe]=Or[vbe]=Or[gbe]=Or[ybe]=Or[bbe]=Or[sbe]=Or[obe]=Or[cW]=Or[lbe]=Or[cbe]=Or[ube]=Or[dbe]=Or[wbe]=Or[xbe]=Or[_be]=Or[Sbe]=!0;Or[nbe]=Or[lW]=Or[hbe]=!1;function Yw(e,t,i,r,n,a){var s,o=t&Qye,l=t&Jye,c=t&ebe;if(i&&(s=n?i(e,r,n,a):i(e)),s!==void 0)return s;if(!El(e))return e;var u=yc(e);if(u){if(s=oye(e),!o)return ove(e,s)}else{var d=h1(e),h=d==lW||d==abe;if(cx(e))return R1e(e,o);if(d==cW||d==oW||h&&!n){if(s=l||h?{}:Uye(e),!o)return l?G1e(e,D1e(s,e)):U1e(e,T1e(s,e))}else{if(!Or[d])return n?e:{};s=zye(e,d,o)}}a||(a=new qw);var f=a.get(e);if(f)return f;a.set(e,s),Xye(e)?e.forEach(function(v){s.add(Yw(v,t,i,v,e,a))}):$ye(e)&&e.forEach(function(v,y){s.set(y,Yw(v,t,i,y,e,a))});var p=c?l?sW:gA:l?hf:SP,m=u?void 0:p(e);return xve(m||e,function(v,y){m&&(y=v,v=e[y]),yP(s,y,Yw(v,t,i,y,e,a))}),s}var uW=Yw,Cbe=1,Ebe=4;function Abe(e){return uW(e,Cbe|Ebe)}var tS=Abe,Mbe="__lodash_hash_undefined__";function Tbe(e){return this.__data__.set(e,Mbe),this}var Pbe=Tbe;function Dbe(e){return this.__data__.has(e)}var Ibe=Dbe;function dx(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new J_;++t<i;)this.add(e[t])}dx.prototype.add=dx.prototype.push=Pbe;dx.prototype.has=Ibe;var Obe=dx;function Rbe(e,t){for(var i=-1,r=e==null?0:e.length;++i<r;)if(t(e[i],i,e))return!0;return!1}var kbe=Rbe;function Lbe(e,t){return e.has(t)}var Bbe=Lbe,Nbe=1,Fbe=2;function zbe(e,t,i,r,n,a){var s=i&Nbe,o=e.length,l=t.length;if(o!=l&&!(s&&l>o))return!1;var c=a.get(e),u=a.get(t);if(c&&u)return c==t&&u==e;var d=-1,h=!0,f=i&Fbe?new Obe:void 0;for(a.set(e,t),a.set(t,e);++d<o;){var p=e[d],m=t[d];if(r)var v=s?r(m,p,d,t,e,a):r(p,m,d,e,t,a);if(v!==void 0){if(v)continue;h=!1;break}if(f){if(!kbe(t,function(y,x){if(!Bbe(f,x)&&(p===y||n(p,y,i,r,a)))return f.push(x)})){h=!1;break}}else if(!(p===m||n(p,m,i,r,a))){h=!1;break}}return a.delete(e),a.delete(t),h}var dW=zbe;function Vbe(e){var t=-1,i=Array(e.size);return e.forEach(function(r,n){i[++t]=[n,r]}),i}var Ube=Vbe;function Hbe(e){var t=-1,i=Array(e.size);return e.forEach(function(r){i[++t]=r}),i}var jbe=Hbe,Wbe=1,Gbe=2,$be="[object Boolean]",Zbe="[object Date]",qbe="[object Error]",Ybe="[object Map]",Kbe="[object Number]",Xbe="[object RegExp]",Qbe="[object Set]",Jbe="[object String]",ewe="[object Symbol]",twe="[object ArrayBuffer]",iwe="[object DataView]",F6=Bo?Bo.prototype:void 0,gC=F6?F6.valueOf:void 0;function rwe(e,t,i,r,n,a,s){switch(i){case iwe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case twe:return!(e.byteLength!=t.byteLength||!a(new ux(e),new ux(t)));case $be:case Zbe:case Kbe:return gP(+e,+t);case qbe:return e.name==t.name&&e.message==t.message;case Xbe:case Jbe:return e==t+"";case Ybe:var o=Ube;case Qbe:var l=r&Wbe;if(o||(o=jbe),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;r|=Gbe,s.set(e,t);var u=dW(o(e),o(t),r,n,a,s);return s.delete(e),u;case ewe:if(gC)return gC.call(e)==gC.call(t)}return!1}var nwe=rwe,awe=1,swe=Object.prototype,owe=swe.hasOwnProperty;function lwe(e,t,i,r,n,a){var s=i&awe,o=gA(e),l=o.length,c=gA(t),u=c.length;if(l!=u&&!s)return!1;for(var d=l;d--;){var h=o[d];if(!(s?h in t:owe.call(t,h)))return!1}var f=a.get(e),p=a.get(t);if(f&&p)return f==t&&p==e;var m=!0;a.set(e,t),a.set(t,e);for(var v=s;++d<l;){h=o[d];var y=e[h],x=t[h];if(r)var b=s?r(x,y,h,t,e,a):r(y,x,h,e,t,a);if(!(b===void 0?y===x||n(y,x,i,r,a):b)){m=!1;break}v||(v=h=="constructor")}if(m&&!v){var w=e.constructor,S=t.constructor;w!=S&&"constructor"in e&&"constructor"in t&&!(typeof w=="function"&&w instanceof w&&typeof S=="function"&&S instanceof S)&&(m=!1)}return a.delete(e),a.delete(t),m}var cwe=lwe,uwe=1,z6="[object Arguments]",V6="[object Array]",Pb="[object Object]",dwe=Object.prototype,U6=dwe.hasOwnProperty;function hwe(e,t,i,r,n,a){var s=yc(e),o=yc(t),l=s?V6:h1(e),c=o?V6:h1(t);l=l==z6?Pb:l,c=c==z6?Pb:c;var u=l==Pb,d=c==Pb,h=l==c;if(h&&cx(e)){if(!cx(t))return!1;s=!0,u=!1}if(h&&!u)return a||(a=new qw),s||Yj(e)?dW(e,t,i,r,n,a):nwe(e,t,l,i,r,n,a);if(!(i&uwe)){var f=u&&U6.call(e,"__wrapped__"),p=d&&U6.call(t,"__wrapped__");if(f||p){var m=f?e.value():e,v=p?t.value():t;return a||(a=new qw),n(m,v,i,r,a)}}return h?(a||(a=new qw),cwe(e,t,i,r,n,a)):!1}var fwe=hwe;function hW(e,t,i,r,n){return e===t?!0:e==null||t==null||!Du(e)&&!Du(t)?e!==e&&t!==t:fwe(e,t,i,r,hW,n)}var pwe=hW;function mwe(e,t){return e!=null&&t in Object(e)}var vwe=mwe;function gwe(e,t,i){t=qv(t,e);for(var r=-1,n=t.length,a=!1;++r<n;){var s=eS(t[r]);if(!(a=e!=null&&i(e,s)))break;e=e[s]}return a||++r!=n?a:(n=e==null?0:e.length,!!n&&bP(n)&&vP(s,n)&&(yc(e)||xP(e)))}var ywe=gwe;function bwe(e,t){return e!=null&&ywe(e,t,vwe)}var wwe=bwe,xwe=function(){return Pl.Date.now()},yC=xwe,_we="Expected a function",Swe=Math.max,Cwe=Math.min;function Ewe(e,t,i){var r,n,a,s,o,l,c=0,u=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(_we);t=m6(t)||0,El(i)&&(u=!!i.leading,d="maxWait"in i,a=d?Swe(m6(i.maxWait)||0,t):a,h="trailing"in i?!!i.trailing:h);function f(_){var E=r,C=n;return r=n=void 0,c=_,s=e.apply(C,E),s}function p(_){return c=_,o=setTimeout(y,t),u?f(_):s}function m(_){var E=_-l,C=_-c,A=t-E;return d?Cwe(A,a-C):A}function v(_){var E=_-l,C=_-c;return l===void 0||E>=t||E<0||d&&C>=a}function y(){var _=yC();if(v(_))return x(_);o=setTimeout(y,m(_))}function x(_){return o=void 0,h&&r?f(_):(r=n=void 0,s)}function b(){o!==void 0&&clearTimeout(o),c=0,r=l=n=o=void 0}function w(){return o===void 0?s:x(yC())}function S(){var _=yC(),E=v(_);if(r=arguments,n=this,l=_,E){if(o===void 0)return p(l);if(d)return clearTimeout(o),o=setTimeout(y,t),f(l)}return o===void 0&&(o=setTimeout(y,t)),s}return S.cancel=b,S.flush=w,S}var f1=Ewe;function Awe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Mwe=Awe;function Twe(e,t){return e>t}var Pwe=Twe;function Dwe(e,t){return t.length<2?e:Qj(e,m1e(t,0,-1))}var Iwe=Dwe;function Owe(e,t){return pwe(e,t)}var PP=Owe;function Rwe(e,t,i){for(var r=-1,n=e.length;++r<n;){var a=e[r],s=t(a);if(s!=null&&(o===void 0?s===s&&!oy(s):i(s,o)))var o=s,l=a}return l}var kwe=Rwe;function Lwe(e){return e&&e.length?kwe(e,Hj,Pwe):void 0}var Bwe=Lwe;function Nwe(e,t){return t=qv(t,e),e=Iwe(e,t),e==null||delete e[eS(Mwe(t))]}var Fwe=Nwe;function zwe(e){return f1e(e)?void 0:e}var Vwe=zwe,Uwe=1,Hwe=2,jwe=4,Wwe=eW(function(e,t){var i={};if(e==null)return i;var r=!1;t=Vj(t,function(a){return a=qv(a,e),r||(r=a.length>1),a}),ly(e,sW(e),i),r&&(i=uW(i,Uwe|Hwe|jwe,Vwe));for(var n=t.length;n--;)Fwe(i,t[n]);return i}),xA=Wwe;function Gwe(e,t,i,r){if(!El(e))return e;t=qv(t,e);for(var n=-1,a=t.length,s=a-1,o=e;o!=null&&++n<a;){var l=eS(t[n]),c=i;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(n!=s){var u=o[l];c=r?r(u,l,o):void 0,c===void 0&&(c=El(u)?u:vP(t[n+1])?[]:{})}yP(o,l,c),o=o[l]}return e}var $we=Gwe;function Zwe(e,t,i){for(var r=-1,n=t.length,a={};++r<n;){var s=t[r],o=Qj(e,s);i(o,s)&&$we(a,qv(s,e),o)}return a}var qwe=Zwe;function Ywe(e,t){return qwe(e,t,function(i,r){return wwe(e,r)})}var Kwe=Ywe,Xwe=eW(function(e,t){return e==null?{}:Kwe(e,t)}),fc=Xwe,Qwe="Expected a function";function Jwe(e,t,i){var r=!0,n=!0;if(typeof e!="function")throw new TypeError(Qwe);return El(i)&&(r="leading"in i?!!i.leading:r,n="trailing"in i?!!i.trailing:n),f1(e,t,{leading:r,maxWait:t,trailing:n})}var e2e=Jwe;function fW(e){for(let t of Object.keys(e))e[t]===void 0&&delete e[t];return e}function No(e,t){return Object.setPrototypeOf(e,t),e}var t2e=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),i2e=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),r2e=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(window.navigator.userAgent)||iS&&"ontouchend"in document,n2e=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,a2e=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,s2e=()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)},o2e=()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]},l2e=()=>{if(typeof window>"u")return;let e=new URLSearchParams(window.location.search).get("desktop-app-version");return e?(window.localStorage.setItem("desktop-app-version",e),e):window.localStorage.getItem("desktop-app-version")??"0.0.6"},pW=t2e();pW&&l2e();var iS=i2e(),cy=r2e(),c2e=n2e(),qs=a2e(),H6=s2e(),u2e=Number(o2e());function mW(e){return Array.isArray(e)?e:[e]}function vW(e,t){let i=0;for(;i<e.length&&i<t.length;){if(e[i]<t[i])return-1;if(e[i]>t[i])return 1;i+=1}return i!==t.length?-1:i!==e.length?1:0}function Db(e){return iS?e.metaKey:e.ctrlKey}function d2e(e){return e.wheelDeltaY===0||e.deltaY===0?iS&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120?!1:e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX||e.wheelDeltaX===-3*window.devicePixelRatio*e.deltaX:e.deltaMode===0:e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY||e.wheelDeltaY===-3*window.devicePixelRatio*e.deltaY:e.deltaMode===0}var ai=[],hx={},sg={},Kw={};function gW(e){ai.includes(e)||ai.push(e)}function Fm(e){delete hx[e.pointerId];for(let t=0;t<ai.length;t++)if(ai[t].pointerId===e.pointerId){ai.splice(t,1);break}}function h2e(){ai.splice(0,ai.length)}function fx(e){if(e.pointerType!=="touch")return;let t=hx[e.pointerId];t===void 0&&(t={x:0,y:0},hx[e.pointerId]=t),t.x=e.pageX,t.y=e.pageY}function bC(e){let t=e.pointerId===ai[0].pointerId?ai[1]:ai[0];return hx[t.pointerId]}function yW(e){sg[e.key]=!0,Kw[e.key]=Kw[e.key]===void 0?1:Kw[e.key]+1}function bW(e){if(iS&&sg.Meta)for(let t in sg)sg[t]=!1;else sg[e.key]=!1;Kw={}}function f2e(e){e.addEventListener("pointerdown",gW,!0),e.addEventListener("pointerdown",fx,!0),e.addEventListener("pointermove",fx,!0),e.addEventListener("pointerup",Fm,!0),e.addEventListener("pointercancel",Fm,!0),e.addEventListener("pointerleave",Fm,!0),window.addEventListener("keydown",yW,!0),window.addEventListener("keyup",bW,!0)}function p2e(e){e.removeEventListener("pointerdown",gW,!0),e.removeEventListener("pointerdown",fx,!0),e.removeEventListener("pointermove",fx,!0),e.removeEventListener("pointerup",Fm,!0),e.removeEventListener("pointercancel",Fm,!0),e.removeEventListener("pointerleave",Fm,!0),window.removeEventListener("keydown",yW,!0),window.removeEventListener("keyup",bW,!0)}var wW,m2e=new Promise(e=>{wW=e}),Ib;function v2e(){if(Ib)return Ib;async function e(){let t="https://unpkg.com/@splinetool/navmesh-wasm@1.9.45/build",i=Ks(()=>import("./BFd9Mv4x.js"),[],import.meta.url),[r,n]=await Promise.all([i,fetch(`${t}/navmesh.wasm`).then(o=>o.arrayBuffer())]),a=r.default,s=await a({wasmBinary:n});wW(s)}return Ib=e(),Ib}var xW,g2e=new Promise(e=>{xW=e}),Ob;function y2e(){if(Ob)return Ob;async function e(){let t=await Ks(()=>import("./BM4kW-A5.js"),[],import.meta.url);await t.init(),xW(t)}return Ob=e(),Ob}var ti=class{modifyById(t,i){let r=this;if(r[t]===void 0)throw new Error("not expected");{let n={...r,[t]:i};return Object.setPrototypeOf(n,ti.prototype),n}}add(t,i){var r;return((r=this.runOp({type:1,id:t,data:i}))==null?void 0:r.data)??this}runOp(t){let i=this;if(t.type===1){let r=i[t.id],n;r===void 0?n={type:2,id:t.id}:n={type:1,id:t.id,data:r};let{id:a,data:s}=t,o={...i,[a]:s};return Object.setPrototypeOf(o,ti.prototype),{data:o,actual:t,reverse:n}}else if(t.type===2){let{id:r}=t,n=i[r];if(n===void 0)return null;{let a={...i};return Object.setPrototypeOf(a,ti.prototype),delete a[r],{data:a,actual:t,reverse:{type:1,id:r,data:n}}}}return null}};function DP(e){if(e.deepFreeze!==void 0){e.deepFreeze(e);return}let t=Object.getOwnPropertyNames(e);for(let i of t){let r=e[i];r&&typeof r=="object"&&DP(r)}return Object.freeze(e)}function b2e(e,t){let i=0;for(;i<e.length&&i<t.length;){if(e[i]<t[i])return-1;if(e[i]>t[i])return 1;i+=1}return i!==t.length?-1:i!==e.length?1:0}var _W=class extends Error{};function wC(e){let t={...e};return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}function kd(e,t,i){if(e===void 0?t===void 0?(e=0,t=10):e=t-10:t===void 0&&(t=e+10),e>t){let a=e;e=t,t=a}let r=[],n=1/(i+1);for(let a=0;a<i;a++){let s=e+(t-e)*(a+.75+Math.random()*.5)*n;r.push(s)}return r}function IP(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function w2e(){return typeof process<"u"}function SW(e,t){for(let i of e)t(i.id,i.data)!==!0&&SW(i.children,t)}function CW(e,t){if(t(e.id,e.data)!==!0)for(let i of e.children)CW(i,t)}var xa=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,xa.prototype)}deepFreeze(){let e=0;for(;e<this.length;)DP(this[e]),e++}fillCaches0(e,t){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let i of e.children)this.fillCaches0(i,e.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}nonExistOrDescendantOf(e,t){if(!this.has(e))return!0;for(;e;){let i=this.parent(e);if(i===t)return!0;e=i}return!1}rootAcestor(e){for(;e;){let t=this.parent(e);if(t)e=t;else return e}return e}isDescendantOf(e,t){for(;e;){let i=this.parent(e);if(i===t)return!0;e=i}return!1}data(e){var t;return(t=this.get(e))==null?void 0:t.data}has(e){return this.childrenOf(e)!==void 0}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){var t;return e===null?this:(t=this.get(e))==null?void 0:t.children}traverseFrom(e,t){if(e===null)this.traverse(t);else{let i=this.get(e);i&&CW(i,t)}}traverse(e){SW(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return e===null?this:this.get(e).children}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let i=this.parent(e),r=this.childrenArray(i),n=r.findIndex(s=>s.id===e);if(n<0)throw new Error("not expected");let a=r[n];return r=[...r],r[n]={...a,data:t},this.modifyArrayBy(i,r)}}modifyArrayBy(e,t){let i=e,r=t;for(;i!==null;){let a=r,s=i;if(i=this.parent(i),i===void 0)throw new Error;r=this.childrenArray(i);let o=r.findIndex(l=>l.id===s);if(o<0)throw new Error;r=[...r],r[o]={...r[o],children:a}}Object.setPrototypeOf(r,xa.prototype);let n=r;return n.fillCaches(),n}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}return null}checkDuplicatedIdRec({id:e,children:t}){if(this.get(e)!==void 0)return!0;for(let i of t)if(this.checkDuplicatedIdRec(i))return!0;return!1}addOp(e){let{parent:t,fi:i,id:r,data:n,children:a}=e;if(t!==null&&this.get(t)===void 0||this.checkDuplicatedIdRec(e))return null;{let s=t,o=this.childrenArray(s),l={fi:i,id:r,data:n,children:a};return o=[...o,l],o.sort((c,u)=>c.fi-u.fi),e.localIndex=o.indexOf(l),{data:this.modifyArrayBy(s,o),actual:e,reverse:{type:8,id:r}}}}deleteOp(e){let{id:t}=e;if(this.get(t)===null)return null;{let i=this.parent(t);if(i===void 0)return null;let r=this.childrenArray(i),n=r.findIndex(s=>s.id===t);e.localIndex=n,r=[...r];let a=r.splice(n,1)[0];return{data:this.modifyArrayBy(i,r),actual:e,reverse:{type:7,...a,parent:i}}}}moveOp(e){let{parent:t,fi:i,id:r}=e;if(t!==null&&this.get(t)===void 0)return this.deleteOp({type:8,id:r});if(t!==null){let d=t;for(;d!==null;){if(d===void 0)throw new Error;if(d===r)throw new _W("cyclic tree");d=this.parent(d)}}let n=this.parent(r);if(n===void 0)return null;let a=n,s=this.childrenArray(n),o=s.findIndex(d=>d.id===r);s=[...s];let l=s.splice(o,1)[0],c=this.modifyArrayBy(n,s);n=t,s=c.childrenArray(n);let u=l.fi;return l={...l,fi:i},s=[...s,l],s.sort((d,h)=>d.fi-h.fi),e.localIndex=s.indexOf(l),c=c.modifyArrayBy(n,s),{data:c,actual:e,reverse:{type:9,parent:a,fi:u,id:r}}}previous(e,t){if(t===null){let r=this.childrenArray(e);return r.length===0?null:r[r.length-1].id}let i=null;for(let r of this.childrenArray(e)){if(r.id===t)return i;i=r.id}return null}traverseSortNext(e){let t=this.parent(e);if(t!==void 0){let i=this.childrenArray(t),r=i.findIndex(n=>n.id===e)+1;if(r<i.length)return i[r].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(t!==void 0){let i=this.childrenArray(t),r=i.findIndex(n=>n.id===e)-1;return r>=0?this.traverseSortPrevious(i[r].id):t}}getAllSorted(e){let t=[];for(let i of e){let r=this.getWithSortKey(i.id);r!==void 0&&t.push({...i,...r})}t.sort((i,r)=>b2e(i.sortKey,r.sortKey));for(let i of t)delete i.sortKey;return t}getWithSortKey(e){var t=e;let i=[],r=this.get(t),n=r;if(r!==void 0){for(;t;)i.splice(0,0,r.fi),t=this.parent(t),t!==null&&(r=this.get(t));return{...n,sortKey:i}}}insertBeforeHelper(e,t,i){return this.insertAfterHelper(e,this.previous(e,t),i)}insertAfterHelper(e,t,i){let r=this.childrenArray(e);if(t===null){if(r.length===0)return kd(0,i,i);{let n=r[0].fi;return kd(n-i,n,i)}}else{let n=this.get(t);if(n===void 0||this.parent(t)!==e)throw new Error("illegal args");let a=r.find(s=>s.fi>n.fi);if(a===void 0){let s=r[r.length-1].fi;return kd(s,s+i,i)}else return kd(n.fi,a.fi,i)}}},px;(e=>{function t(i,r){if(r.type!==0)return null;if(Array.isArray(i)){let n=r.props,a={},s=[...i],o=!1;if(n)for(let l of Object.keys(n)){let c=parseInt(l);if(isNaN(c))throw new Error("wrong index");a[l]=s[c],s[c]=n[l],o=!0}return o?{data:s,actual:r,reverse:{type:0,props:a}}:null}else{let n=r.props,a={},s={...i},o=!1;if(n)for(let l of Object.keys(n)){a[l]=s[l];let c=n[l];c===void 0?delete s[l]:s[l]=c,o=!0}return o?{data:s,actual:r,reverse:{type:0,props:a}}:null}}e.runOp=t})(px||(px={}));var Zt=class extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Zt.prototype)}deepFreeze(){let t=0;for(;t<this.length;)DP(this[t]),t++}fillCaches0(t){this.objCaches.set(t.id,t)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let t of this)this.fillCaches0(t)}}randomId(){this.fillCaches();let t=Array.from(this.objCaches.keys());if(t.length!==0)return t[Math.max(0,Math.floor(Math.random()*t.length)-1)]}data(t){var i;return(i=this.get(t))==null?void 0:i.data}get(t){return this.fillCaches(),this.objCaches.get(t)}modifyById(t,i){if(this.get(t)===void 0)throw new Error("not expected");{let r=this,n=r.findIndex(s=>s.id===t);if(n<0)throw new Error("not expected");let a=r[n];return r=[...r],r[n]={...a,data:i},this.modifyArrayBy(r)}}modifyArrayBy(t){Object.setPrototypeOf(t,Zt.prototype);let i=t;return w2e()||i.fillCaches(),i}runOp(t){switch(t.type){case 4:return this.addOp(t);case 5:return this.deleteOp(t);case 6:return this.moveOp(t)}return null}addOp(t){let{fi:i,id:r,data:n}=t,a=this,s={fi:i,id:r,data:n};return a=[...a,s],a.sort((o,l)=>o.fi-l.fi),t.localIndex=a.indexOf(s),{data:this.modifyArrayBy(a),actual:t,reverse:{type:5,id:r}}}deleteOp(t){let{id:i}=t,r=this,n=r.findIndex(s=>s.id===i);if(n===-1)return null;t.localIndex=n,r=[...r];let a=r.splice(n,1)[0];return{data:this.modifyArrayBy(r),actual:t,reverse:{type:4,...a}}}moveOp(t){let{fi:i,id:r}=t,n=this;n=[...n];let a=n.findIndex(l=>l.id===r);if(a===-1)return null;let s=n[a].fi,o={...n[a],fi:i};return n[a]=o,n.sort((l,c)=>l.fi-c.fi),t.localIndex=n.indexOf(o),{data:this.modifyArrayBy(n),actual:t,reverse:{type:6,fi:s,id:r}}}previous(t){if(t===null)return this.length===0?null:this[this.length-1].id;let i=null;for(let r of this){if(r.id===t)return i;i=r.id}return null}insertBeforeHelper(t,i){return this.insertAfterHelper(this.previous(t),i)}insertAfterHelper(t,i){let r=this;if(t===null){if(r.length===0)return kd(0,i,i);{let n=r[0].fi;return kd(n-i,n,i)}}else{let n=this.get(t);if(n===void 0)throw new Error("illegal args");let a=r.find(s=>s.fi>n.fi);if(a===void 0){let s=r[r.length-1].fi;return kd(s,s+i,i)}else return kd(n.fi,a.fi,i)}}};function hv(e){return e&&typeof e=="object"&&e instanceof Tn}var Tn=class{unusedFunOverridesTable(e){}runOp(e){let t=[],i=this,r=0,n={};for(;r<e.path.length;){if(t.push(i),i=i===void 0?void 0:i[e.path[r]],i!==void 0&&!hv(i))return null;r+=1}i=i?wC(i):new Tn;for(let[o,l]of Object.entries(e.props)){let c=i[o];n[o]=c,l===void 0?delete i[o]:i[o]=l}for(;r>0;){if(Object.keys(i).length===0){let o=t[r-1];o&&(i=wC(o),delete i[e.path[r-1]])}else{let o=t[r-1];if(o){let l=wC(o);l[e.path[r-1]]=i,i=l}else{let l=new Tn;l[e.path[r-1]]=i,i=l}}r-=1}let a=Object.setPrototypeOf(i,Tn.prototype),s={...e,props:n};return{data:a,actual:e,reverse:s}}},qd;(e=>{function t(n,a){return p1(n,a)??n}e.apply=t;function i(n,a){return RP(n,a)}e.merge=i;function r(n,a){let s=0,o=a.path,l=n;for(;s<o.length&&l!==void 0;){if(l=Un.zoomOnce(l,o[s]),l===void 0)return a;if(!hv(l))return;s+=1}if(l===void 0)return a;if(hv(l))if(a.type===0){let c={...a.props};for(let u of Object.keys(l))delete c[u];return{...a,props:c}}else if(a.type===1||a.type===4||a.type===7){let c=OP([a],l);return c?(console.log(c),c):a}else return a}e.filterOp=r})(qd||(qd={}));function OP(e,t){if(t===void 0)return;let i=!1,r=e.map(n=>{let a=n.id,s=p1(n.data,t[a]);if(i=i||s!==void 0,s===void 0&&(s=n.data),n.children){let o=OP(n.children,t);return o!==void 0?i=!0:o=n.children,{...n,id:a,data:s,children:o}}else return{...n,id:a,data:s}});if(i)return r}function x2e(e,t){if(t===void 0)return;let i=!1,r=e.map(n=>{let a=n.id,s=p1(n.data,t[a]);return i=i||s!==void 0,s===void 0&&(s=n.data),{...n,id:a,data:s}});if(i)return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}function p1(e,t){if(!hv(t))return t;if(e instanceof xa){let i=OP(e,t);return i!==void 0&&Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}else{if(e instanceof Zt)return x2e(e,t);if(Array.isArray(e)){let i=!1,r=e.map((n,a)=>{let s=p1(n,t[a]);return i=i||s!==void 0,s===void 0&&(s=n),s});return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}else{if(e instanceof Tn)return RP(e,t);if(e&&typeof e=="object"){let i={},r=!1;for(let[n,a]of Object.entries(e)){let s=p1(a,t[n]);r=r||s!==void 0,s===void 0&&(s=a),i[n]=s}return r?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}}}}function RP(e,t){if(e===void 0)return t;if(t===void 0)return e;if(!hv(t))return t;if(!hv(e))return qd.apply(e,t);let i=new Set;for(let n of Object.keys(e))i.add(n);for(let n of Object.keys(t))i.add(n);let r=new Tn;for(let n of i){let a=RP(e===void 0?void 0:e[n],t===void 0?void 0:t[n]);r[n]=a}return r}function _2e(e,t){let i={cur:[],result:[],len:0};return e=m1(e,t,i)??e,[e,i.result]}function mx(e,t){return e===null?null:(e.cur[e.len]=t,e.len+=1,e)}function vx(e){e&&(e.len-=1)}function S2e(e){if(e===null)return null;e.result.push(e.cur.slice(0,e.len))}function EW(e,t,i){let r=!1,n=e.map(a=>{let s=a.id,o=t[s];if(o!==void 0&&typeof o=="string"&&(r=!0,s=o,i!==null))throw new Error("not supported");let l=m1(a.data,t,mx(i,s));vx(i),r=r||l!==void 0,l===void 0&&(l=a.data);let c=EW(a.children,t,i);return c!==void 0?r=!0:c=a.children,{...a,id:s,data:l,children:c}});if(r)return n}function C2e(e,t,i){let r=!1,n=e.map(a=>{let s=a.id,o=t[s];if(o!==void 0&&typeof o=="string"&&(r=!0,s=o,i!==null))throw new Error("not supported");let l=m1(a.data,t,mx(i,s));return vx(i),r=r||l!==void 0,l===void 0&&(l=a.data),{...a,id:s,data:l}});if(r)return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}function m1(e,t,i){if(e instanceof xa){let r=EW(e,t,i);return r!==void 0&&Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}else{if(e instanceof Zt)return C2e(e,t,i);if(Array.isArray(e)){let r=!1,n=e.map((a,s)=>{let o=m1(a,t,mx(i,s));return vx(i),r=r||o!==void 0,o===void 0&&(o=a),o});return r?(Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n):void 0}else if(e&&typeof e=="object"&&!IP(e)){let r={},n=!1;for(let[a,s]of Object.entries(e))if(a!=="name"&&a!=="variableId"){let o=t[a];if(typeof o=="string"){if(i!==null)throw new Error("not supported");n=!0,a=o}let l=m1(s,t,mx(i,a));vx(i),n=n||l!==void 0,l===void 0&&(l=s),r[a]=l}else r[a]=s;return n?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}else if(typeof e=="string"){let r=t[e];return r!==void 0&&S2e(i),r}else return}}var gx;(e=>{function t(i,r){let n=Un.zoom(r,i.path);if(typeof n=="object"){let a={};for(let s of Object.keys(i.props))a[s]=n[s];return{...i,props:a}}else return{...i,props:{}}}e.replaceProps=t})(gx||(gx={}));var na;(e=>{function t(l,c){return{...l,path:l.path.slice(c)}}e.drop=t;function i(l,c){var u;return((u=r(l,c))==null?void 0:u.data)??l}e.applySimple=i;function r(l,c){var h,f;let u=c.path;for(var d=[];;){let p;if(l instanceof Tn&&c.type===0&&(p=l.runOp({...c,path:u.slice(d.length)}),p===null&&(p=void 0)),p===void 0&&d.length===u.length&&(l instanceof xa||l instanceof Zt||l instanceof ti?p=l.runOp(c):p=px.runOp(l,c)),p!==void 0)if(p!==null){let y=p.data;for(let x=d.length-1;x>=0;x--){let b=u[x],w=d[x];if(w instanceof xa){if(typeof b=="number")throw new Error("illegal arg");y=w.modifyById(b,y)}else if(w instanceof Zt){if(typeof b=="number")throw new Error("illegal arg");y=w.modifyById(b,y)}else if(w instanceof ti){if(typeof b=="number")throw new Error("illegal arg");y=w.modifyById(b,y)}else if(w instanceof Tn){let S={...w,[b]:y};y=Object.setPrototypeOf(S,Tn.prototype)}else if(typeof w=="object")if(Array.isArray(w)){if(typeof b=="string"&&(b=parseInt(b),isNaN(b)))throw new Error("Invalid path");let S=y;y=[...w],y[b]=S}else y={...w,[b]:y};else return null}return{data:y,actual:{...p.actual,path:u},reverse:{...p.reverse,path:u}}}else return null;let m=u[d.length],v;if(l instanceof xa){if(typeof m=="number")throw new Error("");v=(h=l.get(m))==null?void 0:h.data}else if(l instanceof Zt){if(typeof m=="number")throw new Error("");v=(f=l.get(m))==null?void 0:f.data}else l!==null&&(v=l[m]);if(v!==void 0)d.push(l),l=v;else return null}}e.apply=r;function n(l,c){for(let u=0;u<l.length&&u<c.length;u++)if(l[u]!==c[u])return!0;return!1}e.pathDisjoint=n;function a(l,c){if(l.length!==c.length)return!1;for(let u=0;u<l.length;u++)if(l[u]!==c[u])return!1;return!0}e.pathEq=a;function s(l,c){return n(l.path,c.path)}e.commutative=s;function o(l,c){return l.type===0&&c.type===0&&a(l.path,c.path)?Object.keys(l.props).every(u=>c.props[u]!==void 0):!1}e.subsumed=o})(na||(na={}));var _A;(e=>{function t(){return[]}e.empty=t;function i(c,u){let d=[];for(let h of c){let[f,...p]=h.path;f===u&&d.push({...h,path:p})}return d}e.removePrefix=i;function r(c,u){return c.map(d=>({...d,path:[u,...d.path]}))}e.addPrefix=r;function n(c,u){return[...c,...u]}e.concat=n;function a(c,u){return[...c.filter(d=>!u.some(h=>na.subsumed(d,h))),...u]}e.compress=a;function s(c,u){return c.every(d=>u.every(h=>na.commutative(d,h)))}e.commutative=s;function o(c,u){for(let d of u){let h=l(c,d);h!==null&&(c=h.data)}return c}e.applyAll=o;function l(c,u){var d=c;let h=[],f=[];for(let p of u)try{if(p.type===3||p.type===5&&p.path[p.path.length-1]==="variables"){let m,v,y;if(p.type===3?(m=Un.zoom(d,[...p.path,p.id]),y=na.apply(d,{...p,type:2})):(m=Un.zoom(d,[...p.path,p.id,"value"]),y=na.apply(d,p)),y!==null){d=y.data;let[x,b]=_2e(d,{[p.id]:m});d=x;for(let w=0;w<b.length;w++){let S=b[w],_=S.pop();if(typeof _=="number"){let E=[_];for(let A=w+1;A<b.length;A++){let M=b[A],T=M[M.length-1];if(typeof T=="number"&&Un.equal(S,M.slice(0,M.length-1)))E.push(T),b.splice(A,1);else break}let C=Un.zoom(d,S);v=C.map((A,M)=>E.includes(M)?p.id:A),m=C,_=S.pop()}else{if(_==="alphaOverride"||_==="alpha"){m/=100;let E=m,C=Un.zoom(d,S.slice(0,S.length-2)),A=C.layers.map(M=>M.id===S[S.length-1]?{...M,data:{...M.data,[_]:E}}:M);Object.setPrototypeOf(A,Object.getPrototypeOf(C.layers)),C.layers=A}v=p.id}h.push({type:0,path:S,props:{[_]:m}}),f.push({type:0,path:S,props:{[_]:v}})}f.push(y.reverse),h.push(y.actual)}}else{let m=na.apply(d,p);m!==null&&(h.push(m.actual),d=m.data,f.push(m.reverse))}}catch(m){if(m instanceof _W)return null;throw m}return{data:d,actual:h,reverse:f.reverse()}}e.apply=l})(_A||(_A={}));var AW=Symbol(),E2e=Symbol(),rS=Symbol(),uy=class{reportOp(e,t,i=[]){let r=this;if(t===null)return;r._current=t.data;let n=i;for(;!(r instanceof TW);){let a=r._path,s=r._current;if(a!==""&&n.splice(0,0,a),r=r._parent,r===null)return;r.update(a,s)}r.push(n,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let i=t[rS];i&&i(),delete this._children[e]}}}},A2e=class extends uy{constructor(e,t,i){super(),this._parent=e,this._path=t,this._current=i}update(e,t){if(Array.isArray(this._current)){if(typeof e=="string"&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current={...this._current,[e]:t}}runOp(e){this.reportOp(e,px.runOp(this._current,e),e.path)}},M2e=class extends uy{constructor(e,t,i){super(),this._parent=e,this._path=t,this._current=i}update(e,t){this._current={...this._current,[e]:t},Object.setPrototypeOf(this._current,ti.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},MW={get(e,t){if(t===rS)return()=>{e._parent=null};if(t===AW)return e._current;if(t===E2e)return e;let{_current:i,_children:r}=e;if(t==="push"&&Array.isArray(i))throw new Error("not supported to expand array");let n=r===void 0?void 0:r[t];if(n!==void 0)return n;let a=i[t],s=nS(e,t,a);return s!==a?(r===void 0&&(r={},e._children=r),r[t]=s,s):a},has(e,t){return t in e._current},ownKeys(e){return Reflect.ownKeys(e._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(e){return Object.getPrototypeOf(e._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let i=e._current,r=Reflect.getOwnPropertyDescriptor(i,t);return r&&{writable:!0,configurable:!0,enumerable:r.enumerable,value:i[t]}}},T2e={...MW,set(e,t,i){let r={type:0,props:{[t]:hn(i)??i}};return e.deleteChildren(t),e.runOp(r),!0},deleteProperty(e,t){let i={type:0,props:{[t]:void 0}};return e.deleteChildren(t),e.runOp(i),!0}},P2e={...MW,set(e,t,i){return i===void 0?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:1,id:t,data:i})),!0},deleteProperty(e,t){return e.runOp({type:2,id:t}),!0}},kP=class extends uy{constructor(e,t,i){super(),this._children={},this._parent=e,this._path=t,this._current=i,this[rS]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((t,i)=>{e(t,this.data(t))})}data(e){var s;let{_current:t,_children:i}=this,r=i===void 0?void 0:i[e];if(r!==void 0)return r;let n=(s=t.get(e))==null?void 0:s.data,a=nS(this,e,n);return a!==n?(i===void 0&&(i={},this._children=i),i[e]=a,a):n}add(e,t,i,r,n){this.runOp({type:7,parent:e,fi:t,id:i,data:r,children:n})}move(e,t,i){this.runOp({type:9,parent:e,fi:t,id:i})}insertAfter(e,t,i){let r=this._current.insertAfterHelper(e,t,i.length);for(let n=0;n<i.length;n++){let a=i[n];this.add(e,r[n],a.id,a.data,a.children)}}insertBefore(e,t,i){let r=this._current.insertBeforeHelper(e,t,i.length);for(let n=0;n<i.length;n++){let a=i[n];this.add(e,r[n],a.id,a.data,a.children)}}moveAfter(e,t,i){let r=this._current.insertAfterHelper(e,t,i.length);for(let n=0;n<i.length;n++){let a=i[n];this.move(e,r[n],a)}}moveBefore(e,t,i){let r=this._current.insertBeforeHelper(e,t,i.length);for(let n=0;n<i.length;n++){let a=i[n];this.move(e,r[n],a)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},LP=class extends uy{constructor(e,t,i){super(),this._children={},this._parent=e,this._path=t,this._current=i,this[rS]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let i=0;i<t;i++){let r=this._current[i].id,n=this._current[i].fi;e(this.data(this._current[i].id),r,n)}}find(e){let t=this.length;for(let i=0;i<t;i++){let r=this._current[i].id;if(e(this.data(r),r))return this.get(r)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){var s;let{_current:t,_children:i}=this,r=i===void 0?void 0:i[e];if(r!==void 0)return r;let n=(s=t.get(e))==null?void 0:s.data,a=nS(this,e,n);return a!==n?(i===void 0&&(i={},this._children=i),i[e]=a,a):n}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,i){this.runOp({type:4,fi:e,id:t,data:i})}move(e,t){this.runOp({type:6,fi:e,id:t})}insertAfter(e,t){let i=this._current.insertAfterHelper(e,t.length);for(let r=0;r<t.length;r++){let n=t[r];this.add(i[r],n.id,n.data)}}insertBefore(e,t){let i=this._current.insertBeforeHelper(e,t.length);for(let r=0;r<t.length;r++){let n=t[r];this.add(i[r],n.id,n.data)}}moveAfter(e,t){let i=this._current.insertAfterHelper(e,t.length);for(let r=0;r<t.length;r++){let n=t[r];this.move(i[r],n)}}moveBefore(e,t){let i=this._current.insertBeforeHelper(e,t.length);for(let r=0;r<t.length;r++){let n=t[r];this.move(i[r],n)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function xC(e,t,i){if(e.length>0){let r=e[e.length-1];if(r.type===0&&t.type===0&&Un.equal(r.path,i)){Object.assign(r.props,t.props);return}}e.push({...t,path:i})}var TW=class extends uy{constructor(e){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(e!=="")throw new Error("");this._current=t}push(e,t,i,r){xC(this.ts,t,e),xC(this.actual,i,e),xC(this.reverse,r,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function nS(e,t,i){return i instanceof xa?new kP(e,t,i):i instanceof Zt?new LP(e,t,i):i instanceof ti?new Proxy(new M2e(e,t,i),P2e):i!==null&&typeof i=="object"?IP(i)?i:new Proxy(new A2e(e,t,i),T2e):i}function PW(e){let t=new TW(e);return[nS(t,"",e),t]}function v1(e,t){let[i,r]=PW(e);return t(i),r.result()}function hn(e){return e instanceof kP||e instanceof LP?e._current:e!==null&&typeof e=="object"?e[AW]:e}var Un;(e=>{function t(a,s){if(s.length===a.length)for(var o=0;o<a.length;){if(a[o]!==s[o])return!1;o+=1}else return!1;return!0}e.equal=t;function i(a,s,o){let l=n(o,a);if(l!==void 0&&typeof l=="object"&&l!==null){let c={...s};return Object.keys(l).forEach(u=>{delete c[u]}),c}else return s}e.removeOverridden=i;function r(a,s){if((a instanceof xa||a instanceof kP)&&typeof s=="string"||(a instanceof Zt||a instanceof LP)&&typeof s=="string")return a.data(s);if(typeof s=="number"&&Array.isArray(a)||typeof s=="string"&&typeof a=="object"&&a!==null)return a[s]}e.zoomOnce=r;function n(a,s,o=0){for(;o<s.length&&a!==void 0;)a=r(a,s[o]),o+=1;return a}e.zoom=n})(Un||(Un={}));function D2e(e,t){let i=[];if(t.length===e.length)for(var r=0;r<e.length;){if(t[r]==="*")i.push(e[r]);else if(e[r]!==t[r])return null;r+=1}else return null;return i}function Cr(e,t){let i=[];if(t.length<=e.length)for(var r=0;r<t.length;){if(t[r]==="*")i.push(e[r]);else if(e[r]!==t[r])return null;r+=1}else return null;return i}var DW=class{},j6=class extends DW{constructor(e){super(),this.id=e}},W6=class extends DW{constructor(e){super(),this.data=e}},SA;try{SA=new TextDecoder}catch{}var Ft,Yd,Ge=0,Ts={},tr,Ld,vo=0,nc=0,Gs,Su,ps=[],cr,G6={useRecords:!1,mapsAsObjects:!0},IW=class{},OW=new IW;OW.name="MessagePack 0xC1";var fv=!1,yx=class{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(Ft)return FW(()=>(EA(),this?this.unpack(e,t):yx.prototype.unpack.call(G6,e,t)));Yd=t>-1?t:e.length,Ge=0,nc=0,Ld=null,Gs=null,Ft=e;try{cr=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(i){throw Ft=null,e instanceof Uint8Array?i:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof yx){if(Ts=this,this.structures)return tr=this.structures,Rb();(!tr||tr.length>0)&&(tr=[])}else Ts=G6,(!tr||tr.length>0)&&(tr=[]);return Rb()}unpackMultiple(e,t){let i,r=0;try{fv=!0;let n=e.length,a=this?this.unpack(e,n):sS.unpack(e,n);if(t){for(t(a);Ge<n;)if(r=Ge,t(Rb())===!1)return}else{for(i=[a];Ge<n;)r=Ge,i.push(Rb());return i}}catch(n){throw n.lastPosition=r,n.values=i,n}finally{fv=!1,EA()}}_mergeStructures(e,t){e=e||[];for(let i=0,r=e.length;i<r;i++){let n=e[i];n&&(n.isShared=!0,i>=32&&(n.highByte=i-32>>5))}e.sharedLength=e.length;for(let i in t||[])if(i>=0){let r=e[i],n=t[i];n&&(r&&((e.restoreStructures||(e.restoreStructures=[]))[i]=r),e[i]=n)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function Rb(){try{if(!Ts.trusted&&!fv){let t=tr.sharedLength||0;t<tr.length&&(tr.length=t)}let e=rn();if(Ge==Yd)tr.restoreStructures&&$6(),tr=null,Ft=null,Su&&(Su=null);else if(Ge>Yd){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}else if(!fv)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw tr.restoreStructures&&$6(),EA(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function $6(){for(let e in tr.restoreStructures)tr[e]=tr.restoreStructures[e];tr.restoreStructures=null}function rn(){let e=Ft[Ge++];if(e<160)if(e<128){if(e<64)return e;{let t=tr[e&63]||Ts.getStructures&&RW()[e&63];return t?(t.read||(t.read=BP(t,e&63)),t.read()):e}}else if(e<144)if(e-=128,Ts.mapsAsObjects){let t={};for(let i=0;i<e;i++)t[LW()]=rn();return t}else{let t=new Map;for(let i=0;i<e;i++)t.set(rn(),rn());return t}else{e-=144;let t=new Array(e);for(let i=0;i<e;i++)t[i]=rn();return t}else if(e<192){let t=e-160;if(nc>=Ge)return Ld.slice(Ge-vo,(Ge+=t)-vo);if(nc==0&&Yd<140){let i=t<16?NP(t):kW(t);if(i!=null)return i}return CA(t)}else{let t;switch(e){case 192:return null;case 193:return Gs?(t=rn(),t>0?Gs[1].slice(Gs.position1,Gs.position1+=t):Gs[0].slice(Gs.position0,Gs.position0-=t)):OW;case 194:return!1;case 195:return!0;case 196:return _C(Ft[Ge++]);case 197:return t=cr.getUint16(Ge),Ge+=2,_C(t);case 198:return t=cr.getUint32(Ge),Ge+=4,_C(t);case 199:return Hh(Ft[Ge++]);case 200:return t=cr.getUint16(Ge),Ge+=2,Hh(t);case 201:return t=cr.getUint32(Ge),Ge+=4,Hh(t);case 202:if(t=cr.getFloat32(Ge),Ts.useFloat32>2){let i=FP[(Ft[Ge]&127)<<1|Ft[Ge+1]>>7];return Ge+=4,(i*t+(t>0?.5:-.5)>>0)/i}return Ge+=4,t;case 203:return t=cr.getFloat64(Ge),Ge+=8,t;case 204:return Ft[Ge++];case 205:return t=cr.getUint16(Ge),Ge+=2,t;case 206:return t=cr.getUint32(Ge),Ge+=4,t;case 207:return Ts.int64AsNumber?(t=cr.getUint32(Ge)*4294967296,t+=cr.getUint32(Ge+4)):t=cr.getBigUint64(Ge),Ge+=8,t;case 208:return cr.getInt8(Ge++);case 209:return t=cr.getInt16(Ge),Ge+=2,t;case 210:return t=cr.getInt32(Ge),Ge+=4,t;case 211:return Ts.int64AsNumber?(t=cr.getInt32(Ge)*4294967296,t+=cr.getUint32(Ge+4)):t=cr.getBigInt64(Ge),Ge+=8,t;case 212:if(t=Ft[Ge++],t==114)return X6(Ft[Ge++]&63);{let i=ps[t];if(i)return i.read?(Ge++,i.read(rn())):i.noBuffer?(Ge++,i()):i(Ft.subarray(Ge,++Ge));throw new Error("Unknown extension "+t)}case 213:return t=Ft[Ge],t==114?(Ge++,X6(Ft[Ge++]&63,Ft[Ge++])):Hh(2);case 214:return Hh(4);case 215:return Hh(8);case 216:return Hh(16);case 217:return t=Ft[Ge++],nc>=Ge?Ld.slice(Ge-vo,(Ge+=t)-vo):O2e(t);case 218:return t=cr.getUint16(Ge),Ge+=2,nc>=Ge?Ld.slice(Ge-vo,(Ge+=t)-vo):R2e(t);case 219:return t=cr.getUint32(Ge),Ge+=4,nc>=Ge?Ld.slice(Ge-vo,(Ge+=t)-vo):k2e(t);case 220:return t=cr.getUint16(Ge),Ge+=2,q6(t);case 221:return t=cr.getUint32(Ge),Ge+=4,q6(t);case 222:return t=cr.getUint16(Ge),Ge+=2,Y6(t);case 223:return t=cr.getUint32(Ge),Ge+=4,Y6(t);default:if(e>=224)return e-256;if(e===void 0){let i=new Error("Unexpected end of MessagePack data");throw i.incomplete=!0,i}throw new Error("Unknown MessagePack token "+e)}}}var I2e=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function BP(e,t){function i(){if(i.count++>2){let n=e.read=new Function("r","return function(){return {"+e.map(a=>I2e.test(a)?a+":r()":"["+JSON.stringify(a)+"]:r()").join(",")+"}}")(rn);return e.highByte===0&&(e.read=Z6(t,e.read)),n()}let r={};for(let n=0,a=e.length;n<a;n++){let s=e[n];r[s]=rn()}return r}return i.count=0,e.highByte===0?Z6(t,i):i}var Z6=(e,t)=>function(){let i=Ft[Ge++];if(i===0)return t();let r=e<32?-(e+(i<<5)):e+(i<<5),n=tr[r]||RW()[r];if(!n)throw new Error("Record id is not defined for "+r);return n.read||(n.read=BP(n,e)),n.read()};function RW(){let e=FW(()=>(Ft=null,Ts.getStructures()));return tr=Ts._mergeStructures(e,tr)}var CA=aS,O2e=aS,R2e=aS,k2e=aS;function aS(e){let t;if(e<16&&(t=NP(e)))return t;if(e>64&&SA)return SA.decode(Ft.subarray(Ge,Ge+=e));let i=Ge+e,r=[];for(t="";Ge<i;){let n=Ft[Ge++];if(!(n&128))r.push(n);else if((n&224)===192){let a=Ft[Ge++]&63;r.push((n&31)<<6|a)}else if((n&240)===224){let a=Ft[Ge++]&63,s=Ft[Ge++]&63;r.push((n&31)<<12|a<<6|s)}else if((n&248)===240){let a=Ft[Ge++]&63,s=Ft[Ge++]&63,o=Ft[Ge++]&63,l=(n&7)<<18|a<<12|s<<6|o;l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|l&1023),r.push(l)}else r.push(n);r.length>=4096&&(t+=Jn.apply(String,r),r.length=0)}return r.length>0&&(t+=Jn.apply(String,r)),t}function q6(e){let t=new Array(e);for(let i=0;i<e;i++)t[i]=rn();return t}function Y6(e){if(Ts.mapsAsObjects){let t={};for(let i=0;i<e;i++)t[LW()]=rn();return t}else{let t=new Map;for(let i=0;i<e;i++)t.set(rn(),rn());return t}}var Jn=String.fromCharCode;function kW(e){let t=Ge,i=new Array(e);for(let r=0;r<e;r++){let n=Ft[Ge++];if((n&128)>0){Ge=t;return}i[r]=n}return Jn.apply(String,i)}function NP(e){if(e<4)if(e<2){if(e===0)return"";{let t=Ft[Ge++];if((t&128)>1){Ge-=1;return}return Jn(t)}}else{let t=Ft[Ge++],i=Ft[Ge++];if((t&128)>0||(i&128)>0){Ge-=2;return}if(e<3)return Jn(t,i);let r=Ft[Ge++];if((r&128)>0){Ge-=3;return}return Jn(t,i,r)}else{let t=Ft[Ge++],i=Ft[Ge++],r=Ft[Ge++],n=Ft[Ge++];if((t&128)>0||(i&128)>0||(r&128)>0||(n&128)>0){Ge-=4;return}if(e<6){if(e===4)return Jn(t,i,r,n);{let a=Ft[Ge++];if((a&128)>0){Ge-=5;return}return Jn(t,i,r,n,a)}}else if(e<8){let a=Ft[Ge++],s=Ft[Ge++];if((a&128)>0||(s&128)>0){Ge-=6;return}if(e<7)return Jn(t,i,r,n,a,s);let o=Ft[Ge++];if((o&128)>0){Ge-=7;return}return Jn(t,i,r,n,a,s,o)}else{let a=Ft[Ge++],s=Ft[Ge++],o=Ft[Ge++],l=Ft[Ge++];if((a&128)>0||(s&128)>0||(o&128)>0||(l&128)>0){Ge-=8;return}if(e<10){if(e===8)return Jn(t,i,r,n,a,s,o,l);{let c=Ft[Ge++];if((c&128)>0){Ge-=9;return}return Jn(t,i,r,n,a,s,o,l,c)}}else if(e<12){let c=Ft[Ge++],u=Ft[Ge++];if((c&128)>0||(u&128)>0){Ge-=10;return}if(e<11)return Jn(t,i,r,n,a,s,o,l,c,u);let d=Ft[Ge++];if((d&128)>0){Ge-=11;return}return Jn(t,i,r,n,a,s,o,l,c,u,d)}else{let c=Ft[Ge++],u=Ft[Ge++],d=Ft[Ge++],h=Ft[Ge++];if((c&128)>0||(u&128)>0||(d&128)>0||(h&128)>0){Ge-=12;return}if(e<14){if(e===12)return Jn(t,i,r,n,a,s,o,l,c,u,d,h);{let f=Ft[Ge++];if((f&128)>0){Ge-=13;return}return Jn(t,i,r,n,a,s,o,l,c,u,d,h,f)}}else{let f=Ft[Ge++],p=Ft[Ge++];if((f&128)>0||(p&128)>0){Ge-=14;return}if(e<15)return Jn(t,i,r,n,a,s,o,l,c,u,d,h,f,p);let m=Ft[Ge++];if((m&128)>0){Ge-=15;return}return Jn(t,i,r,n,a,s,o,l,c,u,d,h,f,p,m)}}}}}function _C(e){return Ts.copyBuffers?Uint8Array.prototype.slice.call(Ft,Ge,Ge+=e):Ft.subarray(Ge,Ge+=e)}function Hh(e){let t=Ft[Ge++];if(ps[t])return ps[t](Ft.subarray(Ge,Ge+=e));throw new Error("Unknown extension type "+t)}var K6=new Array(4096);function LW(){let e=Ft[Ge++];if(e>=160&&e<192){if(e=e-160,nc>=Ge)return Ld.slice(Ge-vo,(Ge+=e)-vo);if(!(nc==0&&Yd<180))return CA(e)}else return Ge--,rn();let t=(e<<5^(e>1?cr.getUint16(Ge):e>0?Ft[Ge]:0))&4095,i=K6[t],r=Ge,n=Ge+e-3,a,s=0;if(i&&i.bytes==e){for(;r<n;){if(a=cr.getUint32(r),a!=i[s++]){r=1879048192;break}r+=4}for(n+=3;r<n;)if(a=Ft[r++],a!=i[s++]){r=1879048192;break}if(r===n)return Ge=r,i.string;n-=3,r=Ge}for(i=[],K6[t]=i,i.bytes=e;r<n;)a=cr.getUint32(r),i.push(a),r+=4;for(n+=3;r<n;)a=Ft[r++],i.push(a);let o=e<16?NP(e):kW(e);return o!=null?i.string=o:i.string=CA(e)}var X6=(e,t)=>{var i=rn();let r=e;t!==void 0&&(e=e<32?-((t<<5)+e):(t<<5)+e,i.highByte=t);let n=tr[e];return n&&n.isShared&&((tr.restoreStructures||(tr.restoreStructures=[]))[e]=n),tr[e]=i,i.read=BP(i,r),i.read()},BW=typeof self=="object"?self:global;ps[0]=()=>{};ps[0].noBuffer=!0;ps[101]=()=>{let e=rn();return(BW[e[0]]||Error)(e[1])};ps[105]=e=>{let t=cr.getUint32(Ge-4);Su||(Su=new Map);let i=Ft[Ge],r;i>=144&&i<160||i==220||i==221?r=[]:r={};let n={target:r};Su.set(t,n);let a=rn();return n.used?Object.assign(r,a):(n.target=a,a)};ps[112]=e=>{let t=cr.getUint32(Ge-4),i=Su.get(t);return i.used=!0,i.target};ps[115]=()=>new Set(rn());var NW=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");ps[116]=e=>{let t=e[0],i=NW[t];if(!i)throw new Error("Could not find typed array for code "+t);return new BW[i](Uint8Array.prototype.slice.call(e,1).buffer)};ps[120]=()=>{let e=rn();return new RegExp(e[0],e[1])};ps[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],i=Ge;Ge+=t-4,Gs=[rn(),rn()],Gs.position0=0,Gs.position1=0;let r=Ge;Ge=i;try{return rn()}finally{Ge=r}};ps[255]=e=>e.length==4?new Date((e[0]*16777216+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):e.length==8?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((e[3]&3)*4294967296+e[4]*16777216+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):e.length==12?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((e[4]&128?-281474976710656:0)+e[6]*1099511627776+e[7]*4294967296+e[8]*16777216+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");function FW(e){let t=Yd,i=Ge,r=vo,n=nc,a=Ld,s=Su,o=Gs,l=new Uint8Array(Ft.slice(0,Yd)),c=tr,u=tr.slice(0,tr.length),d=Ts,h=fv,f=e();return Yd=t,Ge=i,vo=r,nc=n,Ld=a,Su=s,Gs=o,Ft=l,fv=h,tr=c,tr.splice(0,tr.length,...u),Ts=d,cr=new DataView(Ft.buffer,Ft.byteOffset,Ft.byteLength),f}function EA(){Ft=null,Su=null,tr=null}function L2e(e){e.unpack?ps[e.type]=e.unpack:ps[e.type]=e}var FP=new Array(147);for(let e=0;e<256;e++)FP[e]=+("1e"+Math.floor(45.15-e*.30103));var sS=new yx({useRecords:!1});sS.unpack;sS.unpackMultiple;sS.unpack;var B2e=new Float32Array(1);new Uint8Array(B2e.buffer,0,4);var Xw;try{Xw=new TextEncoder}catch{}var bx,zP,oS=typeof Buffer<"u",SC=oS?Buffer.allocUnsafeSlow:Uint8Array,zW=oS?Buffer:Uint8Array,Q6=oS?4294967296:2144337920,lt,un,Qe=0,Fl,zl=null,N2e=/[\u0080-\uFFFF]/,O0=Symbol("record-id"),VW=class extends yx{constructor(e){super(e),this.offset=0;let t,i,r,n,a,s=0,o=zW.prototype.utf8Write?function(_,E,C){return lt.utf8Write(_,E,C)}:Xw&&Xw.encodeInto?function(_,E){return Xw.encodeInto(_,lt.subarray(E)).written}:!1,l=this;e||(e={});let c=e&&e.sequential,u=e.structures||e.saveStructures,d=e.maxSharedStructures;if(d==null&&(d=u?32:0),d>8160)throw new Error("Maximum maxSharedStructure is 8160");let h=e.maxOwnStructures;h==null&&(h=u?32:64),c&&!e.saveStructures&&(this.structures=[]);let f=d>32||h+d>64,p=d+64,m=d+h+64;if(m>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let v=[],y=0,x=0;this.pack=this.encode=function(_,E){if(lt||(lt=new SC(8192),un=new DataView(lt.buffer,0,8192),Qe=0),Fl=lt.length-10,Fl-Qe<2048?(lt=new SC(lt.length),un=new DataView(lt.buffer,0,lt.length),Fl=lt.length-10,Qe=0):Qe=Qe+7&2147483640,t=Qe,a=l.structuredClone?new Map:null,l.bundleStrings?(zl=["",""],lt[Qe++]=214,lt[Qe++]=98,zl.position=Qe-t,Qe+=4):zl=null,i=l.structures,i){i.uninitialized&&(i=l._mergeStructures(l.getStructures()));let C=i.sharedLength||0;if(C>d)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+i.sharedLength);if(!i.transitions){i.transitions=Object.create(null);for(let A=0;A<C;A++){let M=i[A];if(!M)continue;let T,P=i.transitions;for(let D=0,k=M.length;D<k;D++){let L=M[D];T=P[L],T||(T=P[L]=Object.create(null)),P=T}P[O0]=A+64}s=C}c||(i.nextId=C+64)}r&&(r=!1),n=i||[];try{if(b(_),zl){un.setUint32(zl.position+t,Qe-zl.position-t);let C=zl;zl=null,b(C[0]),b(C[1])}if(l.offset=Qe,a&&a.idsToInsert){Qe+=a.idsToInsert.length*6,Qe>Fl&&S(Qe),l.offset=Qe;let C=z2e(lt.subarray(t,Qe),a.idsToInsert);return a=null,C}return E&V2e?(lt.start=t,lt.end=Qe,lt):lt.subarray(t,Qe)}finally{if(i){if(x<10&&x++,y>1e4)i.transitions=null,x=0,y=0,v.length>0&&(v=[]);else if(v.length>0&&!c){for(let C=0,A=v.length;C<A;C++)v[C][O0]=0;v=[]}if(r&&l.saveStructures){let C=i.sharedLength||d;i.length>C&&(i=i.slice(0,C));let A=lt.subarray(t,Qe);return l.saveStructures(i,s)===!1?(l._mergeStructures(l.getStructures()),l.pack(_)):(s=C,A)}}E&U2e&&(Qe=t)}};let b=_=>{Qe>Fl&&(lt=S(Qe));var E=typeof _,C;if(E==="string"){let A=_.length;if(zl&&A>=8&&A<4096){let P=N2e.test(_);zl[P?0:1]+=_,lt[Qe++]=193,b(P?-A:A);return}let M;A<32?M=1:A<256?M=2:A<65536?M=3:M=5;let T=A*3;if(Qe+T>Fl&&(lt=S(Qe+T)),A<64||!o){let P,D,k,L=Qe+M;for(P=0;P<A;P++)D=_.charCodeAt(P),D<128?lt[L++]=D:D<2048?(lt[L++]=D>>6|192,lt[L++]=D&63|128):(D&64512)===55296&&((k=_.charCodeAt(P+1))&64512)===56320?(D=65536+((D&1023)<<10)+(k&1023),P++,lt[L++]=D>>18|240,lt[L++]=D>>12&63|128,lt[L++]=D>>6&63|128,lt[L++]=D&63|128):(lt[L++]=D>>12|224,lt[L++]=D>>6&63|128,lt[L++]=D&63|128);C=L-Qe-M}else C=o(_,Qe+M,T);C<32?lt[Qe++]=160|C:C<256?(M<2&&lt.copyWithin(Qe+2,Qe+1,Qe+1+C),lt[Qe++]=217,lt[Qe++]=C):C<65536?(M<3&&lt.copyWithin(Qe+3,Qe+2,Qe+2+C),lt[Qe++]=218,lt[Qe++]=C>>8,lt[Qe++]=C&255):(M<5&&lt.copyWithin(Qe+5,Qe+3,Qe+3+C),lt[Qe++]=219,un.setUint32(Qe,C),Qe+=4),Qe+=C}else if(E==="number")if(_>>>0===_)_<64?lt[Qe++]=_:_<256?(lt[Qe++]=204,lt[Qe++]=_):_<65536?(lt[Qe++]=205,lt[Qe++]=_>>8,lt[Qe++]=_&255):(lt[Qe++]=206,un.setUint32(Qe,_),Qe+=4);else if(_>>0===_)_>=-32?lt[Qe++]=256+_:_>=-128?(lt[Qe++]=208,lt[Qe++]=_+256):_>=-32768?(lt[Qe++]=209,un.setInt16(Qe,_),Qe+=2):(lt[Qe++]=210,un.setInt32(Qe,_),Qe+=4);else{let A;if((A=this.useFloat32)>0&&_<4294967296&&_>=-2147483648){lt[Qe++]=202,un.setFloat32(Qe,_);let M;if(A<4||(M=_*FP[(lt[Qe]&127)<<1|lt[Qe+1]>>7])>>0===M){Qe+=4;return}else Qe--}lt[Qe++]=203,un.setFloat64(Qe,_),Qe+=8}else if(E==="object")if(!_)lt[Qe++]=192;else{if(a){let M=a.get(_);if(M){if(!M.id){let T=a.idsToInsert||(a.idsToInsert=[]);M.id=T.push(M)}lt[Qe++]=214,lt[Qe++]=112,un.setUint32(Qe,M.id),Qe+=4;return}else a.set(_,{offset:Qe-t})}let A=_.constructor;if(A===Object)w(_,!0);else if(A===Array){C=_.length,C<16?lt[Qe++]=144|C:C<65536?(lt[Qe++]=220,lt[Qe++]=C>>8,lt[Qe++]=C&255):(lt[Qe++]=221,un.setUint32(Qe,C),Qe+=4);for(let M=0;M<C;M++)b(_[M])}else if(A===Map){C=_.size,C<16?lt[Qe++]=128|C:C<65536?(lt[Qe++]=222,lt[Qe++]=C>>8,lt[Qe++]=C&255):(lt[Qe++]=223,un.setUint32(Qe,C),Qe+=4);for(let[M,T]of _)b(M),b(T)}else{for(let M=0,T=bx.length;M<T;M++){let P=zP[M];if(_ instanceof P){let D=bx[M];if(D.write){D.type&&(lt[Qe++]=212,lt[Qe++]=D.type,lt[Qe++]=0),b(D.write.call(this,_));return}let k=lt,L=un,R=Qe;lt=null;let N;try{N=D.pack.call(this,_,I=>(lt=k,k=null,Qe+=I,Qe>Fl&&S(Qe),{target:lt,targetView:un,position:Qe-I}),b)}finally{k&&(lt=k,un=L,Qe=R,Fl=lt.length-10)}N&&(N.length+Qe>Fl&&S(N.length+Qe),Qe=F2e(N,lt,Qe,D.type));return}}w(_,!_.hasOwnProperty)}}else if(E==="boolean")lt[Qe++]=_?195:194;else if(E==="bigint"){if(_<BigInt(1)<<BigInt(63)&&_>=-(BigInt(1)<<BigInt(63)))lt[Qe++]=211,un.setBigInt64(Qe,_);else if(_<BigInt(1)<<BigInt(64)&&_>0)lt[Qe++]=207,un.setBigUint64(Qe,_);else if(this.largeBigIntToFloat)lt[Qe++]=203,un.setFloat64(Qe,Number(_));else throw new RangeError(_+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");Qe+=8}else if(E==="undefined")this.encodeUndefinedAsNil?lt[Qe++]=192:(lt[Qe++]=212,lt[Qe++]=0,lt[Qe++]=0);else if(E==="function")b(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+E)},w=this.useRecords===!1?this.variableMapSize?_=>{let E=Object.keys(_),C=E.length;C<16?lt[Qe++]=128|C:C<65536?(lt[Qe++]=222,lt[Qe++]=C>>8,lt[Qe++]=C&255):(lt[Qe++]=223,un.setUint32(Qe,C),Qe+=4);let A;for(let M=0;M<C;M++)b(A=E[M]),b(_[A])}:(_,E)=>{lt[Qe++]=222;let C=Qe-t;Qe+=2;let A=0;for(let M in _)(E||_.hasOwnProperty(M))&&(b(M),b(_[M]),A++);lt[C+++t]=A>>8,lt[C+t]=A&255}:_=>{let E=Object.keys(_),C,A=n.transitions||(n.transitions=Object.create(null)),M=0;for(let P=0,D=E.length;P<D;P++){let k=E[P];C=A[k],C||(C=A[k]=Object.create(null),M++),A=C}let T=A[O0];if(T)T>=96&&f?(lt[Qe++]=((T-=96)&31)+96,lt[Qe++]=T>>5):lt[Qe++]=T;else{T=n.nextId,T||(T=64),T<p&&this.shouldShareStructure&&!this.shouldShareStructure(E)?(T=n.nextOwnId,T<m||(T=p),n.nextOwnId=T+1):(T>=m&&(T=p),n.nextId=T+1);let P=E.highByte=T>=96&&f?T-96>>5:-1;A[O0]=T,n[T-64]=E,T<p?(E.isShared=!0,n.sharedLength=T-63,r=!0,P>=0?(lt[Qe++]=(T&31)+96,lt[Qe++]=P):lt[Qe++]=T):(P>=0?(lt[Qe++]=213,lt[Qe++]=114,lt[Qe++]=(T&31)+96,lt[Qe++]=P):(lt[Qe++]=212,lt[Qe++]=114,lt[Qe++]=T),M&&(y+=x*M),v.length>=h&&(v.shift()[O0]=0),v.push(A),b(E))}for(let P=0,D=E.length;P<D;P++)b(_[E[P]])},S=_=>{let E;if(_>16777216){if(_-t>Q6)throw new Error("Packed buffer would be larger than maximum buffer size");E=Math.min(Q6,Math.round(Math.max((_-t)*(_>67108864?1.25:2),4194304)/4096)*4096)}else E=(Math.max(_-t<<2,lt.length-1)>>12)+1<<12;let C=new SC(E);return un=new DataView(C.buffer,0,E),lt.copy?lt.copy(C,0,t,_):C.set(lt.slice(t,_)),Qe-=t,t=0,Fl=C.length-10,lt=C}}useBuffer(e){lt=e,un=new DataView(lt.buffer,lt.byteOffset,lt.byteLength),Qe=0}};zP=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,IW];bx=[{pack(e,t,i){let r=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&r>=0&&r<4294967296){let{target:n,targetView:a,position:s}=t(6);n[s++]=214,n[s++]=255,a.setUint32(s,r)}else if(r>0&&r<17179869184){let{target:n,targetView:a,position:s}=t(10);n[s++]=215,n[s++]=255,a.setUint32(s,e.getMilliseconds()*4e6+(r/1e3/4294967296>>0)),a.setUint32(s+4,r)}else if(isNaN(r)){if(this.onInvalidDate)return t(0),i(this.onInvalidDate());let{target:n,targetView:a,position:s}=t(3);n[s++]=212,n[s++]=255,n[s++]=255}else{let{target:n,targetView:a,position:s}=t(15);n[s++]=199,n[s++]=12,n[s++]=255,a.setUint32(s,e.getMilliseconds()*1e6),a.setBigInt64(s+4,BigInt(Math.floor(r)))}}},{pack(e,t,i){let r=Array.from(e),{target:n,position:a}=t(this.structuredClone?3:0);this.structuredClone&&(n[a++]=212,n[a++]=115,n[a++]=0),i(r)}},{pack(e,t,i){let{target:r,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(r[n++]=212,r[n++]=101,r[n++]=0),i([e.name,e.message])}},{pack(e,t,i){let{target:r,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(r[n++]=212,r[n++]=120,r[n++]=0),i([e.source,e.flags])}},{pack(e,t){this.structuredClone?J6(e,16,t):e7(oS?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let i=e.constructor;i!==zW&&this.structuredClone?J6(e,NW.indexOf(i.name),t):e7(e,t)}},{pack(e,t){let{target:i,position:r}=t(1);i[r]=193}}];function J6(e,t,i,r){let n=e.byteLength;if(n+1<256){var{target:a,position:s}=i(4+n);a[s++]=199,a[s++]=n+1}else if(n+1<65536){var{target:a,position:s}=i(5+n);a[s++]=200,a[s++]=n+1>>8,a[s++]=n+1&255}else{var{target:a,position:s,targetView:o}=i(7+n);a[s++]=201,o.setUint32(s,n+1),s+=4}a[s++]=116,a[s++]=t,a.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),s)}function e7(e,t){let i=e.byteLength;var r,n;if(i<256){var{target:r,position:n}=t(i+2);r[n++]=196,r[n++]=i}else if(i<65536){var{target:r,position:n}=t(i+3);r[n++]=197,r[n++]=i>>8,r[n++]=i&255}else{var{target:r,position:n,targetView:a}=t(i+5);r[n++]=198,a.setUint32(n,i),n+=4}r.set(e,n)}function F2e(e,t,i,r){let n=e.length;switch(n){case 1:t[i++]=212;break;case 2:t[i++]=213;break;case 4:t[i++]=214;break;case 8:t[i++]=215;break;case 16:t[i++]=216;break;default:n<256?(t[i++]=199,t[i++]=n):n<65536?(t[i++]=200,t[i++]=n>>8,t[i++]=n&255):(t[i++]=201,t[i++]=n>>24,t[i++]=n>>16&255,t[i++]=n>>8&255,t[i++]=n&255)}return t[i++]=r,t.set(e,i),i+=n,i}function z2e(e,t){let i,r=t.length*6,n=e.length-r;for(t.sort((a,s)=>a.offset>s.offset?1:-1);i=t.pop();){let a=i.offset,s=i.id;e.copyWithin(a+r,a,n),r-=6;let o=a+r;e[o++]=214,e[o++]=105,e[o++]=s>>24,e[o++]=s>>16&255,e[o++]=s>>8&255,e[o++]=s&255,n=a}return e}function Kv(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");zP.unshift(e.Class),bx.unshift(e)}L2e(e)}var UW=new VW({useRecords:!1});UW.pack;UW.pack;var V2e=512,U2e=1024,t7=new VW({structuredClone:!0});Kv({Class:ti.prototype.constructor,type:1,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,ti.prototype),e}});Kv({Class:Zt.prototype.constructor,type:2,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,Zt.prototype),e}});Kv({Class:xa.prototype.constructor,type:3,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,xa.prototype),e}});Kv({Class:j6.prototype.constructor,type:4,write(e){return e.id},read(e){return new j6(e)}});Kv({Class:W6.prototype.constructor,type:5,write(e){return e.data},read(e){return new W6(e)}});Kv({Class:Tn.prototype.constructor,type:6,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,Tn.prototype),e}});function H2e(e){var t=0;if(e.length===0)return t;for(let i=0;i<e.length;i++){let r=e[i];t=(t<<5)-t+r,t=t&t}return t}function AA(e){if(IP(e))return e;if(Array.isArray(e))return e.map(AA);if(typeof e=="object"&&e!==null){let t={};for(let i of Object.keys(e).sort())t[i]=AA(e[i]);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}else return e}var MA;(e=>{function t(n){return t7.pack(n)}e.serialize=t;function i(n){return t7.unpack(n)}e.deserialize=i;function r(n){return H2e(t(AA(n))).toString()}e.checksum=r})(MA||(MA={}));var i7;(e=>{function t(r){return r.type==="Conditional"?r.condition.type==="Distance"?"Distance":"StateChange":r.type}e.toEventUIType=t;function i(r){return r==="Distance"||r==="StateChange"?"Conditional":r}e.fromEventUIType=i})(i7||(i7={}));function r7(e){return e==="MouseDown"||e==="MouseUp"||e==="KeyDown"||e==="KeyUp"||e==="Collision"||e==="Trigger"}var Oa={LookAt:[],Follow:["Create"],DragDrop:["Transition","Animation","Audio","Particles","Create","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseHover:["Transition","Animation","Particles","Create","Destroy","SwitchCamera","SceneTransition","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Scroll:["Transition","Animation","Create","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Start:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Conditional:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseDown:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseUp:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MousePress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyDown:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyUp:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyPress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],GameControl:["Transition","Animation","Audio","Particles","Create","Conditional"],Collision:["Transition","Animation","Audio","Particles","Video","Create","Destroy","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Trigger:["Transition","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Resize:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],VariableChange:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],API:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],WEBHOOK:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],AIAssistantListener:["SetVariable"],AIAssistantTrigger:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"]},n7;(e=>{function t(r){return r.type==="MouseDown"||r.type==="MouseUp"||r.type==="MousePress"||r.type==="KeyDown"||r.type==="KeyUp"||r.type==="KeyPress"}e.is=t;function i(r){return r==="MouseDown"||r==="MouseUp"||r==="MousePress"?{type:r,mode:"Object",disabled:!1,actions:new Zt}:{type:r,disabled:!1,key:void 0,actions:new Zt}}e.defaultData=i})(n7||(n7={}));var wx;(e=>{function t(i){return{type:"Property",value:[i??null,"position","x"]}}e.propertyDefaultData=t,e.valueDefaultData={type:"Literal",value:0}})(wx||(wx={}));var TA;(e=>{function t(n){return{type:"Comparison",operator:"==",lOperand:wx.propertyDefaultData(n),rOperand:{...wx.valueDefaultData}}}e.comparisonDefaultData=t;function i(n){return{type:"Distance",toObject:n??null,fromObject:n??null,distance:200}}e.distanceDefaultData=i;function r(n,a){return{type:"State",object:n??null,state:a??null}}e.stateDefaultData=r})(TA||(TA={}));var a7;(e=>{function t(i){return i.find(r=>r==="ifActions"||r==="elseActions")!==void 0}e.isConditionalSubActions=t})(a7||(a7={}));var s7;(e=>{function t(r){return r.type==="Conditional"}e.is=t;function i(r){return{type:"Conditional",disabled:!1,inActions:new Zt,outActions:new Zt,condition:TA.distanceDefaultData(r)}}e.defaultData=i})(s7||(s7={}));var o7;(e=>e.defaultData={type:"DragDrop",cursor:"hand",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",limits:[-1/0,1/0,-1/0,1/0,-1/0,1/0],drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new Zt,drop:new Zt}})(o7||(o7={}));var PA;(e=>e.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new Zt})(PA||(PA={}));var DA;(e=>e.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5})(DA||(DA={}));var l7;(e=>{function t(r){return r.type==="MouseHover"}e.is=t;function i(){return{type:"MouseHover",disabled:!1,actions:new Zt}}e.defaultData=i})(l7||(l7={}));var c7;(e=>{function t(r){return r.type==="Scroll"}e.is=t;function i(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new Zt}}e.defaultData=i})(c7||(c7={}));var u7;(e=>{function t(r){return r.type==="Start"}e.is=t;function i(){return{type:"Start",disabled:!1,actions:new Zt}}e.defaultData=i})(u7||(u7={}));var d7;(e=>{function t(r){return r.type==="Collision"}e.is=t;function i(){return{type:"Collision",disabled:!1,target:"character",actions:new Zt}}e.defaultData=i})(d7||(d7={}));var h7;(e=>{function t(r){return r.type==="Trigger"}e.is=t;function i(r,n){return{type:"Trigger",disabled:!1,target:"all",triggeringObjects:[],actions:new Zt,triggerZone:"box",position:n.toArray(),rotation:[0,0,0],size:r.toArray(),radius:r.length()/2,helperVisible:!0}}e.defaultData=i})(h7||(h7={}));var IA;(e=>{e.defaultSizes={mobile:[480,480],tablet:[768,768],desktop:[1200,1200],custom:[769,1200]};function t(s){return s.type==="Resize"}e.is=t;function i(s){return typeof s=="string"?s:"custom"}e.sizeToDevice=i;function r(s){return typeof s=="string"?[...e.defaultSizes[s]]:[...s]}e.deviceToSize=r;function n(){let s={size:"mobile",operator:"<",actions:new Zt},o={size:"tablet",operator:"<",actions:new Zt},l={size:[...e.defaultSizes.custom],operator:"<>",actions:new Zt},c=new Zt;return c.push({id:kt.generateUUID(),fi:0,data:s},{id:kt.generateUUID(),fi:1,data:o},{id:kt.generateUUID(),fi:2,data:l}),{type:"Resize",disabled:!1,orientation:"horizontal",breakpoints:c}}e.defaultData=n;function a(){return{size:[...e.defaultSizes.custom],operator:"<>",actions:new Zt}}e.defaultBreakpointData=a})(IA||(IA={}));var OA;(e=>{e.propertyPaths={Position:["position"],"Position X":["position","x"],"Position Y":["position","y"],"Position Z":["position","z"],Rotation:["rotation"],"Rotation X":["rotation","x"],"Rotation Y":["rotation","y"],"Rotation Z":["rotation","z"],Scale:["scale"],"Scale X":["scale","x"],"Scale Y":["scale","y"],"Scale Z":["scale","z"],Width:["width"],Height:["height"],Depth:["depth"],"Mouse Position X":["mouse","x"],"Mouse Position Y":["mouse","y"],"Mouse Pressed":["mouse","pressed"],"Screen Width":["mouse","width"],"Screen Height":["mouse","height"],"Hit Position X":["raycast","x"],"Hit Position Y":["raycast","y"],"Hit Position Z":["raycast","z"],"Hit Object Position X":["raycast","objX"],"Hit Object Position Y":["raycast","objY"],"Hit Object Position Z":["raycast","objZ"]};function t(r){return r.type==="VariableChange"}e.is=t;function i(){return{disabled:!1,type:"VariableChange",actions:new Zt,variableId:"",objectId:null,property:"Position X"}}e.defaultData=i})(OA||(OA={}));var f7;(e=>{function t(r){return r.type==="API"}e.is=t;function i(){return{disabled:!1,type:"API",successActions:new Zt,errorActions:new Zt,userAPIId:""}}e.defaultData=i})(f7||(f7={}));var p7;(e=>{function t(r){return r.type==="WEBHOOK"}e.is=t;function i(){return{disabled:!1,type:"WEBHOOK",actions:new Zt,userWebhookId:""}}e.defaultData=i})(p7||(p7={}));var m7;(e=>{function t(r){return r.type==="AIAssistantListener"}e.is=t;function i(){return{disabled:!1,type:"AIAssistantListener",actions:new Zt,analysis:"average",analysisRange:[0,71],analysisSingle:0}}e.defaultData=i})(m7||(m7={}));var v7;(e=>{function t(r){return r.type==="AIAssistantTrigger"}e.is=t;function i(){return{disabled:!1,description:"",type:"AIAssistantTrigger",actions:new Zt}}e.defaultData=i})(v7||(v7={}));var Xv="personal camera",Rg="a218fcc3-276b-49b9-b485-49037fd14f5f",j2e=2960946,Qs=5526619,bu;(e=>{function t(p,m){return p[0]===m[0]&&p[1]===m[1]}e.isEqual=t;function i(p,m,v){return[p[0]+(m[0]-p[0])*v,p[1]+(m[1]-p[1])*v]}e.lerp=i;function r(p,m){return[p[0]+m[0],p[1]+m[1]]}e.add=r;function n(p,m){return[p[0]-m[0],p[1]-m[1]]}e.sub=n;function a(p,m){return[p[0]*m[0],p[1]*m[1]]}e.multiply=a;function s(p,m){return[p[0]/m[0],p[1]/m[1]]}e.divide=s;function o(p,m){return Math.pow(m[0]-p[0],2)+Math.pow(m[1]-p[1],2)}e.distanceSquared=o;function l(p,m){return Math.sqrt(o(p,m))}e.distance=l;function c(p,m){return p[0]*m[0]+p[1]*m[1]}e.dot=c;function u(p,m){return[p[0]*m,p[1]*m]}e.scalarMultiply=u;function d(p,m,v){let y=e.sub(m,p),x=e.sub(v,p),b=e.dot(y,x)/e.dot(y,y),w=e.scalarMultiply(y,b);return e.add(p,w)}e.projectionOnto=d;function h(p,m,v){return l(p,d(p,m,v))}e.projectionOntoDistance=h;function f(p,m){return[(p[0]+m[0])*.5,(p[1]+m[1])*.5]}e.center=f})(bu||(bu={}));var Lf;(e=>{function t(l,c){return l[0]===c[0]&&l[1]===c[1]&&l[2]===c[2]}e.isEqual=t;function i(l,c){return[l[0]+c[0],l[1]+c[1],l[2]+c[2]]}e.add=i;function r(l,c){return[l[0]-c[0],l[1]-c[1],l[2]-c[2]]}e.sub=r;function n(l,c){return[l[0]/c[0],l[1]/c[1],l[2]/c[2]]}e.div=n;function a(l,c){return[l[0]*c[0],l[1]*c[1],l[2]*c[2]]}e.mul=a;function s(l,c){return Math.hypot(l[0]-c[0],l[1]-c[1],l[2]-c[2])}e.dist=s;function o(l,c,u){return[l[0]+(c[0]-l[0])*u,l[1]+(c[1]-l[1])*u,l[2]+(c[2]-l[2])*u]}e.lerp=o})(Lf||(Lf={}));var xx;(e=>{function t(r,n){return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]&&r[3]===n[3]}e.isEqual=t;function i(r,n,a){return[r[0]+(n[0]-r[0])*a,r[1]+(n[1]-r[1])*a,r[2]+(n[2]-r[2])*a,r[3]+(n[3]-r[3])*a]}e.lerp=i})(xx||(xx={}));var g7;(e=>{let t=180/Math.PI,i=Math.PI/180;function r(o){return typeof o=="number"?o*t:o}function n(o){return typeof o=="number"?o*i:o}function a(o){return[r(o[0]),r(o[1]),r(o[2])]}e.radToDeg=a;function s(o){return[n(o[0]),n(o[1]),n(o[2])]}e.degToRad=s})(g7||(g7={}));var pv;(e=>{e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(n,a){for(let s=0;s<16;s++)if(n[s]!==a[s])return!1;return!0}e.isEqual=t;function i(n){return n??e.identity}e.simplify=i;function r(n,a){let s=a.slice(0);for(var o=0,l=a.length;o<l;o+=3){let c=n[3]*a[o]+n[7]*a[o+1]+n[11]*a[o+2]+n[15];s[o]=(n[0]*a[o]+n[4]*a[o+1]+n[8]*a[o+2]+n[12])/c,s[o+1]=(n[1]*a[o]+n[5]*a[o+1]+n[9]*a[o+2]+n[13])/c,s[o+2]=(n[2]*a[o]+n[6]*a[o+1]+n[10]*a[o+2]+n[14])/c}return s}e.applyMatrix4=r})(pv||(pv={}));var ya;(e=>{function t(c){return typeof c=="object"&&typeof c.r=="number"&&typeof c.g=="number"&&typeof c.b=="number"}e.isRGB=t,e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0};function i(c){return{r:Math.round(c.r*255),g:Math.round(c.g*255),b:Math.round(c.b*255),a:1}}e.toRgb255a1=i;function r(c){return{r:c.r,g:c.g,b:c.b}}e.clone=r;function n(c){return c=Math.floor(c),{r:(c>>16&255)/255,g:(c>>8&255)/255,b:(c&255)/255}}e.fromHex=n;function a(c){return Math.round(c.r*255)*65536+Math.round(c.g*255)*256+Math.round(c.b*255)}e.toHex=a;function s(c,u){return c.r===u.r&&c.g===u.g&&c.b===u.b}e.equals=s;function o(c,u){return c.r.toFixed(2)===u.r.toFixed(2)&&c.g.toFixed(2)===u.g.toFixed(2)&&c.b.toFixed(2)===u.b.toFixed(2)}e.equalsFixed=o;function l(c,u,d){return{r:c.r+(u.r-c.r)*d,g:c.g+(u.g-c.g)*d,b:c.b+(u.b-c.b)*d}}e.lerp=l})(ya||(ya={}));var br;(e=>{e.white={...ya.white,a:1},e.transparent={...ya.white,a:0};function t(l){return{r:l[0],g:l[1],b:l[2],a:l[3]}}e.from0to1=t;function i(l,c){return{...ya.fromHex(l),a:c}}e.fromHexAndA=i;function r(l){return{r:Math.round(l.r*255),g:Math.round(l.g*255),b:Math.round(l.b*255),a:l.a}}e.toRgb255a1=r;function n(l,c){return ya.equals(l,c)&&l.a===c.a}e.equals=n;function a(l,c){return ya.equalsFixed(l,c)&&l.a.toFixed(2)===c.a.toFixed(2)}e.equalsFixed=a;function s(l,c,u){return{r:l.r+(c.r-l.r)*u,g:l.g+(c.g-l.g)*u,b:l.b+(c.b-l.b)*u,a:l.a+(c.a-l.a)*u}}e.lerp=s;function o({r:l,g:c,b:u,a:d}=e.white){return`rgba(${l*255}, ${c*255}, ${u*255}, ${d})`}e.toStyle=o})(br||(br={}));var RA;(e=>e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(RA||(RA={}));var y7;(e=>e.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(y7||(y7={}));var b7;(e=>e.defaultData={control1:[.5,0],control2:[.5,1]})(b7||(b7={}));var Ad;(e=>(e.linear=[0,0,1,1],e.ease=[.25,.1,.25,1],e.easeIn=[.42,0,1,1],e.easeOut=[0,0,.58,1],e.easeInOut=[.42,0,.58,1]))(Ad||(Ad={}));function w7(e){return typeof e=="string"&&e.length===36?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e):!1}var Wf;(e=>{e.all=["PerspectiveCamera","OrthographicCamera"];function t(i){return e.all.includes(i)}e.is=t})(Wf||(Wf={}));var mv;(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset};function t(i){var r,n;return i.type==="PerspectiveCamera"?((r=i.perspective)==null?void 0:r.zoom)??1:((n=i.orthographic)==null?void 0:n.zoom)??1}e.getZoom=t})(mv||(mv={}));var Bd;(e=>{function t(r,n=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(r[0],r[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[r[0]+r[0]*n,0,0]},grid:{count:[2,2,2],size:r.map(a=>a*(1+n)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}e.defaultData=t;function i(r,n){let a={...r};if(HW.forEach(s=>{Object.assign(a,{[s]:n[s]??r[s]})}),a.radial={...r.radial},n.radial){let s=r.radial,o=n.radial;jW.forEach(l=>{Object.assign(a.radial,{[l]:o[l]??s[l]})})}if(a.linear={...r.linear},n.linear){let s=r.linear,o=n.linear;WW.forEach(l=>{Object.assign(a.linear,{[l]:o[l]??s[l]})})}if(a.grid={...r.grid},n.grid){let s=r.grid,o=n.grid;GW.forEach(l=>{Object.assign(a.grid,{[l]:o[l]??s[l]})})}if(a.toObject={...r.toObject},n.toObject){let s=r.toObject,o=n.toObject;$W.forEach(l=>{Object.assign(a.toObject,{[l]:o[l]??s[l]})})}if(a.randomnessObject={...r.randomnessObject},n.randomnessObject){let s=r.randomnessObject,o=n.randomnessObject;ZW.forEach(l=>{Object.assign(a.randomnessObject,{[l]:o[l]??s[l]})})}return a}e.merge=i})(Bd||(Bd={}));var kA;(e=>{e.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let t=["radial","linear","grid","toObject","randomnessObject"];function i(r,n){let a=[];r.count!==void 0&&a.push({type:0,path:n,props:{count:r.count}});for(let s of t){let o=r[s];o&&Object.keys(o).length>0&&a.push({type:0,path:[...n,s],props:o})}return a}e.toOps=i})(kA||(kA={}));var HW=["count"],jW=["radius","start","end","position","scale","rotation"],WW=["position","scale","rotation"],GW=["count","size"],$W=["count","position","scale","rotation"],ZW=["strength","scale","rotation","position","movement","seed","freqScale"],LA;(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function t(i){return e.all.includes(i)}e.is=t})(LA||(LA={}));var BA;(e=>{function t(r){return i(r)}e.defaultData=t;function i(r){if(r==="PointLight")return{type:r,color:br.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,penumbraSize:.5,depth:1e5};if(r==="SpotLight")return{type:r,color:br.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};if(r==="DirectionalLight")return{type:r,color:br.white,intensity:1,shadows:!0,size:2e3,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(BA||(BA={}));var _x;(e=>(e.defaultShapeData={type:"PlaneEmitterShape",size:[100,100,100]},e.defaultCollisionData={colliderEntityId:null,collisionBounce:.75},e.defaultData={renderMaterial:{type:"particleMaterial",color:{r:1,g:.2,b:.545,a:1},color2:{r:.945,g:.714,b:.184,a:1},coloring:"gradient",ease:"linearFadeOut",easeSize:"linearFadeOut",transparent:!0,size:[40,40],texture:"pt_default_particle",spriteRotation:[0,0]},birthRatePerSec:50,gravity:1,noiseStrength:0,noiseScale:0,noiseSeed:1,noiseType:"curl",randomRotation:0,randomScale:.2,randomMass:.5,rootObjectType:"instancedMesh",life:1,direction:[0,0,0],directionMode:"axis",speed:10,shape:e.defaultShapeData,autoPlay:!0,emitTimeDelay:0,emitTimeCycle:"infinity",emitTimeDuration:1,...e.defaultCollisionData}))(_x||(_x={}));var vv;(e=>e.defaultData={enabled:"visibility",fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(vv||(vv={}));var NA;(e=>{e.defaultData={castShadow:!0,receiveShadow:!0};function t(i,r){return i.castShadow===r.castShadow&&i.receiveShadow===r.receiveShadow}e.equals=t})(NA||(NA={}));var FA;(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0};function t(i,r){return i.flatShading===r.flatShading&&i.side===r.side&&i.wireframe===r.wireframe}e.equals=t})(FA||(FA={}));var zA;(e=>e.defaultData={...FA.defaultData,...NA.defaultData})(zA||(zA={}));var x7;(e=>{function t(i,r){var a,s;let n=[];if("material"in i){let o=typeof i.material=="string"?r.materials[i.material]??((a=r.lib.materials[i.material])==null?void 0:a.asset):i.material;o&&n.push(o)}else if("materials"in i)for(let o of i.materials){let l=typeof o=="string"?r.materials[o]??((s=r.lib.materials[o])==null?void 0:s.asset):o;l&&n.push(l)}return n}e.getMaterialData=t})(x7||(x7={}));var Sx;(e=>(e.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},e.maxSize=3e7))(Sx||(Sx={}));var _7;(e=>{function t(i){return i==="texture"||i==="video"||i==="color"||i==="depth"||i==="normal"||i==="gradient"||i==="noise"||i==="fresnel"||i==="rainbow"||i==="toon"||i==="outline"||i==="particle"||i==="transmission"||i==="matcap"||i==="displace"||i==="pattern"||i==="light"}e.is=t})(_7||(_7={}));function W2e(e){return e.type!=="displace"}var S7;(e=>{function t(i){return i==="phong"||i==="toon"||i==="lambert"||i==="physical"}e.is=t})(S7||(S7={}));var qW=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],G2e=["wrapping","image","video","name","minFilter","magFilter"],ea;(e=>{function t(a,s){let{texture:o,...l}=s;if(Object.assign(a,l),o){let c=a.texture;c&&Object.assign(c,o)}}e.patch=t;function i(a,s){return a==="light"&&s?r(s):n(a)}e.defaultData=i;function r(a){let s={mode:0,isMask:!1,visible:!0,bumpMap:void 0,bumpMapIntensity:5,roughnessMap:void 0,alphaOverride:1};switch(a){case"phong":return{...s,category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",visible:!0,mode:0,occlusion:!0,alpha:.6};case"toon":return{...s,category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1};case"lambert":return{...s,category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0,occlusion:!0};case"physical":return{...s,category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0,occlusion:!0}}}function n(a){let s={alpha:1,mode:0,isMask:!1,visible:!0};switch(a){case"texture":return{...s,type:"texture",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006},crop:!1};case"video":return{...s,type:"video",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{video:Sx.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006},crop:!1};case"color":return{...s,type:"color",color:ya.fromHex(Qs)};case"depth":return{...s,type:"depth",gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{...s,type:"normal",cnormal:[1,1,1]};case"gradient":return{...s,type:"gradient",gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{...s,type:"noise",size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...ya.fromHex(6710886),a:1},colorB:{...ya.fromHex(6710886),a:1},colorC:{...ya.fromHex(16777215),a:1},colorD:{...ya.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8],voronoiStyle:0,highCut:1,lowCut:0,smoothness:.3,seed:0,quality:1};case"fresnel":return{...s,type:"fresnel",color:br.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{...s,type:"rainbow",filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{...s,type:"toon",positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:br.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{...s,type:"outline",outlineColor:br.fromHexAndA(0,1),contourColor:br.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{...s,type:"matcap",texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006}};case"transmission":return{...s,type:"transmission",thickness:10,ior:1.5,roughness:1};case"displace":return{visible:!0,type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,voronoiStyle:0,smoothness:.3,seed:0,highCut:1,lowCut:0,quality:1};case"pattern":return{...s,type:"pattern",style:0,projection:0,axis:"y",blending:0,offset:[0,0],colorA:{...ya.fromHex(0),a:1},colorB:{...ya.fromHex(16777215),a:1},frequency:[10,10],size:.5,variation:0,smoothness:.5,zigzag:0,rotation:0,vertical:[0,1],horizontal:[0,1],sides:6}}}})(ea||(ea={}));var _a;(e=>{function t(u){return!u.layers.some(d=>d.data.type==="texture"&&d.data.projection!==0||d.data.type==="depth"&&!d.data.isWorldSpace||d.data.type==="noise"||d.data.type==="displace")}e.isMergable=t;function i(u){let d="";return u.layers.forEach(h=>{Object.entries(h.data).forEach(([f,p])=>{d+=`${f}${p}`,Array.isArray(p)?p.forEach(m=>d+=`${m}`):typeof p=="object"?Object.values(p).forEach(m=>{typeof m=="number"?d+=`${m.toFixed(4)}`:d+=`${m}`}):d+=`${p}`})}),d}e.getHash=i;function r(){return{layers:new Zt}}e.defaultEmptyData=r;function n(u="layer1",d="layer2"){return s("phong",u,d)}e.defaultData=n;function a(u,d){return{...u,name:d}}e.withName=a;function s(u,d="layer1",h="layer2"){let f=new Zt;return f.push({fi:0,data:ea.defaultData("light",u),id:d}),f.push({fi:1,data:ea.defaultData("color"),id:h}),{layers:f}}e.defaultTwoLayerData=s;function o(u){let d=ea.defaultData("texture");u&&Object.assign(d.texture,{image:u});let h=new Zt;return h.push({fi:0,data:d,id:"layer1"}),h.push({fi:1,data:{...ea.defaultData("transmission"),alpha:1},id:"layer2"}),h.push({fi:2,data:{...ea.defaultData("light","lambert"),alpha:0},id:"layer3"}),{layers:h}}e.defaultUIObjectMaterial=o;function l(u,d="phong",h="layer1",f="layer2"){let p=ea.defaultData("texture");Object.assign(p.texture,{image:u});let m=new Zt;return m.push({fi:0,data:p,id:h}),m.push({fi:1,data:ea.defaultData("light",d),id:f}),{layers:m}}e.defaultTwoLayerTextureData=l;function c(u,d="phong",h="layer1",f="layer2"){let p=ea.defaultData("video");Object.assign(p.texture,{video:u});let m=new Zt;return m.push({fi:0,data:p,id:h}),m.push({fi:1,data:ea.defaultData("light",d),id:f}),{layers:m}}e.defaultTwoLayerVideoTextureData=c})(_a||(_a={}));var Cx;(e=>{function t(){return{points:new Zt,roundness:0,shapeHoles:[],isClosed:!1}}e.defaultData=t})(Cx||(Cx={}));var Ex;(e=>{function t(){return{points:new Zt,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}e.defaultData=t})(Ex||(Ex={}));var YW={type:"Ellipse",width:50,height:50,spikes:16,angle:360,innerRadius:0},VA;(e=>{function t(i,r){let n={...i};return XW.forEach(a=>{Object.assign(n,{[a]:r[a]??i[a]})}),n}e.merge=t})(VA||(VA={}));var KW={shape:YW,depth:1,offset:0,bevel:50,bevelSides:6,angle:0,twist:0,startScale:1,endScale:1,capType:"flat"},XW=["depth","offset","angle","twist","startScale","endScale"],Ax;(e=>{function t(r){return r==="PolygonGeometry"||r==="RectangleGeometry"||r==="StarGeometry"||r==="TriangleGeometry"||r==="EllipseGeometry"||r==="UIGeometry"}e.is2DParametricMesh=t;function i(r){return r==="PolygonGeometry"||r==="PolygonGeometry"||r==="RectangleGeometry"||r==="StarGeometry"||r==="TriangleGeometry"||r==="EllipseGeometry"||r==="PathGeometry"||r==="VectorGeometry"||r==="ConeGeometry"||r==="CubeGeometry"||r==="CylinderGeometry"||r==="DodecahedronGeometry"||r==="HelixGeometry"||r==="IcosahedronGeometry"||r==="LatheGeometry"||r==="PyramidGeometry"||r==="SphereGeometry"||r==="PlaneGeometry"||r==="BackdropGeometry"||r==="TorusGeometry"||r==="TorusKnotGeometry"||r==="BooleanGeometry"||r==="TextGeometry"||r==="InputGeometry"}e.isParametricMesh=i})(Ax||(Ax={}));var UA;(e=>{function t(i,r){let n={...i};return Object.assign(n,r),n.type==="PathGeometry"&&"extrusion"in r&&r.extrusion&&(n.extrusion={...i.extrusion},Object.assign(n.extrusion,VA.merge(n.extrusion,r.extrusion))),n}e.merge=t})(UA||(UA={}));var ff;(e=>{function t(i){if(i==="RectangleGeometry")return{width:320,height:320,type:i,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(i==="UIGeometry")return{type:i,frame:"",cornerRadius:[0,0,0,0],cornerType:0,width:1,height:1};if(i==="PathGeometry")return{type:i,width:1,height:1,depth:1,path:Ex.defaultData(),extrusion:KW};if(i==="VectorGeometry")return{width:1,height:1,type:i,subdivisions:12,shape:Cx.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(i==="BooleanGeometry")return{type:i,operation:2,width:0,height:0,depth:0,phongAngle:35};if(i==="TextGeometry")return{type:i,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:{textValue:""},textTransform:1,font:"Roboto_regular",editable:!1,extrudeBevelSize:0,extrudeBevelSegments:1};if(i==="InputGeometry")return{...e.defaultData("TextGeometry"),type:i,editable:!0};if(i==="SphereGeometry")return{type:"SphereGeometry",width:100,height:100,depth:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180};throw new Error("not implemented")}e.defaultData=t})(ff||(ff={}));var CC=["width","height","depth"],HA;(e=>e.defaultData={enabled:!1,useBackgroundColor:!1,color:ya.white,near:.1,far:2e3})(HA||(HA={}));var Mx;(e=>{let t={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:{...t,blendFunction:16,granularity:15},bloom:{...t,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...t,offset:[2,2]},vignette:{...t,darkness:1,offset:0},hueSaturation:{...t,hue:3,saturation:0},brightnessContrast:{...t,brightness:.25,contrast:0},depthOfField:{...t,focusDistance:100,focalLength:20,bokehScale:5},noise:{...t,blendFunction:16}}})(Mx||(Mx={}));var jA;(e=>e.defaultData={softShadowQuality:"low"})(jA||(jA={}));var WA;(e=>e.defaultData={enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75})(WA||(WA={}));var GA;(e=>e.defaultData={occlusion:!1,aoFullRes:!1,radius:256,bias:.5,aoColor:{r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}})(GA||(GA={}));var gv;(e=>e.defaultData={usePhysics:!1,gravity:-10})(gv||(gv={}));var $A;(e=>e.defaultData={playCamera:Xv,gameControlObject:null})($A||($A={}));var ZA;(e=>e.defaultData={backgroundColor:br.fromHexAndA(j2e,1),postprocessing:Mx.defaultData,fog:HA.defaultData,globalPhysics:gv.defaultData,ambient:WA.defaultData,ao:GA.defaultData,shadow:jA.defaultData,publish:$A.defaultData})(ZA||(ZA={}));var qA;(e=>e.defaultData={colliderType:"box",size:[100,100,100],colliderHelperVisible:!0,forceType:"collider",forceRange:"global",forceIntensity:.5,forceDambing:.95})(qA||(qA={}));var C7;(e=>{function t(r){return r==="Component"||r==="Instance"}e.isComponentRelated=t;function i(r){return r==="Empty"||r==="Instance"}e.isEmptyOrComponent=i})(C7||(C7={}));var yv;(e=>{e.identity={...RA.identity,hiddenMatrix:pv.identity};function t(n){return{position:n.position,rotation:n.rotation,scale:n.scale,hiddenMatrix:n.hiddenMatrix}}e.fromObject=t;function i(n,a){return{position:(a==null?void 0:a.position)||n.position,rotation:(a==null?void 0:a.rotation)||n.rotation,scale:(a==null?void 0:a.scale)||n.scale,hiddenMatrix:(a==null?void 0:a.hiddenMatrix)||n.hiddenMatrix}}e.merge=i;function r(n,a){return fW({position:Lf.isEqual(n.position,a.position)?void 0:a.position,rotation:Lf.isEqual(n.rotation,a.rotation)?void 0:a.rotation,scale:Lf.isEqual(n.scale,a.scale)?null:a.scale,hiddenMatrix:pv.isEqual(n.hiddenMatrix,a.hiddenMatrix)?void 0:a.hiddenMatrix})}e.diff=r})(yv||(yv={}));var sa;(e=>e.defaultData={states:new Zt,events:new Zt,visible:!0,raycastLock:!1,physics:vv.defaultData,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...yv.identity,cloner:null})(sa||(sa={}));var YA;(e=>e.defaultData={type:"Empty",...sa.defaultData})(YA||(YA={}));var E7;(e=>e.defaultData={type:"ParticleCollider",...qA.defaultData,...sa.defaultData})(E7||(E7={}));var A7;(e=>e.defaultData={type:"Component",...sa.defaultData})(A7||(A7={}));var M7;(e=>e.defaultData={type:"Particle",...sa.defaultData,..._x.defaultData})(M7||(M7={}));var pf;(e=>e.defaultData={type:"Mesh",...sa.defaultData,...zA.defaultData})(pf||(pf={}));var g1;(e=>e.defaultData={...sa.defaultData,...yv.identity,position:[0,0,mv.DefaultTargetOffset],...mv.defaultData})(g1||(g1={}));var KA;(e=>{function t(i){return{...sa.defaultData,...BA.defaultData(i)}}e.defaultData=t,e.defaultDirectionalLightData={...e.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7}})(KA||(KA={}));var Tx;(e=>{function t(r,n,a=0){for(;a<n.length;){let s=r?r[n[a]]:void 0;if(n.length===a+1)return s;if(s)r=s.descendants,a+=1;else return}}e.resolveWithDes=t;function i(r,n,a=0){let s=t(r,n,a);if(s){let o=Object.keys(s);if(o.length===1&&o[0]==="descendants")return}return s}e.resolve=i})(Tx||(Tx={}));var Nd;(e=>{e.rootOverrideProps=["physics","events"],e.compositeNonOptionalOverrideProps=["geometry"],e.compositeEntireOverrideOverrideProps=["material"];function t(r,n){return{...sa.defaultData,...n,component:r,overrides:new Tn,physics:void 0,events:void 0,type:"Instance"}}e.ofComponent=t;function i(r){let n=yv.fromObject(r.data);return t(r.id,n)}e.fromComponentData=i})(Nd||(Nd={}));var bv;(e=>{e.defaultData={type:"Page",...sa.defaultData,physics:{...vv.defaultData,fusedBody:!1},...ZA.defaultData,camera:g1.defaultData};function t(i){return i.uiScene!==void 0}e.isUIPage=t})(bv||(bv={}));var XA;(e=>(e.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:pv.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:vv.defaultData,states:new Zt,events:new Zt,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...mv.defaultData},e.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},e.defaultMeshObject={name:"Rectangle",...sa.defaultData,...pf.defaultData,geometry:ff.defaultData("RectangleGeometry"),material:_a.defaultTwoLayerData("phong","layer1","layer2")},e.defaultBooleanObject={name:"Boolean",...sa.defaultData,...pf.defaultData,geometry:ff.defaultData("BooleanGeometry"),material:_a.defaultTwoLayerData("phong","layer1","layer2")},e.defaultTextObject={name:"Text",...sa.defaultData,...pf.defaultData,geometry:ff.defaultData("TextGeometry"),material:_a.defaultTwoLayerData("phong","layer1","layer2")},e.defaultInputObject={name:"Input",...sa.defaultData,...pf.defaultData,geometry:ff.defaultData("InputGeometry"),material:_a.defaultTwoLayerData("phong","layer1","layer2")}))(XA||(XA={}));var mf;(e=>{function t(a,s){let o={name:s};return a.type==="Mesh"?(o.geometry={},"material"in a&&(o.material={layers:new Tn}),"materials"in a&&(o.materials=a.materials.map(l=>({layers:new Tn})))):Wf.is(a.type)&&(o.perspective={},o.orthographic={}),o}e.newEmpty=t;function i(a,s){if(s===void 0)return a;let o={...a};return"material"in o&&"material"in s&&s.material&&(o.material=v1(o.material,l=>{if(typeof l!="string")for(let[c,u]of Object.entries(s.material.layers)){let d=l.layers.data(c);d&&ea.patch(d,u)}}).data),o.materials&&s.materials&&(o.materials=v1(o.materials,l=>{var c,u;for(let d=0;d<o.materials.length;d++){let h=s.materials[d];if(typeof h!="string")for(let[f,p]of Object.entries(h.layers)){let m=(u=(c=l[d])==null?void 0:c.layers)==null?void 0:u.data(f);m&&ea.patch(m,p)}}}).data),o}function r(a,s){let o,l=[],c={orthographic:0,perspective:0,geometry:0};function u(d,h){for(let[f,p]of Object.entries(h.layers)){let{texture:m,...v}=p;if(m!==void 0&&Object.keys(m).length>0){let y={path:[...d,"layers",f,"texture"],props:m,type:0};l.push(y)}if(Object.keys(v).length>0){let y={path:[...d,"layers",f],props:v,type:0};l.push(y)}}}for(let[d,h]of Object.entries(s))if(d!=="name")if(d==="cloner")l.push(...kA.toOps(h,["cloner"]));else if(d==="pathSnapping")l.push({path:[d],props:{slide:h.slide,offset:h.offset},type:0});else if(d==="material")u(["material"],h);else if(d==="materials")for(let[f,p]of Object.entries(h))u(["materials",f],p);else if(c[d]===0){if(d==="geometry"&&h.extrusion!==void 0){let f={path:[d,"extrusion"],props:h.extrusion,type:0};l.push(f),h={...h},delete h.extrusion}if(Object.keys(h).length>0){let f={path:[d],props:h,type:0};l.push(f)}}else o===void 0&&(o={path:[],props:{},type:0},l.push(o)),o.props[d]=h;return l}e.toOps=r;function n(a,s){var l,c,u,d,h,f;if(s===void 0)return a;let o={...a};if(Object.assign(o,yv.merge(o,s)),Object.assign(o,{pathSnapping:Object.assign({},o.pathSnapping,{slide:((l=s.pathSnapping)==null?void 0:l.slide)??((c=o.pathSnapping)==null?void 0:c.slide)??0,offset:((u=s.pathSnapping)==null?void 0:u.offset)??((d=o.pathSnapping)==null?void 0:d.offset)??0})}),Wf.is(a.type)){o.orthographic={...o.orthographic},o.perspective={...o.perspective};let p=s;((h=p.orthographic)==null?void 0:h.zoom)!==void 0&&(o.orthographic.zoom=p.orthographic.zoom),((f=p.perspective)==null?void 0:f.zoom)!==void 0&&(o.perspective.zoom=p.perspective.zoom),p.isUpVectorFlipped!==void 0&&(o.isUpVectorFlipped=p.isUpVectorFlipped),p.targetOffset!==void 0&&(o.targetOffset=p.targetOffset)}else if(a.type==="Mesh")"geometry"in s&&Object.assign(o,{geometry:UA.merge(o.geometry,s.geometry)}),(s.material||s.materials)&&(o=i(o,s)),o.cloner&&"cloner"in s&&Object.assign(o,{cloner:Bd.merge(o.cloner,s.cloner)});else if(a.type==="Empty")o.cloner&&"cloner"in s&&Object.assign(o,{cloner:Bd.merge(o.cloner,s.cloner)});else if(LA.is(a.type)){let p=s;p.intensity!==void 0&&(o.intensity=p.intensity),p.color!==void 0&&(typeof p.color=="string"?o.color=p.color:o.color=ya.clone(p.color))}return o}e.patch=n})(mf||(mf={}));var Px;(e=>e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,hoverRotateDamping:.125,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0})(Px||(Px={}));var Fd;(e=>e.defaultData={orbitControls:Px.defaultData,playPage:Rg,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",joystickSizeAndXYOffset:Array(12).fill(0).map((t,i)=>{let r=0,n=0;return i<5?n=-30:i<10&&(n=30),i===0||i===10||i===5?r=30:(i===4||i===11||i===9)&&(r=-30),[120,[r,n],"show"]}),settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1,imageQuality:70}},stopRaycast:!0,hdTransmission:!1})(Fd||(Fd={}));var QA;(e=>e.defaultData={id:"basic",label:"Basic",style:"None",prompt:""})(QA||(QA={}));var JA;(e=>e.defaultData={weather:0,shadows:0,lightOrigin:0,temperature:0,sun:0,camera:0,environment:0,particles:0,nature:0,floor:0})(JA||(JA={}));var vf;(e=>(e.defaultData=()=>({mode:"line-art-both",prompt:"",negativePrompt:"",style:{...QA.defaultData},isRandomSeed:!0,seed:e.generateSeed(),guessMode:!1,advanced:!1,steps:20,guidanceScale:7.5,controlNetScale:1,modifiers:JA.defaultData}),e.generateSeed=()=>Math.round(Math.random()*1e5)))(vf||(vf={}));var y1;(e=>{function t(r){return r.find(n=>n.data.type==="Page"&&n.data.globalPhysics.usePhysics)!==void 0}e.physicsEnabled=t;function i(r,n,a){r.scene.objects.traverseFrom(n,(s,o)=>{var l;if(o.type==="Instance"){let c=(l=Ox.getComponentData(r,o.component))==null?void 0:l.data;c&&a(s,o,c.events)}else a(s,o,o.events)})}e.traverseModuleInstances=i})(y1||(y1={}));var gf;(e=>{e.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222",e.defaultLight={fi:-1,data:KA.defaultDirectionalLightData,id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]};function t(n=!0,a=[]){let s=[],o=XA.defaultMeshObject;n&&(s.push({...e.defaultLight}),s.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:o,children:[]})),s.push(...a);let l=new xa;return l.push({fi:1,id:Rg,data:{...bv.defaultData,name:"Scene 1"},children:s}),l}e.createDefaultObjectTreeWithPage=t,e.defaultData={objects:t(),publish:Fd.defaultData,styles:vf.defaultData()},e.emptyDataWithoutPage=function(){return{objects:new xa,publish:Fd.defaultData,styles:vf.defaultData()}},e.emptyDataWithPage=function(n=!0){return{objects:t(n),publish:Fd.defaultData,styles:vf.defaultData()}},e.emptyData=function(){return{objects:new xa,publish:{...Fd.defaultData},styles:vf.defaultData()}};function i(n){return{...e.defaultData,objects:No(n,xa.prototype)}}e.withObjs=i;function r(n,a){return i([{id:n,data:a,children:[],fi:0}])}e.withObj=r})(gf||(gf={}));var kg;(e=>e.defaultData={preset:"fullscreen",allowResponsive:!1,size:[512,512],coords:[0,0],sceneScale:1,color:{r:0,g:0,b:0,a:.5}})(kg||(kg={}));var eM;(e=>(e.defaultData=t=>({url:t,name:"New Webhook",parametersSchemas:new Zt}),e.defaultParameterValueByType=t=>t==="number"?0:t==="boolean"?!1:""))(eM||(eM={}));var T7;(e=>e.defaultData=(t,i="GET")=>({url:t,method:i,name:"New API",headers:new Zt,queries:new Zt,autoStart:!0}))(T7||(T7={}));var Sa;(e=>{function t(s){return s.textValue!==void 0}e.isTextValue=t;function i(s){return typeof s=="number"}e.isNumber=i;function r(s){return typeof s=="boolean"}e.isBoolean=r;function n(s){return t(s)?"string":r(s)?"boolean":"number"}e.typeOfVariable=n;function a(s){return e.isTextValue(s)?Array.isArray(s.textValue)?s.textValue.map(o=>o.toString().padStart(s.padding??2,"0")).join(s.deliminator??":")+(s.suffix!==void 0?" "+s.suffix:""):s.textValue.toString():e.isBoolean(s)?s?"True":"False":e.isNumber(s)?parseFloat(s.toFixed(3)).toString():s.toString()}e.getDisplayedValue=a})(Sa||(Sa={}));var tM;(e=>e.all=["images","videos","colors","audios","particles","fonts","materials","variables"])(tM||(tM={}));var P7;(e=>e.all=[...tM.all,"components"])(P7||(P7={}));var D7;(e=>{function t(){return{images:new ti,videos:new ti,colors:new ti,audios:new ti,particles:new ti,fonts:new ti,materials:new ti,components:new ti,variables:new ti,userAPIs:new ti,userWebhooks:new ti}}e.defaultData=t})(D7||(D7={}));var Iu;(e=>{function t(){return{images:new ti,videos:new ti,colors:new ti,audios:new ti,particles:new ti,fonts:new ti,materials:new ti,components:new ti,variables:new ti,userAPIs:new ti,userWebhooks:new ti}}e.defaultData=t})(Iu||(Iu={}));var yo;(e=>{function t(){let s={};return s["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},No(s,ti.prototype)}e.defaultColors=t;function i(){return No({},ti.prototype)}e.defaultImages=i;function r(){return{catelogs:new ti,materials:new ti,images:new ti,videos:new ti,colors:new ti,audios:new ti,particles:new ti,fonts:new ti,variables:new Zt,userAPIs:new ti,userWebhooks:new ti,lib:Iu.defaultData()}}e.emptyData=r;function n(s){switch(s){case"number":return{value:0,name:"Number"};case"boolean":return{value:!1,name:"Boolean"};case"string":return{value:{textValue:"String value"},name:"String"};case"time":let o=[0,0,0];return{name:"Time",value:{textValue:o,deliminator:":",padding:2,suffix:"AM"},dynamicVariableType:"time",format:"HH:mm:ss",format12h24h:"12ampm",timeZone:null,hasEnd:!1,endValue:{textValue:o,deliminator:":",padding:2,suffix:"AM"},autoStart:!0,repeat:!1};case"counter":return{name:"Counter",value:0,dynamicVariableType:"counter",updateInterval:1e3,increment:1,autoStart:!0,hasEnd:!0,endValue:60,repeat:!0,randomStart:!1,range:[0,100],decimals:0};case"random":return{name:"Random",value:0,dynamicVariableType:"random",updateInterval:1e3,increment:1,autoStart:!0,isStatic:!1,hasEnd:!0,endValue:60,repeat:!0,min:0,max:100,decimals:0};default:console.error("Unknown variable type",s)}}e.defaultVariables=n;function a(s,o){if(o.format==="HH:mm:ss"){let l=Math.floor(s/3600),c=Math.floor((s-l*3600)/60),u=Math.round(s-l*3600-c*60);return{textValue:[l,c,u]}}else if(o.format==="mm:ss"){let l=Math.floor(s/60),c=Math.round(s-l*60);return{textValue:[l,c]}}else return o.format==="number"?s=Math.round(s):s=Math.round(s*1e3)/1e3,s}e.getFormattedTimerTime=a})(yo||(yo={}));var Dx;(e=>e.list=["idle","move","jump","run"])(Dx||(Dx={}));var Ix;(e=>(e.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},e.defaultDataThirdPerson={moveMode:"walk",forwardDirection:"+z",speedTranslate:1e3,speedRotate:100,runMultiplier:2,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX",""],["rotPosY",""],["rotNegX",""],["rotNegY",""],["jump","Space"],["run",""],["none","Ctrl"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:e.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new Zt,move:new Zt,jump:new Zt,run:new Zt},navmesh:{enabled:!1,ch:6,cs:6,walkableClimb:5,walkableHeight:1,walkableRadius:0,zones:"all",objects:[],helperVisible:!0,destinationHelperRadius:0,destinationHelperColor:br.fromHexAndA(3728051,1)}}))(Ix||(Ix={}));function I7(e){e.layers.forEach(t=>{if(t.type==="depth"&&t.colorA!==void 0){let i=t.colorA,r=t.colorB,n=[[i.r,i.g,i.b,i.a],[r.r,r.g,r.b,r.a]],a=[0,1];for(let o=2;o<10;o++)n.push(n[1]),a.push(1);let s={...fc(hn(t),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,t.near),far:Math.max(0,t.far),colors:n,steps:a,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(t,s)}else if(t.type==="depth"&&t.gradientType===1&&(t.near<0||t.far<0)){let i={...hn(t),near:Math.max(t.near,0),far:Math.max(t.far,0)};Object.assign(t,i)}})}function Pd(e,t){Object.values(e.shared.materials).forEach(i=>t(i))}function Dd(e,t){e.scene.objects.traverse((i,r)=>{"materials"in r?r.materials.forEach((n,a)=>{n===void 0&&(r.materials[a]=_a.defaultData(),n=r.materials[a]),typeof n!="string"&&t(n)}):"material"in r?typeof r.material!="string"&&(r.material===void 0&&(r.material=_a.defaultData()),t(r.material)):r.type==="Mesh"&&(r.material===void 0&&(r.material=_a.defaultData()),t(r.material)),"overrides"in r&&Object.values(r.overrides).forEach(n=>{n.material&&typeof n.material!="string"&&Object.getPrototypeOf(n.material)!==Tn.prototype&&t(n.material)})})}function $2e(e){Object.assign(e.scene.publish,{orbitControls:{...Px.defaultData,...hn(e.scene.publish.orbitControls)}})}function Z2e(e){Object.assign(e.scene.publish.settings,{video:{...Fd.defaultData.settings.video,...hn(e.scene.publish.settings.video)}})}function q2e(e){function t(i){if(i.layers){for(let r of Object.values(i.layers))if(r){for(let[n,a]of Object.entries(r))if((qW.includes(n)||typeof a=="boolean")&&delete r[n],n==="texture")for(let[s,o]of Object.entries(a))(G2e.includes(s)||typeof o=="boolean")&&delete a[s]}}}e.scene.objects.traverse((i,r)=>{r.states.forEach(n=>{let a=n;a.material?t(a.material):a.materials&&a.materials.forEach(s=>{t(s)})})})}function Y2e(e){e.scene.publish.withBackground=!0}function K2e(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}function X2e(e){e.scene.objects.traverse((t,i)=>{let r=i.cloner;r&&(r.radial.scale=r.radial.scale.map(n=>n+1),r.linear.scale=r.linear.scale.map(n=>n+1))})}function Q2e(e){e.scene.objects.traverse((t,i)=>{let r=i.geometry;r&&(r.type==="DodecahedronGeometry"||r.type==="IcosahedronGeometry")&&(r.detail=Math.round(r.detail))})}function J2e(e){e.scene.objects.traverse((t,i)=>{let r=e.scene.objects.unproxy().parent(t);if(r){let n=hn(e.scene.objects.data(r));n&&n.type==="Mesh"&&n.geometry.type==="BooleanGeometry"&&i.type==="Mesh"&&(i.visible=hn(i).booleanExclude!==!0)}})}function exe(e){e.scene.objects.traverse((t,i)=>{if(i.type==="Mesh"){let r=i;i.geometry.type==="NonParametricGeometry"?r.material!==void 0&&delete r.material:r.materials!==void 0&&delete r.materials}})}function txe(e){function t(r){Object.setPrototypeOf(r,Tn.prototype),r.texture&&Object.setPrototypeOf(r.texture,Tn.prototype)}function i(r){Object.setPrototypeOf(r,Tn.prototype);for(let n in r)t(r[n])}e.scene.objects.traverse((r,n)=>{n.states.forEach(a=>{let s=a;if(s.material){let o=hn(s.material).layers;i(o),s.material.layers=o}if(s.materials)for(let o=0;o<s.materials.length;o++){let l=s.materials[o],c=hn(l).layers;i(c),l.layers=c}})})}function O7(e){e.layers===void 0&&Object.assign(e,_a.defaultTwoLayerData("lambert"))}function EC(e){!e.layers||e.layers.forEach(t=>{if(t.type==="depth"&&t.colors.length===10){let i=[...t.colors];i.push(t.colors[9]);let r=[...t.steps];r.push(t.steps[9]);let n={...hn(t),colors:i,steps:r};Object.assign(t,n)}})}function ixe(e){e.scene.objects.traverse((t,i)=>{i.type==="Mesh"&&(i.geometry.type==="BooleanGeometry"||i.geometry.type==="SubdivGeometry")&&(i.geometry.phongAngle=35)})}function R7(e){e.scene.objects.traverse((t,i)=>{"materials"in i?i.materials.forEach(r=>{typeof r!="string"&&EC(r)}):"material"in i&&typeof i.material!="string"&&EC(i.material)}),Object.values(e.shared.materials).forEach(t=>EC(t))}function rxe(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse((t,i)=>{(i.type==="DirectionalLight"||i.type==="SpotLight")&&(i.shadowResolution=1024,i.shadowRadius=1,i.depth=1e5)}),e.shared.penumbraSize=new Array(5).fill(.5)}function nxe(e){e.shared.audios=No({},ti.prototype)}function axe(e){e.shared.videos=No({},ti.prototype)}function sxe(e){let t=e.shared.materials;Object.entries(t).forEach(([i,r])=>{if(!r.layers){let n={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(t,{[i]:n})}})}function oxe(e){Object.entries(hn(e.shared.images)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.images[t]}),Object.entries(hn(e.shared.audios)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.audios[t]})}function lxe(e){e.scene.publish.settings.web.preload=!1}function k7(e){e.layers&&e.layers.forEach(t=>{t.type==="depth"&&t.num!==void 0&&(t.colors=t.colors.slice(0,t.num),t.steps=t.steps.slice(0,t.num),delete t.num)})}function L7(e){e.layers&&e.layers.forEach(t=>{W2e(t)&&t.isMask===void 0&&(t.isMask=!1),(t.type==="texture"||t.type==="video")&&t.blending===void 0&&(t.blending=0),(t.type==="noise"||t.type==="displace"&&t.displacementType==="noise")&&(t.voronoiStyle===void 0&&(t.voronoiStyle=0),t.highCut===void 0&&(t.highCut=1),t.lowCut===void 0&&(t.lowCut=0),t.smoothness===void 0&&(t.smoothness=.3),t.seed===void 0&&(t.seed=0),t.quality===void 0&&(t.quality=1))})}function cxe(e){e.shared.fonts=No({},ti.prototype)}function uxe(e){return e.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function dxe(e){let t=[];e.scene.objects.traverse((i,r)=>{let n=r;if(n.type==="TextFrame"){let a=_a.defaultTwoLayerData("phong"),s=typeof n.color=="string"?e.shared.colors[n.color]:n.color;a.layers[1].data.color={r:s.r,g:s.g,b:s.b},a.layers[1].data.alpha=n.alpha;let o=uxe(n.font);e.shared.fonts[o]===void 0&&(e.shared.fonts[o]={name:o});let l={name:n.name,...sa.defaultData,...pf.defaultData,flatShading:!1,wireframe:!1,geometry:{...ff.defaultData("TextGeometry"),width:n.width,height:n.height,font:o,depth:0,horizontalAlign:n.horizontalAlign,verticalAlign:n.verticalAlign,fontSize:n.fontSize*1.40625,lineHeight:n.lineHeight/1.40625,letterSpacing:n.letterSpacing-1,text:n.text,textTransform:n.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:a,states:hn(n.states),events:hn(n.events),visible:n.visible,raycastLock:n.raycastLock,position:n.position,rotation:n.rotation,scale:n.scale,hiddenMatrix:n.hiddenMatrix},c=hn(e.scene.objects).parent(i);e.scene.objects.insertAfter(c??null,i,[{id:i+"new",data:l,children:[]}]),t.push(i)}}),t.forEach(i=>{e.scene.objects.delete(i)})}function hxe(e){let t={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};e.scene.objects.traverse((i,r)=>{r.events.forEach(n=>{if(t[Number(n.type)])if(Object.assign(n,{type:t[Number(n.type)]}),n.type==="Audio"&&"audioEvent"in n&&(Object.assign(n,{playAudio:n.audioEvent}),delete n.audioEvent),n.type==="GameControl")Object.assign(n,{gameActions:{idle:new Zt,move:new Zt,jump:new Zt}});else{let a=new Zt;Object.assign(n,{actions:a}),(n.type==="MouseDown"||n.type==="MouseUp"||n.type==="KeyDown"||n.type==="KeyUp")&&"url"in n&&a.push({fi:0,id:kt.generateUUID(),data:{type:"Link",url:n.url,delay:0}}),"targets"in n&&(n.targets.forEach((s,o,l)=>{let c={state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4},u={easing:s.easing,duration:s.duration};s.easing===6?Object.assign(u,fc(s,"mass","stiffness","damping","velocity")):s.easing===5&&Object.assign(u,{control1:{...s.control1},control2:{...s.control2}});let d={repeat:s.repeat?-1:0,delay:s.delay,delayDirection:s.delayDirection,direction:s.cycle&&s.rewind?"pingpong-rewind":s.cycle?"pingpong":"normal"},h={state:s.state,...d,...u},f={allowSlerp:!0,type:"Transition",object:s.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new Zt({fi:0,id:kt.generateUUID(),data:c},{fi:1,id:kt.generateUUID(),data:h})};a.push({fi:l,id:o,data:f})}),delete n.targets)}})})}function fxe(e){e.scene.objects.traverse((t,i)=>{function r(n,a){var l;let s=new Zt,o=[];if(i.events.forEach((c,u,d)=>{if(c.type==="Audio"&&c.trigger===a){let h;o.push(u),c.interaction==="play"?h={...fc(c,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in c?c.after:void 0,toggle:"after"in c?c.toggle:void 0,type:"Audio"}:(c.interaction==="pause"||c.interaction==="stop")&&(h={...fc(c,"interaction","delay","object","playAudio"),type:"Audio"}),h&&s.push({fi:d,id:u,data:h})}}),o.forEach(c=>i.events.delete(c)),s.length){let c=(l=i.events.find(u=>u.type===n))==null?void 0:l.data;c?"actions"in c&&c.actions.insertBefore(null,s):i.events.insertBefore(null,[{id:kt.generateUUID(),data:{type:n,actions:s}}])}}r("Start","start"),r("MouseDown","mouseDown"),r("MouseUp","mouseUp"),r("KeyDown","keyDown"),r("KeyUp","keyUp")})}function B7(e){var i;let t=(i=e.layers.find(r=>r.type==="light"))==null?void 0:i.data;if((t==null?void 0:t.category)==="basic"){let r=ea.defaultData("light","phong"),n=t;Object.assign(n,r),n.visible=!1}}function N7(e){Pd(e,B7),Dd(e,B7)}function pxe(e){e.scene.objects.traverse((t,i)=>{i.type==="Mesh"&&i.geometry.type==="SubdivGeometry"&&(i.geometry.scaleBaked||(i.geometry.scaleBaked=[1,1,1]))})}function mxe(e){e.scene.objects.traverse((t,i)=>{(i.type==="Empty"||i.type==="Mesh")&&i.cloner&&!i.cloner.randomnessObject&&!i.cloner.toObject&&!i.cloner.randomness&&(i.cloner={...i.cloner,toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}})})}function vxe(e){e.scene.objects.traverse((t,i)=>{i.type==="Mesh"&&i.geometry.type==="NonParametricGeometry"&&!("material"in i)&&!("materials"in i)&&(i.material=_a.defaultTwoLayerData("phong"))})}function gxe(e){e.scene.publish.orbitControls.autoZoom===void 0&&(e.scene.publish.orbitControls.autoZoom=!1),e.scene.objects.traverse((t,i)=>{(i.type==="OrthographicCamera"||i.type==="PerspectiveCamera")&&(i.orthographic.autoZoom===void 0&&(i.orthographic.autoZoom=!1),i.orthographic.autoZoomFrustumSize===void 0&&(i.orthographic.autoZoomFrustumSize=790))})}function yxe(e){e.scene.objects.traverse((t,i)=>{i.pathSnapping===void 0&&(i.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),i.pathSnapping.offset===void 0&&(i.pathSnapping.offset=0)})}function bxe(e){e.scene.publish.mouseEventTarget===void 0&&(e.scene.publish.mouseEventTarget="canvas"),e.scene.publish.settings.web.hint===void 0&&(e.scene.publish.settings.web.hint=!1)}function wxe(e){let{video:t}=e.scene.publish.settings;t.format==="gif"&&t.fps>48&&(t.fps=15)}function xxe(e){e.scene.objects.traverse((t,i)=>{i.events.forEach(r=>{r.type==="GameControl"&&(r.resetYPosition=Math.abs(r.resetYPosition-i.position[1]))})})}function _xe(e){let t=e.scene.environment.usePhysics;e.scene.objects.traverse((i,r)=>{t&&r.physics===null?r.collision=!1:r.collision="visibility"})}function Sxe(e){e.scene.objects.traverse((t,i)=>{i.events.forEach(r=>{r.type==="GameControl"&&(r.navmesh=Ix.defaultDataThirdPerson.navmesh)})})}function Cxe(e){e.scene.styles||(e.scene.styles=vf.defaultData())}function F7(e){e.layers.forEach(t=>{t.type==="light"&&t.category!=="toon"&&t.occlusion===void 0&&(t.occlusion=!0)})}function Exe(e){e.scene.environment.ambientLight.occlusion===void 0&&(e.scene.environment.ambientLight.occlusion=!1),e.scene.environment.ambientLight.aoFullRes===void 0&&(e.scene.environment.ambientLight.aoFullRes=!1),e.scene.environment.ambientLight.radius===void 0&&(e.scene.environment.ambientLight.radius=256),e.scene.environment.ambientLight.bias===void 0&&(e.scene.environment.ambientLight.bias=.5),e.scene.environment.ambientLight.aoColor===void 0&&(e.scene.environment.ambientLight.aoColor={r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}),Dd(e,F7),Pd(e,F7)}function Axe(e){e.scene.objects.traverse((t,i)=>{i.events.forEach(r=>{r.type==="GameControl"&&Object.assign(r.gameActions,{run:new Zt})})})}function Mxe(e){e.scene.objects.traverse((t,i)=>{i.events.forEach(r=>{r.type==="GameControl"&&(r.keyAssignments=[...r.keyAssignments,["run",""],["none","Ctrl"]])})})}function z7(e){e.layers&&e.layers.forEach(t=>{t.type==="light"&&t.bumpMapIntensity===void 0&&(t.bumpMapIntensity=5)})}function Txe(e,t){if(t<1&&(Dd(e,I7),Pd(e,I7),e.schema=1),t<2&&($2e(e),e.schema=2),t<3&&(q2e(e),e.schema=3),t<4&&(Y2e(e),e.schema=4),t<5&&(K2e(e),e.schema=5),t<6&&(X2e(e),e.schema=6),t<7&&(Q2e(e),e.schema=7),t<8&&(e.schema=8),t<9&&(R7(e),e.schema=9),t<10&&(ixe(e),e.schema=10),t<11&&(rxe(e),e.schema=11),t<12&&(R7(e),e.schema=12),t<13&&(nxe(e),e.schema=13),t<14&&(sxe(e),e.schema=14),t<15&&(oxe(e),e.schema=15),t<16&&(lxe(e),e.schema=16),t<17&&(Dd(e,k7),Pd(e,k7),e.schema=17),t<18&&(Dd(e,O7),Pd(e,O7),e.schema=18),t<19&&(Z2e(e),e.schema=19),t<20&&(cxe(e),dxe(e),e.schema=20),t<21&&(hxe(e),fxe(e),e.schema=21),t<22&&(N7(e),e.schema=22),t<23&&(pxe(e),e.schema=23),t<24&&(mxe(e),e.schema=24),(t<25||e.shared.videos===void 0)&&(axe(e),t<25&&(e.schema=25)),t<26&&(J2e(e),e.schema=26),t<27&&(exe(e),e.schema=27),t<28&&(N7(e),e.schema=28),t<29&&(txe(e),e.schema=29),t<30&&(vxe(e),e.schema=30),t<31&&(gxe(e),e.schema=31),t<33&&(yxe(e),e.schema=33),t<34&&(bxe(e),e.schema=34),t<35&&(wxe(e),e.schema=35),t<36&&(xxe(e),e.schema=36),t<37&&(_xe(e),e.schema=37),t<38&&(Dd(e,L7),Pd(e,L7),e.schema=38),t<39&&(Sxe(e),e.schema=39),t<40&&(Cxe(e),e.schema=40),t<41&&(Exe(e),e.schema=41),t<42&&(Axe(e),e.schema=42),t<43&&(Mxe(e),e.schema=43),t<99){Dd(e,z7),Pd(e,z7),e.scene.publish.playCamera===null&&(e.scene.publish.playCamera=Xv);let i=hn(e.scene.objects),r=e.scene.objects;e.scene.publish.playPage=Rg,r.insertBefore(null,null,[{id:Rg,data:{...bv.defaultData,backgroundColor:e.scene.backgroundColor,fog:e.scene.fog,postprocessing:e.scene.postprocessing,ao:fc(e.scene.environment.ambientLight,"occlusion","aoFullRes","radius","bias","aoColor"),publish:{playCamera:e.scene.publish.playCamera,gameControlObject:e.scene.publish.gameControlObject},shadow:fc(e.scene.environment.ambientLight,"softShadowQuality"),globalPhysics:{...gv.defaultData,...fc(e.scene.environment,"usePhysics","gravity")},camera:hn(e.scene.ownerCamera)??bv.defaultData.camera,name:"Scene"},children:[]}]);for(let s of i)s.id!==gf.TRASH_CAN_ID&&r.move(Rg,s.fi,s.id);let n=0,a=0;e.shared.penumbraSize&&e.scene.objects.traverse((s,o)=>{o.type==="DirectionalLight"?(o.penumbraSize=e.shared.penumbraSize[Math.min(n,2)],n+=1):o.type==="SpotLight"&&(o.penumbraSize=e.shared.penumbraSize[3+Math.min(a,1)],a+=1),(o.physics===void 0||o.physics===null)&&o.type!=="Instance"&&(o.physics={},Object.assign(o.physics,vv.defaultData)),o.physics!==void 0&&o.physics!==null&&(o.physics.enabled=o.collision??"visibility",delete o.collision)}),e.schema=99}}function V7(e){e.layers&&e.layers.forEach(t=>{t.type==="light"&&t.alphaOverride===void 0&&(t.alphaOverride=1)})}function Pxe(e){e.scene.objects.traverse((t,i)=>{let r=i.geometry;r&&r.type==="PathGeometry"&&(r.extrusion.capType="flat",r.extrusion.bevel=50,r.extrusion.bevelSides=6,r.extrusion.shape.type==="Custom"&&(r.extrusion.shape.shapeQuality="low"))})}function Dxe(e){var t;Array.isArray(hn(e.events))&&((t=e.events)==null||t.forEach(i=>{"disabled"in i||(i.disabled=!1),(i.type==="MouseDown"||i.type==="MouseUp"||i.type==="MousePress")&&(i.mode=i.mode||"Object")}))}var om=180/Math.PI;function U7(e){e.rotation=e.rotation.slice(0,3).map(t=>t*om)}function QW(e){var i,r;U7(e),e.type==="Page"&&U7(e.camera),(i=e.states)==null||i.forEach(n=>{n.rotation===void 0||n.rotation===null||(n.rotation=n.rotation.slice(0,3).map(a=>a*om))});let t=e.geometry;t&&t.type==="SphereGeometry"&&(t.thetaLength=(t.thetaLength??180)*om),t&&t.type==="TorusGeometry"&&(t.arc=t.arc*om),t&&t.type==="PathGeometry"&&(t.extrusion.angle*=om,t.extrusion.twist*=om),e.type==="Mesh"&&e.geometry.type==="TextGeometry"&&(e.geometry.text={textValue:e.geometry.text}),Array.isArray(hn(e.events))&&((r=e.events)==null||r.forEach(n=>{(n.type==="MouseDown"||n.type==="MouseUp"||n.type==="MousePress"||n.type==="KeyDown"||n.type==="KeyUp"||n.type==="KeyPress"||n.type==="Collision"||n.type==="Trigger")&&(n.runMode=n.toggle?"Toggle":"Repeat")}))}function Ixe(e){e.shared.variables=No({},ti.prototype)}function Oxe(e){let t=hn(e.shared.variables);e.shared.variables=No(Object.entries(t??{}).map(([i,r],n)=>({fi:n,id:i,data:r})),Zt.prototype)}var au=115;function JW(e,t){t(e.data);for(let i of e.children)JW(i,t)}function Rxe(e){let t=e.schema??104;t!==au&&t<105&&(JW(e.asset,QW),e.schema=105)}function kxe(e){e.shared.particles=No({},ti.prototype),e.shared.lib&&(e.shared.lib.particles=Iu.defaultData().particles)}function Lxe(e){e.scene.objects.traverse((t,i)=>{i.type==="Particle"&&typeof i.renderMaterial.size=="number"&&Object.assign(i.renderMaterial,{size:[i.renderMaterial.size,i.renderMaterial.size]})})}function Bxe(e){e.scene.objects.traverse((t,i)=>{i.type==="Page"&&(i.postprocessing.depthOfField.focusDistance=100,i.postprocessing.depthOfField.focalLength=20,i.postprocessing.depthOfField.bokehScale=5)})}function Nxe(e){e.scene.objects.traverse((t,i)=>{var r;Array.isArray(hn(i.events))!==!1&&((r=i.events)==null||r.forEach(n=>{var s,o,l,c,u,d,h,f,p,m,v;let a=n.runMode;n.type==="MouseDown"||n.type==="MouseUp"||n.type==="KeyDown"||n.type==="KeyUp"||n.type==="Collision"||n.type==="Trigger"?(s=n.actions)==null||s.forEach(y=>{y.type==="Transition"&&(y.runMode=a??"Repeat"),(y.type==="Animation"||y.type==="SwitchCamera")&&(y.runMode=a==="Toggle"?"Toggle":"Normal")}):n.type==="MouseHover"||n.type==="MousePress"||n.type==="KeyPress"?(o=n.actions)==null||o.forEach(y=>{(y.type==="Transition"||y.type==="Animation"||y.type==="SwitchCamera")&&(y.runMode="Toggle")}):n.type==="GameControl"?(delete n.actions,Object.keys(n.gameActions).forEach(y=>{var x;(x=n.gameActions[y])==null||x.forEach(b=>{b.type==="Transition"&&(b.runMode="Repeat"),b.type==="Animation"&&(b.runMode="Normal")})})):n.type==="DragDrop"?(delete n.actions,(c=(l=n.dragDropActions)==null?void 0:l.drag)==null||c.forEach(y=>{(y.type==="Transition"||y.type==="Animation"||y.type==="SwitchCamera")&&(y.runMode="Toggle")}),(d=(u=n.dragDropActions)==null?void 0:u.drop)==null||d.forEach(y=>{(y.type==="Transition"||y.type==="Animation"||y.type==="SwitchCamera")&&(y.runMode="Toggle")})):n.type==="Resize"?(delete n.actions,(h=n.breakpoints)==null||h.forEach(y=>{var x;(x=y.actions)==null||x.forEach(b=>{(b.type==="Transition"||b.type==="Animation"||b.type==="SwitchCamera")&&(b.runMode="Toggle")})})):n.type==="Start"?(f=n.actions)==null||f.forEach(y=>{y.type==="Transition"&&(y.runMode="Once"),(y.type==="Animation"||y.type==="SwitchCamera")&&(y.runMode="Normal")}):n.type==="VariableChange"||n.type==="Scroll"?(p=n.actions)==null||p.forEach(y=>{y.type==="Transition"&&(y.runMode="Repeat"),(y.type==="Animation"||y.type==="SwitchCamera")&&(y.runMode="Normal")}):n.type==="Conditional"&&(delete n.actions,(m=n.inActions)==null||m.forEach(y=>{y.type==="Transition"&&(y.runMode="Repeat"),(y.type==="Animation"||y.type==="SwitchCamera")&&(y.runMode="Normal")}),(v=n.outActions)==null||v.forEach(y=>{y.type==="Transition"&&(y.runMode="Repeat"),(y.type==="Animation"||y.type==="SwitchCamera")&&(y.runMode="Normal")}))}))})}function Fxe(e){e.shared.userAPIs=No({},ti.prototype),e.shared.userWebhooks=No({},ti.prototype),e.shared.lib&&(e.shared.lib.userAPIs=Iu.defaultData().userAPIs,e.shared.lib.userWebhooks=Iu.defaultData().userWebhooks)}function eG(e){let t=e.schema??0;if(t!==au){console.warn("updating from ",t,"to ",au),Txe(e,t),t<100&&(e.scene.publish.joystickSizeAndXYOffset===void 0&&(e.scene.publish.joystickSizeAndXYOffset=Fd.defaultData.joystickSizeAndXYOffset),e.schema=100),t<101&&(Dd(e,V7),Pd(e,V7),e.schema=101),t<102&&(Pxe(e),e.schema=102),t<104&&(e.shared.catelogs=new ti,e.shared.lib=Iu.defaultData(),e.schema=104),t<105&&(Ixe(e),e.scene.objects.traverse((i,r)=>{QW(r)}),e.schema=105);for(let i of Object.values(e.shared.lib.components))Rxe(i);t<106&&(Oxe(e),e.schema=106),t<107&&(e.shared.lib.variables=Iu.defaultData().variables,e.schema=107),t<109&&(kxe(e),e.schema=109),t<110&&(Lxe(e),e.schema=110),t<111&&(e.scene.objects.traverse((i,r)=>{Dxe(r)}),e.schema=111),t<112&&(Bxe(e),e.schema=112),t<113&&(Nxe(e),e.schema=113),t<114&&(e.scene.publish.settings.web.imageQuality===void 0&&(e.scene.publish.settings.web.imageQuality=70),e.schema=114),t<115&&(Fxe(e),e.schema=115)}}var Ox;(e=>{e.defaultData={schema:au,scene:gf.defaultData,frames:new ti().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",kg.defaultData),shared:{...yo.emptyData(),colors:yo.defaultColors()}},e.emptyDataForImports=function(){let a=gf.emptyDataWithPage();return{schema:au,scene:a,frames:new ti().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",kg.defaultData),shared:{...yo.emptyData(),colors:yo.defaultColors(),images:yo.defaultImages()}}},e.emptyData=function(){return{schema:au,scene:gf.emptyDataWithPage(),frames:new ti().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",kg.defaultData),shared:yo.emptyData()}},e.clipboard2dData=function(){return{schema:au,scene:gf.emptyData(),frames:new ti,shared:yo.emptyData()}},e.collabHelper={..._A,updateSchema(a){return(a.schema??0)<au?v1(a,eG):(a.schema??0)-au}};function t(a){let s=e.collabHelper.updateSchema(a);return typeof s=="number"?s===0?a:null:s.data}e.updateSchemaDirectly=t;function i(a){return{...a,shared:{...a.shared,lib:Iu.defaultData()}}}e.withoutLib=i;function r(a,s){let o=a.scene.objects.get(s);if(o&&o.data.type==="Component")return o;{let l=a.shared.lib.components[s];if(l)return l.asset}}e.getComponentData=r;function n(a){let s=Object.values(a.shared.userAPIs);for(let o of s){let l=o.headers;for(let c of l)if(c.data.key.toLowerCase()==="authorization"&&c.data.value!=="")return!0}return!1}e.hasSensitiveData=n})(Ox||(Ox={}));var iM;(e=>e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",name:"empty"})(iM||(iM={}));var H7;(e=>{function t(i){return!0}e.is=t})(H7||(H7={}));var Rx;(e=>{e.defaultData={position:[0,0],scale:[1,1],rotation:0,shear:[0,0]};function t(r,n){return{position:(n==null?void 0:n.position)??r.position,rotation:(n==null?void 0:n.rotation)??r.rotation,scale:(n==null?void 0:n.scale)??r.scale,shear:(n==null?void 0:n.shear)??r.shear}}e.merge=t;function i(r,n){return fW({position:bu.isEqual(r.position,n.position)?void 0:n.position,rotation:r.rotation===n.rotation?void 0:n.rotation,scale:bu.isEqual(r.scale,n.scale)?void 0:n.scale,shear:r.shear&&n.shear&&bu.isEqual(r.shear,n.shear)?void 0:n.shear})}e.diff=i})(Rx||(Rx={}));var rM;(e=>e.defaultData={horizontalConstraint:0,verticalConstraint:0})(rM||(rM={}));var j7;(e=>e.defaultData={direction:"row",wrap:"unwrap",align:"top-left",gap:10,rowGap:10,autoGap:!1,autoRowGap:!1,leftPadding:8,rightPadding:8,topPadding:8,bottomPadding:8})(j7||(j7={}));var kx;(e=>e.defaultData={opacity:1,fill:{color:br.fromHexAndA(Qs,1),enabled:!0},stroke:{color:br.from0to1([0,0,0,1]),thickness:1,enabled:!1,mode:"inside"},layerBlur:{radius:2,enabled:!1},backgroundBlur:{radius:2,enabled:!1},dropShadow:{offset:[10,10],blurRadius:10,color:br.from0to1([0,0,0,1]),enabled:!1,spread:0},innerShadow:{offset:[10,10],blurRadius:10,color:br.from0to1([0,0,0,1]),enabled:!1,spread:0}})(kx||(kx={}));var yf;(e=>{function t(s,o){return{name:o}}e.newEmpty=t;function i(s,o){if(o===void 0)return s;let l={...s},c=["width","height","cornerRadius"];for(let u of c)u in l&&u in o&&o[u]!==void 0&&Object.assign(l,{[u]:o[u]});return l}function r(s,o){if(o===void 0)return s;let l={...s};return"fill"in l&&"fill"in o&&o.fill!==void 0&&Object.assign(l,{fill:{...l.fill,...o.fill}}),"stroke"in l&&"stroke"in o&&o.stroke!==void 0&&Object.assign(l,{stroke:{...l.stroke,...o.stroke}}),"layerBlur"in l&&"layerBlur"in o&&o.layerBlur!==void 0&&Object.assign(l,{layerBlur:{...l.layerBlur,...o.layerBlur}}),"backgroundBlur"in l&&"backgroundBlur"in o&&o.backgroundBlur!==void 0&&Object.assign(l,{backgroundBlur:{...l.backgroundBlur,...o.backgroundBlur}}),"dropShadow"in l&&"dropShadow"in o&&o.dropShadow!==void 0&&Object.assign(l,{dropShadow:{...l.dropShadow,...o.dropShadow}}),"innerShadow"in l&&"innerShadow"in o&&o.innerShadow!==void 0&&Object.assign(l,{innerShadow:{...l.innerShadow,...o.innerShadow}}),l}function n(s,o){if(o===void 0)return s;let l={...s};return Object.assign(l,Rx.merge(l,o)),l=i(l,o),l=r(l,o),l}e.patch=n;function a(s,o){let l,c=[];for(let[u,d]of Object.entries(o))u!=="name"&&(l===void 0&&(l={path:[],props:{},type:0},c.push(l)),l.props[u]=d);return c}e.toOps=a})(yf||(yf={}));var b1;(e=>e.defaultData={...Rx.defaultData,...rM.defaultData,states:new Zt,events:new Zt,visible:!0,raycastLock:!1})(b1||(b1={}));var wv;(e=>e.defaultData={...b1.defaultData,...kx.defaultData})(wv||(wv={}));var Lx;(e=>e.defaultData={cornerRadius:[0,0,0,0]})(Lx||(Lx={}));var nM;(e=>e.defaultData={...wv.defaultData,type:"ellipse2d",width:100,height:100,name:"Ellipse"})(nM||(nM={}));var w1;(e=>e.defaultData={...wv.defaultData,...Lx.defaultData,type:"rectangle2d",width:100,height:100,name:"Rectangle"})(w1||(w1={}));var aM;(e=>e.defaultData={...wv.defaultData,type:"text2d",width:100,height:100,fontSize:12,lineHeight:1.2,letterSpacing:0,text:{textValue:"Hello world"},horizontalAlign:1,verticalAlign:1,textTransform:1,font:"Roboto_regular",name:"Text"})(aM||(aM={}));var sM;(e=>e.defaultData={...wv.defaultData,type:"path2d",path:"",name:"Path"})(sM||(sM={}));var W7;(e=>{function t(i){return i.type==="ellipse2d"||i.type==="rectangle2d"||i.type==="text2d"||i.type==="vector2d"||i.type==="path2d"}e.is=t})(W7||(W7={}));var Bx;(e=>e.defaultData={...b1.defaultData,name:"Group",type:"group2d"})(Bx||(Bx={}));var oM;(e=>e.defaultData=()=>({...b1.defaultData,...Lx.defaultData,...kx.defaultData,name:"Frame",type:"frame2d",clipped:!0,width:200,height:200,fill:{color:br.fromHexAndA(4737101,1),enabled:!0},stroke:{color:br.fromHexAndA(0,1),thickness:1,enabled:!1,mode:"inside"},backgroundBlur:{radius:2,enabled:!1},layerBlur:{radius:2,enabled:!1}}))(oM||(oM={}));var Bf;(e=>{function t(s){switch(s){case"rectangle2d":return{...w1.defaultData};case"ellipse2d":return{...nM.defaultData};case"text2d":return{...aM.defaultData};case"vector2d":return{...w1.defaultData};case"path2d":return{...sM.defaultData};case"frame2d":return{...oM.defaultData()};case"group2d":return{...Bx.defaultData}}}e.defaultData=t;function i(s){return"width"in s&&"height"in s?[typeof s.width=="number"?s.width*.5:0,typeof s.height=="number"?s.height*.5:0]:[0,0]}e.getPivot=i;function r(s){return s.type==="rectangle2d"||s.type==="ellipse2d"||s.type==="text2d"||s.type==="frame2d"}e.isResizeable=r;function n(s){return s.type==="frame2d"&&s.autoLayout!==void 0}e.isAutoLayoutable=n;function a(s){return s.type==="rectangle2d"||s.type==="frame2d"}e.hasCorners=a})(Bf||(Bf={}));var lM;(e=>(e.defaultData={name:"UI",type:"scene2d",objects:new xa},e.emptyData=function(){return{type:"scene2d",objects:new xa}}))(lM||(lM={}));function bf(e,t=!1){let i=e[0].index!==null,r=new Set(Object.keys(e[0].attributes)),n=new Set(Object.keys(e[0].morphAttributes)),a={},s={},o=e[0].morphTargetsRelative,l=new Kt,c=0;for(let u=0;u<e.length;++u){let d=e[u],h=0;if(i!==(d.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let f in d.attributes){if(!r.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;a[f]===void 0&&(a[f]=[]),a[f].push(d.attributes[f]),h++}if(h!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". Make sure all geometries have the same number of attributes."),null;if(o!==d.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let f in d.morphAttributes){if(!n.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+".  .morphAttributes must be consistent throughout all geometries."),null;s[f]===void 0&&(s[f]=[]),s[f].push(d.morphAttributes[f])}if(t){let f;if(i)f=d.index.count;else if(d.attributes.position!==void 0)f=d.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". The geometry must have either an index or a position attribute"),null;l.addGroup(c,f,u),c+=f}}if(i){let u=0,d=[];for(let h=0;h<e.length;++h){let f=e[h].index;for(let p=0;p<f.count;++p)d.push(f.getX(p)+u);u+=e[h].attributes.position.count}l.setIndex(d)}for(let u in a){let d=G7(a[u]);if(!d)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+u+" attribute."),null;l.setAttribute(u,d)}for(let u in s){let d=s[u][0].length;if(d===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[u]=[];for(let h=0;h<d;++h){let f=[];for(let m=0;m<s[u].length;++m)f.push(s[u][m][h]);let p=G7(f);if(!p)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+u+" morphAttribute."),null;l.morphAttributes[u].push(p)}}return l}function G7(e){let t,i,r,n=0;for(let o=0;o<e.length;++o){let l=e[o];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(t===void 0&&(t=l.array.constructor),t!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(i===void 0&&(i=l.itemSize),i!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(r===void 0&&(r=l.normalized),r!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;n+=l.array.length}let a=new t(n),s=0;for(let o=0;o<e.length;++o)a.set(e[o].array,s),s+=e[o].array.length;return new ui(a,i,r)}var zxe=Math.pow(2,-24),kb=class{constructor(){}};function ac(e,t,i){return i.min.x=t[e],i.min.y=t[e+1],i.min.z=t[e+2],i.max.x=t[e+3],i.max.y=t[e+4],i.max.z=t[e+5],i}function $7(e){let t=-1,i=-1/0;for(let r=0;r<3;r++){let n=e[r+3]-e[r];n>i&&(i=n,t=r)}return t}function Z7(e,t){t.set(e)}function q7(e,t,i){let r,n;for(let a=0;a<3;a++){let s=a+3;r=e[a],n=t[a],i[a]=r<n?r:n,r=e[s],n=t[s],i[s]=r>n?r:n}}function Lb(e,t,i){for(let r=0;r<3;r++){let n=t[e+2*r],a=t[e+2*r+1],s=n-a,o=n+a;s<i[r]&&(i[r]=s),o>i[r+3]&&(i[r+3]=o)}}function R0(e){let t=e[3]-e[0],i=e[4]-e[1],r=e[5]-e[2];return 2*(t*i+i*r+r*t)}function Vxe(e,t){if(!e.index){let i=e.attributes.position.count,r=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,n;i>65535?n=new Uint32Array(new r(4*i)):n=new Uint16Array(new r(2*i)),e.setIndex(new ui(n,1));for(let a=0;a<i;a++)n[a]=a}}function Uxe(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let t=[],i=new Set;for(let n of e.groups)i.add(n.start),i.add(n.start+n.count);let r=Array.from(i.values()).sort((n,a)=>n-a);for(let n=0;n<r.length-1;n++){let a=r[n],s=r[n+1];t.push({offset:a/3,count:(s-a)/3})}return t}function AC(e,t,i,r,n=null){let a=1/0,s=1/0,o=1/0,l=-1/0,c=-1/0,u=-1/0,d=1/0,h=1/0,f=1/0,p=-1/0,m=-1/0,v=-1/0,y=n!==null;for(let x=t*6,b=(t+i)*6;x<b;x+=6){let w=e[x+0],S=e[x+1],_=w-S,E=w+S;_<a&&(a=_),E>l&&(l=E),y&&w<d&&(d=w),y&&w>p&&(p=w);let C=e[x+2],A=e[x+3],M=C-A,T=C+A;M<s&&(s=M),T>c&&(c=T),y&&C<h&&(h=C),y&&C>m&&(m=C);let P=e[x+4],D=e[x+5],k=P-D,L=P+D;k<o&&(o=k),L>u&&(u=L),y&&P<f&&(f=P),y&&P>v&&(v=P)}r[0]=a,r[1]=s,r[2]=o,r[3]=l,r[4]=c,r[5]=u,y&&(n[0]=d,n[1]=h,n[2]=f,n[3]=p,n[4]=m,n[5]=v)}function Hxe(e,t,i,r){let n=1/0,a=1/0,s=1/0,o=-1/0,l=-1/0,c=-1/0;for(let u=t*6,d=(t+i)*6;u<d;u+=6){let h=e[u+0];h<n&&(n=h),h>o&&(o=h);let f=e[u+2];f<a&&(a=f),f>l&&(l=f);let p=e[u+4];p<s&&(s=p),p>c&&(c=p)}r[0]=n,r[1]=a,r[2]=s,r[3]=o,r[4]=l,r[5]=c}function jxe(e,t,i,r,n){let a=i,s=i+r-1,o=n.pos,l=n.axis*2;for(;;){for(;a<=s&&t[a*6+l]<o;)a++;for(;a<=s&&t[s*6+l]>=o;)s--;if(a<s){for(let c=0;c<3;c++){let u=e[a*3+c];e[a*3+c]=e[s*3+c],e[s*3+c]=u;let d=t[a*6+c*2+0];t[a*6+c*2+0]=t[s*6+c*2+0],t[s*6+c*2+0]=d;let h=t[a*6+c*2+1];t[a*6+c*2+1]=t[s*6+c*2+1],t[s*6+c*2+1]=h}a++,s--}else return a}}var Jc=32,Wxe=(e,t)=>e.candidate-t.candidate,od=new Array(Jc).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),Bb=new Float32Array(6);function Gxe(e,t,i,r,n,a){let s=-1,o=0;if(a===0)s=$7(t),s!==-1&&(o=(t[s]+t[s+3])/2);else if(a===1)s=$7(e),s!==-1&&(o=$xe(i,r,n,s));else if(a===2){let l=R0(e),c=1.25*n,u=r*6,d=(r+n)*6;for(let h=0;h<3;h++){let f=t[h],p=(t[h+3]-f)/Jc;if(n<Jc/4){let m=[...od];m.length=n;let v=0;for(let x=u;x<d;x+=6,v++){let b=m[v];b.candidate=i[x+2*h],b.count=0;let{bounds:w,leftCacheBounds:S,rightCacheBounds:_}=b;for(let E=0;E<3;E++)_[E]=1/0,_[E+3]=-1/0,S[E]=1/0,S[E+3]=-1/0,w[E]=1/0,w[E+3]=-1/0;Lb(x,i,w)}m.sort(Wxe);let y=n;for(let x=0;x<y;x++){let b=m[x];for(;x+1<y&&m[x+1].candidate===b.candidate;)m.splice(x+1,1),y--}for(let x=u;x<d;x+=6){let b=i[x+2*h];for(let w=0;w<y;w++){let S=m[w];b>=S.candidate?Lb(x,i,S.rightCacheBounds):(Lb(x,i,S.leftCacheBounds),S.count++)}}for(let x=0;x<y;x++){let b=m[x],w=b.count,S=n-b.count,_=b.leftCacheBounds,E=b.rightCacheBounds,C=0;w!==0&&(C=R0(_)/l);let A=0;S!==0&&(A=R0(E)/l);let M=1+1.25*(C*w+A*S);M<c&&(s=h,c=M,o=b.candidate)}}else{for(let y=0;y<Jc;y++){let x=od[y];x.count=0,x.candidate=f+p+y*p;let b=x.bounds;for(let w=0;w<3;w++)b[w]=1/0,b[w+3]=-1/0}for(let y=u;y<d;y+=6){let x=~~((i[y+2*h]-f)/p);x>=Jc&&(x=Jc-1);let b=od[x];b.count++,Lb(y,i,b.bounds)}let m=od[Jc-1];Z7(m.bounds,m.rightCacheBounds);for(let y=Jc-2;y>=0;y--){let x=od[y],b=od[y+1];q7(x.bounds,b.rightCacheBounds,x.rightCacheBounds)}let v=0;for(let y=0;y<Jc-1;y++){let x=od[y],b=x.count,w=x.bounds,S=od[y+1].rightCacheBounds;b!==0&&(v===0?Z7(w,Bb):q7(w,Bb,Bb)),v+=b;let _=0,E=0;v!==0&&(_=R0(Bb)/l);let C=n-v;C!==0&&(E=R0(S)/l);let A=1+1.25*(_*v+E*C);A<c&&(s=h,c=A,o=x.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${a} used.`);return{axis:s,pos:o}}function $xe(e,t,i,r){let n=0;for(let a=t,s=t+i;a<s;a++)n+=e[a*6+r*2];return n/i}function Zxe(e,t){let i=e.attributes.position,r=e.index.array,n=r.length/3,a=new Float32Array(n*6),s=i.normalized,o=i.array,l=i.offset||0,c=3;i.isInterleavedBufferAttribute&&(c=i.data.stride);let u=["getX","getY","getZ"];for(let d=0;d<n;d++){let h=d*3,f=d*6,p,m,v;s?(p=r[h+0],m=r[h+1],v=r[h+2]):(p=r[h+0]*c+l,m=r[h+1]*c+l,v=r[h+2]*c+l);for(let y=0;y<3;y++){let x,b,w;s?(x=i[u[y]](p),b=i[u[y]](m),w=i[u[y]](v)):(x=o[p+y],b=o[m+y],w=o[v+y]);let S=x;b<S&&(S=b),w<S&&(S=w);let _=x;b>_&&(_=b),w>_&&(_=w);let E=(_-S)/2,C=y*2;a[f+C+0]=S+E,a[f+C+1]=E+(Math.abs(S)+E)*zxe,S<t[y]&&(t[y]=S),_>t[y+3]&&(t[y+3]=_)}}return a}function qxe(e,t){function i(y){h&&h(y/f)}function r(y,x,b,w=null,S=0){if(!p&&S>=l&&(p=!0,c&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(e))),b<=u||S>=l)return i(x+b),y.offset=x,y.count=b,y;let _=Gxe(y.boundingData,w,s,x,b,d);if(_.axis===-1)return i(x+b),y.offset=x,y.count=b,y;let E=jxe(o,s,x,b,_);if(E===x||E===x+b)i(x+b),y.offset=x,y.count=b;else{y.splitAxis=_.axis;let C=new kb,A=x,M=E-x;y.left=C,C.boundingData=new Float32Array(6),AC(s,A,M,C.boundingData,a),r(C,A,M,a,S+1);let T=new kb,P=E,D=b-M;y.right=T,T.boundingData=new Float32Array(6),AC(s,P,D,T.boundingData,a),r(T,P,D,a,S+1)}return y}Vxe(e,t);let n=new Float32Array(6),a=new Float32Array(6),s=Zxe(e,n),o=e.index.array,l=t.maxDepth,c=t.verbose,u=t.maxLeafTris,d=t.strategy,h=t.onProgress,f=e.index.count/3,p=!1,m=[],v=Uxe(e);if(v.length===1){let y=v[0],x=new kb;x.boundingData=n,Hxe(s,y.offset,y.count,a),r(x,y.offset,y.count,a),m.push(x)}else for(let y of v){let x=new kb;x.boundingData=new Float32Array(6),AC(s,y.offset,y.count,x.boundingData,a),r(x,y.offset,y.count,a),m.push(x)}return m}function Yxe(e,t){let i=qxe(e,t),r,n,a,s=[],o=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let u=0;u<i.length;u++){let d=i[u],h=l(d),f=new o(32*h);r=new Float32Array(f),n=new Uint32Array(f),a=new Uint16Array(f),c(0,d),s.push(f)}return s;function l(u){return u.count?1:1+l(u.left)+l(u.right)}function c(u,d){let h=u/4,f=u/2,p=!!d.count,m=d.boundingData;for(let v=0;v<6;v++)r[h+v]=m[v];if(p){let v=d.offset,y=d.count;return n[h+6]=v,a[f+14]=y,a[f+15]=65535,u+32}else{let v=d.left,y=d.right,x=d.splitAxis,b;if(b=c(u+32,v),b/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return n[h+6]=b/4,b=c(b,y),n[h+7]=x,b}}}var Ou=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let i=1/0,r=-1/0;for(let n=0,a=e.length;n<a;n++){let s=e[n][t];i=s<i?s:i,r=s>r?s:r}this.min=i,this.max=r}setFromPoints(e,t){let i=1/0,r=-1/0;for(let n=0,a=t.length;n<a;n++){let s=t[n],o=e.dot(s);i=o<i?o:i,r=o>r?o:r}this.min=i,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}};Ou.prototype.setFromBox=function(){let e=new H;return function(t,i){let r=i.min,n=i.max,a=1/0,s=-1/0;for(let o=0;o<=1;o++)for(let l=0;l<=1;l++)for(let c=0;c<=1;c++){e.x=r.x*o+n.x*(1-o),e.y=r.y*l+n.y*(1-l),e.z=r.z*c+n.z*(1-c);let u=t.dot(e);a=Math.min(u,a),s=Math.max(u,s)}this.min=a,this.max=s}}();var Kxe=function(){let e=new H,t=new H,i=new H;return function(r,n,a){let s=r.start,o=e,l=n.start,c=t;i.subVectors(s,l),e.subVectors(r.end,r.start),t.subVectors(n.end,n.start);let u=i.dot(c),d=c.dot(o),h=c.dot(c),f=i.dot(o),p=o.dot(o)*h-d*d,m,v;p!==0?m=(u*d-f*h)/p:m=0,v=(u+m*d)/h,a.x=m,a.y=v}}(),VP=function(){let e=new Pe,t=new H,i=new H;return function(r,n,a,s){Kxe(r,n,e);let o=e.x,l=e.y;if(o>=0&&o<=1&&l>=0&&l<=1){r.at(o,a),n.at(l,s);return}else if(o>=0&&o<=1){l<0?n.at(0,s):n.at(1,s),r.closestPointToPoint(s,!0,a);return}else if(l>=0&&l<=1){o<0?r.at(0,a):r.at(1,a),n.closestPointToPoint(a,!0,s);return}else{let c;o<0?c=r.start:c=r.end;let u;l<0?u=n.start:u=n.end;let d=t,h=i;if(r.closestPointToPoint(u,!0,t),n.closestPointToPoint(c,!0,i),d.distanceToSquared(u)<=h.distanceToSquared(c)){a.copy(d),s.copy(u);return}else{a.copy(c),s.copy(h);return}}}}(),Xxe=function(){let e=new H,t=new H,i=new As,r=new Po;return function(n,a){let{radius:s,center:o}=n,{a:l,b:c,c:u}=a;if(r.start=l,r.end=c,r.closestPointToPoint(o,!0,e).distanceTo(o)<=s||(r.start=l,r.end=u,r.closestPointToPoint(o,!0,e).distanceTo(o)<=s)||(r.start=c,r.end=u,r.closestPointToPoint(o,!0,e).distanceTo(o)<=s))return!0;let d=a.getPlane(i);if(Math.abs(d.distanceToPoint(o))<=s){let h=d.projectPoint(o,t);if(a.containsPoint(h))return!0}return!1}}(),Qxe=1e-15;function kp(e){return Math.abs(e)<Qxe}var Ru=class extends ba{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new H),this.satBounds=new Array(4).fill().map(()=>new Ou),this.points=[this.a,this.b,this.c],this.sphere=new Fs,this.plane=new As,this.needsUpdate=!0}intersectsSphere(e){return Xxe(e,this)}update(){let e=this.a,t=this.b,i=this.c,r=this.points,n=this.satAxes,a=this.satBounds,s=n[0],o=a[0];this.getNormal(s),o.setFromPoints(s,r);let l=n[1],c=a[1];l.subVectors(e,t),c.setFromPoints(l,r);let u=n[2],d=a[2];u.subVectors(t,i),d.setFromPoints(u,r);let h=n[3],f=a[3];h.subVectors(i,e),f.setFromPoints(h,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(s,e),this.needsUpdate=!1}};Ru.prototype.closestPointToSegment=function(){let e=new H,t=new H,i=new Po;return function(r,n=null,a=null){let{start:s,end:o}=r,l=this.points,c,u=1/0;for(let d=0;d<3;d++){let h=(d+1)%3;i.start.copy(l[d]),i.end.copy(l[h]),VP(i,r,e,t),c=e.distanceToSquared(t),c<u&&(u=c,n&&n.copy(e),a&&a.copy(t))}return this.closestPointToPoint(s,e),c=s.distanceToSquared(e),c<u&&(u=c,n&&n.copy(e),a&&a.copy(s)),this.closestPointToPoint(o,e),c=o.distanceToSquared(e),c<u&&(u=c,n&&n.copy(e),a&&a.copy(o)),Math.sqrt(u)}}();Ru.prototype.intersectsTriangle=function(){let e=new Ru,t=new Array(3),i=new Array(3),r=new Ou,n=new Ou,a=new H,s=new H,o=new H,l=new H,c=new Po,u=new Po,d=new Po;return function(h,f=null,p=!1){this.needsUpdate&&this.update(),h.isExtendedTriangle?h.needsUpdate&&h.update():(e.copy(h),e.update(),h=e);let m=this.plane,v=h.plane;if(Math.abs(m.normal.dot(v.normal))>1-1e-10){let y=this.satBounds,x=this.satAxes;i[0]=h.a,i[1]=h.b,i[2]=h.c;for(let S=0;S<4;S++){let _=y[S],E=x[S];if(r.setFromPoints(E,i),_.isSeparated(r))return!1}let b=h.satBounds,w=h.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let S=0;S<4;S++){let _=b[S],E=w[S];if(r.setFromPoints(E,t),_.isSeparated(r))return!1}for(let S=0;S<4;S++){let _=x[S];for(let E=0;E<4;E++){let C=w[E];if(a.crossVectors(_,C),r.setFromPoints(a,t),n.setFromPoints(a,i),r.isSeparated(n))return!1}}return f&&(p||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),f.start.set(0,0,0),f.end.set(0,0,0)),!0}else{let y=this.points,x=!1,b=0;for(let D=0;D<3;D++){let k=y[D],L=y[(D+1)%3];c.start.copy(k),c.end.copy(L),c.delta(s);let R=x?u.start:u.end,N=kp(v.distanceToPoint(k));if(kp(v.normal.dot(s))&&N){u.copy(c),b=2;break}if((v.intersectLine(c,R)||N)&&!kp(R.distanceTo(L))){if(b++,x)break;x=!0}}if(b===1&&h.containsPoint(u.end))return f&&(f.start.copy(u.end),f.end.copy(u.end)),!0;if(b!==2)return!1;let w=h.points,S=!1,_=0;for(let D=0;D<3;D++){let k=w[D],L=w[(D+1)%3];c.start.copy(k),c.end.copy(L),c.delta(o);let R=S?d.start:d.end,N=kp(m.distanceToPoint(k));if(kp(m.normal.dot(o))&&N){d.copy(c),_=2;break}if((m.intersectLine(c,R)||N)&&!kp(R.distanceTo(L))){if(_++,S)break;S=!0}}if(_===1&&this.containsPoint(d.end))return f&&(f.start.copy(d.end),f.end.copy(d.end)),!0;if(_!==2)return!1;if(u.delta(s),d.delta(o),s.dot(o)<0){let D=d.start;d.start=d.end,d.end=D}let E=u.start.dot(s),C=u.end.dot(s),A=d.start.dot(s),M=d.end.dot(s),T=C<A,P=E<M;return E!==M&&A!==C&&T===P?!1:(f&&(l.subVectors(u.start,d.start),l.dot(s)>0?f.start.copy(u.start):f.start.copy(d.start),l.subVectors(u.end,d.end),l.dot(s)<0?f.end.copy(u.end):f.end.copy(d.end)),!0)}}}();Ru.prototype.distanceToPoint=function(){let e=new H;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();Ru.prototype.distanceToTriangle=function(){let e=new H,t=new H,i=["a","b","c"],r=new Po,n=new Po;return function(a,s=null,o=null){let l=s||o?r:null;if(this.intersectsTriangle(a,l))return(s||o)&&(s&&l.getCenter(s),o&&l.getCenter(o)),0;let c=1/0;for(let u=0;u<3;u++){let d,h=i[u],f=a[h];this.closestPointToPoint(f,e),d=f.distanceToSquared(e),d<c&&(c=d,s&&s.copy(e),o&&o.copy(f));let p=this[h];a.closestPointToPoint(p,e),d=p.distanceToSquared(e),d<c&&(c=d,s&&s.copy(p),o&&o.copy(e))}for(let u=0;u<3;u++){let d=i[u],h=i[(u+1)%3];r.set(this[d],this[h]);for(let f=0;f<3;f++){let p=i[f],m=i[(f+1)%3];n.set(a[p],a[m]),VP(r,n,e,t);let v=e.distanceToSquared(t);v<c&&(c=v,s&&s.copy(e),o&&o.copy(t))}}return Math.sqrt(c)}}();var bc=class{constructor(e,t,i){this.isOrientedBox=!0,this.min=new H,this.max=new H,this.matrix=new pt,this.invMatrix=new pt,this.points=new Array(8).fill().map(()=>new H),this.satAxes=new Array(3).fill().map(()=>new H),this.satBounds=new Array(3).fill().map(()=>new Ou),this.alignedSatBounds=new Array(3).fill().map(()=>new Ou),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),i&&this.matrix.copy(i)}set(e,t,i){this.min.copy(e),this.max.copy(t),this.matrix.copy(i),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}};bc.prototype.update=function(){return function(){let e=this.matrix,t=this.min,i=this.max,r=this.points;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let u=0;u<=1;u++){let d=1*l|2*c|4*u,h=r[d];h.x=l?i.x:t.x,h.y=c?i.y:t.y,h.z=u?i.z:t.z,h.applyMatrix4(e)}let n=this.satBounds,a=this.satAxes,s=r[0];for(let l=0;l<3;l++){let c=a[l],u=n[l],d=1<<l,h=r[d];c.subVectors(s,h),u.setFromPoints(c,r)}let o=this.alignedSatBounds;o[0].setFromPointsField(r,"x"),o[1].setFromPointsField(r,"y"),o[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();bc.prototype.intersectsBox=function(){let e=new Ou;return function(t){this.needsUpdate&&this.update();let i=t.min,r=t.max,n=this.satBounds,a=this.satAxes,s=this.alignedSatBounds;if(e.min=i.x,e.max=r.x,s[0].isSeparated(e)||(e.min=i.y,e.max=r.y,s[1].isSeparated(e))||(e.min=i.z,e.max=r.z,s[2].isSeparated(e)))return!1;for(let o=0;o<3;o++){let l=a[o],c=n[o];if(e.setFromBox(l,t),c.isSeparated(e))return!1}return!0}}();bc.prototype.intersectsTriangle=function(){let e=new Ru,t=new Array(3),i=new Ou,r=new Ou,n=new H;return function(a){this.needsUpdate&&this.update(),a.isExtendedTriangle?a.needsUpdate&&a.update():(e.copy(a),e.update(),a=e);let s=this.satBounds,o=this.satAxes;t[0]=a.a,t[1]=a.b,t[2]=a.c;for(let d=0;d<3;d++){let h=s[d],f=o[d];if(i.setFromPoints(f,t),h.isSeparated(i))return!1}let l=a.satBounds,c=a.satAxes,u=this.points;for(let d=0;d<3;d++){let h=l[d],f=c[d];if(i.setFromPoints(f,u),h.isSeparated(i))return!1}for(let d=0;d<3;d++){let h=o[d];for(let f=0;f<4;f++){let p=c[f];if(n.crossVectors(h,p),i.setFromPoints(n,t),r.setFromPoints(n,u),i.isSeparated(r))return!1}}return!0}}();bc.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();bc.prototype.distanceToPoint=function(){let e=new H;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();bc.prototype.distanceToBox=function(){let e=["x","y","z"],t=new Array(12).fill().map(()=>new Po),i=new Array(12).fill().map(()=>new Po),r=new H,n=new H;return function(a,s=0,o=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(a))return(o||l)&&(a.getCenter(n),this.closestPointToPoint(n,r),a.closestPointToPoint(r,n),o&&o.copy(r),l&&l.copy(n)),0;let c=s*s,u=a.min,d=a.max,h=this.points,f=1/0;for(let m=0;m<8;m++){let v=h[m];n.copy(v).clamp(u,d);let y=v.distanceToSquared(n);if(y<f&&(f=y,o&&o.copy(v),l&&l.copy(n),y<c))return Math.sqrt(y)}let p=0;for(let m=0;m<3;m++)for(let v=0;v<=1;v++)for(let y=0;y<=1;y++){let x=(m+1)%3,b=(m+2)%3,w=v<<x|y<<b,S=1<<m|v<<x|y<<b,_=h[w],E=h[S];t[p].set(_,E);let C=e[m],A=e[x],M=e[b],T=i[p],P=T.start,D=T.end;P[C]=u[C],P[A]=v?u[A]:d[A],P[M]=y?u[M]:d[A],D[C]=d[C],D[A]=v?u[A]:d[A],D[M]=y?u[M]:d[A],p++}for(let m=0;m<=1;m++)for(let v=0;v<=1;v++)for(let y=0;y<=1;y++){n.x=m?d.x:u.x,n.y=v?d.y:u.y,n.z=y?d.z:u.z,this.closestPointToPoint(n,r);let x=n.distanceToSquared(r);if(x<f&&(f=x,o&&o.copy(r),l&&l.copy(n),x<c))return Math.sqrt(x)}for(let m=0;m<12;m++){let v=t[m];for(let y=0;y<12;y++){let x=i[y];VP(v,x,r,n);let b=r.distanceToSquared(n);if(b<f&&(f=b,o&&o.copy(r),l&&l.copy(n),b<c))return Math.sqrt(b)}}return Math.sqrt(f)}}();var Lp=new H,Bp=new H,Np=new H,Nb=new Pe,Fb=new Pe,zb=new Pe,Y7=new H,K7=new H,X7=new H,Vb=new H;function Jxe(e,t,i,r,n,a){let s;return a===aa?s=e.intersectTriangle(r,i,t,!0,n):s=e.intersectTriangle(t,i,r,a!==za,n),s===null?null:{distance:e.origin.distanceTo(n),point:n.clone()}}function e_e(e,t,i,r,n,a,s,o,l){Lp.fromBufferAttribute(t,a),Bp.fromBufferAttribute(t,s),Np.fromBufferAttribute(t,o);let c=Jxe(e,Lp,Bp,Np,Vb,l);if(c){r&&(Nb.fromBufferAttribute(r,a),Fb.fromBufferAttribute(r,s),zb.fromBufferAttribute(r,o),c.uv=ba.getInterpolation(Vb,Lp,Bp,Np,Nb,Fb,zb,new Pe)),n&&(Nb.fromBufferAttribute(n,a),Fb.fromBufferAttribute(n,s),zb.fromBufferAttribute(n,o),c.uv1=ba.getInterpolation(Vb,Lp,Bp,Np,Nb,Fb,zb,new Pe)),i&&(Y7.fromBufferAttribute(i,a),K7.fromBufferAttribute(i,s),X7.fromBufferAttribute(i,o),c.normal=ba.getInterpolation(Vb,Lp,Bp,Np,Y7,K7,X7,new H),c.normal.dot(e.direction)>0&&c.normal.multiplyScalar(-1));let u={a,b:s,c:o,normal:new H,materialIndex:0};ba.getNormal(Lp,Bp,Np,u.normal),c.face=u,c.faceIndex=a}return c}function tG(e,t,i,r,n){let a=r*3,s=e.index.getX(a),o=e.index.getX(a+1),l=e.index.getX(a+2),{position:c,normal:u,uv:d,uv1:h}=e.attributes,f=e_e(i,c,u,d,h,s,o,l,t);return f?(f.faceIndex=r,n&&n.push(f),f):null}function t_e(e,t,i,r,n,a){for(let s=r,o=r+n;s<o;s++)tG(e,t,i,s,a)}function i_e(e,t,i,r,n){let a=1/0,s=null;for(let o=r,l=r+n;o<l;o++){let c=tG(e,t,i,o);c&&c.distance<a&&(s=c,a=c.distance)}return s}function ic(e,t,i,r){let n=e.a,a=e.b,s=e.c,o=t,l=t+1,c=t+2;i&&(o=i.getX(t),l=i.getX(t+1),c=i.getX(t+2)),n.x=r.getX(o),n.y=r.getY(o),n.z=r.getZ(o),a.x=r.getX(l),a.y=r.getY(l),a.z=r.getZ(l),s.x=r.getX(c),s.y=r.getY(c),s.z=r.getZ(c)}function Q7(e,t,i,r,n,a,s){let o=i.index,l=i.attributes.position;for(let c=e,u=t+e;c<u;c++)if(ic(s,c*3,o,l),s.needsUpdate=!0,r(s,c,n,a))return!0;return!1}var iG=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function Id(e,t){return t[e+15]===65535}function zm(e,t){return t[e+6]}function x1(e,t){return t[e+14]}function _1(e){return e+8}function S1(e,t){return t[e+6]}function r_e(e,t){return t[e+7]}var Sm=new gn,Nx=new H,n_e=["x","y","z"];function cM(e,t,i,r,n){let a=e*2,s=Qv,o=Kd,l=Xd;if(Id(a,o)){let c=zm(e,l),u=x1(a,o);t_e(t,i,r,c,u,n)}else{let c=_1(e);Fx(c,s,r,Nx)&&cM(c,t,i,r,n);let u=S1(e,l);Fx(u,s,r,Nx)&&cM(u,t,i,r,n)}}function uM(e,t,i,r){let n=e*2,a=Qv,s=Kd,o=Xd;if(Id(n,s)){let l=zm(e,o),c=x1(n,s);return i_e(t,i,r,l,c)}else{let l=r_e(e,o),c=n_e[l],u=r.direction[c]>=0,d,h;u?(d=_1(e),h=S1(e,o)):(d=S1(e,o),h=_1(e));let f=Fx(d,a,r,Nx)?uM(d,t,i,r):null;if(f){let m=f.point[c];if(u?m<=a[h+l]:m>=a[h+l+3])return f}let p=Fx(h,a,r,Nx)?uM(h,t,i,r):null;return f&&p?f.distance<=p.distance?f:p:f||p||null}}var a_e=function(){let e,t,i=[],r=new iG(()=>new gn);return function(...a){e=r.getPrimitive(),t=r.getPrimitive(),i.push(e,t);let s=n(...a);r.releasePrimitive(e),r.releasePrimitive(t),i.pop(),i.pop();let o=i.length;return o>0&&(t=i[o-1],e=i[o-2]),s};function n(a,s,o,l,c=null,u=0,d=0){function h(x){let b=x*2,w=Kd,S=Xd;for(;!Id(b,w);)x=_1(x),b=x*2;return zm(x,S)}function f(x){let b=x*2,w=Kd,S=Xd;for(;!Id(b,w);)x=S1(x,S),b=x*2;return zm(x,S)+x1(b,w)}let p=a*2,m=Qv,v=Kd,y=Xd;if(Id(p,v)){let x=zm(a,y),b=x1(p,v);return ac(a,m,e),l(x,b,!1,d,u+a,e)}else{let x=_1(a),b=S1(a,y),w=x,S=b,_,E,C,A;if(c&&(C=e,A=t,ac(w,m,C),ac(S,m,A),_=c(C),E=c(A),E<_)){w=b,S=x;let R=_;_=E,E=R,C=A}C||(C=e,ac(w,m,C));let M=Id(w*2,v),T=o(C,M,_,d+1,u+w),P;if(T===2){let R=h(w),N=f(w)-R;P=l(R,N,!0,d+1,u+w,C)}else P=T&&n(w,s,o,l,c,u,d+1);if(P)return!0;A=t,ac(S,m,A);let D=Id(S*2,v),k=o(A,D,E,d+1,u+S),L;if(k===2){let R=h(S),N=f(S)-R;L=l(R,N,!0,d+1,u+S,A)}else L=k&&n(S,s,o,l,c,u,d+1);return!!L}}}(),s_e=function(){let e=new Ru,t=new Ru,i=new pt,r=new bc,n=new bc;return function a(s,o,l,c,u=null){let d=s*2,h=Qv,f=Kd,p=Xd;if(u===null&&(l.boundingBox||l.computeBoundingBox(),r.set(l.boundingBox.min,l.boundingBox.max,c),u=r),Id(d,f)){let m=o,v=m.index,y=m.attributes.position,x=l.index,b=l.attributes.position,w=zm(s,p),S=x1(d,f);if(i.copy(c).invert(),l.boundsTree)return ac(s,h,n),n.matrix.copy(i),n.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:_=>n.intersectsBox(_),intersectsTriangle:_=>{_.a.applyMatrix4(c),_.b.applyMatrix4(c),_.c.applyMatrix4(c),_.needsUpdate=!0;for(let E=w*3,C=(S+w)*3;E<C;E+=3)if(ic(t,E,v,y),t.needsUpdate=!0,_.intersectsTriangle(t))return!0;return!1}});for(let _=w*3,E=S+w*3;_<E;_+=3){ic(e,_,v,y),e.a.applyMatrix4(i),e.b.applyMatrix4(i),e.c.applyMatrix4(i),e.needsUpdate=!0;for(let C=0,A=x.count;C<A;C+=3)if(ic(t,C,x,b),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}else{let m=s+8,v=p[s+6];return ac(m,h,Sm),!!(u.intersectsBox(Sm)&&a(m,o,l,c,u)||(ac(v,h,Sm),u.intersectsBox(Sm)&&a(v,o,l,c,u)))}}}();function Fx(e,t,i,r){return ac(e,t,Sm),i.intersectBox(Sm,r)}var dM=[],Qw,Qv,Kd,Xd;function og(e){Qw&&dM.push(Qw),Qw=e,Qv=new Float32Array(e),Kd=new Uint16Array(e),Xd=new Uint32Array(e)}function Ub(){Qw=null,Qv=null,Kd=null,Xd=null,dM.length&&og(dM.pop())}var MC=Symbol("skip tree generation"),TC=new gn,PC=new gn,Fp=new pt,jh=new bc,k0=new bc,L0=new H,Hb=new H,o_e=new H,l_e=new H,c_e=new H,J7=new gn,Vl=new iG(()=>new Ru),Lg=class{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),Lg.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};let i=e.geometry,r=e._roots,n=i.getIndex(),a;return t.cloneBuffers?a={roots:r.map(s=>s.slice()),index:n.array.slice()}:a={roots:r,index:n.array},a}static deserialize(e,t,i={}){if(typeof i=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),Lg.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});i={setIndex:!0,...i};let{index:r,roots:n}=e,a=new Lg(t,{...i,[MC]:!0});if(a._roots=n,i.setIndex){let s=t.getIndex();if(s===null){let o=new ui(e.index,1,!1);t.setIndex(o)}else s.array!==r&&(s.array.set(r),s.needsUpdate=!0)}return a}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[MC]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[MC]||(this._roots=Yxe(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new gn))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let t=this.geometry,i=t.index.array,r=t.attributes.position,n,a,s,o,l=0,c=this._roots;for(let d=0,h=c.length;d<h;d++)n=c[d],a=new Uint32Array(n),s=new Uint16Array(n),o=new Float32Array(n),u(0,l),l+=n.byteLength;function u(d,h,f=!1){let p=d*2;if(s[p+15]===65535){let m=a[d+6],v=s[p+14],y=1/0,x=1/0,b=1/0,w=-1/0,S=-1/0,_=-1/0;for(let E=3*m,C=3*(m+v);E<C;E++){let A=i[E],M=r.getX(A),T=r.getY(A),P=r.getZ(A);M<y&&(y=M),M>w&&(w=M),T<x&&(x=T),T>S&&(S=T),P<b&&(b=P),P>_&&(_=P)}return o[d+0]!==y||o[d+1]!==x||o[d+2]!==b||o[d+3]!==w||o[d+4]!==S||o[d+5]!==_?(o[d+0]=y,o[d+1]=x,o[d+2]=b,o[d+3]=w,o[d+4]=S,o[d+5]=_,!0):!1}else{let m=d+8,v=a[d+6],y=m+h,x=v+h,b=f,w=!1,S=!1;e?b||(w=e.has(y),S=e.has(x),b=!w&&!S):(w=!0,S=!0);let _=b||w,E=b||S,C=!1;_&&(C=u(m,h,b));let A=!1;E&&(A=u(v,h,b));let M=C||A;if(M)for(let T=0;T<3;T++){let P=m+T,D=v+T,k=o[P],L=o[P+3],R=o[D],N=o[D+3];o[d+T]=k<R?k:R,o[d+T+3]=L>N?L:N}return M}}}traverse(e,t=0){let i=this._roots[t],r=new Uint32Array(i),n=new Uint16Array(i);a(0);function a(s,o=0){let l=s*2,c=n[l+15]===65535;if(c){let u=r[s+6],d=n[l+14];e(o,c,new Float32Array(i,s*4,6),u,d)}else{let u=s+8,d=r[s+6],h=r[s+7];e(o,c,new Float32Array(i,s*4,6),h)||(a(u,o+1),a(d,o+1))}}}raycast(e,t=_l){let i=this._roots,r=this.geometry,n=[],a=t.isMaterial,s=Array.isArray(t),o=r.groups,l=a?t.side:t;for(let c=0,u=i.length;c<u;c++){let d=s?t[o[c].materialIndex].side:l,h=n.length;if(og(i[c]),cM(0,r,d,e,n),Ub(),s){let f=o[c].materialIndex;for(let p=h,m=n.length;p<m;p++)n[p].face.materialIndex=f}}return n}raycastFirst(e,t=_l){let i=this._roots,r=this.geometry,n=t.isMaterial,a=Array.isArray(t),s=null,o=r.groups,l=n?t.side:t;for(let c=0,u=i.length;c<u;c++){let d=a?t[o[c].materialIndex].side:l;og(i[c]);let h=uM(0,r,d,e);Ub(),h!=null&&(s==null||h.distance<s.distance)&&(s=h,a&&(h.face.materialIndex=o[c].materialIndex))}return s}intersectsGeometry(e,t){let i=this.geometry,r=!1;for(let n of this._roots)if(og(n),r=s_e(0,i,e,t),Ub(),r)break;return r}shapecast(e,t,i){let r=this.geometry;if(e instanceof Function){if(t){let d=t;t=(h,f,p,m)=>{let v=f*3;return d(h,v,v+1,v+2,p,m)}}e={boundsTraverseOrder:i,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let n=Vl.getPrimitive(),{boundsTraverseOrder:a,intersectsBounds:s,intersectsRange:o,intersectsTriangle:l}=e;if(o&&l){let d=o;o=(h,f,p,m,v)=>d(h,f,p,m,v)?!0:Q7(h,f,r,l,p,m,n)}else o||(l?o=(d,h,f,p)=>Q7(d,h,r,l,f,p,n):o=(d,h,f)=>f);let c=!1,u=0;for(let d of this._roots){if(og(d),c=a_e(0,r,s,o,a,u),Ub(),c)break;u+=d.byteLength}return Vl.releasePrimitive(n),c}bvhcast(e,t,i){let{intersectsRanges:r,intersectsTriangles:n}=i,a=this.geometry.index,s=this.geometry.attributes.position,o=e.geometry.index,l=e.geometry.attributes.position;Fp.copy(t).invert();let c=Vl.getPrimitive(),u=Vl.getPrimitive();if(n){let h=function(f,p,m,v,y,x,b,w){for(let S=m,_=m+v;S<_;S++){ic(u,S*3,o,l),u.a.applyMatrix4(t),u.b.applyMatrix4(t),u.c.applyMatrix4(t),u.needsUpdate=!0;for(let E=f,C=f+p;E<C;E++)if(ic(c,E*3,a,s),c.needsUpdate=!0,n(c,u,E,S,y,x,b,w))return!0}return!1};if(r){let f=r;r=function(p,m,v,y,x,b,w,S){return f(p,m,v,y,x,b,w,S)?!0:h(p,m,v,y,x,b,w,S)}}else r=h}e.getBoundingBox(PC),PC.applyMatrix4(t);let d=this.shapecast({intersectsBounds:h=>PC.intersectsBox(h),intersectsRange:(h,f,p,m,v,y)=>(TC.copy(y),TC.applyMatrix4(Fp),e.shapecast({intersectsBounds:x=>TC.intersectsBox(x),intersectsRange:(x,b,w,S,_)=>r(h,f,x,b,m,v,S,_)}))});return Vl.releasePrimitive(c),Vl.releasePrimitive(u),d}intersectsBox(e,t){return jh.set(e.min,e.max,t),jh.needsUpdate=!0,this.shapecast({intersectsBounds:i=>jh.intersectsBox(i),intersectsTriangle:i=>jh.intersectsTriangle(i)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,i={},r={},n=0,a=1/0){e.boundingBox||e.computeBoundingBox(),jh.set(e.boundingBox.min,e.boundingBox.max,t),jh.needsUpdate=!0;let s=this.geometry,o=s.attributes.position,l=s.index,c=e.attributes.position,u=e.index,d=Vl.getPrimitive(),h=Vl.getPrimitive(),f=Hb,p=o_e,m=null,v=null;r&&(m=l_e,v=c_e);let y=1/0,x=null,b=null;return Fp.copy(t).invert(),k0.matrix.copy(Fp),this.shapecast({boundsTraverseOrder:w=>jh.distanceToBox(w),intersectsBounds:(w,S,_)=>_<y&&_<a?(S&&(k0.min.copy(w.min),k0.max.copy(w.max),k0.needsUpdate=!0),!0):!1,intersectsRange:(w,S)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:_=>k0.distanceToBox(_),intersectsBounds:(_,E,C)=>C<y&&C<a,intersectsRange:(_,E)=>{for(let C=_*3,A=(_+E)*3;C<A;C+=3){ic(h,C,u,c),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let M=w*3,T=(w+S)*3;M<T;M+=3){ic(d,M,l,o),d.needsUpdate=!0;let P=d.distanceToTriangle(h,f,m);if(P<y&&(p.copy(f),v&&v.copy(m),y=P,x=M/3,b=C/3),P<n)return!0}}}});{let _=u?u.count:c.count;for(let E=0,C=_;E<C;E+=3){ic(h,E,u,c),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let A=w*3,M=(w+S)*3;A<M;A+=3){ic(d,A,l,o),d.needsUpdate=!0;let T=d.distanceToTriangle(h,f,m);if(T<y&&(p.copy(f),v&&v.copy(m),y=T,x=A/3,b=E/3),T<n)return!0}}}}}),Vl.releasePrimitive(d),Vl.releasePrimitive(h),y===1/0?null:(i.point?i.point.copy(p):i.point=p.clone(),i.distance=y,i.faceIndex=x,r&&(r.point?r.point.copy(v):r.point=v.clone(),r.point.applyMatrix4(Fp),p.applyMatrix4(Fp),r.distance=p.sub(r.point).length(),r.faceIndex=b),i)}closestPointToPoint(e,t={},i=0,r=1/0){let n=i*i,a=r*r,s=1/0,o=null;if(this.shapecast({boundsTraverseOrder:c=>(L0.copy(e).clamp(c.min,c.max),L0.distanceToSquared(e)),intersectsBounds:(c,u,d)=>d<s&&d<a,intersectsTriangle:(c,u)=>{c.closestPointToPoint(e,L0);let d=e.distanceToSquared(L0);return d<s&&(Hb.copy(L0),s=d,o=u),d<n}}),s===1/0)return null;let l=Math.sqrt(s);return t.point?t.point.copy(Hb):t.point=Hb.clone(),t.distance=l,t.faceIndex=o,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{ac(0,new Float32Array(t),J7),e.union(J7)}),e}},hM=_h(loe()),u_e=.5*(Math.sqrt(3)-1),B0=(3-Math.sqrt(3))/6,d_e=1/3,Ul=1/6,Bg=e=>Math.floor(e)|0,eL=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),DC=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function h_e(e=Math.random){let t=rG(e),i=new Float64Array(t).map(n=>eL[n%12*2]),r=new Float64Array(t).map(n=>eL[n%12*2+1]);return function(n,a){let s=0,o=0,l=0,c=(n+a)*u_e,u=Bg(n+c),d=Bg(a+c),h=(u+d)*B0,f=u-h,p=d-h,m=n-f,v=a-p,y,x;m>v?(y=1,x=0):(y=0,x=1);let b=m-y+B0,w=v-x+B0,S=m-1+2*B0,_=v-1+2*B0,E=u&255,C=d&255,A=.5-m*m-v*v;if(A>=0){let P=E+t[C],D=i[P],k=r[P];A*=A,s=A*A*(D*m+k*v)}let M=.5-b*b-w*w;if(M>=0){let P=E+y+t[C+x],D=i[P],k=r[P];M*=M,o=M*M*(D*b+k*w)}let T=.5-S*S-_*_;if(T>=0){let P=E+1+t[C+1],D=i[P],k=r[P];T*=T,l=T*T*(D*S+k*_)}return 70*(s+o+l)}}function f_e(e=Math.random){let t=rG(e),i=new Float64Array(t).map(a=>DC[a%12*3]),r=new Float64Array(t).map(a=>DC[a%12*3+1]),n=new Float64Array(t).map(a=>DC[a%12*3+2]);return function(a,s,o){let l,c,u,d,h=(a+s+o)*d_e,f=Bg(a+h),p=Bg(s+h),m=Bg(o+h),v=(f+p+m)*Ul,y=f-v,x=p-v,b=m-v,w=a-y,S=s-x,_=o-b,E,C,A,M,T,P;w>=S?S>=_?(E=1,C=0,A=0,M=1,T=1,P=0):w>=_?(E=1,C=0,A=0,M=1,T=0,P=1):(E=0,C=0,A=1,M=1,T=0,P=1):S<_?(E=0,C=0,A=1,M=0,T=1,P=1):w<_?(E=0,C=1,A=0,M=0,T=1,P=1):(E=0,C=1,A=0,M=1,T=1,P=0);let D=w-E+Ul,k=S-C+Ul,L=_-A+Ul,R=w-M+2*Ul,N=S-T+2*Ul,I=_-P+2*Ul,B=w-1+3*Ul,z=S-1+3*Ul,V=_-1+3*Ul,W=f&255,G=p&255,q=m&255,ae=.6-w*w-S*S-_*_;if(ae<0)l=0;else{let Q=W+t[G+t[q]];ae*=ae,l=ae*ae*(i[Q]*w+r[Q]*S+n[Q]*_)}let J=.6-D*D-k*k-L*L;if(J<0)c=0;else{let Q=W+E+t[G+C+t[q+A]];J*=J,c=J*J*(i[Q]*D+r[Q]*k+n[Q]*L)}let $=.6-R*R-N*N-I*I;if($<0)u=0;else{let Q=W+M+t[G+T+t[q+P]];$*=$,u=$*$*(i[Q]*R+r[Q]*N+n[Q]*I)}let te=.6-B*B-z*z-V*V;if(te<0)d=0;else{let Q=W+1+t[G+1+t[q+1]];te*=te,d=te*te*(i[Q]*B+r[Q]*z+n[Q]*V)}return 32*(l+c+u+d)}}function rG(e){let t=new Uint8Array(512);for(let i=0;i<512/2;i++)t[i]=i;for(let i=0;i<512/2-1;i++){let r=i+~~(e()*(256-i)),n=t[i];t[i]=t[r],t[r]=n}for(let i=256;i<512;i++)t[i]=t[i-256];return t}var Ko=new ba,p_e=class{constructor(e){this.weightAttribute=null;let t=e.geometry;if(!t.isBufferGeometry||t.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let e=this.positionAttribute,t=new Float32Array(e.count/3);for(let r=0;r<e.count;r+=3){let n=1;Ko.a.fromBufferAttribute(e,r),Ko.b.fromBufferAttribute(e,r+1),Ko.c.fromBufferAttribute(e,r+2),n*=Ko.getArea(),t[r/3]=n}this.distribution=new Float32Array(e.count/3);let i=0;for(let r=0;r<t.length;r++)i+=t[r],this.distribution[r]=i;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t){if(this.distribution){let i=this.distribution[this.distribution.length-1],r=this.binarySearch(this.randomFunction()*i);return this.sampleFace(r,e,t)}}binarySearch(e){if(!this.distribution)return 0;let t=this.distribution,i=0,r=t.length-1,n=-1;for(;i<=r;){let a=Math.ceil((i+r)/2);if(a===0||t[a-1]<=e&&t[a]>e){n=a;break}else e<t[a]?r=a-1:i=a+1}return n}sampleFace(e,t,i){let r=this.randomFunction(),n=this.randomFunction();return r+n>1&&(r=1-r,n=1-n),Ko.a.fromBufferAttribute(this.positionAttribute,e*3),Ko.b.fromBufferAttribute(this.positionAttribute,e*3+1),Ko.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(Ko.a,r).addScaledVector(Ko.b,n).addScaledVector(Ko.c,1-(r+n)),Ko.getNormal(i),this}},m_e=_h(NH()),v_e=new pt,g_e=new pt,y_e=new pt,C1;(e=>{function t(i){return i&&i.__isSPEObject}e.is=t})(C1||(C1={}));var UP=e=>class extends e{constructor(){super(...arguments),this.previousModelViewMatrix=new pt,this.copyPreviousMatrix=!0,this.hiddenMatrix=new pt,this.matrixWorldRigid=new pt,this.shearScale=new pt,this.shearScaleInv=new pt}get __isSPEObject(){return!0}isDescendantOf(t){t instanceof dr&&(t=t.uuid);let i=this;for(;i.parent;){if(i.parent.uuid===t)return!0;i=i.parent}return!1}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);for(let i of this.children)i.updateMatrixWorld(t)}updateWorldMatrix(t,i){let r=this.parent;if(t&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),i)for(let n of this.children)n.updateWorldMatrix(!1,!0)}traverseChildren(t,i=0){for(let r of this.children)C1.is(r)&&r.traverseObject(t,i+1)}traverseObject(t,i=0){if(t(this,i)!==!0)for(let r of this.children)C1.is(r)&&r.traverseObject(t,i+1)}updateMatrixWorldSVD(){let t=this.matrixWorld.elements,i=[[t[0],t[4],t[8]],[t[1],t[5],t[9]],[t[2],t[6],t[10]]],{u:r,v:n,q:a}=(0,m_e.SVD)(i),s=v_e.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),o=g_e.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),l=y_e.copy(o).transpose();this.shearScale.makeScale(a[0],a[1],a[2]).multiply(l).premultiply(o),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(s,l).copyPosition(this.matrixWorld),a.every(c=>Math.abs(a[0]-c)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(t,i){this.updateWorldMatrix(!0,!1);let r=new pt().copy(this.matrixWorld).invert();return t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),r.multiply(t.parent.matrixWorld)),"hiddenMatrix"in t&&t.hiddenMatrix instanceof pt?t.hiddenMatrix.premultiply(r):t.applyMatrix4(r),t.updateWorldMatrix(!1,!1),this.add(t),i!==void 0&&(this.children.pop(),this.children.splice(i,0,t)),this}copy(t,i=!1){return super.copy(t,i),this.hasNonUniformScale=t.hasNonUniformScale,this}onAfterRender(t,i,r,n,a,s){this.copyPreviousMatrix&&this.previousModelViewMatrix.copy(this.modelViewMatrix)}},b_e=class extends UP(dr){},w_e=e=>e.type==="Mesh",Va=class extends b_e{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!1,this.hasNonUniformScale=e.hasNonUniformScale}raycast(e,t){}expand(){let e=0,t=this.object.entityChildren(e);for(;t;){let i=this.children[e];(i==null?void 0:i.object)!==t&&(i&&this.remove(i),i=new Va(t),this.add(i),this.children.splice(e,0,this.children.pop()),i.matrixWorldNeedsUpdate=!0,i.matrixAutoUpdate=!1,i.matrix=t.matrix,i.hiddenMatrix=t.hiddenMatrix),i.expand(),e+=1,t=this.object.entityChildren(e)}for(;this.children.length>e;)this.remove(this.children[e])}get visible(){var e;return this.playModeVisible!==void 0?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&((e=this.object.dataPatched.cloner)==null?void 0:e.hideBase)===!0}set visible(e){}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return w_e(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},af=new H,sf=new H,Vm=new pt,nG=[new H(-1,1,1),new H(-1,-1,1),new H(1,-1,1),new H(1,1,1),new H(-1,1,-1),new H(-1,-1,-1),new H(1,-1,-1),new H(1,1,-1)],x_e=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],__e=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],tL=(e,t,i)=>{e.updateEntityBoxSize(af,sf),Vm.copy(t).multiply(e.matrixWorld),sf.x===0&&sf.y===0&&sf.z===0?i.push(new H(af.x,af.y,af.z).applyMatrix4(Vm)):nG.forEach(r=>{i.push(r.clone().multiply(sf).add(af).applyMatrix4(Vm))})},iL=class extends gn{constructor(){super(...arguments),this.matrix=new pt,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(t=>t.clone()),this.faces=e.faces.map(t=>t.clone()),this.edges=e.edges.map(t=>t.clone()),this.centerEdges=e.centerEdges.map(t=>t.clone()),this}setFromObjectSize(e,t=!1){e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let i=new pt().copy(e.matrixWorld).invert();return this.expandByObjectSize(e,i,t)}expandByObjectSize(e,t,i=!1){let r=[];return i===!0?e.traverseEntity(n=>{if(n.visible||n.cloner&&n.data.visible){if(!("geometry"in n)){r.push(new H);return}tL(n,t,r)}}):tL(e,t,r),this.setFromPoints(r)}getCenter(e){return e=super.getCenter(e),e.applyMatrix4(this.matrix),e}getPositionToCenter(e){return e=super.getCenter(e),e.applyMatrix4(Vm.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(sf).multiplyScalar(.5),this.getCenter(af),Vm.copy(this.matrix).setPosition(af),this.vertices=nG.map(e=>e.clone().multiply(sf).applyMatrix4(Vm))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=x_e.map(([e,t])=>new Po(this.vertices[e],this.vertices[t])),this.centerEdges=this.edges.map(e=>e.getCenter(new H))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=__e.map(([e,t])=>this.vertices[e].clone().add(this.vertices[t]).multiplyScalar(.5))}},zd={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},S_e=class extends hj{constructor(){super()}getPoints(e=12){let t=[],i,r=this.getCurveLengths(),n=r[r.length-1]/r.length;for(let a=0,s=this.curves;a<s.length;a++){let o=s[a],l=a===0?r[a]:r[a]-r[a-1],c=Math.ceil(e*l/n),u=o.getPoints(c);for(let d=0;d<u.length;d++){let h=u[d];i&&i.equals(h)||(t.push(h),i=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}},fM=.001;function pM(e,t,i){return t.clone().sub(e).cross(t.clone().sub(i)).length()<=fM}function IC(e,t){let i=new H(...e.position),r=new H(...e.controlNext.position),n=new H(...t.controlPrevious.position),a=new H(...t.position);return pM(i,r,a)&&pM(i,n,a)}function aG(e){let t=e.points.map(u=>new H(...u.data.position)),i=[e.points[0]],r=new H(...i[0].data.position);for(let u=0;u<e.points.length-1;u++)pM(r,t[u],t[u+1])||(i.push(e.points[u]),r=t[u]);i.push(e.points[e.points.length-1]);let n=e.isClosed,a=i.length-(n?0:1),s=i.length,o=[];for(let u=0;u<s;u++){let d=i[u].data,h=new H(...d.position),f=new H(...d.controlPrevious.position),p=new H(...d.controlNext.position),m={position:h,baseRoundness:d.roundness,controlPrevious:f,controlNext:p};if(d.roundness===0||!e.isClosed&&(u===0||u===s-1)){o[u]={...m,removedLength:0};continue}let v=n&&u==0?s-1:u-1,y=n&&u==s-1?0:u+1,x=i[v].data,b=i[y].data,w=new H(...x.position),S=new H(...b.position),_=w.clone().sub(h).normalize(),E=S.clone().sub(h).normalize();Object.assign(m,{prevDir:_,nextDir:E});let C=IC(x,d),A=IC(d,b);if(!C||!A)o[u]={...m,removedLength:0};else{let M=_.clone().add(E).normalize(),T=M.clone().cross(_).length()/_.dot(M);o[u]={...m,tan:T,removedLength:d.roundness/T}}}for(let u=0;u<a;u++){let d=u,h=n&&u===s-1?0:u+1,f=o[d],p=o[h];if(f.removedLength!==0||p.removedLength!==0){let m=f.position.distanceTo(p.position);f.removedLength=Math.min(f.removedLength,m/2),p.removedLength=Math.min(p.removedLength,m/2)}}let l=[];for(let u=0;u<a;u++){let d=u,h=n&&u===s-1?0:u+1,f=o[d],p=o[h],m=null;if(!IC(i[d].data,i[h].data))f.position.distanceTo(p.position)>fM&&(m=new Zw(f.position,f.controlNext,p.controlPrevious,p.position));else{let v=f.position.clone(),y=p.position.clone();(f.removedLength!==0||p.removedLength!==0)&&(f.nextDir&&v.add(f.nextDir.clone().setLength(f.removedLength)),p.prevDir&&y.add(p.prevDir.clone().setLength(p.removedLength))),v.distanceTo(y)>fM&&(m=new Zw(v,v.clone().lerp(y,.3),y.clone().lerp(v,.3),y))}l[2*u+1]=m}for(let u=0;u<s;u++){let d=o[u];if(d.removedLength===0){l[2*u]=null;continue}let h=d.position,f=d.prevDir.clone().multiplyScalar(d.removedLength).add(h),p=d.nextDir.clone().multiplyScalar(d.removedLength).add(h),m=d.tan*d.removedLength,v=d.prevDir.clone().add(d.nextDir).normalize(),y=f.clone().lerp(p,.5),x=f.distanceTo(p)/2,b=v.clone().multiplyScalar(Math.sqrt(Math.pow(m,2)-Math.pow(x,2))).add(y),w=v.clone().multiplyScalar(-m).add(b),S=h.distanceTo(w)/h.distanceTo(y),_=d.prevDir.clone().multiplyScalar(S*h.distanceTo(f)).add(h),E=_.clone().lerp(w,2),C=f.clone().lerp(_,4/3),A=p.clone().lerp(E,4/3);l[2*u]=new Zw(f,C,A,p)}let c=new S_e;return l.forEach(u=>{u&&c.add(u)}),c}var ji;(e=>{function t(i){return i&&i.__isEntity}e.is=t})(ji||(ji={}));var su=e=>ji.is(e),C_e={type:"completeState",isfromEntity:!0},E_e=["x","y","z"],OC=new H,A_e=new H().set(0,1,0),HP=e=>class extends UP(e){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.destroyedInAction=!1,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new iL,this._recursiveBBox=new iL,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(t){let i=this.children[t];if(ji.is(i))return i}entityChildrenCount(){let t=this.children.length;for(;t--;)if(ji.is(this.children[t]))return t+1;return 0}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let t=this;for(;t.data.type!=="Instance";){let i=t.parent;if(ji.is(i))t=i;else return}return t}forInstancesRec(t){this.instances.forEach(i=>{i.disposed||t(i),i.forInstancesRec(t)})}super_Entity(t,i){typeof t=="string"&&(this.uuid=t),this.identity=t,this.data=i,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(t,i,r=!1){if(!(this.data.states.length===0&&!r)){for(let n of this.data.states)mf.toOps(this.data,n.data).forEach(a=>{let s=gx.replaceProps(a,this.data);this.dataPatched=this.data,this.updateByPatchedOp(s,this.data,i)});if(t!==null){let n=this.data.states.data(t);n&&(this.dataPatched=mf.patch(this.data,n),mf.toOps(this.data,n).forEach(a=>{this.updateByPatchedOp(a,this.dataPatched,i)}))}r&&this.updateTransformState(this.dataPatched,i),this.stateSelection=t,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(t,i){t.setScalar(0),i.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(t=>{su(t)&&t.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(t=>{t.resetBBoxNeedsUpdateSelf()})}find(t){let i;return this.traverseEntity(r=>{r.uuid===t&&(i=r)}),i}traverseSortNextHelper(){let t=this.parent;if(t){let i=t.children,r=i.indexOf(this)+1;if(ji.is(i[r]))return i[r];if(ji.is(t))return t.traverseSortNextHelper()}}sortNext(){let t=this.children;return this.children.length>0&&ji.is(this.children[0])?t[0]:this.traverseSortNextHelper()}goUp(t){let i=this;for(;t>0&&i!==null;)i=i.parent,t-=1;return i}hasAnccestorOrSelf(t){return this===t||this.hasAnccestor(t)}hasAnccestor(t){let i=this.parent;for(;i;){if(t===i)return!0;i=i.parent}return!1}countToAccestor(t){let i=0,r=this;for(;r!==t;){if(r===null)return-1;r=r.parent,i+=1}return i}forEachEntity(t){for(let i of this.children)su(i)&&t(i)}traverseEntityAncestors(t){this.traverseAncestors(i=>{ji.is(i)&&t(i)})}traverseConcreteEntity(t,i=0){if(t(this,i)!==!0)for(let r of this.children)su(r)&&r.isConcreteEntity&&r.traverseEntity(t,i+1)}traverseEntity(t,i=0){if(t(this,i)!==!0)for(let r of this.children)su(r)&&r.traverseEntity(t,i+1)}traverseVisibleEntity(t){t(this);for(let i of this.children)su(i)&&i.visible&&i.traverseVisibleEntity(t)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}updateMatrixWorld(t){super.updateMatrixWorld(t),this.dispatchEvent({type:"updateMatrixWorld"})}copy(t,i=!1){return super.copy(t,i),this.dataPatched=t.dataPatched,this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),this}hasEntityChild(){return this.children.some(t=>su(t))}isAncestorOf(t){if(this.uuid===t)return!1;let i=!1;return this.traverseEntity(r=>{r.uuid===t&&(i=!0)}),i}toObjectTransformState(t=[]){this.updateWorldMatrix(!0,!1);let i={position:this.position.toArray(),rotation:[this.rotation.x*kt.RAD2DEG,this.rotation.y*kt.RAD2DEG,this.rotation.z*kt.RAD2DEG],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return xA(i,t)}getTransformValues(t,i,r){return i[t].map((n,a)=>(r==null?void 0:r.shared.getVariable(n,[this.uuid,t,E_e[a]]))??n)}updateTransformState(t,i){let r=!1;return t.position&&(this.position.fromArray(this.getTransformValues("position",t,i)),r=!0),t.rotation&&(OC.fromArray(this.getTransformValues("rotation",t,i)).multiplyScalar(kt.DEG2RAD),this.rotation.setFromVector3(OC),r=!0),t.scale&&(this.scale.fromArray(this.getTransformValues("scale",t,i)),r=!0),t.hiddenMatrix!==void 0&&(r=!0,this.hiddenMatrix.fromArray(t.hiddenMatrix??pv.identity)),r&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(n=>{n.invalidateClonerTransform(this)})),t.position&&t.rotation&&t.scale&&t.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),r}onVariableUpdate(t=!1){if(t){this.resetBBoxNeedsUpdate();return}this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(i=>{i.invalidateClonerTransform(this)})}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let t of this.children)ji.is(t)&&t.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(t=>{ji.is(t)&&t.disposeRecursively()})}toState(t=[]){let i={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(t)};return xA(i,t)}updateByObjUpdateOp(t,i){t!==void 0&&this.updateByOp({type:0,props:t,path:[]},{...this.data,...t},i,!1)}updateByOp(t,i,r,n){let a=this.data;this.data=i;let s=t,o=Cr(t.path,["states","*"]);if(o!==null){if(t.type===0){let[l]=o;if((this==null?void 0:this.stateSelection)===l){let c={...t.props};if(delete c.name,Object.values(t.props).some(u=>u===void 0)){let u=this.data;if(u!==void 0){let d=Un.zoom(u,t.path.slice(2));if(d)for(let h in t.props)t.props[h]===void 0&&h in d&&(c[h]=d[h])}}s={...t,props:c,path:t.path.slice(2)}}}}else if(t.type===0){let l=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(l!==void 0){if(t.props.name!==void 0&&l.name){let{name:u,...d}=l;l=d}if(t.props.material!==void 0&&"material"in l){let{material:u,...d}=l;l=d}let c=Un.removeOverridden(t.path,t.props,l);s={...t,props:c}}}if(this.updateByPatchedOpBase(s,mf.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),r),Cr(t.path,["overrides"])){let l=[],c=[...t.path];for(l.push(c[1]),c.splice(0,2);c.length>0&&c[0]==="descendants";)l.push(c[1]),c.splice(0,2);if(l[l.length-1]===void 0){if(t.type===0)for(let u of Object.keys(t.props)){l[l.length-1]=u;let d=r.scene.findInstance([this.uuid,...l]);d&&(d.overrideData=t.props[u],d.updateState(qd.apply(d.component.data,d.overrideData),r))}}else{let u=r.scene.findInstance([this.uuid,...l]);if(u){let d=Un.zoom(u.component.data,c);if(t={...t,path:c},t.type===0){let h=t.props;if(d)for(let[f,p]of Object.entries(t.props))p===void 0&&(h===t.props&&(h={...t.props}),h[f]=d[f]);t={...t,props:h}}u.overrideData=Tx.resolve(i.overrides,l),u.updateByOp(t,na.applySimple(u.data,t),r,!1)}}}else if(this.instances.length>0){let l;if(t.path.length===0&&t.type===0){let c;for(let u of Nd.rootOverrideProps)u in t.props&&(c===void 0&&(c={}),c[u]=t.props[u]);c&&(l={...t,props:c})}else for(let c of Nd.rootOverrideProps)if(Cr(t.path,[c])){l=t;break}l!==void 0&&this.instances.forEach(c=>{if(c.isInstanceRoot){let u=qd.filterOp(c.overrideData,l);u&&c.updateByOp(u,na.applySimple(c.data,u),r,!0)}}),this.instances.forEach(c=>{if(!c.isInstanceRoot){let u=qd.filterOp(c.overrideData,t);if(u){let d;a===c.data&&t===u?d=i:d=na.applySimple(c.data,u),c.updateByOp(u,d,r,!0)}}})}}updateByPatchedOpBase(t,i,r){if(this.dataPatched=i,t.path.length===0&&t.type===0)t.props.type!==void 0&&!Wf.is(t.props.type)&&zd.changeEntityProptotype(this,i,r);else if(t.path.length===1&&t.path[0]==="geometry"&&t.type===0&&"type"in t.props){zd.changeEntityProptotype(this,i,r);for(let n of this.children)ji.is(n)&&n.updateVisible(r.scene)}this.updateByPatchedOp(t,i,r)}updateByPatchedOp(t,i,r){var n;if(t.path.length===0&&t.type===0&&this.updateState(t.props,r),t.path[0]==="morphTargetInfluences"&&t.type===0){let a=(n=i.morphTargetInfluences.get(t.path[1]))==null?void 0:n.data.name;a&&this.updateMorphInfluences(a,r.shared.getVariable(t.props.value,[this.uuid,"morphTargetInfluences",a]))}if(Cr(t.path,["pathSnapping"])!==null&&this.updatePathSnapping(i.pathSnapping),Cr(t.path,["cloner"])!==null){let a=na.drop(t,1);a.path.length===0&&a.type===0&&a.props.disabled===!0?this.setFromClonerState(null,r):this.cloner?this.cloner.updateState(i.cloner,r.scene):(this.setFromClonerState(i.cloner,r),this.expandCloner(r.scene)),this.updateVisible(r.scene)}}updatePathSnapping(t=this.dataPatched.pathSnapping){this._updatedPathSnapping=t,this._needApplyPathSnapping=!0}get updatedPathSnapping(){return this._updatedPathSnapping}applyPathSnapping(t){var p,m,v,y,x;let i=((p=this._updatedPathSnapping)==null?void 0:p.pathId)??this.dataPatched.pathSnapping.pathId,r=((m=this._updatedPathSnapping)==null?void 0:m.slide)??this.dataPatched.pathSnapping.slide??0,n=((v=this._updatedPathSnapping)==null?void 0:v.offset)??this.dataPatched.pathSnapping.offset??0,a=((y=this._updatedPathSnapping)==null?void 0:y.orientation)??this.dataPatched.pathSnapping.orientation;if(i===null)return;let s=t.find(i);if(!s||this._needApplyPathSnapping===!1)return;this._needApplyPathSnapping=!1;let o=s.data;if(o.geometry.path.points.length<=1)return;let l=aG(o.geometry.path),c=(r+n)%1;r+n===1&&c===0&&(c=1);let u=null;try{u=l.curves.length?l.getPointAt(c):null}catch{}if(u===null)return;let d=this.parent?(x=this.parent)==null?void 0:x.matrixWorld:new pt;s.updateMatrixWorld();let h=new pt().multiplyMatrices(d.clone().invert(),s.matrixWorld);u.applyMatrix4(h);let f={position:u.toArray(),rotation:o.rotation};if(a==="tangential"){let b=new pt().extractRotation(s.matrixWorld),w=l.getTangentAt(c).applyMatrix4(b).add(u),S=new pt().lookAt(u,w,A_e),_=OC.setFromEuler(new Vn().setFromRotationMatrix(S)).multiplyScalar(kt.RAD2DEG);f={...f,rotation:_.toArray()}}this.updateTransformState(f),this.traverseEntity(b=>{b._cameraType&&b.dispatchEvent(C_e)})}updateVisible(t){var r;if(this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||((r=this.dataPatched.cloner)==null?void 0:r.hideBase)!==!0),!t)return;let i=!1;this.traverseEntity(n=>{if(n.data.type==="Splat")return i=!0,!0}),i&&t.reloadSplats()}updateState_Entity(t,i){t.name!==void 0&&(this.name=t.name),t.raycastLock!==void 0&&(this.raycastLock=t.raycastLock),t.visible!==void 0&&(this.updateVisible(i==null?void 0:i.scene),this.resetBBoxNeedsUpdate()),i&&"cloner"in t&&t.cloner!==void 0&&(this.setFromClonerState(t.cloner,i),this.updateVisible(i.scene)),this.updateTransformState(t,i)}get attachedSurfaceCloners(){return this.children.filter(t=>t instanceof zd.Cloner&&t.parameters.type==="toObject")}setFromClonerState(t,i){this.disposed||(t===null||t.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):this.cloner===void 0?(this.cloner=new zd.Cloner(this,t),i.scene.addPendingExpandCloner(this)):this.cloner.updateState(t,i.scene))}expandCloner(t){!this.disposed&&this.cloner&&this.cloner.expandClones(t)}invalidateClonerTransform(t){this.cloner&&this.cloner.invalidateTransform(t)}requestRender(){this.dispatchEvent({type:"requestRender"})}},sG=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},e.parameters);i.thetaLength=kt.clamp(i.thetaLength,0,360);let r=i.width/2,n=i.radiusTop??r,a=i.radiusBottom??r;return n===a?(n=r,a=r):n>a?(n=r,a=a*r/n):(n=n*r/a,a=r),{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width),radiusTop:n,radiusBottom:a})}}static build(e){let{width:t,depth:i,height:r,radialSegments:n,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:l,radiusTop:c,radiusBottom:u,cornerRadius:d,cornerSegments:h,hollow:f}=e.parameters,p;return l===0?(p=new Kt,p.setAttribute("position",new It([],3))):d||f?p=new oG(c,u,r,n,a,s,o,l*Math.PI/180,d,d,h,f):p=new oP(c,u,r,n,a,s,o,l*Math.PI/180),p.scale(1,1,i/t),Object.assign(p,{userData:{...e,type:"CylinderGeometry"}})}};function ld(e,t,i){i.x=e.x*t.x,i.y=e.y,i.z=e.x*t.y}function rL(e){return new Pe(e.y,-e.x)}var oG=class extends Kt{constructor(e,t,i,r,n,a,s,o,l,c,u,d,h=!1){super(),this.type="RoundedCylinderBufferGeometry",e=e!==void 0?e:1,t=t!==void 0?t:1,i=i||1,r=Math.floor(r)||8,n=Math.floor(n)||1,a=a!==void 0?a:!1,s=s!==void 0?s:0,o=o!==void 0?o:Math.PI*2,a&&(l=0,c=0);let f=[],p=[],m=[],v=[],y=0,x=i/2,b=new H,w=new H;h&&e==0&&(e=l),h&&t==0&&(t=c);let S=new Pe(e,x),_=new Pe(t,-x),E=null,C=null,A=null,M=null,T=S.clone().sub(_),P=0,D=0,k=0;d>0&&(P=Math.min(e,t)*(1-d),D=e-P,k=t-P);let L=S.clone();L.x-=P;let R=Math.PI-T.angle(),N=T.angle(),I=Math.tan(N/2),B=Math.tan(R/2),z=I+B,V=d?z:B,W=d?z:I;if(l=Math.min(l,(e-D)/V,T.length()/z),c=Math.min(c,(t-k)/W,T.length()/z),l>0){let te=l/I;E=S.clone().sub(new Pe(te,l)),d&&(A=E.clone(),A.x-=P-z*l),S.sub(T.clone().setLength(te))}if(c>0){let te=c/B;C=_.clone().sub(new Pe(te,-c)),_.add(T.clone().setLength(te)),d&&(M=C.clone(),M.x-=P-z*c,L.sub(T.clone().setLength(te)))}T=S.clone().sub(_);let G=T.length()<.5,q=[];for(let te=0;te<=r;te++){let Q=[],pe=te/r,me=pe*o+s,le=new Pe(Math.sin(me),Math.cos(me));M&&C?(ae(Q,pe,le,R,c,M,-1,!0),ae(Q,pe,le,N,c,C,-1,!1)):C?(J(Q,le,C.x,0,-1),ae(Q,pe,le,N,c,C,-1,!1)):a||J(Q,le,t,k,-1);let Z=rL(T).normalize();if(ld(Z,le,b),!G)for(let oe=0;oe<=n;oe++){let ge=oe/n,Ie=T.clone().multiplyScalar(ge).add(_);ld(Ie,le,w),p.push(w.x,w.y,w.z),m.push(b.x,b.y,b.z),v.push(pe,.5+w.y/i),Q.push(y++)}if(A&&E?(ae(Q,pe,le,R,l,E,1,!1),ae(Q,pe,le,N,l,A,1,!0)):E?(ae(Q,pe,le,R,l,E,1,!1),J(Q,le,E.x,0,1)):a||J(Q,le,e,D,1),d&&!G){let oe=rL(T).multiplyScalar(-1).normalize();ld(oe,le,b);for(let ge=0;ge<=n;ge++){let Ie=ge/n,we=T.clone().multiplyScalar(-Ie).add(L);ld(we,le,w),p.push(w.x,w.y,w.z),m.push(b.x,b.y,b.z),v.push(pe,.5+w.y/i),Q.push(y++)}}d&&!a&&Q.push(Q[0]),q.push(Q)}for(let te=0;te<q.length-1;te++)for(let Q=0;Q<q[0].length-1;Q++){if(a&&d&&Q==n)continue;let pe=q[te][Q],me=q[te+1][Q],le=q[te+1][Q+1],Z=q[te][Q+1],oe=p[le*3+0],ge=p[le*3+2];f.push(pe,me,Z),(oe!=0||ge!=0)&&f.push(me,le,Z)}o<Math.PI*2&&($(-1,q[0],s),$(1,q[q.length-1],s+o)),this.setIndex(f),this.setAttribute("position",new It(p,3)),this.setAttribute("normal",new It(m,3)),this.setAttribute("uv",new It(v,2));function ae(te,Q,pe,me,le,Z,oe,ge){for(let Ie=0;Ie<u+1;Ie++){let we=Ie/u,xe=oe<0?we:1-we;ge&&(xe-=1),xe*=me;let Se=new Pe(Math.sin(xe),Math.cos(xe)*oe),Le=Se.clone().multiplyScalar(le).add(Z);ld(Le,pe,w),p.push(w.x,w.y,w.z),ld(Se,pe,b),m.push(b.x,b.y,b.z),v.push(Q,.5+w.y/i),te.push(y++)}}function J(te,Q,pe,me,le){let Z=new H,oe=new Pe,ge=[pe,me];le<0&&ge.reverse();for(let Ie of ge)oe.set(Ie,x*le),ld(oe,Q,Z),p.push(Z.x,Z.y,Z.z),m.push(0,le,0),v.push(.5,.5),te.push(y++)}function $(te,Q,pe){let me=new Pe(Math.sin(pe),Math.cos(pe)),le=new Pe(-Math.cos(pe),Math.sin(pe)),Z=new H,oe=te<0?(we,xe,Se)=>f.push(we,xe,Se):(we,xe,Se)=>f.push(we,Se,xe),ge=new Pe((e+t+D+k)/4,0);ld(ge,me,Z),p.push(Z.x,Z.y,Z.z),m.push(le.x,0,le.y),v.push(.5,.5);let Ie=y++;for(let we of Q){let xe=p.slice(we*3,we*3+3);p.push(...xe),m.push(le.x,0,le.y);let Se=v.slice(we*2,we*2+2);v.push(...Se),y++}for(let we=Ie+1;we<y-1;we++)oe(Ie,we,we+1);oe(Ie,y-1,Ie+1)}}},M_e=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},e.parameters);return i.thetaLength=kt.clamp(i.thetaLength,0,360),{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,depth:i,height:r,radialSegments:n,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:l,cornerRadiusTop:c,cornerRadiusBottom:u,cornerSegments:d}=e.parameters,h;return l===0?(h=new Kt,h.setAttribute("position",new It([],3))):c>0||u>0||l<360?h=new oG(0,t/2,r,n,a,s,o,l*Math.PI/180,c,u,d,0,!0):h=new lP(t/2,r,n,a,s),h.scale(1,1,i/t),Object.assign(h,{userData:{...e,type:"ConeGeometry"}})}},T_e=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,widthSegments:n,heightSegments:a,depthSegments:s,cornerRadius:o,cornerSegments:l}=e.parameters,c;return o===0?c=new Cl(t,i,r,n,a,s):c=new P_e(t,i,r,n,a,s,o,l),Object.assign(c,{userData:{...e,type:"CubeGeometry"}})}},RC=Math.PI/2,P_e=class extends Kt{constructor(e=1,t=1,i=1,r=1,n=1,a=1,s=0,o=4){super(),this.type="BoxGeometry",r=Math.floor(r),n=Math.floor(n),a=Math.floor(a),o=Math.floor(o),s=Math.min(s,e/2,t/2,i/2);let l=[],c=[],u=[],d=[],h=0;f("z","y","x",-1,-1,i,t,e,a,n),f("z","y","x",1,-1,i,t,-e,a,n),f("x","z","y",1,1,e,i,t,r,a),f("x","z","y",1,-1,e,i,-t,r,a),f("x","y","z",1,-1,e,t,i,r,n),f("x","y","z",-1,-1,e,t,-i,r,n),s>0&&(p("z","y","x",-1,-1,1,i,t,e,a),p("z","y","x",1,-1,-1,i,t,e,a),p("z","y","x",-1,1,-1,i,t,e,a),p("z","y","x",1,1,1,i,t,e,a),p("x","y","z",-1,-1,-1,e,t,i,r),p("x","y","z",1,-1,1,e,t,i,r),p("x","y","z",-1,1,1,e,t,i,r),p("x","y","z",1,1,-1,e,t,i,r),p("y","x","z",-1,-1,1,t,e,i,n),p("y","x","z",1,-1,-1,t,e,i,n),p("y","x","z",1,1,1,t,e,i,n),p("y","x","z",-1,1,-1,t,e,i,n),m(1,1,1),m(-1,1,1),m(1,-1,1),m(-1,-1,1),m(1,1,-1),m(-1,1,-1),m(1,-1,-1),m(-1,-1,-1)),this.setIndex(l),this.setAttribute("position",new It(c,3)),this.setAttribute("normal",new It(u,3)),this.setAttribute("uv",new It(d,2));function f(v,y,x,b,w,S,_,E,C,A){let M=(S-2*s)/C,T=(_-2*s)/A,P=S/2-s,D=_/2-s,k=E/2,L=C+1,R=A+1,N=0,I=new H;for(let B=0;B<R;B++){let z=B*T-D;for(let V=0;V<L;V++){let W=V*M-P;I[v]=W*b,I[y]=z*w,I[x]=k,c.push(I.x,I.y,I.z),I[v]=0,I[y]=0,I[x]=E>0?1:-1,u.push(I.x,I.y,I.z),d.push(V/C),d.push(1-B/A),N+=1}}for(let B=0;B<A;B++)for(let z=0;z<C;z++){let V=h+z+L*B,W=h+z+L*(B+1),G=h+(z+1)+L*(B+1),q=h+(z+1)+L*B;l.push(V,W,q),l.push(W,G,q)}h+=N}function p(v,y,x,b,w,S,_,E,C,A){let M=(_-2*s)/A,T=_/2-s,P=E/2-s,D=C/2,k=A+1,L=0,R=new H,N=new H;for(let I=0;I<o+1;I++){let B=I/o*RC,z=Math.sin(B)*s,V=(1-Math.cos(B))*s,W=Math.sin(B),G=Math.cos(B);R[y]=(P+z)*w,R[x]=(D-V)*S,N[v]=0,N[y]=W*Math.sign(R[y]),N[x]=G*Math.sign(R[x]);for(let q=0;q<k;q++){let ae=q*M-T;R[v]=ae*b,c.push(R.x,R.y,R.z),u.push(N.x,N.y,N.z),d.push(q/A),d.push(0),L+=1}}for(let I=0;I<o;I++)for(let B=0;B<A;B++){let z=h+B+k*I,V=h+B+k*(I+1),W=h+(B+1)+k*(I+1),G=h+(B+1)+k*I;l.push(z,V,G),l.push(V,W,G)}h+=L}function m(v,y,x){let b=new H,w=new H(e/2,t/2,i/2);w.subScalar(s);let S=[],_=v*y*x>0?(C,A,M)=>l.push(C,A,M):(C,A,M)=>l.push(C,M,A);for(let C=0;C<=o;C++){let A=[],M=RC*(1-C/o),T=Math.cos(M),P=Math.sin(M),D=0;for(let k=0;k<=C;k++){let L=Math.cos(D),R=Math.sin(D);b.x=T*L,b.y=P,b.z=T*R;let N=w.clone().addScaledVector(b,s);c.push(v*N.x,y*N.y,x*N.z),u.push(v*b.x,y*b.y,x*b.z),d.push(0,0),A.push(h++),D+=RC/C}S.push(A)}let E=S.length-1;for(let C=0;C<E;C++){let A=S[C],M=S[C+1],T=A.length-1;_(A[0],M[1],M[0]);for(let P=1;P<=T;P++)_(A[P-1],A[P],M[P]),_(A[P],M[P+1],M[P])}}}},jP=class extends Kt{constructor(e=[],t=[],i="",r=1,n=.2,a=4){super(),this.type="PolyhedronGeometryRound";let s=[],o=[],l=[];c(),u(),this.setAttribute("position",new It(s,3)),this.setAttribute("normal",new It(l,3)),this.setAttribute("uv",new It(o,2));return;function c(){var N;n=Math.min(1-1e-5,n),n==0&&(a=0);let d={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[i],h=new H,f=h.clone(),p=new ba,m=n*r,v=r-m,y=a+1,x=new H,b=(I,B)=>x.subVectors(I,B).normalize(),w=(I,B)=>Array(I).fill(void 0).map(B),S=w(e.length/3,(I,B)=>new H().fromArray(e,B*3).setLength(r)),_=[],E=1e6;for(let I=0;I<S.length;I++){let B=S[I],z=[],V,W,G,q=1e10,ae=-1;for(;(ae=t.indexOf(I,ae+1))!=-1;){let Q=ae-ae%3;V=t[Q+(ae+1)%3],W=t[Q+(ae+2)%3],G=B.distanceToSquared(S[V]),q=Math.min(q,G),z.push([V,W,G])}q+=1e-6;let J=[],$=0,te=z.length;for(let Q=0;Q<te;Q++){[V,W,G]=z[$];let pe=((N=_[V])==null?void 0:N.includes(I))==!0;G<=q&&J.push(V+ +pe*E),$=z.findIndex(me=>me[0]==W)}_.push(J)}let C=[];{let I=0,B=0,z,V,W=d==3;for(let G=0;G<=a;G++){z=G*(G+1)/2,V=(G+1)*(G+2)/2;for(let q=0;q<a-G;q++)[I,B]=[z+q+G+2,V+q+G+3],C.push(z,V,...W?[B,z]:[I,V],B,I),[z,V]=[I,B];C.push(z,V,z+a+2)}}let A=h.clone(),M=h.clone(),T=h.clone(),P=h.clone(),D=h.clone(),k=[],L=w(S.length,()=>w(d,()=>h.clone()));for(let I=0;I<S.length;I++){h.copy(S[I]).normalize(),A.copy(h).multiplyScalar(v);let B=_[I];for(let J=0;J<B.length;J++){let $=B[J],te=B[(J+1)%d];p.setFromPointsAndIndices(S,I,$%E,te%E),p.b.sub(p.a).setLength(1e10).add(p.a),p.c.sub(p.a).setLength(1e10).add(p.a),p.closestPointToPoint(A,L[I][J])}let z=[],V=[],W=[],G=new H;a==0&&[...L[I]].reduce((J,$)=>J.add($),G).multiplyScalar(1/d);for(let J=0;J<d;J++){let $=[],te=(J-1+d)%d,Q=L[I][te],pe=L[I][J];h.copy(Q).sub(A),f.copy(pe).sub(A);let me=A.angleTo(h),le=h.angleTo(f),Z=Math.cos(me)*m;a==0?M.copy(G):M.copy(A).setLength(v+Z),V.push(Z);let oe=[M,Q,pe];for(let ge=0;ge<2;ge++){let Ie=oe[ge],we=oe[ge+1];P.subVectors(Ie,A),D.subVectors(we,A),T.crossVectors(P,D).normalize();for(let xe=0;xe<y;xe++){let Se=[me,le][ge]*xe/y;h.copy(P).applyAxisAngle(T,Se).add(A),z.push(h.clone()),ge&&(b(h,A),$.push([xe==0?Ie:h.clone(),x.clone()]))}ge&&(b(we,A),$.push([we,x.clone()]))}W.push($)}k.push(W);let q=2*y,ae=2;for(let J=0;J<d;J++){let $=q*J,te=q*((J+1)%d),Q=[z[$]];for(let me=1;me<y;me++){P=z[$+me],D=z[te+me],Q.push(P);for(let le=1,Z=me-ae+1;le<=Z;le++)h.lerpVectors(P,D,le/(Z+1)),h.sub(A).setLength(V[J]).add(A),Q.push(h.clone());Q.push(D)}for(let me=0;me<y;me++)Q.push(z[me+y+$]);Q.push(z[te+y]);let pe=C.map(me=>Q[me]);s.push(...pe.map(me=>[me.x,me.y,me.z]).flat()),l.push(...pe.map(me=>(b(me,A),[x.x,x.y,x.z])).flat())}}let R=[];for(let I=0;I<_.length;I++)for(let B=0;B<d;B++){let z=_[I][B];if(z<E){let V=_[z].findIndex(q=>q%E==I),W=k[I][B],G=k[z][V];for(let q=0;q<y;q++){let ae=W[q],J=G[y-q],$=W[q+1],te=G[y-(q+1)];[ae,J,$,$,J,te].forEach(Q=>{s.push(Q[0].x,Q[0].y,Q[0].z),l.push(Q[1].x,Q[1].y,Q[1].z)})}R.push(W[0][0],G[y][0],W[y][0],G[0][0])}}for(;R.length;){let I,B,z,V;[I,B]=R.splice(0,2);let W=[I];for(;I!=B;)W.push(B),z=R.indexOf(B),V=z%2,B=R.splice(z-V,2)[1-V];x.subVectors(W[0],W[1]).cross(h.subVectors(W[0],W[2])).normalize();let G=x.dot(W[0])<0;G&&x.negate();for(let q=1;q<=W.length-2;q++)[W[q+ +G],W[q+1-+G],W[0]].forEach(ae=>{s.push(ae.x,ae.y,ae.z),l.push(x.x,x.y,x.z)})}}function u(){let d=new H;for(let _=0;_<s.length;_+=3){d.x=s[_+0],d.y=s[_+1],d.z=s[_+2];let E=w(d)/2/Math.PI+.5,C=S(d)/Math.PI+.5;o.push(E,1-C)}let h=new H,f=new H,p=new H,m=new H,v=new Pe,y=new Pe,x=new Pe,b=(_,E,C,A)=>{A<0&&_.x===1&&(o[E]=_.x-1),C.x===0&&C.z===0&&(o[E]=A/2/Math.PI+.5)};for(let _=0,E=0;_<s.length;_+=9,E+=6){h.set(s[_+0],s[_+1],s[_+2]),f.set(s[_+3],s[_+4],s[_+5]),p.set(s[_+6],s[_+7],s[_+8]),v.set(o[E+0],o[E+1]),y.set(o[E+2],o[E+3]),x.set(o[E+4],o[E+5]),m.copy(h).add(f).add(p).divideScalar(3);let C=w(m);b(v,E+0,h,C),b(y,E+2,f,C),b(x,E+4,p,C)}for(let _=0;_<o.length;_+=6){let E=o[_+0],C=o[_+2],A=o[_+4],M=Math.max(E,C,A),T=Math.min(E,C,A);M>.9&&T<.1&&(E<.2&&(o[_+0]+=1),C<.2&&(o[_+2]+=1),A<.2&&(o[_+4]+=1))}function w(_){return Math.atan2(_.z,-_.x)}function S(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}}static fromJSON(e){return new jP(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},D_e=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,detail:n,corner:a,cornerSides:s}=e.parameters,o=n===0&&a!==0?new lG(t*.5,a,s):new pj(t*.5,n);return o.scale(1,i/t,r/t),Object.assign(o,{userData:{...e,type:"DodecahedronGeometry"}})}},lG=class extends jP{constructor(e=1,t=.2,i=4){let r=(1+Math.sqrt(5))/2,n=1/r,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],o="DodecahedronGeometry";super(a,s,o,e,t,i),this.type=o}static fromJSON(e){return new lG(e.radius,e.corner,e.cornerSides)}},N0=1e-12,WP=class{constructor(e){this.position=new Pe,this.startPosition=new Pe,this.uuid=kt.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new WP(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},mM=class extends WP{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new mM(this.parent).copy(this)}},Um=class extends WP{constructor(e,t){super(t),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new mM(this),new mM(this))}static create(e,t){let i=new Um(e,new Pe(...t.position));return i.controls[0].position.set(...t.controlPrevious.position),i.controls[1].position.set(...t.controlNext.position),i.roundness=t.roundness,i.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,i}getOppositeControl(e){let t=this.controls.indexOf(e);return t===0?this.controls[1]:t===1?this.controls[0]:null}applyOffsetToControls(e,t=1){for(let i=0,r=this.controls.length;i<r;i++){let n=this.controls[i];this.position.distanceTo(n.position)<=t?n.position.copy(this.position):n.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new Um(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var i,r;let e=(i=this.curveBefore)==null?void 0:i.getTangentAt(1),t=(r=this.curveAfter)==null?void 0:r.getTangentAt(0);return[e,t]}computeNormals(e=new Pe,t=new Pe){let[i,r]=this.computeTangents();return i&&r&&(nL(i,e),nL(r,t)),[e,t]}computeTangent(e=new Pe){let[t,i]=this.computeTangents();return t&&i&&e.copy(t).add(i).normalize(),e}computeNormal(e=new Pe){let[t,i]=this.computeNormals();return e.copy(t).add(i).normalize(),e}};function nL(e,t=new Pe){let i=e.length();return t.set(-e.y/i,e.x/i)}var GP=e=>e,Jv=new Pe,lS=new Pe,I_e=new Pe,O_e=new Pe,R_e=new Pe,k_e=new Pe,cG=new H,uG=new H;function L_e(e){let t=new Pe;t.addVectors(e.v0,Jv.subVectors(e.v1,e.v0).multiplyScalar(2/3));let i=new Pe;return i.addVectors(e.v2,lS.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new ul(e.v0,t,i,e.v2)}function lg(e,t,i=Number.EPSILON){return Math.abs(e-t)<i}function B_e(e,t,i=Number.EPSILON){return e.distanceTo(t)<i}function N_e(e,t,i=Number.EPSILON){return e.distanceTo(t)<i}function dG(e,t,i){let r=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),n=Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)),a=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2));return Math.acos((n*n+r*r-a*a)/(2*n*r))}function F_e(e,t,i){return sL(e,t)&&sL(t,i)&&vM(e.position,t.position,i.position)}function vM(e,t,i){return Jv.copy(t).sub(e).cross(lS.copy(i).sub(e))===0}function z_e(e,t,i,r,n){let a=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),s=(e.y+t.y)/2,o=(e.x+t.x)/2,l=Math.sqrt(Math.pow(i,2)-Math.pow(a/2,2))*(e.y-t.y)/a,c=Math.sqrt(Math.pow(i,2)-Math.pow(a/2,2))*(t.x-e.x)/a;return r.set(o+l,s+c),n.set(o-l,s-c),[r,n]}function V_e(e,t,i){let r=e.distanceTo(i),n=t.distanceTo(i);return r<n?t:e}function U_e(e,t,i,r,n,a){let s=t.x-e.x,o=t.y-e.y,l=i.x-e.x,c=i.y-e.y,u=Math.sqrt((s+l)*(s+l)+(o+c)*(o+c)),d;return dG(t,e,i)>Math.PI&&(u*=-1),lg(c,o)?d=(o+c)*(r/u-.5)*8/3/(s-l):d=(s+l)*(r/u-.5)*8/3/(c-o),n.set(t.x-d*o,t.y+d*s),a.set(i.x+d*c,i.y-d*l),[n,a]}function aL(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function sL(e,t){return vM(e.position,e.controls[1].position,t.position)&&vM(e.position,t.controls[0].position,t.position)}function H_e(e,t,i,r,n=.5){let a=Jv.subVectors(t,e).multiplyScalar(n).add(e),s=lS.subVectors(i,t).multiplyScalar(n).add(t),o=I_e.subVectors(r,i).multiplyScalar(n).add(i),l=a,c=O_e.subVectors(s,a).multiplyScalar(n).add(a),u=R_e.subVectors(o,s).multiplyScalar(n).add(s),d=o,h=k_e.subVectors(u,c).multiplyScalar(n).add(c);return[e.x,e.y,l.x,l.y,c.x,c.y,h.x,h.y,u.x,u.y,d.x,d.y,r.x,r.y]}function j_e(e,t,i=12,r=!0){let n=uG.set(0,0,0),a,s=0;for(let o=0;o<t.length;o++){let l=GP(t[o]),c=Jv,u=Nf(l,i);for(let d=0;d<=u;d++)if(l instanceof ul||l instanceof sh||l instanceof gl){if(l.getPoint(d/u,c),n.set(c.x,c.y,0),a!==void 0&&N_e(a,n))continue;a===void 0&&(a=cG),a.copy(n),e.setXYZ(s,n.x,n.y,n.z),s++}}return r&&s>1&&!(e.getX(s-1)===e.getX(0)&&e.getY(s-1)===e.getY(0)&&e.getZ(s-1)===e.getZ(0))&&(e.setXYZ(s,e.getX(0),e.getY(0),e.getZ(0)),s++),e}function W_e(e,t,i,r=12,n=!0){let a=uG.set(0,0,0),s=0,o=[];for(let l=0;l<t.length;l++){if(i[l]===!1)continue;let c,u=GP(t[l]),d=Jv,h=Nf(u,r);o.push(h);for(let f=0;f<=h;f++)if(u instanceof ul||u instanceof sh||u instanceof gl){if(u.getPoint(f/h,d),a.set(d.x,d.y,0),c==null?void 0:c.equals(a))continue;c===void 0?c=cG:(e.setXYZ(s,c.x,c.y,c.z),s++,e.setXYZ(s,a.x,a.y,a.z),s++),c.copy(a)}}return n&&s>1&&!(e.getX(s-1)===e.getX(0)&&e.getY(s-1)===e.getY(0)&&e.getZ(s-1)===e.getZ(0))&&(e.setXYZ(s,e.getX(0),e.getY(0),e.getZ(0)),s++),o}function oL(e,t=12,i=!1){let r=[];for(let n=0,a=e.length;n<a;n++){let s=e[n],o=0;if(i&&s.roundedCurveCorner!==void 0){let l=Nf(s.roundedCurveCorner,t)*.5;n>0&&(r[n-1]+=l),o+=l}s.curveAfter!==void 0&&(o+=Nf(s.curveAfter,t)),r.push(o)}return e.length>0&&i&&e[0].roundedCurveCorner!==void 0&&(r[e.length-1]+=Nf(e[0].roundedCurveCorner,t)*.5),r}function Nf(e,t=12){return e&&e instanceof Z_?t*2:e&&(e instanceof gl||e instanceof dj)?1:e&&e instanceof sP?t*e.points.length:t}function G_e(e,t,i=12,r=!0){let n,a=0;for(let s=0;s<t.length;s++){let o=GP(t[s]),l=Nf(o,i),c=Jv;for(let u=0;u<=l;u++)if(o instanceof ul||o instanceof sh||o instanceof gl){if(o.getPoint(u/l,c),n!==void 0&&B_e(n,c,N0))continue;n===void 0&&(n=lS),n.copy(c),e.push(c.x,c.y),a++}}return lg(e[0],e[e.length-2],N0)&&lg(e[1],e[e.length-1],N0)&&(e.pop(),e.pop()),r&&a>1&&!(lg(e[a-1],e[1],N0)&&lg(e[a-2],e[0],N0))&&(e.push(e[0],e[1]),a++),e}var kC=new Pe,$_e=new Pe,Z_e=new Pe,q_e=new Pe,Y_e=new Pe,K_e=new Pe,nn=class extends ix{constructor(t=100,i=100){super(),this.points=[],this.shapeHoles=[],this.plane=new As(new H(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this.isText=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=kt.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=t,this._height=i}static createFromState(t,i,r){let n=new nn;return n.isClosed=t.isClosed,n.points=t.points.map(a=>Um.create(a.id,a.data)),typeof t.roundness=="number"&&(n.roundness=t.roundness),n.shapeHoles=t.shapeHoles.map(a=>nn.createFromState(a)),i!==void 0&&r!==void 0&&n.applySize(i,r),n.update(),n}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(t){if(this._roundness!==t){this._roundness=t;for(let i=0,r=this.points.length;i<r;i++)this.points[i].roundness=t;this.needsUpdate=!0}}getPointsIndexesByIds(t){return t.map(i=>this.getPointIndexById(i)).filter(i=>i>=0)}getPointIndexById(t){let i=this.points.length,r=this.points.findIndex(n=>n.uuid===t);if(r<0){let n=i;for(let a=0,s=this.shapeHoles.length;a<s;a++){let o=this.shapeHoles[a],l=o.points.length,c=o.getPointIndexById(t);if(c<0)n+=l;else return c+n}}return r}getLineIndexById(t){return this.getPointIndexById(t)}getBezierPoint(t){if(t<=this.points.length-1)return this.points[t];if(this.shapeHoles.length>0){let i=this.points.length;for(let r=0,n=this.shapeHoles.length;r<n;r++){let a=this.shapeHoles[r],s=t-i;if(s<=a.points.length-1)return a.points[s];i+=a.points.length}}throw new Error("This shape does not have a point for this index: "+t)}getBezierPointIndex(t){let i=this.points.indexOf(t);if(i>=0)return i;if(i=this.points.length,this.shapeHoles.length>0)for(let r=0,n=this.shapeHoles.length;r<n;r++){let a=this.shapeHoles[r],s=a.points.indexOf(t);if(s>=0)return i+s;i+=a.points.length}return-1}getAllPoints(){let t=[].concat(...this.shapeHoles.map(i=>i.points));return[...this.points,...t]}applySize(t,i){t===0&&(t=.001),i===0&&(i=.001),this._width=t,this._height=i}applyScale(t,i){let r=kC.set(t,i);for(let n=0,a=this.points.length;n<a;n++){let s=this.points[n];s.position.multiply(r),s.controls[0].position.multiply(r),s.controls[1].position.multiply(r)}for(let n=0,a=this.shapeHoles.length;n<a;n++)this.shapeHoles[n].applyScale(t,i);this._update()}createPoint(t,i=0,r=kt.generateUUID()){let n;t instanceof Pe?n=t:n=new Pe(t,i);let a=new Um(r,n);return a.roundness=this.roundness,a}addPoint(t){this.points.push(t),this.needsUpdate=!0}addPointAt(t,i){this.points.splice(i,0,t),this.needsUpdate=!0}getPointByUuid(t){for(let i=0,r=this.points.length;i<r;i++){let n=this.points[i];if(n.uuid===t)return n}for(let i=0,r=this.shapeHoles.length;i<r;i++){let n=this.shapeHoles[i].getPointByUuid(t);if(n)return n}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(t){let i=this.points.indexOf(t);i>=0&&this.points.splice(i,1),this.needsUpdate=!0}removePointById(t){let i=this.points.find(r=>r.uuid===t);i&&this.removePoint(i)}update(){for(let t=0,i=this.shapeHoles.length;t<i;t++)this.shapeHoles[t].update();this._update()}extractShapePointsToBuffer(t,i=12,r=!1){this.subdivision=i,this.curveDivisions===void 0&&this.computeCurveDivisions(i);let n=r?this.roundedCurveDivisions:this.curveDivisions;return j_e(t,r?this.roundedCurves:this.curves,i,this.autoClose),n.reduce((a,s)=>a+s,0)+1}computeCurveDivisions(t=12){return this.curveDivisions=oL(this.points,t,!1),this.roundedCurveDivisions=oL(this.points,t,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(t,i,r=12){return W_e(t,this.curves,i,r,this.autoClose).reduce((n,a)=>n+a,0)*2}extractShapePointsToFlatArray(t,i=12){return this.subdivision=i,this.curveDivisions===void 0&&this.computeCurveDivisions(i),G_e(t,this.roundedCurves,i,this.autoClose)}getCurveIndexFromVertexId(t,i=!1){let r=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let n=i?this.roundedCurveDivisions:this.curveDivisions,a=0;i&&this.points[0].roundedCurveCorner!==void 0&&(a=Nf(this.points[0].roundedCurveCorner,this.subdivision)*.5);let s=t-a;s<0&&(s+=n.reduce((o,l)=>o+l,0));for(let o=0,l=n.length;o<l;o++){let c=n[o];if(s<r+c)return[o,(s-r+1)/c];r+=c}return[0,1]}getCurveT(t,i,r){let n=this.points[t],a=this.points[t>=this.points.length-1?0:t+1],s=this.curveDivisions,o=s[t];if(aL(n,a)){let c=n.position.distanceTo(a.position);return n.position.distanceTo(kC.set(r.x,r.y))/c}let l=0;for(let c=0;c<t;c++)l+=s[c];return(i-l)/o}dispose(){}_applyCurveForPoint(t,i){aL(i,t)?this.lineTo(t.position.x,t.position.y):this.bezierCurveTo(i.controls[1].position.x,i.controls[1].position.y,t.controls[0].position.x,t.controls[0].position.y,t.position.x,t.position.y);let r=this.curves[this.curves.length-1];t.curveBefore=r,i.curveAfter=r;let n=r.clone();t.roundedCurveBefore=n,i.roundedCurveAfter=n,t.roundedCurveCorner=void 0,this.roundedCurves.push(n)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let i=0,r=this.points.length;i<r;i++){let n=this.points[i];if(i===0)this.moveTo(n.position.x,n.position.y);else{let a=this.points[i-1];this._applyCurveForPoint(n,a)}}let t=this.getLastPoint();if(t!=null&&t.curveAfter&&(t.curveAfter=void 0),this.isClosed){let i=this.points[0],r=this.points[this.points.length-1];this._applyCurveForPoint(i,r)}if(this.points.length>2){let i=0;for(let r=0,n=this.points.length;r<n;r++){let a=this.points[r],s=this.points[r-1]??this.points[this.points.length-1],o=this.points[r+1]??this.points[0],l=a.roundness,c=s&&o&&F_e(s,a,o);if(!a.controlsMoved()&&l>0&&!c){let u=a.curveBefore,d=a.curveAfter;if(u===void 0||d===void 0)continue;let h=a.roundedCurveBefore,f=a.roundedCurveAfter,p=u.getLength(),m=d.getLength(),v=Math.min(l,p*.499),y=Math.min(l,m*.499),x=Math.min(v,y),b=1-x/p,w=x/m,S=u.getPointAt(b,kC),_=d.getPointAt(w,$_e);this._subSplitCurve(u,h,b,S,void 0),this._subSplitCurve(d,f,w,void 0,_);let E;if(this.useCubicForRoundedCorners){let C=dG(S,a.position,_)/2,A=Math.tan(C)*S.distanceTo(a.position),[M,T]=z_e(S,_,A,Z_e,q_e),P=V_e(M,T,a.position),[D,k]=U_e(P,S,_,A,Y_e,K_e);E=new ul(S.clone(),D.clone(),k.clone(),_.clone())}else E=new sh(S.clone(),a.position.clone(),_.clone());a.roundedCurveCorner=E,this.roundedCurves.splice(r+i,0,E),i++}}}}_subSplitCurve(t,i,r,n,a){if(t instanceof gl)n!==void 0&&i.v2.copy(n),a!==void 0&&i.v1.copy(a);else{let s=t,o=i,l=s.getUtoTmapping(r,0),c=H_e(s.v0,s.v1,s.v2,s.v3,l);return n!==void 0&&(o.v0.set(c[0],c[1]),o.v1.set(c[2],c[3]),o.v2.set(c[4],c[5]),o.v3.set(c[6],c[7])),a!==void 0&&(o.v0.set(c[6],c[7]),o.v1.set(c[8],c[9]),o.v2.set(c[10],c[11]),o.v3.set(c[12],c[13])),o}return i}clone(){let t=new nn(this._width,this._height);return t.points=this.points.map(i=>i.clone()),t.isClosed=this.isClosed,t.roundness=this.roundness,t.isMesh2D=this.isMesh2D,t.shapeHoles=this.shapeHoles.map(i=>i.clone()),t}toJSON(){return{points:this.points.reduce((t,i)=>t.concat(i.toJSON()),[]),shapeHoles:this.shapeHoles.map(t=>t.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(t){var r;this.points=[],this.pointIDs=0;let i=t.points.length/7;for(let n=0;n<i;n++){let a=n*7,s=t.points[a+0],o=t.points[a+1],l=t.points[a+2],c=t.points[a+3],u=t.points[a+4],d=t.points[a+5],h=t.points[a+6],f=new Um(kt.generateUUID(),new Pe(s,o));f.controls[0].position.set(l,c),f.controls[1].position.set(u,d),f.roundness=h,this.points.push(f)}return this.shapeHoles=(r=t.shapeHoles)!=null&&r.length?t.shapeHoles.map(n=>{let a=new nn;return a.fromJSON(n),a}):[],this.isClosed=t.isClosed,this._roundness=t.roundness,this._update(),this}fromShape(t,i=!1){this.isText=i;let r=(a,s)=>{s instanceof ul&&s.v3.equals(a.position)&&a.controls[0].position.copy(s.v2)},n=a=>{let s=[],o,l;for(o=0,l=a.length;o<l;o++)a[o]instanceof sh&&(a[o]=L_e(a[o]));for(o=0,l=a.length;o<l;o++){let d=a[o],h=o>0?a[o-1]:null,f;d instanceof ul?(f=this.createPoint(d.v0),f.controls[1].position.copy(d.v1)):d instanceof gl&&(f=this.createPoint(d.v1)),f!==void 0&&(h!==null&&r(f,h),s.push(f))}let c=a[a.length-1],u=!1;return c instanceof ul?c.v3.equals(s[0].position)&&(s[0].controls[0].position.copy(c.v2),u=!0):c instanceof gl&&c.v2.equals(s[0].position)&&(u=!0),this.isClosed=u,s};return this.points=n(t.curves),t instanceof ix&&(this.shapeHoles=t.holes.map(a=>{let s=new nn;return s.fromShape(a),s})),this.update(),this}updatePoint(t,i){let r=this.getPointByUuid(t);r&&(i.position!==void 0&&r.position.fromArray(i.position),i.roundness!==void 0&&(r.roundness=i.roundness),i.areControlsDirectionsMirrored!==void 0&&(r.areControlsDirectionsMirrored=i.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(t,i){var n;let r=(n=this.getPointByUuid(t))==null?void 0:n.controls[0];r&&(i.position&&r.position.fromArray(i.position),this.needsUpdate=!0)}updateNextControl(t,i){var n;let r=(n=this.getPointByUuid(t))==null?void 0:n.controls[1];r&&(i.position&&r.position.fromArray(i.position),this.needsUpdate=!0)}},gM=Math.PI*2;function LC({x:e,y:t},i,r,n,a){return{x:e*i+n,y:t*r+a}}function X_e(e,t){let i=t===1.5707963267948966?.551915024494:t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),r=Math.cos(e),n=Math.sin(e),a=Math.cos(e+t),s=Math.sin(e+t);return[{x:r-n*i,y:n+r*i},{x:a+s*i,y:s-a*i},{x:a,y:s}]}function lL(e,t,i,r){let n=e*r-t*i<0?-1:1,a=Math.min(1,Math.max(-1,e*i+t*r));return n*Math.acos(a)}function Q_e(e,t,i,r,n,a,s,o,l,c){let u=Math.pow(n,2),d=Math.pow(a,2),h=Math.pow(s,2),f=Math.pow(o,2),p=u*d-u*f-d*h;p<0&&(p=0),p/=u*f+d*h,p=Math.sqrt(p)*(l===c?-1:1);let m=p*n/a*o,v=p*-a/n*s,y=m+(e+i)/2,x=v+(t+r)/2,b=(s-m)/n,w=(o-v)/a,S=(-s-m)/n,_=(-o-v)/a,E=lL(1,0,b,w),C=lL(b,w,S,_);return!c&&C>0&&(C-=gM),c&&C<0&&(C+=gM),{centerx:y,centery:x,ang1:E,ang2:C}}function J_e({px:e,py:t,cx:i,cy:r,rx:n,ry:a,largeArcFlag:s,sweepFlag:o}){let l=[];if(n===0||a===0)return[];let c=(e-i)/2,u=(t-r)/2;if(c===0&&u===0)return[];n=Math.abs(n),a=Math.abs(a);let d=Math.pow(c,2)/Math.pow(n,2)+Math.pow(u,2)/Math.pow(a,2);d>1&&(n*=Math.sqrt(d),a*=Math.sqrt(d));let h=Q_e(e,t,i,r,n,a,c,u,s,o),{ang1:f,ang2:p}=h,{centerx:m,centery:v}=h,y=Math.abs(p)/(gM/4);Math.abs(1-y)<1e-7&&(y=1);let x=Math.max(Math.ceil(y),1);p/=x;for(let b=0;b<x;b++)l.push(X_e(f,p)),f+=p;return l.map(b=>{let{x:w,y:S}=LC(b[0],n,a,m,v),{x:_,y:E}=LC(b[1],n,a,m,v),{x:C,y:A}=LC(b[2],n,a,m,v);return{x1:w,y1:S,x2:_,y2:E,x:C,y:A}})}var yr;(function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(yr||(yr={}));var Cn;(function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(Cn||(Cn={}));function li(e,t){if(!e)throw t||"Assertion Failed!"}var Jt=function(){function e(){}return e.vertEq=function(t,i){return t.s===i.s&&t.t===i.t},e.vertLeq=function(t,i){return t.s<i.s||t.s===i.s&&t.t<=i.t},e.transLeq=function(t,i){return t.t<i.t||t.t===i.t&&t.s<=i.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(t,i){return Math.abs(t.s-i.s)+Math.abs(t.t-i.t)},e.edgeEval=function(t,i,r){li(e.vertLeq(t,i)&&e.vertLeq(i,r));var n=i.s-t.s,a=r.s-i.s;return n+a>0?n<a?i.t-t.t+(t.t-r.t)*(n/(n+a)):i.t-r.t+(r.t-t.t)*(a/(n+a)):0},e.edgeSign=function(t,i,r){li(e.vertLeq(t,i)&&e.vertLeq(i,r));var n=i.s-t.s,a=r.s-i.s;return n+a>0?(i.t-r.t)*n+(i.t-t.t)*a:0},e.transEval=function(t,i,r){li(e.transLeq(t,i)&&e.transLeq(i,r));var n=i.t-t.t,a=r.t-i.t;return n+a>0?n<a?i.s-t.s+(t.s-r.s)*(n/(n+a)):i.s-r.s+(r.s-t.s)*(a/(n+a)):0},e.transSign=function(t,i,r){li(e.transLeq(t,i)&&e.transLeq(i,r));var n=i.t-t.t,a=r.t-i.t;return n+a>0?(i.s-r.s)*n+(i.s-t.s)*a:0},e.vertCCW=function(t,i,r){return t.s*(i.t-r.t)+i.s*(r.t-t.t)+r.s*(t.t-i.t)>=0},e.interpolate=function(t,i,r,n){return t=t<0?0:t,r=r<0?0:r,t<=r?r===0?(i+n)/2:i+(n-i)*(t/(t+r)):n+(i-n)*(r/(t+r))},e.intersect=function(t,i,r,n,a){var s,o,l;e.vertLeq(t,i)||(l=t,t=i,i=l),e.vertLeq(r,n)||(l=r,r=n,n=l),e.vertLeq(t,r)||(l=t,t=r,r=l,l=i,i=n,n=l),e.vertLeq(r,i)?e.vertLeq(i,n)?(s=e.edgeEval(t,r,i),o=e.edgeEval(r,i,n),s+o<0&&(s=-s,o=-o),a.s=e.interpolate(s,r.s,o,i.s)):(s=e.edgeSign(t,r,i),o=-e.edgeSign(t,n,i),s+o<0&&(s=-s,o=-o),a.s=e.interpolate(s,r.s,o,n.s)):a.s=(r.s+i.s)/2,e.transLeq(t,i)||(l=t,t=i,i=l),e.transLeq(r,n)||(l=r,r=n,n=l),e.transLeq(t,r)||(l=t,t=r,r=l,l=i,i=n,n=l),e.transLeq(r,i)?e.transLeq(i,n)?(s=e.transEval(t,r,i),o=e.transEval(r,i,n),s+o<0&&(s=-s,o=-o),a.t=e.interpolate(s,r.t,o,i.t)):(s=e.transSign(t,r,i),o=-e.transSign(t,n,i),s+o<0&&(s=-s,o=-o),a.t=e.interpolate(s,r.t,o,n.t)):a.t=(r.t+i.t)/2},e}(),F0=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return e}(),jb=function(){function e(t){this.side=t,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(t){this.Sym.Lface=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(t){this.Sym.Org=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(t){this.Sym.Lnext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(t){this.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(t){this.Lnext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(t){this.Sym.Onext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(t){this.Sym.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(t){this.Sym.Lnext.Sym=t},enumerable:!0,configurable:!0}),e}(),lm=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return e}(),cL=function(){function e(){var t=new lm,i=new F0,r=new jb(0),n=new jb(1);t.next=t.prev=t,t.anEdge=null,i.next=i.prev=i,r.next=r,r.Sym=n,n.next=n,n.Sym=r,this.vHead=t,this.fHead=i,this.eHead=r,this.eHeadSym=n}return e.prototype.makeEdge_=function(t){var i=new jb(0),r=new jb(1);t.Sym.side<t.side&&(t=t.Sym);var n=t.Sym.next;return r.next=n,n.Sym.next=i,i.next=t,t.Sym.next=r,i.Sym=r,i.Onext=i,i.Lnext=r,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,r.Sym=i,r.Onext=r,r.Lnext=i,r.Org=null,r.Lface=null,r.winding=0,r.activeRegion=null,i},e.prototype.splice_=function(t,i){var r=t.Onext,n=i.Onext;r.Sym.Lnext=i,n.Sym.Lnext=t,t.Onext=n,i.Onext=r},e.prototype.makeVertex_=function(t,i,r){var n=t;li(n,"Vertex can't be null!");var a=r.prev;n.prev=a,a.next=n,n.next=r,r.prev=n,n.anEdge=i;var s=i;do s.Org=n,s=s.Onext;while(s!==i)},e.prototype.makeFace_=function(t,i,r){var n=t;li(n,"Face can't be null");var a=r.prev;n.prev=a,a.next=n,n.next=r,r.prev=n,n.anEdge=i,n.trail=null,n.marked=!1,n.inside=r.inside;var s=i;do s.Lface=n,s=s.Lnext;while(s!==i)},e.prototype.killEdge_=function(t){t.Sym.side<t.side&&(t=t.Sym);var i=t.next,r=t.Sym.next;i.Sym.next=r,r.Sym.next=i},e.prototype.killVertex_=function(t,i){var r=t.anEdge,n=r;do n.Org=i,n=n.Onext;while(n!==r);var a=t.prev,s=t.next;s.prev=a,a.next=s},e.prototype.killFace_=function(t,i){var r=t.anEdge,n=r;do n.Lface=i,n=n.Lnext;while(n!==r);var a=t.prev,s=t.next;s.prev=a,a.next=s},e.prototype.makeEdge=function(){var t=new lm,i=new lm,r=new F0,n=this.makeEdge_(this.eHead);return this.makeVertex_(t,n,this.vHead),this.makeVertex_(i,n.Sym,this.vHead),this.makeFace_(r,n,this.fHead),n},e.prototype.splice=function(t,i){var r=!1,n=!1;if(t!==i){if(i.Org!==t.Org&&(n=!0,this.killVertex_(i.Org,t.Org)),i.Lface!==t.Lface&&(r=!0,this.killFace_(i.Lface,t.Lface)),this.splice_(i,t),!n){var a=new lm;this.makeVertex_(a,i,t.Org),t.Org.anEdge=t}if(!r){var s=new F0;this.makeFace_(s,i,t.Lface),t.Lface.anEdge=t}}},e.prototype.delete=function(t){var i=t.Sym,r=!1;if(t.Lface!==t.Rface&&(r=!0,this.killFace_(t.Lface,t.Rface)),t.Onext===t)this.killVertex_(t.Org,null);else if(t.Rface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev),!r){var n=new F0;this.makeFace_(n,t,t.Lface)}i.Onext===i?(this.killVertex_(i.Org,null),this.killFace_(i.Lface,null)):(t.Lface.anEdge=i.Oprev,i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),this.killEdge_(t)},e.prototype.addEdgeVertex=function(t){var i=this.makeEdge_(t),r=i.Sym;this.splice_(i,t.Lnext),i.Org=t.Dst;var n=new lm;return this.makeVertex_(n,r,i.Org),i.Lface=r.Lface=t.Lface,i},e.prototype.splitEdge=function(t){var i=this.addEdgeVertex(t),r=i.Sym;return this.splice_(t.Sym,t.Sym.Oprev),this.splice_(t.Sym,r),t.Dst=r.Org,r.Dst.anEdge=r.Sym,r.Rface=t.Rface,r.winding=t.winding,r.Sym.winding=t.Sym.winding,r.idx=t.idx,r.Sym.idx=t.Sym.idx,r},e.prototype.connect=function(t,i){var r=!1,n=this.makeEdge_(t),a=n.Sym;if(i.Lface!==t.Lface&&(r=!0,this.killFace_(i.Lface,t.Lface)),this.splice_(n,t.Lnext),this.splice_(a,i),n.Org=t.Dst,a.Org=i.Org,n.Lface=a.Lface=t.Lface,t.Lface.anEdge=a,!r){var s=new F0;this.makeFace_(s,n,t.Lface)}return n},e.prototype.zapFace=function(t){var i=t.anEdge,r,n,a,s,o;n=i.Lnext;do r=n,n=r.Lnext,r.Lface=null,r.Rface===null&&(r.Onext===r?this.killVertex_(r.Org,null):(r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),a=r.Sym,a.Onext===a?this.killVertex_(a.Org,null):(a.Org.anEdge=a.Onext,this.splice_(a,a.Oprev)),this.killEdge_(r));while(r!=i);s=t.prev,o=t.next,o.prev=s,s.next=o},e.prototype.countFaceVerts_=function(t){var i=t.anEdge,r=0;do r++,i=i.Lnext;while(i!==t.anEdge);return r},e.prototype.mergeConvexFaces=function(t){var i,r,n,a,s,o,l;for(i=this.fHead.next;i!==this.fHead;i=i.next)if(i.inside)for(r=i.anEdge,s=r.Org;n=r.Lnext,a=r.Sym,a&&a.Lface&&a.Lface.inside&&(o=this.countFaceVerts_(i),l=this.countFaceVerts_(a.Lface),o+l-2<=t&&Jt.vertCCW(r.Lprev.Org,r.Org,a.Lnext.Lnext.Org)&&Jt.vertCCW(a.Lprev.Org,a.Org,r.Lnext.Lnext.Org)&&(n=a.Lnext,this.delete(a),r=null,a=null)),!(r&&r.Lnext.Org===s);)r=n;return!0},e.prototype.check=function(){var t=this.fHead,i=this.vHead,r=this.eHead,n,a,s,o,l,c;for(a=t,a=t;(n=a.next)!==t;a=n){li(n.prev===a),l=n.anEdge;do li(l.Sym!==l),li(l.Sym.Sym===l),li(l.Lnext.Onext.Sym===l),li(l.Onext.Sym.Lnext===l),li(l.Lface===n),l=l.Lnext;while(l!==n.anEdge)}for(li(n.prev===a&&n.anEdge===null),o=i,o=i;(s=o.next)!==i;o=s){li(s.prev===o),l=s.anEdge;do li(l.Sym!==l),li(l.Sym.Sym===l),li(l.Lnext.Onext.Sym===l),li(l.Onext.Sym.Lnext===l),li(l.Org===s),l=l.Onext;while(l!==s.anEdge)}for(li(s.prev===o&&s.anEdge===null),c=r,c=r;(l=c.next)!==r;c=l)li(l.Sym.next===c.Sym),li(l.Sym!==l),li(l.Sym.Sym===l),li(l.Org!==null),li(l.Dst!==null),li(l.Lnext.Onext.Sym===l),li(l.Onext.Sym.Lnext===l);li(l.Sym.next===c.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},e}(),uL=function(){function e(){this.handle=null}return e}(),dL=function(){function e(){this.key=null,this.node=0}return e}(),eSe=function(){function e(t,i){this.leq=i,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=t,this.nodes=[],this.handles=[];for(var r=0;r<t+1;r++)this.nodes[r]=new uL,this.handles[r]=new dL;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(t){var i=this.nodes,r=this.handles,n,a,s;for(n=i[t].handle;;){if(s=t<<1,s<this.size&&this.leq(r[i[s+1].handle].key,r[i[s].handle].key)&&++s,li(s<=this.max),a=i[s].handle,s>this.size||this.leq(r[n].key,r[a].key)){i[t].handle=n,r[n].node=t;break}i[t].handle=a,r[a].node=t,t=s}},e.prototype.floatUp_=function(t){var i=this.nodes,r=this.handles,n,a,s;for(n=i[t].handle;;){if(s=t>>1,a=i[s].handle,s===0||this.leq(r[a].key,r[n].key)){i[t].handle=n,r[n].node=t;break}i[t].handle=a,r[a].node=t,t=s}},e.prototype.init=function(){for(var t=this.size;t>=1;--t)this.floatDown_(t);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(t){var i,r;if(i=++this.size,i*2>this.max){this.max*=2;var n,a;for(a=this.nodes.length,this.nodes.length=this.max+1,n=a;n<this.nodes.length;n++)this.nodes[n]=new uL;for(a=this.handles.length,this.handles.length=this.max+1,n=a;n<this.handles.length;n++)this.handles[n]=new dL}return this.freeList===0?r=i:(r=this.freeList,this.freeList=this.handles[r].node),this.nodes[i].handle=r,this.handles[r].node=i,this.handles[r].key=t,this.initialized&&this.floatUp_(i),r},e.prototype.extractMin=function(){var t=this.nodes,i=this.handles,r=t[1].handle,n=i[r].key;return this.size>0&&(t[1].handle=t[this.size].handle,i[t[1].handle].node=1,i[r].key=null,i[r].node=this.freeList,this.freeList=r,--this.size,this.size>0&&this.floatDown_(1)),n},e.prototype.delete=function(t){var i=this.nodes,r=this.handles,n;li(t>=1&&t<=this.max&&r[t].key!==null),n=r[t].node,i[n].handle=i[this.size].handle,r[i[n].handle].node=n,--this.size,n<=this.size&&(n<=1||this.leq(r[i[n>>1].handle].key,r[i[n].handle].key)?this.floatDown_(n):this.floatUp_(n)),r[t].key=null,r[t].node=this.freeList,this.freeList=t},e}(),BC=function(){function e(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return e}(),hL=function(){function e(){this.key=null,this.next=null,this.prev=null}return e}(),tSe=function(){function e(t,i){this.frame=t,this.leq=i,this.head=new hL,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(t){return this.insertBefore(this.head,t)},e.prototype.search=function(t){var i=this.head;do i=i.next;while(i.key!==null&&!this.leq(this.frame,t,i.key));return i},e.prototype.insertBefore=function(t,i){do t=t.prev;while(t.key!==null&&!this.leq(this.frame,t.key,i));var r=new hL;return r.key=i,r.next=t.next,t.next.prev=r,r.prev=t,t.next=r,r},e.prototype.delete=function(t){t.next.prev=t.prev,t.prev.next=t.next},e}(),iSe=function(){function e(){}return e.regionBelow=function(t){return t.nodeUp.prev.key},e.regionAbove=function(t){return t.nodeUp.next.key},e.debugEvent=function(t){},e.addWinding=function(t,i){t.winding+=i.winding,t.Sym.winding+=i.Sym.winding},e.edgeLeq=function(t,i,r){var n=t.event,a=i.eUp,s=r.eUp;if(a.Dst===n)return s.Dst===n?Jt.vertLeq(a.Org,s.Org)?Jt.edgeSign(s.Dst,a.Org,s.Org)<=0:Jt.edgeSign(a.Dst,s.Org,a.Org)>=0:Jt.edgeSign(s.Dst,n,s.Org)<=0;if(s.Dst===n)return Jt.edgeSign(a.Dst,n,a.Org)>=0;var o=Jt.edgeEval(a.Dst,n,a.Org),l=Jt.edgeEval(s.Dst,n,s.Org);return o>=l},e.deleteRegion=function(t,i){i.fixUpperEdge&&li(i.eUp.winding===0),i.eUp.activeRegion=null,t.dict.delete(i.nodeUp)},e.fixUpperEdge=function(t,i,r){li(i.fixUpperEdge),t.mesh.delete(i.eUp),i.fixUpperEdge=!1,i.eUp=r,r.activeRegion=i},e.topLeftRegion=function(t,i){var r=i.eUp.Org,n;do i=e.regionAbove(i);while(i.eUp.Org===r);if(i.fixUpperEdge){if(n=t.mesh.connect(e.regionBelow(i).eUp.Sym,i.eUp.Lnext),n===null)return null;e.fixUpperEdge(t,i,n),i=e.regionAbove(i)}return i},e.topRightRegion=function(t){var i=t.eUp.Dst;do t=e.regionAbove(t);while(t.eUp.Dst===i);return t},e.addRegionBelow=function(t,i,r){var n=new BC;return n.eUp=r,n.nodeUp=t.dict.insertBefore(i.nodeUp,n),n.fixUpperEdge=!1,n.sentinel=!1,n.dirty=!1,r.activeRegion=n,n},e.isWindingInside=function(t,i){switch(t.windingRule){case yr.ODD:return(i&1)!==0;case yr.NONZERO:return i!==0;case yr.POSITIVE:return i>0;case yr.NEGATIVE:return i<0;case yr.ABS_GEQ_TWO:return i>=2||i<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,i){i.windingNumber=e.regionAbove(i).windingNumber+i.eUp.winding,i.inside=e.isWindingInside(t,i.windingNumber)},e.finishRegion=function(t,i){var r=i.eUp,n=r.Lface;n.inside=i.inside,n.anEdge=r,e.deleteRegion(t,i)},e.finishLeftRegions=function(t,i,r){for(var n,a=null,s=i,o=i.eUp;s!==r;){if(s.fixUpperEdge=!1,a=e.regionBelow(s),n=a.eUp,n.Org!=o.Org){if(!a.fixUpperEdge){e.finishRegion(t,s);break}n=t.mesh.connect(o.Lprev,n.Sym),e.fixUpperEdge(t,a,n)}o.Onext!==n&&(t.mesh.splice(n.Oprev,n),t.mesh.splice(o,n)),e.finishRegion(t,s),o=a.eUp,s=a}return o},e.addRightEdges=function(t,i,r,n,a,s){var o,l,c,u,d=!0;c=r;do li(Jt.vertLeq(c.Org,c.Dst)),e.addRegionBelow(t,i,c.Sym),c=c.Onext;while(c!==n);for(a===null&&(a=e.regionBelow(i).eUp.Rprev),l=i,u=a;o=e.regionBelow(l),c=o.eUp.Sym,c.Org===u.Org;)c.Onext!==u&&(t.mesh.splice(c.Oprev,c),t.mesh.splice(u.Oprev,c)),o.windingNumber=l.windingNumber-c.winding,o.inside=e.isWindingInside(t,o.windingNumber),l.dirty=!0,!d&&e.checkForRightSplice(t,l)&&(e.addWinding(c,u),e.deleteRegion(t,l),t.mesh.delete(u)),d=!1,l=o,u=c;l.dirty=!0,li(l.windingNumber-c.winding===o.windingNumber),s&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(t,i,r){t.mesh.splice(i,r)},e.vertexWeights=function(t,i,r){var n=Jt.vertL1dist(i,t),a=Jt.vertL1dist(r,t),s=.5*a/(n+a),o=.5*n/(n+a);t.coords[0]+=s*i.coords[0]+o*r.coords[0],t.coords[1]+=s*i.coords[1]+o*r.coords[1],t.coords[2]+=s*i.coords[2]+o*r.coords[2]},e.getIntersectData=function(t,i,r,n,a,s){i.coords[0]=i.coords[1]=i.coords[2]=0,i.idx=-1,e.vertexWeights(i,r,n),e.vertexWeights(i,a,s)},e.checkForRightSplice=function(t,i){var r=e.regionBelow(i),n=i.eUp,a=r.eUp;if(Jt.vertLeq(n.Org,a.Org)){if(Jt.edgeSign(a.Dst,n.Org,a.Org)>0)return!1;Jt.vertEq(n.Org,a.Org)?n.Org!==a.Org&&(t.pq.delete(n.Org.pqHandle),e.spliceMergeVertices(t,a.Oprev,n)):(t.mesh.splitEdge(a.Sym),t.mesh.splice(n,a.Oprev),i.dirty=r.dirty=!0)}else{if(Jt.edgeSign(n.Dst,a.Org,n.Org)<0)return!1;e.regionAbove(i).dirty=i.dirty=!0,t.mesh.splitEdge(n.Sym),t.mesh.splice(a.Oprev,n)}return!0},e.checkForLeftSplice=function(t,i){var r=e.regionBelow(i),n=i.eUp,a=r.eUp,s;if(li(!Jt.vertEq(n.Dst,a.Dst)),Jt.vertLeq(n.Dst,a.Dst)){if(Jt.edgeSign(n.Dst,a.Dst,n.Org)<0)return!1;e.regionAbove(i).dirty=i.dirty=!0,s=t.mesh.splitEdge(n),t.mesh.splice(a.Sym,s),s.Lface.inside=i.inside}else{if(Jt.edgeSign(a.Dst,n.Dst,a.Org)>0)return!1;i.dirty=r.dirty=!0,s=t.mesh.splitEdge(a),t.mesh.splice(n.Lnext,a.Sym),s.Rface.inside=i.inside}return!0},e.checkForIntersect=function(t,i){var r=e.regionBelow(i),n=i.eUp,a=r.eUp,s=n.Org,o=a.Org,l=n.Dst,c=a.Dst,u,d,h=new lm,f,p;if(li(!Jt.vertEq(c,l)),li(Jt.edgeSign(l,t.event,s)<=0),li(Jt.edgeSign(c,t.event,o)>=0),li(s!==t.event&&o!==t.event),li(!i.fixUpperEdge&&!r.fixUpperEdge),s===o||(u=Math.min(s.t,l.t),d=Math.max(o.t,c.t),u>d))return!1;if(Jt.vertLeq(s,o)){if(Jt.edgeSign(c,s,o)>0)return!1}else if(Jt.edgeSign(l,o,s)<0)return!1;return e.debugEvent(t),Jt.intersect(l,s,c,o,h),li(Math.min(s.t,l.t)<=h.t),li(h.t<=Math.max(o.t,c.t)),li(Math.min(c.s,l.s)<=h.s),li(h.s<=Math.max(o.s,s.s)),Jt.vertLeq(h,t.event)&&(h.s=t.event.s,h.t=t.event.t),f=Jt.vertLeq(s,o)?s:o,Jt.vertLeq(f,h)&&(h.s=f.s,h.t=f.t),Jt.vertEq(h,s)||Jt.vertEq(h,o)?(e.checkForRightSplice(t,i),!1):!Jt.vertEq(l,t.event)&&Jt.edgeSign(l,t.event,h)>=0||!Jt.vertEq(c,t.event)&&Jt.edgeSign(c,t.event,h)<=0?c===t.event?(t.mesh.splitEdge(n.Sym),t.mesh.splice(a.Sym,n),i=e.topLeftRegion(t,i),n=e.regionBelow(i).eUp,e.finishLeftRegions(t,e.regionBelow(i),r),e.addRightEdges(t,i,n.Oprev,n,n,!0),!0):l===t.event?(t.mesh.splitEdge(a.Sym),t.mesh.splice(n.Lnext,a.Oprev),r=i,i=e.topRightRegion(i),p=e.regionBelow(i).eUp.Rprev,r.eUp=a.Oprev,a=e.finishLeftRegions(t,r,null),e.addRightEdges(t,i,a.Onext,n.Rprev,p,!0),!0):(Jt.edgeSign(l,t.event,h)>=0&&(e.regionAbove(i).dirty=i.dirty=!0,t.mesh.splitEdge(n.Sym),n.Org.s=t.event.s,n.Org.t=t.event.t),Jt.edgeSign(c,t.event,h)<=0&&(i.dirty=r.dirty=!0,t.mesh.splitEdge(a.Sym),a.Org.s=t.event.s,a.Org.t=t.event.t),!1):(t.mesh.splitEdge(n.Sym),t.mesh.splitEdge(a.Sym),t.mesh.splice(a.Oprev,n),n.Org.s=h.s,n.Org.t=h.t,n.Org.pqHandle=t.pq.insert(n.Org),e.getIntersectData(t,n.Org,s,l,o,c),e.regionAbove(i).dirty=i.dirty=r.dirty=!0,!1)},e.walkDirtyRegions=function(t,i){for(var r=e.regionBelow(i),n,a;;){for(;r.dirty;)i=r,r=e.regionBelow(r);if(!i.dirty&&(r=i,i=e.regionAbove(i),i===null||!i.dirty))return;if(i.dirty=!1,n=i.eUp,a=r.eUp,n.Dst!==a.Dst&&e.checkForLeftSplice(t,i)&&(r.fixUpperEdge?(e.deleteRegion(t,r),t.mesh.delete(a),r=e.regionBelow(i),a=r.eUp):i.fixUpperEdge&&(e.deleteRegion(t,i),t.mesh.delete(n),i=e.regionAbove(r),n=i.eUp)),n.Org!==a.Org)if(n.Dst!==a.Dst&&!i.fixUpperEdge&&!r.fixUpperEdge&&(n.Dst===t.event||a.Dst===t.event)){if(e.checkForIntersect(t,i))return}else e.checkForRightSplice(t,i);n.Org===a.Org&&n.Dst===a.Dst&&(e.addWinding(a,n),e.deleteRegion(t,i),t.mesh.delete(n),i=e.regionAbove(r))}},e.connectRightVertex=function(t,i,r){var n,a=r.Onext,s=e.regionBelow(i),o=i.eUp,l=s.eUp,c=!1;if(o.Dst!==l.Dst&&e.checkForIntersect(t,i),Jt.vertEq(o.Org,t.event)&&(t.mesh.splice(a.Oprev,o),i=e.topLeftRegion(t,i),a=e.regionBelow(i).eUp,e.finishLeftRegions(t,e.regionBelow(i),s),c=!0),Jt.vertEq(l.Org,t.event)&&(t.mesh.splice(r,l.Oprev),r=e.finishLeftRegions(t,s,null),c=!0),c){e.addRightEdges(t,i,r.Onext,a,a,!0);return}Jt.vertLeq(l.Org,o.Org)?n=l.Oprev:n=o,n=t.mesh.connect(r.Lprev,n),e.addRightEdges(t,i,n,n.Onext,n.Onext,!1),n.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,i)},e.connectLeftDegenerate=function(t,i,r){var n,a,s,o,l;if(n=i.eUp,Jt.vertEq(n.Org,r)){li(!1),e.spliceMergeVertices(t,n,r.anEdge);return}if(!Jt.vertEq(n.Dst,r)){t.mesh.splitEdge(n.Sym),i.fixUpperEdge&&(t.mesh.delete(n.Onext),i.fixUpperEdge=!1),t.mesh.splice(r.anEdge,n),e.sweepEvent(t,r);return}li(!1),i=e.topRightRegion(i),l=e.regionBelow(i),s=l.eUp.Sym,a=o=s.Onext,l.fixUpperEdge&&(li(a!==s),e.deleteRegion(t,l),t.mesh.delete(s),s=a.Oprev),t.mesh.splice(r.anEdge,s),Jt.edgeGoesLeft(a)||(a=null),e.addRightEdges(t,i,s.Onext,o,a,!0)},e.connectLeftVertex=function(t,i){var r,n,a,s,o,l,c=new BC;if(c.eUp=i.anEdge.Sym,r=t.dict.search(c).key,n=e.regionBelow(r),!!n){if(s=r.eUp,o=n.eUp,Jt.edgeSign(s.Dst,i,s.Org)===0){e.connectLeftDegenerate(t,r,i);return}if(a=Jt.vertLeq(o.Dst,s.Dst)?r:n,r.inside||a.fixUpperEdge){if(a===r)l=t.mesh.connect(i.anEdge.Sym,s.Lnext);else{var u=t.mesh.connect(o.Dnext,i.anEdge);l=u.Sym}a.fixUpperEdge?e.fixUpperEdge(t,a,l):e.computeWinding(t,e.addRegionBelow(t,r,l)),e.sweepEvent(t,i)}else e.addRightEdges(t,r,i.anEdge,i.anEdge,null,!0)}},e.sweepEvent=function(t,i){t.event=i,e.debugEvent(t);for(var r=i.anEdge;r.activeRegion===null;)if(r=r.Onext,r===i.anEdge){e.connectLeftVertex(t,i);return}var n=e.topLeftRegion(t,r.activeRegion);li(n!==null);var a=e.regionBelow(n),s=a.eUp,o=e.finishLeftRegions(t,a,null);o.Onext===s?e.connectRightVertex(t,n,o):e.addRightEdges(t,n,o.Onext,s,s,!0)},e.addSentinel=function(t,i,r,n){var a=new BC,s=t.mesh.makeEdge();s.Org.s=r,s.Org.t=n,s.Dst.s=i,s.Dst.t=n,t.event=s.Dst,a.eUp=s,a.windingNumber=0,a.inside=!1,a.fixUpperEdge=!1,a.sentinel=!0,a.dirty=!1,a.nodeUp=t.dict.insert(a)},e.initEdgeDict=function(t){t.dict=new tSe(t,e.edgeLeq);var i=t.bmax[0]-t.bmin[0],r=t.bmax[1]-t.bmin[1],n=t.bmin[0]-i,a=t.bmax[0]+i,s=t.bmin[1]-r,o=t.bmax[1]+r;e.addSentinel(t,n,a,s),e.addSentinel(t,n,a,o)},e.doneEdgeDict=function(t){for(var i,r=0;(i=t.dict.min().key)!==null;)i.sentinel||(li(i.fixUpperEdge),li(++r===1)),li(i.windingNumber===0),e.deleteRegion(t,i)},e.removeDegenerateEdges=function(t){var i,r,n,a=t.mesh.eHead;for(i=a.next;i!==a;i=r)r=i.next,n=i.Lnext,Jt.vertEq(i.Org,i.Dst)&&i.Lnext.Lnext!==i&&(e.spliceMergeVertices(t,n,i),t.mesh.delete(i),i=n,n=i.Lnext),n.Lnext===i&&(n!==i&&((n===r||n===r.Sym)&&(r=r.next),t.mesh.delete(n)),(i===r||i===r.Sym)&&(r=r.next),t.mesh.delete(i))},e.initPriorityQ=function(t){var i,r,n,a=0;for(n=t.mesh.vHead,r=n.next;r!==n;r=r.next)a++;for(a+=8,i=t.pq=new eSe(a,Jt.vertLeq),n=t.mesh.vHead,r=n.next;r!==n;r=r.next)r.pqHandle=i.insert(r);return r!==n?!1:(i.init(),!0)},e.donePriorityQ=function(t){t.pq=null},e.removeDegenerateFaces=function(t,i){var r,n,a;for(r=i.fHead.next;r!==i.fHead;r=n)n=r.next,a=r.anEdge,li(a.Lnext!==a),a.Lnext.Lnext===a&&(e.addWinding(a.Onext,a),t.mesh.delete(a));return!0},e.computeInterior=function(t,i){i===void 0&&(i=!0);var r,n;if(e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);(r=t.pq.extractMin())!==null;){for(;n=t.pq.min(),!(n===null||!Jt.vertEq(n,r));)n=t.pq.extractMin(),e.spliceMergeVertices(t,r.anEdge,n.anEdge);e.sweepEvent(t,r)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),e.removeDegenerateFaces(t,t.mesh)?(i&&t.mesh.check(),!0):!1},e}(),rSe=function(){function e(){this.mesh=new cL,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=yr.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]},e.prototype.normalize_=function(t){var i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(!i)throw"Zero-size vector!";i=Math.sqrt(i),t[0]/=i,t[1]/=i,t[2]/=i},e.prototype.longAxis_=function(t){var i=0;return Math.abs(t[1])>Math.abs(t[0])&&(i=1),Math.abs(t[2])>Math.abs(t[i])&&(i=2),i},e.prototype.computeNormal_=function(t){var i,r,n,a,s,o,l=[0,0,0],c=[0,0,0],u=[0,0,0],d=[0,0,0],h=[0,0,0],f=[null,null,null],p=[null,null,null],m=this.mesh.vHead;i=m.next;for(var v=0;v<3;++v)a=i.coords[v],c[v]=a,p[v]=i,l[v]=a,f[v]=i;for(i=m.next;i!==m;i=i.next)for(var y=0;y<3;++y)a=i.coords[y],a<c[y]&&(c[y]=a,p[y]=i),a>l[y]&&(l[y]=a,f[y]=i);var x=0;if(l[1]-c[1]>l[0]-c[0]&&(x=1),l[2]-c[2]>l[x]-c[x]&&(x=2),c[x]>=l[x]){t[0]=0,t[1]=0,t[2]=1;return}for(o=0,r=p[x],n=f[x],u[0]=r.coords[0]-n.coords[0],u[1]=r.coords[1]-n.coords[1],u[2]=r.coords[2]-n.coords[2],i=m.next;i!==m;i=i.next)d[0]=i.coords[0]-n.coords[0],d[1]=i.coords[1]-n.coords[1],d[2]=i.coords[2]-n.coords[2],h[0]=u[1]*d[2]-u[2]*d[1],h[1]=u[2]*d[0]-u[0]*d[2],h[2]=u[0]*d[1]-u[1]*d[0],s=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],s>o&&(o=s,t[0]=h[0],t[1]=h[1],t[2]=h[2]);o<=0&&(t[0]=t[1]=t[2]=0,t[this.longAxis_(u)]=1)},e.prototype.checkOrientation_=function(){for(var t=this.mesh.fHead,i,r=this.mesh.vHead,n,a=0,s=t.next;s!==t;s=s.next)if(n=s.anEdge,!(n.winding<=0))do a+=(n.Org.s-n.Dst.s)*(n.Org.t+n.Dst.t),n=n.Lnext;while(n!==s.anEdge);if(a<0){for(i=r.next;i!==r;i=i.next)i.t=-i.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var t=this.mesh.vHead,i=[0,0,0],r,n,a=!1;i[0]=this.normal[0],i[1]=this.normal[1],i[2]=this.normal[2],!i[0]&&!i[1]&&!i[2]&&(this.computeNormal_(i),a=!0),r=this.sUnit,n=this.tUnit;var s=this.longAxis_(i);r[s]=0,r[(s+1)%3]=1,r[(s+2)%3]=0,n[s]=0,n[(s+1)%3]=0,n[(s+2)%3]=i[s]>0?1:-1;for(var o=t.next;o!==t;o=o.next)o.s=this.dot_(o.coords,r),o.t=this.dot_(o.coords,n);a&&this.checkOrientation_();for(var l=!0,c=t.next;c!==t;c=c.next)l?(this.bmin[0]=this.bmax[0]=c.s,this.bmin[1]=this.bmax[1]=c.t,l=!1):(c.s<this.bmin[0]&&(this.bmin[0]=c.s),c.s>this.bmax[0]&&(this.bmax[0]=c.s),c.t<this.bmin[1]&&(this.bmin[1]=c.t),c.t>this.bmax[1]&&(this.bmax[1]=c.t))},e.prototype.addWinding_=function(t,i){t.winding+=i.winding,t.Sym.winding+=i.Sym.winding},e.prototype.tessellateMonoRegion_=function(t,i){var r,n;if(r=i.anEdge,!(r.Lnext!==r&&r.Lnext.Lnext!==r))throw"Mono region invalid";for(;Jt.vertLeq(r.Dst,r.Org);r=r.Lprev);for(;Jt.vertLeq(r.Org,r.Dst);r=r.Lnext);n=r.Lprev;for(var a=void 0;r.Lnext!==n;)if(Jt.vertLeq(r.Dst,n.Org)){for(;n.Lnext!==r&&(Jt.edgeGoesLeft(n.Lnext)||Jt.edgeSign(n.Org,n.Dst,n.Lnext.Dst)<=0);)a=t.connect(n.Lnext,n),n=a.Sym;n=n.Lprev}else{for(;n.Lnext!==r&&(Jt.edgeGoesRight(r.Lprev)||Jt.edgeSign(r.Dst,r.Org,r.Lprev.Org)>=0);)a=t.connect(r,r.Lprev),r=a.Sym;r=r.Lnext}if(n.Lnext===r)throw"Mono region invalid";for(;n.Lnext.Lnext!==r;)a=t.connect(n.Lnext,n),n=a.Sym;return!0},e.prototype.tessellateInterior_=function(t){for(var i,r=t.fHead.next;r!==t.fHead;r=i)if(i=r.next,r.inside&&!this.tessellateMonoRegion_(t,r))return!1;return!0},e.prototype.discardExterior_=function(t){for(var i,r=t.fHead.next;r!==t.fHead;r=i)i=r.next,r.inside||t.zapFace(r)},e.prototype.setWindingNumber_=function(t,i,r){for(var n,a=t.eHead.next;a!==t.eHead;a=n)n=a.next,a.Rface.inside!==a.Lface.inside?a.winding=a.Lface.inside?i:-i:r?t.delete(a):a.winding=0},e.prototype.getNeighbourFace_=function(t){return!t.Rface||!t.Rface.inside?-1:t.Rface.n},e.prototype.outputPolymesh_=function(t,i,r,n){var a,s=0,o=0,l;r>3&&t.mergeConvexFaces(r);for(var c=t.vHead.next;c!==t.vHead;c=c.next)c.n=-1;for(var u=t.fHead.next;u!==t.fHead;u=u.next)if(u.n=-1,!!u.inside){a=u.anEdge,l=0;do{var c=a.Org;c.n===-1&&(c.n=o,o++),l++,a=a.Lnext}while(a!==u.anEdge);if(l>r)throw"Face vertex greater that support polygon";u.n=s,++s}this.elementCount=s,i===Cn.CONNECTED_POLYGONS&&(s*=2),this.elements=[],this.elements.length=s*r,this.vertexCount=o,this.vertices=[],this.vertices.length=o*n,this.vertexIndices=[],this.vertexIndices.length=o;for(var c=t.vHead.next;c!==t.vHead;c=c.next)if(c.n!==-1){var d=c.n*n;this.vertices[d+0]=c.coords[0],this.vertices[d+1]=c.coords[1],n>2&&(this.vertices[d+2]=c.coords[2]),this.vertexIndices[c.n]=c.idx}for(var h=0,u=t.fHead.next;u!==t.fHead;u=u.next)if(u.inside){a=u.anEdge,l=0;do{var c=a.Org;this.elements[h++]=c.n,l++,a=a.Lnext}while(a!==u.anEdge);for(var f=l;f<r;++f)this.elements[h++]=-1;if(i===Cn.CONNECTED_POLYGONS){a=u.anEdge;do this.elements[h++]=this.getNeighbourFace_(a),a=a.Lnext;while(a!==u.anEdge);for(var p=l;p<r;++p)this.elements[h++]=-1}}},e.prototype.outputContours_=function(t,i){var r,n,a=0,s=0;this.vertexCount=0,this.elementCount=0;for(var o=t.fHead.next;o!==t.fHead;o=o.next)if(o.inside){n=r=o.anEdge;do this.vertexCount++,r=r.Lnext;while(r!==n);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*i,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,c=0,u=0;a=0;for(var o=t.fHead.next;o!==t.fHead;o=o.next)if(o.inside){s=0,n=r=o.anEdge;do this.vertices[l++]=r.Org.coords[0],this.vertices[l++]=r.Org.coords[1],i>2&&(this.vertices[l++]=r.Org.coords[2]),this.vertexIndices[c++]=this.vertexIdCallback?this.vertexIdCallback(r):r.Org.idx,s++,r=r.Lnext;while(r!==n);this.elements[u++]=a,this.elements[u++]=s,a+=s}},e.prototype.addContour=function(t,i){this.mesh===null&&(this.mesh=new cL),t<2&&(t=2),t>3&&(t=3);for(var r=null,n=0;n<i.length;n+=t)r===null?(r=this.mesh.makeEdge(),this.mesh.splice(r,r.Sym)):(this.mesh.splitEdge(r),r=r.Lnext),r.Org.coords[0]=i[n+0],r.Org.coords[1]=i[n+1],t>2?r.Org.coords[2]=i[n+2]:r.Org.coords[2]=0,r.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(r),r.winding=1,r.Sym.winding=-1},e.prototype.tesselate=function(t,i,r,n,a,s){if(t===void 0&&(t=yr.ODD),i===void 0&&(i=Cn.POLYGONS),s===void 0&&(s=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,a&&(this.normal[0]=a[0],this.normal[1]=a[1],this.normal[2]=a[2]),this.windingRule=t,n<2&&(n=2),n>3&&(n=3),!this.mesh)return!1;this.projectPolygon_(),iSe.computeInterior(this,s);var o=this.mesh;return i===Cn.BOUNDARY_CONTOURS?this.setWindingNumber_(o,1,!0):this.tessellateInterior_(o),s&&o.check(),i===Cn.BOUNDARY_CONTOURS?this.outputContours_(o,n):this.outputPolymesh_(o,i,r,n),!0},e}();function Vd(e){var t=e.windingRule,i=t===void 0?yr.ODD:t,r=e.elementType,n=r===void 0?Cn.POLYGONS:r,a=e.polySize,s=a===void 0?3:a,o=e.vertexSize,l=o===void 0?2:o,c=e.normal,u=c===void 0?[0,0,1]:c,d=e.contours,h=d===void 0?[]:d,f=e.strict,p=f===void 0?!0:f,m=e.debug,v=m===void 0?!1:m;if(!h&&p)throw new Error("Contours can't be empty");if(h){var y=new rSe;e.edgeCreateCallback&&(y.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(y.vertexIdCallback=e.vertexIdCallback);for(var x=0;x<h.length;x++)y.addContour(l||2,h[x]);return y.tesselate(i,n,s,l,u,p),{vertices:y.vertices,vertexIndices:y.vertexIndices,vertexCount:y.vertexCount,elements:y.elements,elementCount:y.elementCount,mesh:v?y.mesh:void 0}}}yr.ODD;yr.NONZERO;yr.POSITIVE;yr.NEGATIVE;yr.ABS_GEQ_TWO;Cn.POLYGONS;Cn.CONNECTED_POLYGONS;Cn.BOUNDARY_CONTOURS;var yM=class{constructor(e=256,t=!1){this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log(`allocating with cap ${e}`);let i=e*yM.eSize;this.buffer=new ArrayBuffer(i);let r=Float32Array.BYTES_PER_ELEMENT,n=0;this.positions=new Float32Array(this.buffer,n*r,3*e),n+=3*e,this.normals=new Float32Array(this.buffer,n*r,3*e),n+=3*e,this.uvs=new Float32Array(this.buffer,n*r,2*e)}realloc(e,t=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log(`resizing from ${this.capacity}  ${e}`);let i=e*yM.eSize,r=new ArrayBuffer(i),n=Float32Array.BYTES_PER_ELEMENT,a=0,s=new Float32Array(r,a*n,3*e);a+=3*e;let o=new Float32Array(r,a*n,3*e);a+=3*e;let l=new Float32Array(r,a*n,2*e);t?(s.set(this.positions.subarray(0,this.size*3)),o.set(this.normals.subarray(0,this.size*3)),l.set(this.uvs.subarray(0,this.size*2))):(s.set(this.positions),o.set(this.normals),l.set(this.uvs)),this.buffer=r,this.positions=s,this.normals=o,this.uvs=l,this.capacity=e}get(e=1){let t=this.size+e;if(t>this.capacity){let r=this.capacity;for(;t>r;)r*=2;this.realloc(r)}let i=this.size;return this.size=t,i}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log(`shrinking ${this.capacity}  ${this.size}`),this.realloc(this.size,!0)}},hG=yM;hG.eSize=8*Float32Array.BYTES_PER_ELEMENT;var nSe=class{constructor(e=[],t=(i,r)=>i<r?-1:i>r?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;let e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){let{data:t,compare:i}=this,r=t[e];for(;e>0;){let n=e-1>>1,a=t[n];if(i(r,a)>=0)break;t[e]=a,e=n}t[e]=r}_down(e){let{data:t,compare:i}=this,r=this.length>>1,n=t[e];for(;e<r;){let a=(e<<1)+1,s=a+1;if(s<this.length&&i(t[s],t[a])<0&&(a=s),i(t[a],n)>=0)break;t[e]=t[a],e=a}t[e]=n}};function aSe(e,t,i=1,r=!1){let n=1/0,a=1/0,s=-1/0,o=-1/0;for(let[x,b]of e[0])x<n&&(n=x),b<a&&(a=b),x>s&&(s=x),b>o&&(o=b);let l=s-n,c=o-a,u=Math.max(i,Math.min(l,c));if(u===i){let x=[n,a];return x.distance=0,x.distance}let d=new nSe([],(x,b)=>b.max-x.max),h=oSe(e),f=new zx(n+l/2,a+c/2,0,e);f.d>h.d&&(h=f);let p=2;function m(x,b,w){let S=new zx(x,b,w,e);if(p++,S.max>h.d+i&&d.push(S),S.d>h.d&&(h=S,r&&console.log(`found best ${Math.round(1e4*S.d)/1e4} after ${p} probes`),h.d>t))return t}let v=u/2;for(let x=n;x<s;x+=u)for(let b=a;b<o;b+=u)m(x+v,b+v,v);for(;d.length;){let{max:x,x:b,y:w,h:S}=d.pop();if(x-h.d<=i)break;v=S/2,m(b-v,w-v,v),m(b+v,w-v,v),m(b-v,w+v,v),m(b+v,w+v,v)}r&&console.log(`num probes: ${p}
best distance: ${h.d}`);let y=[h.x,h.y];return y.distance=h.d,y.distance}function zx(e,t,i,r){this.x=e,this.y=t,this.h=i,this.d=sSe(e,t,r),this.max=this.d+this.h*Math.SQRT2}function sSe(e,t,i){let r=!1,n=1/0;for(let a of i)for(let s=0,o=a.length,l=o-1;s<o;l=s++){let c=a[s],u=a[l];c[1]>t!=u[1]>t&&e<(u[0]-c[0])*(t-c[1])/(u[1]-c[1])+c[0]&&(r=!r),n=Math.min(n,lSe(e,t,c,u))}return n===0?0:(r?1:-1)*Math.sqrt(n)}function oSe(e){let t=0,i=0,r=0,n=e[0];for(let s=0,o=n.length,l=o-1;s<o;l=s++){let c=n[s],u=n[l],d=c[0]*u[1]-u[0]*c[1];i+=(c[0]+u[0])*d,r+=(c[1]+u[1])*d,t+=d*3}let a=new zx(i/t,r/t,0,e);return t===0||a.d<0?new zx(n[0][0],n[0][1],0,e):a}function lSe(e,t,i,r){let n=i[0],a=i[1],s=r[0]-n,o=r[1]-a;if(s!==0||o!==0){let l=((e-n)*s+(t-a)*o)/(s*s+o*o);l>1?(n=r[0],a=r[1]):l>0&&(n+=s*l,a+=o*l)}return s=e-n,o=t-a,s*s+o*o}var $P={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},fG={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},pG={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},NC=(e,t)=>([i,r])=>(r<i&&(r+=t),(e>=i?e:e+t)<=r),ZP=class extends Kt{constructor(e,t,i=0,r=12,n=3,a=yr.ODD,s=!1){super(),this.forPathBevel=s,this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,this._curveSegments=r,this._bevelSegmentsInput=n;let o=this._shape.extractShapePointsToFlatArray([],r),l=this._shape.shapeHoles.map(A=>{let M=A.extractShapePointsToFlatArray([],r),T=[];for(let P=M.length-1;P>=1;P-=2){let D=M[P-1],k=M[P-0];T.push(D,k)}return T}),c=[],u=[];for(let A=0;A<o.length;A+=2)u.push([o[A],o[A+1]]);c.push(u);for(let A=0;A<l.length;A++){let M=l[A],T=[];for(let P=0;P<M.length;P+=2)T.push([M[P],M[P+1]]);c.push(T)}let d;e.isText?d=new Dj().setFromPoints(e.points.map(A=>A.position)).getSize(new Pe).length()*.1:c[0].length===0?d=i:i>0?d=aSe(c,i):d=1e-5,i<=0?(this._bevel=0,this._bevelSegments=0):(this._bevel=Math.min(i,d,t/2),this._bevelSegments=Math.floor(n));let h;try{h=Vd({windingRule:a,elementType:Cn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[o]})}catch{h=$P}let f;try{f=Vd({windingRule:yr.ODD,elementType:Cn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...l]})}catch{f=fG}if(!h)throw new Error("error generating geometry");let p=h.elementCount;if(f){h.elementCount+=f.elementCount;for(let A=0;A<f.elements.length;A++){let M=f.elements[A],T=A%2===0?h.vertexCount:0;h.elements.push(M+T)}for(let A=0;A<f.vertexIndices.length;A++){let M=f.vertexIndices[A],T=h.vertexCount;h.vertexIndices.push(M+T)}for(let A=0;A<f.vertices.length;A++){let M=f.vertices[A];h.vertices.push(M)}}let m=1/0,v=-1/0,y=1/0,x=-1/0;for(let A=0,M=h.vertexCount;A<M;A++){let T=A*2,P=h.vertices[T+0],D=h.vertices[T+1];P<m&&(m=P),P>v&&(v=P),D<y&&(y=D),D>x&&(x=D)}this._minX=m,this._minY=y,this._width=v-m,this._height=x-y,this._buffer=new hG(this._computeBufferEstimatedSize(h));let b=[],w=[];for(let A=h.elementCount-1;A>=0;A--){let M=A>=p,T=A*2,P=h.elements[T+0],D=h.elements[T+1],k=P+D,L={start:P,count:D,normals:[],continuous:[],concave:[]},R=P,N=k-1,I=P+1,B=this._shape.roundedCurves.length;do{let q=R-P,ae=h.vertices[N*2+0],J=h.vertices[N*2+1],$=h.vertices[R*2+0],te=h.vertices[R*2+1],Q=h.vertices[I*2+0],pe=h.vertices[I*2+1],me=$-ae,le=te-J,Z=Math.sqrt(me*me+le*le);me/=Z,le/=Z;let oe=$-Q,ge=te-pe,Ie=Math.sqrt(oe*oe+ge*ge);oe/=Ie,ge/=Ie,L.normals[q*2+0]=-ge,L.normals[q*2+1]=oe,L.concave[q]=me*ge-le*oe>0;let we=h.vertexIndices[R];if(Array.isArray(we))L.continuous[q]=!1;else{let[xe,Se]=this._shape.getCurveIndexFromVertexId(we-1,!0);if(Se>0&&Se<1)L.continuous[q]=!0;else{let Le=Se===1?xe+1:xe-1;Le=(Le+B)%B;let Be=Se===1?0:1,ee=this._shape.roundedCurves[xe].getTangent(Se),X=this._shape.roundedCurves[Le].getTangent(Be);L.continuous[q]=ee.dot(X)>.95}}M&&(L.normals[q*2+0]*=-1,L.normals[q*2+1]*=-1),[N,R,I]=[R,I,I+1],I>=k&&(I-=D)}while(I!==P+1);let z=[];z.push({bevelI:0,angle:0,size:0,boundary:{vertices:h.vertices.slice(P*2,k*2),vertexCount:D,vertexIndices:new Array(D).fill(!0).map((q,ae)=>[ae,ae]),elements:[0,D],elementCount:1,mesh:null},reverseMap:[],insetPoints:h.vertices.slice(P*2,k*2)});let V=0;for(let q=1;q<=this._bevelSegments;q++){let ae=q/this._bevelSegments*Math.PI/2,J=(1-Math.cos(ae))*this._bevel,$=[],te=[],Q=0;for(let me=0;me<D;me++){let le=me*2,Z=(me-1+D)%D*2,oe=h.vertices[L.start*2+le+0],ge=h.vertices[L.start*2+le+1],Ie=-L.normals[Z+0]*J,we=-L.normals[Z+1]*J,xe=-L.normals[le+0]*J,Se=-L.normals[le+1]*J;if(L.concave[me]||!L.concave[me]&&M){let Le=Math.atan2(we,Ie),Be=Math.atan2(Se,xe);Be>Le&&(Be-=Math.PI*2);let ee=Be-Le;if(L.continuous[me]||M){let X=Le+ee/2,ue=Math.cos(X)*J,Oe=Math.sin(X)*J;$[2*Q+0]=oe+ue*(M?-1:1),$[2*Q+1]=ge+Oe*(M?-1:1),te[Q]=me,Q++}else{let X=Math.max(1,Math.floor(r/4*Math.abs(ee)/Math.PI));for(let ue=0;ue<=X;ue++){let Oe=Le+ee*(ue/X),Y=Math.cos(Oe)*J,qe=Math.sin(Oe)*J;$[2*Q+0]=oe+Y,$[2*Q+1]=ge+qe,te[Q]=me,Q++}}}else $[2*Q+0]=oe+Ie,$[2*Q+1]=ge+we,te[Q]=me,Q++,$[2*Q+0]=oe,$[2*Q+1]=ge,te[Q]=me,Q++,$[2*Q+0]=oe+xe,$[2*Q+1]=ge+Se,te[Q]=me,Q++}let pe=Vd({windingRule:yr.POSITIVE,elementType:Cn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[$],edgeCreateCallback:me=>{let le=me.Org.idx,Z=te[le],oe=te[(le+1)%te.length];me.idx=[Z,oe],me.Sym.idx=[oe,Z]},vertexIdCallback:me=>{let le=me.Lprev.idx;return[le?le[1]:0,me.idx?me.idx[0]:0]}});if(!pe)throw console.log("Error"),new Error(`error generating bevel geometry for ${q}'th loop`);if(!pe.vertexCount){let me=(q-1)/this._bevelSegments*Math.PI/2;V=(1-Math.sin(me))*this._bevel;break}for(let me=0;me<pe.vertexIndices.length;me++){let[le,Z]=pe.vertexIndices[me];if(le===Z)continue;let oe=Z;Z<le&&(oe+=D);for(let ge=le;ge<oe;ge++){let Ie=ge%D,we=(ge+1)%D;if(!L.continuous[Ie]||!L.continuous[we]){pe.vertexIndices[me]=[le,Ie],pe.vertexIndices.splice(me+1,0,[we,Z]),pe.vertices.splice((me+1)*2,0,pe.vertices[me*2],pe.vertices[me*2+1]);break}}}z.push({bevelI:q,angle:ae,size:J,boundary:pe,reverseMap:te,insetPoints:$})}let W=(q,ae,J)=>{let $=0,te=q.boundary.vertexIndices.length;for(;$<te&&J(q.boundary.vertexIndices[ae]);)ae=(ae+1)%te,$++;return $},G=b.length;for(let q=1;q<z.length;q++){let ae=z[q-1],J=z[q],$=ae.boundary.vertexIndices.length,te=J.boundary.vertexIndices.length;if(!$||!te)break;let Q=L.concave.length,pe=0,me=NC(pe,D);for(;!ae.boundary.vertexIndices.filter(me).length||!J.boundary.vertexIndices.filter(me).length;)pe++,me=NC(pe,D);let le=ae.boundary.vertexIndices.findIndex(me),Z=J.boundary.vertexIndices.findIndex(me);do le=(le+1)%$;while(me(ae.boundary.vertexIndices[le]));do Z=(Z+1)%te;while(me(J.boundary.vertexIndices[Z]));pe=(pe+1)%D;let oe=pe,ge=0,Ie=this._buildBevelVert(L,ae,(le-1+$)%$,void 0,ge),we=this._buildBevelVert(L,J,(Z-1+te)%te,void 0,ge),xe=Ie,Se=we,Le,Be,ee=!1;do{ge=(pe||Q)/Q,me=NC(pe,D);let X=W(ae,le,me),ue=W(J,Z,me),Oe=ee;if(ee=!1,X&&!ue){for(let Y=0;Y<X;Y++)Le=this._buildBevelVert(L,ae,(le+Y)%$,Y/(X-1),ge),b.push(xe.topN,Le.topP,Se.topN),s===!1&&b.push(Le.bottomP,xe.bottomN,Se.bottomN),xe=Le;ee=!0}else if(!X&&ue)for(let Y=0;Y<ue;Y++)Be=this._buildBevelVert(L,J,(Z+Y)%te,Y/(ue-1),ge),b.push(Se.topN,xe.topP,Be.topP),s===!1&&b.push(xe.bottomP,Se.bottomN,Be.bottomP),Se=Be;else if(X&&ue)if(Le=this._buildBevelVert(L,ae,le,0,ge),Be=this._buildBevelVert(L,J,Z,0,ge),Oe?(b.push(xe.topN,Be.topP,Se.topN),b.push(xe.topN,Le.topP,Be.topP),s===!1&&(b.push(Be.bottomP,xe.bottomN,Se.bottomN),b.push(Be.bottomP,Le.bottomP,xe.bottomN))):(b.push(Se.topN,xe.topN,Le.topP),b.push(Se.topN,Le.topP,Be.topP),s===!1&&(b.push(Le.bottomP,xe.bottomN,Se.bottomN),b.push(Le.bottomP,Se.bottomN,Be.bottomP))),xe=Le,Se=Be,X===ue)for(let Y=1;Y<X;Y++)Le=this._buildBevelVert(L,ae,(le+Y)%$,Y/(X-1),ge),Be=this._buildBevelVert(L,J,(Z+Y)%te,Y/(ue-1),ge),b.push(xe.topN,Le.topP,Se.topN),b.push(Se.topN,Le.topP,Be.topP),s===!1&&(b.push(Le.bottomP,xe.bottomN,Se.bottomN),b.push(Le.bottomP,Se.bottomN,Be.bottomP)),xe=Le,Se=Be;else if(X>ue){let Y=X/ue,qe=0;for(let et=1;et<X;et++)Le=this._buildBevelVert(L,ae,(le+et)%$,et/(X-1),ge),b.push(xe.topN,Le.topP,Se.topN),s===!1&&b.push(Le.bottomP,xe.bottomN,Se.bottomN),xe=Le,et>(qe+1)*Y&&(qe++,Be=this._buildBevelVert(L,J,(Z+qe)%te,qe/(ue-1),ge),b.push(Se.topN,Le.topP,Be.topP),s===!1&&b.push(Le.bottomP,Se.bottomN,Be.bottomP),Se=Be)}else{let Y=ue/X,qe=0;for(let et=1;et<ue;et++)Be=this._buildBevelVert(L,J,(Z+et)%te,et/(ue-1),ge),b.push(Se.topN,Le.topP,Be.topP),s===!1&&b.push(Le.bottomP,Se.bottomN,Be.bottomP),Se=Be,et>(qe+1)*Y&&(qe++,Le=this._buildBevelVert(L,ae,(le+qe)%$,qe/(X-1),ge),b.push(xe.topN,Le.topP,Se.topN),s===!1&&b.push(Le.bottomP,xe.bottomN,Se.bottomN),xe=Le)}le=(le+X)%$,Z=(Z+ue)%te,pe=(pe+1)%Q}while(pe!==oe)}if(s===!1&&this._depth>this._bevel*2&&this._buildWall(z,L,b),M){let q=[];for(let ae=b.length-1;ae>=G+2;ae-=3){let J=b[ae-2],$=b[ae-1],te=b[ae-0];q.push(te,$,J)}b.splice(G,b.length-G,...q)}if(M){let q=[];for(let ae=z[z.length-1].boundary.vertices.length-1;ae>=1;ae-=2){let J=z[z.length-1].boundary.vertices[ae-1],$=z[z.length-1].boundary.vertices[ae-0];q.push(J,$)}w.push(q)}if(!M){let q=z[z.length-1],ae;try{ae=Vd({windingRule:z.length>1?yr.POSITIVE:yr.ODD,elementType:Cn.POLYGONS,vertexSize:2,strict:!0,contours:[q.insetPoints,...w]})}catch{ae=pG}if(!ae)throw new Error("Error generating geometry for surface");l.length===0&&this._bevel<d&&Object.assign(this,{useNgonForTopBottomFaceDuringBake:!0});for(let J=0;J<ae.elementCount*3;J+=3){let $=this._buildSurfaceVert(ae,ae.elements[J+0],V),te=this._buildSurfaceVert(ae,ae.elements[J+1],V),Q=this._buildSurfaceVert(ae,ae.elements[J+2],V);b.push($.top,te.top,Q.top),s===!1&&b.push(Q.bottom,te.bottom,$.bottom)}}this.vertexCache={}}this._buffer.shrink();let S=new ui(Uint32Array.from(b),1),_=new ui(this._buffer.positions,3),E=new ui(this._buffer.normals,3),C=new ui(this._buffer.uvs,2);_.needsUpdate=!0,E.needsUpdate=!0,C.needsUpdate=!0,S.needsUpdate=!0,this.setAttribute("position",_),this.setAttribute("normal",E),this.setAttribute("uv",C),this.setIndex(S)}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,i){let r=e[0];for(let n=0,a=r.boundary.vertexCount;n<a;n++){let s=this._buildBevelVert(t,r,n),o=this._buildBevelVert(t,r,(n+1)%a);i.push(o.topP,s.topN,s.bottomN),i.push(o.topP,s.bottomN,o.bottomP)}}_buildSurfaceVert(e,t,i){let r=t.toString();if(r in this.vertexCache)return this.vertexCache[r];let n=e.vertices[t*2+0],a=e.vertices[t*2+1],s=(n-this._minX)/this._width,o=(a-this._minY)/this._height;this.forPathBevel&&(o=1);let l=this._buffer.get(this.forPathBevel?1:2),c=l*3,u=l*2,d={top:l+0,bottom:l+1};return this._buffer.positions[c+0]=n,this._buffer.positions[c+1]=a,this._buffer.positions[c+2]=this.forPathBevel?this._bevel:this._depth-i,this._buffer.normals[c+0]=0,this._buffer.normals[c+1]=0,this._buffer.normals[c+2]=1,this._buffer.uvs[u+0]=s,this._buffer.uvs[u+1]=o,this.forPathBevel===!1&&(this._buffer.positions[c+3]=n,this._buffer.positions[c+4]=a,this._buffer.positions[c+5]=i,this._buffer.normals[c+3]=0,this._buffer.normals[c+4]=0,this._buffer.normals[c+5]=-1,this._buffer.uvs[u+2]=s,this._buffer.uvs[u+3]=o),this.vertexCache[r]=d,d}_buildBevelVert(e,t,i,r=1,n){let a=`${t.bevelI}:${i}`;if(a in this.vertexCache&&n!==0&&n!==1&&(!n||n===this.vertexCache[a].pathBevelUCoord))return this.vertexCache[a];let[s,o]=t.boundary.vertexIndices[i],l,c,u,d;s!==o?(c=s,l=o,d=!1,u=e.continuous[c]&&e.continuous[l]):(l=s,c=(l-1+e.count)%e.count,d=e.concave[l]&&t.bevelI>0,u=e.continuous[l]||d);let h=Math.cos(t.angle),f=Math.sin(t.angle),p=i*2,m=l*2,v=c*2,y=t.boundary.vertices[p+0],x=t.boundary.vertices[p+1],b=(1-f)*this._bevel,w=(y-this._minX)/this._width,S=(x-this._minY)/this._height;this.forPathBevel&&(n!==void 0&&(w=n),S=1);let _=e.normals[m+0],E=e.normals[m+1],C=e.normals[v+0],A=e.normals[v+1];if(d){let k=C-_,L=A-E;_=_+k*(1-r),E=E+L*(1-r);let R=Math.sqrt(_*_+E*E);_/=R,E/=R}let M=this.forPathBevel?this._buffer.get(u?1:2):this._buffer.get(u?2:4),T=M*3,P=M*2,D={i,fi:l,topP:M+0,topN:M+0,bottomP:M+1,bottomN:M+1,pathBevelUCoord:n};return this._buffer.positions[T+0]=y,this._buffer.positions[T+1]=x,this._buffer.positions[T+2]=(this.forPathBevel?this._bevel:this._depth)-b,this._buffer.normals[T+0]=_*h,this._buffer.normals[T+1]=E*h,this._buffer.normals[T+2]=f,this._buffer.uvs[P+0]=w,this._buffer.uvs[P+1]=S,this.forPathBevel===!1&&(this._buffer.positions[T+3]=y,this._buffer.positions[T+4]=x,this._buffer.positions[T+5]=b,this._buffer.normals[T+3]=_*h,this._buffer.normals[T+4]=E*h,this._buffer.normals[T+5]=-f,this._buffer.uvs[P+2]=S,this._buffer.uvs[P+3]=w),u||(this.forPathBevel?(M+=1,T+=3,P+=2):(M+=2,T+=6,P+=4),D.topP=M+0,D.bottomP=M+1,this._buffer.positions[T+0]=y,this._buffer.positions[T+1]=x,this._buffer.positions[T+2]=(this.forPathBevel?this._bevel:this._depth)-b,this._buffer.normals[T+0]=C*h,this._buffer.normals[T+1]=A*h,this._buffer.normals[T+2]=f,this._buffer.uvs[P+0]=w,this._buffer.uvs[P+1]=S,this.forPathBevel===!1&&(this._buffer.positions[T+3]=y,this._buffer.positions[T+4]=x,this._buffer.positions[T+5]=b,this._buffer.normals[T+3]=C*h,this._buffer.normals[T+4]=A*h,this._buffer.normals[T+5]=-f,this._buffer.uvs[P+2]=S,this._buffer.uvs[P+3]=w)),this.vertexCache[a]=D,D}clone(){let e=new ZP(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=tS(this.userData),e}},mG=class extends Kt{constructor(e,t=12,i={}){super(),this.type="ShapeGeometry",this.windingRule=yr.ODD,this.elementType=Cn.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=t,this._triangulationOptions=Object.assign({windingRule:yr.ODD,elementType:Cn.POLYGONS,polySize:3,vertexSize:2,strict:!0},i);let r=this._shape.extractShapePointsToFlatArray([],this._curveSegments),n=this._shape.shapeHoles.map(h=>h.extractShapePointsToFlatArray([],this._curveSegments)),a,s=!0,o=!0,l,c;for(let h=0,f=r.length/2;h<f;h++){let p=h*2,m=r[p+0],v=r[p+1];if(l!==void 0&&m!==l&&(s=!1),c!==void 0&&v!==c&&(o=!1),l=m,c=v,!s&&!o)break}if(!s&&!o)try{a=Vd({contours:[r,...n],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch{a=$P}let u=(a==null?void 0:a.vertexCount)??1,d=(a==null?void 0:a.elementCount)??1;if(this._positionAttribute=new ui(new Float32Array(u*3),3),this._normalAttribute=new ui(new Float32Array(u*3),3),this._uvAttribute=new ui(new Float32Array(u*2),2),this._indexAttribute=new ui(new Uint32Array(d*3),1),a){let h=1/0,f=-1/0,p=1/0,m=-1/0;for(let x=0,b=u;x<b;x++){let w=x*2,S=a.vertices[w+0],_=a.vertices[w+1];S<h&&(h=S),S>f&&(f=S),_<p&&(p=_),_>m&&(m=_)}let v=f-h,y=m-p;for(let x=0,b=u;x<b;x++){let w=x*2,S=a.vertices[w+0],_=a.vertices[w+1],E=(S-h)/v,C=(_-p)/y;this._positionAttribute.setXYZ(x,S,_,0),this._normalAttribute.setXYZ(x,0,0,1),this._uvAttribute.setXY(x,E,C)}for(let x=0,b=d;x<b;x++){let w=x*3,S=a.elements[w+0],_=a.elements[w+1],E=a.elements[w+2];this._indexAttribute.setX(w+0,S),this._indexAttribute.setX(w+1,_),this._indexAttribute.setX(w+2,E)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((a==null?void 0:a.elementCount)??1)*3)}clone(){let e=new mG(this._shape,this._curveSegments);return e.userData=tS(this.userData),e}},vG=class extends ZP{constructor(e,t,i=0,r=12,n=3,a=yr.ODD){super(e,t,i,r,n,a),this.type="ShapeGeometry"}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,i){let r=e[0];for(let n=0,a=r.boundary.vertexCount;n<a;n++){let s=this._buildBevelVert(t,r,n),o=this._buildBevelVert(t,r,(n+1)%a);i.push(o.topP,s.topN,s.bottomN),i.push(o.topP,s.bottomN,o.bottomP)}}clone(){let e=new vG(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=tS(this.userData),e}},cp=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var c,u;let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:yr.ODD},e.parameters),r=Math.abs(i.width),n=Math.abs(i.height??i.width),a=Math.abs(i.depth??0),s=e.shape??(t==null?void 0:t.shape),o=(s==null?void 0:s.roundness)??i.roundness;s!==void 0&&(s instanceof nn?(s.width!==r||s.height!==n)&&s.applySize(r,n):s=new nn(r,n).fromJSON(s),((c=e.parameters)==null?void 0:c.roundness)!==void 0&&((u=e.parameters)==null?void 0:u.roundness)>0&&s.update());let l=s??new nn(r,n);return{parameters:Object.assign(i,{width:r,height:n,depth:a,roundness:o}),shape:l}}static build(e){let{depth:t,extrudeBevelSize:i,extrudeBevelSegments:r,subdivisions:n,roundness:a,windingRule:s}=e.parameters;e.shape.roundness=a;let o;return t<=0?o=new mG(e.shape,n,{windingRule:s}):o=new vG(e.shape,t,i,n,r,s),Object.assign(o,{userData:{...e,type:"VectorGeometry"}})}},gG=Math.PI*2,qP=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return i.angle=kt.clamp(i.angle,0,360),{shape:e.shape&&e.shape instanceof nn?e.shape:new nn,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t,height:i,spikes:r,angle:n,innerRadius:a,depth:s,extrudeBevelSize:o,extrudeBevelSegments:l}=e.parameters,c=e.shape,u=t*.5,d=i*.5,h=cSe(c,u,d,n*Math.PI/180,r,a);c.isClosed=!0,c.update();let f;return n===0?(f=new Kt,f.setAttribute("position",new It([],3))):f=cp.create({shape:c,parameters:{subdivisions:h,depth:s,extrudeBevelSize:o,extrudeBevelSegments:l}}),Object.assign(f,{userData:{...e,type:"EllipseGeometry"}})}};function cSe(e,t,i,r,n,a){if(r>=gG)return n>30||n%4===0?(dSe(e,t,i,a),Math.round(n/4)):fL(e,r,n,t,i,a);r=Math.max(r,.001);let s={x:0,y:i},o=r+Math.PI*.5,l={x:Math.cos(o)*t,y:Math.sin(o)*i},c=J_e({px:s.x,py:s.y,cx:l.x,cy:l.y,rx:t,ry:i,largeArcFlag:r>Math.PI,sweepFlag:!0});return n>30||n%c.length===0?uSe(e,s.x,s.y,c,n,t,i,a):fL(e,r,n,t,i,a)}function uSe(e,t,i,r,n,a,s,o){let l=Math.round(n/r.length);e.addPoint(Hm(t,i));for(let c=0,u=r.length;c<u;c++){let d=r[c],h=e.points[c],f=Hm(d.x,d.y);h.controls[1].position.set(d.x1,d.y1),f.controls[0].position.set(d.x2,d.y2),e.addPoint(f)}return o>0?yG(e,a,s,o):e.addPoint(Hm(0,0)),l}function fL(e,t,i,r,n,a){let s=-t/i;for(let o=0;o<=i;o++){let l=s*o,c=Math.sin(l)*r,u=Math.cos(l)*n;e.addPoint(Hm(c,u))}return t<gG?a>0?yG(e,r,n,a):e.addPoint(Hm(0,0)):(e.removePoint(e.points[e.points.length-1]),a>0&&bG(e,r,n,a)),1}function dSe(e,t,i,r=0,n=0,a=0){let s=.5522847498,o=t*s,l=i*s;e.addPoint(Wb(n-t,a,n-t,a-l,n-t,a+l)),e.addPoint(Wb(n,a+i,n-o,a+i,n+o,a+i)),e.addPoint(Wb(n+t,a,n+t,a+l,n+t,a-l)),e.addPoint(Wb(n,a-i,n+o,a-i,n-o,a-i)),r>0&&bG(e,t,i,r)}function Hm(e,t){return new Um(kt.generateUUID(),new Pe(e,t))}function Wb(e,t,i,r,n,a){let s=Hm(e,t);return s.controls[0].position.set(i,r),s.controls[1].position.set(n,a),s}function yG(e,t,i,r){wG(e,t,i,r).forEach(n=>e.addPoint(n))}function bG(e,t,i,r){let n=wG(e,t,i,r),a=new nn;n.forEach(s=>a.addPoint(s)),a.isClosed=!0,e.shapeHoles.push(a)}function wG(e,t,i,r){let n=r*t/100,a=n*(Math.abs(i)/Math.abs(t)),s=new Pe(n/t,a/i),o=e.points.map(l=>{let c=l.clone();return c.uuid=kt.generateUUID(),c}).reverse();return o.forEach(l=>{l.position.multiply(s);let c=l.controls[0].position.clone().multiply(s),u=l.controls[1].position.clone().multiply(s);l.controls[0].position.copy(u),l.controls[1].position.copy(c)}),o}var hSe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),r=Math.abs(i.width),n=Math.abs(i.height??r),a=Math.abs(i.depth??r),s=Math.abs(Math.min(r,a))/2;return{parameters:Object.assign(i,{width:r,height:n,depth:a,radius:s,segments:Math.round(i.segments),pathSegments:Math.round(i.pathSegments),cornerSegments:Math.round(i.cornerSegments)})}}static build(e){let{width:t,height:i,depth:r,radius:n,revolutions:a,segments:s,pathRadius:o,pathType:l,pathSegments:c,cornerRadius:u,cornerSegments:d}=e.parameters,h=new xG(!1,t,i,r,n,a,s,o,l,c,u,d);return Object.assign(h,{userData:{...e,type:"HelixGeometry"}})}},FC=new Bm([0,0,0],1),xG=class extends Kt{constructor(e=!0,t=1,i=1,r=1,n=1,a=1,s=1,o=1,l=1,c=1,u=1,d=1){if(super(),a===0)return;let h=e&&a===1;h&&(d=0),u>100&&(u=100),u===0&&(d=0);let f=()=>new H,p=new H,m=f(),v=f(),y=f(),x,b,w,S,_,E,C,A,M=f(),T=f(),P=f(),D=f(),k=f(),L=f(),R=f(),N=f(),I=i-2*o+.001,B=I/a,z=Math.ceil(s*a),V=z+1,W=I/z,G=-I/2,q=c+1,ae=2*Math.PI/c,J=Math.PI/2/d,$=.01,te=Math.min((1-u/100)*o,o-$),Q=o-te,pe=0,me=2,le=d*me+me,Z=q*le/me,oe=Z+q*V,ge=Math.max(0,q*(V+le)),[Ie,we,xe]=[3,3,2].map(ze=>Array(ge*ze).fill(0)),Se=[],Le=n-o;function Be(ze,vt){let _e=Math.PI/2;E=vt*W,A=2*Math.PI*(E%B)/B+_e,E+=G,C=Math.sin(A)*Le,_=Math.cos(A)*Le,e?ze.set(_,C,E):ze.set(_,E,C)}Be(p,-1e-10),Be(m,0),M.copy(p),Be(p,1);let ee=p.distanceTo(m),X=h?0:Q+te,ue=ee*z+2*X,Oe=te,Y=ue-X;for(let ze=0;ze<=z;ze++){Be(v,ze),N.subVectors(v,M).normalize(),M.copy(v),L.copy(v).setComponent(+e+1,0).normalize(),R.crossVectors(N,L).normalize();let vt=ze===0,_e=ze===z,Fe=vt?3*Math.PI/2:J,he=vt?Oe:Y,ke=vt?q:oe,se=vt?0:ge-q,He=N.clone().multiplyScalar(vt?-Q:Q).add(v),yt=N.clone().multiplyScalar(vt?-1:1).normalize();for(let Te=0;Te<q;Te++){let $e=Te*ae;if(T.addVectors(p.copy(L).multiplyScalar(o*Math.cos($e)),m.copy(R).multiplyScalar(o*Math.sin($e))),P.copy(T).normalize(),vt||_e){h||(pe=se+Te,[0,1,2].forEach(st=>{Ie[pe*3+st]=He.getComponent(st),we[pe*3+st]=yt.getComponent(st)}),xe[pe*2]=+_e,xe[pe*2+1]=Te/c),m.copy(P).multiplyScalar(te),y.addVectors(v,m);for(let st=0;st<d;st++){let wt=st*J+Fe;D.addVectors(p.copy(N).multiplyScalar(Q*Math.sin(wt)),m.copy(P).multiplyScalar(Q*Math.cos(wt))),k.copy(D).normalize(),m.addVectors(y,D),D.normalize(),pe=ke+st*q+Te,[0,1,2].forEach(_t=>{Ie[pe*3+_t]=m.getComponent(_t),we[pe*3+_t]=k.getComponent(_t)});let Pt=+vt+Math.sin(wt);xe[pe*2]=(he+Q*Pt)/ue,xe[pe*2+1]=Te/c}}m.addVectors(v,T),pe=Z+ze*q+Te,[0,1,2].forEach(st=>{Ie[pe*3+st]=m.getComponent(st),we[pe*3+st]=P.getComponent(st)}),xe[pe*2]=(X+ze*ee)/ue,xe[pe*2+1]=Te/c}}let qe=V+2*d+me,[et,tt]=[+h,qe-1];for(let ze=et;ze<=tt-1;ze++){let vt=h&&ze===tt-1;for(let _e=0;_e<q-1;_e++)x=ze*q+_e,b=x+1,w=(vt?_e:x)+q,S=(vt?_e+1:b)+q,ze===0?Se.push(b,S,w):ze===qe-2?Se.push(x,b,w):Se.push(x,b,w,b,S,w)}this.setIndex(Se),this.setAttribute("position",new It(Ie,3)),this.setAttribute("normal",new It(we,3)),this.setAttribute("uv",new It(xe,2))}getClosedTorusIndicesForBooleanOrSubdiv(){let e=this.userData.parameters,t=Math.ceil(e.tubularSegments),i=e.radialSegments+1,r=Array.from(this.getIndex().array),n,a,s,o,l=6*(t-1)*e.radialSegments,c=t,u=c===t;for(let d=0;d<e.radialSegments;d++)n=c*i+d,a=n+1,s=(u?d:n)+i,o=(u?d+1:a)+i,r[l++]=n,r[l++]=a,r[l++]=s,r[l++]=a,r[l++]=o,r[l++]=s;return r.length=l,FC.array=r,FC.count=r.length,FC}},fSe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,detail:n,corner:a,cornerSides:s}=e.parameters,o=n===0&&a!==0?new _G(t*.5,a,s):new bj(t*.5,n);return o.scale(1,i/t,r/t),Object.assign(o,{userData:{...e,type:"IcosahedronGeometry"}})}},_G=class extends jP{constructor(e=1,t=.2,i=4){let r=(1+Math.sqrt(5))/2,n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],s="IcosahedronGeometry";super(n,a,s,e,t,i),this.type=s}static fromJSON(e){return new _G(e.radius,e.corner,e.cornerSides)}},pSe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r;(((r=e.parameters)==null?void 0:r.points)??[]).forEach(n=>{Array.isArray(n)&&(n.x=n[0],n.y=n[1])});let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{points:t,segments:i,verticalSegments:r}=e.parameters,n=new ix;n.moveTo(t[0].x,t[0].y),n.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let a=new fj(n.extractPoints(r).shape,i);return a.rotateZ(Math.PI),Object.assign(a,{userData:{...e,type:"LatheGeometry"}})}},Hl=new pt,zC=new dr,Gb=new H,Vx=class extends Pa{constructor(){super(),this.uuid=kt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=new An().getNormalMatrix(e);for(let i=0,r=this.vertices.length;i<r;i++)this.vertices[i].applyMatrix4(e);for(let i=0,r=this.faces.length;i<r;i++){let n=this.faces[i];n.normal.applyMatrix3(t).normalize();for(let a=0,s=n.vertexNormals.length;a<s;a++)n.vertexNormals[a].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return Hl.makeRotationX(e),this.applyMatrix4(Hl),this}rotateY(e){return Hl.makeRotationY(e),this.applyMatrix4(Hl),this}rotateZ(e){return Hl.makeRotationZ(e),this.applyMatrix4(Hl),this}translate(e,t,i){return Hl.makeTranslation(e,t,i),this.applyMatrix4(Hl),this}scale(e,t,i){return Hl.makeScale(e,t,i),this.applyMatrix4(Hl),this}lookAt(e){return zC.lookAt(e),zC.updateMatrix(),this.applyMatrix4(zC.matrix),this}fromBufferGeometry(e){let t=this,i=e.index!==null?e.index:void 0,r=e.attributes;if(r.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let n=r.position,a=r.normal,s=r.color,o=r.uv,l=r.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let d=0;d<n.count;d++)t.vertices.push(new H().fromBufferAttribute(n,d)),s!==void 0&&t.colors.push(new ii().fromBufferAttribute(s,d));function c(d,h,f,p){let m=s===void 0?[]:[t.colors[d].clone(),t.colors[h].clone(),t.colors[f].clone()],v=a===void 0?[]:[new H().fromBufferAttribute(a,d),new H().fromBufferAttribute(a,h),new H().fromBufferAttribute(a,f)],y=new bM(d,h,f,v,m,p);t.faces.push(y),o!==void 0&&t.faceVertexUvs[0].push([new Pe().fromBufferAttribute(o,d),new Pe().fromBufferAttribute(o,h),new Pe().fromBufferAttribute(o,f)]),l!==void 0&&t.faceVertexUvs[1].push([new Pe().fromBufferAttribute(l,d),new Pe().fromBufferAttribute(l,h),new Pe().fromBufferAttribute(l,f)])}let u=e.groups;if(u.length>0)for(let d=0;d<u.length;d++){let h=u[d],f=h.start,p=h.count;for(let m=f,v=f+p;m<v;m+=3)i!==void 0?c(i.getX(m),i.getX(m+1),i.getX(m+2),h.materialIndex):c(m,m+1,m+2,h.materialIndex)}else if(i!==void 0)for(let d=0;d<i.count;d+=3)c(i.getX(d),i.getX(d+1),i.getX(d+2));else for(let d=0;d<n.count;d+=3)c(d,d+1,d+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Gb).negate(),this.translate(Gb.x,Gb.y,Gb.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,i=t===0?1:1/t,r=new pt;return r.set(i,0,0,-i*e.x,0,i,0,-i*e.y,0,0,i,-i*e.z,0,0,0,1),this.applyMatrix4(r),this}computeFaceNormals(){let e=new H,t=new H;for(let i=0,r=this.faces.length;i<r;i++){let n=this.faces[i],a=this.vertices[n.a],s=this.vertices[n.b],o=this.vertices[n.c];e.subVectors(o,s),t.subVectors(a,s),e.cross(t),e.normalize(),n.normal.copy(e)}}computeVertexNormals(e=!0){let t=new Array(this.vertices.length);for(let i=0,r=this.vertices.length;i<r;i++)t[i]=new H;if(e){let i=new H,r=new H;for(let n=0,a=this.faces.length;n<a;n++){let s=this.faces[n],o=this.vertices[s.a],l=this.vertices[s.b],c=this.vertices[s.c];i.subVectors(c,l),r.subVectors(o,l),i.cross(r),t[s.a].add(i),t[s.b].add(i),t[s.c].add(i)}}else{this.computeFaceNormals();for(let i=0,r=this.faces.length;i<r;i++){let n=this.faces[i];t[n.a].add(n.normal),t[n.b].add(n.normal),t[n.c].add(n.normal)}}for(let i=0,r=this.vertices.length;i<r;i++)t[i].normalize();for(let i=0,r=this.faces.length;i<r;i++){let n=this.faces[i],a=n.vertexNormals;a.length===3?(a[0].copy(t[n.a]),a[1].copy(t[n.b]),a[2].copy(t[n.c])):(a[0]=t[n.a].clone(),a[1]=t[n.b].clone(),a[2]=t[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let i=this.faces[e],r=i.vertexNormals;r.length===3?(r[0].copy(i.normal),r[1].copy(i.normal),r[2].copy(i.normal)):(r[0]=i.normal.clone(),r[1]=i.normal.clone(),r[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,i=this.faces.length;t<i;t++){let r=this.faces[t];r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]);for(let n=0,a=r.vertexNormals.length;n<a;n++)r.__originalVertexNormals[n]?r.__originalVertexNormals[n].copy(r.vertexNormals[n]):r.__originalVertexNormals[n]=r.vertexNormals[n].clone()}let e=new Vx;e.faces=this.faces;for(let t=0,i=this.morphTargets.length;t<i;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let n=this.morphNormals[t].faceNormals,a=this.morphNormals[t].vertexNormals;for(let s=0,o=this.faces.length;s<o;s++){let l=new H,c={a:new H,b:new H,c:new H};n.push(l),a.push(c)}}let r=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let n=0,a=this.faces.length;n<a;n++){let s=this.faces[n],o=r.faceNormals[n],l=r.vertexNormals[n];o.copy(s.normal),l.a.copy(s.vertexNormals[0]),l.b.copy(s.vertexNormals[1]),l.c.copy(s.vertexNormals[2])}}for(let t=0,i=this.faces.length;t<i;t++){let r=this.faces[t];r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new gn),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fs),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,i=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let r,n=this.vertices.length,a=this.vertices,s=e.vertices,o=this.faces,l=e.faces,c=this.colors,u=e.colors;t!==void 0&&(r=new An().getNormalMatrix(t));for(let d=0,h=s.length;d<h;d++){let f=s[d].clone();t!==void 0&&f.applyMatrix4(t),a.push(f)}for(let d=0,h=u.length;d<h;d++)c.push(u[d].clone());for(let d=0,h=l.length;d<h;d++){let f=l[d],p,m,v=f.vertexNormals,y=f.vertexColors,x=new bM(f.a+n,f.b+n,f.c+n);x.normal.copy(f.normal),r!==void 0&&x.normal.applyMatrix3(r).normalize();for(let b=0,w=v.length;b<w;b++)p=v[b].clone(),r!==void 0&&p.applyMatrix3(r).normalize(),x.vertexNormals.push(p);x.color.copy(f.color);for(let b=0,w=y.length;b<w;b++)m=y[b],x.vertexColors.push(m.clone());x.materialIndex=f.materialIndex+i,o.push(x)}for(let d=0,h=e.faceVertexUvs.length;d<h;d++){let f=e.faceVertexUvs[d];this.faceVertexUvs[d]===void 0&&(this.faceVertexUvs[d]=[]);for(let p=0,m=f.length;p<m;p++){let v=f[p],y=[];for(let x=0,b=v.length;x<b;x++)y.push(v[x].clone());this.faceVertexUvs[d].push(y)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){let t={},i=[],r=[],n=Math.pow(10,e);for(let o=0,l=this.vertices.length;o<l;o++){let c=this.vertices[o],u=Math.round(c.x*n)+"_"+Math.round(c.y*n)+"_"+Math.round(c.z*n);t[u]===void 0?(t[u]=o,i.push(this.vertices[o]),r[o]=i.length-1):r[o]=r[t[u]]}let a=[];for(let o=0,l=this.faces.length;o<l;o++){let c=this.faces[o];c.a=r[c.a],c.b=r[c.b],c.c=r[c.c];let u=[c.a,c.b,c.c];for(let d=0;d<3;d++)if(u[d]===u[(d+1)%3]){a.push(o);break}}for(let o=a.length-1;o>=0;o--){let l=a[o];this.faces.splice(l,1);for(let c=0,u=this.faceVertexUvs.length;c<u;c++)this.faceVertexUvs[c].splice(l,1)}let s=this.vertices.length-i.length;return this.vertices=i,s}setFromPoints(e){this.vertices=[];for(let t=0,i=e.length;t<i;t++){let r=e[t];this.vertices.push(new H(r.x,r.y,r.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let o=0;o<t;o++)e[o]._id=o;function i(o,l){return o.materialIndex-l.materialIndex}e.sort(i);let r=this.faceVertexUvs[0],n=this.faceVertexUvs[1],a,s;r&&r.length===t&&(a=[]),n&&n.length===t&&(s=[]);for(let o=0;o<t;o++){let l=e[o]._id;a&&a.push(r[l]),s&&s.push(n[l])}a&&(this.faceVertexUvs[0]=a),s&&(this.faceVertexUvs[1]=s)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){let f=this.parameters;for(let p in f)f[p]!==void 0&&(e[p]=f[p]);return e}let t=[];for(let f=0;f<this.vertices.length;f++){let p=this.vertices[f];t.push(p.x,p.y,p.z)}let i=[],r=[],n={},a=[],s={},o=[],l={};for(let f=0;f<this.faces.length;f++){let p=this.faces[f],m=!0,v=!1,y=this.faceVertexUvs[0][f]!==void 0,x=p.normal.length()>0,b=p.vertexNormals.length>0,w=p.color.r!==1||p.color.g!==1||p.color.b!==1,S=p.vertexColors.length>0,_=0;if(_=c(_,0,0),_=c(_,1,m),_=c(_,2,v),_=c(_,3,y),_=c(_,4,x),_=c(_,5,b),_=c(_,6,w),_=c(_,7,S),i.push(_),i.push(p.a,p.b,p.c),i.push(p.materialIndex),y){let E=this.faceVertexUvs[0][f];i.push(h(E[0]),h(E[1]),h(E[2]))}if(x&&i.push(u(p.normal)),b){let E=p.vertexNormals;i.push(u(E[0]),u(E[1]),u(E[2]))}if(w&&i.push(d(p.color)),S){let E=p.vertexColors;i.push(d(E[0]),d(E[1]),d(E[2]))}}function c(f,p,m){return m?f|1<<p:f&~(1<<p)}function u(f){let p=f.x.toString()+f.y.toString()+f.z.toString();return n[p]!==void 0||(n[p]=r.length/3,r.push(f.x,f.y,f.z)),n[p]}function d(f){let p=f.r.toString()+f.g.toString()+f.b.toString();return s[p]!==void 0||(s[p]=a.length,a.push(f.getHex())),s[p]}function h(f){let p=f.x.toString()+f.y.toString();return l[p]!==void 0||(l[p]=o.length/2,o.push(f.x,f.y)),l[p]}return e.data={},e.data.vertices=t,e.data.normals=r,a.length>0&&(e.data.colors=a),o.length>0&&(e.data.uvs=[o]),e.data.faces=i,e}clone(){return new Vx().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let d=0,h=t.length;d<h;d++)this.vertices.push(t[d].clone());let i=e.colors;for(let d=0,h=i.length;d<h;d++)this.colors.push(i[d].clone());let r=e.faces;for(let d=0,h=r.length;d<h;d++)this.faces.push(r[d].clone());for(let d=0,h=e.faceVertexUvs.length;d<h;d++){let f=e.faceVertexUvs[d];this.faceVertexUvs[d]===void 0&&(this.faceVertexUvs[d]=[]);for(let p=0,m=f.length;p<m;p++){let v=f[p],y=[];for(let x=0,b=v.length;x<b;x++){let w=v[x];y.push(w.clone())}this.faceVertexUvs[d].push(y)}}let n=e.morphTargets;for(let d=0,h=n.length;d<h;d++){let f={};if(f.name=n[d].name,n[d].vertices!==void 0){f.vertices=[];for(let p=0,m=n[d].vertices.length;p<m;p++)f.vertices.push(n[d].vertices[p].clone())}if(n[d].normals!==void 0){f.normals=[];for(let p=0,m=n[d].normals.length;p<m;p++)f.normals.push(n[d].normals[p].clone())}this.morphTargets.push(f)}let a=e.morphNormals;for(let d=0,h=a.length;d<h;d++){let f={};if(a[d].vertexNormals!==void 0){f.vertexNormals=[];for(let p=0,m=a[d].vertexNormals.length;p<m;p++){let v=a[d].vertexNormals[p],y={};y.a=v.a.clone(),y.b=v.b.clone(),y.c=v.c.clone(),f.vertexNormals.push(y)}}if(a[d].faceNormals!==void 0){f.faceNormals=[];for(let p=0,m=a[d].faceNormals.length;p<m;p++)f.faceNormals.push(a[d].faceNormals[p].clone())}this.morphNormals.push(f)}let s=e.skinWeights;for(let d=0,h=s.length;d<h;d++)this.skinWeights.push(s[d].clone());let o=e.skinIndices;for(let d=0,h=o.length;d<h;d++)this.skinIndices.push(o[d].clone());let l=e.lineDistances;for(let d=0,h=l.length;d<h;d++)this.lineDistances.push(l[d]);let c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());let u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=new mSe().fromGeometry(this),t=new Kt,i=new Float32Array(e.vertices.length*3);if(t.setAttribute("position",$b.call(new ui(i,3),e.vertices)),e.normals.length>0){let r=new Float32Array(e.normals.length*3);t.setAttribute("normal",$b.call(new ui(r,3),e.normals))}if(e.colors.length>0){let r=new Float32Array(e.colors.length*3);t.setAttribute("color",pL.call(new ui(r,3),e.colors))}if(e.uvs.length>0){let r=new Float32Array(e.uvs.length*2);t.setAttribute("uv",mL.call(new ui(r,2),e.uvs))}if(e.uvs2.length>0){let r=new Float32Array(e.uvs2.length*2);t.setAttribute("uv2",mL.call(new ui(r,2),e.uvs2))}t.groups=e.groups;for(let r in e.morphTargets){let n=[],a=e.morphTargets[r];for(let s=0,o=a.length;s<o;s++){let l=a[s],c=new It(l.data.length*3,3);c.name=l.name,n.push($b.call(c,l.data))}t.morphAttributes[r]=n}if(e.skinIndices.length>0){let r=new It(e.skinIndices.length*4,4);t.setAttribute("skinIndex",vL.call(r,e.skinIndices))}if(e.skinWeights.length>0){let r=new It(e.skinWeights.length*4,4);t.setAttribute("skinWeight",vL.call(r,e.skinWeights))}return e.boundingSphere!==null&&(t.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new Kt,i=e.geometry;if(e.isPoints||e.isLine){let r=new It(i.vertices.length*3,3),n=new It(i.colors.length*3,3);if(t.setAttribute("position",$b.call(r,i.vertices)),t.setAttribute("color",pL.call(n,i.colors)),i.lineDistances&&i.lineDistances.length===i.vertices.length){let a=new It(i.lineDistances.length,1);t.setAttribute("lineDistance",vSe.call(a,i.lineDistances))}i.boundingSphere!==null&&(t.boundingSphere=i.boundingSphere.clone()),i.boundingBox!==null&&(t.boundingBox=i.boundingBox.clone())}else e.isMesh&&(t=i.toBufferGeometry());return t}};Vx.prototype.isGeometry=!0;var mSe=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t=[],i,r,n,a=e.faces;for(r=0;r<a.length;r++){let s=a[r];s.materialIndex!==n&&(n=s.materialIndex,i!==void 0&&(i.count=r*3-i.start,t.push(i)),i={start:r*3,materialIndex:n})}i!==void 0&&(i.count=r*3-i.start,t.push(i)),this.groups=t}fromGeometry(e){let t=e.faces,i=e.vertices,r=e.faceVertexUvs,n=r[0]&&r[0].length>0,a=r[1]&&r[1].length>0,s=e.morphTargets,o=s.length,l;if(o>0){l=[];for(let v=0;v<o;v++)l[v]={name:s[v].name,data:[]};this.morphTargets.position=l}let c=e.morphNormals,u=c.length,d;if(u>0){d=[];for(let v=0;v<u;v++)d[v]={name:c[v].name,data:[]};this.morphTargets.normal=d}let h=e.skinIndices,f=e.skinWeights,p=h.length===i.length,m=f.length===i.length;i.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let v=0;v<t.length;v++){let y=t[v];this.vertices.push(i[y.a],i[y.b],i[y.c]);let x=y.vertexNormals;if(x.length===3)this.normals.push(x[0],x[1],x[2]);else{let w=y.normal;this.normals.push(w,w,w)}let b=y.vertexColors;if(b.length===3)this.colors.push(b[0],b[1],b[2]);else{let w=y.color;this.colors.push(w,w,w)}if(n===!0){let w=r[0][v];w!==void 0?this.uvs.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",v),this.uvs.push(new Pe,new Pe,new Pe))}if(a===!0){let w=r[1][v];w!==void 0?this.uvs2.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",v),this.uvs2.push(new Pe,new Pe,new Pe))}for(let w=0;w<o;w++){let S=s[w].vertices;l[w].data.push(S[y.a],S[y.b],S[y.c])}for(let w=0;w<u;w++){let S=c[w].vertexNormals[v];d[w].data.push(S.a,S.b,S.c)}p&&this.skinIndices.push(h[y.a],h[y.b],h[y.c]),m&&this.skinWeights.push(f[y.a],f[y.b],f[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}},bM=class{constructor(e,t,i,r,n,a=0){this.a=e,this.b=t,this.c=i,this.normal=r&&r.isVector3?r:new H,this.vertexNormals=Array.isArray(r)?r:[],this.color=n&&n.isColor?n:new ii,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=a}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,i=e.vertexNormals.length;t<i;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,i=e.vertexColors.length;t<i;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}};function vSe(e){return this.array.set(e),this}function pL(e){let t=this.array,i=0;for(let r=0,n=e.length;r<n;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new ii),t[i++]=a.r,t[i++]=a.g,t[i++]=a.b}return this}function mL(e){let t=this.array,i=0;for(let r=0,n=e.length;r<n;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new Pe),t[i++]=a.x,t[i++]=a.y}return this}function $b(e){let t=this.array,i=0;for(let r=0,n=e.length;r<n;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new H),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z}return this}function vL(e){let t=this.array,i=0;for(let r=0,n=e.length;r<n;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new vi),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z,t[i++]=a.w}return this}var gSe=["a","b","c"];function ySe(e,t){switch(t){case"c":return e.c;case"b":return e.b;case"a":default:return e.a}}function VC(e,t,i){let r=Math.min(e,t),n=Math.max(e,t),a=r+"_"+n;return i.get(a)}function UC(e,t,i,r,n,a){let s=Math.min(e,t),o=Math.max(e,t),l=s+"_"+o,c;if(r.has(l))c=r.get(l);else{let u=i[s],d=i[o];c={a:u,b:d,newEdge:null,faces:[]},r.set(l,c)}c.faces.push(n),a[e].edges.push(c),a[t].edges.push(c)}function bSe(e,t,i,r){let n,a,s;for(n=0,a=e.length;n<a;n++)i[n]={edges:[]};for(n=0,a=t.length;n<a;n++)s=t[n],UC(s.a,s.b,e,r,s,i),UC(s.b,s.c,e,r,s,i),UC(s.c,s.a,e,r,s,i)}function Zb(e,t,i,r,n){e.push(new bM(t,i,r,void 0,void 0,n))}function zp(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function qb(e,t,i,r){e.push([t.clone(),i.clone(),r.clone()])}var wSe=class{constructor(e=1){this.subdivisions=e}modify(e){e instanceof Kt?e=new Vx().fromBufferGeometry(e):e=e.clone(),e.mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let t=new H,i,r,n,a,s,o=e.vertices,l=e.faces,c=e.faceVertexUvs[0],u=c!==void 0&&c.length>0,d=[],h=new Map;bSe(o,l,d,h);let f=[],p,m,v,y,x,b,w;for(let $ of Array.from(h.keys())){for(m=h.get($),v=new H,x=3/8,b=1/8,w=m.faces.length,w!=2&&(x=.5,b=0,w!=1),v.addVectors(m.a,m.b).multiplyScalar(x),t.set(0,0,0),a=0;a<w;a++){for(y=m.faces[a],s=0;s<3&&(p=o[ySe(y,gSe[s])],!(p!==m.a&&p!==m.b));s++);p&&t.add(p)}t.multiplyScalar(b),v.add(t),m.newEdge=f.length,f.push(v)}let S,_,E,C,A,M,T,P=[];for(r=0,n=o.length;r<n;r++){for(M=o[r],A=d[r].edges,i=A.length,i==3?S=3/16:i>3&&(S=3/(8*i)),_=1-i*Number(S),E=S,i<=2&&(i==2?(_=3/4,E=1/8):i==1||i==0),T=M.clone().multiplyScalar(_),t.set(0,0,0),a=0;a<i;a++)C=A[a],p=C.a!==M?C.a:C.b,t.add(p);t.multiplyScalar(Number(E)),T.add(t),P.push(T)}let D=P.concat(f),k=P.length,L,R,N,I=[],B=[],z,V,W,G,q=new Pe,ae=new Pe,J=new Pe;for(r=0,n=l.length;r<n;r++)y=l[r],L=Number(VC(y.a,y.b,h).newEdge)+k,R=Number(VC(y.b,y.c,h).newEdge)+k,N=Number(VC(y.c,y.a,h).newEdge)+k,Zb(I,L,R,N,y.materialIndex),Zb(I,y.a,L,N,y.materialIndex),Zb(I,y.b,R,L,y.materialIndex),Zb(I,y.c,N,R,y.materialIndex),u&&(z=c[r],V=z[0],W=z[1],G=z[2],q.set(zp(V.x,W.x),zp(V.y,W.y)),ae.set(zp(W.x,G.x),zp(W.y,G.y)),J.set(zp(V.x,G.x),zp(V.y,G.y)),qb(B,q,ae,J),qb(B,V,q,J),qb(B,W,ae,q),qb(B,G,J,ae));e.vertices=D,e.faces=I,u&&(e.faceVertexUvs[0]=B)}},Rn=new H,xSe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=e.geometry??(t==null?void 0:t.geometry)??new Kt().copy(new Cl(100,100,100)),r;t===void 0?(i.computeBoundingBox(),i.boundingBox.getSize(Rn),r={width:Rn.x,height:Rn.y,depth:Rn.z,subdivisions:0}):r=t.parameters;let n={...r,...e.parameters};return{parameters:{width:Math.abs(n.width),height:Math.abs(n.height),depth:Math.abs(n.depth),subdivisions:Math.abs(n.subdivisions)},geometry:i}}static build(e){let{width:t,height:i,depth:r,subdivisions:n}=e.parameters,a=e.geometry??new Kt().copy(new Cl(100,100,100)),s=a.userData.parameters;s===void 0?(a.computeBoundingBox(),a.boundingBox.getSize(Rn)):Rn.set(s.width,s.height,s.depth),(t!==Rn.x||i!==Rn.y||r!==Rn.z)&&a.scale(Rn.x===0?1:t/Rn.x,Rn.y===0?1:i/Rn.y,Rn.z===0?1:r/Rn.z);let o=a.originalGeometry;try{n>0?(o===void 0||(s==null?void 0:s.subdivisions)!==n)&&(o===void 0&&(o=a),a=new wSe(n).modify(o).toBufferGeometry()):(o!==void 0&&(a=o),o=void 0,a.getAttribute("normal")===void 0&&a.computeVertexNormals())}catch{o!==void 0&&(a=o),o=void 0,a.getAttribute("normal")===void 0&&a.computeVertexNormals()}return o!==void 0&&Object.assign(a,{originalGeometry:o}),delete e.geometry,Object.assign(a,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,t,i){new Tj(i).load(e,r=>{let n=this.normalizeInputs({geometry:r});r.boundingBox.getSize(Rn);let a=100/Rn.x;Object.assign(n.parameters,{width:100,height:Rn.y*a,depth:Rn.z*a}),t(this.build(n))})}},SG=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof nn?e.shape:new nn,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t,height:i,spikes:r,cornerRadius:n,depth:a,extrudeBevelSize:s,extrudeBevelSegments:o}=e.parameters,l=e.shape,c=t*.5,u=i*.5,d=0,h=0,f=2*Math.PI/r;for(let m=0;m<r;m++){let v=f*m,y=d+Math.sin(v)*c,x=h+Math.cos(v)*u;l.addPoint(l.createPoint(y,x))}l.isClosed=!0;for(let m=0,v=l.points.length;m<v;m++)l.points[m].roundness=n;l.roundness=n,l.update();let p=cp.create({shape:l,parameters:{roundness:n,depth:a,extrudeBevelSize:s,extrudeBevelSegments:o}});return Object.assign(p,{userData:{...e,type:"PolygonGeometry"}})}},_Se=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,radialSegments:n,heightSegments:a,openEnded:s,cornerRadius:o,cornerSegments:l}=e.parameters,c=new CSe(t*.5,i,n,a,s,o,l);return c.scale(1,1,r/t),Object.assign(c,{userData:{...e,type:"PyramidGeometry"}})}};function z0(e,t,i){i.x=e.x*t.x,i.y=e.y,i.z=e.x*t.y}function HC(e,t,i,r,n,a){let s=t.clone().sub(e),o=i.clone().sub(e),l=s.angleTo(o);if(s.normalize(),o.normalize(),r===n){let c=s.add(o).normalize();a.copy(e).addScaledVector(c,r/Math.sin(l/2))}else{let c=s.angleTo(o);a.copy(e),a.addScaledVector(s,n/Math.sin(c)),a.addScaledVector(o,r/Math.sin(c))}}function SSe(e,t,i){let r=e.clone().sub(t),n=i.clone().sub(t);return r.projectOnVector(n),r.add(t)}var CSe=class extends Kt{constructor(e=.5,t=1,i=4,r=1,n=!1,a=0,s=4){super(),i=Math.floor(Math.max(3,i)),r=Math.floor(r),s=Math.floor(s);let o=[],l=[],c=[],u=[],d=0,h=t/2,f=Math.PI/i,p=e*Math.cos(Math.PI/i),m=2*Math.PI/i,v=(i-2)*Math.PI/i,y=Math.PI-v,x=new H(0,-h,0),b=new H(0,h,0),w=new Pe(e,-h),S=new Pe(p,-h),_=new Pe(0,b.y).sub(S),E=new Pe(0,b.y).sub(w),C=new Pe(_.y,-_.x).normalize(),A=new Pe(E.y,-E.x).normalize(),M=e*Math.cos(Math.PI/i)*Math.tan((Math.PI-_.angle())/2)-1e-8;a=Math.min(a,M);let T;{let N=new H(C.x,C.y,0),I=new H(Math.cos(m)*N.x,N.y,Math.sin(m)*N.x);T=N.angleTo(I)}let P=a/Math.tan((Math.PI-_.angle())/2),D=a/Math.tan((Math.PI-T)/2),k=new H;if(!n){l.push(x.x,x.y,x.z),c.push(0,-1,0),u.push(0,0);let N=d++,I=[],B=w.clone(),z=P/Math.cos(Math.PI/i);B.x-=z;for(let V=0;V<i;V++){let W=V/i*Math.PI*2+f,G=new Pe(Math.sin(W),Math.cos(W));z0(B,G,k),l.push(k.x,k.y,k.z),c.push(0,-1,0),u.push(0,0),I.push(d++)}for(let V=0;V<I.length;V++)o.push(I[V],N,I[(V+1)%I.length])}{let N=new H,I=new H,B=new H,z=new H,V=new H,W=new H;for(let G=0;G<i;G++){let q=G/i*Math.PI*2+f,ae=(G+.5)/i*Math.PI*2+f,J=(G+1)/i*Math.PI*2+f,$=new Pe(Math.sin(q),Math.cos(q)),te=new Pe(Math.sin(ae),Math.cos(ae)),Q=new Pe(Math.sin(J),Math.cos(J));z0(w,$,I),z0(w,Q,B),z0(C,te,N),HC(b,I,B,D,D,z),l.push(z.x,z.y,z.z),HC(I,b,B,D,P,V),l.push(V.x,V.y,V.z),HC(B,I,b,P,D,W),l.push(W.x,W.y,W.z),c.push(N.x,N.y,N.z),c.push(N.x,N.y,N.z),c.push(N.x,N.y,N.z),u.push(0,0),u.push(0,0),u.push(0,0);let pe=d++,me=d++,le=d++;if(o.push(pe,me,le),a>0){{let ge=I.clone().add(B).multiplyScalar(.5),Ie=b.clone().sub(ge).normalize(),we=x.clone().sub(ge).normalize().add(Ie).normalize().multiplyScalar(-1),xe=W.clone().sub(V);L(ge,xe,we,_.angle())}let Z,oe;{let ge=new H;z0(A,Q,ge);let Ie=W.clone().add(z).multiplyScalar(.5);Ie=SSe(Ie,B,b);let we=W.clone().sub(z);[Z,oe]=L(Ie,we,ge,T,z.y)}{let ge=Z,Ie=ge.clone().setY(0).normalize(),we=new H(0,-1,0),xe=Ie.clone().cross(we);R(ge,Ie,we,xe)}{let ge=_.angle(),Ie=Math.PI-ge,we=b.clone();we.y-=a/Math.sin(ge-Math.PI/2);let xe=new H,Se=[];for(let Be=0;Be<s;Be++){let ee=[],X=Math.PI/2-Ie*Be/s,ue=Math.cos(X),Oe=Math.sin(X),Y=ae;for(let qe=0;qe<=Be;qe++){let et=Math.cos(Y),tt=Math.sin(Y);N.x=ue*tt,N.y=Oe,N.z=ue*et,xe.copy(we).addScaledVector(N,a),l.push(xe.x,xe.y,xe.z),c.push(N.x,N.y,N.z),u.push(0,0),ee.push(d++),Y+=Math.PI*2/Be/i}Se.push(ee)}oe.reverse(),Se.push(oe);let Le=Se.length-1;for(let Be=0;Be<Le;Be++){let ee=Se[Be],X=Se[Be+1],ue=ee.length-1;o.push(X[1],ee[0],X[0]);for(let Oe=1;Oe<=ue;Oe++)o.push(ee[Oe],ee[Oe-1],X[Oe]),o.push(X[Oe+1],ee[Oe],X[Oe])}}}}}this.setIndex(o),this.setAttribute("position",new It(l,3)),this.setAttribute("normal",new It(c,3)),this.setAttribute("uv",new It(u,2));function L(N,I,B,z,V){let W=-z/2,G=(Math.PI-z)/2,q=I.clone().normalize().cross(B);N.addScaledVector(B,-a/Math.sin(G));let ae=new H,J=new H,$=1,te=d,Q=[];for(let pe=0;pe<=s;pe++){let me=W+pe/s*z;J.set(0,0,0),J.addScaledVector(q,Math.sin(me)),J.addScaledVector(B,Math.cos(me));for(let le=0;le<=$;le++){let Z=le/$-.5;if(ae.copy(N),ae.addScaledVector(I,Z),ae.addScaledVector(J,a),V!=null){let oe=Math.max(0,ae.y-V);ae.addScaledVector(I,-oe/I.y)}l.push(ae.x,ae.y,ae.z),c.push(J.x,J.y,J.z),u.push(0,0),le===0&&Q.push(d),d++}}for(let pe=0;pe<s;pe++)for(let me=0;me<$;me++){let le=te+me+($+1)*pe,Z=le+($+1),oe=Z+1,ge=le+1;o.push(le,Z,ge),o.push(Z,oe,ge)}return[N.clone().addScaledVector(I,.5),Q]}function R(N,I,B,z){let V=Math.PI/2,W=E.angle()-V,G=[],q=new H,ae=new H;for(let $=0;$<=s;$++){let te=[],Q=$/s;for(let pe=0;pe<=$;pe++){let me=(($?pe/$:0)-.5)*y,le=Math.cos(me),Z=Math.sin(me),oe=Math.atan(Math.tan(W)*le),ge=(V+oe)*Q,Ie=Math.cos(ge),we=Math.sin(ge);q.set(0,0,0),q.addScaledVector(I,we*le),q.addScaledVector(B,Ie),q.addScaledVector(z,we*Z),ae.copy(N).addScaledVector(q,a),l.push(ae.x,ae.y,ae.z),c.push(q.x,q.y,q.z),u.push(0,0),te.push(d++)}G.push(te)}let J=G.length-1;for(let $=0;$<J;$++){let te=G[$],Q=G[$+1],pe=te.length-1;o.push(te[0],Q[1],Q[0]);for(let me=1;me<=pe;me++)o.push(te[me-1],te[me],Q[me]),o.push(te[me],Q[me+1],Q[me])}}}},YP=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),r=Object.assign((t==null?void 0:t.ui)??{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof nn?e.shape:new nn,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)}),ui:r}}static build(e){let t=e.shape,{width:i,height:r,cornerRadius:n,cornerType:a,depth:s,extrudeBevelSize:o,extrudeBevelSegments:l}=e.parameters,c={x:i*.5,y:r*.5},u={x:-c.x,y:-c.y},d={x:c.x,y:c.y};function h(w,S,_){return S>i&&_>r?Math.min(w*i/S,w*r/_):S>i?w*i/S:_>r?w*r/_:w}let f=[];f[0]=n[0]===0?0:h(n[0],n[0]+n[3],n[0]+n[1]),f[1]=n[1]===0?0:h(n[1],n[1]+n[2],n[1]+n[0]),f[2]=n[2]===0?0:h(n[2],n[2]+n[1],n[2]+n[3]),f[3]=n[3]===0?0:h(n[3],n[3]+n[0],n[3]+n[2]);let p=u.x,m=d.x,v=d.y,y=u.y;t.addPoint(t.createPoint(p,v)),t.addPoint(t.createPoint(m,v)),t.addPoint(t.createPoint(m,y)),t.addPoint(t.createPoint(p,y)),t.isClosed=!0;let x=!0;for(let w=0,S=t.points.length;w<S;w++)t.points[w].roundness=f[w],w>0&&f[w]!==f[w-1]&&(x=!1);x&&(t.roundness=f[0]),t.useCubicForRoundedCorners=a!==1,t.update();let b=cp.create({shape:t,parameters:{depth:s,extrudeBevelSize:o,extrudeBevelSegments:l}});return Object.assign(b,{userData:{...e,type:"RectangleGeometry"}})}},ESe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180},e.parameters);return i.thetaLength=kt.clamp(i.thetaLength,0,180),{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t=100,height:i=t,depth:r=t,widthSegments:n=64,heightSegments:a=64,phiStart:s,phiLength:o,thetaStart:l,thetaLength:c}=e.parameters,u;return c===0?(u=new Kt,u.setAttribute("position",new It([],3))):u=new Nm(.5*t,n,a,s,o,l,c*kt.DEG2RAD),u.scale(1,i/t,r/t),Object.assign(u,{userData:{...e,type:"SphereGeometry"}})}},ASe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:0})}}static build(e){let{width:t=100,height:i=t,widthSegments:r=8,heightSegments:n=8}=e.parameters,a=new Pu(t,i,r,n);return a.scale(1,1,1),Object.assign(a,{userData:{...e,type:"PlaneGeometry"}})}},MSe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,angle:n,cornerRadius:a,cornerSegments:s}=e.parameters,o=new TSe(t,i,r,n,a,s);return Object.assign(o,{userData:{...e,type:"BackdropGeometry"}})}},TSe=class extends Kt{constructor(e=1,t=1,i=1,r=90,n=10,a=24){super(),this.type="BackdropGeometry";let s=[],o=[],l=[],c=.001;n==0&&(a=1),a=Math.max(1,Math.floor(a)),n=Math.min(n,100),r=Math.min(180-c,r),r*=Math.PI/180;let u=[],d=Math.PI/2,h=($=0,te=0,Q=0)=>new H($,te,Q),f=h(),p=h(),[m,v,y]=[t/2,e/2,i/2],x=-v,b=+v,[w,S,_]=[h(x,-m,+y),h(x,-m,-y),h(x,+m,-y)],E=($,te=!1)=>Math.sin($-Math.PI/(1+ +te)),C=($,te=!1)=>Math.cos($-Math.PI/(1+ +te));_.y=Math.sin(r)*t-m;let A=Math.cos(r)*t-y,M=w.z-c;r<=d?(_.z=Math.min(A,M),_.z==M&&(_.y-=(A-M)/Math.tan(d-r))):S.z=Math.min(S.z-A-y,w.z-c),f.subVectors(w,S),p.subVectors(_,S);let T=Math.min(f.length(),p.length())*n/100,P=T*Math.tan(r/2),D=T/Math.cos(r/2),k=f.clone().normalize().add(p.normalize()).setLength(D).add(S);f.set(0,E(r,!0),C(r,!0)),u.push([_,f.clone()]);let L=(Math.PI-r)/a;for(let $=0;$<=a;$++){let te=d+r+$*L;f.set(0,Math.sin(te)*P,Math.cos(te)*P),f.add(k),p.set(0,E(te),C(te)),u.push([f.clone(),p.clone()])}u.push([w,h(0,1,0)]);let R=Math.sin(L/2)*P*2,N=u.length-1,I=u[0][0].distanceTo(u[1][0]),B=u[N-1][0].distanceTo(u[N][0]),z=I+R*a+B;u[0].push(1);for(let $=0;$<=a;$++)u[$+1].push(1-(I+$*R)/z);u[N].push(0);let[V,W,G]=u[0],q,ae,J;for(let $=1;$<u.length;$++)[q,ae,J]=u[$],s.push(x,V.y,V.z,x,q.y,q.z,b,V.y,V.z,b,V.y,V.z,x,q.y,q.z,b,q.y,q.z),o.push(0,W.y,W.z,0,ae.y,ae.z,0,W.y,W.z,0,W.y,W.z,0,ae.y,ae.z,0,ae.y,ae.z),l.push(0,G,0,J,1,G,1,G,0,J,1,J),[V,W,G]=[q,ae,J];this.setAttribute("position",new It(s,3)),this.setAttribute("normal",new It(o,3)),this.setAttribute("uv",new It(l,2))}},CG=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof nn?e.shape:new nn,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t,height:i,innerRadiusPercent:r,spikes:n,cornerRadius:a,angle:s,depth:o,extrudeBevelSize:l,extrudeBevelSegments:c}=e.parameters,u=e.shape,d=t*.5,h=i*.5,f=0,p=0,m=s*Math.PI/360/n,v=Math.PI/2*3*-1,y=d*r/100,x=h*r/100;if(n===3&&r===50){m=2*Math.PI/n;for(let w=0;w<n;w++){let S=m*w,_=f+Math.sin(S)*d,E=p+Math.cos(S)*h;u.addPoint(u.createPoint(_,E))}}else for(let w=0;w<n;w++){let S=f+Math.cos(v)*d,_=p+Math.sin(v)*h;u.addPoint(u.createPoint(S,_)),v+=m,S=f+Math.cos(v)*y,_=p+Math.sin(v)*x,u.addPoint(u.createPoint(S,_)),v+=m}u.isClosed=!0;for(let w=0,S=u.points.length;w<S;w++)u.points[w].roundness=a;u.roundness=a,u.update();let b=cp.create({shape:u,parameters:{roundness:a,depth:o,extrudeBevelSize:l,extrudeBevelSegments:c}});return Object.assign(b,{userData:{...e,type:"StarGeometry"}})}},PSe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t,height:i}=e.parameters,r=new Pu(t,i);return Object.assign(r,{userData:{...e,type:"TextFrameGeometry"}})}},DSe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:32,tubularSegments:64,arc:360,cornerRadius:30,cornerSegments:8},e.parameters),r=Math.abs(i.width),n=Math.abs(i.height??i.width),a=Math.round(Math.abs(i.depth??i.width*.25));return{parameters:Object.assign(i,{width:r,height:n,depth:a})}}static build(e){let{width:t,height:i,depth:r,radialSegments:n,tubularSegments:a,arc:s,cornerRadius:o,cornerSegments:l}=e.parameters,c=ISe(t,i,r,t*.5,s,a,0,0,n,o,l);return c.scale(1,i/t,1),Object.assign(c,{userData:{...e,type:"TorusGeometry"}})}};function ISe(e,t,i,r,n,a,s,o,l,c,u){[t,i]=[i,t],s=t/2;let d=kt.clamp(n/360,0,1);if(d===0){let h=new Kt;return h.setAttribute("position",new It([],3)),h}return d===1&&(c=0),new xG(!0,e,t,i,r,d,a,s,o,l,c,u)}var OSe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width),tube:i.tube??i.width*.125})}}static build(e){let{width:t,tube:i,tubularSegments:r,radialSegments:n,p:a,q:s}=e.parameters,o=t*.5;o!==i&&(o-=i);let l=new xj(o,i,r,n,a,s);return Object.assign(l,{userData:{...e,type:"TorusKnotGeometry"}})}},RSe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof nn?e.shape:new nn,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width*(i.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t=100,height:i,cornerRadius:r,depth:n,extrudeBevelSize:a,extrudeBevelSegments:s,isRect:o}=e.parameters,l=e.shape,c=t*.5,u=i*.5;o?(l.addPoint(l.createPoint(-c,u)),l.addPoint(l.createPoint(c,-u)),l.addPoint(l.createPoint(-c,-u))):(l.addPoint(l.createPoint(0,u)),l.addPoint(l.createPoint(c,-u)),l.addPoint(l.createPoint(-c,-u))),l.isClosed=!0;for(let h=0,f=l.points.length;h<f;h++)l.points[h].roundness=r;l.roundness=r,l.update();let d=cp.create({shape:l,parameters:{roundness:r,depth:n,extrudeBevelSize:a,extrudeBevelSegments:s}});return Object.assign(d,{userData:{...e,type:"TriangleGeometry"}})}};function kSe(e,t){let i=2*Math.PI;return(e%i+i)%i===(t%i+i)%i}function LSe(e){return/^(rgba)?\(\s*(\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(e.toLowerCase())}function BSe(e,t,i){let r,n,a,s=Math.floor(e*6),o=e*6-s,l=i*(1-t),c=i*(1-o*t),u=i*(1-(1-o)*t);switch(s%6){case 0:r=i,n=u,a=l;break;case 1:r=c,n=i,a=l;break;case 2:r=l,n=i,a=u;break;case 3:r=l,n=c,a=i;break;case 4:r=u,n=l,a=i;break;case 5:default:r=i,n=l,a=c;break}return{r:r*255,g:n*255,b:a*255}}function NSe(e,t,i){e/=255,t/=255,i/=255;let r=Math.max(e,t,i),n=Math.min(e,t,i),a=r,s=r-n,o=r==0?0:s/r,l;if(r==n)l=0;else{switch(r){case e:l=(t-i)/s+(t<i?6:0);break;case t:l=(i-e)/s+2;break;case i:default:l=(e-t)/s+4;break}l/=6}return{h:l,s:o,v:a}}function FSe(e){return e=Math.floor(e),{r:e>>16&255,g:e>>8&255,b:e&255}}function zSe(e,t,i){return(e<<16)+(t<<8)+i}function VSe(e,t,i){return e=Math.round(e),t=Math.round(t),i=Math.round(i),"#"+[e,t,i].map(r=>r.toString(16).padStart(2,"0")).join("").toUpperCase()}function USe(e){let t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,(r,n,a,s)=>String(n+n+a+a+s+s));let i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null}var HSe={parseRgba:LSe,hsvToRgb:BSe,rgbToHsv:NSe,hexToRgb:FSe,rgbToHex:zSe,rgbToHexString:VSe,hexStringToRgb:USe},jSe=class{add(e,t,i){if(typeof arguments[0]!="string")for(let r in arguments[0])this.add(r,arguments[0][r],arguments[1]);else(Array.isArray(e)?e:[e]).forEach(function(r){this[r]=this[r]||[],t&&this[r][i?"unshift":"push"](t)},this)}run(e,t){this[e]=this[e]||[],this[e].forEach(function(i){i.call(t&&t.context?t.context:t,t)})}},WSe=class{constructor(e){this.jsep=e,this.registered={}}register(...e){e.forEach(t=>{if(typeof t!="object"||!t.name||!t.init)throw new Error("Invalid JSEP plugin format");this.registered[t.name]||(t.init(this.jsep),this.registered[t.name]=t)})}},it=class{static get version(){return"1.3.8"}static toString(){return"JavaScript Expression Parser (JSEP) v"+it.version}static addUnaryOp(t){return it.max_unop_len=Math.max(t.length,it.max_unop_len),it.unary_ops[t]=1,it}static addBinaryOp(t,i,r){return it.max_binop_len=Math.max(t.length,it.max_binop_len),it.binary_ops[t]=i,r?it.right_associative.add(t):it.right_associative.delete(t),it}static addIdentifierChar(t){return it.additional_identifier_chars.add(t),it}static addLiteral(t,i){return it.literals[t]=i,it}static removeUnaryOp(t){return delete it.unary_ops[t],t.length===it.max_unop_len&&(it.max_unop_len=it.getMaxKeyLen(it.unary_ops)),it}static removeAllUnaryOps(){return it.unary_ops={},it.max_unop_len=0,it}static removeIdentifierChar(t){return it.additional_identifier_chars.delete(t),it}static removeBinaryOp(t){return delete it.binary_ops[t],t.length===it.max_binop_len&&(it.max_binop_len=it.getMaxKeyLen(it.binary_ops)),it.right_associative.delete(t),it}static removeAllBinaryOps(){return it.binary_ops={},it.max_binop_len=0,it}static removeLiteral(t){return delete it.literals[t],it}static removeAllLiterals(){return it.literals={},it}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(t){this.expr=t,this.index=0}static parse(t){return new it(t).parse()}static getMaxKeyLen(t){return Math.max(0,...Object.keys(t).map(i=>i.length))}static isDecimalDigit(t){return t>=48&&t<=57}static binaryPrecedence(t){return it.binary_ops[t]||0}static isIdentifierStart(t){return t>=65&&t<=90||t>=97&&t<=122||t>=128&&!it.binary_ops[String.fromCharCode(t)]||it.additional_identifier_chars.has(String.fromCharCode(t))}static isIdentifierPart(t){return it.isIdentifierStart(t)||it.isDecimalDigit(t)}throwError(t){let i=new Error(t+" at character "+this.index);throw i.index=this.index,i.description=t,i}runHook(t,i){if(it.hooks[t]){let r={context:this,node:i};return it.hooks.run(t,r),r.node}return i}searchHook(t){if(it.hooks[t]){let i={context:this};return it.hooks[t].find(function(r){return r.call(i.context,i),i.node}),i.node}}gobbleSpaces(){let t=this.code;for(;t===it.SPACE_CODE||t===it.TAB_CODE||t===it.LF_CODE||t===it.CR_CODE;)t=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");let t=this.gobbleExpressions(),i=t.length===1?t[0]:{type:it.COMPOUND,body:t};return this.runHook("after-all",i)}gobbleExpressions(t){let i=[],r,n;for(;this.index<this.expr.length;)if(r=this.code,r===it.SEMCOL_CODE||r===it.COMMA_CODE)this.index++;else if(n=this.gobbleExpression())i.push(n);else if(this.index<this.expr.length){if(r===t)break;this.throwError('Unexpected "'+this.char+'"')}return i}gobbleExpression(){let t=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",t)}gobbleBinaryOp(){this.gobbleSpaces();let t=this.expr.substr(this.index,it.max_binop_len),i=t.length;for(;i>0;){if(it.binary_ops.hasOwnProperty(t)&&(!it.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!it.isIdentifierPart(this.expr.charCodeAt(this.index+t.length))))return this.index+=i,t;t=t.substr(0,--i)}return!1}gobbleBinaryExpression(){let t,i,r,n,a,s,o,l,c;if(s=this.gobbleToken(),!s||(i=this.gobbleBinaryOp(),!i))return s;for(a={value:i,prec:it.binaryPrecedence(i),right_a:it.right_associative.has(i)},o=this.gobbleToken(),o||this.throwError("Expected expression after "+i),n=[s,a,o];i=this.gobbleBinaryOp();){if(r=it.binaryPrecedence(i),r===0){this.index-=i.length;break}a={value:i,prec:r,right_a:it.right_associative.has(i)},c=i;let u=d=>a.right_a&&d.right_a?r>d.prec:r<=d.prec;for(;n.length>2&&u(n[n.length-2]);)o=n.pop(),i=n.pop().value,s=n.pop(),t={type:it.BINARY_EXP,operator:i,left:s,right:o},n.push(t);t=this.gobbleToken(),t||this.throwError("Expected expression after "+c),n.push(a,t)}for(l=n.length-1,t=n[l];l>1;)t={type:it.BINARY_EXP,operator:n[l-1].value,left:n[l-2],right:t},l-=2;return t}gobbleToken(){let t,i,r,n;if(this.gobbleSpaces(),n=this.searchHook("gobble-token"),n)return this.runHook("after-token",n);if(t=this.code,it.isDecimalDigit(t)||t===it.PERIOD_CODE)return this.gobbleNumericLiteral();if(t===it.SQUOTE_CODE||t===it.DQUOTE_CODE)n=this.gobbleStringLiteral();else if(t===it.OBRACK_CODE)n=this.gobbleArray();else{for(i=this.expr.substr(this.index,it.max_unop_len),r=i.length;r>0;){if(it.unary_ops.hasOwnProperty(i)&&(!it.isIdentifierStart(this.code)||this.index+i.length<this.expr.length&&!it.isIdentifierPart(this.expr.charCodeAt(this.index+i.length)))){this.index+=r;let a=this.gobbleToken();return a||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:it.UNARY_EXP,operator:i,argument:a,prefix:!0})}i=i.substr(0,--r)}it.isIdentifierStart(t)?(n=this.gobbleIdentifier(),it.literals.hasOwnProperty(n.name)?n={type:it.LITERAL,value:it.literals[n.name],raw:n.name}:n.name===it.this_str&&(n={type:it.THIS_EXP})):t===it.OPAREN_CODE&&(n=this.gobbleGroup())}return n?(n=this.gobbleTokenProperty(n),this.runHook("after-token",n)):this.runHook("after-token",!1)}gobbleTokenProperty(t){this.gobbleSpaces();let i=this.code;for(;i===it.PERIOD_CODE||i===it.OBRACK_CODE||i===it.OPAREN_CODE||i===it.QUMARK_CODE;){let r;if(i===it.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==it.PERIOD_CODE)break;r=!0,this.index+=2,this.gobbleSpaces(),i=this.code}this.index++,i===it.OBRACK_CODE?(t={type:it.MEMBER_EXP,computed:!0,object:t,property:this.gobbleExpression()},this.gobbleSpaces(),i=this.code,i!==it.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):i===it.OPAREN_CODE?t={type:it.CALL_EXP,arguments:this.gobbleArguments(it.CPAREN_CODE),callee:t}:(i===it.PERIOD_CODE||r)&&(r&&this.index--,this.gobbleSpaces(),t={type:it.MEMBER_EXP,computed:!1,object:t,property:this.gobbleIdentifier()}),r&&(t.optional=!0),this.gobbleSpaces(),i=this.code}return t}gobbleNumericLiteral(){let t="",i,r;for(;it.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(this.code===it.PERIOD_CODE)for(t+=this.expr.charAt(this.index++);it.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(i=this.char,i==="e"||i==="E"){for(t+=this.expr.charAt(this.index++),i=this.char,(i==="+"||i==="-")&&(t+=this.expr.charAt(this.index++));it.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);it.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+t+this.char+")")}return r=this.code,it.isIdentifierStart(r)?this.throwError("Variable names cannot start with a number ("+t+this.char+")"):(r===it.PERIOD_CODE||t.length===1&&t.charCodeAt(0)===it.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:it.LITERAL,value:parseFloat(t),raw:t}}gobbleStringLiteral(){let t="",i=this.index,r=this.expr.charAt(this.index++),n=!1;for(;this.index<this.expr.length;){let a=this.expr.charAt(this.index++);if(a===r){n=!0;break}else if(a==="\\")switch(a=this.expr.charAt(this.index++),a){case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:t+=a}else t+=a}return n||this.throwError('Unclosed quote after "'+t+'"'),{type:it.LITERAL,value:t,raw:this.expr.substring(i,this.index)}}gobbleIdentifier(){let t=this.code,i=this.index;for(it.isIdentifierStart(t)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(t=this.code,it.isIdentifierPart(t));)this.index++;return{type:it.IDENTIFIER,name:this.expr.slice(i,this.index)}}gobbleArguments(t){let i=[],r=!1,n=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let a=this.code;if(a===t){r=!0,this.index++,t===it.CPAREN_CODE&&n&&n>=i.length&&this.throwError("Unexpected token "+String.fromCharCode(t));break}else if(a===it.COMMA_CODE){if(this.index++,n++,n!==i.length){if(t===it.CPAREN_CODE)this.throwError("Unexpected token ,");else if(t===it.CBRACK_CODE)for(let s=i.length;s<n;s++)i.push(null)}}else if(i.length!==n&&n!==0)this.throwError("Expected comma");else{let s=this.gobbleExpression();(!s||s.type===it.COMPOUND)&&this.throwError("Expected comma"),i.push(s)}}return r||this.throwError("Expected "+String.fromCharCode(t)),i}gobbleGroup(){this.index++;let t=this.gobbleExpressions(it.CPAREN_CODE);if(this.code===it.CPAREN_CODE)return this.index++,t.length===1?t[0]:t.length?{type:it.SEQUENCE_EXP,expressions:t}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:it.ARRAY_EXP,elements:this.gobbleArguments(it.CBRACK_CODE)}}},GSe=new jSe;Object.assign(it,{hooks:GSe,plugins:new WSe(it),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});it.max_unop_len=it.getMaxKeyLen(it.unary_ops);it.max_binop_len=it.getMaxKeyLen(it.binary_ops);var xv=e=>new it(e).parse(),$Se=Object.getOwnPropertyNames(it);$Se.forEach(e=>{xv[e]===void 0&&e!=="prototype"&&(xv[e]=it[e])});xv.Jsep=it;var ZSe="ConditionalExpression",qSe={name:"ternary",init(e){e.hooks.add("after-expression",function(t){if(t.node&&this.code===e.QUMARK_CODE){this.index++;let i=t.node,r=this.gobbleExpression();if(r||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let n=this.gobbleExpression();if(n||this.throwError("Expected expression"),t.node={type:ZSe,test:i,consequent:r,alternate:n},i.operator&&e.binary_ops[i.operator]<=.9){let a=i;for(;a.right.operator&&e.binary_ops[a.right.operator]<=.9;)a=a.right;t.node.test=a.right,a.right=t.node,t.node=i}}else this.throwError("Expected :")}})}};xv.plugins.register(qSe);function cS(e){return{all:e=e||new Map,on:function(t,i){var r=e.get(t);r?r.push(i):e.set(t,[i])},off:function(t,i){var r=e.get(t);r&&(i?r.splice(r.indexOf(i)>>>0,1):e.set(t,[]))},emit:function(t,i){var r=e.get(t);r&&r.slice().map(function(n){n(i)}),(r=e.get("*"))&&r.slice().map(function(n){n(t,i)})}}}var EG=class{constructor(e,t,i){var r;this.id=e,this.userAPI=t,this.result=void 0,this.error="null",this.isPrefetched=!1,this.isLoading=!1,this.isLoaded=!1,this.prefetchPromise=new Promise(n=>n()),this.emitter=cS(),this._innerCallUserAPI=async n=>{var a,s,o;this.emitter.emit("start",{userAPIId:this.id}),this.isLoading=!0,this.isLoading=!1;try{this.result=await JSe(this.userAPI,n),this.error="null",this.emitter.emit("success",{userAPIId:this.id})}catch(l){let c=((o=(s=(a=l.message)==null?void 0:a.split("_:_"))==null?void 0:s[0])==null?void 0:o.replace("status:",""))??"null";this.error=c,this.result=null,this.emitter.emit("error",{userAPIId:this.id})}this.isLoading=!1,this.isPrefetched=!0,this.isLoaded=!0},((r=t==null?void 0:t.integration)==null?void 0:r.type)==="OpenAI"?this.result={content:""}:t.method==="GET"&&t.url!==""&&(this.prefetchPromise=this.prefetch(i)),this._debouncedCallUserAPI=this._innerCallUserAPI,this._updateDebouncedCallUserAPI(),this._debouncedPrefetch=f1(this.prefetch,1e3,{trailing:!0})}_updateDebouncedCallUserAPI(){this._debouncedCallUserAPI=this.userAPI.debounce!==void 0&&this.userAPI.debounce>0?f1(this._innerCallUserAPI,this.userAPI.debounce,{leading:!0,trailing:!0}):this._innerCallUserAPI}async prefetch(e){await this.callUserAPI(e)}async callUserAPI(e){await this._debouncedCallUserAPI(e)}update(e,t,i=!0){this.userAPI=e,this._updateDebouncedCallUserAPI(),this.userAPI.url!==""&&this.userAPI.method==="GET"&&i&&this._debouncedPrefetch(t)}retrieveValue(e){if(this.result)try{return Un.zoom(this.result,e)}catch(t){console.error(t)}}retrieveZoomedKeyValues(e){if(this.result){let t=e&&e.length?Un.zoom(this.result,e):this.result;if(QSe(t))return Object.entries(t);if(XSe(t))return t.map((i,r)=>[r.toString(),i]);throw KSe(t)?new Error("This path points to a value, use retrieveValue() instead. "+(e==null?void 0:e.join("."))):new Error("Path error"+(e==null?void 0:e.join(".")))}}dispose(){}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}get autostart(){return this.userAPI.autoStart}};function YSe(e){let t=new Headers;return e.headers.forEach(i=>{i.data.key!==""&&t.append(i.data.key,i.data.value)}),t}function KSe(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e===null}function XSe(e){return Array.isArray(e)}function QSe(e){return typeof e=="object"&&e!==null}async function JSe(e,t,i=new AbortController){var l,c,u,d;let r,n=e.url,a=((l=e.proxy)==null?void 0:l.enabled)??!1,s;if(((c=e.integration)==null?void 0:c.type)==="OpenAI"){let h=cg(e.integration.prompt===""?[]:JSON.parse(e.integration.prompt),t),f=e.integration.behavior===""?[]:cg(JSON.parse(e.integration.behavior),t);s=`{
		"model": "${e.integration.model}",
		"messages": [${e.integration.useBehavior?`
		{
			"role": "system",
			"content": "${f}"
		},`:""}
		{
			"role": "user",
			"content": "${h}"
		}
		]
	}`}if(a){n=`https://apis.spline.design/file/${e.proxy.fileId}/external-api/request?uuidexternalapi=${e.proxy.proxyId}`;let h;s!==void 0?h=s:e.method==="POST"&&e.body&&(h=cg(JSON.parse(e.body),t)),h!==void 0&&(n+=`&data=${encodeURIComponent(h.replace(/(\r\n|\n|\r|\t)/gm,""))}`)}else((u=e.integration)==null?void 0:u.type)==="OpenAI"?r=s:e.method==="POST"&&e.body&&(r=cg(JSON.parse(e.body),t));let o=await fetch(n,{method:a?"GET":e.method,headers:a?void 0:YSe(e),signal:i.signal,body:r});if(!o.ok)throw new Error("status:"+o.status+"_:_"+o.statusText);if(((d=e.integration)==null?void 0:d.type)==="OpenAI"){let h=await o.json();return a&&(h=h.response),{content:h.choices[0].message.content}}else{let h=await o.json();return a&&(h=h.response),h}}var AG=(e,t)=>{if(typeof e=="string"){let i=t.getVariable(e);if(i)return AG(i,t)}return Sa.isBoolean(e)?Sa.getDisplayedValue(e).toLowerCase():Sa.getDisplayedValue(e)},cg=(e,t)=>e.map((i,r)=>{if("text"in i)return i.text;if("type"in i){if(i.type==="paragraph")return(r>0?`
`:"")+cg(i.children,t);if(i.type==="variable"){let n=t.getVariable(i.variableId);if(n!==void 0)return AG(n,t)}}return""}).join(""),e3e=["+","-","*","/","(",")","==","!=",">","<",">=","<=","and","or","!","%","^",","],t3e=["0","1","2","3","4","5","6","7","8","9","."],i3e=["sin","cos","tan","asin","acos","atan","atan2","sqrt","abs","log","exp","floor","ceil","round","min","max","random"];function r3e(e){return typeof e!="string"?!1:!isNaN(e)&&!isNaN(parseFloat(e))}xv.addBinaryOp("^",11,!0);function MG(e,t,i="number"){let r="";for(let s=0;s<e.length;s++){let o=e[s];if("objType"in o&&o.objType==="api"){let l=JSON.parse(o.id),c=l[0],u=t.getUserAPI(c);if(u!==void 0&&u instanceof EG){let d=u.retrieveValue(l.slice(1));d!==void 0&&(r+=d)}continue}if("objType"in o&&o.objType==="webhook"){let l=JSON.parse(o.id),[c,u]=l,d=t.getUserWebhook(c);if(d!==void 0){let h=d.getParameterValue(u);h!==void 0&&(r+=h)}continue}if("objType"in o&&o.objType==="aiAssistant"){let l=t.openAIRealtime;if("objId"in o&&o.objId!==void 0){let c;if(t.scene.data.objects.traverse((u,d)=>{var f;let h=(f=d.events)==null?void 0:f.find(p=>p.id===o.objId);h&&(c=h)}),c!==void 0&&c.data.type==="AIAssistantListener"){let u=l==null?void 0:l.computeAnalysisForListenerEvent(c.data);if(u!==void 0){r+=u;continue}}}r+=(l==null?void 0:l.voice)??0;continue}if("id"in o){let l=e[s-1];if(s>0&&"id"in l){console.error("Two variables in a row",e);return}let c=t.getVariable(o.id),u=Sa.getDisplayedValue(c);i==="number"&&Sa.isTextValue(c)&&Array.isArray(c.textValue)&&c.textValue.length===1?u=parseFloat(u).toString():i==="boolean"&&Sa.isBoolean(c)?u=c?"true":"false":i==="boolean"&&Sa.isTextValue(c)&&!Array.isArray(c.textValue)&&(u='"'+u+'"'),r+=u;continue}else if(i==="string"){o.name!=='"'&&(o.name!=="+"||o.escaped)&&(r+=o.name),o.name==="+"&&!o.escaped&&r[r.length-1]==="\\"&&(r=r.slice(0,-1)+o.name);continue}if(o.name==="and"){r+="&&";continue}if(o.name==="or"){r+="||";continue}if(o.name==="True"){r+="true";continue}if(o.name==="False"){r+="false";continue}if(i==="boolean"&&!r3e(o.name)&&!t3e.includes(o.name)&&!e3e.includes(o.name)&&!i3e.includes(o.name.replace(/\($/g,""))){r+='"'+o.name+'"';continue}r+=o.name}if(i==="string")return r;if(e.length===0){if(i==="number")return 0;if(i==="boolean")return!1}let n;try{n=xv(r)}catch(s){console.error(r,s);return}let a;try{a=Ki(n)}catch(s){console.error(r,n,s)}return a}function Ki(e){switch(e.type){case"BinaryExpression":switch(e.operator){case"==":return+(Ki(e.left)===Ki(e.right));case"!=":return+(Ki(e.left)!==Ki(e.right));case">":return+(Ki(e.left)>Ki(e.right));case">=":return+(Ki(e.left)>=Ki(e.right));case"<":return+(Ki(e.left)<Ki(e.right));case"<=":return+(Ki(e.left)<=Ki(e.right));case"+":return Ki(e.left)+Ki(e.right);case"-":return Ki(e.left)-Ki(e.right);case"*":return Ki(e.left)*Ki(e.right);case"/":return Ki(e.left)/Ki(e.right);case"%":return Ki(e.left)%Ki(e.right);case"&&":return Ki(e.left)&&Ki(e.right);case"||":return Ki(e.left)||Ki(e.right);case"^":return Math.pow(Ki(e.left),Ki(e.right));default:throw new Error("Unknown operator: "+e.operator)}case"UnaryExpression":switch(e.operator){case"-":return-Ki(e.argument);case"!":return+!Ki(e.argument);default:throw new Error("Unknown operator: "+e.operator)}case"Identifier":throw new Error("Unknown identifier: "+e.name);case"Literal":return e.value;case"CallExpression":if(e.callee.type==="Identifier"){if(e.callee.name==="random"){let t=0,i=1;if(e.arguments.length>=1)try{t=Ki(e.arguments[0])}catch(r){console.warn(r)}if(e.arguments.length>=2)try{i=Ki(e.arguments[1])}catch(r){console.warn(r)}return t=Math.min(i,t),i=Math.max(i,t),t+Math.random()*(i-t)}return Math[e.callee.name].apply(null,e.arguments.map(Ki))}else throw new Error("Unknown node");default:throw new Error("Unknown node type: "+e.type)}}var n3e=new pt,a3e=new pt;function s3e(e,t,i){let r=[new H,new H,new H],n=[new H,new H,new H];return e.extractBasis(r[0],r[1],r[2]),t.extractBasis(n[0],n[1],n[2]),r.forEach((a,s)=>{let o=n[s],l=kt.lerp(a.length(),o.length(),i);a.lerp(o,i).setLength(l)}),new pt().makeBasis(r[0],r[1],r[2])}var o3e=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},(t==null?void 0:t.parameters)??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),r=Math.abs(i.width),n=Math.abs(i.height??i.width),a=Math.abs(i.depth??0),s=(t==null?void 0:t.shapeData)??qP.create({parameters:YW}).userData.shape;return{path:e.path??Ex.defaultData(),parameters:Object.assign(i,{width:r,height:n,depth:a,extrusion:{...KW,...i.extrusion}}),shapeData:s}}static build(e){if(e.path.points.length>=2){let t=new l3e(e);return Object.assign(t,{userData:{...e,type:"PathGeometry"}})}else return Object.assign(new Kt,{userData:{...e,type:"PathGeometry"}})}},l3e=class extends Kt{constructor(e){super(),this.type="PathExtrusionGeometry",this.inputs=e,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&this.inputs.parameters.extrusion.depth===1}_isOpenEnded(){let e=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&e.depth===1)||!kSe(e.twist,0)||e.startScale!==e.endScale}build(){let e=this._extractPathPoints();if(e.length<2)return;let t=this._computeBasisMatrices(e),{depth:i,offset:r}=this.inputs.parameters.extrusion;i=Math.max(0,Math.min(i,1)),r=Math.max(0,Math.min(r,1));let n=this.inputs.path.isClosed?e.length:e.length-1,a=Math.floor(r*n),s=this.inputs.path.isClosed?Math.ceil((i+r)*n):Math.ceil(Math.min(1,i+r)*n),o=Math.min(Math.max(2,s-a+1),n+2),l=[],c=[];for(let N=0;N<o;N++){let I=this.inputs.path.isClosed?(N+a)%e.length:Math.min(N+a,e.length-1);l.push(e[I].clone()),c.push(t[I].clone())}let u=(N,I,B)=>{l[N]=l[N].clone().lerp(l[I],B),c[N]=s3e(c[N],c[I],B)},d=0,h=r*n%1;(!this.inputs.path.isClosed||i<=1)&&(h||r===0)&&(d=h,u(0,1,d));let f=0,p=(r+i)*n%1;if((this.inputs.path.isClosed&&i<=1||!this.inputs.path.isClosed&&r+i<1)&&p&&(f=p,u(l.length-1,l.length-2,1-f)),i===0){let N=l.length-1;l[N].copy(l[0]),c[N].copy(c[0])}this._applyPathModifiers(c,d,f);let{bevel:m,bevelSides:v}=this.inputs.parameters.extrusion,y=m>0?this.inputs.parameters.extrusion.capType:"flat",x=5;this.inputs.parameters.extrusion.shape.type==="Custom"&&(x=this.inputs.parameters.extrusion.shape.shapeQuality==="low"?5:12);let{regions:b,infos:w,vertices:S}=this._computeShapePoints(x),_=0,E;y==="round"&&(E=new ZP(this.inputs.shapeData,2*m,m,x,v,void 0,!0),_=E.getAttribute("position").count);let C=0,A=0;w.sort((N,I)=>N.start-I.start),w.forEach(N=>{N.verticesStart=C,N.verticesCount=N.continuous.reduce((I,B,z)=>I+(z===0||!B?2:1),0),A+=N.verticesCount,C=A});let M=A*o,T,P=0;if(this._isOpenEnded()&&y==="flat"){try{T=Vd({windingRule:yr.ODD,elementType:Cn.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:b})}catch{T=pG}P=T.vertexCount}let D=M+2*P+_*2,k=M+2*P,L={positions:new Float32Array(D*3),normals:new Float32Array(D*3),uvs:new Float32Array(D*2)},R=[];if(w.forEach(N=>{this._extrudeRegion(N,S,c,l,L,R,this._isGeometryClosed()&&!this._isOpenEnded())}),T&&(this._closeEnd(T,M,R,L,c[0],l[0],!1),this._closeEnd(T,M+P,R,L,c[c.length-1],l[l.length-1],!0)),E){L.positions.set(E.getAttribute("position").array,k*3),L.normals.set(E.getAttribute("normal").array,k*3),L.uvs.set(E.getAttribute("uv").array,k*2);for(let z=k;z<k+_;z++)L.uvs[z*2+1]=1e-4;let N=R.length;R.push(...E.getIndex().array.map(z=>z+k)),k+=_,L.positions.set(E.getAttribute("position").array,k*3),L.normals.set(E.getAttribute("normal").array,k*3),L.uvs.set(E.getAttribute("uv").array,k*2);let I=R.length;R.push(...E.getIndex().array.map(z=>z+k)),this.setAttribute("position",new ui(L.positions,3)),this.setAttribute("normal",new ui(L.normals,3)),this.setAttribute("uv",new ui(L.uvs,2)),this.setIndex(R);let B=n3e;B.copy(c[c.length-1]).setPosition(l[l.length-1]),this.applyMatrix4OnRange(B,k,D),B.copy(c[0]).setPosition(l[0]).multiply(a3e.makeScale(1,1,-1)),this.applyMatrix4OnRange(B,k-_,k),this.reverseIndicesOnRange(N,I)}else this.setAttribute("position",new ui(L.positions,3)),this.setAttribute("normal",new ui(L.normals,3)),this.setAttribute("uv",new ui(L.uvs,2)),this.setIndex(R)}_extractPathPoints(){let e=aG(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(e.length<2)return[];let t=[e[0]];return e.forEach(i=>{t[t.length-1].distanceToSquared(i)>.001&&t.push(i)}),this.inputs.path.isClosed&&t[t.length-1].distanceTo(t[0])<.001&&t.pop(),t}_computeBasisMatrices(e){let t=[],i=e.length,r=this.inputs.path.isClosed,n=new H,a=new H,s=new H,o=new H,l=new H(0,1,0);for(let p=0;p<i;p++){let m=e[p],v;p===0?v=r?e[e.length-2]:m.clone().multiplyScalar(2).sub(e[1]):v=e[p-1];let y;p===i-1?y=r?e[1]:m.clone().multiplyScalar(2).sub(e[p-1]):y=e[p+1];let x=m.clone().sub(v).normalize(),b=y.clone().sub(m).normalize(),w=x.clone().add(b).normalize();s.copy(w),p===0&&(w.equals(l)||w.clone().negate().equals(l))&&l.set(0,0,1);let S=l.clone().cross(w).normalize(),_=w.clone().cross(S).normalize();l.copy(_),o.copy(S),p===0&&(n.copy(_),a.copy(w));let E=new pt().makeBasis(S,_,w);t.push(E)}let c=r?a:s,u=r?n:new H(0,1,0),d=c.clone().cross(o).normalize(),h=Math.acos(u.dot(d));if(isNaN(h))return t;let f=u.clone().cross(d);c.dot(f)>0&&(h*=-1);for(let p=1;p<t.length;p++){let m=new pt().makeRotationZ(h*p/t.length);t[p].multiply(m)}return t}_applyPathModifiers(e,t,i){let r=e.length,{angle:n,twist:a,startScale:s,endScale:o}=this.inputs.parameters.extrusion,l=new pt,c=new pt;return e.forEach((u,d)=>{let h=d===0?0:d===r-1?1:(d-t)/(r-(i===0?0:1)-(t+(1-i)));l.makeRotationZ(kt.lerp(n,n+a,h)*kt.DEG2RAD);let f=kt.lerp(s,o,h);c.makeScale(f,f,f),u.multiply(l).multiply(c)}),e}_computeShapePoints(e=12,t=yr.ODD){let i=this.inputs.shapeData,r=i.extractShapePointsToFlatArray([],e),n=i.shapeHoles.map(c=>{let u=c.extractShapePointsToFlatArray([],e),d=[];for(let h=u.length-1;h>=1;h-=2){let f=u[h-1],p=u[h-0];d.push(f,p)}return d}),a;try{a=Vd({windingRule:t,elementType:Cn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[r]})}catch{a=$P}let s;try{s=Vd({windingRule:yr.ODD,elementType:Cn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...n]})}catch{s=fG}if(!a)throw new Error("error generating geometry");let o=a.elementCount;if(s){a.elementCount+=s.elementCount;for(let c=0;c<s.elements.length;c++){let u=s.elements[c],d=c%2===0?a.vertexCount:0;a.elements.push(u+d)}for(let c=0;c<s.vertexIndices.length;c++){let u=s.vertexIndices[c],d=a.vertexCount;a.vertexIndices.push(u+d)}for(let c=0;c<s.vertices.length;c++){let u=s.vertices[c];a.vertices.push(u)}}for(let c=0,u=a.vertexCount;c<u;c++){let d=c*2;a.vertices[d+0],a.vertices[d+1]}let l=[];for(let c=a.elementCount-1;c>=0;c--){let u=c>=o,d=c*2,h=a.elements[d+0],f=a.elements[d+1],p=h+f,m={start:h,count:f,normals:[],isHole:u,continuous:[],verticesStart:0,verticesCount:0};l.push(m);let v=h,y=p-1,x=h+1,b=i.roundedCurves.length;do{let w=v-h;a.vertices[y*2+0],a.vertices[y*2+1];let S=a.vertices[v*2+0],_=a.vertices[v*2+1],E=a.vertices[x*2+0],C=a.vertices[x*2+1],A=S-E,M=_-C,T=Math.sqrt(A*A+M*M);A/=T,M/=T,m.normals[w*2+0]=-M,m.normals[w*2+1]=A;let P=a.vertexIndices[v];if(Array.isArray(P))m.continuous[w]=!1;else{let[D,k]=i.getCurveIndexFromVertexId(P-1,!0);if(k>0&&k<1)m.continuous[w]=!0;else{let L=k===1?D+1:D-1;L=(L+b)%b;let R=k===1?0:1,N=i.roundedCurves[D].getTangent(k),I=i.roundedCurves[L].getTangent(R);m.continuous[w]=N.dot(I)>.95}}u&&(m.normals[w*2+0]*=-1,m.normals[w*2+1]*=-1),[y,v,x]=[v,x,x+1],x>=p&&(x-=f)}while(x!==h+1)}return{regions:[r,...n],infos:l,vertices:a.vertices}}_insertVertex(e,t,i,r,n){let a=t*2,s=t*3;e.positions[s+0]=i.x,e.positions[s+1]=i.y,e.positions[s+2]=i.z,e.normals[s+0]=r.x,e.normals[s+1]=r.y,e.normals[s+2]=r.z,e.uvs[a+0]=n.x,e.uvs[a+1]=n.y}_extrudeRegion(e,t,i,r,n,a,s){let o=new H,l=new H,c=new H,u=new H,d=new Pe;i.forEach((f,p)=>{let m=r[p],v=e.verticesStart*i.length+e.verticesCount*p;for(let y=0;y<e.count;y++){let x=(e.start+y)*2;if(o.set(t[x+0],t[x+1],0),c.copy(o).applyMatrix4(f).add(m),e.continuous[y])u.set(e.normals[y*2+0],e.normals[y*2+1],0);else{let b=y===0?(e.start+e.count-1)*2:x-2;l.set(t[b+0],t[b+1],0),u.copy(o).sub(l),u.set(-u.y,u.x,0),e.isHole||u.negate()}if(u.applyMatrix4(f).normalize(),d.set(y===0?1:y/e.count,p/(i.length-1)),this._insertVertex(n,v,c,u,d),v++,!e.continuous[y]||y===0){if(y===0)u.set(e.normals[y*2+0],e.normals[y*2+1],0),d.set(0,p/(i.length-1));else{let b=y===e.count-1?e.start*2:x+2;l.set(t[b+0],t[b+1],0),u.copy(l).sub(o),u.set(-u.y,u.x,0),e.isHole||u.negate()}u.applyMatrix4(f).normalize(),this._insertVertex(n,v,c,u,d),v++}}});let h=i.length-1;for(let f=0;f<h;f++){let p=e.verticesStart*i.length+e.verticesCount*f,m=e.verticesStart*i.length+e.verticesCount*(f+1),v=0;for(let y=0;y<e.count;y++){(!e.continuous[y]||y===0)&&v++;let x=y===e.count-1?0:v+1,b=p+v,w=p+x,S=m+x,_=m+v;e.isHole?a.push(b,S,w,b,_,S):a.push(b,w,S,b,S,_),v++}}}_closeEnd(e,t,i,r,n,a,s){let o=e.vertexCount,l=new H(0,0,s?-1:1).applyMatrix4(n),c=new H,u=new Pe;for(let h=0;h<o;h++){let f=2*h;c.set(e.vertices[f+0],e.vertices[f+1],0).applyMatrix4(n).add(a),this._insertVertex(r,t+h,c,l,u)}let d=e.elements;for(let h=0;h<e.elementCount;h++){let f=3*h,p=d[f+0]+t,m=d[f+(s?1:2)]+t,v=d[f+(s?2:1)]+t;i.push(p,m,v)}}applyMatrix4OnRange(e,t,i){let r=e.elements,n=new An().getNormalMatrix(e).elements,a,s,o,l,c=this.attributes.position,u=this.attributes.normal;if(!c||!u)return;let d=c.array,h=u.array,f=c.itemSize;for(let p=t*f,m=i*f;p<m;p+=f){if(p===t)debugger;a=d[p+0],s=d[p+1],o=d[p+2],l=1/(r[3]*a+r[7]*s+r[11]*o+r[15]),d[p+0]=(r[0]*a+r[4]*s+r[8]*o+r[12])*l,d[p+1]=(r[1]*a+r[5]*s+r[9]*o+r[13])*l,d[p+2]=(r[2]*a+r[6]*s+r[10]*o+r[14])*l,a=h[p+0],s=h[p+1],o=h[p+2],h[p+0]=n[0]*a+n[3]*s+n[6]*o,h[p+1]=n[1]*a+n[4]*s+n[7]*o,h[p+2]=n[2]*a+n[5]*s+n[8]*o}c.needsUpdate=!0,u.needsUpdate=!0}reverseIndicesOnRange(e,t){let i=this.index;if(i){for(let r=e;r<t;r+=3){let n=i.getX(r),a=i.getX(r+1),s=i.getX(r+2);i.setXYZ(r,s,a,n)}i.needsUpdate=!0}}};function TG(){let e=new Kt;return e.setAttribute("position",new ui(new Float32Array([]),3)),e.setIndex(new ui(new Uint16Array([]),1)),e}var c3e=TG().attributes,u3e=12,d3e=1,wM=class extends Kt{constructor(e,t){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],Object.assign(this.attributes,c3e),this.userData={parameters:e,type:"TextGeometry"};let i=t.getFont(e.font);i!=null&&i.isLoaded?(this.font=i,this.update(e)):this.updateFont(e.font,t).then(()=>{this.update(e),t==null||t.requestRender()})}async updateFont(e,t){let i=t.getFont(e);i&&(this.font=i,await i.loadingPromise)}update(e){let t=this.font;if(this.userData={parameters:e,type:"TextGeometry"},!(t!=null&&t.isLoaded)){console.warn("Cannot update text because its font is not loaded");return}let{width:i,height:r,depth:n,extrudeBevelSize:a,extrudeBevelSegments:s,text:o,textTransform:l}=e,c=Sa.getDisplayedValue(o),u=l===2?c.toUpperCase():l===3?c.toLowerCase():c,d=h3e(e,t,u),{shapes:h,charWidths:f,charCoords:p}=t.generateShapes(d,e),m=(typeof i=="number"?i:1)*.5,v=(typeof r=="number"?r:1)*.5,y=h.map(w=>new nn().fromShape(w,!0));this.vectorShapes=y;let x=y.map(w=>cp.create({shape:w,parameters:{depth:n,extrudeBevelSegments:s,extrudeBevelSize:a,windingRule:n<=0?yr.NONZERO:yr.ODD,subdivisions:this.isLowResolution&&n>0?d3e:u3e}})),b=x.length?bf(x):TG();b.translate(-m,v,0),this.dispose(),this.wrappedText=d,this.charCoords=p,this.charWidths=f,this.deleteAttribute("extrudeNormal"),Object.entries(b.attributes).forEach(([w,S])=>{this.setAttribute(w,S)}),this.setIndex(b.index),this.computeBoundingSphere()}clone(){let e=No(new Kt,wM.prototype);return e.copy(this),console.log("CloneGeometry",this,e),e}copy(e){return Object.entries(e.attributes).forEach(([t,i])=>{this.setAttribute(t,i)}),this.setIndex(e.index),this.userData={parameters:{...e.userData.parameters},type:"TextGeometry"},this}async setText(e){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:{textValue:e}})}get text(){return this.userData.parameters.text??""}};function h3e(e,t,i){let r=[""],n="";for(let a of i)n+=a,a===" "||a===`
`?(r[r.length-1]+=n,n="",a===`
`&&r.push("")):t.getTextWidth(r[r.length-1]+n,e)>e.width&&(r[r.length-1].length&&r.push(""),t.getTextWidth(r[r.length-1]+n,e)>e.width&&(n.length===1?(r[r.length-1]+=n,n=""):(r[r.length-1]+=n.slice(0,-1),n=n[n.length-1],r.push(""))));return r[r.length-1]+=n,r}var PG,DG=new Promise(e=>{PG=e}),gL=!1,Yb;function f3e(){if(gL)return;if(Yb)return Yb;async function e(){let t="https://unpkg.com/@splinetool/modelling-wasm@1.9.45/build",i=Ks(()=>import("./B9H0U9ag.js"),[],import.meta.url),[r,n]=await Promise.all([i,fetch(`${t}/process.wasm`).then(o=>o.arrayBuffer())]),a=r.default,s=await a({wasmBinary:n});PG(s),gL=!0}return Yb=e(),Yb}var p3e=["font"];function E1(e,t,i,r){var c,u;let n,a,s;e.type==="PathGeometry"?(a=JSON.parse(JSON.stringify(e)),s=[[],["extrusion"]]):(a={...e},s=[[]]);for(let d of s){let h=a;for(let f of d)h=h[f];for(n in h){let f=h[n];w7(f)&&!p3e.includes(n)&&(h[n]=t.getVariable(f,[r.uuid,"geometry",...d,n]),w7(h[n])&&(h[n]=1))}}let o={parameters:a,type:a.type};if(a.type==="PathGeometry")o.path=a.path;else if(a.type==="VectorGeometry"){let d=nn.createFromState(a.shape,a.width,a.height);o.shape=d}else if(a.type==="NonParametricGeometry"){if(a.data.groups&&((c=a.data.groups)==null||c.forEach(d=>d.materialIndex=Math.max(d.materialIndex??0,0))),o.geometry=new Tj().parse(a),o.geometry.groups.length===0){let d=o.geometry;d.addGroup(0,Math.max(((u=d.getIndex())==null?void 0:u.count)??0,d.getAttribute("position").count),0)}}else if(a.type==="SubdivGeometry"){let d=new as(a,i);return d.data=e,d}else{if(a.type==="TextGeometry")return new wM(a,t);if(a.type==="InputGeometry")return new wM(a,t);if(a.type==="UIGeometry")return YP.create({parameters:{width:a.width,height:a.height,cornerRadius:a.cornerRadius,cornerType:a.cornerType}})}let l;try{l=_L(o)}catch(d){console.error(d)}if(!l){let d=nn.createFromState(Cx.defaultData(),100,100);o.shape=d,l=_L(o)}return l}var m3e=new pt;function xM(e,t,i,r){let n=e.position.array,a=e.normal.array,s=m3e.makeScale(t,i,r).invert().elements,o,l,c;for(var u=0,d=n.length;u<d;u+=3)n[u]*=t,n[u+1]*=i,n[u+2]*=r,o=a[u],l=a[u+1],c=a[u+2],a[u]=s[0]*o+s[4]*l+s[8]*c,a[u+1]=s[1]*o+s[5]*l+s[9]*c,a[u+2]=s[2]*o+s[6]*l+s[10]*c;e.position.needsUpdate=!0,e.normal.needsUpdate=!0}var Kb=new gn,Vp=new H,ri;DG.then(e=>{ri=e});var yL=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),bL=new Uint32Array([0,1,2,3]),wL=new Uint8Array([4]),as=class extends Kt{constructor(e,t){super(),this.data=e,this.flatShading=t,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(e,t){this.freeSubdivPointer();let i=this.data.scaleBaked,r=Lf.div(t,i);this.subdividedGeometry&&xM(this.subdividedGeometry.attributes,...r),this.originalGeometry&&xM(this.originalGeometry.attributes,...r),this.data=e;let n=this.userData.parameters;this.userData.parameters={width:n.width*r[0],height:n.height*r[1],depth:n.depth*r[2]},this.originalGeometry.boundingSphere.center.multiply(Vp.fromArray(r));let a=Vp.set(n.width,n.height,n.depth).length();this.originalGeometry.boundingSphere.radius=a/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){let e,t,i;try{({originalGeometry:e,subdividedGeometry:t,subdivPointer:i}=as.build(this.data,void 0,!this.flatShading,void 0))}catch{e=new Cl(100,100,100),i=0}this.subdivPointer=i,this.originalGeometry=e,this.subdividedGeometry=t??void 0;let r=this.subdividedGeometry??this.originalGeometry;Object.assign(this,r),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(as.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Fs,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,i=e.boundingSphere.center;Kb.setFromBufferAttribute(t),Kb.getCenter(i),e.boundingSphere.radius=i.distanceTo(Kb.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Kb.getSize(Vp);let r={width:Vp.x,height:Vp.y,depth:Vp.z};return this.userData.parameters=r,r}static build(e,t,i,r){let n,a,s,o=(e==null?void 0:e.phongAngle)??35;i===!1&&(o=-1),t&&(ri.free_bvh(t),ri.free_subdivision_surface(t));try{n=as.allocate(e,r)}catch(l){console.error(l,e),n=as.allocate({positionWASM:yL,indexWASM:bL,verticesPerFaceWASM:wL},r)}if(ri.set_destination_refinement_level(n,0),a=as.buildLevel(n,!0,o),e.subdivisions>0)try{ri.set_destination_refinement_level(n,e.subdivisions),s=as.buildLevel(n,!1,o)}catch{try{ri.set_destination_refinement_level(n,e.subdivisions-1),s=as.buildLevel(n,!1,o)}catch{s=null}}else s=null;return{subdivPointer:n,originalGeometry:a,subdividedGeometry:s}}static primitiveToQuads(e,t,i){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),e.type==="DodecahedronGeometry"&&(e.detail=0);let r=e.shape!==void 0||e.path!==void 0?t.geometry:E1(e,i,!1),n;e.type==="TorusGeometry"&&e.arc===Math.PI*2?n=r.getClosedTorusIndicesForBooleanOrSubdiv():n=r.getIndex();let a,s,o,l;({positions:a,triIndices:l}=uS(r.getAttribute("position"),n));let c;if(e.type==="CylinderGeometry"&&e.cornerRadius===0&&e.hollow===0&&e.openEnded===!1){let u=e.radialSegments*e.heightSegments*3*2,d=u+e.radialSegments*3;c=[u,d]}return{indices:s,verticesPerFace:o}=IG(a,l,r,c),{positions:a,indices:s,verticesPerFace:o}}static allocate(e,t){var b;let i,r,n,a=[],s=[];e.positionWASM&&e.positionWASM.length>0?(i=e.positionWASM,r=e.indexWASM,n=e.verticesPerFaceWASM):(i=yL,r=bL,n=wL);let o=i.length,l=r.length,c=n.length,u=i.length+a.length+s.length,d=r.length+n.length,h=u*Float32Array.BYTES_PER_ELEMENT+d*Uint32Array.BYTES_PER_ELEMENT,f=u*Float32Array.BYTES_PER_ELEMENT,p=ri._malloc(h),m=new Float32Array(ri.HEAPF32.buffer,p,u),v=new Uint32Array(ri.HEAPU32.buffer,p+f,d);m.set(i,0),m.set(a,i.length),m.set(s,i.length+a.length),v.set(r,0),v.set(n,r.length);let y;(b=e==null?void 0:e.scaleBaked)!=null&&b.some(w=>w!==1)&&(y=new pt().makeScale(...e.scaleBaked)),t&&(y?y.premultiply(t):y=t);let x=y?ri.alloc_subdivision_surface2(p,o,p+f,l,p+f+r.length*Uint32Array.BYTES_PER_ELEMENT,c,y.elements):ri.alloc_subdivision_surface(p,o,p+f,l,p+f+r.length*Uint32Array.BYTES_PER_ELEMENT,c);return ri._free(p),x}static buildLevel(e,t,i,r,n){let a=n?ri.get_mesh_data2(e,t?ri.Level.CONTROL:ri.Level.REFINED,i,n.elements):ri.get_mesh_data(e,t?ri.Level.CONTROL:ri.Level.REFINED,i),s=8,o=ri.HEAPU32.subarray(a>>2,(a>>2)+s),l=o.subarray(4,8),c=0,u=ri.HEAPU32[o[c]>>2],d=ri.HEAPF32.subarray(u>>2,(u>>2)+l[c]);c++;let h=ri.HEAPU32[o[c]>>2],f=ri.HEAPF32.subarray(h>>2,(h>>2)+l[c]);c++;let p=ri.HEAPU32[o[c]>>2],m=ri.HEAPU32.subarray(p>>2,(p>>2)+l[c]);c++;let v=ri.HEAPU32[o[c]>>2],y=ri.HEAPU32.subarray(v>>2,(v>>2)+l[c]);if(c++,r===void 0){let x=new Kt;if(x.setIndex(new Bm(y,1)),x.setAttribute("position",new It(d,3)),x.setAttribute("normal",new It(f,3)),t){x.setAttribute("faceMap",new Bm(m,1));let b=new Float32Array(f.length/3*4).fill(0);x.setAttribute("color",new ui(b,4))}return ri.free_mesh_data(a),x.userData.type="SubdivGeometry",x}r.getAttribute("position").copyArray(d),r.getAttribute("normal").copyArray(f),r.attributes.position.needsUpdate=!0,r.attributes.normal.needsUpdate=!0,ri.free_mesh_data(a)}static freeSubdivPointer(e){ri.free_bvh(e),ri.free_subdivision_surface(e)}static buildControlCageWireframe(e,t,i){let r=ri.get_wireframe_data_for_base_level(e),n=4,a=ri.HEAPU32.subarray(r>>2,(r>>2)+n),s=a.subarray(2,4),o=0,l=ri.HEAPU32[a[o]>>2],c=ri.HEAPF32.subarray(l>>2,(l>>2)+s[o]);o++;let u=ri.HEAPU32[a[o]>>2],d=ri.HEAPU32.subarray(u>>2,(u>>2)+s[o]);if(t===void 0){let h=new Kt;h.setAttribute("position",new It(c,3));let f=new Float32Array(c.length);for(let p=0,m=c.length;p<m;)f[p++]=i.r,f[p++]=i.g,f[p++]=i.b;return h.setAttribute("color",new ui(f,3)),h.setIndex(new Bm(d,1)),ri.free_wireframe_data_for_base_level(r),h}t.getAttribute("position").copyArray(c),t.attributes.position.needsUpdate=!0,ri.free_wireframe_data_for_base_level(r)}static updateCollabMesh(e,t,i){let r=t===0;r||ri.set_destination_refinement_level(e,t);let n=i?ri.get_topological_data2(e,r?ri.Level.CONTROL:ri.Level.REFINED,i.elements):ri.get_topological_data(e,r?ri.Level.CONTROL:ri.Level.REFINED),a=6,s=ri.HEAPU32.subarray(n>>2,(n>>2)+a),o=s.subarray(3,6),l=0,c=ri.HEAPU32[s[l]>>2],u=new Float32Array(ri.HEAPF32.subarray(c>>2,(c>>2)+o[l]));l++;let d=ri.HEAPU32[s[l]>>2],h=new Uint32Array(ri.HEAPU32.subarray(d>>2,(d>>2)+o[l]));l++;let f=ri.HEAPU32[s[l]>>2],p=new Uint8Array(ri.HEAPU32.subarray(f>>2,(f>>2)+o[l]));return ri.free_topological_data(n),{positions:u,indices:h,verticesPerFace:p}}},xL=["getX","getY","getZ"];function uS(e,t){let i={},r=t?t.count:e.count,n=0,a=[],s=[],o=1e4;for(let c=0;c<r;c++){let u=t?t.getX(c):c,d="";for(let h=0;h<3;h++)d+=`${~~(e[xL[h]](u)*o)},`;if(d in i)a.push(i[d]);else{for(let h=0;h<3;h++)s.push(e[xL[h]](u));i[d]=n,a.push(n),n++}}let l=[];for(let c=0;c<a.length;c+=3)a[c]===a[c+1]||a[c]===a[c+2]||a[c+1]===a[c+2]||l.push(a[c],a[c+1],a[c+2]);return{positions:s,triIndices:l}}var Xb=new H,jC=new H,WC=new H,GC=new H;function IG(e,t,i,r){let n=[],a=[];if(i.userData.shape!==void 0&&i.userData.parameters.depth===0&&i.userData.shape.shapeHoles.length===0){let l=i.userData.shape.extractShapePointsToFlatArray([]),c=i.userData.parameters.spikes;if(i.userData.type==="EllipseGeometry"&&c<=24&&c%4===0&&i.userData.parameters.angle>=360){let h=l.length/2/c;l=l.filter((f,p)=>Math.floor(p/2)%h===0)}let u=0;for(let h=0;h<l.length;h+=2)u+=(l[h]-l[(h===0?l.length:h)-2])*(l[h+1]+l[(h===0?l.length:h)-1]);e.length=0;let d=0;if(u<0)for(let h=0;h<l.length;h+=2)e.push(l[h],l[h+1],0),n.push(d++);else for(let h=l.length-2;h>=0;h-=2)e.push(l[h],l[h+1],0),n.push(d++);return a.push(d),{indices:n,verticesPerFace:a}}let s=new Float32Array([i.userData.parameters.depth])[0],o=0;for(;o<t.length;){if(i.useNgonForTopBottomFaceDuringBake){let l=0;if((e[t[o]*3+2]===s||e[t[o]*3+2]===0)&&l++,(e[t[o+1]*3+2]===s||e[t[o+1]*3+2]===0)&&l++,(e[t[o+2]*3+2]===s||e[t[o+2]*3+2]===0)&&l++,l===3)break}if(t[o+1]===t[o+3]&&t[o+2]===t[o+5]||t[o+0]===t[o+3]&&t[o+2]===t[o+4]){Xb.set(e[t[o]*3],e[t[o]*3+1],e[t[o]*3+2]),jC.set(e[t[o+1]*3],e[t[o+1]*3+1],e[t[o+1]*3+2]),WC.set(e[t[o+4]*3],e[t[o+4]*3+1],e[t[o+4]*3+2]),GC.set(e[t[o+5]*3],e[t[o+5]*3+1],e[t[o+5]*3+2]),jC.sub(Xb).normalize(),WC.sub(Xb).normalize(),GC.sub(Xb).normalize();let l=jC.cross(WC).dot(GC);Math.abs(l)>.005||r&&r.some((c,u)=>u%2===1?!1:o>=r[u]&&o<r[u+1])?(n.push(t[o],t[o+1],t[o+2]),a.push(3),o+=3):(n.push(t[o],t[o+1],t[o+4],t[o+5]),a.push(4),o+=6)}else n.push(t[o],t[o+1],t[o+2]),a.push(3),o+=3}if(i.useNgonForTopBottomFaceDuringBake){let l=[],c=[],u=0;for(let d=0,h=0;d<e.length;d+=3,h++)e[d+2]===0&&(l.push(h),u++),e[d+2]===s&&c.push(h);if(i.userData.parameters.extrudeBevelSize===0){let d=c[0];c[0]=c[1],c[1]=d}l.reverse(),n.push(...l,...c),a.push(u,u)}return{indices:n,verticesPerFace:a}}var ru={};soe(ru,{calcBoolean:()=>w3e,calcBooleanTopological:()=>b3e,freeMeshSet:()=>C3e,getMeshSet:()=>x3e,hasOpenEdges:()=>_3e,transformMeshSet:()=>S3e});var OG,v3e=new Promise(e=>{OG=e}),Qb;function g3e(){if(Qb)return Qb;async function e(){let t="https://unpkg.com/@splinetool/boolean-wasm@1.9.45/build",i=Ks(()=>import("./BpCokwB2.js"),[],import.meta.url),[r,n]=await Promise.all([i,fetch(`${t}/boolean.wasm`).then(o=>o.arrayBuffer())]),a=r.default,s=await a({wasmBinary:n});OG(s)}return Qb=e(),Qb}var ki,jm;v3e.then(e=>ki=e);function y3e(e,t,i){let r,n;e.userData.parameters.type==="TorusGeometry"&&e.userData.parameters.arc===Math.PI*2?n=e.getClosedTorusIndicesForBooleanOrSubdiv():n=e.getIndex();let{positions:a,triIndices:s}=uS(e.getAttribute("position"),n),o;if(t&&i){let{indices:l,verticesPerFace:c}=IG(a,s,e);o=c.length,r=[];for(let u=0,d=0;u<o;u++){r.push(c[u]);for(let h=0;h<c[u];h++)r.push(l[d++])}}else{let l=s.length;r=Array(l+l/3),o=0;for(let c=0,u=0;u<r.length;)r[u++]=3,o++,r[u++]=s[c++],r[u++]=s[c++],r[u++]=s[c++]}return{positions:a,faceIndices:r,nFaces:o}}function RG(e){let t=e.length,i=t*Uint32Array.BYTES_PER_ELEMENT,r=t*Float32Array.BYTES_PER_ELEMENT,n=Number.isInteger(e[0])?i:r,a=ki._malloc(n);return(Number.isInteger(e[0])?new Uint32Array(ki.HEAPU32.buffer,a,t):new Float32Array(ki.HEAPF32.buffer,a,t)).set(e,0),a}function kG(e){switch(e){case 0:return ki.OP.UNION;case 1:return ki.OP.INTERSECTION;case 2:return ki.OP.A_MINUS_B;case 3:return ki.OP.B_MINUS_A;case 4:return ki.OP.SYMMETRIC_DIFFERENCE;case 5:return ki.OP.ALL;default:throw new Error("Unknown boolean operation "+e)}}function b3e(e,t){jm===void 0&&(jm=ki.init_csg());let i=RG(e),r=ki.csg_calc_topological(jm,i,e.length,kG(t));ki._free(i);let n=6,a=ki.HEAPU32.subarray(r>>2,(r>>2)+n),s=a.subarray(3,6),o=0,l=ki.HEAPU32[a[o]>>2],c=new Float32Array(ki.HEAPF32.subarray(l>>2,(l>>2)+s[o]));o++;let u=ki.HEAPU32[a[o]>>2],d=new Uint32Array(ki.HEAPU32.subarray(u>>2,(u>>2)+s[o]));o++;let h=ki.HEAPU32[a[o]>>2],f=new Uint8Array(ki.HEAPU32.subarray(h>>2,(h>>2)+s[o]));return ki.free_mesh_data(r),{positions:c,indices:d,verticesPerFace:f}}function w3e(e,t,i,r){jm===void 0&&(jm=ki.init_csg());let n=RG(e),a=ki.csg_calc(jm,n,e.length,r,kG(t));ki._free(n);let s=5,o=ki.HEAPU32.subarray(a>>2,(a>>2)+s),l=o.subarray(2,5),c=0,u=ki.HEAPU32[o[c]>>2],d=ki.HEAPF32.subarray(u>>2,(u>>2)+l[c]);c++;let h=ki.HEAPU32[o[c]>>2],f=ki.HEAPF32.subarray(h>>2,(h>>2)+l[c]);c++;let p=l[c];i.setAttribute("position",new It(d,3)),i.setAttribute("normal",new It(f,3));let m=ki.HEAPF32.subarray((a>>2)+5,(a>>2)+5+6);return i.boundingSphere===null&&(i.boundingSphere=new Fs),i.boundingSphere.center.set(m[0],m[1],m[2]),i.boundingSphere.radius=(m[3]**2+m[4]**2+m[5]**2)**.5,i.userData.parameters={width:m[3]*2,height:m[4]*2,depth:m[5]*2},ki.free_mesh_data(a),p}function x3e(e,t,i){if(ki===void 0)return-1;let r,n,a;if(t&&e.userData.positions!==void 0){let v=e.userData;a=v.verticesPerFace.length,r=v.positions,n=Array(v.verticesPerFace.reduce((y,x)=>y+x,0)+a);for(let y=0,x=0,b=0;y<v.verticesPerFace.length;y++){n[b++]=v.verticesPerFace[y];for(let w=0;w<v.verticesPerFace[y];w++)n[b++]=v.indices[x++]}}else({positions:r,faceIndices:n,nFaces:a}=y3e(e,t,i));let s=r.length,o=n.length,l=r.length,c=n.length,u=l*Float32Array.BYTES_PER_ELEMENT+c*Uint32Array.BYTES_PER_ELEMENT,d=l*Float32Array.BYTES_PER_ELEMENT,h=ki._malloc(u),f=new Float32Array(ki.HEAPF32.buffer,h,l),p=new Uint32Array(ki.HEAPU32.buffer,h+d,c);f.set(r,0),p.set(n,0);let m=ki.get_csg_mesh(h,s,h+d,o,a);return ki._free(h),m}function _3e(e){return ki.has_open_edges(e)}function S3e(e,t){ki.transform_csg_mesh(e,t.elements)}function C3e(e){ki.free_csg_mesh(e)}var E3e={ConeGeometry:M_e,CubeGeometry:T_e,CylinderGeometry:sG,DodecahedronGeometry:D_e,EllipseGeometry:qP,HelixGeometry:hSe,IcosahedronGeometry:fSe,LatheGeometry:pSe,NonParametricGeometry:xSe,PolygonGeometry:SG,PyramidGeometry:_Se,RectangleGeometry:YP,SphereGeometry:ESe,PlaneGeometry:ASe,BackdropGeometry:MSe,StarGeometry:CG,TextFrameGeometry:PSe,TorusGeometry:DSe,TorusKnotGeometry:OSe,TriangleGeometry:RSe,PathGeometry:o3e,VectorGeometry:cp},_L=e=>E3e[e.type].create(e);function Up(e){return e!==null&&"booleanOp"in e}var LG=class extends HP(Yr){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new pt}updateVisible(e){super.updateVisible(e),this.visible=!Up(this.parent)&&this.visible,Up(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(ru.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),Up(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)e instanceof LG&&(e.freeBooleanPointer(),Up(e)&&e.invalidateUpstreamBooleanData())}updateTransformState(e,t){let i=super.updateTransformState(e,t);return i&&Up(this.parent)&&this.invalidateDownstreamBooleanData(!0),i}onVariableUpdate(e=!1){super.onVariableUpdate(e),Up(this.parent)&&this.invalidateDownstreamBooleanData(!0)}},Jb=new gn;function KP(e,t=0,i=e.count,r,n){let a=1/0,s=1/0,o=1/0,l=-1/0,c=-1/0,u=-1/0;for(let d=t;d<i;d++){let h=e.getX(d),f=e.getY(d),p=e.getZ(d);h<a&&(a=h),f<s&&(s=f),p<o&&(o=p),h>l&&(l=h),f>c&&(c=f),p>u&&(u=p)}Jb.min.set(a,s,o),Jb.max.set(l,c,u),Jb.getCenter(r),Jb.getSize(n).multiplyScalar(.5)}var A3e=new Kt,M3e=new Tu,ms=class extends LG{constructor(e,t){super(A3e,M3e),this.super_Entity(e,t)}updateState(e,t){this.updateState_Entity(e,t)}updateEntityBoxSize(e,t){let i=this.geometry.getAttribute("position");i!==void 0?KP(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,t):super.updateEntityBoxSize(e,t)}},Md=class{constructor(e){if(this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},Md.uuidContext===null)throw new Error("plz startContext");Md.uuidContext===Md.globalContext?this.uuid="_gid"+Md.uuidContext.nodeContextUuid++:this.uuid="_uid"+Md.uuidContext.nodeContextUuid++,this.type=e,this.name=""}static startContext(e){this.uuidContext===null||this.uuidContext===Md.globalContext?this.uuidContext=e:console.error("Can't start context twice")}static endContext(e){this.uuidContext!==e&&console.error("Can't end context twice"),this.uuidContext=null}analyze(e,t){t=t??{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,i){return i=i??{},this.analyze(e,i),this.flow(e,t,i)}flow(e,t,i){i=i??{},e.addFlow(i.slot,i.cache,i.context);let r={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),r}build(e,t,i){t=t??this.getType(e,t);let r=e.getNodeData(i??this);return e.analyzing&&this.appendDepsNode(e,r,t),e.nodes.indexOf(this)===-1&&e.nodes.push(this),this.updateFrame!==void 0&&e.updaters.indexOf(this)===-1&&e.updaters.push(this),this.generate(e,t,i)}updateFrame(e){}generateReadonly(e,t,i,r,n,a){return""}generate(e,t,i,r,n){return""}parse(e,t,i,r){}appendDepsNode(e,t,i){t.deps=(t.deps||0)+1;let r=e.getTypeLength(i);(r>(t.outputMax||0)||this.getType(e,i))&&(t.outputMax=r,t.output=i)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return t==="sampler2D"||t==="samplerCube"?t:this.type}},Fn=Md;Fn.globalContext={nodeContextUuid:0},Fn.uuidContext=Md.globalContext;var SL=class{constructor(e){e=e??{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},T3e=class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,i){i=i!==void 0?i:!0,this.keywords[e]={callback:t,cache:i}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return this.nodes[e]!==void 0}containsKeyword(e){return this.keywords[e]!==void 0}},Ps=new T3e,wr=class extends Fn{constructor(t,i){super(t),this.scope="",i=i??{},this.shared=i.shared!==void 0?i.shared:!0,this.unique=i.unique!==void 0?i.unique:!1}build(t,i,r,n){if(i=i??this.getType(t),this.getShared(t,i)){let a=this.getUnique(t,i);a&&this.uuid===void 0&&(this.uuid=kt.generateUUID()),r=t.getUUID(r??this.getUUID(),!a);let s=t.getNodeData(r),o=s.output||this.getType(t);if(t.analyzing)return(s.deps||0)>0||this.getLabel()?(this.appendDepsNode(t,s,i),this.generate(t,i,r)):super.build(t,i,r);if(a)return s.name=s.name||super.build(t,i,r),s.name;if(!this.getLabel()&&(!this.getShared(t,o)||t.context.ignoreCache||s.deps===1))return super.build(t,i,r);r=this.getUUID(!1);let l=this.getTemp(t,r);if(l)return t.format(l,o,i);{l=super.generate(t,i,r,s.output,n);let c=this.generate(t,o,r);return t.addNodeCode(l+" = "+c+";"),t.format(l,o,i)}}return super.build(t,i,r)}getShared(t,i){return i!=="sampler2D"&&i!=="samplerCube"&&this.shared}getUnique(t,i){return this.unique}setLabel(t){return this.label=t,this}getLabel(){return this.label}getUUID(t){let i=this.uuid;return typeof this.scope=="string"&&(i=this.scope+"-"+i),i}getTemp(t,i){i=i||this.uuid;let r=t.getVars()[i];return r?r.name:void 0}generate(t,i,r,n,a){return this.getShared(t,i)||console.error("TempNode is not shared"),r=r??this.uuid,t.getTempVar(r,n??this.getType(t),a,this.getLabel()).name}},zs=class extends wr{constructor(e,t){t=t??{},t.shared=t.shared!==void 0?t.shared:!1,super(e,t),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,t,i,r,n,a){i=e.getUUID(i??this.getUUID()),r=r??this.getType(e);let s=e.getNodeData(i);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(e,t,i,r,n,a):e.isShader("vertex")?(s.vertex||(s.vertex=e.createVertexUniform(r,this,n,a,this.getLabel())),e.format(s.vertex.name,r,t)):(s.fragment||(s.fragment=e.createFragmentUniform(r,this,n,a,this.getLabel())),e.format(s.fragment.name,r,t))}},va=class extends zs{constructor(e=0,t){super("v2"),this.nodeType="Vector2",this.value=e instanceof Pe?e:new Pe(e,t)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,t,i,r,n,a){return e.format("vec2("+this.value.x+", "+this.value.y+")",r,t)}},po=class extends zs{constructor(e=0,t,i){super("v3"),this.nodeType="Vector3",this.value=e instanceof H?e:new H(e,t,i)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,t,i,r,n,a){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",r,t)}},Ea=class extends ii{constructor(e,t,i,r){super(e,t,i),this.isColorA=!0,this.a=r}setRGBA(e,t,i,r){super.setRGB(e,t,i),this.a=r}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}equals(e){return super.equals(e)&&this.a===e.a}setStyle(e,t="srgb"){let i;if(e==="transparent")return this.setRGBA(0,0,0,0),this;if(i=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(e)){let r,n=i[1],a=i[2];switch(n){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.a=n==="rgba"?parseFloat(r[4]):1,super.setStyle(e,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.a=n==="hsla"?parseFloat(r[4]):1,super.setStyle(e,t);break}}return super.setStyle(e,t)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}},nu=class extends zs{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof Ea?e:new Ea(e.r,e.g,e.b,e.a)}generateReadonly(e,t,i,r,n,a){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",r,t)}},P3e=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,CL=/[a-z_0-9]+/gi,Tt=class extends wr{constructor(t,i,r,n,a){super(a),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=a===void 0,this.isInterface=!1,this.parse(t,i,r,n)}getShared(t,i){return!this.isMethod}getType(t){return t.getTypeByFormat(this.type)}getInputByName(t){if(this.inputs){let i=this.inputs.length;for(;i--;)if(this.inputs[i].name===t)return this.inputs[i]}}getIncludeByName(t){if(this.includes){let i=this.includes.length;for(;i--;)if(this.includes[i].name===t)return this.includes[i]}}generate(t,i,r,n,a){let s,o=0,l=this.src;if(this.includes)for(let u=0;u<this.includes.length;u++)t.include(this.includes[u],this);for(let u in this.extensions)t.extensions[u]=!0;let c=[];for(;s=CL.exec(this.src);)c.push(s);for(let u=0;u<c.length;u++){let d=c[u],h=d[0],f=this.isMethod?!this.getInputByName(h):!0,p=h;if(this.keywords[h]||this.useKeywords&&f&&Ps.containsKeyword(h)){let m=this.keywords[h];if(!m){let v=Ps.getKeywordData(h);v.cache&&(m=t.keywords[h]),m=m||Ps.getKeyword(h,t),v.cache&&(t.keywords[h]=m)}p=m.build(t)}h!==p&&l[d.index+o-1]!=="."&&(l=l.substring(0,d.index+o)+p+l.substring(d.index+h.length+o),o+=p.length-h.length),this.getIncludeByName(p)===void 0&&Ps.contains(p)&&t.include(Ps.get(p))}return i==="source"?l:this.isMethod?(this.isInterface||t.include(this,void 0,l),this.name):t.format("( "+l+" )",this.getType(t),i)}parse(t,i,r,n){if(this.src=t||"",this.includes=i??[],this.extensions=r??{},this.keywords=n??{},this.isMethod){let a=P3e.exec(this.src);if(this.inputs=[],a&&a.length==4){this.type=a[1],this.name=a[2];let s=a[3].match(CL);if(s){let o=0;for(;o<s.length;){let l=s[o++],c;l==="in"||l==="out"||l==="inout"?c=s[o++]:(c=l,l="");let u=s[o++];this.inputs.push({name:u,type:c,qualifier:l})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},D3e=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,BG=class extends wr{constructor(e="",t){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||BG.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,i,r,n){this.src=e||"";let a,s,o="",l=D3e.exec(e);this.useDefine=n??this.src.charAt(0)==="#",l&&l.length>1?(s=l[1],a=l[2],o=l[3]):(a=this.src,s="f"),this.name=a,this.type=s,this.value=o}build(e,t){if(t==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,i,r,n){return e.format(this.name,this.getType(e),t)}},mr=BG;mr.PI="PI",mr.PI2="PI2",mr.RECIPROCAL_PI="RECIPROCAL_PI",mr.RECIPROCAL_PI2="RECIPROCAL_PI2",mr.LOG2="LOG2",mr.EPSILON="EPSILON";var I3e=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),O3e=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),NG=class extends wr{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,i,r,n){return t==="source"?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(e=""){this.src=e,this.inputs=[];let t=I3e.exec(e);if(t){let i=t[2],r;for(;r=O3e.exec(i);)this.inputs.push({type:r[1],name:r[2]});this.name=t[1]}else this.name="";this.type=this.name}},XP=class extends wr{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e??0}generate(e,t){e.requires.uv[this.index]=!0;let i=this.index>0?this.index+1:"",r=e.isShader("vertex")?"uv"+i:"vUv"+i;return e.format(r,this.getType(e),t)}};Ps.addKeyword("uv",function(){return new XP});Ps.addKeyword("uv2",function(){return new XP(1)});var cm=class extends wr{constructor(e,t){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=t??cm.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case Sl:return["Linear"];case Ei:return["sRGB"];default:return[]}}generate(e,t){var s;let i=this.input.build(e,"v4"),r=this.getType(e),n=cm.Nodes[this.method],a=e.include(n);if(a===cm.LINEAR_TO_LINEAR)return e.format(i,r,t);if(((s=n.inputs)==null?void 0:s.length)===2){let o=this.factor.build(e,"f");return e.format(a+"( "+i+", "+o+" )",r,t)}else return e.format(a+"( "+i+" )",r,t)}fromEncoding(e){let t=cm.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=cm.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}},lc=cm;lc.Nodes={LinearToLinear:new Tt(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new Tt(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new Tt(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},lc.LINEAR_TO_LINEAR="LinearToLinear",lc.SRGB_TO_LINEAR="sRGBToLinear",lc.LINEAR_TO_SRGB="LinearTosRGB";var Lr=class extends Tt{constructor(t="",i,r,n,a){super(t,a,n,r,i),this.nodeType="Expression"}},fu=class extends zs{constructor(e=new Kr,t,i,r){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=t??new XP,this.bias=i,this.project=r!==void 0?r:!1}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){if(t==="sampler2D")return this.getTexture(e,t);let i=this.getTexture(e,t),r=this.uv.build(e,this.project?"v4":"v2"),n=this.bias?this.bias.build(e,"f"):void 0;n===void 0&&e.context.bias&&(n=e.context.bias.setTexture(this).build(e,"f"));let a,s;this.project?a="texture2DProj":a=n?"tex2DBias":"tex2D",n?s=a+"( "+i+", "+r+", "+n+" )":s=a+"( "+i+", "+r+" )";let o={include:e.isShader("vertex"),ignoreCache:!0},l=this.getType(e);return e.addContext(o),this.colorSpace=this.colorSpace??new lc(new Lr("",l)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(s),s=this.colorSpace.build(e,l),e.removeContext(),e.format(s,l,t)}},Bt=class extends zs{constructor(e){super("f"),this.nodeType="Float",this.value=e??0}generateReadonly(e,t,i,r,n,a){return e.format(this.value+(this.value%1?"":".0"),r,t)}},EL=class extends wr{constructor(e,t){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=t??[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,i,r,n){r=this.getType(e);let a=this.value,s=a.build(e,t)+"( ",o=[];if(a.inputs){for(let l=0;l<a.inputs.length;l++){let c=a.inputs[l],u=this.inputs[l]||this.inputs[c.name];o.push(u.build(e,e.getTypeByFormat(c.type)))}s+=o.join(", ")+" )"}return e.format(s,r,t)}},FG=class extends wr{constructor(e,t,i=FG.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=i}getType(e){let t=this.a.getType(e),i=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(i)>e.getTypeLength(t)?i:t}generate(e,t){let i=this.getType(e);this.type=i;let r=this.a.build(e,i),n=this.b.build(e,i);return e.format("( "+r+" "+this.op+" "+n+" )",i,t)}},Es=FG;Es.ADD="+",Es.SUB="-",Es.MUL="*",Es.DIV="/";var pr=class extends wr{constructor(e,t=pr.ABS,i,r){super(),this.nodeType="Math",this.a=e,typeof t!="string"?this.b=t:r=t,typeof i!="string"?this.c=i:r=i,this.method=r,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case pr.MIX:case pr.CLAMP:case pr.REFRACT:case pr.SMOOTHSTEP:case pr.FACEFORWARD:return 3;case pr.MIN:case pr.MAX:case pr.MOD:case pr.STEP:case pr.REFLECT:case pr.DISTANCE:case pr.DOT:case pr.CROSS:case pr.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),i=this.b?e.getTypeLength(this.b.getType(e)):0,r=this.c?e.getTypeLength(this.c.getType(e)):0;return t>i&&t>r?this.a.getType(e):i>r?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case pr.LENGTH:case pr.DISTANCE:case pr.DOT:return"f";case pr.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let i,r,n,a=this.a?e.getTypeLength(this.a.getType(e)):0,s=this.b?e.getTypeLength(this.b.getType(e)):0,o=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),c=this.getType(e);switch(this.type=c,this.method){case pr.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case pr.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case pr.CROSS:i=this.a.build(e,"v3"),r=this.b.build(e,"v3");break;case pr.STEP:i=this.a.build(e,a===1?"f":l),r=this.b.build(e,l);break;case pr.MIN:case pr.MAX:case pr.MOD:i=this.a.build(e,l),r=this.b.build(e,s===1?"f":l);break;case pr.REFRACT:i=this.a.build(e,l),r=this.b.build(e,l),n=this.c.build(e,"f");break;case pr.MIX:i=this.a.build(e,l),r=this.b.build(e,l),n=this.c.build(e,o===1?"f":l);break;default:i=this.a.build(e,l),this.b&&(r=this.b.build(e,l)),this.c&&(n=this.c.build(e,l));break}let u=[];u.push(i),r&&u.push(r),n&&u.push(n);let d=this.getNumInputs(e);if(u.length!==d)throw Error(`Arguments not match used in "${this.method}". Require ${d}, currently ${u.length}.`);return e.format(this.method+"( "+u.join(", ")+" )",c,t)}},xi=pr;xi.RAD="radians",xi.DEG="degrees",xi.EXP="exp",xi.EXP2="exp2",xi.LOG="log",xi.LOG2="log2",xi.SQRT="sqrt",xi.INV_SQRT="inversesqrt",xi.FLOOR="floor",xi.CEIL="ceil",xi.NORMALIZE="normalize",xi.FRACT="fract",xi.SATURATE="saturate",xi.SIN="sin",xi.COS="cos",xi.TAN="tan",xi.ASIN="asin",xi.ACOS="acos",xi.ARCTAN="atan",xi.ABS="abs",xi.SIGN="sign",xi.LENGTH="length",xi.NEGATE="negate",xi.INVERT="invert",xi.MIN="min",xi.MAX="max",xi.MOD="mod",xi.STEP="step",xi.REFLECT="reflect",xi.DISTANCE="distance",xi.DOT="dot",xi.CROSS="cross",xi.POW="pow",xi.MIX="mix",xi.CLAMP="clamp",xi.REFRACT="refract",xi.SMOOTHSTEP="smoothstep",xi.FACEFORWARD="faceforward";var ug=class extends wr{constructor(e,t,i){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=i}bilinearCubeUV(e,t,i,r){let n=new EL(ug.Nodes.bilinearCubeUV,[t,i,r]);this.colorSpaceTL=this.colorSpaceTL??new lc(new Lr("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(n.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new lc(new Lr("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(n.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new lc(new Lr("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(n.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new lc(new Lr("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(n.build(e)+".br");let a={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(a),this.colorSpaceTLExp=new Lr(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new Lr(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new Lr(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new Lr(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let s=new Lr("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return s.keywords.cubeUV_TL=this.colorSpaceTLExp,s.keywords.cubeUV_TR=this.colorSpaceTRExp,s.keywords.cubeUV_BL=this.colorSpaceBLExp,s.keywords.cubeUV_BR=this.colorSpaceBRExp,s.keywords.cubeUV=n,s}generate(e,t){if(e.isShader("fragment")){let i=this.uv,r=this.bias||e.context.roughness,n=new EL(ug.Nodes.roughnessToMip,[r]),a=new xi(n,ug.Nodes.m0,ug.Nodes.cubeUV_maxMipLevel,xi.CLAMP),s=new xi(a,xi.FLOOR),o=new xi(a,xi.FRACT),l=this.bilinearCubeUV(e,this.value,i,s),c=this.bilinearCubeUV(e,this.value,i,new Es(s,new Bt(1).setReadonly(!0),Es.ADD)),u=new xi(l,c,o,xi.MIX);return e.format(u.build(e),"v4",t)}else return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}},_M=ug;_M.Nodes=function(){let e=new NG(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),t=new mr("float cubeUV_maxMipLevel 8.0",!0),i=new mr("float cubeUV_minMipLevel 4.0",!0),r=new mr("float cubeUV_maxTileSize 256.0",!0),n=new mr("float cubeUV_minTileSize 16.0",!0),a=new Tt(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);a.useKeywords=!1;let s=new Tt(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);s.useKeywords=!1;let o=new Tt(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[e,a,s,t,i,r,n]);o.useKeywords=!1;let l=new mr("float r0 1.0",!0),c=new mr("float v0 0.339",!0),u=new mr("float m0 -2.0",!0),d=new mr("float r1 0.8",!0),h=new mr("float v1 0.276",!0),f=new mr("float m1 -1.0",!0),p=new mr("float r4 0.4",!0),m=new mr("float v4 0.046",!0),v=new mr("float m4 2.0",!0),y=new mr("float r5 0.305",!0),x=new mr("float v5 0.016",!0),b=new mr("float m5 3.0",!0),w=new mr("float r6 0.21",!0),S=new mr("float v6 0.0038",!0),_=new mr("float m6 4.0",!0),E=[l,c,u,d,h,f,p,m,v,y,x,b,w,S,_],C=new Tt(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,E);return{bilinearCubeUV:o,roughnessToMip:C,m0:u,cubeUV_maxMipLevel:t}}();var um=class extends wr{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e??um.VIEW}getShared(){return this.scope===um.WORLD}build(e,t,i,r){let n=e.context[this.scope+"Normal"];return n?n.build(e,t,i,r):super.build(e,t,i)}generate(e,t,i,r,n){let a;switch(this.scope){case um.VIEW:e.isShader("vertex")?a="transformedNormal":a="geometryNormal";break;case um.LOCAL:e.isShader("vertex")?a="objectNormal":(e.requires.normal=!0,a="vObjectNormal");break;case um.WORLD:e.isShader("vertex")?a="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,a="vWNormal");break}return e.format(a,this.getType(e),t)}},Is=um;Is.LOCAL="local",Is.WORLD="world",Is.VIEW="view",Is.NORMAL="normal";Ps.addKeyword("viewNormal",function(){return new Is(Is.VIEW)});Ps.addKeyword("localNormal",function(){return new Is(Is.NORMAL)});Ps.addKeyword("worldNormal",function(){return new Is(Is.WORLD)});var eu=class extends wr{constructor(e){super("v3"),this.nodeType="Position",this.scope=e??eu.LOCAL}getType(){switch(this.scope){case eu.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case eu.LOCAL:case eu.WORLD:return!1}return!0}generate(e,t,i,r,n){let a;switch(this.scope){case eu.LOCAL:e.isShader("vertex")?a="transformed":(e.requires.position=!0,a="vPosition");break;case eu.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,a="vWPosition";break;case eu.VIEW:a=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case eu.PROJECTION:a=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return e.format(a,this.getType(),t)}},dl=eu;dl.LOCAL="local",dl.WORLD="world",dl.VIEW="view",dl.PROJECTION="projection";Ps.addKeyword("position",function(){return new dl});Ps.addKeyword("worldPosition",function(){return new dl(dl.WORLD)});Ps.addKeyword("viewPosition",function(){return new dl(dl.VIEW)});var Kl=class extends wr{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e??Kl.CUBE}getUnique(e){return!e.context.viewNormal}getType(){switch(this.scope){case Kl.SPHERE:return"v2"}return this.type}generate(e,t){let i=this.getUnique(e);if(e.isShader("fragment")){let r;switch(this.scope){case Kl.VECTOR:{let n=new Is(Is.VIEW),a=e.context.roughness,s=n.build(e,"v3"),o=new dl(dl.VIEW).build(e,"v3"),l=a?a.build(e,"f"):void 0,c=`reflect( -normalize( ${o} ), ${s} )`;l&&(c=`normalize( mix( ${c}, ${s}, ${l} * ${l} ) )`);let u=`inverseTransformDirection( ${c}, viewMatrix )`;i?(e.addNodeCode(`vec3 reflectVec = ${u};`),r="reflectVec"):r=u;break}case Kl.CUBE:{let n=new Kl(Kl.VECTOR).build(e,"v3"),a="vec3( -"+n+".x, "+n+".yz )";i?(e.addNodeCode(`vec3 reflectCubeVec = ${a};`),r="reflectCubeVec"):r=a;break}case Kl.SPHERE:{let n="normalize( ( viewMatrix * vec4( "+new Kl(Kl.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";i?(e.addNodeCode(`vec2 reflectSphereVec = ${n};`),r="reflectSphereVec"):r=n;break}}return e.format(r,this.getType(),t)}else return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}},Wm=Kl;Wm.CUBE="cube",Wm.SPHERE="sphere",Wm.VECTOR="vector";var R3e=class extends wr{constructor(e=new fu,t,i){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new _M(this.value,t??new Wm(Wm.VECTOR),i),this.irradianceNode=new _M(this.value,new Is(Is.WORLD),new Bt(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),(e.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}},k3e=class extends zs{constructor(e=new tP,t,i){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=t??new Wm,this.bias=i}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){var l;if(t==="samplerCube")return this.getTexture(e,t);let i=this.getTexture(e,t),r=(l=this.uv)==null?void 0:l.build(e,"v3"),n=this.bias?this.bias.build(e,"f"):void 0;n===void 0&&e.context.bias&&(n=e.context.bias.setTexture(this).build(e,"f"));let a;n?a="texCubeBias( "+i+", "+r+", "+n+" )":a="texCube( "+i+", "+r+" )";let s={include:e.isShader("vertex"),ignoreCache:!0},o=this.getType(e);return e.addContext(s),this.colorSpace=this.colorSpace??new lc(new Lr("",o)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(a),a=this.colorSpace.build(e,o),e.removeContext(),e.format(a,o,t)}},L3e=`
uniform int frameIndex;
uniform vec2 resolution;
uniform mat4 previousModelViewMatrix;
uniform mat4 previousProjectionMatrix;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;
`,B3e=`
layout(location = 1) out vec4 gVelocity;

uniform int frameIndex;
uniform vec2 resolution;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;

const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}

// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso
float getNoiseInterleavedGradient(vec2 screenPos) {
    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);
    return fract(magic.z * fract(dot(screenPos, magic.xy)));
}

`,N3e=`
// TODO: This could be generated CPU side and passed to the shader every frame
const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

// TODO: Pass correct view size
vec2 offset = haltonSequence[frameIndex];
offset.x /= resolution.x;
offset.y /= resolution.y;

vec4 currentPosition = gl_Position;
vec4 currentPositionJittered = currentPosition + (vec4(offset.x, offset.y, 0.0, 0.0) * currentPosition.w);

// We want to calculate the velocity with unjittered positions
// so that things that are not moving get a velocity = 0
vCurrentPosition = currentPosition;
vPreviousPosition = previousProjectionMatrix * previousModelViewMatrix * vec4(transformed, 1.0);
#ifdef OUTLINE_COMPENSATION
vPreviousPosition.xy += OUTLINE_COMPENSATION;
#endif
gl_Position = currentPositionJittered;

`,F3e=`
vec2 oldPos = vPreviousPosition.xy;
    oldPos /= vPreviousPosition.w;
    oldPos.xy = (oldPos.xy+1.)/2.0;

vec2 newPos = vCurrentPosition.xy;
    newPos /= vCurrentPosition.w;
    newPos.xy = (newPos.xy+1.)/2.0;

vec2 velocity = (newPos - oldPos);

// Discard fully transparent pixels 
if (gl_FragColor.a <= 0.0) discard;

gVelocity = vec4(velocity, 0.0, 1.0);
`,z3e=`
layout(location = 1) out vec4 gVelocity;
`,V3e=`
    // Discard fully transparent pixels 
    if (gl_FragColor.a <= 0.0) discard;

    gVelocity = vec4(0.0, 0.0, 0.0, 1.0);
`,AL=["x","y","z","w"],U3e=["float","vec2","vec3","vec4"],H3e={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},j3e={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},zG=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.needsJitter=!0,this.getIncludesCode=function(){function e(t,i){return t.deps.length-i.deps.length}return function(t,i){let r=this.getIncludes(t,i);if(!r)return"";let n="";r=r.sort(e);for(let a=0;a<r.length;a++)r[a].src&&(n+=r[a].src+`
`);return n}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.addVertexParsCode(L3e),this.addFragmentParsCode(B3e),this.buildShader("vertex",e),this.buildShader("fragment",t);for(let i=0;i<this.requires.uv.length;i++)if(this.requires.uv[i]){let r=i>0?i+1:"";this.addVaryCode("varying vec2 vUv"+r+";"),i>0&&this.addVertexParsCode("attribute vec2 uv"+r+";"),this.addVertexFinalCode("vUv"+r+" = uv"+r+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this.needsJitter&&(this.addVertexFinalCode(N3e),this.addFragmentFinalCode(F3e)),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.defines={},this}addFlow(e,t,i){return this.addSlot(e).addCache(t).addContext(i)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){this.fragmentVariables[e]===void 0&&(this.addFragmentCode(`${t} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,t){this.fragmentParsVariables[e]===void 0&&(this.addFragmentParsCode(`${t} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,t){this.vertexParsVariables[e]===void 0&&(this.addVertexParsCode(`${t} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[t??this.shader]+=e+`
`}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[t??this.shader]+=e+`
`}clearNodeCode(e){e=e??this.shader;let t=this.nodeCode[e];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[t??this.shader]+=e+`
`}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[t??this.shader]+=e+`
`}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return this.caches.indexOf(e)!==-1}isSlot(e){return this.slots.indexOf(e)!==-1}define(e,t){this.defines[e]=t===void 0?1:t}require(e){this.requires[e]=!0}isDefined(e){return this.defines[e]!==void 0}getVar(e,t,i,r="varying",n="V",a=""){let s=this.getVars(r),o=s[e];if(!o){let l=s.length;o={name:i||"node"+n+l+(a?"_"+a:""),type:t},s.push(o),s[e]=o}return o}getTempVar(e,t,i,r){return this.getVar(e,t,i,this.shader,"T",r)}getAttribute(e,t){if(!this.attributes[e]){let i=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(i.name+" = "+e+";"),this.attributes[e]={varying:i,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join(`
`)}getVarListCode(e,t){t=t??"";let i="";for(let r=0,n=e.length;r<n;++r){let a=e[r],s=a.type,o=a.name,l=a.size,c=this.getFormatByType(s);if(c===void 0)throw new Error("Node pars "+c+" not found.");c.includes("[]")?i+=t+" "+c.substring(0,c.length-2)+" "+o+`[${l}];
`:i+=t+" "+c+" "+o+`;
`}return i}getVars(e){return this.inputs.vars[e??this.shader]}getNodeData(e){let t=e instanceof Fn?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,i,r,n,a){if(t.includes("[]")){let s=this.inputs.arrayUniforms,o=s.list.length,l=new SL({type:t,size:i.size,name:r||"nodeUA"+o+(a?"_"+a:""),node:i,needsUpdate:n});return s.list.push(l),s[e].push(l),s[e][l.name]=l,this.uniforms[l.name]=l,l}else{let s=this.inputs.uniforms,o=s.list.length,l=new SL({type:t,name:r||"nodeU"+o+(a?"_"+a:""),node:i,needsUpdate:n});return s.list.push(l),s[e].push(l),s[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,i,r,n){return this.createUniform("vertex",e,t,i,r,n)}createFragmentUniform(e,t,i,r,n){return this.createUniform("fragment",e,t,i,r,n)}include(e,t,i){var a;let r;if(e=typeof e=="string"?Ps.get(e):e,this.context.include===!1)return e.name;e instanceof Tt?r=this.includes.functions:e instanceof mr?r=this.includes.consts:e instanceof NG&&(r=this.includes.structs);let n=r[this.shader]=r[this.shader]||[];if(e){let s=n[e.name];if(s||(s=n[e.name]={node:e,deps:[]},n.push(s),s.src=e.build(this,"source")),e instanceof Tt&&t&&n[t.name]&&n[t.name].deps.indexOf(e)===-1&&(n[t.name].deps.push(e),(a=e.includes)==null?void 0:a.length)){let o=0;do this.include(e.includes[o++],t);while(o<e.includes.length)}return i&&(s.src=i),e.name}else throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return U3e[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return e==="f"?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return e===1?"f":"v"+e}findNode(...e){for(let t=0;t<arguments.length;t++){let i=e[t];if(i!=null&&i.isNode)return i}}resolve(...e){for(let t=0;t<arguments.length;t++){let i=e[t];if(i!==void 0){if(i.isNode)return i;if(i.isTexture)switch(i.mapping){case Vf:case Uf:return new k3e(i);case ty:return new R3e(new fu(i));default:return new fu(i)}else{if(i.isVector2)return new va(i);if(i.isVector3)return new po(i);if(i.isVector4)return new nu(i)}}}}format(e,t,i){switch(this.colorToVector(i+" <- "+t)){case"f <- v2":return e+".x";case"f <- v3":return e+".x";case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":return e+".xy";case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":return"int( "+e+".x )";case"i <- v3":return"int( "+e+".x )";case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return H3e[e]||e}getFormatByType(e){return j3e[e]||e}getUUID(e,t){return t=t!==void 0?t:!0,t&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return AL[e]}getIndexByElement(e){return AL.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=Sl,t===Sl&&this.context.gamma&&(t=Ei),t}},an=class extends zs{constructor(e=0,t,i,r){super("c"),this.nodeType="Color",this.value=e instanceof Ea?e:new Ea(e||0,t,i,r)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,i,r,n,a){i=e.getUUID(i??this.getUUID()),r=r??this.getType(e);let s=e.getNodeData(i),o=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let l=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return o?this.generateReadonly(e,t,i,r,n,a):e.isShader("vertex")?(s.vertex||(s.vertex=e.createVertexUniform(r,this,n,a,this.getLabel())),e.format(s.vertex.name,r,t)):(s.fragment||(s.fragment=e.createFragmentUniform(r,this,n,a,this.getLabel())),e.format(s.fragment.name,r,t))}generateReadonly(e,t,i,r,n,a){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",r,t)}},_r=class extends zs{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(e??0)}generateReadonly(e,t,i,r,n,a){return e.format(this.value.toString(),r,t)}},os=class extends zs{constructor(e){super("b"),this.nodeType="Bool",this.value=e??!1}generateReadonly(e,t,i,r){return e.format(this.value?"true":"false",r,t)}},ef=class extends zs{constructor(e=1,t){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:typeof t=="number"?new Array(e).fill(t):new Array(e).fill(0)}},QP=class extends zs{},W3e=class extends QP{constructor(e){super("v3"),this.image=e,this._value=new H}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},SM=class extends QP{constructor(e,t,i=1008,r=1006){super("t"),this.image=e,this.wrap=t,this.minFilter=i,this.magFilter=r}get value(){return this.image.getTexture(this.wrap,this.minFilter,this.magFilter)}},VG=class extends zs{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e??new An}generateReadonly(e,t,i,r,n,a){return e.format("mat3("+this.value.elements.join(", ")+")",r,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},wc=class extends zs{constructor(e){super("m4"),this.nodeType="Matrix4",this.value=e??new pt}generateReadonly(e,t,i,r,n,a){return e.format("mat4("+this.value.elements.join(", ")+")",r,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}};function ML(e,t,i,r=0){e.setUvTransform(i[0],i[1],t[0],t[1],0,0,0).premultiply(new An().makeRotation(r*kt.DEG2RAD))}var G3e=class extends VG{constructor(e,t,i=0){super(new An),this.repeat=e,this.offset=t,this.rotation=i,ML(this.value,e,t,i)}updateMatrix(){ML(this.value,this.repeat,this.offset,this.rotation)}},tf=class extends zs{constructor(e=1,t){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof vi?new Array(e).fill(t):new Array(e).fill(new vi(0))}},TL=class extends wr{constructor(e,t,i,r){super("v3"),this.nodeType="Blend",this.a=e,this.b=t,this.alpha=i,this.mode=r}generate(e,t){if(e.isShader("fragment")){let i=[];return i.push(this.a.build(e,"c")),i.push(this.b.build(e,"c")),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),e.format("spe_blend("+i.join(",")+")",this.getType(e),t)}else return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},UG=class extends wr{constructor(e,t){super("v3"),this.nodeType="CustomColor",this.color=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let i=e.include(UG.Nodes.customColor);e.addFragmentVariable(this.calpha,"float");let r=[];return r.push(this.color.build(e,"v3")),r.push(this.mask?`luminance(${this.mask.build(e,"v3")})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("CustomColorNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},CM=UG;CM.Nodes=function(){return{customColor:new Tt(`vec3 customColor(vec3 color, float mask, float alpha, out float calpha) {
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color;
			}`)}}();var HG=class extends wr{constructor(e,t){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let i=e.include(HG.Nodes.customNormal);e.addFragmentVariable(this.calpha,"float");let r=[];return r.push(this.cnormal.build(e,"v3")),r.push("normal"),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},jG=HG;jG.Nodes=function(){return{customNormal:new Tt(`vec3 customNormal(vec3 cnormal, vec3 norm, float mask, float alpha, out float calpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return normal;
			}`)}}();var dg=class extends wr{constructor(e,t,i,r,n,a,s,o,l,c,u,d){super("v3"),this.nodeType="CustomTexture",this.texture=e,this.textureSize=t,this.crop=i,this.projection=r,this.axis=n,this.side=a,this.size=s,this.blending=o,this.mat=l,this.isMask=d,this.alpha=c,this.mode=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let i=`g${this.uuid.toString().replace(/-/g,"")}`,r;switch(this.projection.value){case 3:r=e.include(dg.Nodes.cylindrical);break;case 2:r=e.include(dg.Nodes.spherical);break;case 1:let a=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],s=["zy","xz","xy"][this.axis.value],o=new Tt(`
		vec3 ${i}_planarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 projected = (1. + (position.${s})) / 2.;
				vec2 uvs = ( mat * vec3( (projected * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, ${a}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`);r=e.include(o);break;case 4:r=e.include(dg.Nodes.triplanar);break;default:r=e.include(dg.Nodes.uv);break}e.addFragmentVariable(this.calpha,"float");let n=[];if(n.push("normal"),n.push(this.texture.generate(e,"t")),n.push(this.textureSize.build(e,"v2")),n.push(this.crop.build(e,"f")),n.push(this.mat.build(e,"mat3")),n.push(this.size.build(e,"v2")),n.push(this.blending.build(e,"f")),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),this.projection.value===4){let a=`${i}_writeUvs`,s=a+"0",o=a+"1",l=a+"2",c=`${i}_triplanarWeights`;e.addFragmentVariable(s,"vec2"),e.addFragmentVariable(o,"vec2"),e.addFragmentVariable(l,"vec2"),e.addFragmentVariable(c,"vec3"),n.push(s),n.push(o),n.push(l),n.push(c)}else{let a=`${i}_writeUvs`;e.addFragmentVariable(a,"vec2"),n.push(a)}return e.format(r+"("+n.join(",")+")",this.getType(e),t)}},JP=dg;JP.Nodes=function(){let e=new Tt(`
vec3 cylindricalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),t=new Tt(`
vec3 sphericalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),i=new Tt(`vec3 uvTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`),r=new Tt(`vec3 triplanarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUvs0, out vec2 writeUvs1, out vec2 writeUvs2, out vec3 writeWeights) {
				vec3 p = position;
				vec2 uv0 = (1.0 + p.xy) / 2.0;     
				vec2 uv1 = (1.0 + p.zy) / 2.0;		
				vec2 uv2 = (1.0 + p.xz) / 2.0;		
	
				uv0 = (mat * vec3((uv0 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv1 = (mat * vec3((uv1 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv2 = (mat * vec3((uv2 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;

				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));

				// Write out all sets of UVs that we generated
				writeUvs0 = uv0;
				writeUvs1 = uv1;
				writeUvs2 = uv2;
				writeWeights = weights;

				// Derivatives for LOD
				vec2 df0 = fwidth(uv0);
				vec2 df1 = fwidth(uv1);
				vec2 df2 = fwidth(uv2);
				if (df0.x > 0.5) df0.x = 0.0;
				if (df1.x > 0.5) df1.x = 0.0;
				if (df2.x > 0.5) df2.x = 0.0;

				#ifdef GL_EXT_shader_texture_lod
                	vec4 tmp = 
						texture2DLodEXT(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						texture2DLodEXT(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						texture2DLodEXT(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#else
                	vec4 tmp = 
						textureLod(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						textureLod(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						textureLod(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;

				// Apply cropping across all 3 planes
				if ( crop > 0.5 ) {
					if ( uv0.x < 0.0 || uv0.x > 1.0 || uv0.y < 0.0 || uv0.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv1.x < 0.0 || uv1.x > 1.0 || uv1.y < 0.0 || uv1.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv2.x < 0.0 || uv2.x > 1.0 || uv2.y < 0.0 || uv2.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;//n * 0.5 + 0.5;
			}			
			`);return{cylindrical:e,spherical:t,uv:i,triplanar:r}}();var hg=class extends wr{constructor(e,t,i,r,n,a,s,o,l,c,u,d){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=i,this.far=r,this.isVector=n,this.isWorldSpace=a,this.origin=s,this.direction=o,this.colors=l,this.steps=c,this.isMask=d,this.alpha=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let i=`g${this.uuid.toString().replace(/-/g,"")}`,r=new Tt(`vec3 ${i}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${i}_MAX_COLORS], float steps[${i}_MAX_COLORS], bool isMask, float mask, float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${i}_IS_VECTOR
                   #ifdef ${i}_LINEAR
                       #ifdef ${i}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${i}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${i}_SMOOTH
				for ( int i = 1; i < ${i}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${i}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a * mask;
               calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
			   accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
			   
               return color.rgb;
			}`,[hg.Nodes.vectorLinearWorldSpaceDepth,hg.Nodes.vectorLinearObjectSpaceDepth,hg.Nodes.vectorSphericalObjectSpaceDepth,hg.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${i}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${i}_SMOOTH`),this.isVector.value>.5&&e.define(`${i}_IS_VECTOR`),this.gradientType.value===0&&e.define(`${i}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${i}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let n=e.include(r),a=[];return a.push(this.near.build(e,"f")),a.push(this.far.build(e,"f")),a.push(this.origin.build(e,"v3")),a.push(this.direction.build(e,"v3")),a.push(this.colors.build(e,"v4[]")),a.push(this.steps.build(e,"f[]")),a.push(this.isMask.build(e,"b")),a.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),a.push(this.alpha.build(e,"f")),a.push(this.calpha),e.format(n+"("+a.join(",")+")",this.getType(e),t)}else return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},WG=hg;WG.Nodes=function(){let e=new Tt(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),t=new Tt(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),i=new Tt(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),r=new Tt(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:e,vectorLinearObjectSpaceDepth:t,vectorSphericalWorldSpaceDepth:i,vectorSphericalObjectSpaceDepth:r}}();var $3e=class extends wr{constructor(e,t,i,r,n,a,s,o){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=i,this.intensity=r,this.factor=n,this.isMask=o,this.alpha=a,this.mode=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let i=new Tt(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, bool isMask, float mask, float alpha, int mode, out float calpha) {
					float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

					float lalpha = clamp(fresnel, 0.0, 1.0) * alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return color;
				}`),r=e.include(i),n=[];return n.push(this.color.build(e,"c")),n.push(this.bias.build(e,"f")),n.push(this.scale.build(e,"f")),n.push(this.intensity.build(e,"f")),n.push(this.factor.build(e,"f")),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),e.format(r+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},GG=class extends wr{constructor(e,t,i,r,n,a,s,o,l){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=i,this.steps=r,this.offset=n,this.morph=a,this.angle=s,this.isMask=l,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(GG.Nodes.gradient),r=[];return r.push(this.gradientType.build(e,"i")),r.push(this.smooth.build(e,"b")),r.push(this.colors.build(e,"v4[]")),r.push(this.steps.build(e,"f[]")),r.push(this.offset.build(e,"v2")),r.push(this.morph.build(e,"v2")),r.push(this.angle.build(e,"f")),r.push(this.isMask.build(e,"b")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},$G=GG;$G.Nodes=function(){return{gradient:new Tt(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, bool isMask, float mask, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
				
				return color.xyz;
			}`)}}();var ZG=class extends wr{constructor(e,t,i,r,n){super("v3"),this.nodeType="Matcap",this.texture=e,this.isMask=r,this.alpha=t,this.mode=i,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`,this.rotation=n}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let i=e.include(ZG.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let r=[];return r.push(this.texture.generate(e,"t")),r.push("normal"),r.push(this.isMask.build(e,"b")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),r.push(this.rotation.build(e,"f")),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},qG=ZG;qG.Nodes=function(){return{matcap:new Tt(`vec3 matcap(sampler2D matcapTex, vec3 normal, bool isMask, float mask, float alpha, int mode, out float calpha, float rotation) {
					vec3 viewDir = normalize( vViewPosition );
					vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
					vec3 y = cross( viewDir, x );
					vec2 uv = vec2( dot( x, normal ), dot( y, normal ) );
					uv = mat2( cos(rotation), sin(rotation), -sin(rotation), cos(rotation) ) * uv;
					uv = uv * 0.495 + 0.5;
					vec4 matcapColor = texture2D( matcapTex, uv );

					float lalpha = alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
					
					return matcapColor.rgb;
            	}`)}}();var eD=(e=>(e.SIMPLEX="simplex3d",e.SIMPLEX_FRACTAL="simplex3dFractal",e.ASHIMA="simplexAshima",e.FBM="fbm",e.PERLIN="perlin",e.VORONOI="voronoi",e))(eD||{}),Ms=function(){let e=new Tt(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),t=new Tt(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[e]);t.keywords.F3=new mr("float F3 0.3333333"),t.keywords.G3=new mr("float G3 0.1666667");let i=new Tt(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[t]),r=new Tt("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),n=new Tt("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),a=new Tt(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[r,n]),s=new Tt("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),o=new Tt("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[s]),l=new Tt(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[o]),c=new Tt(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[l]);c.keywords.NUM_OCTAVES=new mr("int NUM_OCTAVES 5");let u=new Tt("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),d=new Tt(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[r,n,u]),h=new Tt(`float hashwithoutsine13(vec3 p3)
		{
			p3  = fract(p3 * .1031);
			p3 += dot(p3, p3.yzx + 33.33);
			return fract((p3.x + p3.y) * p3.z);
		}`),f=new Tt(`vec3 hashwithoutsine33(vec3 p3)
		{
			p3 = fract(p3 * vec3(.1031, .1030, .0973));
			p3 += dot(p3, p3.yxz+33.33);
			return fract((p3.xxy + p3.yxx)*p3.zyx);
		}`),p=new Tt(`float metric(in vec3 p)
		{
			// L2 
			return length(p);

			// Chebyshev 
			// vec3 a = abs(p);
			// return max(a.x, max(a.y, a.z));
		}`),m=new Tt(`float smin( float a, float b, float k )
		{
			float h = smoothstep(0.0, 1.0, 0.5 + 0.5 * (b - a) / k);
			float correction = k * h * (1.0 - h);
			return mix(b, a, h) - correction;
		}`),v=new Tt(`float smax( float a, float b, float k )
		{
			float h = smoothstep(1.0, 0.0, 0.5 + 0.5 * (a - b) / k);
			float correction = k * h * (1.0 - h);
			return mix(a, b, h) + correction;
		}`),y=new Tt(`float remap(float value, float input_min, float input_max, float output_min, float output_max) {
			// Compute width of each interval
			float input_width = input_max - input_min;
			float output_width = output_max - output_min;
		
			// Convert input range into a 0-1 range 
			float scaled = (value - input_min) / input_width;
		
			// Convert the 0-1 range into a value in output range
			return output_min + (scaled * output_width);
		}`),x=new Tt(`float voronoi(in vec3 x, in int style, in float smoothness, in float seed, in int quality) 
		{
			// Integer and fractional parts of this point's coordinates
			ivec3 p = ivec3(floor(x));
			vec3 f = fract(x);

			// Different variables that we will use to construct noise:
			//
			// f1: distance to the closest feature point
			// f2: distance to the second closest feature point
			// e: distance to the closest edge (cell boundary)
			//
			// We also compute "smooth" versions of all of the above quantites, essentially
			// replacing "hard" minimums with "smooth" minimums (described by IQ)
			float f1_smooth = 8.0;
			float f1 = 8.0;
			float f2_smooth = 8.0;
			float f2 = 8.0;
			float e_smooth = 8.0;
			float e = 8.0;

			// Variables stored from closest cell
			ivec3 mb;
			vec3 mr; 

			int steps = quality;
			
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				ivec3 b = ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d = length(r);
				
				f1_smooth = smin(d, f1_smooth, smoothness);

				// Store un-smoothed distances too 
				if (d < f1) 
				{
					f2 = f1;
					f1 = d;

					mb = ivec3(x, y, z);
					mr = r;
				} 
				else if (d < f2) 
				{
					f2 = d;
				}
			}	
			
			// Second pass for edge distance  
			// skip for styles don't need
			if (style != 0 &&  style != 5 && style != 7)
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				// Start search at the cell that contains the closest point to "x" (found in 1st pass)
				ivec3 b = mb + ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d1 = dot(0.5 * (mr + r), (r - mr)); 				// IQ normalizes "r - mr" but that breaks things for the smooth version?
				float d2 = dot(0.5 * (mr + r), normalize(r - mr));

				e_smooth = smin(d1, e_smooth, smoothness);

				e = min(e, d2);

				// Also compute a smooth version of F2 in this pass
				{
					ivec3 b = ivec3(x, y, z);
					if (b != mb) 
					{
						vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
						float d = length(r);

						f2_smooth = smin(d, f2_smooth, smoothness);
					}
				}
			}

			// Different visualization modes 
			if (style == 0) 
			{
				return f1_smooth;
			}
			if (style == 1) 
			{
				return f2_smooth;
			}
			if (style == 2) 
			{
				return f2_smooth - f1_smooth;
				
				// "Pebbles" also cool
				//return step(0.2, f2_smooth - f1_smooth);
			}
			if (style == 3) 
			{
				// This one is really good for rock / stone effects
				float a = f1; 
				float b = f2;
				float k = 3.0;
				float h = max(k - abs(a - b), 0.0) / k;
				float final = min(a, b) - h * h * k * (1.0 / 4.0);
				return final;
			}
			if (style == 4) 
			{
				// Some random adjustments to make this style stand out more 
				return exp(5.0 * e_smooth);
			}
			if (style == 5) 
			{
				return pow(f1_smooth, 3.0);
			}
			if (style == 6) 
			{				
				const float eps = 0.0125;

				// Thicker lines as the user increases the smoothness slider
				float thickness = smoothness * 0.25 + eps;

				// Blurrier lines as the user increases the smoothness slider
				float blur = pow(smoothness, 3.0) * 0.25 + eps;

				return smoothstep(
					thickness - thickness * blur, 
					thickness + thickness * blur, 
					e
				);
			}
			if (style == 7) 
			{
				return hashwithoutsine13(vec3(p + mb) + seed);
			}
		}
	`,[h,f,p,m,v,y]);return{simplex:t,simplexFractal:i,simplexAshima:a,fbm:c,perlin:d,voronoi:x}}(),YG=class extends wr{constructor(e,t,i,r,n,a,s,o,l,c,u,d,h,f,p,m,v,y,x){super("v3"),this.nodeType="Noise",this.scale=e,this.size=t,this.move=i,this.fA=r,this.fB=n,this.distortion=a,this.colorA=s,this.colorB=o,this.colorC=l,this.colorD=c,this.noiseType=d,this.voronoiStyle=f,this.highCut=p,this.lowCut=m,this.smoothness=v,this.seed=y,this.quality=x,this.isMask=h,this.alpha=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t,i,r,n){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let a=Object.values(eD)[this.noiseType.value],s=a=="voronoi"?`
		float v = ${a}(st + move, voronoiStyle, smoothness, seed, quality);

		// Apply clipping to colors
		v = remap(v, lowCut, highCut, 0.0, 1.0);
		v = smax(v, 0.0, smoothness * 0.25);
		v = smin(v, 1.0, smoothness * 0.25);

		// Note that the voronoi mode only uses colors "A" and "C" from the UI 
		vec4 color = mix(colorA, colorC, v); 
		`:`
		vec3 q = vec3(${a}(st),
					   ${a}(st + vec3(1.0)),
					   ${a}(st + vec3(1.0)));
		vec3 r = vec3(${a}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
					  ${a}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
					  ${a}(st * q));
		float f = ${a}(st + r);
		vec4 color;
		color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
		color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
		color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));
		`,o=new Tt(`vec3 ${a}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, int voronoiStyle, float highCut, float lowCut, float smoothness, float seed, int quality, bool isMask, float mask, float alpha, out float calpha) 
			{
                // Prevent scale of zero 
				scale = max(abs(scale), 0.001);

				vec3 st = position / size;
				st /= scale;

				${s}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return clamp(color, 0.0, 1.0).rgb;
			}`,[Ms.simplex,Ms.simplexFractal,Ms.simplexAshima,Ms.fbm,Ms.perlin,Ms.voronoi]),l=e.include(o),c=[];return c.push(this.scale.build(e,"f")),c.push(this.size.build(e,"v3")),c.push(this.move.build(e,"f")),c.push(this.fA.build(e,"v2")),c.push(this.fB.build(e,"v2")),c.push(this.distortion.build(e,"v2")),c.push(this.colorA.build(e,"v4")),c.push(this.colorB.build(e,"v4")),c.push(this.colorC.build(e,"v4")),c.push(this.colorD.build(e,"v4")),c.push(this.voronoiStyle.build(e,"i")),c.push(this.highCut.build(e,"f")),c.push(this.lowCut.build(e,"f")),c.push(this.smoothness.build(e,"f")),c.push(this.seed.build(e,"f")),c.push(this.quality.build(e,"i")),c.push(this.isMask.build(e,"b")),c.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.calpha),e.format(l+"("+c.join(",")+")",this.getType(e),t)}};YG.numOctaves=5;var KG=class extends wr{constructor(e,t,i,r,n,a,s,o,l,c,u,d,h,f,p,m){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=t,this.outlineWidth=i,this.contourWidth=r,this.contourThreshold=n,this.outlineThreshold=a,this.contourFrequency=s,this.outlineSmoothing=o,this.contourDirection=l,this.positionalLines=c,this.compensation=u,this.resolution=d,this.normalMap=h,this.depthMap=f,this.pixelRatio=p,this.alpha=m,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let i=`g${this.uuid.toString().replace(/-/g,"")}`;if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.compensation.value&&e.define("OUTLINE_COMPENSATION",`${i}_offset`),this.firstTime){let r=this.outlineWidth.build(e,"f"),n=this.resolution.build(e,"v2"),a=this.compensation.build(e,"b"),s=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(r,"uniform float"),e.addVertexParsVariable(n,"uniform vec2"),e.addVertexParsVariable(a,"uniform bool"),e.addVertexParsVariable(s,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float"),e.addVertexFinalCode(`
                vID = randomColor.r;
                vec2 ${i}_offset = vec2(0.0);
                if (${a}) {
                    vec4 ${i}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(transformed, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${i}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    ${i}_offset = normalize(${i}_clipNormal.xy) / ${n} * (${r} / 2.0) * ${i}_clipPosition.w * 2.0 * ${s};
                    ${i}_clipPosition.xy += ${i}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${i}_clipPosition;
                }
            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(KG.Nodes.outline),n=[];return n.push(this.outlineColor.build(e,"c")),n.push(this.contourColor.build(e,"c")),n.push(this.outlineWidth.build(e,"f")),n.push(this.contourWidth.build(e,"f")),n.push(this.contourThreshold.build(e,"f")),n.push(this.outlineThreshold.build(e,"f")),n.push(this.contourFrequency.build(e,"f")),n.push(this.outlineSmoothing.build(e,"f")),n.push(this.contourDirection.build(e,"v3")),n.push(this.positionalLines.build(e,"b")),n.push(this.resolution.build(e,"v2")),n.push(this.normalMap.getTexture(e,"t")),n.push(this.depthMap.getTexture(e,"t")),n.push(this.pixelRatio.build(e,"f")),n.push(this.compensation.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),this.firstTime=!this.firstTime,e.format(r+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},XG=KG;XG.Nodes=function(){let e=new Tt(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    vec2 texelSize = (vec2(1.0) / resolution);
    vec2 offsetSize = texelSize * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -offsetSize.x, -offsetSize.y) + (vogelDiskSample(0, 9, temporalAngle) * texelSize);
	uvSamples[1] = uv + vec2(0.0, -offsetSize.y) + (vogelDiskSample(1, 9, temporalAngle) * texelSize);
	uvSamples[2] = uv + vec2(  offsetSize.x, -offsetSize.y) + (vogelDiskSample(2, 9, temporalAngle) * texelSize);
	uvSamples[3] = uv + vec2( -offsetSize.x, 0.0) + (vogelDiskSample(3, 9, temporalAngle) * texelSize);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  offsetSize.x, 0.0) + (vogelDiskSample(5, 9, temporalAngle) * texelSize);
	uvSamples[6] = uv + vec2( -offsetSize.x, offsetSize.y) + (vogelDiskSample(6, 9, temporalAngle) * texelSize);
	uvSamples[7] = uv + vec2(0.0, offsetSize.y) + (vogelDiskSample(7, 9, temporalAngle) * texelSize);
	uvSamples[8] = uv + vec2(  offsetSize.x, offsetSize.y) + (vogelDiskSample(8, 9, temporalAngle) * texelSize);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec3 sobel_edge_h = normalSamples[2].rgb + (2.0*normalSamples[5].rgb) + normalSamples[8].rgb - (normalSamples[0].rgb + (2.0*normalSamples[3].rgb) + normalSamples[6].rgb);
  	vec3 sobel_edge_v = normalSamples[0].rgb + (2.0*normalSamples[1].rgb) + normalSamples[2].rgb - (normalSamples[6].rgb + (2.0*normalSamples[7].rgb) + normalSamples[8].rgb);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new Tt(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float mask, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                //resultAlpha = 1.0;
                //result = vec3(sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha * mask;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				 
                 return result;
             }`,[e])}}();var tu=class extends wr{constructor(e,t,i,r,n,a,s,o,l,c,u,d,h,f,p,m,v,y){super("v3"),this.nodeType="Pattern",this.style=e,this.projection=t,this.axis=i,this.blending=r,this.offset=n,this.colorA=a,this.colorB=s,this.frequency=o,this.size=l,this.variation=c,this.smoothness=u,this.zigzag=d,this.rotation=h,this.vertical=f,this.horizontal=p,this.sides=m,this.isMask=y,this.alpha=v,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.require("position"),e.require("uv"),e.requires.uv=[!0],e.require("normal"),e.requires.normal=!0,e.addFragmentVariable(this.calpha,"float");let i;switch(this.style.value){case 0:i="circle";break;case 1:i="ring";break;case 2:i="polygon";break;case 3:i="xcross";break;case 4:i="diamond";break;case 5:i="checkerboard";break;case 6:i="line";break;case 7:i="wave";break;default:i="circle";break}let r=`g${this.uuid.toString().replace(/-/g,"")}`,n=new Tt(`float hashwithoutsine12(vec2 p)
				{
					vec3 p3 = fract(vec3(p.xyx) * .1031);
					p3 += dot(p3, p3.yzx + 33.33);
					return fract((p3.x + p3.y) * p3.z);
				}`),a=new Tt(`vec2 rotate_uv(in vec2 uv, float a, bool repeat) 
				{
					const float mid = 0.5;
					float radians = a * (PI / 180.0);
					vec2 rotated = vec2(
						cos(radians) * (uv.x - mid) + sin(radians) * (uv.y - mid) + mid,
						cos(radians) * (uv.y - mid) - sin(radians) * (uv.x - mid) + mid
					);
					return repeat ? fract(rotated): rotated;
				}`),s="";if(this.projection.value===4){let u=this.style.value===2?`${i}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${i}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,d=this.style.value===2?`${i}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${i}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,h=this.style.value===2?`${i}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${i}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation)`;s=`
				vec3 p = position;
				float factor = 0.0125;
				vec2 uv0 = fract(p.xy * factor);
				vec2 uv1 = fract(p.zy * factor);
				vec2 uv2 = fract(p.xz * factor);
				
				uv0 = rotate_uv(uv0 + offset, rotation, true);
				uv1 = rotate_uv(uv1 + offset, rotation, true);
				uv2 = rotate_uv(uv2 + offset, rotation, true);
	
				float d0 = ${u};
				float d1 = ${d};
				float d2 = ${h};
				
				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));
				d0 *= weights.z;
				d1 *= weights.x;
				d2 *= weights.y;
				float draw = d0 + d1 + d2;
	
				vec2 custom_uv = uv0 * weights.z + uv1 * weights.x + uv2 * weights.y;
				`}else{let u=this.style.value===2?`${i}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${i}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,d="";this.axis.value===0?d=`float radius = length(p);
					float theta = atan(p.y, p.z);
					float phi = acos(p.x / radius);`:this.axis.value===1?d=`float radius = length(p);
					float theta = atan(p.x, p.z);
					float phi = acos(p.y / radius);`:(this.axis.value,d=`float radius = length(p);
					float theta = atan(p.y, p.x);
					float phi = acos(p.z / radius);`);let h="";switch(this.projection.value){case 0:h="custom_uv = vUv.st;";break;case 1:break;case 2:h=`
							vec3 p = position;
							${d}
							custom_uv = vec2(theta, phi);
							custom_uv /= PI;
							`;break}s=`
				vec2 custom_uv;
				${h}
	
				custom_uv += offset;
				custom_uv = fract(custom_uv);
				custom_uv = rotate_uv(custom_uv, rotation, true);
	
				float draw = ${u};
				`}let o=new Tt(`vec3 ${r}_pattern(vec3 normal, float blending, int style, vec2 offset, vec4 colorA, vec4 colorB, vec2 frequency, float size, float variation, float smoothness, float zigzag, float rotation, vec2 vertical, vec2 horizontal, int sides, bool isMask, float mask, float alpha, out float calpha) {
					const float TWO_PI = PI * 2.0;
					float smoothness_remapped = pow(smoothness, 5.0);	

					${s}

					// Construct final output color
					vec4 color = mix(colorA, colorB, draw);
					color.a = clamp(color.a, 0.0, 1.0);

					// Apply cuts
					color.a *= 
						step(vertical.x, custom_uv.y) * 
						step(custom_uv.y, vertical.y);
					color.a *= 
						step(horizontal.x, abs(custom_uv.x)) * 
						step(abs(custom_uv.x), horizontal.y);

					// Accumulate alpha 
					float lalpha = alpha * clamp(color.a, 0.0, 1.0) * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return clamp(color, 0.0, 1.0).rgb;
				}`,[a,n,tu.DrawFunctions.circle,tu.DrawFunctions.ring,tu.DrawFunctions.polygon,tu.DrawFunctions.cross,tu.DrawFunctions.diamond,tu.DrawFunctions.checkerboard,tu.DrawFunctions.line,tu.DrawFunctions.wave]),l=e.include(o),c=[];return c.push("normal"),c.push(this.blending.build(e,"f")),c.push(this.style.build(e,"i")),c.push(this.offset.build(e,"v2")),c.push(this.colorA.build(e,"v4")),c.push(this.colorB.build(e,"v4")),c.push(this.frequency.build(e,"v2")),c.push(this.size.build(e,"f")),c.push(this.variation.build(e,"f")),c.push(this.smoothness.build(e,"f")),c.push(this.zigzag.build(e,"f")),c.push(this.rotation.build(e,"f")),c.push(this.vertical.build(e,"v2")),c.push(this.horizontal.build(e,"v2")),c.push(this.sides.build(e,"i")),c.push(this.isMask.build(e,"b")),c.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.calpha),e.format(l+"("+c.join(",")+")",this.getType(e),t)}else return console.warn("PatterNode is not compatible with "+e.shader+" shader."),e.format("vec3(0.0)",this.getType(e),t)}},QG=tu;QG.DrawFunctions=function(){let e=new Tt(`float hashwithoutsine12(vec2 p) {
				vec3 p3 = fract(vec3(p.xyx) * 0.1031);
				p3 += dot(p3, p3.yzx + 33.33);
				return fract((p3.x + p3.y) * p3.z);
			}`),t=new Tt(`vec2 tile_and_center(in vec2 uv, in vec2 frequency, in float variation, in float zigzag, in float rotation) {
                // Create tiles in UV-space
                uv *= frequency;

                // Integer coords
                vec2 i = floor(uv);

                // Offset every other row based on zigzag param, then compute fractional coords
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = fract(uv);

				// Rotate the tile itself:
				// const float mid = 0.5;
				// f = vec2(
				// 	cos(rotation) * (f.x - mid) + sin(rotation) * (f.y - mid) + mid,
				// 	cos(rotation) * (f.y - mid) - sin(rotation) * (f.x - mid) + mid
				// );
				// f = fract(f);

                f = f * 2.0 - 1.0;

				// Recompute integer coords after shifting - then, random value per tile 
				i = floor(uv);
				float rand = (hashwithoutsine12(i) * 5.0 + 1.0);
				float jitter = mix(1.0, rand, variation);
				f *= jitter;

                return f;
            }`,[e]),i=new Tt(`float circle(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(
                    -smoothness, 
                     smoothness, 
                     length(f) - size
                );
            }`,[t]),r=new Tt(`float ring(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);

				float d = length(f);
                const float inner_width = 0.5;

                float outer = smoothstep(-smoothness, smoothness, d - size);
                float inner = smoothstep(-smoothness, smoothness, d - size * inner_width);
				return outer + (1.0 - inner);   
            }`,[t]),n=new Tt(`float sdf_ngon(in vec2 p, in float r, in int n) {
                float an = (PI * 2.0) / float(n);
                float he = r * tan(0.5 * an);
                
                // Rotate to first sector
                p = -p.yx; 
                float bn = an * floor((atan(p.y, p.x) + 0.5 * an) / an);
                vec2  cs = vec2(cos(bn), sin(bn));
                p = mat2(cs.x, -cs.y, cs.y, cs.x)*p;
            
                // Side of polygon
                return length(p - vec2(r, clamp(p.y, -he, he))) * sign(p.x - r);
            }
            
            float polygon(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation, in int sides) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_ngon(f, size, sides));
            }`,[t]),a=new Tt(`float sdf_cross(in vec2 p, in vec2 b, float r ) {
                p = abs(p); 
				p = (p.y > p.x) ? p.yx : p.xy;
                vec2  q = p - b;
                float k = max(q.y, q.x);
                vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);
                return sign(k) * length(max(w, 0.0)) + r;
            }
            
            // Avoid namespace conflicts 
            float xcross(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_cross(f, vec2(size, size * 0.25), smoothness));
            }`,[t]),s=new Tt(`float ndot(vec2 a, vec2 b) { 
                return a.x*b.x - a.y*b.y; 
            }
            
            float sdf_diamond(in vec2 p, in vec2 b) {
                p = abs(p);
                float h = clamp(ndot(b - 2.0 * p, b) / dot(b, b), -1.0, 1.0);
                float d = length(p - 0.5 * b * vec2(1.0 - h, 1.0 + h));
                return d * sign(p.x * b.y + p.y * b.x - b.x * b.y);
            }

            float diamond(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
	            return smoothstep(-smoothness, smoothness, sdf_diamond(f, vec2(size)));
            }`,[t]),o=new Tt(`float checkerboard(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                uv *= frequency;
                vec2 i = floor(uv);

                float offset = mod(i.y, 2.0);

                uv.x += offset + zigzag * offset;
                float x = floor(uv.x);
                
                return mod(x, 2.0);
            }`),l=new Tt(`float line(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, 0.0, zigzag, rotation);
				
				// Different approach for variation param here
				float row = floor(uv * frequency).y;
				float rand = hashwithoutsine12(vec2(row));
				float s = mix(size, size * rand, variation);

				return smoothstep(
					s - smoothness, 
					s + smoothness, 
					abs(f.y)
				);
            }`,[t]),c=new Tt(`// Uses bisection 
            float udf_cos(in vec2 p, in float a, in float b, in float c, in float d) {
                // Convert all data to a primitive cosine wave
                p = c * (p - vec2(d, a));
                
                const float TWO_PI = PI * 2.0;

                // Reduce to principal half cycle
                p.x = mod(p.x, TWO_PI); 
                if (p.x > PI) {
                    p.x = TWO_PI - p.x;
                }
            
                // Find zero of derivative (minimize distance)
                float xa = 0.0;
                float xb = TWO_PI;

                // 24 bit precision
                for (int i = 0; i < 24; i++) {
                    float x = 0.5 * (xa + xb);
                    float y = x - p.x + b * c * sin(x) * (p.y - b * c * cos(x));
                    if (y < 0.0) xa = x; 
                    else xb = x;
                }
                float x = 0.5 * (xa + xb);
                
                // Compute distance    
                vec2 q = vec2(x, b * c * cos(x));
                return length(p - q) / c;
            }

            float wave(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                float repeat = frequency.x;
                uv *= repeat;
                vec2 i = floor(uv);
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = vec2(uv.x, fract(uv.y));

                // Generalized cosine: y(x) = a + b * cos(cx + d)
                const float amplitude = 0.125;
                float wave_frequency = frequency.y * 0.1;
                float distance_estimate = udf_cos(f, 0.50, amplitude, wave_frequency * (2.0 * PI), 0.0);

				// Different approach for variation param here
				float rand = hashwithoutsine12(vec2(i.y));
				float s = mix(size, size * rand, variation);

                return smoothstep(-smoothness, smoothness, distance_estimate - s * 0.5);
            }`);return{tileAndCenter:t,circle:i,ring:r,polygon:n,cross:a,diamond:s,checkerboard:o,line:l,wave:c}}();var JG=class extends wr{constructor(e,t,i,r,n,a,s,o){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=i,this.noiseStrength=r,this.noiseScale=n,this.offset=a,this.isMask=o,this.alpha=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(JG.Nodes.rainbow),r=[];return r.push(this.filmThickness.build(e,"f")),r.push(this.movement.build(e,"f")),r.push(this.wavelengths.build(e,"v3")),r.push(this.noiseStrength.build(e,"f")),r.push(this.noiseScale.build(e,"f")),r.push(this.offset.build(e,"v3")),r.push(this.isMask.build(e,"b")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},e$=JG;e$.Nodes=function(){let e=new Tt(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);
             }`,[Ms.simplex]);return{rainbow:new Tt(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, bool isMask, float mask, float alpha, out float calpha) {
				vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

				float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);

				float lalpha = alpha * rainbowContribution * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return res;
             }`,[e])}}();var t$=class extends wr{constructor(e,t,i,r,n,a,s,o,l,c){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=t,this.steps=i,this.source=r,this.isWorldSpace=n,this.noiseStrength=a,this.noiseScale=s,this.shadowColor=o,this.offset=l,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let i=e.include(t$.Nodes.toon),r=[];return r.push(this.positioning.build(e,"i")),r.push(this.colors.build(e,"v4[]")),r.push(this.steps.build(e,"f[]")),r.push(this.source.build(e,"v3")),r.push(this.isWorldSpace.build(e,"b")),r.push(this.noiseStrength.build(e,"f")),r.push(this.noiseScale.build(e,"f")),r.push(this.shadowColor.build(e,"v4")),r.push(this.offset.build(e,"v3")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},i$=t$;i$.Nodes=function(){let e=new Tt(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),t=new Tt(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),i=new Tt(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[t]),r=new Tt(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),n=new Tt(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[r]);return{toon:new Tt(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float mask, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotLightCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplex3d(st),
					// 	simplex3d(st + vec3(111.1, 143.89, 217.19)),
					// 	simplex3d(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[Ms.simplex,e,i,n])}}();var Z3e=function(){return{textureBicubic:new Tt(`float w0( float a ) {
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
        }
    
        float w1( float a ) {
            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
        }
    
        float w2( float a ){
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
        }
    
        float w3( float a ) {
            return ( 1.0 / 6.0 ) * ( a * a * a );
        }
    
        // g0 and g1 are the two amplitude functions
        float g0( float a ) {
            return w0( a ) + w1( a );
        }
    
        float g1( float a ) {
            return w2( a ) + w3( a );
        }
    
        // h0 and h1 are the two offset functions
        float h0( float a ) {
            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
        }
    
        float h1( float a ) {
            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
        }
    
        vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
            uv = uv * texelSize.zw + 0.5;
    
            vec2 iuv = floor( uv );
            vec2 fuv = fract( uv );
    
            float g0x = g0( fuv.x );
            float g1x = g1( fuv.x );
            float h0x = h0( fuv.x );
            float h1x = h1( fuv.x );
            float h0y = h0( fuv.y );
            float h1y = h1( fuv.y );
    
            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
    
            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) + 
                   g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
        }

        vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
            vec2 fLodSizeInv = 1.0 / fLodSize;
            vec2 cLodSizeInv = 1.0 / cLodSize;
            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
            return mix( fSample, cSample, fract( lod ) );
        }`)}}();function q3e(e,t){return e>=t?new Pe(t/e,1):new Pe(1,e/t)}var r$=class extends wr{constructor(e,t,i,r,n,a,s,o){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=i,this.transmissionSamplerSize=r,this.transmissionSamplerMap=n,this.transmissionDepthMap=a,this.aspectRatio=s,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",6),e.define("BLUR_SLOD",Math.pow(2,ni.transmissionLod.value)),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let i=e.include(r$.Nodes.transmission),r=[];return r.push(this.thickness.build(e,"f")),r.push(this.ior.build(e,"f")),r.push(this.roughness.build(e,"f")),r.push(this.transmissionSamplerSize.build(e,"v2")),r.push(this.transmissionSamplerMap.getTexture(e,"t")),r.push(this.transmissionDepthMap.getTexture(e,"t")),r.push(this.aspectRatio.build(e,"v2")),r.push("normal"),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},n$=r$;n$.Nodes=function(){let e=new Tt(`vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

				// Special case for blur == 0.0
				if (lod == 0.0) {
					#ifdef TEXTURE_LOD_EXT
					return texture2DLodEXT( sp, U, 0.0).rgb;
					#else
					return textureLod( sp, U, 0.0).rgb;
					#endif
				}
				
				vec2 texelSize = vec2(1.0) / resolution;
                vec2 halton = haltonSequence[frameIndex];
                float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
                float temporalAngle  = temporalOffset * PI2;
				vec3 res = vec3(0.0);
                vec2 uv = vec2(0.0);
                vec2 offset = vec2(0.0);
                vec2 vogelSample = vec2(0.0);
                for (int i = 0; i < NUM_SAMPLES; i++) {
                    vogelSample =  vogelDiskSample(i, NUM_SAMPLES, temporalAngle) * texelSize;
                    offset = vogelSample * scale * (lod * 10.0); // TODO: used to be hardcoded to 20
                    uv = U + offset;
                    float opaqueDepth = unpackRGBAToDepth(textureLod(dm, uv, lod));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    res += textureLod(sp, uv, lod).rgb;
                }
                return res / float(NUM_SAMPLES);
            }`),t=new Tt(`vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        
				// Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );

		        // The thickness is specified in local space
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),i=new Tt(`float applyIorToRoughness( float roughness, float ior ) {
				// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
				// an IOR of 1.5 results in the default amount of microfacet refraction.
				return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
			}`),r=new Tt(`vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
				// Threejs exports do not pass a depth map to this shader, so we have to fallback to the "Threejs method of blurring" - see
				// also the code in convertTransmission.ts, which runs during export
				#ifdef IS_THREEJS_EXPORT
					float lod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness / 5.0, ior);
					return textureBicubic(transmissionSamplerMap, fragCoord.xy, lod).rgb;
				#else
					float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
					float lod = applyIorToRoughness(roughness, ior);
					return blur(transmissionSamplerMap, fragCoord, vec2(lod), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
				#endif
			}`,[Z3e.textureBicubic,i,e]),n=new Tt(`vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;

				// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
				vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;

				vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
				vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
				unrefractedCoords += 1.0;
				unrefractedCoords /= 2.0;

				// Sample framebuffer to get pixel the refracted ray hits.
				return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    		}`,[r,t]);return{transmission:new Tt(`vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float mask, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return transmission;
            }`,[n])}}();var EM=(e=>(e.NOISE="noise",e.MAP="map",e))(EM||{}),a$=class extends wr{constructor(e,t,i,r,n,a,s,o,l,c,u){super("v3"),this.displacementTypeIndex=new _r(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=t,Object.values(EM)[this.displacementTypeIndex.value]==="map"&&(this.mat=new VG(this.movementOrTexture.value.matrix)),this.cropOrOffset=i,this.scale=c,this.noiseFunctionIndex=u,this.voronoiStyle=r,this.smoothness=n,this.seed=a,this.highCut=s,this.lowCut=o,this.quality=l}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let i,r=[];switch(r.push("displaced_position"),r.push("displaced_normal"),Object.values(EM)[this.displacementTypeIndex.value]){case"map":{i=e.include(a$.Nodes.map),r.push(this.movementOrTexture.getTexture(e,"t")),r.push("uv"),r.push(this.cropOrOffset.build(e,"f")),this.mat&&r.push(this.mat.build(e,"mat3"));break}case"noise":{let n=Object.values(eD)[this.noiseFunctionIndex.value],a=new Tt(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),s=n=="voronoi"?`
					float v = ${n}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1), voronoiStyle, smoothness, seed, quality);
					v = remap(v, lowCut, highCut, 0.0, 1.0);
					v = smax(v, 0.0, smoothness * 0.25);
					v = smin(v, 1.0, smoothness * 0.25);

					return p + n * v * intensity;
					`:`
					return p + n * ${n}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
					`,o=new Tt(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality) {
							${s}
						}`,[Ms.simplex,Ms.simplexFractal,Ms.simplexAshima,Ms.fbm,Ms.perlin,Ms.voronoi]),l=new Tt(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[o,a]);i=e.include(l),r.push(this.scale.build(e,"f")),r.push(this.cropOrOffset.build(e,"v3")),r.push(this.movementOrTexture.build(e,"f")),r.push(this.voronoiStyle.build(e,"i")),r.push(this.smoothness.build(e,"f")),r.push(this.seed.build(e,"f")),r.push(this.highCut.build(e,"f")),r.push(this.lowCut.build(e,"f")),r.push(this.quality.build(e,"i"));break}}return r.push(this.intensity.build(e,"f")),r.push("displaced_normal"),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},s$=a$;s$.Nodes=function(){let e=new Tt(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),t=new Tt(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new Tt(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[e,t])}}();var ni={normalRenderTarget:new fu,normalRenderTargetDepth:new fu,transmissionRenderTarget:new fu,aspectRatio:new va,transmissionSize:new va(2048,2048),transmissionRenderTargetDepth:new fu,aoRenderTarget:new fu,aoEnabled:new os,pixelRatioNode:new Bt(1),resolution:new va,penumbraSize:new ef(5,.5),frameIndex:new _r(0),transmissionLod:new _r(2)};for(let e of Object.values(ni))e.isRenderGlobal=!0;var o$={skiaWasmUrl:"https://unpkg.com/@splinetool/ui-wasm@1.9.45/build/ui.wasm"},tD=class extends Fn{constructor(){super("basic"),this.nodeType="Basic",this.color=new an(Qs),this.shadingAlpha=new Bt(1),this.shadingBlend=new _r(0),this.previousModelViewMatrix=new wc,this.previouseProjectionMatrix=new wc}get category(){return"phong"}generate(e){let t;if(e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:ni.frameIndex}),e.mergeUniform({resolution:ni.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Uv.merge([At.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),r.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{this.color===void 0&&(this.color=new an(Qs)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let i=this.color.flow(e,"c",{slot:"color"}),r=this.alpha?this.alpha.flow(e,"f"):void 0,n=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,a=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=r!==void 0,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let s=["#include <normal_fragment_begin>",i.code];r&&s.push(r.code,"#ifdef ALPHATEST"," if ( "+r.result+" <= ALPHATEST ) discard;","#endif"),a?s.push(a.code,`vec3 outgoingLight = ${i.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`):s.push(`vec3 finalColor = ${i.result};`);let o="1.0";this.mask&&(this.mask.analyze(e),o=`luminance(${this.mask.flow(e,"v3").result})`),r?s.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${r.result} * ${o} );`):s.push("gl_FragColor = vec4("+i.result+", 1.0 );"),n&&s.push(`gl_FragColor.a *= ${n.result};`),s.push("#include <fog_fragment>","#include <dithering_fragment>"),t=s.join(`
`)}return t}},Y3e=class extends Fn{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new an(Qs),this.emissive=new an(0),this.emissiveIntensity=new Bt(1),this.previousModelViewMatrix=new wc,this.previouseProjectionMatrix=new wc,this.shadingAlpha=new Bt(1),this.shadingBlend=new _r(0),this.occlusion=new os(!0)}get category(){return"lambert"}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:ni.frameIndex}),e.mergeUniform({resolution:ni.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Uv.merge([At.fog,At.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
				`),r.push(`
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:ni.penumbraSize}),e.mergeUniform({frameIndex:ni.frameIndex}),e.mergeUniform({aoMap:ni.aoRenderTarget}),e.mergeUniform({aoEnabled:ni.aoEnabled}),this.color===void 0&&(this.color=new an(Qs)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),r=this.emissive.flow(e,"c",{slot:"emissive"}),n=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),a=this.occlusion.flow(e,"b",{slot:"occlusion"}),s=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,u=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=c!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let d=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];d.push(i.code,"vec3 diffuseColor = "+i.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),c&&d.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),d.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),r&&d.push(r.code,"reflectedLight.directDiffuse += "+r.result+" * "+n.result+";"),d.push("vec3 ao = aoEnabled && "+a.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) ;");let h="1.0";this.mask&&(this.mask.analyze(e),h=`luminance(${this.mask.flow(e,"v3").result})`),d.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * ${h} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result} * ${h}, ${o.result} );

					outgoingLight *= ao;
				}
				`),l&&d.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),c?d.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):d.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u&&d.push(`gl_FragColor.a *= ${u.result};`),d.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=d.join(`
`)}return t}},_v=function(){let e=new Tt(`vec2 dHdxy(sampler2D bumpMap, vec2 bumpMapUv, float bumpScale) {

            // Gradient of UVs w.r.t. X coordinate (in screen-space)
            vec2 dSTdx = dFdx(bumpMapUv);

            // Gradient of UVs w.r.t. Y coordinate (in screen-space)
            vec2 dSTdy = dFdy(bumpMapUv);
            
            // Forward differencing
            float Hll = bumpScale * luminance(texture(bumpMap, bumpMapUv).rgb);
            float dBx = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdx).rgb) - Hll;
            float dBy = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdy).rgb) - Hll;
            
            return vec2( dBx, dBy );
        }`),t=new Tt(`vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
            vec3 vSigmaX = dFdx( surf_pos.xyz );
            vec3 vSigmaY = dFdy( surf_pos.xyz );
            vec3 vN = surf_norm; // normalized
            
            vN = normalize(vN);

            vec3 R1 = cross( vSigmaY, vN );
            vec3 R2 = cross( vN, vSigmaX );

            R1 = normalize(R1);
            R2 = normalize(R2);
    
            float fDet = dot( vSigmaX, R1 ) * faceDirection;
    
            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
            return normalize( abs( fDet ) * vN - vGrad );
        }`);return{dHdxy:e,perturbNormalArb:t}}(),K3e=class extends Fn{constructor(){super("phong"),this.nodeType="Phong",this.color=new an(Qs),this.specular=new an(1118481),this.shininess=new Bt(30),this.previousModelViewMatrix=new wc,this.previouseProjectionMatrix=new wc,this.shadingAlpha=new Bt(1),this.shadingBlend=new _r(0),this.occlusion=new os(!0)}get category(){return"phong"}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:ni.frameIndex}),e.mergeUniform({resolution:ni.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Uv.merge([At.fog,At.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:ni.penumbraSize}),e.mergeUniform({frameIndex:ni.frameIndex}),e.mergeUniform({aoMap:ni.aoRenderTarget}),e.mergeUniform({aoEnabled:ni.aoEnabled}),this.color===void 0&&(this.color=new an(Qs)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e);let i=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),n=this.specular.flow(e,"c"),a=this.shininess.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,u=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=c!==void 0,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let d=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];if(this.bumpMap){e.include(_v.dHdxy),e.include(_v.perturbNormalArb);let f=this.bumpMap.texture.flow(e,"t"),p=this.bumpMap.flow(e,"v3"),m=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",v="";this.bumpMap.projection.value===4?v=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${f.result}, uv0, ${m});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${f.result}, uv1, ${m});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${f.result}, uv2, ${m});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:v=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${f.result}, bumpMapCachedUv, ${m});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,d.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${p.result};
					${v}
					`)}d.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",n.code,"	vec3 specular = "+n.result+";",a.code,"	float shininess = max( 0.0001, "+a.result+" );","	float specularStrength = 1.0;"),c&&d.push(c.code,"#ifdef ALPHATEST","if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),d.push("material.diffuseColor = diffuseColor;"),d.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),d.push("vec3 ao = aoEnabled && "+i.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;");let h="1.0";this.mask&&(this.mask.analyze(e),h=`luminance(${this.mask.flow(e,"v3").result})`),d.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * ${h} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result} * ${h}, ${o.result} );
					
					outgoingLight *= ao;
				}
				`),l&&d.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),c?d.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result});`):d.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u&&d.push(`gl_FragColor.a *= ${u.result};`),d.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=d.join(`
`)}return t}},X3e=class extends Fn{constructor(){super("standard"),this.nodeType="Standard",this.color=new an(Qs),this.roughness=new Bt(.3),this.metalness=new Bt(0),this.reflectivity=new Bt(.5),this.previousModelViewMatrix=new wc,this.previouseProjectionMatrix=new wc,this.shadingAlpha=new Bt(1),this.shadingBlend=new _r(0),this.occlusion=new os(!0)}get category(){return"physical"}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:ni.frameIndex}),e.mergeUniform({resolution:ni.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Uv.merge([At.fog,At.lights])),At.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:ni.penumbraSize}),e.mergeUniform({frameIndex:ni.frameIndex}),e.mergeUniform({aoMap:ni.aoRenderTarget}),e.mergeUniform({aoEnabled:ni.aoEnabled});let i={gamma:!0};this.color===void 0&&(this.color=new an(Qs)),this.color.analyze(e,{slot:"color",context:i}),this.roughness.analyze(e),this.metalness.analyze(e);let r=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let n=this.color.flow(e,"c",{slot:"color",context:i}),a=this.roughness.flow(e,"f"),s=this.metalness.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),l=this.shadingBlend.flow(e,"i"),c=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,u=this.alpha?this.alpha.flow(e,"f"):void 0,d=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,h=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=u!==void 0,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let f=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];if(this.bumpMap){e.include(_v.dHdxy),e.include(_v.perturbNormalArb);let m=this.bumpMap.texture.flow(e,"t"),v=this.bumpMap.flow(e,"v3"),y=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",x="";this.bumpMap.projection.value===4?x=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${m.result}, uv0, ${y});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${m.result}, uv1, ${y});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${m.result}, uv2, ${y});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:x=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${m.result}, bumpMapCachedUv, ${y});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,f.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${v.result};
					${x}
					`)}if(f.push(n.code,"	vec3 diffuseColor = "+n.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",s.code,"	float metalnessFactor = "+s.result+";"),this.roughnessMap){let m=this.roughnessMap.texture.flow(e,"t"),v=this.roughnessMap.flow(e,"v3"),y="";this.roughnessMap.projection.value===4?y=`
					float roughnessChange = 1.0;
					{
						vec2 uv0 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						float r0 = luminance(texture(${m.result}, uv0).rgb) * roughnessScale;
						float r1 = luminance(texture(${m.result}, uv1).rgb) * roughnessScale;
						float r2 = luminance(texture(${m.result}, uv2).rgb) * roughnessScale;

						roughnessChange = (r0 * weights.z + r1 * weights.x + r2 * weights.y);
					}
					float roughnessFactor = roughnessChange * ${a.result};
					`:y=`
					vec2 roughnessMapCachedUv = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs;

					vec4 vals = texture(${m.result},  roughnessMapCachedUv);
					float roughnessFactor = luminance(vals.rgb) * ${a.result};
					`,f.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${v.result};

					const float roughnessScale = 1.0;

					${y}
				`)}else f.push(a.code,"	float roughnessFactor = "+a.result+";");u&&f.push(u.code,"#ifdef ALPHATEST","	if ( "+u.result+" <= ALPHATEST ) discard;","#endif"),f.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),f.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),h?f.push(h.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+h.result+" ) ), diffuseColor, metalnessFactor );"):f.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),f.push("#include <lights_fragment_begin>"),f.push("#include <lights_fragment_end>"),f.push("vec3 ao = aoEnabled && "+r.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular;");let p="1.0";this.mask&&(this.mask.analyze(e),p=`luminance(${this.mask.flow(e,"v3").result})`),f.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * ${p} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result} * ${p}, ${l.result} );
					
					outgoingLight *= ao;
				}
				`),c&&f.push(c.code,`outgoingLight = spe_blend(outgoingLight, ${c.result}, 1.0, SPE_BLENDING_NORMAL);`),u?f.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${u.result} );`):f.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),d&&f.push(`gl_FragColor.a *= ${d.result};`),f.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=f.join(`
`)}return t}},Q3e=class extends Fn{constructor(){super("toon"),this.nodeType="Toon",this.color=new an(Qs),this.specular=new an(1118481),this.shininess=new Bt(30),this.previousModelViewMatrix=new wc,this.previouseProjectionMatrix=new wc,this.shadingAlpha=new Bt(1),this.shadingBlend=new _r(0)}get category(){return"toon"}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:ni.frameIndex}),e.mergeUniform({resolution:ni.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Uv.merge([At.fog,At.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:ni.penumbraSize}),e.mergeUniform({frameIndex:ni.frameIndex}),e.mergeUniform({aoMap:ni.aoRenderTarget}),e.mergeUniform({aoEnabled:ni.aoEnabled}),this.color===void 0&&(this.color=new an(Qs)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),r=this.specular.flow(e,"c"),n=this.shininess.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),s=this.shadingBlend.flow(e,"i"),o=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let u=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];if(this.bumpMap){e.include(_v.dHdxy),e.include(_v.perturbNormalArb);let h=this.bumpMap.texture.flow(e,"t"),f=this.bumpMap.flow(e,"v3"),p=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",m="";this.bumpMap.projection.value===4?m=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${h.result}, uv0, ${p});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${h.result}, uv1, ${p});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${h.result}, uv2, ${p});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:m=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${h.result}, bumpMapCachedUv, ${p});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,u.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${f.result};
					${m}
					`)}u.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",r.code,"	vec3 specular = "+r.result+";",n.code,"	float shininess = max( 0.0001, "+n.result+" );","	float specularStrength = 1.0;"),l&&u.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),u.push("material.diffuseColor = diffuseColor;"),u.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),u.push("vec3 ao = aoEnabled ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * ao) + reflectedLight.directSpecular;");let d="1.0";this.mask&&(this.mask.analyze(e),d=`luminance(${this.mask.flow(e,"v3").result})`),u.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * ${d} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result} * ${d}, ${s.result} );
				}
				`),o&&u.push(o.code,`outgoingLight = spe_blend(outgoingLight, ${o.result}, 1.0, SPE_BLENDING_NORMAL);`),l?u.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c&&u.push(`gl_FragColor.a *= ${c.result};`),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=u.join(`
`)}return t}},J3e=class{constructor(e=1e3*10){this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...e){}remove(e){let t=this.cache.get(e);t&&(this.dispose(e,t.data),this.cache.delete(e),t.prev.next=t.next,t.next.prev=t.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),t=this.head.next;for(;t.time<e-this.timeout;)this.dispose(t.src,t.data),this.cache.delete(t.src),t=t.next,t.prev=this.head,this.head.next=t;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(e){var t;return(t=this.cache.get(e))==null?void 0:t.data}load(e){let t=Date.now(),i=this.cache.get(e);return i===void 0?(i={data:this.create(e),src:e,time:t,next:null,prev:null},this.cache.set(e,i)):(i.time=t,i.prev.next=i.next,i.next.prev=i.prev),i.prev=this.tail.prev,i.next=this.tail,this.tail.prev.next=i,this.tail.prev=i,this.scheduleCleanup(),i.data}},eCe=class extends J3e{create(e){return URL.createObjectURL(new Blob([e]))}dispose(e,t){URL.revokeObjectURL(t)}},$C;function tCe(e){return typeof e=="string"?e:($C||($C=new eCe),$C.load(e))}var iCe=class{constructor(e,t){this.data=e,this.cache=t,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},rCe=class{constructor(){this.cache=new Map}remove(e){this.cache.delete(e.data)}load(e){let t=this.cache.get(e);return t===void 0&&(t=this.create(e),this.cache.set(e,t)),t.refCount+=1,t}},l$=class extends iCe{constructor(e,t){super(e,t.imageHolderCache),this.data=e,this.shared=t,this.loaded=!1,this.isVideo=!1,this.isBuffer=!1,this._cache={1e3:{},1001:{},1002:{}},this.isVideo=e.type==="video",this.isBuffer=e.isWebGLRenderTarget===!0,this.loadPromise=this.updateSrc(this.isBuffer?e:e.data)}async updateSrc(e){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let t=()=>{this.loaded=!0;for(let r of Object.values(this._cache))for(let n of Object.values(r))for(let a of Object.values(n))a&&(a.image=this.img,a.needsUpdate=!0);this.shared.requestRender()};if(this.isBuffer)this.img=e,this.loaded=!0;else if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof e!="string"){var i=new FileReader;i.readAsDataURL(new Blob([e],{type:"video/mp4"}));let r;await new Promise(n=>{i.onloadend=a=>{var s;r=(s=a.target)==null?void 0:s.result,n(null)}}),this.img.src=r}else this.img.src=e;this.img.onloadeddata=()=>{t()}}else this.img=new Image,this.img.src=tCe(e),this.img.onload=t,await new Promise(r=>{this.img.onload=()=>{t(),r(null)}})}getTexture(e,t=1008,i=1006){var n,a;let r=(a=(n=this._cache[e])==null?void 0:n[t])==null?void 0:a[i];if(r)return r;{let s;return this.isBuffer?s=this.img.texture:this.isVideo?s=new _fe(this.img,void 0,e,e):s=new Kr(this.img,void 0,e,e,i,t),this.loaded&&(s.needsUpdate=!0),this._cache[e]===void 0&&(this._cache[e]={}),this._cache[e][t]===void 0&&(this._cache[e][t]={}),this._cache[e][t][i]=s,s}}setNeedsUpdate(e){for(let t of Object.values(this._cache))for(let i of Object.values(t))for(let r of Object.values(i))r&&(r.needsUpdate=e)}disposeTextures(){for(let[e,t]of Object.entries(this._cache))for(let[i,r]of Object.entries(t))for(let[n,a]of Object.entries(r))a==null||a.dispose(),this._cache[e]!==void 0&&this._cache[e][i]!==void 0&&(this._cache[e][i][n]=void 0)}dispose(){super.dispose(),this.disposeTextures()}},Od=class extends l${};function nCe(e,t){var i=lCe(t);return i.formatToParts?sCe(i,e):oCe(i,e)}var aCe={year:0,month:1,day:2,hour:3,minute:4,second:5};function sCe(e,t){try{for(var i=e.formatToParts(t),r=[],n=0;n<i.length;n++){var a=aCe[i[n].type];a>=0&&(r[a]=parseInt(i[n].value,10))}return r}catch(s){if(s instanceof RangeError)return[NaN];throw s}}function oCe(e,t){var i=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(i);return[r[3],r[1],r[2],r[4],r[5],r[6]]}var ZC={};function lCe(e){if(!ZC[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),i=t==="06/25/2014, 00:00:00"||t==="06/25/2014 00:00:00";ZC[e]=i?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return ZC[e]}function c$(e,t,i,r,n,a,s){var o=new Date(0);return o.setUTCFullYear(e,t,i),o.setUTCHours(r,n,a,s),o}var PL=36e5,cCe=6e4,qC={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function u$(e,t,i){var r,n;if(!e||(r=qC.timezoneZ.exec(e),r))return 0;var a;if(r=qC.timezoneHH.exec(e),r)return a=parseInt(r[1],10),DL(a)?-(a*PL):NaN;if(r=qC.timezoneHHMM.exec(e),r){a=parseInt(r[1],10);var s=parseInt(r[2],10);return DL(a,s)?(n=Math.abs(a)*PL+s*cCe,a>0?-n:n):NaN}if(hCe(e)){t=new Date(t||Date.now());var o=i?t:uCe(t),l=AM(o,e),c=i?l:dCe(t,l,e);return-c}return NaN}function uCe(e){return c$(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function AM(e,t){var i=nCe(e,t),r=c$(i[0],i[1]-1,i[2],i[3]%24,i[4],i[5],0).getTime(),n=e.getTime(),a=n%1e3;return n-=a>=0?a:1e3+a,r-n}function dCe(e,t,i){var r=e.getTime(),n=r-t,a=AM(new Date(n),i);if(t===a)return t;n-=a-t;var s=AM(new Date(n),i);return a===s?a:Math.max(a,s)}function DL(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var IL={};function hCe(e){if(IL[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),IL[e]=!0,!0}catch{return!1}}var fCe=_h(coe(),1),OL=_h(uoe(),1),pCe=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,mCe=pCe,YC=36e5,RL=6e4,vCe=2,ls={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:mCe};function gCe(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var i={},r=i.additionalDigits==null?vCe:(0,fCe.default)(i.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var n=yCe(e),a=bCe(n.date,r),s=a.year,o=a.restDateString,l=wCe(o,s);if(isNaN(l))return new Date(NaN);if(l){var c=l.getTime(),u=0,d;if(n.time&&(u=xCe(n.time),isNaN(u)))return new Date(NaN);if(n.timeZone||i.timeZone){if(d=u$(n.timeZone||i.timeZone,new Date(c+u)),isNaN(d))return new Date(NaN)}else d=(0,OL.default)(new Date(c+u)),d=(0,OL.default)(new Date(c+u+d));return new Date(c+u+d)}else return new Date(NaN)}function yCe(e){var t={},i=ls.dateTimePattern.exec(e),r;if(i?(t.date=i[1],r=i[3]):(i=ls.datePattern.exec(e),i?(t.date=i[1],r=i[2]):(t.date=null,r=e)),r){var n=ls.timeZone.exec(r);n?(t.time=r.replace(n[1],""),t.timeZone=n[1].trim()):t.time=r}return t}function bCe(e,t){var i=ls.YYY[t],r=ls.YYYYY[t],n;if(n=ls.YYYY.exec(e)||r.exec(e),n){var a=n[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(n=ls.YY.exec(e)||i.exec(e),n){var s=n[1];return{year:parseInt(s,10)*100,restDateString:e.slice(s.length)}}return{year:null}}function wCe(e,t){if(t===null)return null;var i,r,n,a;if(e.length===0)return r=new Date(0),r.setUTCFullYear(t),r;if(i=ls.MM.exec(e),i)return r=new Date(0),n=parseInt(i[1],10)-1,LL(t,n)?(r.setUTCFullYear(t,n),r):new Date(NaN);if(i=ls.DDD.exec(e),i){r=new Date(0);var s=parseInt(i[1],10);return CCe(t,s)?(r.setUTCFullYear(t,0,s),r):new Date(NaN)}if(i=ls.MMDD.exec(e),i){r=new Date(0),n=parseInt(i[1],10)-1;var o=parseInt(i[2],10);return LL(t,n,o)?(r.setUTCFullYear(t,n,o),r):new Date(NaN)}if(i=ls.Www.exec(e),i)return a=parseInt(i[1],10)-1,BL(t,a)?kL(t,a):new Date(NaN);if(i=ls.WwwD.exec(e),i){a=parseInt(i[1],10)-1;var l=parseInt(i[2],10)-1;return BL(t,a,l)?kL(t,a,l):new Date(NaN)}return null}function xCe(e){var t,i,r;if(t=ls.HH.exec(e),t)return i=parseFloat(t[1].replace(",",".")),KC(i)?i%24*YC:NaN;if(t=ls.HHMM.exec(e),t)return i=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")),KC(i,r)?i%24*YC+r*RL:NaN;if(t=ls.HHMMSS.exec(e),t){i=parseInt(t[1],10),r=parseInt(t[2],10);var n=parseFloat(t[3].replace(",","."));return KC(i,r,n)?i%24*YC+r*RL+n*1e3:NaN}return null}function kL(e,t,i){t=t||0,i=i||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var n=r.getUTCDay()||7,a=t*7+i+1-n;return r.setUTCDate(r.getUTCDate()+a),r}var _Ce=[31,28,31,30,31,30,31,31,30,31,30,31],SCe=[31,29,31,30,31,30,31,31,30,31,30,31];function d$(e){return e%400===0||e%4===0&&e%100!==0}function LL(e,t,i){if(t<0||t>11)return!1;if(i!=null){if(i<1)return!1;var r=d$(e);if(r&&i>SCe[t]||!r&&i>_Ce[t])return!1}return!0}function CCe(e,t){if(t<1)return!1;var i=d$(e);return!(i&&t>366||!i&&t>365)}function BL(e,t,i){return!(t<0||t>52||i!=null&&(i<0||i>6))}function KC(e,t,i){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||i!=null&&(i<0||i>=60))}function ECe(e,t,i){var r=gCe(e,i),n=u$(t,r,!0),a=new Date(r.getTime()-n),s=new Date(0);return s.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),s.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),s}function us(e,t){return t.color(e)}function NL(e=new Date,t){let i=t.format,r=e.getSeconds(),n=e;t&&t.timeZone!==null&&(n=ECe(new Date,t.timeZone));let a=n.getHours(),s=n.getMinutes(),o;t.format12h24h==="12ampm"&&(o=a>=12?"PM":"AM");let l=a;t.format12h24h!=="24"&&(l=a%12,l===0&&(l=12));let c,u;switch(i){case"HH:mm:ss":c=[l,s,r];break;case"HH:mm":c=[l,s];break;case"HH":c=[l],o=void 0;break;case"mm":c=[s],o=void 0;break;case"ss":c=[r],o=void 0;break;case"year":u=n.getFullYear();break;case"month":u=n.getMonth()+1;break;case"dayOfYear":u=Math.floor((n.getTime()-new Date(n.getFullYear(),0,0).getTime())/864e5);break;case"dayOfMonth":u=n.getDate();break;case"secondOfDay":u=a*60*60+s*60+r;break;default:console.error("Unknown time format",i),u=0;break}return c!==void 0?{textValue:c,suffix:o}:u}function ACe(e,t){switch(e.type){case"fresnel":return PCe(e,t);case"gradient":return DCe(e,t);case"depth":return ICe(e,t);case"normal":return OCe(e,t);case"noise":return RCe(e,t);case"rainbow":return kCe(e,t);case"toon":return LCe(e,t);case"outline":return BCe(e,t);case"transmission":return NCe(e,t);case"color":return TCe(e,t);case"pattern":return FCe(e,t)}}function MCe(e){return{type:e.type}}function Dl(e,t){let{alpha:i,mode:r,isMask:n}=e,a=typeof i=="string"?(Number(t.getVariable(i))??100)/100:i;return{...MCe(e),alpha:a,mode:r,isMask:n}}function TCe(e,t){return{...Dl(e,t),color:us(e.color,t)}}function PCe(e,t){let{bias:i,scale:r,intensity:n,factor:a,color:s}=e;return{...Dl(e,t),color:us(s,t),bias:i,scale:r,intensity:n,factor:a}}function DCe(e,t){let{gradientType:i,smooth:r,colors:n,steps:a,angle:s,offset:o,morph:l}=e;return{...Dl(e,t),gradientType:i,smooth:r,colors:n.map(c=>new vi(c[0],c[1],c[2],c[3])),num:n.length,steps:a,offset:new Pe(...o),morph:new Pe(...l),angle:s}}function ICe(e,t){let{gradientType:i,near:r,far:n,isVector:a,isWorldSpace:s,origin:o,direction:l,colors:c,steps:u,smooth:d}=e;return{...Dl(e,t),gradientType:i,near:r,far:n,isVector:a,isWorldSpace:s,origin:new H(...o),direction:l?new H(...l):new H(1,0,0),colors:c.map(h=>h!==void 0?new vi(h[0],h[1],h[2],h[3]):new vi(0,0,0,0)),steps:u.slice(0,c.length),smooth:d}}function OCe(e,t){let{cnormal:i}=e;return{...Dl(e,t),cnormal:new H(i[0],i[1],i[2])}}function RCe(e,t){return{...Dl(e,t),scale:e.scale,move:e.move,fA:new Pe(...e.fA),fB:new Pe(...e.fB),size:new H(...e.size),distortion:new Pe(...e.distortion),colorA:us(e.colorA,t),colorB:us(e.colorB,t),colorC:us(e.colorC,t),colorD:us(e.colorD,t),noiseType:e.noiseType,voronoiStyle:e.voronoiStyle,highCut:e.highCut,lowCut:e.lowCut,smoothness:e.smoothness,seed:e.seed,quality:e.quality}}function kCe(e,t){return{...Dl(e,t),filmThickness:e.filmThickness,movement:e.movement,wavelengths:new H(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new H(...e.offset)}}function LCe(e,t){return{...Dl(e,t),positioning:e.positioning,colors:e.colors.map(i=>new vi(i[0],i[1],i[2],i[3])),num:e.colors.length,steps:e.steps,source:new H(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:us(e.shadowColor,t),offset:new H(...e.offset)}}function BCe(e,t){return{...Dl(e,t),outlineColor:us(e.outlineColor,t),contourColor:us(e.contourColor,t),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:new H(...e.contourDirection),positionalLines:e.positionalLines,compensation:e.compensation}}function NCe(e,t){return{...Dl(e,t),thickness:e.thickness,ior:e.ior,roughness:e.roughness}}function FCe(e,t){return{...Dl(e,t),style:e.style,projection:e.projection,axis:e.axis,blending:e.blending,offset:new Pe(...e.offset),colorA:us(e.colorA,t),colorB:us(e.colorB,t),frequency:new Pe(...e.frequency),size:e.size,variation:e.variation,smoothness:e.smoothness,zigzag:e.zigzag,rotation:e.rotation,vertical:new Pe(...e.vertical),horizontal:new Pe(...e.horizontal),sides:e.sides}}var Ux=class extends Ea{},zCe={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],light:["roughnessMap","bumpMap"],depth:["smooth","isWorldSpace","gradientType","isVector"],pattern:["style","projection","axis"]},VCe={depth:["colors"]};function UCe(e,t,i){var a,s;if(t==="isMask")return!0;let r=zCe[e.type],n=VCe[e.type];if(n!==void 0){let o=e.color;if(n.includes(t)){let l=(s=(a=o[t])==null?void 0:a.value)==null?void 0:s.length;if(l!==void 0&&l!==i.length)return!0}}return r!==void 0?r.includes(t):!1}function h$(e,t,i){let r=i.uniforms[`f${i.id}_texture`];if(!r)return!1;let n=!1,a=e;if("image"in a){let s=a.image,o=t.image(s),l=r;l.image instanceof Od||l.image.deref(),l.image=o}if("video"in a){let s=a.video,o=t.video(s),l=r;l.image instanceof Od||l.image.deref(),l.image=o}if("wrapping"in a){let s=r;s.wrap=a.wrapping}if("minFilter"in a){let s=r;s.minFilter=a.minFilter}if("magFilter"in a){let s=r;s.magFilter=a.magFilter}if("rotation"in a&&i.uniforms[`f${i.id}_rotation`])return i.uniforms[`f${i.id}_rotation`].value=(a.rotation??0)*kt.DEG2RAD,n;if("repeat"in a||"offset"in a||"rotation"in a){let s="mat",o=i.uniforms[`f${i.id}_${s}`];"repeat"in a&&(o.repeat=a.repeat),"offset"in a&&(o.offset=a.offset),"rotation"in a&&(o.rotation=a.rotation??0),o.updateMatrix()}return n}function HCe(e,t,i,r){let n=!1;for(let[a,s]of Object.entries(e)){if(a==="bumpMap"||a==="roughnessMap"){n=!0;continue}if(!a||s===void 0)continue;if(p$(a,i,r,t)){a==="visible"&&i.type==="light"&&(n=!0);continue}i.visible=r.visible;let o=i.uniforms[`f${i.id}_${a}`];if(o&&!(o instanceof QP))switch(n=n||UCe(i,a,s),o.constructor){case an:if(typeof s=="string"){let l=t.getColor(s);l&&(o.value=l);break}else{let l=s;o.value instanceof Ux?o.value=new Ea(l.r,l.g,l.b,l.a):o.setRGBA(l);break}case nu:if(typeof s=="string"){let l=t.getColor(s);l&&(o.value=l);break}else{let l=s;o.value instanceof Ux?o.value=new Ea(l.r,l.g,l.b,l.a):o.value.setRGBA(l.r,l.g,l.b,l.a);break}case va:{let l=s;o.value.setX(l[0]),o.value.setY(l[1]);break}case po:{let l=s;o.value.setX(l[0]),o.value.setY(l[1]),o.value.setZ(l[2]);break}case fu:{h$(s,t,i);break}case tf:{o.value=s.map(l=>new vi(...l));break}default:{o.value=s;break}}}return n}var Gf=(e,t,i)=>Math.max(0,Math.min(1,Number(t.getVariable(typeof e=="number"?e*100:e,i)??100)/100))??1,dy=class{constructor(e,t,i,r,n){this.id=e,this.uuid=t,this.data=i,this.uniforms={};for(let a in r)this.uniforms[`f${this.id}_${a}`]=r[a];for(let a in i)p$(a,this,i,n)}get type(){return this.data.type}static create(e,t,i,r){if(i.type==="light")return ec.createLightLayer(e,t,i,r);if(i.type==="texture"||i.type==="video"){let n=i.type==="texture"?r.uiBuffer(i.texture.image)??r.image(i.texture.image):r.video(i.texture.video),a=new SM(n,i.texture.wrapping,i.texture.minFilter??1008,i.texture.magFilter??1006),s=new W3e(n),o=new G3e(i.texture.repeat,i.texture.offset,i.texture.rotation??0),l=new Bt(i.crop?1:0),c=new _r(i.projection??0),u=new _r(["x","y","z"].indexOf(i.axis)??0),d=new _r(i.side??0),h=new va(i.size?new Pe(i.size[0],i.size[1]):new Pe(100,100)),f=new Bt(i.blending??0),p=new Bt(Gf(i.alpha,r)),m=new _r(i.mode??0),v=new os(i.isMask??!1),y=new JP(a,s,l,c,u,d,h,f,o,p,m,v),x=new Lr(y.calpha,"f");return new tn(e,t,i,{texture:a,textureSize:s,crop:l,projection:c,axis:u,side:d,size:h,blending:f,mat:o,alpha:p,mode:m,isMask:v},y,m,x,v,r)}else if(i.type==="matcap"){let n=r.image(i.texture.image),a=new SM(n,i.texture.wrapping,i.texture.minFilter??1008,i.texture.magFilter??1006),s=new Bt(Gf(i.alpha,r)),o=new _r(i.mode??0),l=new os(i.isMask??!1),c=new Bt((i.texture.rotation??0)*kt.DEG2RAD),u=new qG(a,s,o,l,c),d=new Lr(u.calpha,"f");return new tn(e,t,i,{texture:a,alpha:s,mode:o,isMask:l,rotation:c},u,o,d,l,r)}else if(i.type==="displace")if(i.displacementType==="noise"){let n=new po(new H(...i.offset)),a=new Bt(i.scale??10),s=new Bt(i.intensity??8),o=new Bt(i.movement??1),l=new _r(i.noiseType??0),c=new _r(i.voronoiStyle??0),u=new Bt(i.smoothness??.5),d=new Bt(i.seed??0),h=new Bt(i.highCut??1),f=new Bt(i.lowCut??0),p=new _r(i.quality??1),m=new s$(s,o,n,c,u,d,h,f,p,a,l);return new f$(e,t,i,{offset:n,scale:a,intensity:s,movement:o,noiseType:l,voronoiStyle:c,smoothness:u,seed:d,highCut:h,lowCut:f,quality:p},m,r)}else throw new Error;else return GCe(e,t,i,r)}updateByOp(e,t,i){let r=e;if(r.path[0]===void 0){if(r.type===0)return"type"in r.props||"category"in r.props||"visible"in r.props||"noiseType"in r.props?(i.scene.markNeedsUpdateRendererDirty(),!0):HCe(r.props,i.shared,this,t)}else if(r.path[0]==="texture")return"texture"in t||"video"in t?h$(r.props,i.shared,this):!0;return!1}dispose(){if(jCe(this)){let e=this.uniforms[`f${this.id}_texture`];if(!e)return!1;let t=e;t.image instanceof Od||t.image.deref()}}hasValueByKey(e){return this.uniforms[e]!==void 0}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,t){let i=`f${this.id}_${e}`;this.hasValueByKey(i)&&t!==void 0&&(this.uniforms[i].value=t)}getNode(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t]}getValue(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t].value}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let t in this.uniforms){let i=this.getName(t);i&&e.push(i)}return e}},tn=class extends dy{constructor(e,t,i,r,n,a,s,o,l){super(e,t,i,r,l),this.params=r,this.color=n,this.mode=a,this.alpha=s,this.isMask=o}},f$=class extends dy{constructor(e,t,i,r,n,a){super(e,t,i,r,a),this.position=n}},ec=class extends dy{constructor(e,t,i,r,n,a){super(e,t,i,n,a),this.node=r}static createLightLayer(e,t,i,r){let n,a=new Bt(Gf(i.alpha,r)),s=new _r(i.mode),o=new Bt(i.bumpMapIntensity),l=new Bt(Gf(i.alphaOverride,r)),c;if(!i.visible)n=new tD,c={};else if(i.category==="lambert"){n=new Y3e;let u=new an(r.color(i.emissive)??0),d=new os(i.occlusion??!0);c={emissive:u,occlusion:d},n.emissive=u,n.occlusion=d}else if(i.category==="toon"){n=new Q3e;let u=new Bt(i.shininess??30),d=new an(r.color(i.specular)??1118481);c={shininess:u,specular:d},n.shininess=u,n.specular=d}else if(i.category==="physical"){n=new X3e;let u=new Bt(i.roughness??.3),d=new Bt(i.metalness??0),h=new Bt(i.reflectivity??.5),f=new os(i.occlusion??!0);c={roughness:u,metalness:d,reflectivity:h,occlusion:f},n.roughness=u,n.metalness=d,n.reflectivity=h,n.occlusion=f}else{n=new K3e;let u=new Bt(i.shininess??30),d=new an(i.specular!==void 0?r.color(i.specular)??1118481:1118481),h=new os(i.occlusion??!0);c={shininess:u,specular:d,occlusion:h},n.shininess=u,n.specular=d,n.occlusion=h}return n.alpha=new Bt(1),n.shadingAlpha=a,n.shadingBlend=s,n.bumpMapIntensity=o,n.alphaOverride=l,c.alpha=n.shadingAlpha,c.mode=n.shadingBlend,c.bumpMapIntensity=n.bumpMapIntensity,c.alphaOverride=n.alphaOverride,new ec(e,t,i,n,c,r)}get category(){return this.node.category}};function jCe(e){let t=e instanceof dy?e.type:e;return t==="texture"||t==="video"||t==="displace_map"||t==="matcap"}function lo(e){return{alpha:new Bt(e.alpha??1),mode:new _r(e.mode??0),isMask:new os(e.isMask??!1)}}function WCe(e,t,i,r,n){switch(e.type){case"color":{let a=new an(r.color??Qs),s=lo(r),o=new CM(a,s.alpha),l=new Lr(o.calpha,"f");return new tn(t,i,e,{color:a,...s},o,s.mode,l,s.isMask,n)}case"fresnel":{let a=new an(r.color??16777215),s=new Bt(r.bias??.1),o=new Bt(r.scale??1),l=new Bt(r.intensity??2),c=new Bt(r.factor??1),u=lo(r),d=new $3e(a,s,o,l,c,u.alpha,u.mode,u.isMask),h=new Lr(d.calpha,"f");return new tn(t,i,e,{color:a,bias:s,scale:o,intensity:l,factor:c,...u},d,u.mode,h,u.isMask,n)}case"rainbow":{let a=new Bt(r.filmThickness??30),s=new Bt(r.movement??0),o=new po(r.wavelengths??new H(0,0,0)),l=new Bt(r.noiseStrength??0),c=new Bt(r.noiseScale??1),u=new po(r.offset??new H(0,0,0)),d=lo(r),h=new e$(a,s,o,l,c,u,d.alpha,d.isMask),f=new Lr(h.calpha,"f");return new tn(t,i,e,{filmThickness:a,movement:s,wavelengths:o,noiseStrength:l,noiseScale:c,offset:u,...d},h,d.mode,f,d.isMask,n)}case"transmission":{let a=new Bt(r.thickness??10),s=new Bt(r.ior??1.5),o=new Bt(r.roughness??.5),l=ni.transmissionSize,c=ni.transmissionRenderTarget,u=ni.transmissionRenderTargetDepth,d=window.innerWidth,h=window.innerHeight,f=d>=h?new va(h/d,1):new va(1,d/h),p=lo(r),m=new n$(a,s,o,l,c,u,f,p.alpha),v=new Lr(m.calpha,"f");return new tn(t,i,e,{thickness:a,ior:s,roughness:o,aspectRatio:f,...p},m,p.mode,v,p.isMask,n)}case"toon":{let a=new _r(r.positioning??0),s;r.colors?s=new tf(r.colors.length,r.colors):(s=new tf(10,new vi(0,0,0,1)),s.value[1]=new vi(1,1,1,1));let o;r.steps?o=new ef(r.steps.length,r.steps):(o=new ef(10,1),o.value[0]=0);let l=new po(r.source??new H(0,0,0)),c=new os(r.isWorldSpace??!0),u=new Bt(r.noiseStrength??0),d=new Bt(r.noiseScale??1),h=new nu(r.shadowColor),f=new po(r.offset??new H(0,0,0)),p=lo(r),m=new i$(a,s,o,l,c,u,d,h,f,p.alpha),v=new Lr(m.calpha,"f");return new tn(t,i,e,{positioning:a,colors:s,steps:o,source:l,isWorldSpace:c,noiseStrength:u,noiseScale:d,shadowColor:h,offset:f,...p},m,p.mode,v,p.isMask,n)}case"outline":{let a=new an(r.outlineColor??16777215),s=new an(r.contourColor??16777215),o=new Bt(r.outlineWidth??.1),l=new Bt(r.contourWidth??.1),c=new Bt(r.outlineThreshold??.1),u=new Bt(r.contourThreshold??.1),d=new Bt(r.outlineSmoothing??.1),h=new Bt(r.contourFrequency??.1),f=new po(r.contourDirection??new H(0,1,0)),p=new os(r.positionalLines??!1),m=new os(r.compensation??!0),v=ni.normalRenderTarget,y=ni.normalRenderTargetDepth,x=ni.pixelRatioNode,b=ni.resolution,w=lo(r),S=new XG(a,s,o,l,c,u,d,h,f,p,m,b,v,y,x,w.alpha),_=new Lr(S.calpha,"f");return new tn(t,i,e,{outlineColor:a,contourColor:s,outlineWidth:o,contourWidth:l,outlineThreshold:c,contourThreshold:u,outlineSmoothing:d,contourFrequency:h,contourDirection:f,positionalLines:p,compensation:m,...w},S,w.mode,_,w.isMask,n)}case"depth":{let a=new _r(r.gradientType??0),s=new os(r.smooth??!1),o=new Bt(r.near??50),l=new Bt(r.far??200),c=new Bt(r.isVector??1),u=new Bt(r.isWorldSpace??0),d=new po(r.origin??new H),h=new po(r.direction??new H),f;r.colors?f=new tf(r.colors.length,r.colors):(f=new tf(2,new vi(0,0,0,1)),f.value[1]=new vi(1,1,1,1));let p;r.steps?p=new ef(r.steps.length,r.steps):(p=new ef(2,1),p.value[0]=0);let m=lo(r),v=new WG(a,s,o,l,c,u,d,h,f,p,m.alpha,m.isMask),y=new Lr(v.calpha,"f");return new tn(t,i,e,{gradientType:a,smooth:s,near:o,far:l,isVector:c,isWorldSpace:u,origin:d,direction:h,colors:f,steps:p,...m},v,m.mode,y,m.isMask,n)}case"noise":{let a=new Bt(r.scale??1),s=new po(r.size??new H(100,100,100)),o=new Bt(r.move??1),l=new va(r.fA??new Pe(1.7,9.2)),c=new va(r.fB??new Pe(8.3,2.8)),u=new va(r.distortion??new Pe(1,1)),d=new nu(r.colorA),h=new nu(r.colorB),f=new nu(r.colorC),p=new nu(r.colorD),m=new _r(r.noiseType??0),v=new _r(r.voronoiStyle??0),y=new Bt(r.highCut??1),x=new Bt(r.lowCut??0),b=new Bt(r.smoothness??.5),w=new Bt(r.seed??.5),S=new _r(r.quality??1),_=lo(r),E=new YG(a,s,o,l,c,u,d,h,f,p,_.alpha,m,_.isMask,v,y,x,b,w,S),C=new Lr(E.calpha,"f");return new tn(t,i,e,{scale:a,size:s,move:o,fA:l,fB:c,distortion:u,colorA:d,colorB:h,colorC:f,colorD:p,noiseType:m,..._,voronoiStyle:v,highCut:y,lowCut:x,smoothness:b,seed:w,quality:S},E,_.mode,C,_.isMask,n)}case"normal":{let a=new po(r.cnormal??new H(1,1,1)),s=lo(r),o=new jG(a,s.alpha),l=new Lr(o.calpha,"f");return new tn(t,i,e,{cnormal:a,...s},o,s.mode,l,s.isMask,n)}case"gradient":{let a=new _r(r.gradientType??0),s=new os(r.smooth??!1),o;r.colors?o=new tf(r.colors.length,r.colors):(o=new tf(10,new vi(0,0,0,1)),o.value[1]=new vi(1,1,1,1));let l;r.steps?l=new ef(r.steps.length,r.steps):(l=new ef(10,1),l.value[0]=0);let c=new va(r.offset??new Pe(0,0)),u=new va(r.morph??new Pe(0,0)),d=new Bt(r.angle??0),h=lo(r),f=new $G(a,s,o,l,c,u,d,h.alpha,h.isMask),p=new Lr(f.calpha,"f");return new tn(t,i,e,{gradientType:a,smooth:s,colors:o,steps:l,offset:c,morph:u,angle:d,...h},f,h.mode,p,h.isMask,n)}case"pattern":{let a=new _r(r.style??0),s=new _r(r.projection??0),o=new _r(["x","y","z"].indexOf(r.axis)??0),l=new Bt(r.blending??0),c=new va(r.offset??new Pe(0,0)),u=new nu(r.colorA),d=new nu(r.colorB),h=new va(r.frequency??new Pe(10,10)),f=new Bt(r.size??.5),p=new Bt(r.variation??0),m=new Bt(r.smoothness??.5),v=new Bt(r.zigzag??0),y=new Bt(r.rotation??0),x=new va(r.vertical??new Pe(0,1)),b=new va(r.horizontal??new Pe(0,1)),w=new _r(r.sides??6),S=lo(r),_=new QG(a,s,o,l,c,u,d,h,f,p,m,v,y,x,b,w,S.alpha,S.isMask),E=new Lr(_.calpha,"f");return new tn(t,i,e,{style:a,projection:s,axis:o,blending:l,offset:c,colorA:u,colorB:d,frequency:h,size:f,variation:p,smoothness:m,zigzag:v,rotation:y,vertical:x,horizontal:b,sides:w,...S},_,S.mode,E,S.isMask,n)}default:{let a=new an(1,0,0,1),s=lo(r),o=new CM(a,s.alpha),l=new Lr(o.calpha,"f");return new tn(t,i,e,{color:a,...s},o,s.mode,l,s.isMask,n)}}}function GCe(e,t,i,r){let n=ACe(i,r);return WCe(i,e,t,n,r)}function p$(e,t,i,r){if(i.type==="displace"&&(e==="intensity"||e==="visible")){let n=t.uniforms[`f${t.id}_intensity`];return n?(n.value=i.intensity*(i.visible?1:0),n):void 0}if(i.type!=="displace"&&(e==="alpha"||e==="visible")){let n=t.uniforms[`f${t.id}_alpha`];if(!n)return;if(n.value=Gf(i.alpha,r)*(i.visible?1:0),i.type==="outline"&&e==="visible"){let a=t.uniforms[`f${t.id}_compensation`];a&&(a.value=i.compensation&&i.visible)}return n}}function Cm(e,t){let i=0,r=e.layers.find(n=>n.data.type==="light");if(r){let n=r.data,a=Number(t.getVariable(n.alphaOverride));if((typeof n.alphaOverride=="string"?a/100:n.alphaOverride)<1)return!0}for(let n of e.layers){if(n.data.type!=="displace"&&n.data.isMask)return!0;if(n.data.type!=="displace"&&"alpha"in n.data&&n.data.type!=="light"&&n.data.type!=="fresnel"&&n.data.type!=="texture"&&n.data.type!=="matcap"&&n.data.type!=="rainbow"&&n.data.type!=="outline"&&n.data.type!=="pattern"){let a=n.data.visible?n.data.alpha:0;if(typeof a=="string"&&(a=Math.max(0,Math.min(1,Number(t.getVariable(a)??100)/100))),a===1&&n.data.type==="depth"||n.data.type==="gradient"){for(let s of n.data.colors)if(s[3]<1){a=s[3];break}}else if(a===1&&n.data.type==="noise"){let s=t.color(n.data.colorA).a,o=t.color(n.data.colorB).a,l=t.color(n.data.colorC).a,c=t.color(n.data.colorD).a,u=Math.min(s,Math.min(o,Math.min(l,c)));u<1&&(a=u)}i+=(1-i)*a}}return i<1}var lh=class extends er{constructor(){super(void 0),this.flatShading=!1,this.needsJitter=!0,this.nodeContextUuid=0,this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return""}},$Ce=class extends lh{constructor(e,t,i,r){super(),this.flatShading=e,this.side=t,this.wireframe=i,this.root=r}updateAfterBuild(){let e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(e,t){this.root.onBeforeCompile(e)}get data(){return this.root.data}get category(){return this.root.category}get hasAO(){return this.root.hasAO}getFlavor(e,t,i){return this.root.getFlavor(e,t,i)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(e){return this.root.getLayersOfType(e)}getLayerByUuid(e){return this.root.getLayerByUuid(e)}updateByOp(e,t,i){this.root.updateByOp(e,t,i)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},iD=class extends lh{constructor(e,t,i=!0){super(),this.data=e,this.allowVariableSaves=i,this.layerIdGen=0,this.flavors=[],this.masks={},this.type="NodeMaterial",this.updaters=[],this.needsJitter=t.shared.needsJitter,Fn.startContext(this),this.reset0(e,t),Fn.endContext(this)}get nodeMaterial(){return this}getFlavor(e,t,i){let r=i?6:(e?3:0)+t;if(r===0)return this;this.flavors===void 0&&(this.flavors=[]),r-=1;let n=this.flavors[r];return n===void 0&&(n=new $Ce(e,t,i,this),n.needsJitter=this.needsJitter,this.flavors[r]=n,n.flatShading=e,n.side=t,n.updateAfterBuild()),n}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}get hasAO(){var e;return((e=this.lightLayer.getNode("occlusion"))==null?void 0:e.value)??!1}reset(e,t,i=!1){Fn.startContext(this),(this.data!==e||i)&&this.reset0(e,t),Fn.endContext(this)}reset0(e,t){this.data=e;let i=e.layers??_a.defaultTwoLayerData("phong").layers;try{this.layers=i.map(r=>dy.create(this.layerIdGen++,r.id,r.data,t.shared))}catch{this.layers=[]}this.layers.reverse(),this.name=e.name??"Untitled Material",this.onUpdate(t.shared),this.transparent=Cm(e,t.shared),this.saveVariableLocations(t)}onVariableUpdate(e,t,i){if(e[0]==="alphaOverride")this.transparent=Cm(this.data,i.shared),this.lightLayer.setValue("alphaOverride",Math.max(0,Math.min(Number(t)/100,1)));else if(e[0]==="layer"){let r=e[1],n=e[2];if(r&&n){let a=this.layers.find(s=>s.uuid===r);a!=null&&a.hasValue(n)&&(n==="alpha"?(this.transparent=Cm(this.data,i.shared),a.setValue(n,Math.max(0,Math.min(Number(t)/100,1)))):a.setValue(n,t))}}}saveVariableLocations(e){if(!this.allowVariableSaves)return;let t=this.data.layers.find(i=>i.data.type==="light");t&&e.shared.getVariable(t.data.alphaOverride,["material",this.uuid,"alphaOverride"]),this.data.layers.forEach(i=>{"alpha"in i.data&&typeof i.data.alpha=="string"&&e.shared.getVariable(i.data.alpha,["material",this.uuid,"layer",i.id,"alpha"])})}getLayersOfType(e){return this.layers.filter(t=>t.type===e)}getLayerByUuid(e){return this.layers.find(t=>t.uuid===e)}onUpdate(e){this.lightLayer=this.layers.find(t=>t instanceof ec),this.lightLayer===void 0&&(this.lightLayer=new ec(0,"",{...ea.defaultData("light","phong"),visible:!1},new tD,{},e)),this.dispose();for(let t of this.flavors)t&&t.dispose();this.applyTextureMaps(),this.applyMasks(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),this.build(),this.nodeContextUuid=0}applyTextureMaps(){let e=this.layers.find(n=>n instanceof ec);if(!e)return;let t=e.data,i=t.bumpMap,r=t.roughnessMap;e.node.bumpMap=void 0,e.node.roughnessMap=void 0;for(let n=0;n<this.layers.length;++n){let a=this.layers[n];a instanceof tn&&a.color instanceof JP&&(a.uuid===i&&(e.node.bumpMap=a.color),a.uuid===r&&(e.node.roughnessMap=a.color))}}updateByOp(e,t,i){if(Fn.startContext(this),t!==void 0?this.data=t:t=this.data,this.transparent=Cm(t,i.shared),e.path[0]==="layers"){let r=i.shared,n=e.path[1];if(n===void 0)i.scene.markNeedsUpdateRendererDirty(),this.reset0(t,i);else{e.type===0&&e.props.occlusion!==void 0&&i.scene.markNeedsUpdateRendererDirty();let a=this.layers.find(s=>s.uuid===n);if(a){let s=t.layers.data(n),o;e.type===0&&("alpha"in e.props||"alphaOverride"in e.props)&&("alpha"in e.props?o={...e.props,alpha:Gf(e.props.alpha,r,["material",this.uuid,"layer",n,"alpha"])}:o={...e.props,alphaOverride:Gf(e.props.alphaOverride,r,["material",this.uuid,"alphaOverride"])}),a.updateByOp({...e,...o?{props:o}:{},path:e.path.slice(2)},s,i)&&this.reset0(t,i)}}}else this.reset0(t,i);Fn.endContext(this)}applyMasks(){for(let e=0;e<this.layers.length;++e){let t=this.layers[e];t instanceof tn?t.color.mask=void 0:t instanceof ec&&(t.node.mask=void 0)}for(let e=0;e<this.layers.length;++e){let t=this.layers[e];if(t instanceof tn&&t.isMask.value&&t.data.visible&&e>0){let i=e-1,r=this.layers[i];r instanceof ec?r.node.mask=new Es(t.color,t.alpha,Es.MUL):r instanceof tn&&(r.isMask.value||(r.color.mask=new Es(t.color,t.alpha,Es.MUL)))}}}blendColors(){let e=this.layers.findIndex(i=>i instanceof tn),t=this.layers.findIndex(i=>i instanceof ec);if(e!==-1&&e<t){let i=this.layers[e].color;for(let r=e+1;r<t;++r){let n=this.layers[r];if(n instanceof tn){if(n.isMask.value)continue;i=new TL(i,n.color,n.alpha,n.mode)}}this.fragment.color=i}else this.fragment.color=void 0}blendAfterColors(){let e=new Lr("outgoingLight","f"),t=this.layers.findIndex(i=>i instanceof ec);if(this.layers.length>t+1){for(let i=t+1;i<this.layers.length;++i){let r=this.layers[i];if(r instanceof tn){if(r.isMask.value)continue;e=new TL(e,r.color,r.alpha,r.mode)}}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter(t=>t instanceof f$);if(e.length>0){let t=e[0].position;for(let i=1;i<e.length;++i)e[i]&&(t=new Es(t,e[i].position,Es.ADD),t=new Es(t,new Bt(.5).setReadonly(!0),Es.MUL));this.fragment.position=t}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(e){e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=this.extensions.derivatives===!0,e.extensionFragDepth=this.extensions.fragDepth===!0,e.extensionDrawBuffers=this.extensions.drawBuffers===!0,e.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(e,t){let i=(r,n,a)=>Math.min(Math.max(r,n),a);for(let r of this.layers)if(r.type==="displace"){let n=i(r.uniforms[`f${r.id}_intensity`].value,e,t);r.uniforms[`f${r.id}_intensity`].value=n}}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(){let e=new zG;e.needsJitter=this.needsJitter,this.lights=this.lightLayer.data.visible,e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters;for(let t of this.flavors)t&&t.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose();for(let e of this.flavors)e&&e.dispose()}assetsLoaded(){for(let e of this.layers)if(e instanceof tn){let t=e.params.texture;if(t instanceof SM&&!t.image.loaded)return!1}return!0}};Object.defineProperties(lh.prototype,{properties:{get:function(){return this.fragment.properties}}});var MM=class extends iD{constructor(e,t,i){super(e,t,!1),this.uuid=i,this.allowVariableSaves=!0,this.saveVariableLocations(t)}},FL=new Map;function ZCe(e){if(typeof e=="string")return e;let t=FL.get(e);return t||(t={url:URL.createObjectURL(new Blob([e]))},FL.set(e,t)),t.url}var m$,qCe=new Promise(e=>{m$=e}),zL=!1,ew;function YCe(){if(zL)return;if(ew)return ew;async function e(){await Ks(()=>import("./BfHTJP-u.js").then(t=>t.h),[],import.meta.url),m$(window!==void 0?window:global),zL=!0}return ew=e(),ew}var v$;qCe.then(e=>v$=e);function KCe(e){let t=!1;return e.scene.objects.traverse((i,r)=>{if(r.events===void 0||Array.isArray(r.events)===!1)return!0;let n=[];r.events.forEach(a=>{"dragDropActions"in a.data?(n.push(...a.data.dragDropActions.drag),n.push(...a.data.dragDropActions.drop)):"inActions"in a.data?(n.push(...a.data.inActions),n.push(...a.data.outActions)):"gameActions"in a.data?(n.push(...a.data.gameActions.idle),n.push(...a.data.gameActions.move),n.push(...a.data.gameActions.jump),n.push(...a.data.gameActions.run)):"breakpoints"in a.data?a.data.breakpoints.forEach(s=>{n.push(...s.data.actions)}):"actions"in a.data&&n.push(...a.data.actions),t=t||n.some(s=>s.data.type==="Audio")})}),t}var fg=class{constructor({src:e,volume:t,delay:i,loop:r}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let n;typeof e=="string"?n={src:e}:n={src:ZCe(e),format:"wav"},this.sound=new v$.Howl(n),this.sound.on("end",this.onEnd),this.src=e,t!==void 0&&(this.volume=t),i!==void 0&&(this.delay=i),r!==void 0&&(this.loop=r)}get status(){return this._status}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(e,t=1e3){e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,t),this.clearFade()},e)):this.sound.fade(this._volume,0,t)}on(e,t,i){this.sound.on(e,t,i)}off(e,t,i){this.sound.off(e,t,i)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(e=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},XCe=class{constructor(){this.type="ShapePath",this.color=new ii,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new tx,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){var i;return(i=this.currentPath)==null||i.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){var n;return(n=this.currentPath)==null||n.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,n,a){var s;return(s=this.currentPath)==null||s.bezierCurveTo(e,t,i,r,n,a),this}splineThru(e){var t;return(t=this.currentPath)==null||t.splineThru(e),this}toShapes(){let e={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},t={loc:e.ORIGIN,t:0};function i(f,p,m,v){let y=f.x,x=p.x,b=m.x,w=v.x,S=f.y,_=p.y,E=m.y,C=v.y,A=(w-b)*(S-E)-(C-E)*(y-b),M=(x-y)*(S-E)-(_-S)*(y-b),T=(C-E)*(x-y)-(w-b)*(_-S),P=A/T,D=M/T;if(T===0&&A!==0||P<=0||P>=1||D<0||D>1)return null;if(A===0&&T===0){for(let k=0;k<2;k++)if(r(k===0?m:v,f,p),t.loc===e.ORIGIN){let L=k===0?m:v;return{x:L.x,y:L.y,t:t.t}}else if(t.loc===e.BETWEEN){let L=+(y+t.t*(x-y)).toPrecision(10),R=+(S+t.t*(_-S)).toPrecision(10);return{x:L,y:R,t:t.t}}return null}else{for(let R=0;R<2;R++)if(r(R===0?m:v,f,p),t.loc===e.ORIGIN){let N=R===0?m:v;return{x:N.x,y:N.y,t:t.t}}let k=+(y+P*(x-y)).toPrecision(10),L=+(S+P*(_-S)).toPrecision(10);return{x:k,y:L,t:P}}}function r(f,p,m){let v=m.x-p.x,y=m.y-p.y,x=f.x-p.x,b=f.y-p.y,w=v*b-x*y;if(f.x===p.x&&f.y===p.y){t.loc=e.ORIGIN,t.t=0;return}if(f.x===m.x&&f.y===m.y){t.loc=e.DESTINATION,t.t=1;return}if(w<-Number.EPSILON){t.loc=e.LEFT;return}if(w>Number.EPSILON){t.loc=e.RIGHT;return}if(v*x<0||y*b<0){t.loc=e.BEHIND;return}if(Math.sqrt(v*v+y*y)<Math.sqrt(x*x+b*b)){t.loc=e.BEYOND;return}let S;v!==0?S=x/v:S=b/y,t.loc=e.BETWEEN,t.t=S}function n(f,p){let m=[],v=[];for(let y=1;y<f.length;y++){let x=f[y-1],b=f[y];for(let w=1;w<p.length;w++){let S=p[w-1],_=p[w],E=i(x,b,S,_);E!==null&&m.find(C=>C.t<=E.t+Number.EPSILON&&C.t>=E.t-Number.EPSILON)===void 0&&(m.push(E),v.push(new Pe(E.x,E.y)))}}return v}function a(f,p,m){let v=new Pe;p.getCenter(v);let y=[];return m.forEach(x=>{x.boundingBox.containsPoint(v)&&n(f,x.points).forEach(b=>{y.push({identifier:x.identifier,isCW:x.isCW,point:b})})}),y.sort((x,b)=>x.point.x-b.point.x),y}function s(f,p,m,v,y){(y==null||y==="")&&(y="nonzero");let x=new Pe;f.boundingBox.getCenter(x);let b=[new Pe(m,x.y),new Pe(v,x.y)],w=a(b,f.boundingBox,p);w.sort((M,T)=>M.point.x-T.point.x);let S=[],_=[];w.forEach(M=>{M.identifier===f.identifier?S.push(M):_.push(M)});let E=S[0].point.x,C=[],A=0;for(;A<_.length&&_[A].point.x<E;)C.length>0&&C[C.length-1]===_[A].identifier?C.pop():C.push(_[A].identifier),A++;if(C.push(f.identifier),y==="evenodd"){let M=C.length%2===0,T=C[C.length-2];return{identifier:f.identifier,isHole:M,for:T}}else if(y==="nonzero"){let M=!0,T=null,P=null;for(let D=0;D<C.length;D++){let k=C[D];p[k]&&(M?(P=p[k].isCW,M=!1,T=k):P!==p[k].isCW&&(P=p[k].isCW,M=!0))}return{identifier:f.identifier,isHole:M,for:T}}else console.warn('fill-rule: "'+y+'" is currently not implemented.')}let o=0,l=999999999,c=-999999999,u=[];this.subPaths.forEach(f=>{let p=f.getPoints(),m=-999999999,v=999999999,y=-999999999,x=999999999;for(let b=0;b<p.length;b++){let w=p[b];w.y>m&&(m=w.y),w.y<v&&(v=w.y),w.x>y&&(y=w.x),w.x<x&&(x=w.x)}c<=y&&(c=y+1),l>=x&&(l=x-1),p.length&&u.push({curves:f.curves,points:p,isCW:yj.isClockWise(p),identifier:o++,boundingBox:new Dj(new Pe(x,v),new Pe(y,m))})});let d=u.map(f=>{var p;return s(f,u,l,c,(p=this.userData)==null?void 0:p.style.fillRule)}),h=[];return u.forEach(f=>{let p=d[f.identifier];if(p&&!p.isHole){let m=new ix;m.curves=f.curves,d.filter(v=>(v==null?void 0:v.isHole)&&v.for===f.identifier).forEach(v=>{if(v){let y=u[v.identifier],x=new tx;x.curves=y.curves,m.holes.push(x)}}),h.push(m)}}),h}},g$=!1,y$,VL=new Promise(e=>{y$=e}),UL=!1,tw;function QCe(){if(g$=!0,UL)return;if(tw)return tw;async function e(){let t=await Ks(()=>import("./D6jUvuOk.js"),[],import.meta.url);y$(t),UL=!0}return tw=e(),tw}var JCe=class{async load(e,t,i=()=>{}){let{load:r}=await VL;r(e,(n,a)=>{n||!a?i(n??"Something went wrong"):t(a)})}async parse(e){let{parse:t,Bidi:i}=await VL;try{let r=t(e),n=new i,a=s=>r.charToGlyphIndex(s.char);return n.registerModifier("glyphIndex",null,a),n.applyFeatures(r,r.defaultRenderOptions.features),{font:r,bidi:n}}catch(r){console.error(r)}}};async function e4e(e){return await(await fetch(e)).arrayBuffer()}var t4e=new JCe;async function HL(e){let t,i,r=!1;if(e.url?(t=await e4e(e.url),i=e.url,r=e.url.startsWith("/")):e.data&&(t=e.data.buffer.slice(e.data.byteOffset,e.data.byteOffset+e.data.byteLength)),t)if(g$){let n=await t4e.parse(t);if(n)return{font:n.font,url:i,intercepted:r,arr:t,bidi:n.bidi}}else return{font:void 0,url:i,intercepted:r,arr:t,bidi:null}}function i4e(e,t){return t.state.glyphIndex===e||t.state.fina===e||t.state.medi===e||t.state.init===e}var r4e=class{constructor(e){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=HL(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}update(e){this._isLoaded=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=HL(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(e,t,i){if(!this._bidi)return[];let r=this._bidi;r.getTextGlyphs(t);let n=r.tokenizer.tokens,a=[],s=0,o=i.length===n.length;for(let l=0;l<i.length;l++){let c=i[l].index,u=String.fromCharCode(i[l].unicode),d=n[s];if(i4e(c,d)||o)a.push({char:u,index:c,replacements:[d.state.glyphIndex],replacementChars:[d.char]}),s++;else{let h=d.char,f="",p=[d.state.glyphIndex],m=[],v=!1;for(;!v;)s++,f=t.charAt(s),h+=f,p.push(e.charToGlyphIndex(f)),m=e.stringToGlyphs(h),m.length===1&&m[0].index===c&&(v=!0),s>t.length&&(v=!0);a.push({char:u,index:c,replacements:p,replacementChars:Array.from(h)}),s++}}return a}generateShapes(e,t){if(!this._isLoaded)return;let i=this.font,r=t.fontSize/this.unitsPerEm,n=t.fontSize*t.lineHeight,a=e.map(y=>this.getTextWidth(y,t)),s=t.width,o=this.getCharWidth(`
`,t),l=t.horizontalAlign===1?o:0,c=this.computeSpaceWidthForLine(e,0,t),u=this.getLineInitialOffsetX(a[0],s,t.horizontalAlign,e[0],o),d=this.getLineInitialOffsetY(n,e.length,t.height,r,t.verticalAlign),h=[],f=e.map(y=>[]),p=e.map(y=>[]),m;for(let y=0;y<e.length;y++){let x=e[y],b={features:{liga:!0}},w=[];try{w=i.stringToGlyphs(x,b)}catch(_){console.warn(_)}u=this.getLineInitialOffsetX(a[y],s,t.horizontalAlign,x,o);let S=[];try{S=this.reverseLigaturesTable(i,x,w)}catch(_){console.warn(_)}c=this.computeSpaceWidthForLine(e,y,t);for(let _=0;_<w.length;_++){let E=w[_],C=E.index===0?`
`:E.unicode?String.fromCharCode(E.unicode):void 0,A=S[_],M=0,T=0;_===0&&t.horizontalAlign===2&&E.leftSideBearing!==void 0&&(T=-E.leftSideBearing*r),m&&(M=i.getKerningValue(E,m)*r),u+=T+M;let P=0;if(C===`
`)P=l;else if(C===" ")P=c;else{let D=this.createPath(E,r,u,d,t);D&&(P=D.offsetX-(M+T),h.push(D.path))}if(A.replacements.length===1)p[y].push([u,d]),f[y].push(P);else{let D=A.replacements.map(N=>(i.glyphs.get(N).advanceWidth??0)*r),k=D.reduce((N,I)=>N+=I,0),L=D.map(N=>N/k),R=u;for(let N=0;N<L.length;N++){let I=P*L[N];p[y].push([R,d]),f[y].push(I),R+=I}}u+=P,m=E}d-=n}let v=[];for(let y=0,x=h.length;y<x;y++)v.push(...h[y].toShapes());return{shapes:v,charWidths:f,lineWidths:a,charCoords:p}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var e;return((e=this.font)==null?void 0:e.ascender)??0}get descender(){var e;return((e=this.font)==null?void 0:e.descender)??0}get familyName(){var e;return((e=this.font)==null?void 0:e.names.fontFamily)??""}get subfamilyName(){var e;return((e=this.font)==null?void 0:e.names.fontSubfamily)??""}get unitsPerEm(){var e;return((e=this.font)==null?void 0:e.unitsPerEm)??1}getLineInitialOffsetX(e,t,i,r,n){return(i===3||i===2)&&r.indexOf(`
`)>=0&&(e-=n),i===3?t*.5-e*.5:i===2?t-e:0}getLineInitialOffsetY(e,t,i,r,n){let a=t*e,s=Math.abs(this.ascender-this.descender)*r,o=e-s,l=-this.ascender*r-o/2;return n===3?-(i-a-l):n===2?-(i*.5-a*.5-l):l}createPath(e,t,i,r,n){var l;let a=e.getPath(i,-r,n.fontSize,{kerning:!1,letterSpacing:n.letterSpacing});if(!a){console.error('THREE.Font: character "'+e+'" does not exists in font family '+this.familyName+".");return}let s=new XCe,o=(e.advanceWidth??1)*t;if(e)for(let c of a.commands){let u=(l=s.currentPath)==null?void 0:l.currentPoint;if(!(u&&c.type!=="Z"&&u.x===c.x&&-u.y===c.y))switch(c.type){case"M":s.moveTo(c.x,-c.y);break;case"L":s.lineTo(c.x,-c.y);break;case"Q":s.quadraticCurveTo(c.x1,-c.y1,c.x,-c.y);break;case"C":s.bezierCurveTo(c.x1,-c.y1,c.x2,-c.y2,c.x,-c.y);break}}return s.subPaths.forEach(c=>{let u=n4e(c.curves);u!==void 0&&c.currentPoint.distanceTo(u)>0&&c.lineTo(u.x,u.y)}),{offsetX:o+n.fontSize*n.letterSpacing,path:s}}getCharWidth(e,t){var i;return((i=this.font)==null?void 0:i.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}getTextWidth(e,t){var i;return((i=this.font)==null?void 0:i.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}computeSpaceWidthForLine(e,t,i){let r=this.getCharWidth(" ",i),n=e[t];if(n){let a=this.countSpaces(n.trimEnd());if(i.horizontalAlign===4&&t<e.length-1&&a){let s=i.width,o=this.getTextWidth(n,i);return(s-(o-a*r))/a}}return r}countSpaces(e){return(e.match(/ /g)||[]).length}};function n4e(e){if(e.length){let t=e[0];if(t instanceof gl)return t.v1;if(t instanceof ul||t instanceof sh)return t.v0}}var a4e=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(e){return this.objects.get(e)}get size(){return this.objects.size}get(e,t,i){let r=this.objects.get(e);return r===void 0?(r=this.createObject(e,t,i),this.objects.set(e,r)):r.isShared=!0,r}forceDelete(e){let t=this.objects.get(e);t&&(this.disposeObject(t),this.objects.delete(e))}mutateIfUnique(e,t){let i=this.objects.get(e);if(i&&i.isShared!==!0)return this.objects.delete(e),this.objects.set(t,i),i}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(e,t){let i=this.objects.get(e);t===i&&this.unreachable.delete(e)}endGc(){this.unreachable.forEach(e=>{this.disposeObject(this.objects.get(e)),this.objects.delete(e)}),this.unreachable.clear()}dispose(){this.objects.forEach(e=>{this.disposeObject(e)}),this.objects.clear()}},jL=class extends a4e{constructor(e){super(),this.flatShading=e}disposeObject(e){e.dispose()}createObject(e,t,i){let r=E1(e,t,this.flatShading,i);return r.computeBoundingSphere(),r}},s4e={markNeedsUpdateRendererDirty:()=>{}},Jw=1e3,WL=512*Jw;function o4e(e,t){let i=typeof e;return!!((t==="string"||t==="number")&&i===t||t==="boolean"&&(e==="true"||e==="false"||e===!0||e===!1)||t==="image"&&i==="string"&&e.startsWith("http"))}var l4e="https://hooks.spline.design",c4e=`${l4e}/events?hashFile=`,u4e=class{constructor(e,t){this.id=e,this.userWebhook=t,this.result=void 0,this._connected=!1,this.emitter=cS(),this.reconnectWaitFor=Jw,this._onError=i=>{var r,n,a;(r=this.eventSource)==null||r.removeEventListener("message",this._onMessage),(n=this.eventSource)==null||n.removeEventListener("error",this._onError),(a=this.eventSource)==null||a.removeEventListener("open",this._onConnected),this._scheduleReconnect()},this._onConnected=i=>{clearTimeout(this.scheduledReconnectHandle),this.reconnectWaitFor=Jw,this._connected=!0},this._onDisconnected=()=>{clearTimeout(this.scheduledReconnectHandle),this.reconnectWaitFor=Jw,this._connected=!1},this._onMessage=i=>{let r=i.data,n;try{n=JSON.parse(r)}catch(a){console.error("Error parsing webhook message",a)}if(n){let a=!1;this.userWebhook.parametersSchemas.forEach(({data:s})=>{n[s.name]!==void 0&&o4e(n[s.name],s.type)&&(this.result===void 0&&(this.result={}),this.result[s.name]=n[s.name],a=!0)}),a&&this.emitter.emit("message",{userWebhookId:this.id})}}}connect(){clearTimeout(this.scheduledReconnectHandle),this.userWebhook.url&&(this.eventSource=new EventSource(c4e+this.userWebhook.url),this.eventSource.addEventListener("message",this._onMessage),this.eventSource.addEventListener("error",this._onError),this.eventSource.addEventListener("open",this._onConnected))}disconnect(){var e,t,i,r;(e=this.eventSource)==null||e.removeEventListener("message",this._onMessage),(t=this.eventSource)==null||t.removeEventListener("error",this._onError),(i=this.eventSource)==null||i.removeEventListener("open",this._onConnected),(r=this.eventSource)==null||r.close(),this._onDisconnected(),clearTimeout(this.scheduledReconnectHandle)}_scheduleReconnect(){this.reconnectWaitFor*=2,this.reconnectWaitFor>WL&&(this.reconnectWaitFor=WL),clearTimeout(this.scheduledReconnectHandle),this.scheduledReconnectHandle=setTimeout(()=>{this.scheduledReconnectHandle=void 0,this.connect()},this.reconnectWaitFor)}update(e){this.userWebhook=e}dispose(){this._connected&&this.disconnect()}get connected(){return this._connected}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}getParametersKeys(){return this.userWebhook.parametersSchemas.map(e=>e.data.name)}getParameterValue(e){var t;if(this.getParametersKeys().includes(e)){if(this.result)return(t=this.result)==null?void 0:t[e];for(let i of this.userWebhook.parametersSchemas)if(i.data.name===e)return eM.defaultParameterValueByType(i.data.type)}}},d4e=globalThis.atob,h4e=globalThis.btoa,Gm=class{static floatTo16BitPCM(e){let t=new ArrayBuffer(e.length*2),i=new DataView(t),r=0;for(let n=0;n<e.length;n++,r+=2){let a=Math.max(-1,Math.min(1,e[n]));i.setInt16(r,a<0?a*32768:a*32767,!0)}return t}static base64ToArrayBuffer(e){let t=d4e(e),i=t.length,r=new Uint8Array(i);for(let n=0;n<i;n++)r[n]=t.charCodeAt(n);return r.buffer}static arrayBufferToBase64(e){e instanceof Float32Array?e=this.floatTo16BitPCM(e):e instanceof Int16Array&&(e=e.buffer);let t="",i=new Uint8Array(e),r=32768;for(let n=0;n<i.length;n+=r){let a=i.subarray(n,n+r);t+=String.fromCharCode.apply(null,a)}return h4e(t)}static mergeInt16Arrays(e,t){if(e instanceof ArrayBuffer&&(e=new Int16Array(e)),t instanceof ArrayBuffer&&(t=new Int16Array(t)),!(e instanceof Int16Array)||!(t instanceof Int16Array))throw new Error("Both items must be Int16Array");let i=new Int16Array(e.length+t.length);for(let r=0;r<e.length;r++)i[r]=e[r];for(let r=0;r<t.length;r++)i[e.length+r]=t[r];return i}static generateId(e,t=21){let i="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",r=Array(t-e.length).fill(0).map(n=>i[Math.floor(Math.random()*i.length)]).join("");return`${e}${r}`}},f4e=e=>new Promise(t=>setTimeout(()=>t(),e)),b$=class{constructor(){this.eventHandlers={},this.nextEventHandlers={}}clearEventHandlers(){return this.eventHandlers={},this.nextEventHandlers={},!0}on(e,t){return this.eventHandlers[e]=this.eventHandlers[e]||[],this.eventHandlers[e].push(t),t}onNext(e,t){return this.nextEventHandlers[e]=this.nextEventHandlers[e]||[],this.nextEventHandlers[e].push(t),t}off(e,t){let i=this.eventHandlers[e]||[];if(t){let r=i.indexOf(t);if(r===-1)throw new Error(`Could not turn off specified event listener for "${e}": not found as a listener`);i.splice(r,1)}else delete this.eventHandlers[e];return!0}offNext(e,t){let i=this.nextEventHandlers[e]||[];if(t){let r=i.indexOf(t);if(r===-1)throw new Error(`Could not turn off specified next event listener for "${e}": not found as a listener`);i.splice(r,1)}else delete this.nextEventHandlers[e];return!0}async waitForNext(e,t=null){let i=Date.now(),r;for(this.onNext(e,n=>r=n);!r;){if(t&&Date.now()-i>t)return null;await f4e(1)}return r}dispatch(e,t){let i=[].concat(this.eventHandlers[e]||[]);for(let n of i)n(t);let r=[].concat(this.nextEventHandlers[e]||[]);for(let n of r)n(t);return delete this.nextEventHandlers[e],!0}},p4e=class extends b${constructor({url:e,apiKey:t,dangerouslyAllowAPIKeyInBrowser:i,debug:r}={}){if(super(),this.defaultUrl="wss://api.openai.com/v1/realtime",this.url=e||this.defaultUrl,this.apiKey=t||null,this.debug=!!r,this.ws=null,globalThis.document&&this.apiKey&&!i)throw new Error('Can not provide API key in the browser without "dangerouslyAllowAPIKeyInBrowser" set to true')}isConnected(){return!!this.ws}log(...e){let t=[`[Websocket/${new Date().toISOString()}]`].concat(e).map(i=>typeof i=="object"&&i!==null?JSON.stringify(i,null,2):i);return this.debug&&console.log(...t),!0}async connect({model:e}={model:"gpt-4o-realtime-preview-2024-10-01"}){if(!this.apiKey&&this.url===this.defaultUrl&&console.warn(`No apiKey provided for connection to "${this.url}"`),this.isConnected())throw new Error("Already connected");if(globalThis.document){this.apiKey&&console.warn("Warning: Connecting using API key in the browser, this is not recommended");let t=globalThis.WebSocket,i=new t(`${this.url}${e?`?model=${e}`:""}`,["realtime",`openai-insecure-api-key.${this.apiKey}`,"openai-beta.realtime-v1"]);return i.addEventListener("message",r=>{let n=JSON.parse(r.data);this.receive(n.type,n)}),new Promise((r,n)=>{let a=()=>{this.disconnect(i),n(new Error(`Could not connect to "${this.url}"`))};i.addEventListener("error",a),i.addEventListener("open",()=>{this.log(`Connected to "${this.url}"`),i.removeEventListener("error",a),i.addEventListener("error",()=>{this.disconnect(i),this.log(`Error, disconnected from "${this.url}"`),this.dispatch("close",{error:!0})}),i.addEventListener("close",()=>{this.disconnect(i),this.log(`Disconnected from "${this.url}"`),this.dispatch("close",{error:!1})}),this.ws=i,r(!0)})})}}disconnect(e){if(!e||this.ws===e)return this.ws&&this.ws.close(),this.ws=null,!0}receive(e,t){return this.log("received:",e,t),this.dispatch(`server.${e}`,t),this.dispatch("server.*",t),!0}send(e,t){if(!this.isConnected())throw new Error("RealtimeAPI is not connected");if(t=t||{},typeof t!="object")throw new Error("data must be an object");let i={event_id:Gm.generateId("evt_"),type:e,...t};return this.dispatch(`client.${e}`,i),this.dispatch("client.*",i),this.log("sent:",e,i),this.ws.send(JSON.stringify(i)),!0}},m4e=class{constructor(){df(this,"defaultFrequency",24e3),df(this,"EventProcessors",{"conversation.item.created":e=>{let{item:t}=e,i=JSON.parse(JSON.stringify(t));if(this.itemLookup[i.id]||(this.itemLookup[i.id]=i,this.items.push(i)),i.formatted={},i.formatted.audio=new Int16Array(0),i.formatted.text="",i.formatted.transcript="",this.queuedSpeechItems[i.id]&&(i.formatted.audio=this.queuedSpeechItems[i.id].audio,delete this.queuedSpeechItems[i.id]),i.content){let r=i.content.filter(n=>["text","input_text"].includes(n.type));for(let n of r)i.formatted.text+=n.text}return this.queuedTranscriptItems[i.id]&&(i.formatted.transcript=this.queuedTranscriptItems.transcript,delete this.queuedTranscriptItems[i.id]),i.type==="message"?i.role==="user"?(i.status="completed",this.queuedInputAudio&&(i.formatted.audio=this.queuedInputAudio,this.queuedInputAudio=null)):i.status="in_progress":i.type==="function_call"?(i.formatted.tool={type:"function",name:i.name,call_id:i.call_id,arguments:""},i.status="in_progress"):i.type==="function_call_output"&&(i.status="completed",i.formatted.output=i.output),{item:i,delta:null}},"conversation.item.truncated":e=>{let{item_id:t,audio_end_ms:i}=e,r=this.itemLookup[t];if(!r)throw new Error(`item.truncated: Item "${t}" not found`);let n=Math.floor(i*this.defaultFrequency/1e3);return r.formatted.transcript="",r.formatted.audio=r.formatted.audio.slice(0,n),{item:r,delta:null}},"conversation.item.deleted":e=>{let{item_id:t}=e,i=this.itemLookup[t];if(!i)throw new Error(`item.deleted: Item "${t}" not found`);delete this.itemLookup[i.id];let r=this.items.indexOf(i);return r>-1&&this.items.splice(r,1),{item:i,delta:null}},"conversation.item.input_audio_transcription.completed":e=>{let{item_id:t,content_index:i,transcript:r}=e,n=this.itemLookup[t],a=r||" ";return n?(n.content[i].transcript=r,n.formatted.transcript=a,{item:n,delta:{transcript:r}}):(this.queuedTranscriptItems[t]={transcript:a},{item:null,delta:null})},"input_audio_buffer.speech_started":e=>{let{item_id:t,audio_start_ms:i}=e;return this.queuedSpeechItems[t]={audio_start_ms:i},{item:null,delta:null}},"input_audio_buffer.speech_stopped":(e,t)=>{let{item_id:i,audio_end_ms:r}=e;this.queuedSpeechItems[i]||(this.queuedSpeechItems[i]={audio_start_ms:r});let n=this.queuedSpeechItems[i];if(n.audio_end_ms=r,t){let a=Math.floor(n.audio_start_ms*this.defaultFrequency/1e3),s=Math.floor(n.audio_end_ms*this.defaultFrequency/1e3);n.audio=t.slice(a,s)}return{item:null,delta:null}},"response.created":e=>{let{response:t}=e;return this.responseLookup[t.id]||(this.responseLookup[t.id]=t,this.responses.push(t)),{item:null,delta:null}},"response.output_item.added":e=>{let{response_id:t,item:i}=e,r=this.responseLookup[t];if(!r)throw new Error(`response.output_item.added: Response "${t}" not found`);return r.output.push(i.id),{item:null,delta:null}},"response.output_item.done":e=>{let{item:t}=e;if(!t)throw new Error('response.output_item.done: Missing "item"');let i=this.itemLookup[t.id];if(!i)throw new Error(`response.output_item.done: Item "${t.id}" not found`);return i.status=t.status,{item:i,delta:null}},"response.content_part.added":e=>{let{item_id:t,part:i}=e,r=this.itemLookup[t];if(!r)throw new Error(`response.content_part.added: Item "${t}" not found`);return r.content.push(i),{item:r,delta:null}},"response.audio_transcript.delta":e=>{let{item_id:t,content_index:i,delta:r}=e,n=this.itemLookup[t];if(!n)throw new Error(`response.audio_transcript.delta: Item "${t}" not found`);return n.content[i].transcript+=r,n.formatted.transcript+=r,{item:n,delta:{transcript:r}}},"response.audio.delta":e=>{let{item_id:t,content_index:i,delta:r}=e,n=this.itemLookup[t];if(!n)throw new Error(`response.audio.delta: Item "${t}" not found`);let a=Gm.base64ToArrayBuffer(r),s=new Int16Array(a);return n.formatted.audio=Gm.mergeInt16Arrays(n.formatted.audio,s),{item:n,delta:{audio:s}}},"response.text.delta":e=>{let{item_id:t,content_index:i,delta:r}=e,n=this.itemLookup[t];if(!n)throw new Error(`response.text.delta: Item "${t}" not found`);return n.content[i].text+=r,n.formatted.text+=r,{item:n,delta:{text:r}}},"response.function_call_arguments.delta":e=>{let{item_id:t,delta:i}=e,r=this.itemLookup[t];if(!r)throw new Error(`response.function_call_arguments.delta: Item "${t}" not found`);return r.arguments+=i,r.formatted.tool.arguments+=i,{item:r,delta:{arguments:i}}}}),this.clear()}clear(){return this.itemLookup={},this.items=[],this.responseLookup={},this.responses=[],this.queuedSpeechItems={},this.queuedTranscriptItems={},this.queuedInputAudio=null,!0}queueInputAudio(e){return this.queuedInputAudio=e,e}processEvent(e,...t){if(!e.event_id)throw console.error(e),new Error('Missing "event_id" on event');if(!e.type)throw console.error(e),new Error('Missing "type" on event');let i=this.EventProcessors[e.type];if(!i)throw new Error(`Missing conversation event processor for "${e.type}"`);return i.call(this,e,...t)}getItem(e){return this.itemLookup[e]||null}getItems(){return this.items.slice()}},GL=class extends b${constructor({url:e,apiKey:t,dangerouslyAllowAPIKeyInBrowser:i,debug:r}={}){super(),this.defaultSessionConfig={modalities:["text","audio"],instructions:"",voice:"alloy",input_audio_format:"pcm16",output_audio_format:"pcm16",input_audio_transcription:null,turn_detection:null,tools:[],tool_choice:"auto",temperature:.8,max_response_output_tokens:4096},this.sessionConfig={},this.transcriptionModels=[{model:"whisper-1"}],this.defaultServerVadConfig={type:"server_vad",threshold:.5,prefix_padding_ms:300,silence_duration_ms:200},this.realtime=new p4e({url:e,apiKey:t,dangerouslyAllowAPIKeyInBrowser:i,debug:r}),this.conversation=new m4e,this._resetConfig(),this._addAPIEventHandlers()}_resetConfig(){return this.sessionCreated=!1,this.tools={},this.sessionConfig=JSON.parse(JSON.stringify(this.defaultSessionConfig)),this.inputAudioBuffer=new Int16Array(0),!0}_addAPIEventHandlers(){this.realtime.on("client.*",r=>{let n={time:new Date().toISOString(),source:"client",event:r};this.dispatch("realtime.event",n)}),this.realtime.on("server.*",r=>{let n={time:new Date().toISOString(),source:"server",event:r};this.dispatch("realtime.event",n)}),this.realtime.on("server.session.created",()=>this.sessionCreated=!0);let e=(r,...n)=>{let{item:a,delta:s}=this.conversation.processEvent(r,...n);return{item:a,delta:s}},t=(r,...n)=>{let{item:a,delta:s}=e(r,...n);return a&&this.dispatch("conversation.updated",{item:a,delta:s}),{item:a,delta:s}},i=async r=>{try{let n=JSON.parse(r.arguments),a=this.tools[r.name];if(!a)throw new Error(`Tool "${r.name}" has not been added`);let s=await a.handler(n);this.realtime.send("conversation.item.create",{item:{type:"function_call_output",call_id:r.call_id,output:JSON.stringify(s)}})}catch(n){this.realtime.send("conversation.item.create",{item:{type:"function_call_output",call_id:r.call_id,output:JSON.stringify({error:n.message})}})}this.createResponse()};return this.realtime.on("server.response.created",e),this.realtime.on("server.response.output_item.added",e),this.realtime.on("server.response.content_part.added",e),this.realtime.on("server.input_audio_buffer.speech_started",r=>{e(r),this.dispatch("conversation.interrupted")}),this.realtime.on("server.input_audio_buffer.speech_stopped",r=>e(r,this.inputAudioBuffer)),this.realtime.on("server.conversation.item.created",r=>{let{item:n}=t(r);this.dispatch("conversation.item.appended",{item:n}),n.status==="completed"&&this.dispatch("conversation.item.completed",{item:n})}),this.realtime.on("server.conversation.item.truncated",t),this.realtime.on("server.conversation.item.deleted",t),this.realtime.on("server.conversation.item.input_audio_transcription.completed",t),this.realtime.on("server.response.audio_transcript.delta",t),this.realtime.on("server.response.audio.delta",t),this.realtime.on("server.response.text.delta",t),this.realtime.on("server.response.function_call_arguments.delta",t),this.realtime.on("server.response.output_item.done",async r=>{let{item:n}=t(r);n.status==="completed"&&this.dispatch("conversation.item.completed",{item:n}),n.formatted.tool&&i(n.formatted.tool)}),!0}isConnected(){return this.realtime.isConnected()}reset(){return this.disconnect(),this.clearEventHandlers(),this.realtime.clearEventHandlers(),this._resetConfig(),this._addAPIEventHandlers(),!0}async connect(){if(this.isConnected())throw new Error("Already connected, use .disconnect() first");return await this.realtime.connect(),this.updateSession(),!0}async waitForSessionCreated(){if(!this.isConnected())throw new Error("Not connected, use .connect() first");for(;!this.sessionCreated;)await new Promise(e=>setTimeout(()=>e(),1));return!0}disconnect(){this.sessionCreated=!1,this.realtime.isConnected()&&this.realtime.disconnect(),this.conversation.clear()}getTurnDetectionType(){var e;return((e=this.sessionConfig.turn_detection)==null?void 0:e.type)||null}addTool(e,t){if(!(e!=null&&e.name))throw new Error("Missing tool name in definition");let i=e==null?void 0:e.name;if(this.tools[i])throw new Error(`Tool "${i}" already added. Please use .removeTool("${i}") before trying to add again.`);if(typeof t!="function")throw new Error(`Tool "${i}" handler must be a function`);return this.tools[i]={definition:e,handler:t},this.updateSession(),this.tools[i]}removeTool(e){if(!this.tools[e])throw new Error(`Tool "${e}" does not exist, can not be removed.`);return delete this.tools[e],!0}deleteItem(e){return this.realtime.send("conversation.item.delete",{item_id:e}),!0}updateSession({modalities:e=void 0,instructions:t=void 0,voice:i=void 0,input_audio_format:r=void 0,output_audio_format:n=void 0,input_audio_transcription:a=void 0,turn_detection:s=void 0,tools:o=void 0,tool_choice:l=void 0,temperature:c=void 0,max_response_output_tokens:u=void 0}={}){e!==void 0&&(this.sessionConfig.modalities=e),t!==void 0&&(this.sessionConfig.instructions=t),i!==void 0&&(this.sessionConfig.voice=i),r!==void 0&&(this.sessionConfig.input_audio_format=r),n!==void 0&&(this.sessionConfig.output_audio_format=n),a!==void 0&&(this.sessionConfig.input_audio_transcription=a),s!==void 0&&(this.sessionConfig.turn_detection=s),o!==void 0&&(this.sessionConfig.tools=o),l!==void 0&&(this.sessionConfig.tool_choice=l),c!==void 0&&(this.sessionConfig.temperature=c),u!==void 0&&(this.sessionConfig.max_response_output_tokens=u);let d=[].concat((o||[]).map(f=>{let p={type:"function",...f};if(this.tools[p==null?void 0:p.name])throw new Error(`Tool "${p==null?void 0:p.name}" has already been defined`);return p}),Object.keys(this.tools).map(f=>({type:"function",...this.tools[f].definition}))),h={...this.sessionConfig};return h.tools=d,this.realtime.isConnected()&&this.realtime.send("session.update",{session:h}),!0}sendUserMessageContent(e=[]){if(e.length){for(let t of e)t.type==="input_audio"&&(t.audio instanceof ArrayBuffer||t.audio instanceof Int16Array)&&(t.audio=Gm.arrayBufferToBase64(t.audio));this.realtime.send("conversation.item.create",{item:{type:"message",role:"user",content:e}})}return this.createResponse(),!0}appendInputAudio(e){return e.byteLength>0&&(this.realtime.send("input_audio_buffer.append",{audio:Gm.arrayBufferToBase64(e)}),this.inputAudioBuffer=Gm.mergeInt16Arrays(this.inputAudioBuffer,e)),!0}createResponse(){return this.getTurnDetectionType()===null&&this.inputAudioBuffer.byteLength>0&&(this.realtime.send("input_audio_buffer.commit"),this.conversation.queueInputAudio(this.inputAudioBuffer),this.inputAudioBuffer=new Int16Array(0)),this.realtime.send("response.create"),!0}cancelResponse(e,t=0){if(e){if(e){let i=this.conversation.getItem(e);if(!i)throw new Error(`Could not find item "${e}"`);if(i.type!=="message")throw new Error('Can only cancelResponse messages with type "message"');if(i.role!=="assistant")throw new Error('Can only cancelResponse messages with role "assistant"');this.realtime.send("response.cancel");let r=i.content.findIndex(n=>n.type==="audio");if(r===-1)throw new Error("Could not find audio on item to cancel");return this.realtime.send("conversation.item.truncate",{item_id:e,content_index:r,audio_end_ms:Math.floor(t/this.conversation.defaultFrequency*1e3)}),{item:i}}}else return this.realtime.send("response.cancel"),{item:null}}async waitForNextItem(){let e=await this.waitForNext("conversation.item.appended"),{item:t}=e;return{item:t}}async waitForNextCompletedItem(){let e=await this.waitForNext("conversation.item.completed"),{item:t}=e;return{item:t}}},v4e=`
class AudioProcessor extends AudioWorkletProcessor {

  constructor() {
    super();
    this.port.onmessage = this.receive.bind(this);
    this.initialize();
  }

  initialize() {
    this.foundAudio = false;
    this.recording = false;
    this.chunks = [];
  }

  /**
   * Concatenates sampled chunks into channels
   * Format is chunk[Left[], Right[]]
   */
  readChannelData(chunks, channel = -1, maxChannels = 9) {
    let channelLimit;
    if (channel !== -1) {
      if (chunks[0] && chunks[0].length - 1 < channel) {
        throw new Error(
          \`Channel \${channel} out of range: max \${chunks[0].length}\`
        );
      }
      channelLimit = channel + 1;
    } else {
      channel = 0;
      channelLimit = Math.min(chunks[0] ? chunks[0].length : 1, maxChannels);
    }
    const channels = [];
    for (let n = channel; n < channelLimit; n++) {
      const length = chunks.reduce((sum, chunk) => {
        return sum + chunk[n].length;
      }, 0);
      const buffers = chunks.map((chunk) => chunk[n]);
      const result = new Float32Array(length);
      let offset = 0;
      for (let i = 0; i < buffers.length; i++) {
        result.set(buffers[i], offset);
        offset += buffers[i].length;
      }
      channels[n] = result;
    }
    return channels;
  }

  /**
   * Combines parallel audio data into correct format,
   * channels[Left[], Right[]] to float32Array[LRLRLRLR...]
   */
  formatAudioData(channels) {
    if (channels.length === 1) {
      // Simple case is only one channel
      const float32Array = channels[0].slice();
      const meanValues = channels[0].slice();
      return { float32Array, meanValues };
    } else {
      const float32Array = new Float32Array(
        channels[0].length * channels.length
      );
      const meanValues = new Float32Array(channels[0].length);
      for (let i = 0; i < channels[0].length; i++) {
        const offset = i * channels.length;
        let meanValue = 0;
        for (let n = 0; n < channels.length; n++) {
          float32Array[offset + n] = channels[n][i];
          meanValue += channels[n][i];
        }
        meanValues[i] = meanValue / channels.length;
      }
      return { float32Array, meanValues };
    }
  }

  /**
   * Converts 32-bit float data to 16-bit integers
   */
  floatTo16BitPCM(float32Array) {
    const buffer = new ArrayBuffer(float32Array.length * 2);
    const view = new DataView(buffer);
    let offset = 0;
    for (let i = 0; i < float32Array.length; i++, offset += 2) {
      let s = Math.max(-1, Math.min(1, float32Array[i]));
      view.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7fff, true);
    }
    return buffer;
  }

  /**
   * Retrieves the most recent amplitude values from the audio stream
   * @param {number} channel
   */
  getValues(channel = -1) {
    const channels = this.readChannelData(this.chunks, channel);
    const { meanValues } = this.formatAudioData(channels);
    return { meanValues, channels };
  }

  /**
   * Exports chunks as an audio/wav file
   */
  export() {
    const channels = this.readChannelData(this.chunks);
    const { float32Array, meanValues } = this.formatAudioData(channels);
    const audioData = this.floatTo16BitPCM(float32Array);
    return {
      meanValues: meanValues,
      audio: {
        bitsPerSample: 16,
        channels: channels,
        data: audioData,
      },
    };
  }

  receive(e) {
    const { event, id } = e.data;
    let receiptData = {};
    switch (event) {
      case 'start':
        this.recording = true;
        break;
      case 'stop':
        this.recording = false;
        break;
      case 'clear':
        this.initialize();
        break;
      case 'export':
        receiptData = this.export();
        break;
      case 'read':
        receiptData = this.getValues();
        break;
      default:
        break;
    }
    // Always send back receipt
    this.port.postMessage({ event: 'receipt', id, data: receiptData });
  }

  sendChunk(chunk) {
    const channels = this.readChannelData([chunk]);
    const { float32Array, meanValues } = this.formatAudioData(channels);
    const rawAudioData = this.floatTo16BitPCM(float32Array);
    const monoAudioData = this.floatTo16BitPCM(meanValues);
    this.port.postMessage({
      event: 'chunk',
      data: {
        mono: monoAudioData,
        raw: rawAudioData,
      },
    });
  }

  process(inputList, outputList, parameters) {
    // Copy input to output (e.g. speakers)
    // Note that this creates choppy sounds with Mac products
    const sourceLimit = Math.min(inputList.length, outputList.length);
    for (let inputNum = 0; inputNum < sourceLimit; inputNum++) {
      const input = inputList[inputNum];
      const output = outputList[inputNum];
      const channelCount = Math.min(input.length, output.length);
      for (let channelNum = 0; channelNum < channelCount; channelNum++) {
        input[channelNum].forEach((sample, i) => {
          output[channelNum][i] = sample;
        });
      }
    }
    const inputs = inputList[0];
    // There's latency at the beginning of a stream before recording starts
    // Make sure we actually receive audio data before we start storing chunks
    let sliceIndex = 0;
    if (!this.foundAudio) {
      for (const channel of inputs) {
        sliceIndex = 0; // reset for each channel
        if (this.foundAudio) {
          break;
        }
        if (channel) {
          for (const value of channel) {
            if (value !== 0) {
              // find only one non-zero entry in any channel
              this.foundAudio = true;
              break;
            } else {
              sliceIndex++;
            }
          }
        }
      }
    }
    if (inputs && inputs[0] && this.foundAudio && this.recording) {
      // We need to copy the TypedArray, because the \`process\`
      // internals will reuse the same buffer to hold each input
      const chunk = inputs.map((input) => input.slice(sliceIndex));
      this.chunks.push(chunk);
      this.sendChunk(chunk);
    }
    return true;
  }
}

registerProcessor('audio_processor', AudioProcessor);
`,g4e=new Blob([v4e],{type:"application/javascript"}),y4e=URL.createObjectURL(g4e),b4e=y4e,$L=[4186.01,4434.92,4698.63,4978.03,5274.04,5587.65,5919.91,6271.93,6644.88,7040,7458.62,7902.13],w4e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],Qd=[],rD=[];for(let e=1;e<=8;e++)for(let t=0;t<$L.length;t++){let i=$L[t];Qd.push(i/Math.pow(2,8-e)),rD.push(w4e[t]+e)}var Hx=[32,2e3],ZL=Qd.filter((e,t)=>Qd[t]>Hx[0]&&Qd[t]<Hx[1]),x4e=rD.filter((e,t)=>Qd[t]>Hx[0]&&Qd[t]<Hx[1]),nD=class{static getFrequencies(e,t,i,r="frequency",n=-100,a=-30){i||(i=new Float32Array(e.frequencyBinCount),e.getFloatFrequencyData(i));let s=t/2,o=1/i.length*s,l,c,u;if(r==="music"||r==="voice"){let h=r==="voice"?ZL:Qd,f=Array(h.length).fill(n);for(let p=0;p<i.length;p++){let m=p*o,v=i[p];for(let y=h.length-1;y>=0;y--)if(m>h[y]){f[y]=Math.max(f[y],v);break}}l=f,c=r==="voice"?ZL:Qd,u=r==="voice"?x4e:rD}else l=Array.from(i),c=l.map((h,f)=>o*f),u=c.map(h=>`${h.toFixed(2)} Hz`);let d=l.map(h=>Math.max(0,Math.min((h-n)/(a-n),1)));return{values:new Float32Array(d),frequencies:c,labels:u}}constructor(e,t=null){if(this.fftResults=[],t){let{length:i,sampleRate:r}=t,n=new OfflineAudioContext({length:i,sampleRate:r}),a=n.createBufferSource();a.buffer=t;let s=n.createAnalyser();s.fftSize=8192,s.smoothingTimeConstant=.1,a.connect(s);let o=1/60,l=i/r,c=u=>{let d=o*u;d<l&&n.suspend(d).then(()=>{let h=new Float32Array(s.frequencyBinCount);s.getFloatFrequencyData(h),this.fftResults.push(h),c(u+1)}),u===1?n.startRendering():n.resume()};a.start(0),c(1),this.audio=e,this.context=n,this.analyser=s,this.sampleRate=r,this.audioBuffer=t}else{let i=new AudioContext,r=i.createMediaElementSource(e),n=i.createAnalyser();n.fftSize=8192,n.smoothingTimeConstant=.1,r.connect(n),n.connect(i.destination),this.audio=e,this.context=i,this.analyser=n,this.sampleRate=this.context.sampleRate,this.audioBuffer=null}}getFrequencies(e="frequency",t=-100,i=-30){let r=null;if(this.audioBuffer&&this.fftResults.length){let n=this.audio.currentTime/this.audio.duration,a=Math.min(n*this.fftResults.length|0,this.fftResults.length-1);r=this.fftResults[a]}return nD.getFrequencies(this.analyser,this.sampleRate,r,e,t,i)}async resumeIfSuspended(){return this.context.state==="suspended"&&await this.context.resume(),!0}},Hp=class{static floatTo16BitPCM(e){let t=new ArrayBuffer(e.length*2),i=new DataView(t),r=0;for(let n=0;n<e.length;n++,r+=2){let a=Math.max(-1,Math.min(1,e[n]));i.setInt16(r,a<0?a*32768:a*32767,!0)}return t}static mergeBuffers(e,t){let i=new Uint8Array(e.byteLength+t.byteLength);return i.set(new Uint8Array(e),0),i.set(new Uint8Array(t),e.byteLength),i.buffer}_packData(e,t){return[new Uint8Array([t,t>>8]),new Uint8Array([t,t>>8,t>>16,t>>24])][e]}pack(e,t){if(t!=null&&t.bitsPerSample)if(t!=null&&t.channels){if(!(t!=null&&t.data))throw new Error('Missing "data"')}else throw new Error('Missing "channels"');else throw new Error('Missing "bitsPerSample"');let{bitsPerSample:i,channels:r,data:n}=t,a=["RIFF",this._packData(1,52),"WAVE","fmt ",this._packData(1,16),this._packData(0,1),this._packData(0,r.length),this._packData(1,e),this._packData(1,e*r.length*i/8),this._packData(0,r.length*i/8),this._packData(0,i),"data",this._packData(1,r[0].length*r.length*i/8),n],s=new Blob(a,{type:"audio/mpeg"}),o=URL.createObjectURL(s);return{blob:s,url:o,channelCount:r.length,sampleRate:e,duration:n.byteLength/(r.length*e*2)}}},qL=class{constructor({sampleRate:e=44100,outputToSpeakers:t=!1,debug:i=!1}={}){this.scriptSrc=b4e,this.sampleRate=e,this.outputToSpeakers=t,this.debug=!!i,this._deviceChangeCallback=null,this._devices=[],this.stream=null,this.processor=null,this.source=null,this.node=null,this.recording=!1,this._lastEventId=0,this.eventReceipts={},this.eventTimeout=5e3,this._chunkProcessor=()=>{},this._chunkProcessorSize=void 0,this._chunkProcessorBuffer={raw:new ArrayBuffer(0),mono:new ArrayBuffer(0)}}static async decode(e,t=44100,i=-1){let r=new AudioContext({sampleRate:t}),n,a;if(e instanceof Blob){if(i!==-1)throw new Error('Can not specify "fromSampleRate" when reading from Blob');a=e,n=await a.arrayBuffer()}else if(e instanceof ArrayBuffer){if(i!==-1)throw new Error('Can not specify "fromSampleRate" when reading from ArrayBuffer');n=e,a=new Blob([n],{type:"audio/wav"})}else{let c,u;if(e instanceof Int16Array){u=e,c=new Float32Array(e.length);for(let h=0;h<e.length;h++)c[h]=e[h]/32768}else if(e instanceof Float32Array)c=e;else if(e instanceof Array)c=new Float32Array(e);else throw new Error('"audioData" must be one of: Blob, Float32Arrray, Int16Array, ArrayBuffer, Array<number>');if(i===-1)throw new Error('Must specify "fromSampleRate" when reading from Float32Array, In16Array or Array');if(i<3e3)throw new Error('Minimum "fromSampleRate" is 3000 (3kHz)');u||(u=Hp.floatTo16BitPCM(c));let d={bitsPerSample:16,channels:[c],data:u};a=new Hp().pack(i,d).blob,n=await a.arrayBuffer()}let s=await r.decodeAudioData(n),o=s.getChannelData(0),l=URL.createObjectURL(a);return{blob:a,url:l,values:o,audioBuffer:s}}log(){return this.debug&&this.log(...arguments),!0}getSampleRate(){return this.sampleRate}getStatus(){return this.processor?this.recording?"recording":"paused":"ended"}async _event(e,t={},i=null){if(i=i||this.processor,!i)throw new Error("Can not send events without recording first");let r={event:e,id:this._lastEventId++,data:t};i.port.postMessage(r);let n=new Date().valueOf();for(;!this.eventReceipts[r.id];){if(new Date().valueOf()-n>this.eventTimeout)throw new Error(`Timeout waiting for "${e}" event`);await new Promise(s=>setTimeout(()=>s(!0),1))}let a=this.eventReceipts[r.id];return delete this.eventReceipts[r.id],a}listenForDeviceChange(e){if(e===null&&this._deviceChangeCallback)navigator.mediaDevices.removeEventListener("devicechange",this._deviceChangeCallback),this._deviceChangeCallback=null;else if(e!==null){let t=0,i=[],r=a=>a.map(s=>s.deviceId).sort().join(","),n=async()=>{let a=++t,s=await this.listDevices();a===t&&r(i)!==r(s)&&(i=s,e(s.slice()))};navigator.mediaDevices.addEventListener("devicechange",n),n(),this._deviceChangeCallback=n}return!0}async requestPermission(){let e=await navigator.permissions.query({name:"microphone"});if(e.state==="denied")window.alert("You must grant microphone access to use this feature.");else if(e.state==="prompt")try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(t=>t.stop())}catch{window.alert("You must grant microphone access to use this feature.")}return!0}async listDevices(){if(!navigator.mediaDevices||!("enumerateDevices"in navigator.mediaDevices))throw new Error("Could not request user devices");await this.requestPermission();let e=(await navigator.mediaDevices.enumerateDevices()).filter(r=>r.kind==="audioinput"),t=e.findIndex(r=>r.deviceId==="default"),i=[];if(t!==-1){let r=e.splice(t,1)[0],n=e.findIndex(a=>a.groupId===r.groupId);n!==-1&&(r=e.splice(n,1)[0]),r.default=!0,i.push(r)}return i.concat(e)}async begin(e){if(this.processor)throw new Error("Already connected: please call .end() to start a new session");if(!navigator.mediaDevices||!("getUserMedia"in navigator.mediaDevices))throw new Error("Could not request user media");try{let s={audio:!0};e&&(s.audio={deviceId:{exact:e}}),this.stream=await navigator.mediaDevices.getUserMedia(s)}catch{throw new Error("Could not start media stream")}let t=new AudioContext({sampleRate:this.sampleRate}),i=t.createMediaStreamSource(this.stream);try{await t.audioWorklet.addModule(this.scriptSrc)}catch(s){throw console.error(s),new Error(`Could not add audioWorklet module: ${this.scriptSrc}`)}let r=new AudioWorkletNode(t,"audio_processor");r.port.onmessage=s=>{let{event:o,id:l,data:c}=s.data;if(o==="receipt")this.eventReceipts[l]=c;else if(o==="chunk")if(this._chunkProcessorSize){let u=this._chunkProcessorBuffer;this._chunkProcessorBuffer={raw:Hp.mergeBuffers(u.raw,c.raw),mono:Hp.mergeBuffers(u.mono,c.mono)},this._chunkProcessorBuffer.mono.byteLength>=this._chunkProcessorSize&&(this._chunkProcessor(this._chunkProcessorBuffer),this._chunkProcessorBuffer={raw:new ArrayBuffer(0),mono:new ArrayBuffer(0)})}else this._chunkProcessor(c)};let n=i.connect(r),a=t.createAnalyser();return a.fftSize=8192,a.smoothingTimeConstant=.1,n.connect(a),this.outputToSpeakers&&(console.warn(`Warning: Output to speakers may affect sound quality,
especially due to system audio feedback preventative measures.
use only for debugging`),a.connect(t.destination)),this.source=i,this.node=n,this.analyser=a,this.processor=r,!0}getFrequencies(e="frequency",t=-100,i=-30){if(!this.processor)throw new Error("Session ended: please call .begin() first");return nD.getFrequencies(this.analyser,this.sampleRate,null,e,t,i)}async pause(){if(this.processor){if(!this.recording)throw new Error("Already paused: please call .record() first")}else throw new Error("Session ended: please call .begin() first");return this._chunkProcessorBuffer.raw.byteLength&&this._chunkProcessor(this._chunkProcessorBuffer),this.log("Pausing ..."),await this._event("stop"),this.recording=!1,!0}async record(e=()=>{},t=8192){if(this.processor){if(this.recording)throw new Error("Already recording: please call .pause() first");if(typeof e!="function")throw new Error("chunkProcessor must be a function")}else throw new Error("Session ended: please call .begin() first");return this._chunkProcessor=e,this._chunkProcessorSize=t,this._chunkProcessorBuffer={raw:new ArrayBuffer(0),mono:new ArrayBuffer(0)},this.log("Recording ..."),await this._event("start"),this.recording=!0,!0}async clear(){if(!this.processor)throw new Error("Session ended: please call .begin() first");return await this._event("clear"),!0}async read(){if(!this.processor)throw new Error("Session ended: please call .begin() first");return this.log("Reading ..."),await this._event("read")}async save(e=!1){if(!this.processor)throw new Error("Session ended: please call .begin() first");if(!e&&this.recording)throw new Error("Currently recording: please call .pause() first, or call .save(true) to force");this.log("Exporting ...");let t=await this._event("export");return new Hp().pack(this.sampleRate,t.audio)}async end(){if(!this.processor)throw new Error("Session ended: please call .begin() first");let e=this.processor;this.log("Stopping ..."),await this._event("stop"),this.recording=!1,this.stream.getTracks().forEach(i=>i.stop()),this.log("Exporting ...");let t=await this._event("export",{},e);return this.processor.disconnect(),this.source.disconnect(),this.node.disconnect(),this.analyser.disconnect(),this.stream=null,this.processor=null,this.source=null,this.node=null,new Hp().pack(this.sampleRate,t.audio)}async quit(){return this.listenForDeviceChange(null),this.processor&&await this.end(),!0}},_4e=`
class StreamProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.hasStarted = false;
    this.hasInterrupted = false;
    this.outputBuffers = [];
    this.bufferLength = 128;
    this.write = { buffer: new Float32Array(this.bufferLength), trackId: null };
    this.writeOffset = 0;
    this.trackSampleOffsets = {};
    this.port.onmessage = (event) => {
      if (event.data) {
        const payload = event.data;
        if (payload.event === 'write') {
          const int16Array = payload.buffer;
          const float32Array = new Float32Array(int16Array.length);
          for (let i = 0; i < int16Array.length; i++) {
            float32Array[i] = int16Array[i] / 0x8000; // Convert Int16 to Float32
          }
          this.writeData(float32Array, payload.trackId);
        } else if (
          payload.event === 'offset' ||
          payload.event === 'interrupt'
        ) {
          const requestId = payload.requestId;
          const trackId = this.write.trackId;
          const offset = this.trackSampleOffsets[trackId] || 0;
          this.port.postMessage({
            event: 'offset',
            requestId,
            trackId,
            offset,
          });
          if (payload.event === 'interrupt') {
            this.hasInterrupted = true;
          }
        } else {
          throw new Error(\`Unhandled event "\${payload.event}"\`);
        }
      }
    };
  }

  writeData(float32Array, trackId = null) {
    let { buffer } = this.write;
    let offset = this.writeOffset;
    for (let i = 0; i < float32Array.length; i++) {
      buffer[offset++] = float32Array[i];
      if (offset >= buffer.length) {
        this.outputBuffers.push(this.write);
        this.write = { buffer: new Float32Array(this.bufferLength), trackId };
        buffer = this.write.buffer;
        offset = 0;
      }
    }
    this.writeOffset = offset;
    return true;
  }

  process(inputs, outputs, parameters) {
    const output = outputs[0];
    const outputChannelData = output[0];
    const outputBuffers = this.outputBuffers;
    if (this.hasInterrupted) {
      this.port.postMessage({ event: 'stop' });
      return false;
    } else if (outputBuffers.length) {
      this.hasStarted = true;
      const { buffer, trackId } = outputBuffers.shift();
      for (let i = 0; i < outputChannelData.length; i++) {
        outputChannelData[i] = buffer[i] || 0;
      }
      if (trackId) {
        this.trackSampleOffsets[trackId] =
          this.trackSampleOffsets[trackId] || 0;
        this.trackSampleOffsets[trackId] += buffer.length;
      }
      return true;
    } else if (this.hasStarted) {
      this.port.postMessage({ event: 'stop' });
      return false;
    } else {
      return true;
    }
  }
}

registerProcessor('stream_processor', StreamProcessor);
`,S4e=new Blob([_4e],{type:"application/javascript"}),C4e=URL.createObjectURL(S4e),E4e=C4e,A4e=class{constructor({sampleRate:e=44100}={}){this.scriptSrc=E4e,this.sampleRate=e,this.context=null,this.stream=null,this.analyser=null,this.trackSampleOffsets={},this.interruptedTrackIds={}}async connect(){this.context=new AudioContext({sampleRate:this.sampleRate}),this.context.state==="suspended"&&await this.context.resume();try{await this.context.audioWorklet.addModule(this.scriptSrc)}catch(t){throw console.error(t),new Error(`Could not add audioWorklet module: ${this.scriptSrc}`)}let e=this.context.createAnalyser();return e.fftSize=8192,e.smoothingTimeConstant=.1,this.analyser=e,!0}getFrequencies(e="frequency",t=-100,i=-30){if(!this.analyser)throw new Error("Not connected, please call .connect() first");return nD.getFrequencies(this.analyser,this.sampleRate,null,e,t,i)}_start(){let e=new AudioWorkletNode(this.context,"stream_processor");return e.connect(this.context.destination),e.port.onmessage=t=>{let{event:i}=t.data;if(i==="stop")e.disconnect(),this.stream=null;else if(i==="offset"){let{requestId:r,trackId:n,offset:a}=t.data,s=a/this.sampleRate;this.trackSampleOffsets[r]={trackId:n,offset:a,currentTime:s}}},this.analyser.disconnect(),e.connect(this.analyser),this.stream=e,!0}add16BitPCM(e,t="default"){if(typeof t!="string")throw new Error("trackId must be a string");if(this.interruptedTrackIds[t])return;this.stream||this._start();let i;if(e instanceof Int16Array)i=e;else if(e instanceof ArrayBuffer)i=new Int16Array(e);else throw new Error("argument must be Int16Array or ArrayBuffer");return this.stream.port.postMessage({event:"write",buffer:i,trackId:t}),i}async getTrackSampleOffset(e=!1){if(!this.stream)return null;let t=crypto.randomUUID();this.stream.port.postMessage({event:e?"interrupt":"offset",requestId:t});let i;for(;!i;)i=this.trackSampleOffsets[t],await new Promise(n=>setTimeout(()=>n(),1));let{trackId:r}=i;return e&&r&&(this.interruptedTrackIds[r]=!0),i}async interrupt(){return this.getTrackSampleOffset(!0)}},YL=()=>"https://relayserver.spline.design/",KL=class{constructor(e,t,i){this.data=e,this.id=t,this.shared=i,this.items=[],this.isConnected=!1,this.rafId=0,this.emitter=cS(),this.voice=0,this.frequencies=new Float32Array([0]),this.onRealTimeEvent=({time:r,source:n,event:a})=>{n==="server"&&a.type==="spline.ready"?this.onSessionCreated(a):n==="server"&&a.type==="session.created"&&(this.client.createResponse(),this.client.on("realtime.event",this.onRealTimeEvent))},this.onSessionCreated=async r=>{let n=Object.values(this.client.tools).map(a=>({type:"function",...a.definition}));this.client.realtime.send("spline.tools",{tools:n}),this.client.realtime.send("spline.connect",{}),await this.wavRecorder.record(a=>this.client.isConnected()&&this.client.appendInputAudio(a.mono))},this.animate=()=>{if(this.rafId=requestAnimationFrame(this.animate),this.isConnected){let r=this.wavStreamPlayer.analyser?this.wavStreamPlayer.getFrequencies("voice"):{values:new Float32Array([0])},n=r.values.reduce((a,s)=>a+s,0)/r.values.length;this.voice=n,this.frequencies=r.values,this.emitter.emit("voice",{value:n,frequencies:r.values})}},this.client=new GL({url:YL()+"?uuidfile="+e.integration.hash}),this.wavRecorder=new qL({sampleRate:24e3}),this.wavStreamPlayer=new A4e({sampleRate:24e3})}update(e){this.data=e,this.client=new GL({url:YL()+"?uuidfile="+e.integration.hash})}setColorByName(e,t){let i=this.shared.getColorByName(e);if(i){let{id:r}=i,{r:n,g:a,b:s}=HSe.hexStringToRgb(t)??{r:0,g:0,b:0};this.shared.updateColor(r,{r:n/255,g:a/255,b:s/255})}}connect(){if(this.isConnected)return;this.isConnected=!0,this.client.updateSession({turn_detection:{type:"server_vad"}}),this.client.addTool({name:"set_personality_color",description:"returns a color based on the voice personality of the ai assistant. This should be called by the voice assistant each time it is asks to speak differently. If a color cannot be associated to the personality, the color should be a neutral color.",parameters:{type:"object",properties:{color:{type:"string",description:"css hex color string, reflecting the personality"},personality:{type:"string",description:"the personality of the voice assistant"}},required:["color","personality"]}},({color:n})=>{this.setColorByName("Voice Assistant Color",n)});let e=this.shared.getVariablesNames().join(", ");this.client.addTool({name:"set_variable",description:"Sets a Spline variable value when asked by the user.",parameters:{type:"object",properties:{name:{type:"string",description:`The name of the variable that needs to be set. Here's a list of available variables: ${e}. It the variable does not exist, don't call the function and warn the user about it.`},value:{type:"string",description:"The new value for this variable, should always be a string even for number and boolean variables, assume that the value will be cast to the proper type afterwards."}},required:["name","value","type"]}},({name:n,value:a})=>{let s=this.shared.getVariableByName(n);if(s){let o=this.shared.getVariable(s.id),l;typeof o=="number"?l=parseFloat(a):typeof o=="boolean"?l=a.toLowerCase()==="true":l={textValue:a},this.shared.updateVariable(s.id,l)}});let t=this.shared.getColorNames().join(", ");this.client.addTool({name:"set_color",description:"Sets a Spline color asset value when asked by the user.",parameters:{type:"object",properties:{name:{type:"string",description:`The name of the color asset that needs to be set. Here's a list of available color assets: ${t}. It the color asset does not exist, don't call the function and warn the user about it.`},value:{type:"string",description:"css hex color string"}},required:["name","value"]}},({name:n,value:a})=>{this.setColorByName(n,a)});let i=this.shared.scene,r=[];i.traverseEntity(n=>{n.data.events.forEach(a=>{if(a.data.type==="AIAssistantTrigger"){let{description:s}=a.data;r.push(s)}})}),this.client.addTool({name:"trigger_event",description:"Trigger an event by name, here are the available events, please match what the user is asking for to one of these if it applies, otherwise don't call the function and warn the user.",parameters:{type:"object",properties:{description:{type:"string",description:`The name of the event that needs to be triggered. Here's a list of available events: ${JSON.stringify(r)}.`},direction:{type:"string",description:"default is forward, but can be forward or backward. Always set to forward unless the user ask to reverse or cancel the event, then set to backward."}},required:["description","direction"]}},({description:n,direction:a})=>{this.emitter.emit("trigger_event",{description:n,direction:a})}),this.client.on("error",n=>console.error(n)),this.client.on("conversation.interrupted",async()=>{let n=await this.wavStreamPlayer.interrupt();if(n!=null&&n.trackId){let{trackId:a,offset:s}=n;await this.client.cancelResponse(a,s)}}),this.client.on("conversation.updated",async({item:n,delta:a})=>{var o;let s=this.client.conversation.getItems();if(a!=null&&a.audio&&this.wavStreamPlayer.add16BitPCM(a.audio,n.id),n.status==="completed"&&((o=n.formatted.audio)==null?void 0:o.length)){let l=await qL.decode(n.formatted.audio,24e3,24e3);n.formatted.file=l}this.items=s}),this.animate()}disconnect(){cancelAnimationFrame(this.rafId),this.voice=0,this.isConnected=!1}async start(){try{await this.wavRecorder.end()}catch{}await this.wavRecorder.begin(),this.client.on("realtime.event",this.onRealTimeEvent),await this.wavStreamPlayer.connect(),await this.client.connect()}async stop(){try{this.client.off("realtime.event",this.onRealTimeEvent)}catch(e){console.error(e)}this.client.disconnect(),await this.wavRecorder.end(),await this.wavStreamPlayer.interrupt()}computeAnalysisForListenerEvent(e){if(e.analysis==="range"){let t=this.frequencies.slice(...e.analysisRange);return t.reduce((i,r)=>i+r,0)/t.length}return e.analysis==="single"?this.frequencies[e.analysisSingle]:this.voice}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}};function TM(e){return"variable_"+e}var M4e=class extends rCe{constructor(e){super(),this.shared=e}create(e){return new l$(e,this.shared)}},aD=class{constructor(e,t={},i=!0,r=!1){if(this.data=e,this.needsJitter=i,this.enableLocalStorageForPersistentVariables=r,this.geometryCache=new jL(!0),this.geometryCache2=new jL(!1),this.imageHolderCache=new M4e(this),this.thisContext={scene:s4e,shared:this},this.deletedMaterial=new MM(_a.defaultTwoLayerData("phong"),this.thisContext,""),this.deletedImage=new Od(iM.emptyImage,this),this.deletedVideo=new Od(Sx.defaultVideo,this),this.materials={},this.images={},this.uiBuffers={},this.videos={},this.colors={},this.audios={},this.particles={},this.fonts={},this.variables={},this.userAPIs={},this.userWebhooks={},this.mouseProperty=null,this.raycastProperty=null,this.requestRender=()=>{this._requestRender&&this._requestRender()},t.images)for(let[n,a]of Object.entries(t.images))this.addImage(n,a);if(t.videos)for(let[n,a]of Object.entries(t.videos))this.addVideo(n,a);if(t.audios)for(let[n,a]of Object.entries(t.audios))this.addAudio(n,a);if(t.particles)for(let[n,a]of Object.entries(t.particles))this.addParticle(n,a);this.reset(e)}setRequestRender(e){this._requestRender=e}getImageLoadPromises(){return Object.values(this.images).map(e=>e.loadPromise)}setEntityOpContext(e){this.entityOpContext=e}reset(e,t=!1){this.data=e,this.resetLib(e.lib);for(let{id:i,data:r}of e.variables)this.addVariableHolder(i,r),t&&this.updateVariableHolder(i,r);for(let[i,r]of Object.entries(e.userAPIs))this.addUserAPI(i,r);for(let[i,r]of Object.entries(e.userWebhooks))this.addUserWebhook(i,r);for(let[i,r]of Object.entries(e.images))this.addImage(i,r);for(let[i,r]of Object.entries(e.videos))this.addVideo(i,r);for(let[i,r]of Object.entries(e.colors))this.addColor(i,r);for(let[i,r]of Object.entries(e.materials))this.addMaterial(i,r);for(let[i,r]of Object.entries(e.audios))this.addAudio(i,r);for(let[i,r]of Object.entries(e.particles))this.addParticle(i,r);for(let[i,r]of Object.entries(e.fonts))this.addFont(i,r)}addMaterial(e,t){if(this.materials[e]){let i=this.materials[e];i.reset(t,this.thisContext),i.dispose()}else{let i=new MM(t,this.thisContext,e);this.materials[e]=i}}deleteMaterial(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){return this.materials[e]??this.deletedMaterial}material(e){return typeof e=="string"?this.getMaterialOrDeletedPlaceholder(e):e==null?(console.error("material is undefined or null"),this.deletedMaterial):new iD(e,this.thisContext)}getMaterials(){return this.materials}addImage(e,t){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(t.data),!0):(this.images[e]=new Od(t,this),!1)}deleteImage(e){let t=this.images[e];t&&(t.dispose(),delete this.images[e])}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]??this.deletedImage}image(e){return typeof e=="string"?this.getImage(e):this.imageHolderCache.load(e)}addUIBuffer(e,t){return this.uiBuffers[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.uiBuffers[e].updateSrc(t),!0):(this.uiBuffers[e]=new Od(t,this),!1)}uiBuffer(e){return this.uiBuffers[e]}addVideo(e,t){return this.videos[e]?(this.videos[e].updateSrc(t.data),!0):(this.videos[e]=new Od(t,this),!1)}deleteVideo(e){let t=this.videos[e];t&&(t.dispose(),delete this.videos[e])}getVideo(e){return this.videos[e]??this.deletedVideo}video(e){return typeof e=="string"?this.getVideo(e):this.imageHolderCache.load(e)}addColor(e,t){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):("a"in t?this.colors[e]=new Ux(t.r,t.g,t.b,t.a):this.colors[e]=new Ux(t.r,t.g,t.b,1),!1)}updateColor(e,t){if(this.colors[e]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let i=this.colors[e];return this.colors[e].r=t.r??i.r,this.colors[e].g=t.g??i.g,this.colors[e].b=t.b??i.b,this.colors[e].a=t.a??i.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}getColorNames(){return Object.values(this.data.colors).map(e=>e.name)}getColorByName(e){for(let t in this.data.colors)if(this.data.colors[t].name===e)return{color:this.colors[t],id:t}}color(e){let t;if(typeof e=="string"){let i=this.getColor(e);i?t=i:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),t=new Ea(0,0,0,0))}else return"a"in e?new Ea(e.r,e.g,e.b,e.a):new Ea(e.r,e.g,e.b,1);return t}addAudio(e,t){this.audios[e]=t}getAudio(e){let t=this.audios[e];if(t instanceof fg)return t;{let i=new fg({src:t.data});return this.audios[e]=i,i}}addParticle(e,t){this.particles[e]=t}getParticle(e){return this.particles[e]}deleteParticle(e){this.particles[e]&&delete this.particles[e]}deleteAudio(e){let t=this.audios[e];t&&(t instanceof fg&&t.dispose(),delete this.audios[e])}addFont(e,t){this.fonts[e]=new r4e(t),this.fonts[e].loadingPromise.then(()=>this.requestRender())}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._requestRender=void 0,Object.values(this.audios).forEach(e=>{e instanceof fg&&e.dispose()}),this.audios={},this.particles={},this.geometryCache.dispose(),this.geometryCache2.dispose()}addVariableHolder(e,t){if(this.variables[e]===void 0){let i=t.value;if(this.enableLocalStorageForPersistentVariables&&t.persistent){let r=localStorage.getItem(TM(e));i=r!==null?JSON.parse(r):t.value}return this.variables[e]={value:i,locations:[],persistent:t.persistent},"dynamicVariableType"in t&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0),!0}return this.variables[e].value=t.value,!1}resetDynamicVariablePlayState(){for(let e in this.variables)this.variables[e].dynamicVariablePlayState!==void 0&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0)}updateVariableHolder(e,t){this.updateVariable(e,t.value)}updateVariable(e,t){if(this.variables[e]===void 0)return!1;this.variables[e].value=t,this.enableLocalStorageForPersistentVariables&&this.variables[e].persistent&&localStorage.setItem(TM(e),JSON.stringify(t));let i=t;for(;typeof i=="string";)i=this.variables[i].value;let r=this.entityOpContext.scene;for(let n=this.variables[e].locations.length-1;n>=0;n--){let a=this.variables[e].locations[n];if(a[0]==="material"){let s=a[1],o=i,l={scene:r,shared:this},c=a.slice(2);r.traverseMaterial(d=>{let h=d.root??d;h.uuid===s&&h.onVariableUpdate(c,o,l)});let u=this.materials[s];u&&u.onVariableUpdate(c,o,l)}else{let s=r.find(a[0]);if(s===void 0){this.variables[e].locations.splice(n,1);continue}if(a[1]!=="geometry"&&a[1]!=="particles"){for(let o=1;o<a.length-1;o++)s=s[a[o]];a[1]==="rotation"?s[a[a.length-1]]=i*kt.DEG2RAD:s[a[a.length-1]]=i}if(s=r.find(a[0]),s.type==="ParticleEmitter"&&s.updateVariableState(i,a),ji.is(s))if(a[1]==="position"||a[1]==="rotation"||a[1]==="scale")s.onVariableUpdate();else if(a[1]==="geometry"){let o=s;s.component&&(o=s.component);let l=o.dataPatched;o.chooseGeoemtryCache(this).forceDelete(l.geometry),o.createGeometryDelayed(this.entityOpContext),o.onVariableUpdate(!0),o.invalidateDownstreamBooleanData(),o.instances.forEach(c=>{let u=c.dataPatched;c.chooseGeoemtryCache(this).forceDelete(u.geometry),c.createGeometryDelayed(this.entityOpContext),c.onVariableUpdate(!0),c.invalidateDownstreamBooleanData()})}else a[1]==="morphTargetInfluences"&&s.updateMorphInfluences(a[2],i)}}return this.requestRender(),!0}deleteVariable(e){this.variables[e]&&delete this.variables[e]}getVariable(e,t){var i,r,n;if(Array.isArray(e)){if(e[0]==="mouse")return((i=this.mouseProperty)==null?void 0:i[e[1]])??0;if(e[0]==="raycast")return((r=this.raycastProperty)==null?void 0:r[e[1]])??0;let a=this.entityOpContext.scene.find(e[0]);if(e[1]==="width"||e[1]==="height"||e[1]==="depth")return a.geometry.userData.parameters[e[1]];for(let s=1;s<e.length;s++)a=a[e[s]];return e[1]==="rotation"&&(a*=kt.RAD2DEG),a}for(let a in this.variables){if(t===void 0)break;let s=this.variables[a],o=(n=s.locations)==null?void 0:n.findIndex(l=>Un.equal(l,t));o!==void 0&&o!==-1&&s.locations.splice(o,1)}if(typeof e=="string"){let a=e,s=e;do{if(s=a,this.variables[a]===void 0)break;let o=this.variables[a].value;t&&this.variables[s]!==void 0&&this.variables[s].locations.push(t),a=o}while(typeof a=="string");return a}else return e}getVariables(){return this.variables}getVariablesNames(){return this.data.variables.map(e=>e.data.name)}getVariableByName(e){for(let t of this.data.variables)if(t.data.name===e)return{variable:t.data,id:t.id}}getDynamicVariablePlayState(e){var t;return(t=this.variables[e])==null?void 0:t.dynamicVariablePlayState}setDynamicVariablePlayState(e,t){this.variables[e]!==void 0&&(this.variables[e].dynamicVariablePlayState=t)}getDynamicVariableToggleIsForward(e){var t;return(t=this.variables[e])==null?void 0:t.dynamicVariableToggleIsForward}setDynamicVariableToggleIsForward(e,t){this.variables[e]!==void 0&&(this.variables[e].dynamicVariableToggleIsForward=t)}resetLib(e){for(let[t,i]of Object.entries(e.images))this.addImage(t,i.asset);for(let[t,i]of Object.entries(e.audios))this.addAudio(t,i.asset);for(let[t,i]of Object.entries(e.particles))this.addParticle(t,i.asset);for(let[t,i]of Object.entries(e.colors))this.addColor(t,i.asset);for(let[t,i]of Object.entries(e.fonts))this.addFont(t,i.asset);for(let[t,i]of Object.entries(e.materials))this.addMaterial(t,i.asset);for(let[t,i]of Object.entries(e.videos))this.addVideo(t,i.asset);for(let[t,i]of Object.entries(e.variables))this.addVariableHolder(t,i.asset)}updateLibByOp(e,t){e.path[0]==="images"?e.path.length===1&&e.type===1?this.addImage(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteImage(e.id):e.path[0]==="videos"?e.path.length===1&&e.type===1?this.addVideo(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVideo(e.id):e.path[0]==="audios"?e.path.length===1&&e.type===1?this.addAudio(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteAudio(e.id):e.path[0]==="particles"?e.path.length===1&&e.type===1?this.addParticle(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteParticle(e.id):e.path[0]==="colors"?e.path.length===1&&e.type===1?this.addColor(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteColor(e.id):e.path[0]==="materials"?e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteMaterial(e.id):e.path[0]==="fonts"?e.path.length===1&&e.type===1?this.addFont(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteFont(e.id):e.path[0]==="variables"?e.path.length===1&&e.type===1?this.addVariableHolder(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVariable(e.id):e.path[0]==="components"&&t.updateByLibOp(e,this)}updateByOp(e,t,i){var r;if(this.data=t,e.path[0]==="images")e.path.length===2&&e.type===0?e.props.data&&this.getImage(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addImage(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteImage(e.id);else if(e.path[0]==="videos")e.path.length===2&&e.type===0?e.props.data&&this.getVideo(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addVideo(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteVideo(e.id);else if(e.path[0]==="audios")e.path.length===2&&e.type===0?e.props.data&&this.addAudio(e.path[1],t.audios[e.path[1]]):e.path.length===1&&e.type===1?this.addAudio(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteAudio(e.id);else if(e.path[0]==="particles")e.path.length===2&&e.type===0?e.props.data&&this.addParticle(e.path[1],t.particles[e.path[1]]):e.path.length===1&&e.type===1?this.addParticle(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteParticle(e.id);else if(e.path[0]==="colors")e.path.length===2&&e.type===0?this.updateColor(e.path[1],e.props):e.path.length===1&&e.type===1?this.addColor(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteColor(e.id);else if(e.path[0]==="materials")e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data):e.path.length===1&&e.type===2?this.deleteMaterial(e.id):e.path.length>1&&this.getMaterial(e.path[1]).updateByOp(na.drop(e,2),t.materials[e.path[1]],{shared:this,scene:i});else if(e.path[0]==="fonts")e.path.length===2&&e.type===0?this.updateFont(e.path[1],e,i):e.path.length===1&&e.type===1?this.addFont(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteFont(e.id);else if(e.path[0]==="variables")e.path.length===2&&e.type===0?"value"in e.props?this.updateVariable(e.path[1],e.props.value):"persistent"in e.props&&(this.variables[e.path[1]].persistent=e.props.persistent):e.path.length===1&&e.type===4?this.addVariableHolder(e.id,e.data):e.path.length===1&&e.type===5&&this.deleteVariable(e.id);else if(e.path[0]==="userAPIs"){if(e.path.length===1&&e.type===1)this.addUserAPI(e.id,e.data);else if(e.path.length===1&&e.type===2)this.deleteUserAPI(e.id);else if(typeof e.path[1]=="string"){let n=t.userAPIs[e.path[1]];if(n){let a=e.type===0&&e.props.debounce===void 0,s=this.getUserAPI(e.path[1]);s instanceof KL?s.update(n):s==null||s.update(n,this,a)}}}else if(e.path[0]==="userWebhooks"){if(e.path.length===1&&e.type===1)this.addUserWebhook(e.id,e.data);else if(e.path.length===1&&e.type===2)this.deleteUserWebhook(e.id);else if(typeof e.path[1]=="string"){let n=t.userWebhooks[e.path[1]];n&&((r=this.getUserWebhook(e.path[1]))==null||r.update(n))}}else e.path[0]==="lib"&&this.updateLibByOp(na.drop(e,1),i)}updateFont(e,t,i){if(t.props.url){let r=this.getFont(e),n={...this.data.fonts[e],url:t.props.url};r.update(n),r.loadingPromise.then(()=>this.requestRender()),i.updateFont(e,this)}}addUserAPI(e,t){var i,r;return this.userAPIs[e]?(this.userAPIs[e].update(t,this),!0):((i=this.openAIRealtime)==null?void 0:i.id)===e?(this.openAIRealtime.update(t),!0):((r=t.integration)==null?void 0:r.type)==="VoiceAssistant"?(this.openAIRealtime=new KL(t,e,this),!1):(this.userAPIs[e]=new EG(e,t,this),!1)}getUserAPI(e){var t;return((t=this.openAIRealtime)==null?void 0:t.id)===e?this.openAIRealtime:this.userAPIs[e]}getUserAPIs(){return this.userAPIs}deleteUserAPI(e){let t=this.userAPIs[e];t&&(t.dispose(),delete this.userAPIs[e])}addUserWebhook(e,t){return this.userWebhooks[e]?(this.userWebhooks[e].update(t),!0):(this.userWebhooks[e]=new u4e(e,t),!1)}getUserWebhook(e){return this.userWebhooks[e]}getUserWebhooks(){return this.userWebhooks}deleteUserWebhook(e){let t=this.userWebhooks[e];t&&(t.dispose(),delete this.userWebhooks[e])}get scene(){return this.entityOpContext.scene}};new aD(yo.emptyData());var e0=class extends ms{updateByPatchedOp(e,t,i){if(super.updateByPatchedOp(e,t,i),D2e(e.path,["materials"])!==null&&e.type===0&&Array.isArray(this.material))for(let[r,n]of Object.entries(e.props)){let a=i.shared.material(n);this.material[Number(r)]=a}else if(Cr(e.path,["material"])&&this.material instanceof lh)"material"in t&&typeof t.material!="string"&&this.material.updateByOp(na.drop(e,1),t.material,i);else if(Cr(e.path,["materials","*"])&&Array.isArray(this.material)){let r=e.path[1];if("materials"in t&&r<this.material.length){let n=t.materials[r];typeof n!="string"&&this.material[r].updateByOp(na.drop(e,2),n,i)}}}get needsAO(){return this.material!==void 0?(Array.isArray(this.material)?this.material[0]:this.material).hasAO:!1}updateState(e,t){var r,n;super.updateState(e,t),e.castShadow!==void 0&&(this.castShadow=e.castShadow),e.receiveShadow!==void 0&&(this.receiveShadow=e.receiveShadow);let i=this.dataPatched;if(((r=e.geometry)==null?void 0:r.type)!=="NonParametricGeometry"&&"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=t.shared.material(e.material).getFlavor(i.flatShading,i.side,i.wireframe),t.scene.markNeedsUpdateRendererDirty()),(((n=e.geometry)==null?void 0:n.type)==="NonParametricGeometry"||"materials"in e)&&("materials"in e&&e.materials!==void 0?(this.disposeMaterial(),this.material=e.materials.map(a=>t.shared.material(a).getFlavor(i.flatShading,i.side,i.wireframe)),t.scene.markNeedsUpdateRendererDirty()):"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=[t.shared.material(e.material).getFlavor(i.flatShading,i.side,i.wireframe)],t.scene.markNeedsUpdateRendererDirty())),e.flatShading!==void 0||e.wireframe!==void 0||e.side!==void 0)if(Array.isArray(this.material))for(let a=0;a<this.material.length;a++)this.material[a]=this.material[a].getFlavor(i.flatShading,i.side,i.wireframe);else this.material=this.material.getFlavor(i.flatShading,i.side,i.wireframe)}disposeMaterial(){this.material&&mW(this.material).forEach(e=>{e instanceof lh&&(e instanceof MM||e.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},XL=new H,QL=new vi,JL=new vi,T4e=new H,eB=new pt,Ua=class extends e0{constructor(e,t,i){super(e,t),this.data=t,this.isSkinnedMesh=!1,this.localGeometry=void 0,t.bindMode&&t.bindMatrix&&(this.bindMode=t.bindMode,this.bindMatrix=new pt().fromArray(t.bindMatrix),this.bindMatrixInverse=new pt)}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof Kt&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof aD){let e=this.geometryCreateDeleyed,t=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=t.get(this.dataPatched.geometry,e,this)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return Ax.is2DParametricMesh(e.type)&&e.depth===0}get is2DType(){return Ax.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return this.geometry.userData.type==="NonParametricGeometry"}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),Cr(e.path,["geometry"])&&this.updateByPatchedOpGeometry(na.drop(e,1),t.geometry,i)}removeInteractionGeometry(e){var t;(t=this.localGeometry)==null||t.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,t){var r;this.invalidateDownstreamBooleanData();let i=this.data.geometry.type;if(i==="NonParametricGeometry"||i==="SubdivGeometry"){let n=e;if(this.localGeometry===void 0){let c={...this.data.geometry,...n};this.localGeometry=E1(c,t,this.data.flatShading,this)}let a,s,o;n.scaleBaked?[a,s,o]=n.scaleBaked:{width:a,height:s,depth:o}=n;let l=this.localGeometry.userData;l.sxPrev!==void 0&&xM(this.localGeometry.attributes,a/l.sxPrev,s/l.syPrev,o/l.szPrev),l.sxPrev=a,l.syPrev=s,l.szPrev=o}else{let n={...this.data.geometry,...e};(r=this.localGeometry)==null||r.dispose(),this.localGeometry=E1(n,t,this.data.flatShading,this)}}refreshAttachedClonersInteractions(){for(let e of this.attachedSurfaceCloners)e.update()}refreshAttachedCloners(e){for(let t of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(t.object)}refreshAttachedPaths(e){for(let t of this.attachedPaths)e.scene.addPendingCommand(()=>t.updateShape())}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}updateByPatchedOpGeometry(e,t,i){var n;let r=!1;e.type===0&&e.path.length===0&&Object.keys(e.props).includes("scaleBaked")&&this.geometryCreateDeleyed instanceof as&&this.chooseGeoemtryCache(i.shared).mutateIfUnique(this.geometryCreateDeleyed.data,t)===this.geometryCreateDeleyed&&(r=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(t,e.props.scaleBaked),this.refreshAttachedCloners(i),this.refreshAttachedPaths(i)),r||((n=i.scene)==null||n.markGeometryCacheDirty(),this.createGeometryDelayed(i)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,t){this.createGeometryDelayed(t)}updateState(e,t){e.geometry!==void 0&&this.updateGeometryOnStateUpdate(e.geometry,t);let i=e.morphTargetInfluences;if(i){this.updateMorphTargets(),this.geometry.morphTargetsRelative=!0;for(let{data:{name:r,value:n}}of i)this.updateMorphInfluences(r,t.shared.getVariable(n,[this.uuid,"morphTargetInfluences",r]))}super.updateState(e,t)}updateMorphInfluences(e,t){if(this.morphTargetDictionary===void 0)return;let i=this.morphTargetDictionary[e];i!==void 0&&(this.morphTargetInfluences[i]=t)}updateGeometryGroupsIfNeeded(){var e;Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max(((e=this.geometry.getIndex())==null?void 0:e.count)??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,t){let i=this.geometry.userData.parameters;this.is2DType?e.set(0,0,i.depth*.5):this.isNonParametric?(e.setScalar(0),this.geometry.boundingSphere&&e.copy(this.geometry.boundingSphere.center),t.set(i.width,i.height,i.depth??0).multiplyScalar(.5)):e.setScalar(0),t.set(i.width,i.height,i.depth??0).multiplyScalar(.5)}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}bind(e,t){this.skeleton=e,this.isSkinnedMesh=!0,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(e){let t=new vi,i=this.geometry.attributes.skinWeight;for(let r=0,n=i.count;r<n;r++){t.fromBufferAttribute(i,r);let a=1/t.manhattanLength();a!==1/0?t.multiplyScalar(a):t.set(1,0,0,0),i.setXYZW(r,t.x,t.y,t.z,t.w)}}boneTransform(e,t){let i=this.skeleton;if(i===void 0)return;let r=this.geometry;QL.fromBufferAttribute(r.attributes.skinIndex,e),JL.fromBufferAttribute(r.attributes.skinWeight,e),XL.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let n=0;n<4;n++){let a=JL.getComponent(n);if(a!==0){let s=QL.getComponent(n);eB.multiplyMatrices(i.bones[s].matrixWorld,i.boneInverses[s]),t.addScaledVector(T4e.copy(XL).applyMatrix4(eB),a)}}return t.applyMatrix4(this.bindMatrixInverse)}};function P4e(e){var s,o;if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position||!e.geometry.attributes.normal)return;let t=new Map,i=e.geometry.attributes,r=i.position.array,n=i.normal.array,a=new Float32Array(r.length);for(let l=0;l<r.length;l+=3){let c=`${r[l]}_${r[l+1]}_${r[l+2]}`,u=new H(n[l],n[l+1],n[l+2]);t.has(c)?(s=t.get(c))==null||s.normals.push(u):t.set(c,{normals:[u],result:new H})}t.forEach((l,c)=>{for(let u of l.normals)l.result.add(u);l.result.divideScalar(l.normals.length)});for(let l=0;l<r.length;l+=3){let c=`${r[l]}_${r[l+1]}_${r[l+2]}`,u=(o=t.get(c))==null?void 0:o.result;u&&(a[l]=u.x,a[l+1]=u.y,a[l+2]=u.z)}e.geometry.setAttribute("extrudeNormal",new It(a,3))}function D4e(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,i=new Float32Array(t.length),r=new H;for(let n=0;n<t.length;n+=3)r.set(t[n],t[n+1],t[n+2]).normalize(),i[n]=r.x,i[n+1]=r.y,i[n+2]=r.z;e.geometry.setAttribute("extrudeNormal",new It(i,3))}function sD(e){if(Array.isArray(e.material)){for(let t of e.material)if(t.getLayersOfType("outline").length===0)return}else if(!(e.material instanceof lh)||e.material.getLayersOfType("outline").length===0)return;e instanceof Ua&&e.is2DAndNoDepth?D4e(e):P4e(e)}function oD(e){if(!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,i=new Float32Array(t.length),r=parseInt(e.uuid.replace(/\D/g,"")),n=[kt.seededRandom(r),kt.seededRandom(r+1e4),kt.seededRandom(r+2e4)];for(let a=0;a<t.length;a++)i[a]=n[a%3];e.geometry.setAttribute("randomColor",new ui(i,3))}var jl=new gn,V0=new H;function I4e(e){let t=!1;return e.scene.objects.traverse((i,r)=>{r.type==="Mesh"&&r.geometry.type==="SubdivGeometry"&&(t=!0)}),t}var A1=class extends Ua{constructor(e,t,i){super(e,t,i),this.data=t,this.hiddenMatrixOld=new pt,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(e,t){let i=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),t.set(i.width,i.height,i.depth??0).multiplyScalar(.5)}createGeometryByControls(e){var a,s,o;if(this.skipReactionUpdate===!0)return;let t=(a=this.localGeometry)==null?void 0:a.uuid,{originalGeometry:i,subdividedGeometry:r,subdivPointer:n}=as.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=n,i!==void 0&&((s=this.originalGeometry)==null||s.dispose(),this.originalGeometry=i),r!==void 0&&((o=this.subdividedGeometry)==null||o.dispose(),this.subdividedGeometry=r??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,sD(this),oD(this),this.calcBoundingBox(),t&&(this.localGeometry.uuid=t)}updateState(e,t){if(super.updateState(e,t),e.flatShading!==void 0){let i=this.material;this.material=Array.isArray(i)?i.map(r=>r.getFlavor(!1,r.side,r.wireframe)):i.getFlavor(!1,i.side,i.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(t)}}updateMesh(e=!1){as.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&as.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=as.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=as.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(e,t){let i=this.localGeometry;this.localGeometry=this.originalGeometryNew,ms.prototype.raycast.call(this,e,t),this.localGeometry=i}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Fs,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,i=e.boundingSphere.center;jl.setFromBufferAttribute(t),jl.getCenter(i),e.boundingSphere.radius=i.distanceTo(jl.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),jl.getSize(V0),this.hasNonUniformScale&&V0.divide(this.scale);let r={width:V0.x,height:V0.y,depth:V0.z};return this.geometry.userData.parameters=r,r}updateBoundingSphere(e){let t=this.originalGeometry;jl.min.set(e[0],e[2],e[4]),jl.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(jl.min.applyMatrix4(this.shearScaleInv),jl.max.applyMatrix4(this.shearScaleInv)),t.boundingSphere===null&&(t.boundingSphere=new Fs);let i=t.boundingSphere.center;jl.getCenter(i),t.boundingSphere.radius=i.distanceTo(jl.max)}freeSubdivPointer(){var e,t;this.subdivPointer&&(as.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,(e=this.originalGeometry)==null||e.dispose(),(t=this.subdividedGeometry)==null||t.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(e,t,i){super.updateByPatchedOpGeometry(e,t,i),this.localGeometry&&this.createGeometryByControls(t)}},tB=-1,O4e=1,R4e={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},k4e={polygon_center:0,edge:1,vertex:2},iw=(e,t)=>(i,r)=>!t||i===0||e===0?0:e*r/100,Ci=(e,t)=>{let i=Math.abs(t),r=i*-1;return(e-tB)*(i-r)/(O4e-tB)+r},L4e=new H,rw=new H,B4e=new H,N4e=new H;function $m(e,t){let i=B4e.fromArray(e),r=N4e.fromArray(t);rw.copy(r).sub(i);let n=rw.length();return rw.normalize().multiplyScalar(n*.5),L4e.copy(i).add(rw).toArray()}var wo=new ba,nw=new H,jx=new H,of=new H;function F4e(e){let t=[];for(let i=0;i<=e.index.count;i++)if(nw.fromArray(e.index.array,i*3),wo.setFromAttributeAndIndices(e.attributes.position,nw.x,nw.y,nw.z),wo.getNormal(jx),wo.getMidpoint(of),!(isNaN(of.x)||isNaN(of.y)||isNaN(of.z))){let{a:r,b:n,c:a}=wo,s=r.toArray(),o=n.toArray(),l=a.toArray(),c=r.distanceTo(n),u=n.distanceTo(a),d=a.distanceTo(r),h=$m(s,o),f=$m(o,l),p=$m(l,s),m=[c,u,d],v=Math.max(...m),y=m.filter(w=>Math.round(w)===Math.round(v)).length>1,x=[],b=wo.getMidpoint(of).toArray();v===c&&!y&&(x=[f,p,p],b=h),v===u&&!y&&(x=[h,p,p],b=f),v===d&&!y&&(x=[h,f,f],b=p),y&&(x=[h,f,p]),t.push({vertices:[s,o,l],faceCenters:x,midpoint:b,norm:wo.getNormal(jx).toArray()})}return t}function z4e(e){let t=[],{position:i}=e.attributes;for(let r=0;r<i.count;r++){wo.setFromAttributeAndIndices(i,r*3,r*3+1,r*3+2),wo.getNormal(jx),wo.getMidpoint(of);let n=wo.a.toArray(),a=wo.b.toArray(),s=wo.c.toArray();t.push({vertices:[n,a,s],faceCenters:[$m(n,a),$m(a,s),$m(s,n)],midpoint:of.toArray(),norm:jx.toArray()})}return t}var V4e=4,U4e=.5,XC=e=>.5*(1-Math.cos(e*Math.PI)),H4e=class{constructor(){this.perlin=new Array(4096)}noise(e,t=0,i=0){if(this.perlin==null){this.perlin=new Array(4096);for(let v=0;v<4096;v++)this.perlin[v]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),i<0&&(i=-i);let r=Math.floor(e),n=Math.floor(t),a=Math.floor(i),s=e-r,o=t-n,l=i-a,c,u,d=0,h=.5,f,p,m;for(let v=0;v<V4e;v++){let y=r+(n<<4)+(a<<8);c=XC(s),u=XC(o),f=this.perlin[y&4095],f+=c*(this.perlin[y+1&4095]-f),p=this.perlin[y+16&4095],p+=c*(this.perlin[y+16+1&4095]-p),f+=u*(p-f),y+=256,p=this.perlin[y&4095],p+=c*(this.perlin[y+1&4095]-p),m=this.perlin[y+16&4095],m+=c*(this.perlin[y+16+1&4095]-m),p+=u*(m-p),f+=XC(l)*(p-f),d+=f*h,h*=U4e,r<<=1,s*=2,n<<=1,o*=2,a<<=1,l*=2,s>=1&&(r++,s--),o>=1&&(n++,o--),l>=1&&(a++,l--)}return d}noiseSeed(e){let t=(()=>{let i,r;return{setSeed(n){r=i=(n??Math.random()*4294967296)>>>0},getSeed(){return i},rand(){return r=(1664525*r+1013904223)%4294967296,r/4294967296}}})();t.setSeed(e),this.perlin=new Array(4096);for(let i=0;i<4096;i++)this.perlin[i]=t.rand()}},j4e=H4e,iB=new H,rB=new pt,nB=new Vv;function aB(e){let t=!1;return e.scene.objects.traverse((i,r)=>{r.type==="Mesh"&&(r.geometry.type==="TextGeometry"||r.geometry.type==="InputGeometry")&&(t=!0)}),t}var lD=class extends Ua{constructor(e,t,i){super(e,t,i),this.data=t}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var t;let e=this.dataPatched;return((t=this.font)==null?void 0:t.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,e.geometry.height,this.fontScale,e.geometry.verticalAlign))??0}get fontScale(){let e=this.dataPatched;return this.font?e.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var e;return(((e=this.font)==null?void 0:e.ascender)??1)*this.fontScale}get descender(){var e;return(((e=this.font)==null?void 0:e.descender)??1)*this.fontScale}get lineHeight(){let e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}raycast(e,t){let{matrixWorld:i}=this;if(!(isNaN(e.ray.origin.x)||this.scale.x===0||this.scale.y===0||this.scale.z===0)&&(rB.copy(i).invert(),nB.copy(e.ray).applyMatrix4(rB),nB.intersectBox(this.singleBBox,iB))){let r=iB.applyMatrix4(i),n=e.ray.origin.distanceTo(r);t.push({distance:n,point:r.clone(),object:this})}}},Ja=1e-4,Wl,w$,x$,_$,sB=new H,oB=new H;DG.then(e=>{Wl=e,w$=[Wl.get_face_center,Wl.get_edge_midpoint,Wl.get_vertex_position],x$=[Wl.get_face_normal,Wl.get_edge_normal,Wl.get_vertex_normal],_$=[Wl.face_count,Wl.edge_count,Wl.vertex_count]});var W4e=new pt,G4e=new pt,cd=new H,aw=new H,U0=new H,QC=new H,$4e=new H,Z4e=new H,q4e=class{constructor(e,t){this.data=e,this.is3D=t,this.perlin=new j4e,e.noiseType==="perlin"?(this.perlin.noiseSeed(e.seed),t?this.noise=(i,r,n)=>this.perlin.noise(i,r,n):this.noise=i=>this.perlin.noise(i)):t?this.noise=f_e((0,hM.default)(e.seed)):this.noise=h_e((0,hM.default)(e.seed))}},hl=class extends UP(dr){constructor(e,t){super(),this.parameters=t,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.random=null,this.object=e}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(e){if(this.parent===null)this.updateState(this.parameters,e);else for(let t of this.children)t instanceof Va&&t.expand()}invalidateTransform(e){this.matrixWorldNeedsUpdate=!0,this.traverse(t=>{t instanceof Va&&t.object===e&&(t.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let e of this.children)e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD())}_updateCount(e){let t;if(e!==void 0?t=e:t=this.parameters.type==="grid"?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,this.parameters.type==="toObject"&&!this.parameters.toObject.object&&(t=0),this.parameters.type==="toObject"&&this.objectForSample){let i=this.children;if(i.length===t)return;if(i.length<t)for(let r=0,n=t-i.length;r<n;++r){let a=new Va(this.object);a.expand(),this.add(a)}else for(let r=0,n=i.length-t;r<n;++r)this.remove(i[r])}else{if(this.children.length===t)return;if(this.children.length<t)for(let i=0,r=t-this.children.length;i<r;++i){let n=new Va(this.object);n.expand(),this.add(n)}else for(let i=0,r=this.children.length-t;i<r;++i)this.remove(this.children[i])}}getRandom(e,t=!1){return(this.random===null||this.random.data.seed!==e.seed||this.random.is3D!==t)&&(this.random=new q4e(e,t)),this.random}_updateRadial(e){let t=e.radial,i=t.start*kt.DEG2RAD,r=t.end*kt.DEG2RAD,n=i-r,a=new Vn(t.rotation[0],t.rotation[1],t.rotation[2]),s;switch(t.axis){case"z":s=new H(0,0,1);break;case"y":s=new H(0,1,0);break;default:case"x":s=new H(1,0,0);break}let o=e.randomnessObject??Bd.defaultData([1,1,1]).randomnessObject,l=this.getRandom(o),c=iw(o.strength,this.parameters.randomness);for(let[u,d]of this.children.entries()){let h=u*(o.freqScale/10)+o.movement,f=l.noise(h,h,h),p=u+1;d.scale.x=t.scale[0]+c(p,Ci(f,o.scale[0]))||Ja,d.scale.y=t.scale[1]+c(p,Ci(f,o.scale[1]))||Ja,d.scale.z=t.scale[2]+c(p,Ci(f,o.scale[2]))||Ja,d.position.setScalar(0);let m=n/e.count*u-i;switch(t.axis){case"x":d.rotation.set(0,m,0);break;case"y":d.rotation.set(0,0,m);break;case"z":d.rotation.set(m,0,0);break}d.translateOnAxis(s,t.radius),d.position.x+=t.position[0]+c(p,Ci(f,o.position[0])),d.position.y+=t.position[1]+c(p,Ci(f,o.position[1])),d.position.z+=t.position[2]+c(p,Ci(f,o.position[2]));let v=c(p,Ci(f,o.rotation[0])),y=c(p,Ci(f,o.rotation[1])),x=c(p,Ci(f,o.rotation[2]));t.alignment===!0?(d.rotation.x+=a.x+v,d.rotation.y+=a.y+y,d.rotation.z+=a.z+x):d.rotation.set(a.x+v,a.y+y,a.z+x)}}_updateLinear(e){if(e.type!=="linear")throw new Error;let t=e.linear,i=new Vn(t.rotation[0],t.rotation[1],t.rotation[2]),r=e.randomnessObject??Bd.defaultData([1,1,1]).randomnessObject,n=this.getRandom(r),a=iw(r.strength,this.parameters.randomness);for(let[s,o]of this.children.entries()){let l=s*(r.freqScale/10)+r.movement,c=n.noise(l,l,l),u=s+1,d=a(u,Ci(c,r.rotation[0])),h=a(u,Ci(c,r.rotation[1])),f=a(u,Ci(c,r.rotation[2]));o.scale.x=1+(t.scale[0]-1)*s+a(u,Ci(c,r.scale[0]))||Ja,o.scale.y=1+(t.scale[1]-1)*s+a(u,Ci(c,r.scale[1]))||Ja,o.scale.z=1+(t.scale[2]-1)*s+a(u,Ci(c,r.scale[2]))||Ja,o.rotation.x=i.x*s+d,o.rotation.y=i.y*s+h,o.rotation.z=i.z*s+f,o.position.x=t.position[0]*s+a(u,Ci(c,r.position[0])),o.position.y=t.position[1]*s+a(u,Ci(c,r.position[1])),o.position.z=t.position[2]*s+a(u,Ci(c,r.position[2]))}}_updateGrid(e){let t=0,i=e.grid,r=e.randomnessObject??Bd.defaultData([1,1,1]).randomnessObject,n=this.getRandom(r,!0),a=iw(r.strength,this.parameters.randomness);if(i.useCenter===!0){let s={x:i.count[0]%2===0?2:1,y:i.count[1]%2===0?2:1,z:i.count[2]%2===0?2:1},o=new H(i.size[0]*(i.count[0]-s.x)*.5,i.size[1]*(i.count[1]-s.y)*.5,i.size[2]*(i.count[2]-s.z)*.5);for(let l=0;l<i.count[0];l++)for(let c=0;c<i.count[1];c++)for(let u=0;u<i.count[2];u++){let d=n.noise((l+1)*(r.freqScale/10)+r.movement,(c+1)*(r.freqScale/10)+r.movement,(u+1)*(r.freqScale/10)+r.movement),h=this.children[t++];h.scale.x=1+a(t,Ci(d,r.scale[0]))||Ja,h.scale.y=1+a(t,Ci(d,r.scale[1]))||Ja,h.scale.z=1+a(t,Ci(d,r.scale[2]))||Ja;let f=a(t,Ci(d,r.rotation[0])),p=a(t,Ci(d,r.rotation[1])),m=a(t,Ci(d,r.rotation[2]));h.rotation.set(f,p,m),h.position.x=i.size[0]*l-o.x+a(t,Ci(d,r.position[0])),h.position.y=i.size[1]*c-o.y+a(t,Ci(d,r.position[1])),h.position.z=i.size[2]*u-o.z+a(t,Ci(d,r.position[2]))}}else for(let s=0;s<i.count[0];s++)for(let o=0;o<i.count[1];o++)for(let l=0;l<i.count[2];l++){let c=n.noise((s+1)*(r.freqScale/10)+r.movement,(o+1)*(r.freqScale/10)+r.movement,(l+1)*(r.freqScale/10)+r.movement),u=this.children[t++];u.scale.x=1+a(t,Ci(c,r.scale[0]))||Ja,u.scale.y=1+a(t,Ci(c,r.scale[1]))||Ja,u.scale.z=1+a(t,Ci(c,r.scale[2]))||Ja;let d=a(t,Ci(c,r.rotation[0])),h=a(t,Ci(c,r.rotation[1])),f=a(t,Ci(c,r.rotation[2]));u.rotation.set(d,h,f),u.position.x=i.size[0]*s+a(t,Ci(c,r.position[0])),u.position.y=-i.size[1]*o+a(t,Ci(c,r.position[1])),u.position.z=-i.size[2]*l+a(t,Ci(c,r.position[2]))}}_updateToObject(e){var u;if(e.type!=="toObject")throw new Error;let{toObject:t}=e,i=new Vn(t.rotation[0],t.rotation[1],t.rotation[2]),r=e.randomnessObject??Bd.defaultData([1,1,1]).randomnessObject,n=this.getRandom(r),a=iw(r.strength,this.parameters.randomness);if(!t.object){for(let[,d]of this.children.entries())d.position.set(0,0,0),d.scale.setScalar(1),d.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof lD)if(!((u=this.objectForSample.font)!=null&&u.isLoaded)||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.objectForSample.isAncestorOf(this.object.uuid)){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let s=this.getSubdivData();if(s.length>0){let d=Math.round(s.length*t.count/100);this._updateCount(d)}else{let d=this.objectForSample.geometry.getAttribute("position");if(!d||isNaN(d.count)||d.count===0){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) cannot be cloned on the surface of "${this.objectForSample.name}" (${this.objectForSample.uuid}) because the latter does not have a valid geometry.`);return}}this.objectForSample.updateMatrixWorld();let o=new p_e(this.objectForSample).build(),l=R4e[t.axis],c=this.children;o.setRandomGenerator((0,hM.default)(this.object.uuid+t.seed));for(let[d,h]of c.entries()){let f=d*(r.freqScale/10)+r.movement,p=n.noise(f,f,f),m=d+1,v=a(m,Ci(p,r.rotation[0])),y=a(m,Ci(p,r.rotation[1])),x=a(m,Ci(p,r.rotation[2]));t.spreadType==="random"?o.sample(U0,QC):(s.length&&(U0.fromArray(s[d].pos),QC.fromArray(s[d].norm)),this.objectForSample instanceof A1&&U0.applyMatrix4(W4e.copy(this.objectForSample.matrixWorld).invert())),U0.applyMatrix4(this.object.hiddenMatrix.clone().invert()),h.position.copy(U0),cd.fromArray(l);let b=t.align==="normal"?QC:this.object.getWorldDirection(Z4e),w=aw.fromArray(t.position);aw.x+=a(m,Ci(p,r.position[0])),aw.y+=a(m,Ci(p,r.position[1])),aw.z+=a(m,Ci(p,r.position[2]));let S=Math.acos(b.dot(cd)),_=$4e.crossVectors(cd,b).normalize(),E=G4e.makeRotationAxis(_,S),C=b.clone().cross(this.object.up).normalize(),A=C.clone().cross(b).normalize(),M=new pt().makeBasis(C,b,A),T=new H(cd.y,cd.z,cd.x).normalize(),P=T.clone().cross(cd).normalize(),D=new pt().makeBasis(T,cd,P).invert(),k=new pt().multiplyMatrices(M,D);h.rotation.setFromRotationMatrix(k),w.applyMatrix4(E),h.position.add(w),h.rotation.x=h.rotation.x+i.x+v,h.rotation.y=h.rotation.y+i.y+y,h.rotation.z=h.rotation.z+i.z+x,h.scale.setScalar(1),h.scale.x=h.scale.x+t.scale[0]+a(m,Ci(p,r.scale[0]))||Ja,h.scale.y=h.scale.y+t.scale[1]+a(m,Ci(p,r.scale[1]))||Ja,h.scale.z=h.scale.z+t.scale[2]+a(m,Ci(p,r.scale[2]))||Ja,h.scale.multiply(this.object.scale),h.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let e=this.parameters.toObject.spreadType,t=new Map,i=(n,a)=>{let s=Math.round(n[0]*1e4)+"_"+Math.round(n[1]*1e4)+"_"+Math.round(n[2]*1e4),o=t.get(s);o?(o.pos[0]+=n[0],o.pos[1]+=n[1],o.pos[2]+=n[2],o.norm[0]+=a[0],o.norm[1]+=a[1],o.norm[2]+=a[2],o.count+=1):t.set(s,{pos:[...n],norm:[...a],count:1})};if(e==="random")return[];if(this.objectForSample instanceof A1){let n=this.objectForSample,a=k4e[e],s=_$[a],o=w$[a],l=x$[a],c=s(n.subdivPointerNew);for(let u=0;u<=c-1;u++){let d=o(n.subdivPointerNew,u),h=l(n.subdivPointerNew,u);sB.fromArray(d).applyMatrix4(n.matrixWorld),oB.fromArray(h),i(sB.toArray(),oB.toArray())}}else(this.objectForSample.geometry.index?F4e(this.objectForSample.geometry):z4e(this.objectForSample.geometry)).forEach((n,a)=>{e==="polygon_center"&&i(n.midpoint,n.norm),e==="vertex"&&(i(n.vertices[0],n.norm),i(n.vertices[1],n.norm),i(n.vertices[2],n.norm)),e==="edge"&&(i(n.faceCenters[0],n.norm),i(n.faceCenters[1],n.norm),i(n.faceCenters[2],n.norm))});let r=Array.from(t.values());for(let n of r)n.pos[0]/=n.count,n.pos[1]/=n.count,n.pos[2]/=n.count,n.norm[0]/=n.count,n.norm[1]/=n.count,n.norm[2]/=n.count;return r}updateState(e,t){var i;if(this.parameters=tS(e),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),(i=this.object.parent)==null||i.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let r=t.find(this.parameters.toObject.object);r instanceof ms?this.objectForSample=r:this.objectForSample=void 0,this.matrix=new pt,this.hiddenMatrix=new pt,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,r&&r.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},hy=e=>{var t;return t=class extends e{},t.geometryHelper=new Cl(30,30,30),t},sw=new Vv,JC=new Fs,lB=new pt,fy=(e,t,i,r,n=!1,a=e)=>{let s=t,o=a.matrixWorld;if(s.boundingSphere===null&&s.computeBoundingSphere(),JC.copy(s.boundingSphere),JC.applyMatrix4(o),i.ray.intersectsSphere(JC)===!1||(lB.copy(o).invert(),sw.copy(i.ray).applyMatrix4(lB),s.boundingBox!==null&&sw.intersectsBox(s.boundingBox)===!1))return;let l,c,u,d,h=s.index,f=s.attributes.position,p=s.drawRange,m,v;if(n===!1){let x=Math.max(0,p.start),b=Math.min(h.count,p.start+p.count);for(m=x,v=b;m<v;m+=3)if(c=h.getX(m),u=h.getX(m+1),d=h.getX(m+2),l=y(e,i,sw,f,c,u,d),l){l.faceIndex=Math.floor(m/3),r.push(l);return}}else{let x=s.attributes.position,b=new H,w=new H,S=new H,_=new H,E=2,C=1/((a.scale.x+a.scale.y+a.scale.z)/3),A=C*C,M=Math.max(0,p.start),T=Math.min(x.count,p.start+p.count);for(let P=M,D=T-1;P<D;P+=E){if(b.fromBufferAttribute(x,P),w.fromBufferAttribute(x,P+1),sw.distanceSqToSegment(b,w,_,S)>A)continue;_.applyMatrix4(a.matrixWorld);let k=i.ray.origin.distanceTo(_);k<i.near||k>i.far||r.push({distance:k,point:S.clone().applyMatrix4(a.matrixWorld),object:e})}}function y(x,b,w,S,_,E,C){let A=new H,M=new H,T=new H,P=new H,D=new H;if(A.fromBufferAttribute(S,_),M.fromBufferAttribute(S,E),T.fromBufferAttribute(S,C),w.intersectTriangle(A,M,T,!1,P)===null)return null;D.copy(P),D.applyMatrix4(x.matrixWorld);let k=b.ray.origin.distanceTo(D);return k<b.near||k>b.far?null:{faceIndex:1,distance:k,point:D.clone(),object:x}}},ow=new H,co=new ap,Y4e=class extends ry{constructor(e){let t=new Kt,i=new Sh({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],n=[],a={},s=new ii(15711266),o=new ii(15711266),l=new ii(2857471);c("n1","n2",s),c("n2","n4",s),c("n4","n3",s),c("n3","n1",s),c("f1","f2",s),c("f2","f4",s),c("f4","f3",s),c("f3","f1",s),c("n1","f1",s),c("n2","f2",s),c("n3","f3",s),c("n4","f4",s),c("p","n1",o),c("p","n2",o),c("p","n3",o),c("p","n4",o),c("u1","u2",l),c("u2","u3",l),c("u3","u1",l);function c(d,h,f){u(d,f),u(h,f)}function u(d,h){r.push(0,0,0),n.push(h.r,h.g,h.b),a[d]===void 0&&(a[d]=[]),a[d].push(r.length/3-1)}t.setAttribute("position",new It(r,3)),t.setAttribute("color",new It(n,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}update(){let e=this.geometry,t=this.pointMap;co.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let i=1,r=1,n=.8;Xo("n1",t,e,co,-i,-r,n),Xo("n2",t,e,co,i,-r,n),Xo("n3",t,e,co,-i,r,n),Xo("n4",t,e,co,i,r,n);let a=n;Xo("f1",t,e,co,-i,-r,a),Xo("f2",t,e,co,i,-r,a),Xo("f3",t,e,co,-i,r,a),Xo("f4",t,e,co,i,r,a);let s=a,o=.5;Xo("u1",t,e,co,i*.7*o,r*1.1,s),Xo("u2",t,e,co,-i*.7*o,r*1.1,s),Xo("u3",t,e,co,0,r*(1.1+.9*o),s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Xo(e,t,i,r,n,a,s){ow.set(n,a,s).unproject(r);let o=t[e];if(o!==void 0){let l=i.getAttribute("position");for(let c=0,u=o.length;c<u;c++)l.setXYZ(o[c],ow.x,ow.y,ow.z)}}var K4e=class extends hy(Y4e){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){fy(this.object,this.geometry,e,t,!0)}},PM;(e=>e.is=t=>"objectHelper"in t)(PM||(PM={}));var t0=(e,t)=>class extends HP(e){constructor(){super(...arguments),this.objectHelper=new t(this),this.gizmos={}}get geometryHelper(){return t.geometryHelper}raycast(i,r){this.objectHelper.raycast(i,r)}showGizmos(){for(let i in this.gizmos){let r=this.gizmos[i];r instanceof ox&&(r.visible=!0)}}updateEntityBoxSize(i,r){this.objectHelper.visible&&this.geometryHelper instanceof Cl?(i.setScalar(0),r.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(i,r)}hideGizmos(){for(let i in this.gizmos){let r=this.gizmos[i];r instanceof ox&&(r.visible=!1)}}},lw=790,jp=new H,e4=new H,t4=new mi,i4=new H,H0=new H,r4=new H,ja=class extends t0(ap,K4e){constructor(e="",t={...g1.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=mv.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.wasMovedBySwitchCameraAction=!1,this.super_Entity(e,t),this.previousProjectionMatrix=new pt,this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let i=this.width,r=this.height;this.orthoCamera=new G_(i*-.5,i*.5,r*.5,r*-.5,-5e4,1e4),this.perspCamera=new Ba(45,i/r,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(e){this.perspCamera.fov=e}get fov(){return this.perspCamera.fov}setNear(e,t){e==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&(e==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){e==="PerspectiveCamera"?this.toPerspective():e==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(e){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e,t,i){typeof e=="number"&&(e=new H(e,t,i)),super.lookAt(e),this.getWorldPosition(jp),this.targetOffset=jp.distanceTo(e)}getTarget(e=new H){return this.getWorldDirection(e4),this.getWorldPosition(jp),e4.multiplyScalar(this.targetOffset),e.copy(jp).add(e4),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(jp),jp.distanceTo(e)}updateUp(){this.getWorldQuaternion(t4),i4.set(0,0,1).applyQuaternion(t4),H0.copy(dr.DEFAULT_UP),this.isUpVectorFlipped&&H0.negate(),H0.applyQuaternion(t4),r4.copy(dr.DEFAULT_UP).projectOnPlane(i4),this.angleOffsetFromUp=r4.angleTo(H0),this.angleOffsetFromUp*=r4.cross(H0).dot(i4)>=0?1:-1}updateTransformState(e,t){let i=super.updateTransformState(e,t);return e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateUp(),i}getViewFrontToObject(e){let t=e.getWorldPosition(new H),i=e.getWorldDirection(new H).multiplyScalar(this.targetOffset);return{position:t.clone().add(i),target:t}}getViewToTarget(e){let t=this.getWorldDirection(new H).multiplyScalar(this.targetOffset);return{position:e.clone().sub(t),target:e}}getViewToObject(e){let t=new H;return e.getWorldPosition(t),this.getViewToTarget(t)}setViewplaneSize(e,t,i=!1){if(this.aspect=e/t,i){let r=e>t?this.aspect:1,n=e>t?1:this.aspect;this.left=-lw*.5*r,this.right=lw*.5*r,this.top=lw*.5*(1/n),this.bottom=-lw*.5*(1/n)}else this.left=-e*.5,this.right=e*.5,this.top=t*.5,this.bottom=-t*.5;this.updateProjectionMatrix()}copyViewPlaneSize(e){this.aspect=e.aspect,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,i,r,n,a){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(e,t,i,r,n,a):this.orthoCamera.setViewOffset(e,t,i,r,n,a)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}copyHistory(){this.previousProjectionMatrix&&this.previousProjectionMatrix.copy(this.projectionMatrix)}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.parent=e.parent,this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=e.view===null?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}toCameraState(e=[]){let t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return xA(t,e)}updateCameraSubtype(e,t){let i=e==="perspective"?"PerspectiveCamera":"OrthographicCamera";t.zoom!==void 0&&this.setZoom(i,t.zoom),t.near!==void 0&&this.setNear(i,t.near),t.fov!==void 0&&i==="PerspectiveCamera"&&(this.fov=t.fov)}updateState(e,t){this.updateCameraState(e,t)}updateCameraState(e,t){this.updateState_Entity(e,t),e.far!==void 0&&(this.far=e.far),e.orthographic!==void 0&&this.updateCameraSubtype("orthographic",e.orthographic),e.perspective!==void 0&&this.updateCameraSubtype("perspective",e.perspective),e.type!==void 0&&(this.cameraType=e.type),e.up!==void 0&&this.up.fromArray(e.up),e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset),e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),e.path.length===1&&e.type===0&&this.updateCameraSubtype(e.path[0],e.props)}toState(e){return{...super.toState(e),...this.toCameraState(e),type:this.cameraType}}},Wp=new pt,X4e=new pt;function cB(e){let t=!1;return e.scene.objects.traverse((i,r)=>{var n;((n=r.geometry)==null?void 0:n.type)==="BooleanGeometry"&&(t=!0)}),t}var $f=class extends e0{constructor(e,t,i){super(e,t),this.data=t,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new Kt,this.onAfterRender=(r,n,a,s,o,l)=>{super.onAfterRender(r,n,a,s,o,l),this.recomputeBoolean()},this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&e.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(e,t=!0){var r;if(this.booleanMeshSetAddress!==-1&&!e)return;for(let n=0;n<this.children.length;n++){let a=this.children[n];a instanceof $f&&a.dataPatched.visible===!0&&a.recomputeBoolean(e===!0,t)}this.meshSetAddresses=[];for(let n=0;n<this.children.length;n++){let a=this.children[n];if(a instanceof ms&&a.dataPatched.visible===!0&&((r=a.geometry.attributes.position)==null?void 0:r.count)>0&&a.geometry.drawRange.count>0&&a.booleanMeshSetAddress!==0){Wp.multiplyMatrices(a.hiddenMatrix,a.matrix);try{if(a.booleanMeshSetAddress===-1){if((a.geometry.index??a.geometry.getAttribute("position")).count/3<15e5&&(a.booleanMeshSetAddress=ru.getMeshSet(a.geometry,e===!0,t)),a.booleanMeshSetAddress===-1)return;ru.transformMeshSet(a.booleanMeshSetAddress,Wp),a.booleanMatrixInvOld.copy(Wp).invert(),a.booleanWasTransformed=!1}else a instanceof $f&&a.needsTransformForDownstream===!0?(ru.transformMeshSet(a.booleanMeshSetAddress,Wp),a.needsTransformForDownstream=!1):a.booleanWasTransformed===!0&&(ru.transformMeshSet(a.booleanMeshSetAddress,X4e.multiplyMatrices(Wp,a.booleanMatrixInvOld)),a.booleanMatrixInvOld.copy(Wp).invert(),a.booleanWasTransformed=!1)}catch(s){console.error(s),a.booleanMeshSetAddress=0,a.geometry.userData.booleanOperationDidFail=!0;continue}ru.hasOpenEdges(a.booleanMeshSetAddress)===!1||n===this.children.length-1&&this.booleanOp===2?(this.meshSetAddresses.push(a.booleanMeshSetAddress),a.geometry.userData.booleanOperationDidFail=!1):a.geometry.userData.booleanOperationDidFail="openEdges"}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new It([],0)),this.geometry.setDrawRange(0,0);return}if(e===!0)return ru.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let i=this.geometry;i.dispose(),this.geometry=new Kt,this.geometry.userData=i.userData,this.geometry.boundingSphere=i.boundingSphere;try{this.booleanMeshSetAddress=ru.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(n){this.booleanMeshSetAddress=0,this.geometry.userData.booleanOperationDidFail=!0,console.error(n)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,sD(this),oD(this)}dispose(){super.dispose(),this.geometry.dispose()}},DM;(e=>{function t(i){return ji.is(i)&&i instanceof sy}e.is=t})(DM||(DM={}));var cD=(e,t)=>class extends t0(e,t){updateState_Light(i,r){this.updateState_Entity(i,r),i.color!==void 0&&(this.color=r.shared.color(i.color)),i.intensity!==void 0&&(this.intensity=i.intensity),i.depth!==void 0&&(this.shadow.camera.far=i.depth,this.shadow.needsUpdate=!0),i.shadows!==void 0&&(this.castShadow=i.shadows)}},ll=e=>e instanceof ms,wu=e=>e!==null&&e instanceof $f,Q4e=e=>e instanceof ja,J4e=e=>DM.is(e),IM=e=>PM.is(e),eEe=new H(1,1,1),uB=new H,tEe=new H,dB=new mi,py=class extends hy(Ope){constructor(e,t=15){super(t),this.object=e,this.dummy=new yu,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=this.dummy.matrixWorld,this.matrixAutoUpdate=!1,this.object.isBone&&(this.visible=!1)}raycast(e,t){fy(this.object,py.geometryHelper,e,t,!1,this.dummy)}update(){}updateMatrix(){}updateMatrixWorld(e){this.object.matrixWorld.decompose(uB,dB,tEe),this.matrix.compose(uB,dB,eEe),super.updateMatrixWorld(e)}updateWorldMatrix(e,t){}},Zm=class extends t0(yu,py){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t),"buffer"in e&&Object.keys(e).length===1&&t.scene.reloadSplats()}},e2=class extends t0(yu,py){constructor(e,t,i){super(),this.super_Entity(e,t),this.context=i,this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t)}},S$={RED:0,GREEN:1,BLUE:2,ALPHA:3},my="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",iEe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;uniform vec4 kernel64[32];varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;}}`,cw=class extends er{constructor(e=!1,t=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new ot(null),kernel16:new ot(null),inputBuffer:new ot(null),cocBuffer:new ot(null),texelSize:new ot(new Pe),scale:new ot(1)},blending:Mn,depthWrite:!1,depthTest:!1,fragmentShader:iEe,vertexShader:my}),this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let e=2.39996323,t=new Float32Array(128),i=new Float32Array(32),r=0,n=0;for(let o=0;o<80;++o){let l=o*e,c=Math.sqrt(o)/Math.sqrt(80),u=c*Math.cos(l),d=c*Math.sin(l);o%5===0?(i[n++]=u,i[n++]=d):(t[r++]=u,t[r++]=d)}let a=[],s=[];for(let o=0;o<128;)a.push(new vi(t[o++],t[o++],t[o++],t[o++]));for(let o=0;o<32;)s.push(new vi(i[o++],i[o++],i[o++],i[o++]));this.uniforms.kernel64.value=a,this.uniforms.kernel16.value=s}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}};function hB(e,t,i){return e*(t-i)-t}function OM(e,t,i){return Math.min(Math.max((e+t)/(t-i),0),1)}var rEe=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,nEe=class extends er{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new ot(null),focusDistance:new ot(0),focusRange:new ot(0),cameraNear:new ot(.3),cameraFar:new ot(1e3)},blending:Mn,depthWrite:!1,depthTest:!1,fragmentShader:rEe,vertexShader:my}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Uu){this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-hB(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=OM(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-hB(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=OM(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Ba?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},aEe=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
#include <dithering_fragment>
}`,sEe="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",fB=class extends er{constructor(e=new Pe){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new ot(null),texelSize:new ot(new Pe),halfTexelSize:new ot(new Pe),kernel:new ot(0),scale:new ot(1)},blending:Mn,depthWrite:!1,depthTest:!1,fragmentShader:aEe,vertexShader:sEe}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setSize(e,t){let i=this.uniforms;i.texelSize.value.set(1/e,1/t),i.halfTexelSize.value.copy(i.texelSize.value).multiplyScalar(.5)}},oEe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,lEe=class extends er{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new ot(null),opacity:new ot(1)},blending:Mn,depthWrite:!1,depthTest:!1,fragmentShader:oEe,vertexShader:my}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},cEe=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,uEe=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,dS={DEPTH:0,LUMA:1,COLOR:2},dEe={DISABLED:0,DEPTH:1,CUSTOM:2},hEe=class extends er{constructor(e=new Pe,t=dS.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:zv.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new ot(null),depthBuffer:new ot(null),predicationBuffer:new ot(null),texelSize:new ot(e)},blending:Mn,depthWrite:!1,depthTest:!1,fragmentShader:cEe,vertexShader:uEe}),this.toneMapped=!1,this.edgeDetectionMode=t}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Uu){this.depthBuffer=e,this.depthPacking=t}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(e*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},fEe=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,pEe="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",Qo={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},RM=class extends er{constructor(e,t,i,r,n=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:zv.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new ot(null),depthBuffer:new ot(null),resolution:new ot(new Pe),texelSize:new ot(new Pe),cameraNear:new ot(.3),cameraFar:new ot(1e3),aspect:new ot(1),time:new ot(0)},blending:Mn,depthWrite:!1,depthTest:!1,dithering:n}),this.toneMapped=!1,e&&this.setShaderParts(e),t&&this.setDefines(t),i&&this.setUniforms(i),this.adoptCameraSettings(r)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Uu){this.depthBuffer=e,this.depthPacking=t}setShaderParts(e){return this.fragmentShader=fEe.replace(Qo.FRAGMENT_HEAD,e.get(Qo.FRAGMENT_HEAD)).replace(Qo.FRAGMENT_MAIN_UV,e.get(Qo.FRAGMENT_MAIN_UV)).replace(Qo.FRAGMENT_MAIN_IMAGE,e.get(Qo.FRAGMENT_MAIN_IMAGE)),this.vertexShader=pEe.replace(Qo.VERTEX_HEAD,e.get(Qo.VERTEX_HEAD)).replace(Qo.VERTEX_MAIN_SUPPORT,e.get(Qo.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(let t of e)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Ba?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let i=this.uniforms;i.resolution.value.set(e,t),i.texelSize.value.set(1/e,1/t),i.aspect.value=e/t}static get Section(){return Qo}},mEe=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,vEe=class extends er{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:zv.replace(/\D+/g,"")},uniforms:{inputBuffer:new ot(null),threshold:new ot(0),smoothing:new ot(1),range:new ot(null)},blending:Mn,depthWrite:!1,depthTest:!1,fragmentShader:mEe,vertexShader:my}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},gEe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,C$={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},yEe=class extends er{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new ot(e),inputBuffer:new ot(null),strength:new ot(1)},blending:Mn,depthWrite:!1,depthTest:!1,fragmentShader:gEe,vertexShader:my}),this.toneMapped=!1,this.setColorChannel(S$.RED),this.setMaskFunction(C$.DISCARD)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==Ga&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return this.defines.INVERTED!==void 0}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},bEe=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,wEe="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",xEe=class extends er{constructor(e=new Pe,t=new Pe){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new ot(null),searchTexture:new ot(null),areaTexture:new ot(null),resolution:new ot(t),texelSize:new ot(e)},blending:Mn,depthWrite:!1,depthTest:!1,fragmentShader:bEe,vertexShader:wEe}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,t){this.searchTexture=e,this.areaTexture=t}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,t){let i=this.uniforms;i.texelSize.value.set(1/e,1/t),i.resolution.value.set(e,t)}},_Ee=new ap,ud=null;function SEe(){if(ud===null){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);ud=new Kt,ud.setAttribute!==void 0?(ud.setAttribute("position",new ui(e,3)),ud.setAttribute("uv",new ui(t,2))):(ud.addAttribute("position",new ui(e,3)),ud.addAttribute("uv",new ui(t,2)))}return ud}var ys=class{constructor(e="Pass",t=new hc,i=_Ee){this.name=e,this.renderer=null,this.scene=t,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let t=this.getFullscreenMaterial();t!==null&&(t.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new Yr(SEe(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new hc),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Uu){}render(e,t,i,r,n){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,i){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t=="object"&&typeof t.dispose=="function"){if(t instanceof hc||t===this.renderer)continue;this[e].dispose()}}}},kM=class extends ys{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new lEe,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new ir(1,1,{minFilter:Ti,magFilter:Ti,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,i,r,n){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,i){i!==void 0&&(this.renderTarget.texture.type=i,i!==Ga?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===Ei&&(this.renderTarget.texture.encoding=Ei))}},CEe=class extends ys{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,i,r,n){let a=e.state.buffers.stencil;a.setLocked(!1),a.setTest(!1)}},n4=new ii,uD=class extends ys{constructor(e=!0,t=!0,i=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=i,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,i){this.color=e,this.depth=t,this.stencil=i}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,i,r,n){let a=this.overrideClearColor,s=this.overrideClearAlpha,o=e.getClearAlpha(),l=a!==null,c=s>=0;l?(n4.copy(e.getClearColor(n4)),e.setClearColor(a,c?s:o)):c&&e.setClearAlpha(s),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(n4,o):c&&e.setClearAlpha(o)}},dd=-1,Os=class extends Pa{constructor(e,t=dd,i=dd,r=1){super(),this.resizable=e,this.base=new Pe(1,1),this.preferred=new Pe(t,i),this.target=this.preferred,this.s=r}get width(){let{base:e,preferred:t,scale:i}=this,r;return t.width!==dd?r=t.width:t.height!==dd?r=Math.round(t.height*(e.width/Math.max(e.height,1))):r=Math.round(e.width*i),r}set width(e){this.preferredWidth=e}get height(){let{base:e,preferred:t,scale:i}=this,r;return t.height!==dd?r=t.height:t.width!==dd?r=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):r=Math.round(e.height*i),r}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(dd),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.base.width!==e||this.base.height!==t)&&(this.base.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferred.width!==e||this.preferred.height!==t)&&(this.preferred.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return dd}},a4=!1,pB=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let i;if(t.material.flatShading)switch(t.material.side){case za:i=this.materialsFlatShadedDoubleSide;break;case aa:i=this.materialsFlatShadedBackSide;break;default:i=this.materialsFlatShaded;break}else switch(t.material.side){case za:i=this.materialsDoubleSide;break;case aa:i=this.materialsBackSide;break;default:i=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=i[2]:t.isInstancedMesh?t.material=i[1]:t.material=i[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){let t=this.materials=[e.clone(),e.clone(),e.clone()];for(let i of t)i.uniforms=Object.assign({},e.uniforms),i.side=_l;t[2].skinning=!0,this.materialsBackSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.side=aa,r}),this.materialsDoubleSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.side=za,r}),this.materialsFlatShaded=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r.side=aa,r}),this.materialsFlatShadedDoubleSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r.side=za,r})}}render(e,t,i){let r=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,a4){let n=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,i);for(let a of n)a[0].material=a[1];this.meshCount!==n.size&&n.clear()}else{let n=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,i),t.overrideMaterial=n}e.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return a4}static set workaroundEnabled(e){a4=e}},EEe=class extends ys{constructor(e,t,i=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new uD,this.overrideMaterialManager=i===null?null:new pB(i),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new pB(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,i,r,n){let a=this.scene,s=this.camera,o=this.selection,l=s.layers.mask,c=a.background,u=e.shadowMap.autoUpdate,d=this.renderToScreen?null:t;o!==null&&s.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(a.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(d),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,a,s):e.render(a,s),s.layers.mask=l,a.background=c,e.shadowMap.autoUpdate=u}},mB=class extends ys{constructor(e,t,{resolutionScale:i=1,width:r=Os.AUTO_SIZE,height:n=Os.AUTO_SIZE,renderTarget:a}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new EEe(e,t,new oj({depthPacking:ZH}));let s=this.renderPass;s.skipShadowMapUpdate=!0,s.ignoreBackground=!0;let o=s.getClearPass();o.overrideClearColor=new ii(16777215),o.overrideClearAlpha=1,this.renderTarget=a,this.renderTarget===void 0&&(this.renderTarget=new ir(1,1,{minFilter:or,magFilter:or,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let l=this.resolution=new Os(this,r,n,i);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,i,r,n){let a=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,a)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height)}},Yi={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},AEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",MEe="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",TEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",PEe="float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",DEe="float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",IEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",OEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",REe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",kEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",LEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",BEe="float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",NEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",FEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",zEe="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",VEe="float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",UEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",HEe="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",jEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",WEe=new Map([[Yi.SKIP,null],[Yi.ADD,AEe],[Yi.ALPHA,MEe],[Yi.AVERAGE,TEe],[Yi.COLOR_BURN,PEe],[Yi.COLOR_DODGE,DEe],[Yi.DARKEN,IEe],[Yi.DIFFERENCE,OEe],[Yi.EXCLUSION,REe],[Yi.LIGHTEN,kEe],[Yi.MULTIPLY,LEe],[Yi.DIVIDE,BEe],[Yi.NEGATION,NEe],[Yi.NORMAL,FEe],[Yi.OVERLAY,zEe],[Yi.REFLECT,VEe],[Yi.SCREEN,UEe],[Yi.SOFT_LIGHT,HEe],[Yi.SUBTRACT,jEe]]),GEe=class extends Pa{constructor(e,t=1){super(),this.f=e,this.opacity=new ot(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return WEe.get(this.blendFunction)}},pc={NONE:0,DEPTH:1,CONVOLUTION:2},Pc=class extends Pa{constructor(e,t,{attributes:i=pc.NONE,blendFunction:r=Yi.SCREEN,defines:n=new Map,uniforms:a=new Map,extensions:s=null,vertexShader:o=null}={}){super(),this.name=e,this.renderer=null,this.attributes=i,this.fragmentShader=t,this.vertexShader=o,this.defines=n,this.uniforms=a,this.extensions=s,this.blendMode=new GEe(r),this.blendMode.addEventListener("change",l=>this.setChanged())}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=Uu){}update(e,t,i){}setSize(e,t){}initialize(e,t,i){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t=="object"&&typeof t.dispose=="function"){if(t instanceof hc||t===this.renderer)continue;this[e].dispose()}}}};function vB(e,t,i){for(let r of t){let n="$1"+e+r.charAt(0).toUpperCase()+r.slice(1),a=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(let s of i.entries())s[1]!==null&&i.set(s[0],s[1].replace(a,n))}}function $Ee(e,t,i,r,n,a,s){let o=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),l=o.get("fragment")!==void 0&&/mainImage/.test(o.get("fragment")),c=o.get("fragment")!==void 0&&/mainUv/.test(o.get("fragment")),u=[],d=[],h=!1,f=!1;if(o.get("fragment")===void 0)console.error("Missing fragment shader",t);else if(c&&s&pc.CONVOLUTION)console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(!l&&!c)console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);else{let p=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,m=RM.Section;if(c){let y=`	${e}MainUv(UV);
`;i.set(m.FRAGMENT_MAIN_UV,i.get(m.FRAGMENT_MAIN_UV)+y),h=!0}if(o.get("vertex")!==null&&/mainSupport/.test(o.get("vertex"))){let y=`	${e}MainSupport(`;y+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(o.get("vertex"))?`vUv);
`:`);
`,i.set(m.VERTEX_MAIN_SUPPORT,i.get(m.VERTEX_MAIN_SUPPORT)+y),u=u.concat([...o.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(x=>x[1])),d=d.concat(u).concat([...o.get("vertex").matchAll(p)].map(x=>x[1]))}d=d.concat([...o.get("fragment").matchAll(p)].map(y=>y[1])),d=d.concat([...t.defines.keys()].map(y=>y.replace(/\([\w\s,]*\)/g,""))),d=d.concat([...t.uniforms.keys()]),t.uniforms.forEach((y,x)=>a.set(e+x.charAt(0).toUpperCase()+x.slice(1),y)),t.defines.forEach((y,x)=>n.set(e+x.charAt(0).toUpperCase()+x.slice(1),y)),vB(e,d,n),vB(e,d,o);let v=t.blendMode;if(r.set(v.blendFunction,v),l){let y=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,x=`${e}MainImage(color0, UV, `;s&pc.DEPTH&&y.test(o.get("fragment"))&&(x+="depth, ",f=!0),x+=`color1);
	`;let b=e+"BlendOpacity";a.set(b,v.opacity),x+=`color0 = blend${v.blendFunction}(color0, color1, ${b});

	`,i.set(m.FRAGMENT_MAIN_IMAGE,i.get(m.FRAGMENT_MAIN_IMAGE)+x),x=`uniform float ${b};

`,i.set(m.FRAGMENT_HEAD,i.get(m.FRAGMENT_HEAD)+x)}i.set(m.FRAGMENT_HEAD,i.get(m.FRAGMENT_HEAD)+o.get("fragment")+`
`),o.get("vertex")!==null&&i.set(m.VERTEX_HEAD,i.get(m.VERTEX_HEAD)+o.get("vertex")+`
`)}return{varyings:u,transformedUv:h,readDepth:f}}var Wx=class extends ys{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new RM(null,null,null,e),this.effects=t.sort((i,r)=>r.attributes-i.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,t=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>t&&console.warn("The current rendering context doesn't support more than "+t+" uniforms, but "+this.uniformCount+" were defined"),t=e.maxVaryings,this.varyingCount>t&&console.warn("The current rendering context doesn't support more than "+t+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let e=RM.Section,t=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),i=new Map,r=new Map,n=new Map,a=new Set,s=0,o=0,l=0,c=!1,u=!1;for(let h of this.effects)if(h.blendMode.blendFunction===Yi.SKIP)l|=h.getAttributes()&pc.DEPTH;else if(l&h.getAttributes()&pc.CONVOLUTION)console.error("Convolution effects cannot be merged",h);else{l|=h.getAttributes();let f="e"+s++,p=$Ee(f,h,t,i,r,n,l);if(o+=p.varyings.length,c=c||p.transformedUv,u=u||p.readDepth,h.extensions!==null)for(let m of h.extensions)a.add(m)}let d=/\bblend\b/g;for(let h of i.values()){let f=h.getShaderCode().replace(d,`blend${h.blendFunction}`);t.set(e.FRAGMENT_HEAD,t.get(e.FRAGMENT_HEAD)+f+`
`)}l&pc.DEPTH?(u&&t.set(e.FRAGMENT_MAIN_IMAGE,`float depth = readDepth(UV);

	`+t.get(e.FRAGMENT_MAIN_IMAGE)),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,c?(t.set(e.FRAGMENT_MAIN_UV,`vec2 transformedUv = vUv;
`+t.get(e.FRAGMENT_MAIN_UV)),r.set("UV","transformedUv")):r.set("UV","vUv"),t.forEach((h,f,p)=>p.set(f,h.trim().replace(/^#/,`
#`))),this.uniformCount=n.size,this.varyingCount=o,this.skipRendering=s===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(t).setExtensions(a).setUniforms(n).setDefines(r)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=Uu){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(let i of this.effects)i.setDepthTexture(e,t)}render(e,t,i,r,n){for(let a of this.effects)a.update(e,t,r);if(!this.skipRendering||this.renderToScreen){let a=this.fullscreenMaterial;a.inputBuffer=t.texture,a.time+=r,e.setRenderTarget(this.renderToScreen?null:i),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(let i of this.effects)i.setSize(e,t)}initialize(e,t,i){this.renderer=e;for(let r of this.effects)r.initialize(e,t,i),r.addEventListener("change",n=>this.handleEvent(n));this.updateMaterial(),this.verifyResources(),i!==void 0&&i!==Ga&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}},ZEe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],dD=class extends ys{constructor({resolutionScale:e=.5,width:t=Os.AUTO_SIZE,height:i=Os.AUTO_SIZE,kernelSize:r=hS.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new ir(1,1,{minFilter:Ti,magFilter:Ti,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let n=this.resolution=new Os(this,t,i,e);n.addEventListener("change",a=>this.setSize(n.baseWidth,n.baseHeight)),this.blurMaterial=new fB,this.ditheredBlurMaterial=new fB,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=r}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,i,r,n){let a=this.scene,s=this.camera,o=this.renderTargetA,l=this.renderTargetB,c=ZEe[this.kernelSize],u=this.blurMaterial,d=t,h,f;for(this.fullscreenMaterial=u,h=0,f=c.length-1;h<f;++h){let p=h&1?l:o;u.kernel=c[h],u.inputBuffer=d.texture,e.setRenderTarget(p),e.render(a,s),d=p}this.dithering&&(u=this.ditheredBlurMaterial,this.fullscreenMaterial=u),u.kernel=c[h],u.inputBuffer=d.texture,e.setRenderTarget(this.renderToScreen?null:i),e.render(a,s)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t);let r=i.width,n=i.height;this.renderTargetA.setSize(r,n),this.renderTargetB.setSize(r,n),this.blurMaterial.setSize(r,n),this.ditheredBlurMaterial.setSize(r,n)}initialize(e,t,i){i!==void 0&&(this.renderTargetA.texture.type=i,this.renderTargetB.texture.type=i,i!==Ga?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===Ei&&(this.renderTargetA.texture.encoding=Ei,this.renderTargetB.texture.encoding=Ei))}static get AUTO_SIZE(){return Os.AUTO_SIZE}},qEe=class extends ys{constructor({width:e=Os.AUTO_SIZE,height:t=Os.AUTO_SIZE,renderTarget:i,luminanceRange:r,colorOutput:n}={}){super("LuminancePass"),this.fullscreenMaterial=new vEe(n,r),this.needsSwap=!1,this.renderTarget=i,this.renderTarget===void 0&&(this.renderTarget=new ir(1,1,{minFilter:Ti,magFilter:Ti,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let a=this.resolution=new Os(this,e,t);a.addEventListener("change",s=>this.setSize(a.baseWidth,a.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,i,r,n){let a=this.fullscreenMaterial;a.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height)}initialize(e,t,i){i!==void 0&&i!==Ga&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},YEe=class extends ys{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new uD(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,i,r,n){let a=e.getContext(),s=e.state.buffers,o=this.scene,l=this.camera,c=this.clearPass,u=this.inverted?0:1,d=1-u;s.color.setMask(!1),s.depth.setMask(!1),s.color.setLocked(!0),s.depth.setLocked(!0),s.stencil.setTest(!0),s.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),s.stencil.setFunc(a.ALWAYS,u,4294967295),s.stencil.setClear(d),s.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(e,null):(c.render(e,t),c.render(e,i))),this.renderToScreen?(e.setRenderTarget(null),e.render(o,l)):(e.setRenderTarget(t),e.render(o,l),e.setRenderTarget(i),e.render(o,l)),s.color.setLocked(!1),s.depth.setLocked(!1),s.stencil.setLocked(!1),s.stencil.setFunc(a.EQUAL,1,4294967295),s.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),s.stencil.setLocked(!0)}},xo=class extends ys{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(t)}setInput(e){if(this.inputBufferUniform=null,this.fullscreenMaterial!==null){let t=this.fullscreenMaterial.uniforms;t!==void 0&&t[e]!==void 0&&(this.inputBufferUniform=t[e])}}render(e,t,i,r,n){this.inputBufferUniform!==null&&t!==null&&(this.inputBufferUniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:i),e.render(this.scene,this.camera)}initialize(e,t,i){i!==void 0&&i!==Ga&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},s4=1/1e3,KEe=1e3,XEe=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return this.delta*s4}getFixedDelta(){return this.fixedDelta*s4}setFixedDelta(e){return this.fixedDelta=e*KEe,this}getElapsed(){return this.elapsed*s4}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=e!==void 0?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},hS={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},QEe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,JEe=class extends Pc{constructor({blendFunction:e=Yi.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:i=.025,resolutionScale:r=.5,intensity:n=1,width:a=Os.AUTO_SIZE,height:s=Os.AUTO_SIZE,kernelSize:o=hS.LARGE}={}){super("BloomEffect",QEe,{blendFunction:e,uniforms:new Map([["map",new ot(null)],["intensity",new ot(n)]])}),this.renderTarget=new ir(1,1,{minFilter:Ti,magFilter:Ti,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new qEe({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothingFactor=i,this.blurPass=new dD({resolutionScale:r,width:a,height:s,kernelSize:o});let l=this.blurPass.getResolution();l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,i){let r=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,r),this.blurPass.render(e,r,r)):this.blurPass.render(e,t,r)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height),this.luminancePass.resolution.copy(i)}initialize(e,t,i){this.blurPass.initialize(e,t,i),i!==void 0&&(this.renderTarget.texture.type=i,e.outputEncoding===Ei&&(this.renderTarget.texture.encoding=Ei))}},eAe="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",tAe=class extends Pc{constructor({blendFunction:e=Yi.NORMAL,brightness:t=0,contrast:i=0}={}){super("BrightnessContrastEffect",eAe,{blendFunction:e,uniforms:new Map([["brightness",new ot(t)],["contrast",new ot(i)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},iAe="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",rAe=class extends Pc{constructor(e=Yi.NORMAL){super("ColorAverageEffect",iAe,{blendFunction:e})}},nAe="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",aAe="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",sAe=class extends Pc{constructor({blendFunction:e=Yi.NORMAL,offset:t=new Pe(.001,5e-4)}={}){super("ChromaticAberrationEffect",nAe,{vertexShader:aAe,blendFunction:e,attributes:pc.CONVOLUTION,uniforms:new Map([["offset",new ot(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},oAe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,lAe=class extends Pc{constructor(e,{blendFunction:t=Yi.NORMAL,worldFocusDistance:i,worldFocusRange:r,focusDistance:n=0,focalLength:a=.1,focusRange:s=a,bokehScale:o=1,width:l=Os.AUTO_SIZE,height:c=Os.AUTO_SIZE}={}){super("DepthOfFieldEffect",oAe,{blendFunction:t,attributes:pc.DEPTH,uniforms:new Map([["nearColorBuffer",new ot(null)],["farColorBuffer",new ot(null)],["nearCoCBuffer",new ot(null)],["scale",new ot(1)]])}),this.camera=e,this.renderTarget=new ir(1,1,{minFilter:Ti,magFilter:Ti,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new xo(new nEe(e));let u=this.cocMaterial;u.focusDistance=n,u.focusRange=s,i!==void 0&&(u.worldFocusDistance=i),r!==void 0&&(u.worldFocusRange=r),this.blurPass=new dD({kernelSize:hS.MEDIUM,width:l,height:c});let d=this.blurPass.getResolution();d.addEventListener("change",f=>this.setSize(d.getBaseWidth(),d.getBaseHeight())),this.maskPass=new xo(new yEe(this.renderTargetCoC.texture));let h=this.maskPass.fullscreenMaterial;h.maskFunction=C$.MULTIPLY,h.colorChannel=S$.GREEN,this.bokehNearBasePass=new xo(new cw(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new xo(new cw(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new xo(new cw(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new xo(new cw(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=o}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let t=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let i of t)i.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let t=this.camera,i=t.position.distanceTo(e);return OM(-i,t.near,t.far)}setDepthTexture(e,t=Uu){this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=t}update(e,t,i){let r=this.renderTarget,n=this.renderTargetCoC,a=this.renderTargetCoCBlurred,s=this.renderTargetMasked;if(this.target!==null){let o=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=o}this.cocPass.render(e,null,n),this.blurPass.render(e,n,a),this.maskPass.render(e,t,s),this.bokehFarBasePass.render(e,s,r),this.bokehFarFillPass.render(e,r,this.renderTargetFar),this.bokehNearBasePass.render(e,t,r),this.bokehNearFillPass.render(e,r,this.renderTargetNear)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t);let r=i.width,n=i.height,a=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];a.push(this.renderTargetCoC,this.renderTargetMasked),a.forEach(s=>s.setSize(e,t)),a=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],a.forEach(s=>s.setSize(r,n)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(s=>s.fullscreenMaterial.setSize(r,n))}initialize(e,t,i){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(r=>r.initialize(e,t,i)),this.blurPass.initialize(e,t,Ga),i!==void 0&&(this.renderTarget.texture.type=i,this.renderTargetNear.texture.type=i,this.renderTargetFar.texture.type=i,this.renderTargetMasked.texture.type=i,e.outputEncoding===Ei&&(this.renderTarget.texture.encoding=Ei,this.renderTargetNear.texture.encoding=Ei,this.renderTargetFar.texture.encoding=Ei,this.renderTargetMasked.texture.encoding=Ei))}};new H;new pt;var cAe="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",uAe=class extends Pc{constructor({blendFunction:e=Yi.NORMAL,hue:t=0,saturation:i=0}={}){super("HueSaturationEffect",cAe,{blendFunction:e,uniforms:new Map([["hue",new ot(new H)],["saturation",new ot(i)]])}),this.hue=t}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((e.x*3-1)/2)}set hue(e){let t=Math.sin(e),i=Math.cos(e);this.uniforms.get("hue").value.set((2*i+1)/3,(-Math.sqrt(3)*t-i+1)/3,(Math.sqrt(3)*t-i+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}};new ii;var dAe=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,hAe=class extends Pc{constructor({blendFunction:e=Yi.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",dAe,{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}},fAe="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",pAe=class extends Pc{constructor(e=30){super("PixelationEffect",fAe,{uniforms:new Map([["active",new ot(!1)],["d",new ot(new Pe)]])}),this.resolution=new Pe,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let t=Math.floor(e);t%2>0&&(t+=1),this.d=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}};new H;new H;var gB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",yB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",mAe="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",vAe="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",lf={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},E$=class extends Pc{constructor({preset:e=lf.MEDIUM,edgeDetectionMode:t=dS.COLOR,predicationMode:i=dEe.DISABLED}={}){super("SMAAEffect",mAe,{vertexShader:vAe,blendFunction:Yi.NORMAL,attributes:pc.CONVOLUTION|pc.DEPTH,uniforms:new Map([["weightMap",new ot(null)]])});let r,n;arguments.length>1&&(r=arguments[0],n=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(t=arguments[3])),this.renderTargetEdges=new ir(1,1,{minFilter:Ti,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new uD(!0,!1,!1),this.clearPass.overrideClearColor=new ii(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new xo(new hEe),this.edgeDetectionMaterial.edgeDetectionMode=t,this.edgeDetectionMaterial.predicationMode=i,this.weightsPass=new xo(new xEe);let a=new Aj;a.onLoad=()=>{let s=new Kr(r);s.name="SMAA.Search",s.magFilter=or,s.minFilter=or,s.generateMipmaps=!1,s.needsUpdate=!0,s.flipY=!0,this.weightsMaterial.searchTexture=s;let o=new Kr(n);o.name="SMAA.Area",o.magFilter=Ti,o.minFilter=Ti,o.generateMipmaps=!1,o.needsUpdate=!0,o.flipY=!1,this.weightsMaterial.areaTexture=o,this.dispatchEvent({type:"load"})},a.itemStart("search"),a.itemStart("area"),r!==void 0&&n!==void 0?(a.itemEnd("search"),a.itemEnd("area")):typeof Image<"u"&&(r=new Image,n=new Image,r.addEventListener("load",()=>a.itemEnd("search")),n.addEventListener("load",()=>a.itemEnd("area")),r.src=gB,n.src=yB),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let t=this.edgeDetectionMaterial,i=this.weightsMaterial;switch(e){case lf.LOW:t.edgeDetectionThreshold=.15,i.orthogonalSearchSteps=4,i.diagonalDetection=!1,i.cornerDetection=!1;break;case lf.MEDIUM:t.edgeDetectionThreshold=.1,i.orthogonalSearchSteps=8,i.diagonalDetection=!1,i.cornerDetection=!1;break;case lf.HIGH:t.edgeDetectionThreshold=.1,i.orthogonalSearchSteps=16,i.diagonalSearchSteps=8,i.cornerRounding=25,i.diagonalDetection=!0,i.cornerDetection=!0;break;case lf.ULTRA:t.edgeDetectionThreshold=.05,i.orthogonalSearchSteps=32,i.diagonalSearchSteps=16,i.cornerRounding=25,i.diagonalDetection=!0,i.cornerDetection=!0;break}}setDepthTexture(e,t=Uu){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}update(e,t,i){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}dispose(){let{searchTexture:e,areaTexture:t}=this.weightsMaterial;e!==null&&t!==null&&(e.dispose(),t.dispose()),super.dispose()}static get searchImageDataURL(){return gB}static get areaImageDataURL(){return yB}},gAe=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,uw={DEFAULT:0,ESKIL:1},yAe=class extends Pc{constructor({blendFunction:e=Yi.NORMAL,technique:t=uw.DEFAULT,eskil:i=!1,offset:r=.5,darkness:n=.5}={}){super("VignetteEffect",gAe,{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new ot(r)],["darkness",new ot(n)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===uw.ESKIL}set eskil(e){this.technique=e?uw.ESKIL:uw.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},Hu=class{constructor(e,t){this.enabled=!1,this.effect=new e(t),Object.defineProperty(this,"opacity",{enumerable:!0,set(i){this.effect.blendMode.opacity.value=i},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(i){this.effect.blendMode.setBlendFunction(Number(i))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=Yi.NORMAL}},bAe=class extends Hu{constructor(){super(JEe),this.blendFunction=Yi.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},wAe=class extends Hu{constructor(){super(tAe)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},xAe=class extends Hu{constructor(){super(sAe),this.effect.offset=new Pe(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},_Ae=class extends Hu{constructor(){super(rAe)}},SAe=class extends Hu{constructor(){super(uAe),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},CAe=class extends Hu{constructor(){super(hAe),this.blendFunction=Yi.OVERLAY}},EAe=class extends Hu{constructor(){super(yAe)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},AAe=class extends Hu{constructor(e){super(lAe)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e/2e3}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=this.isPerspectiveCamera?e/2e3:(e+992)/2e3}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}setCamera(e){let t=!1;(e.isPerspectiveCamera&&this.isPerspectiveCamera===!1||!e.isPerspectiveCamera&&this.isPerspectiveCamera===!0)&&(t=!0),e.isPerspectiveCamera?(this.effect.circleOfConfusionMaterial.adoptCameraSettings(e.perspCamera),this.isPerspectiveCamera=!0):(this.effect.circleOfConfusionMaterial.adoptCameraSettings(e),this.isPerspectiveCamera=!1),t&&this.effect.setChanged()}},MAe=class extends Hu{constructor(){super(pAe)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}},TAe=`#define GLSLIFY 1
varying vec2 vUv;varying vec2 vTexCoords[9];uniform vec2 resolution;void main(){vUv=position.xy*0.5+0.5;vec2 texelSize=vec2(1.0)/resolution;vTexCoords[0]=vUv+vec2(-texelSize.x,-texelSize.y);vTexCoords[1]=vUv+vec2(0.0,-texelSize.y);vTexCoords[2]=vUv+vec2(texelSize.x,-texelSize.y);vTexCoords[3]=vUv+vec2(-texelSize.x,0.0);vTexCoords[4]=vUv+vec2(0.0,0.0);vTexCoords[5]=vUv+vec2(texelSize.x,0.0);vTexCoords[6]=vUv+vec2(-texelSize.x,texelSize.y);vTexCoords[7]=vUv+vec2(0.0,texelSize.y);vTexCoords[8]=vUv+vec2(texelSize.x,texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}`,PAe=`#define GLSLIFY 1
#include <common>
varying vec2 vUv;varying vec2 vTexCoords[9];uniform sampler2D inputBuffer;uniform sampler2D historyBuffer;uniform sampler2D velocityBuffer;uniform sampler2D depthBuffer;uniform vec2 resolution;
#define USE_YCOCG
#define USE_CATMULL_ROM
const float feedback_min=0.5;const float feedback_max=0.95;vec3 RGB_YCoCg(vec3 c){return vec3(c.x/4.0+c.y/2.0+c.z/4.0,c.x/2.0-c.z/2.0,-c.x/4.0+c.y/2.0-c.z/4.0);}vec3 YCoCg_RGB(vec3 c){return clamp(vec3(c.x+c.y-c.z,c.x+c.z,c.x-c.y-c.z),vec3(0.0),vec3(1.0));}vec4 sample_color(sampler2D tex,vec2 uv){
#ifdef USE_YCOCG
vec4 c=texture(tex,uv);return vec4(RGB_YCoCg(c.rgb),c.a);
#else
return texture(tex,uv);
#endif
}vec4 sample_catmull_rom(sampler2D tex,vec2 uv,vec2 texSize){vec2 samplePos=uv*texSize;vec2 texPos1=floor(samplePos-0.5)+0.5;vec2 f=samplePos-texPos1;vec2 w0=f*(-0.5+f*(1.0-0.5*f));vec2 w1=1.0+f*f*(-2.5+1.5*f);vec2 w2=f*(0.5+f*(2.0-1.5*f));vec2 w3=f*f*(-0.5+0.5*f);vec2 w12=w1+w2;vec2 offset12=w2/(w1+w2);vec2 texPos0=texPos1-1.0;vec2 texPos3=texPos1+2.0;vec2 texPos12=texPos1+offset12;texPos0/=texSize;texPos3/=texSize;texPos12/=texSize;vec4 result=vec4(0.0);result+=texture2D(tex,vec2(texPos12.x,texPos0.y))*w12.x*w0.y;result+=texture2D(tex,vec2(texPos0.x,texPos12.y))*w0.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos12.y))*w12.x*w12.y;result+=texture2D(tex,vec2(texPos3.x,texPos12.y))*w3.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos3.y))*w12.x*w3.y;return result;}vec3 choose_motion_vector(){
#ifdef CHOOSE_LONGEST_MOTION_VECTOR
float longest=-1.0;vec3 v_choose=vec3(-1.0);for(int i=0;i<9;i++){vec3 v=texture2D(velocityBuffer,vTexCoords[i]).rgb;float l=length(v.xy);if(l>longest){longest=l;v_choose=v;}}return v_choose;
#else
float closest_depth=1000.0;vec2 closest_uv_offset=vec2(0.0);for(int i=0;i<9;i++){float neighbor_depth=texture2D(depthBuffer,vTexCoords[i]).r;if(neighbor_depth<closest_depth){closest_uv_offset=vTexCoords[i];closest_depth=neighbor_depth;}}return texture2D(velocityBuffer,closest_uv_offset).rgb;
#endif
}vec4 clipAabb(vec3 aabb_min,vec3 aabb_max,vec4 avg,vec4 input_texel){const float FLT_EPS=0.00000001;vec3 p_clip=0.5*(aabb_max+aabb_min);vec3 e_clip=0.5*(aabb_max-aabb_min)+FLT_EPS;vec4 v_clip=input_texel-vec4(p_clip,avg.w);vec3 v_unit=v_clip.xyz/e_clip;vec3 a_unit=abs(v_unit);float ma_unit=max(a_unit.x,max(a_unit.y,a_unit.z));if(ma_unit>1.0){return vec4(p_clip,avg.w)+v_clip/ma_unit;}else{return input_texel;}}vec3 clip_aabb_variance(in vec3 cOld,in vec3 cNew,in vec3 centre,in vec3 halfSize){if(all(lessThanEqual(abs(cOld-centre),halfSize))){return cOld;}vec3 dir=(cNew-cOld);vec3 near=centre-sign(dir)*halfSize;vec3 tAll=(near-cOld)/dir;float t=0.0001;for(int i=0;i<3;i++){if(tAll[i]>=0.0&&tAll[i]<t){t=tAll[i];}}if(t>=0.0001){return cOld;}return cOld+dir*t;}void main(){vec3 v=choose_motion_vector();vec2 velocity=v.rg;vec2 previousPixelPos=vUv-velocity;vec4 currentColor=sample_color(inputBuffer,vUv);
#ifdef USE_CATMULL_ROM
vec4 previousColor=sample_catmull_rom(historyBuffer,previousPixelPos,resolution);
#else
vec4 previousColor=sample_color(historyBuffer,previousPixelPos);
#endif
#ifdef USE_YCOCG
previousColor=vec4(RGB_YCoCg(previousColor.rgb),previousColor.a);
#endif
vec4 ctl=sample_color(inputBuffer,vTexCoords[0]);vec4 ctc=sample_color(inputBuffer,vTexCoords[1]);vec4 ctr=sample_color(inputBuffer,vTexCoords[2]);vec4 cml=sample_color(inputBuffer,vTexCoords[3]);vec4 cmc=sample_color(inputBuffer,vTexCoords[4]);vec4 cmr=sample_color(inputBuffer,vTexCoords[5]);vec4 cbl=sample_color(inputBuffer,vTexCoords[6]);vec4 cbc=sample_color(inputBuffer,vTexCoords[7]);vec4 cbr=sample_color(inputBuffer,vTexCoords[8]);vec4 cmin=min(ctl,min(ctc,min(ctr,min(cml,min(cmc,min(cmr,min(cbl,min(cbc,cbr))))))));vec4 cmax=max(ctl,max(ctc,max(ctr,max(cml,max(cmc,max(cmr,max(cbl,max(cbc,cbr))))))));vec4 cavg=(ctl+ctc+ctr+cml+cmc+cmr+cbl+cbc+cbr)/9.0;vec4 cmin5=min(ctc,min(cml,min(cmc,min(cmr,cbc))));vec4 cmax5=max(ctc,max(cml,max(cmc,max(cmr,cbc))));vec4 cavg5=(ctc+cml+cmc+cmr+cbc)/5.0;cmin=0.5*(cmin+cmin5);cmax=0.5*(cmax+cmax5);cavg=0.5*(cavg+cavg5);
#ifdef USE_YCOCG
vec2 chroma_extent=vec2(0.25*0.5*(cmax.r-cmin.r));vec2 chroma_center=currentColor.gb;cmin.yz=chroma_center-chroma_extent;cmax.yz=chroma_center+chroma_extent;cavg.yz=chroma_center;
#endif
vec4 previousColorClipped=clamp(previousColor,cmin,cmax);
#ifdef LUMINANCE_DIFFERENCES
#ifdef USE_YCOCG
float lum0=currentColor.r;float lum1=previousColorClipped.r;
#else
float lum0=luminance(currentColor.rgb);float lum1=luminance(previousColorClipped.rgb);
#endif
float unbiased_diff=abs(lum0-lum1)/max(lum0,max(lum1,0.2));float unbiased_weight=1.0-unbiased_diff;float unbiased_weight_sqr=unbiased_weight*unbiased_weight;float k_feedback=mix(feedback_min,feedback_max,unbiased_weight_sqr);vec4 result=mix(currentColor,previousColorClipped,vec4(k_feedback));
#else
const float alpha=0.1;vec4 result=mix(currentColor,previousColorClipped,1.0-alpha);
#endif
#ifdef USE_YCOCG
gl_FragColor=vec4(YCoCg_RGB(result.rgb).rgb,result.a);
#else
gl_FragColor=result;
#endif
}`,DAe=`#define GLSLIFY 1
varying vec2 vUv;void main(){gl_Position=vec4(position.xy,1.0,1.0);vUv=position.xy*0.5+0.5;}`,IAe=`#define GLSLIFY 1
layout(location=1)out vec4 gVelocity;varying vec2 vUv;uniform sampler2D inputBuffer;void main(){gl_FragColor=texture2D(inputBuffer,vUv);gVelocity=vec4(0.0);}`,LM=class extends er{constructor(){super({name:"PassthroughMaterial",uniforms:{inputBuffer:new ot(null)},blending:Mn,depthWrite:!1,depthTest:!1,vertexShader:DAe,fragmentShader:IAe})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}},OAe=class extends ys{constructor(){super("TAAResolvePass"),this.MRTCompatible=!0,this.needsSwap=!1,this.passThroughMaterial=new LM,this.resolutionVector=new Pe,this.resolveMaterial=new er({name:"TAAResolveMaterial",uniforms:{inputBuffer:new ot(null),historyBuffer:new ot(null),velocityBuffer:new ot(null),depthBuffer:new ot(null),resolution:new ot(new Pe)},blending:Mn,depthWrite:!1,depthTest:!1,vertexShader:TAe,fragmentShader:PAe}),this.historyRenderTarget=new ir(1024,1024,{minFilter:Ti,stencilBuffer:!1,depthBuffer:!1}),this.historyRenderTarget.texture.name="TAA.History",this.resultRenderTarget=new ir(1024,1024,{minFilter:Ti,stencilBuffer:!1,depthBuffer:!1}),this.resultRenderTarget.texture.name="TAA.Output"}setSize(e,t){this.historyRenderTarget.setSize(e,t),this.resultRenderTarget.setSize(e,t)}render(e,t){this.fullscreenMaterial=this.resolveMaterial,this.resolveMaterial.uniforms.inputBuffer.value=t.texture[0],this.resolveMaterial.uniforms.velocityBuffer.value=t.texture[1],this.resolveMaterial.uniforms.depthBuffer.value=t.depthTexture,this.resolveMaterial.uniforms.historyBuffer.value=this.historyRenderTarget.texture,this.resolveMaterial.uniforms.resolution.value.set(t.width,t.height),e.setRenderTarget(this.resultRenderTarget),e.render(this.scene,this.camera),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(this.historyRenderTarget),e.render(this.scene,this.camera);let i=this.renderToScreen?null:t;this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(i),e.render(this.scene,this.camera)}dispose(){this.resultRenderTarget.dispose(),this.historyRenderTarget.dispose(),this.resolveMaterial.dispose(),this.passThroughMaterial.dispose()}},RAe=class extends ys{constructor(e,t,i){super("TransmissionPass",void 0,t),this.MRTCompatible=!0,this.depthPass=new mB(e,t,{renderTarget:i.transmissionDepthTarget}),this.passThroughMaterial=new LM,this.splineScene=e,this.needsSwap=!1}updatePasses(e){this.passThroughMaterial=new LM,this.depthPass=new mB(this.splineScene,this.camera,{renderTarget:e.transmissionDepthTarget})}setCamera(e){this.camera=e}setScene(e){this.splineScene=e}render(e,t,i){let r=this.camera.layers.mask,n=e;n.setRenderTarget(n.transmissionRenderTarget),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=t.texture[0],n.clear(),n.render(this.scene,this.camera),this.camera.layers.disable(3),this.depthPass.render(e,t,i),n.shadowMap.needsUpdate=!1,n.shadowMap.autoUpdate=!1;let a=this.renderToScreen?null:t;this.camera.layers.set(3),e.setRenderTarget(a),e.render(this.splineScene,this.camera),this.camera.layers.mask=r}},bB=new hc,kAe=new er({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        layout(location = 1) out vec4 gVelocity;

        void main() {
            gl_FragColor = vec4(0.0);
			gVelocity = vec4(0.0);
        }
    `}),BM=class extends ys{constructor(e,t,i){super("OpaquePass",t??bB,i),this.MRTCompatible=!0,this.originalMaterials=[],this.hasTransmissionPass=!1,this.clear=!0,this.clearColorOnly=!1,this.clearDepth=!1,this.needsSwap=!1,this.MRTCompatible=e}setCamera(e){this.camera=e}setScene(e){this.scene=e??bB}getScene(){return this.scene}render(e,t){this.camera.layers.enable(3),this.hasTransmissionPass&&(this.originalMaterials.length=0,this.scene.traverse(r=>{r.layers.isEnabled(3)&&r instanceof ms&&(this.originalMaterials.push([r,r.material]),r.material=kAe)}),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0),this.camera.layers.enable(8);let i=this.renderToScreen?null:t;e.setRenderTarget(i),this.clearColorOnly&&e.clear(!0,!1,!0),this.clear&&e.clear(),e.render(this.scene,this.camera),this.clearDepth&&e.clear(!1,!0,!1),this.hasTransmissionPass&&this.originalMaterials.forEach(r=>{r[0].material=r[1]})}},LAe=class{constructor(e,{depthBuffer:t=!0,stencilBuffer:i=!1,multisampling:r=0,frameBufferType:n=0}={}){this.renderer=e,this.helperStartIndex=0,this.copyPass=new kM,this.depthTexture=null,this.timer=new XEe,this._width=1,this._height=1,this.passes=[],this.helperPasses=[],this.autoRenderToScreen=!0,this.inputBuffer=this.createBuffer(t,i,n,r,!0,"input buffer mrt"),this.inputBufferSingle=this.createBuffer(t,i,n,r,!1," input buffer single"),this.inputBufferSingle.texture.dispose(),this.inputBufferSingle.depthTexture.dispose(),this.inputBufferSingle.texture=this.inputBuffer.texture[0],this.inputBufferSingle.depthTexture=this.inputBuffer.depthTexture,this.outputBuffer=this.inputBuffer.clone(),this.outputBuffer.name="output buffer mrt",this.outputBufferSingle=this.createBuffer(t,i,n,r,!1,"output buffer single"),this.outputBufferSingle.texture.dispose(),this.outputBufferSingle.depthTexture.dispose(),this.outputBufferSingle.texture=this.outputBuffer.texture[0],this.outputBufferSingle.depthTexture=this.outputBuffer.depthTexture,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let t=this.inputBuffer,i=this.multisampling;i>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):i!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("creating new input buffer"),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e,!0,"new input buffer"),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){var t;if(this.renderer=e,e!==null){let i=e.getSize(new Pe),r=((t=e.getContext().getContextAttributes())==null?void 0:t.alpha)??!1,n=this.inputBuffer.texture[0].type;n===Ga&&e.outputEncoding===Ei&&(this.inputBuffer.texture[0].encoding=Ei,this.outputBuffer.texture[0].encoding=Ei,this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("doing some kinda dispose??")),e.autoClear=!1,this.setSize(i.width,i.height,!1);for(let a of this.passes)a.initialize(e,r,n)}}replaceRenderer(e,t=!0){let i=this.renderer,r=i.domElement.parentNode;return this.setRenderer(e),t&&r!==null&&(r.removeChild(i.domElement),r.appendChild(e.domElement)),i}createDepthTexture(){let e=this.depthTexture=new uv(this._width,this._height);return this.inputBuffer.depthTexture=e,this.inputBuffer.stencilBuffer?(e.format=Hf,e.type=Of):e.type=vu,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,i,r,n,a){let s=this.renderer,o=s===null?new Pe:s.getDrawingBufferSize(new Pe),l={minFilter:Ti,magFilter:Ti,wrapS:Hr,wrapT:Hr,stencilBuffer:t,depthBuffer:e},c;return r>0?(c=new ir(o.width,o.height,l),c.samples=r):(n?(c=new Sle(o.width,o.height,2,l),c.texture[1].type=Mu):c=new ir(o.width,o.height,l),c.depthTexture=new uv(2048,2048),c.depthTexture.type=En),i===Ga&&s!==null&&s.outputEncoding===Ei&&(Array.isArray(c.texture)?c.texture.forEach(u=>u.encoding=Ei):c.texture.encoding=Ei),Array.isArray(c.texture)?c.texture.forEach((u,d)=>{u.name=`EffectComposer.Buffer ${n} ${d}`,u.generateMipmaps=!1}):(c.texture.name=`EffectComposer.Buffer ${n}`,c.texture.generateMipmaps=!1),c.name=a,c}addPass(e,t){var o;let i=this.passes,r=this.renderer,n=r.getDrawingBufferSize(new Pe),a=((o=r.getContext().getContextAttributes())==null?void 0:o.alpha)??!1,s;if(e.MRTCompatible&&(s=this.inputBuffer.texture[0].type),e.MRTCompatible||(s=this.inputBuffer.texture.type),e.setRenderer(r),e.setSize(n.width,n.height),e.initialize(r,a,s),this.autoRenderToScreen&&(i.length>0&&(i[i.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?i.splice(t,0,e):i.push(e),this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let l=this.createDepthTexture();for(e of i)e.setDepthTexture(l)}else e.setDepthTexture(this.depthTexture)}setHelperStartIndex(e){this.helperStartIndex=e}removePass(e){let t=this.passes,i=t.indexOf(e);if(i!==-1&&t.splice(i,1).length>0){if(this.depthTexture!==null){let r=(n,a)=>n||a.needsDepthTexture;t.reduce(r,!1)||e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null)}this.autoRenderToScreen&&i===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let t=this.renderer,i=this.copyPass,r=this.inputBuffer,n=this.outputBuffer,a=this.inputBufferSingle,s=this.outputBufferSingle,o=!1,l,c,u,d;e===void 0&&(e=this.timer.update().getDelta());for(let h of this.passes)h.enabled&&(h.MRTCompatible?h.render(t,r,n,e,o):h.render(t,a,s,e,o),h.needsSwap&&(o&&(i.renderToScreen=h.renderToScreen,l=t.getContext(),c=t.state.buffers.stencil,c.setFunc(l.NOTEQUAL,1,4294967295),i.render(t,r,n,e,o),c.setFunc(l.EQUAL,1,4294967295)),u=r,d=a,r=n,a=s,n=u,s=d),h instanceof YEe?o=!0:h instanceof CEe&&(o=!1))}setSize(e,t,i){let r=this.renderer;if(this._width=e,this._height=t,e===void 0||t===void 0){let a=r.getSize(new Pe);e=a.width,t=a.height}r.setSize(e,t,i);let n=r.getDrawingBufferSize(new Pe);this.inputBuffer.setSize(n.width,n.height),this.outputBuffer.setSize(n.width,n.height),this.inputBufferSingle.setSize(n.width,n.height),this.outputBufferSingle.setSize(n.width,n.height);for(let a of this.passes)a.setSize(n.width,n.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.inputBufferSingle!==null&&this.inputBufferSingle.dispose(),this.outputBufferSingle!==null&&this.outputBufferSingle.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},BAe=new er({name:"CombineMaterial",uniforms:{inputBufferA:new ot(null),inputBufferB:new ot(null)},blending:Mn,depthWrite:!1,depthTest:!1,vertexShader:`
varying vec2 vUv;
void main() {
    gl_Position = vec4(position.xy, 1.0, 1.0);
    vUv = position.xy * 0.5 + 0.5;
}
`,fragmentShader:`
    varying vec2 vUv;
    uniform sampler2D inputBufferA;
    uniform sampler2D inputBufferB;

    // TODO: Why do we need these when postpro of framemode is enabled???
    layout(location = 1) out vec4 gVelocity;

    void main() {
	vec4 resA = texture2D(inputBufferA, vUv);
	vec4 resB = texture2D(inputBufferB, vUv);
    float a = resA.a + resB.a * ( 1.0 - resA.a );

	vec4 res;
	res.rgb =  resA.rgb + (resB.rgb * (1.0 - resA.a));
	res.a = resA.a + resB.a * (1.0 - resA.a);
	gl_FragColor = res;
    gVelocity = vec4(0.0);
    }
`}),NAe=class extends ys{constructor(e){super("HelperPass",void 0,e),this.MRTCompatible=!1,this.fullscreenMaterial=BAe,this.helperPass=new BM(!1,void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperPass.renderToScreen=!1,this.helperPassOnTop=new BM(!1,void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this.helperPassOnTop.renderToScreen=!1;let t=new E$({preset:lf.LOW,edgeDetectionMode:dS.COLOR});this.effectPass=new Wx(this.camera,t),this.rt=new ir(10,10,{minFilter:Ti,magFilter:Ti,wrapS:Hr,wrapT:Hr,depthBuffer:!0})}setSize(e,t){this.rt.setSize(e,t),this.effectPass.setSize(e,t)}set sceneHelpers(e){this.helperPass.setScene(e)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(e){this.helperPassOnTop.setScene(e)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}setCamera(e){this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}initialize(e,t,i){super.initialize(e,t,i),this.effectPass.initialize(e,t,i)}dispose(){super.dispose(),this.rt.dispose(),this.effectPass.dispose()}render(e,t,i){this.rt.depthTexture=t.depthTexture;let r=e.getClearAlpha();e.setClearAlpha(0),this.helperPass.clearDepth=!0,this.helperPass.clearColorOnly=!0,this.helperPass.render(e,this.rt),this.helperPassOnTop.render(e,this.rt),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.rt,i),this.fullscreenMaterial.uniforms.inputBufferA.value=i.texture,this.fullscreenMaterial.uniforms.inputBufferB.value=t.texture,e.setClearAlpha(r),e.setRenderTarget(null),e.clear(),e.render(this.scene,this.camera)}},FAe=`#define GLSLIFY 1
#include <skinning_pars_vertex>
#include <morphtarget_pars_vertex>
out vec3 n;void main(){
#include <beginnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <defaultnormal_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
vec4 view_space=viewMatrix*modelMatrix*vec4(transformed,1.0);gl_Position=projectionMatrix*view_space;n=normalize(transformedNormal);}`,zAe=`#define GLSLIFY 1
in vec3 n;void main(){gl_FragColor=vec4(n,1.0);}`,VAe=`#define GLSLIFY 1
out vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position.xy,1.0,1.0);}`,UAe=`#define GLSLIFY 1
in vec2 v_uv;const float pi=3.14159265;const float num_steps=4.0;const float num_directions=4.0;uniform float near;uniform float far;uniform float fov;uniform vec4 proj_info;uniform bool is_ortho;uniform vec2 resolution;uniform float radius_of_influence;uniform float radius_in_screen_space;uniform float exponent;uniform vec3 ao_color;uniform float bias;uniform sampler2D texture_depth;uniform sampler2D texture_normals;uniform sampler2D texture_blue_noise;uniform sampler2D texture_blue_noise_in_disk;uniform sampler2D texture_color_pass;uniform int frame_index;uniform bool fog_enabled;uniform float fog_near;uniform float fog_far;vec3 uv_to_view_space(vec2 uv,float eye_z){return vec3((uv*proj_info.xy+proj_info.zw)*(is_ortho ? 1.0 : eye_z),eye_z);}float linearize_depth(float depth_sampled){float z=is_ortho ? depth_sampled : depth_sampled*2.0-1.0;return mix((2.0*near*far)/(far+near-z*(far-near)),near+z*(far-near),float(is_ortho));}vec3 get_view_position(vec2 uv_coords){float linear_depth=linearize_depth(texture(texture_depth,uv_coords).x);return uv_to_view_space(uv_coords,linear_depth);}vec3 min_difference(vec3 p,vec3 right,vec3 left){vec3 v1=right-p;vec3 v2=p-left;return(dot(v1,v1)<dot(v2,v2))? v1 : v2;}vec3 rebuild_normal(in vec2 uv,in vec3 p){vec2 one_over_resolution=1.0/resolution;vec3 r=get_view_position(uv+vec2(one_over_resolution.x,0));vec3 l=get_view_position(uv+vec2(-one_over_resolution.x,0));vec3 t=get_view_position(uv+vec2(0,one_over_resolution.y));vec3 b=get_view_position(uv+vec2(0,-one_over_resolution.y));return normalize(cross(min_difference(p,r,l),min_difference(p,t,b)));}float falloff(float distance_squared){float neg_inv_r2=-1.0/(radius_of_influence*radius_of_influence);return distance_squared*neg_inv_r2+1.0;}float ao_contribution(vec3 P,vec3 N,vec3 S){vec3 to_sample=S-P;float norm_squared=dot(to_sample,to_sample);float norm=sqrt(norm_squared);float cos_theta=dot(N,to_sample)/norm;return clamp(cos_theta-bias,0.0,1.0)*clamp(falloff(norm_squared),0.0,1.0);}float compute_ambient_occlusion(vec2 uv,float radius_in_screen_space,vec3 pc,vec3 view_space_n){vec2 one_over_resolution=1.0/resolution;ivec2 noise_uv=ivec2(int(mod(gl_FragCoord.x,128.0)),int(mod(gl_FragCoord.y,128.0)));float noise=texelFetch(texture_blue_noise,noise_uv,0).r;noise=fract(noise+0.61803398875*float(frame_index));float theta=noise*2.0*3.1415;float ct=cos(theta);float st=sin(theta);float step_size=radius_in_screen_space/(num_steps+1.0);const float angle_step=2.0*pi/num_directions;float contribution=0.0;for(int i=0;i<int(num_directions);++i){float current_pixel=step_size+1.0;for(int j=0;j<int(num_steps);++j){int index=i*int(num_steps)+j;vec2 blue_noise_sample=texelFetch(texture_blue_noise_in_disk,ivec2(index,0),0).rg;vec2 disk_point;disk_point.x=blue_noise_sample.x*ct-blue_noise_sample.y*st;disk_point.y=blue_noise_sample.x*st+blue_noise_sample.y*ct;vec2 sample_direction=disk_point;vec2 snapped_uv=round(current_pixel*sample_direction)*one_over_resolution+uv;vec3 ps=get_view_position(snapped_uv);current_pixel+=step_size;contribution+=ao_contribution(pc,view_space_n,ps);}}float mult=1.0/(1.0-bias);contribution*=mult/(num_directions*num_steps);return clamp(1.0-contribution*2.0,0.0,1.0);}
#define USE_GBUFFER_NORMALS
void main(){vec3 view_space_p=get_view_position(v_uv);
#ifdef USE_GBUFFER_NORMALS
vec3 view_space_n=texture(texture_normals,v_uv).rgb;view_space_n.z*=-1.0;
#else
vec3 view_space_n=-rebuild_normal(v_uv,view_space_p);
#endif
float radius_ss=radius_in_screen_space/(is_ortho ? 1.0 : view_space_p.z);float ao=compute_ambient_occlusion(v_uv,radius_ss,view_space_p,view_space_n);float final=pow(ao,exponent);if(view_space_p.z>=far){final=1.0;}vec3 color=mix(ao_color,vec3(1.0),final);if(fog_enabled){float fog_factor=smoothstep(fog_near,fog_far,view_space_p.z);color=mix(color,vec3(1.0),fog_factor);}gl_FragColor=vec4(color,1.0);}`,HAe=`#define GLSLIFY 1
out vec2 v_uv;void main(){gl_Position=vec4(position.xy,1.0,1.0);v_uv=uv;}`,jAe=`#define GLSLIFY 1
in vec2 v_uv;uniform sampler2D texture_ao_lrez;uniform sampler2D texture_depth_lrez;uniform sampler2D texture_depth_hrez;uniform float near;uniform float far;float linearize_depth(float depth_sampled){float z=depth_sampled*2.0-1.0;return(2.0*near*far)/(far+near-z*(far-near));}vec2 nearest_depth_filter(in vec2 uv){vec2 resolution=vec2(textureSize(texture_depth_lrez,0));vec2 texel_size=1.0/resolution;vec2 offset=uv-0.5*texel_size;float d_hrez=texture(texture_depth_hrez,uv).r;float a=abs(d_hrez-texture(texture_depth_lrez,offset).r);float b=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,0.0)).r);float c=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(0.0,texel_size.y)).r);float d=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,texel_size.y)).r);float min_diff=min(a,min(b,min(c,d)));if(min_diff==a)return offset;if(min_diff==b)return offset+vec2(texel_size.x,0.0);if(min_diff==c)return offset+vec2(0.0,texel_size.y);if(min_diff==d)return offset+vec2(texel_size.x,texel_size.y);}void main(){
#ifdef DEBUG
float d_lrez=texture(texture_depth_lrez,v_uv).r;float d_hrez=texture(texture_depth_hrez,v_uv).r;float output_d=mix(linearize_depth(d_lrez)/far,linearize_depth(d_hrez)/far,step(0.5,v_uv.x));gl_FragColor=vec4(vec3(output_d),1.0);
#else
vec2 filtered_uv=nearest_depth_filter(v_uv);vec4 ao=texture(texture_ao_lrez,filtered_uv);gl_FragColor=vec4(ao.rgb,1.0);gl_FragColor=ao;
#endif
}`,j0=[[.478712,.875764],[-.337956,-.793959],[-.955259,-.028164],[.864527,.325689],[.209342,-.395657],[-.106779,.672585],[.156213,.235113],[-.413644,-.082856],[-.415667,.323909],[.141896,-.93998],[.954932,-.182516],[-.766184,.410799],[-.434912,-.458845],[.415242,-.078724],[.728335,-.491777],[-.058086,-.066401],[.20299,.686837],[-.808362,-.556402],[.507386,-.640839],[-.723494,-.22924],[.48974,.317826],[-.622663,.765301],[-.01064,.929347],[.663146,.647618],[-.096674,-.413835],[.525945,-.321063],[-.122533,.366019],[.195235,-.687983],[-.563203,.098748],[.418563,.561335],[-.378595,.800367],[.826922,.001024],[-.085372,-.766651],[-.92192,.183673],[-.590008,-.721799],[.167751,-.164393],[.032961,-.56253],[.6329,-.107059],[-.46408,.569669],[-.173676,-.958758],[-.242648,-.234303],[-.275362,.157163],[.382295,-.795131],[.562955,.115562],[.190586,.470121],[.770764,-.297576],[.237281,.93105],[-.666642,-.455871],[-.905649,-.298379],[.33952,.157829],[.701438,-.7041],[-.062758,.160346],[-.220674,.957141],[.642692,.432706],[-.77339,-.015272],[-.671467,.24688],[.158051,.062859],[.806009,.527232],[-.05762,-.247071],[.333436,-.51671],[-.550658,-.315773],[-.652078,.589846],[.008818,.530556],[-.210004,.519896]],WAe=new er({vertexShader:FAe,fragmentShader:zAe}),Gp=new er({vertexShader:HAe,fragmentShader:jAe,uniforms:{texture_ao_lrez:new ot(null),texture_depth_lrez:new ot(null),texture_depth_hrez:new ot(null),near:new ot(null),far:new ot(null)}}),GAe=class extends ys{constructor(e,t){super("AmbientOcclusionPass",void 0,t),this.fogEnabled=!1,this.fogNear=1,this.fogFar=1e3,this.frameIndex=0,this._runHalfRes=!0,this._width=1,this._height=1;let i=1024,r=1024;this.gBuffer=new ir(i,r,{type:cy?Mu:En,depthTexture:new uv(i,r),minFilter:Ti,magFilter:Ti}),this.depthBufferHighRes=new ir(i,r,{depthTexture:new uv(i,r)}),this.aoBuffer=new ir(i,r,{minFilter:Ti,magFilter:Ti}),this.splineScene=e,this.splineCamera=t;let n=new Float32Array(j0.length*2);for(let s=0;s<j0.length;s++){let o=s*2;n[o+0]=j0[s][0],n[o+1]=j0[s][1]}this.blueNoiseInDiskTexture=new So(n,j0.length,1,q2,En),this.blueNoiseInDiskTexture.wrapS=mu,this.blueNoiseInDiskTexture.wrapT=mu,this.blueNoiseInDiskTexture.needsUpdate=!0,this.hbaoMaterial=new er({vertexShader:VAe,fragmentShader:UAe,uniforms:{near:new ot(null),far:new ot(null),fov:new ot(null),proj_info:new ot(new vi),is_ortho:new ot(!1),resolution:new ot(new Pe),radius_of_influence:new ot(8),radius_in_screen_space:new ot(1),exponent:new ot(1),ao_color:new ot(new H),bias:new ot(.5),texture_depth:new ot(null),texture_normals:new ot(null),texture_blue_noise:new ot(null),texture_blue_noise_in_disk:new ot(this.blueNoiseInDiskTexture),frame_index:new ot(0),fog_enabled:new ot(!1),fog_near:new ot(1),fog_far:new ot(1e3)}}),this.radius=128,this.aoColor={r:0,g:0,b:0},this.bias=.5,this.hbaoMaterial.uniforms.texture_depth.value=this.gBuffer.depthTexture,this.hbaoMaterial.uniforms.texture_normals.value=this.gBuffer.texture,this.needsSwap=!0,this.aaBuffer=new ir(i,r,{minFilter:Ti,magFilter:Ti,wrapS:Hr,wrapT:Hr,depthBuffer:!1,type:En});let a=new E$({preset:lf.ULTRA,edgeDetectionMode:dS.COLOR});this.effectPass=new Wx(this.camera,a)}initialize(e,t,i){super.initialize(e,t,i),this.effectPass.initialize(e,t,i)}setBlueNoiseTexture(e){this.hbaoMaterial.uniforms.texture_blue_noise.value=e}setSize(e,t){this._width=e,this._height=t,this.depthBufferHighRes.setSize(e,t);let i=this._runHalfRes?.5:1,r=e*i,n=t*i;this.gBuffer.setSize(r,n),this.aoBuffer.setSize(r,n),this.hbaoMaterial.uniforms.resolution.value.set(r,n),this.aaBuffer.setSize(r,n),this.effectPass.setSize(r,n)}get runHalfRes(){return this._runHalfRes}set runHalfRes(e){this._runHalfRes=e,this.setSize(this._width,this._height)}setCamera(e){this.splineCamera=e}setScene(e){this.splineScene=e}setDepthTexture(e){this.depthBufferHighRes.depthTexture=e,Gp.uniforms.texture_depth_hrez.value=e,Gp.needsUpdate=!0}render(e,t,i){this.splineScene.overrideMaterial=WAe;let r=this.splineCamera.layers.mask;if(this.splineCamera.layers.set(5),e.setRenderTarget(this.gBuffer),e.clear(),e.render(this.splineScene,this.splineCamera),e.setRenderTarget(this.depthBufferHighRes),e.clear(),e.render(this.splineScene,this.splineCamera),this.splineScene.overrideMaterial=null,this.splineCamera.layers.mask=r,this.hbaoMaterial.uniforms.radius_of_influence.value=this.radius,this.hbaoMaterial.uniforms.ao_color.value.set(this.aoColor.r,this.aoColor.g,this.aoColor.b),this.hbaoMaterial.uniforms.bias.value=this.bias,this.hbaoMaterial.uniforms.fog_enabled.value=this.fogEnabled,this.hbaoMaterial.uniforms.fog_near.value=this.fogNear,this.hbaoMaterial.uniforms.fog_far.value=this.fogFar,this.hbaoMaterial.uniforms.frame_index.value=this.frameIndex,this.frameIndex++,this.splineCamera.isPerspectiveCamera){this.hbaoMaterial.uniforms.near.value=this.splineCamera.perspCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.perspCamera.far;let n=this.splineCamera.perspCamera.projectionMatrix.elements,a=2/n[0],s=2/n[5],o=-(1-n[8])/n[0],l=-(1+n[9])/n[5];this.hbaoMaterial.uniforms.proj_info.value.set(a,s,o,l);let c=this.splineCamera.perspCamera.fov*(Math.PI/180),u=this.hbaoMaterial.uniforms.resolution.value.y/(Math.tan(c*.5)*2),d=this.hbaoMaterial.uniforms.radius_of_influence.value*.5*u;this.hbaoMaterial.uniforms.radius_in_screen_space.value=d,this.hbaoMaterial.uniforms.is_ortho.value=!1}else{this.hbaoMaterial.uniforms.near.value=this.splineCamera.orthoCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.orthoCamera.far;let n=this.splineCamera.orthoCamera.projectionMatrix.elements,a=2/n[0],s=2/n[5],o=-(1+n[12])/n[0],l=-(1-n[13])/n[5];this.hbaoMaterial.uniforms.proj_info.value.set(a,s,o,l);let c=.5*(this.hbaoMaterial.uniforms.resolution.value.y/s),u=this.hbaoMaterial.uniforms.radius_of_influence.value*c;this.hbaoMaterial.uniforms.radius_in_screen_space.value=u,this.hbaoMaterial.uniforms.is_ortho.value=!0}this.runHalfRes?(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aoBuffer),e.clear(),e.render(this.scene,this.camera),this.fullscreenMaterial=Gp,Gp.uniforms.texture_ao_lrez.value=this.aoBuffer.texture,Gp.uniforms.texture_depth_lrez.value=this.gBuffer.depthTexture,Gp.uniforms.texture_depth_hrez.value=this.depthBufferHighRes.depthTexture,e.setRenderTarget(e.aoRenderTarget),e.clear(),e.render(this.scene,this.camera)):(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aaBuffer),e.clear(),e.render(this.scene,this.camera),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.aaBuffer,e.aoRenderTarget))}dispose(){this.gBuffer.dispose(),this.depthBufferHighRes.dispose(),this.aoBuffer.dispose()}},$Ae=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,ZAe=`
uniform sampler2D tInput;
uniform sampler2D tMap;
uniform vec2 resolution;
varying vec2 vUv;

uniform vec2 uResolution;
uniform vec2 uCoords;

// Draws a rectangle at center <st> with size <size>
float rectangle(vec2 st, vec2 size) {
    size = vec2(0.5) - size * 0.5;
    vec2 uv = vec2(step(size.x, st.x), step(size.y, st.y));
    uv *= vec2(step(size.x, 1.0 - st.x), step(size.y, 1.0 - st.y));

    return uv.x * uv.y;
}

uniform vec2 uSize;
uniform float uScale;
uniform float uDPR;
uniform float uCurrent;
uniform vec3 uSceneColor;

void main() {
    vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
    screenUv *= 1.0 / uDPR;

    vec2 center = vec2(0.5, -0.5);
    vec2 outsideUv = screenUv;
    outsideUv += center;
    outsideUv -= uCoords.xy / uResolution.xy;
    outsideUv = (outsideUv - 0.5) + 0.5;
    outsideUv -= center;
    vec2 s = (uSize / uResolution) * uScale;
    float isOutside = 1.0 - rectangle(outsideUv, s);
    
    vec2 mid = vec2(0.5);
    vec2 insideUv = (screenUv - mid + s * mid) / s;
    vec4 background = texture2D(tInput, screenUv);
    vec4 image = texture2D(tMap, insideUv);
    gl_FragColor = mix(image, background, isOutside);
}
`,qAe=class extends xo{constructor(){super(new er({vertexShader:$Ae,fragmentShader:ZAe,uniforms:{tInput:new ot(null),tMap:new ot(null),uResolution:new ot(new Pe),uSize:new ot(new Pe),uCoords:new ot(new Pe),uScale:new ot(1),uSceneColor:new ot(new ii(16711680)),uDPR:new ot(1),uCurrent:new ot(0)}}),"tInput"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tMap.value}set texture(e){this.uniforms.tMap.value=e}},YAe=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,KAe=`
uniform sampler2D toScene;
uniform sampler2D fromScene;
uniform vec2 resolution;

uniform vec2 uResolution;
uniform float uDPR;

uniform float mixRatio;
uniform sampler2D tMixTexture;
uniform int useTexture;
uniform float threshold;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( fromScene, screenUv );
	vec4 texel2 = texture2D( toScene, screenUv );

	if (useTexture==1) {
		
		vec4 transitionTexel = texture2D( tMixTexture, screenUv );
		float r = mixRatio * (1.0 + threshold * 2.0) - threshold;
		float mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);
		
		gl_FragColor = mix( texel1, texel2, mixf );
	} else {
		
		gl_FragColor = mix( texel1, texel2, mixRatio );
		
	}
}
`,XAe=[],QAe=class extends xo{constructor(){super(new er({vertexShader:YAe,fragmentShader:KAe,uniforms:{toScene:new ot(null),fromScene:new ot(null),uResolution:new ot(new Pe),uDPR:new ot(1),mixRatio:new ot(0),threshold:new ot(.1),useTexture:new ot(0),tMixTexture:{value:XAe[0]}}}),"toScene"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.fromScene.value}set texture(e){this.uniforms.fromScene.value=e}},JAe=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,eMe=`
uniform sampler2D inputBuffer;
uniform sampler2D blurredInputBuffer;
uniform sampler2D overlay;
uniform float blurIntensity;

uniform vec2 uResolution;
uniform float uDPR;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( overlay, screenUv );
	vec4 texel2 = texture2D( inputBuffer, screenUv );
	vec4 texel3 = texture2D( blurredInputBuffer, screenUv );

	float blurMask2 = max(sign(texel1.a), 0.0) * blurIntensity;
    gl_FragColor = mix( mix(texel2, texel3, blurMask2), texel1, texel1.a );
}
`,tMe=class extends xo{constructor(){super(new er({vertexShader:JAe,fragmentShader:eMe,uniforms:{inputBuffer:new ot(null),blurredInputBuffer:new ot(null),overlay:new ot(null),uResolution:new ot(new Pe),uDPR:new ot(1),blurIntensity:new ot(0)}})),this._blurEnabled=!1,this.blurTarget=new ir(1,1,{minFilter:Ti,magFilter:Ti,wrapS:Hr,wrapT:Hr}),this.blurPass=new dD({width:window.innerWidth,height:window.innerHeight,kernelSize:hS.HUGE,resolutionScale:.25}),this.blurPass.renderToScreen=!1,this.uniforms.blurredInputBuffer.value=this.blurTarget.texture}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.overlay.value}set texture(e){this.uniforms.overlay.value=e}setResolution(e,t,i=1){this.uniforms.uResolution.value.set(e,t),this.uniforms.uDPR.value=i,this.blurPass.setSize(e,t),this.blurTarget.setSize(e,t),this.blurPass.setSize(e,t)}get uiCanvas(){return this._uiCanvas}set uiCanvas(e){this._uiCanvas=e,e.texture&&(this.uniforms.overlay.value=e.texture);let t=e.frame;if(t){let i=t.data.backgroundBlur,r=i.radius;this._blurEnabled=i.enabled,this.uniforms.blurIntensity.value=this._blurEnabled?1:0,this.blurPass.scale=r/3}}render(e,t,i,r,n){this._blurEnabled&&(this.blurPass.setDepthTexture(this.getDepthTexture()),this.blurPass.render(e,t,this.blurTarget,r,n)),super.render(e,t,i,r,n)}},iMe=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,rMe=`
uniform sampler2D tInput;
uniform sampler2D tOverlayImage;
varying vec2 vUv;
uniform vec2 uResolution;
uniform vec2 uRightBottom;
uniform vec2 uImageSize;
uniform float uScale;
uniform float uDPR;

vec3 blendNormal(vec3 base, vec3 blend) {
	return blend;
}

vec3 blendNormal(vec3 base, vec3 blend, float opacity) {
	return (blendNormal(base, blend) * opacity + base * (1.0 - opacity));
}

vec4 drawFixedSizeImage(sampler2D image, vec2 screenUV, vec2 imageSize, vec2 imageCoords, vec2 screenSize, float dpr) {
	vec2 uv = (screenUV * screenSize * dpr - imageCoords) / (imageSize * dpr);
	if (uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0) {
		return vec4(0.0);
	}
	return texture2D(image, uv);
}

void main() {
    vec2 screenUV = gl_FragCoord.xy / (uResolution.xy * uDPR);
	vec2 imageCoords = vec2(uResolution.x * uDPR - uImageSize.x * uScale * uDPR - uRightBottom.x * uDPR, uRightBottom.y * uDPR);
    vec4 background = texture2D(tInput, screenUV);
    vec4 image = drawFixedSizeImage(tOverlayImage, screenUV, uImageSize * uScale, imageCoords, uResolution, uDPR);
    gl_FragColor = vec4(blendNormal(background.rgb, image.rgb, image.a), max(background.a, image.a));
}
`,nMe=class extends xo{constructor(){super(new er({vertexShader:iMe,fragmentShader:rMe,uniforms:{tInput:new ot(null),tOverlayImage:new ot(null),uResolution:new ot(new Pe),uImageSize:new ot(new Pe),uRightBottom:new ot(new Pe(20,20)),uScale:new ot(.25),uDPR:new ot(1)}}),"tInput")}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tOverlayImage.value}set texture(e){this.uniforms.tOverlayImage.value=e,this.uniforms.uImageSize.value.set(e.image.width,e.image.height)}};function wB(e,t){return t&&t.enabled&&e.push(t.effect),e}var aMe=e=>Object.values(Yi).includes(e)?e:Yi.NORMAL,sMe=class extends Pa{constructor(e,t){super(),this._needsDOFResize=t,this.postprocessingState=Mx.defaultData,this._scene=new hc,this._camera=new ja,this.effects=new Map,this.blueNoiseTexture=new So,this._renderToScreen=!0,this._isUIOverlayEnabled=!1,this.clock=new mpe,this.renderer=e,this.debug=!1,this.effects.set("bloom",new bAe),this.effects.set("chromaticAberration",new xAe),this.effects.set("vignette",new EAe),this.effects.set("noise",new CAe),this.effects.set("colorAverage",new _Ae),this.effects.set("hueSaturation",new SAe),this.effects.set("brightnessContrast",new wAe),this.effects.set("depthOfField",new AAe),this.effects.set("pixelation",new MAe),this.effectComposer=new LAe(this.renderer),this.effectComposer.autoRenderToScreen=!1,this.opaquePass=new BM(!0,this.scene,this.camera),this.opaquePass.clear=!0,this.transmissionPass=new RAe(this.scene,this.camera,this.renderer),this.aoPass=new GAe(this.scene,this.camera),this.taaPass=new OAe,this.taaPass.renderToScreen=!1,this.helperPass=new NAe(this.camera),this.helperPass.renderToScreen=!1,this.stylesOverlayPass=new qAe,this.stylesOverlayPass.enabled=!1,this.uiOverlayPass=new tMe,this.uiOverlayPass.enabled=!1,this.logoOverlayPass=new nMe,this.logoOverlayPass.enabled=!1,this.sceneTransitionPass=new QAe,this.sceneTransitionPass.enabled=!1,this._initCopyPass(),this._initPasses()}set overlayTexture(e){e!==void 0?(this.stylesOverlayPass.texture=e,this.stylesOverlayPass.enabled=!0):this.stylesOverlayPass.enabled=!1}get overlayTexture(){return this.stylesOverlayPass.texture}set sceneHelpers(e){this.helperPass.sceneHelpers=e}get sceneHelpers(){return this.helperPass.sceneHelpers}set sceneHelpersOnTop(e){this.helperPass.sceneHelpersOnTop=e}get sceneHelpersOnTop(){return this.helperPass.sceneHelpersOnTop}get scene(){return this._scene}set scene(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e),this.aoPass.setScene(e)}get camera(){return this._camera}set camera(e){let t=this._camera!==e;this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),t&&this.transmissionPass.updatePasses(this.renderer),this.aoPass.setCamera(e),this.helperPass.setCamera(e),this.effects.get("depthOfField").setCamera(e)}updateRenderToScreen(){let e=!1;for(let t=this.effectComposer.passes.length-1;t>=0;t--){let i=this.effectComposer.passes[t];if(i.enabled===!0&&!e&&this._renderToScreen){i.renderToScreen=!0,e=!0;continue}i.renderToScreen=!1}}get isUIOverlayEnabled(){return this._isUIOverlayEnabled}disableUIOverlay(){this._isUIOverlayEnabled=!1}enableUIOverlay(){this._isUIOverlayEnabled=!0}disableHelpers(){this.helperPass.enabled=!1,this.updateRenderToScreen()}enableHelpers(){this.helperPass.enabled=!0,this.updateRenderToScreen()}updateBlueNoiseTexture(e){this.blueNoiseTexture=new So(e,128,128),this.blueNoiseTexture.wrapS=mu,this.blueNoiseTexture.wrapT=mu,this.blueNoiseTexture.minFilter=or,this.blueNoiseTexture.magFilter=or,this.blueNoiseTexture.needsUpdate=!0}setAmbientOcclusionParams(e,t,i,r,n,a,s,o){this.aoPass.enabled=e,this.aoPass.radius=t,this.aoPass.bias=i,this.aoPass.aoColor=r,this.aoPass.fogEnabled=n,this.aoPass.fogNear=a,this.aoPass.fogFar=s,this.aoPass.runHalfRes!==!o&&(this.aoPass.runHalfRes=!o)}setTransmissionPassEnabled(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}_initPasses(){var e,t,i;if((e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.aoPass),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.effectComposer.addPass(this.taaPass),this.postprocessingState.enabled){let r=[this.effects.get("pixelation")].reduce(wB,[]);r.length>0&&(this.uvEffectPass=new Wx(this.camera,...r),this.uvEffectPass.renderToScreen=!1,this.effectComposer.addPass(this.uvEffectPass));let n=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("depthOfField"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(wB,[]);if(n.length>0&&(this.effectPass=new Wx(this.camera,...n),this.effectPass.renderToScreen=!1,this.effectComposer.addPass(this.effectPass),this._needsDOFResize&&((i=this.effects.get("depthOfField"))==null?void 0:i.enabled)&&window!==void 0)){let a=this.renderer.viewportWidth,s=this.renderer.viewportHeight;this.renderer.setSize(a-1,s-1),this.renderer.setSize(a,s)}}this.effectComposer.addPass(this.stylesOverlayPass),this.effectComposer.addPass(this.uiOverlayPass),this.effectComposer.addPass(this.sceneTransitionPass),this.effectComposer.addPass(this.helperPass),this.effectComposer.addPass(this.logoOverlayPass)}_initCopyPass(){if(this._savePass)return;let e=new Pe;this.renderer.getDrawingBufferSize(e),this._rt=new ir(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:mu,wrapT:mu}),this._rt.samples=0,this._savePass=new kM(this._rt,!1),this._savePass.renderToScreen=!1}setCopyPass(e){this._rt=e,this._savePass=new kM(this._rt,!1),this.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){if(this._renderToScreen===e)return;let t=this.effectComposer;!t||(e===!0?t.removePass(this._savePass):t.addPass(this._savePass),this._renderToScreen=e,this.updateRenderToScreen())}set sceneTransitionFromTexture(e){e!==this.sceneTransitionPass.texture&&(e!==null?this.sceneTransitionPass.enabled=!0:(this.sceneTransitionPass.enabled=!1,this.updateRenderToScreen()),this.sceneTransitionPass.texture=e)}setWatermark(e){this.logoOverlayPass.enabled=e!==null,e&&(this.logoOverlayPass.texture=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(e){let{enabled:t,...i}=e,r=!1;t!==this.postprocessingState.enabled&&(r=!0);for(let n of Object.entries(i)){let a=n[1],s=this.effects.get(n[0]);if(s){s.enabled!==a.enabled&&(r=!0),s.enabled=a.enabled;for(let[o,l]of Object.entries(a))o==="blendFunction"?s.blendFunction=aMe(l):s[o]=l}}this.postprocessingState=e,r&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(e,t,i,r){e instanceof vi?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,i,r),this.effectComposer.outputBuffer.scissor.set(e,t,i,r));let n=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(n),this.effectComposer.outputBuffer.scissor.multiplyScalar(n),this.renderer.setScissor(e,t,i,r)}setScissorTest(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}setViewport(e,t,i,r){e instanceof vi?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,i,r),this.effectComposer.outputBuffer.viewport.set(e,t,i,r))}resize(e,t,i){if(this.effectComposer.setSize(e,t,i),this._rt){let r=this.renderer.getPixelRatio();this._rt.setSize(e*r,t*r)}}dispose(){var e,t;(e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.dispose()}},oMe=e=>`

// PCSS implementation based on:
// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/
// NOTE: This number affects how big the shadow blur can
// possibly get. Bigger number == bigger blur, but less precise results

const float  gPenumbraFilterSize = 80.0;
const int   gPenumbraSamples = ${e};
const int gShadowSamples = ${e};
const float gShadowSamplesRpc = 1.0f / float(gShadowSamples);

#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS > 0

        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

        struct DirectionalLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

    #endif

    #if NUM_SPOT_LIGHT_SHADOWS > 0

        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];

        struct SpotLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

    #endif

    #if NUM_POINT_LIGHT_SHADOWS > 0

        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

        struct PointLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
            float shadowCameraNear;
            float shadowCameraFar;
        };

        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

    #endif

    /*
    #if NUM_RECT_AREA_LIGHTS > 0

        // TODO (abelnation): create uniforms for area light shadows

    #endif
    */

float computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)
{
    float penumbra = 1.0;
    float blockerDepthAvg = 0.0;
    float blockerCount = 0.0;

    #pragma unroll_loop_start
    for(int i = 0; i < gPenumbraSamples; i ++)
    {
        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;
        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );

        if(depth < compare + 0.0001)
        {
            blockerDepthAvg += depth;
            blockerCount++;
        }
    }
    #pragma unroll_loop_end

    if (blockerCount > 0.0)
    {
        blockerDepthAvg /= blockerCount;

        // Compute penumbra
        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);
        penumbra *= penumbra;
        penumbra *= 200.0 * penumbraSize[min(index, 5 - 1)]; // Magic number that affects how quickly the penumbra grows

        return clamp(penumbra, 0.00, 1.0);
    }
    return 0.0;
}

float vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)
{
    float shadow         = 0.0f;

    // NOTE: When using TAA, we should use screen space interleaved gradient noise
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);
    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);
    if (penumbra == -1.0) {
        return 1.0;
    }

    #pragma unroll_loop_start
    for (int i = 0; i < gShadowSamples; i++)
    {
        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;
        // Overall blurring offset
        vec2 offset = vogelSample * (shadowRadius * 2.);

        // Penumbra offset
        offset += vogelSample * (penumbra * texelScalar);

        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    }
    #pragma unroll_loop_end

    return shadow * gShadowSamplesRpc;
}


    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {

        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );

    }

    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {

        return unpackRGBATo2Half( texture2D( shadow, uv ) );

    }

    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){

        float occlusion = 1.0;

        vec2 distribution = texture2DDistribution( shadow, uv );

        float hard_shadow = step( compare , distribution.x ); // Hard Shadow

        if (hard_shadow != 1.0 ) {

            float distance = compare - distribution.x ;
            float variance = max( 0.00000, distribution.y * distribution.y );
            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality
            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed
            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );

        }
        return occlusion;

    }

    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {

        float shadow = 1.0;

        shadowCoord.xyz /= shadowCoord.w;
        shadowCoord.z += shadowBias;

        // if ( something && something ) breaks ATI OpenGL shader compiler
        // if ( all( something, something ) ) using this instead

        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
        bool inFrustum = all( inFrustumVec );

        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );

        bool frustumTest = all( frustumTestVec );

        if ( frustumTest ) {

        #if defined( SHADOWMAP_TYPE_PCF )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            float dx = texelSize.x;
            float dy = texelSize.y;

            vec2 uv = shadowCoord.xy;
            vec2 f = fract( uv * shadowMapSize + 0.5 );
            uv -= f * texelSize;

            shadow = (
                texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                          f.x ),
                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                          f.x ),
                     f.y )
            ) * ( 1.0 / 9.0 );

        #elif defined( SHADOWMAP_TYPE_VSM )

            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );

        #else // no percentage-closer filtering:

            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );

        #endif

        }

        return shadow;

    }

    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D
    // vector suitable for 2D texture mapping. This code uses the following layout for the
    // 2D texture:
    //
    // xzXZ
    //  y Y
    //
    // Y - Positive y direction
    // y - Negative y direction
    // X - Positive x direction
    // x - Negative x direction
    // Z - Positive z direction
    // z - Negative z direction
    //
    // Source and test bed:
    // https://gist.github.com/tschw/da10c43c467ce8afd0c4

    vec2 cubeToUV( vec3 v, float texelSizeY ) {

        // Number of texels to avoid at the edge of each square

        vec3 absV = abs( v );

        // Intersect unit cube

        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
        absV *= scaleToCube;

        // Apply scale to avoid seams

        // two texels less per square (one texel will do for NEAREST)
        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );

        // Unwrap

        // space: -1 ... 1 range for each square
        //
        // #X##         dim    := ( 4 , 2 )
        //  # #         center := ( 1 , 1 )

        vec2 planar = v.xy;

        float almostATexel = 1.5 * texelSizeY;
        float almostOne = 1.0 - almostATexel;

        if ( absV.z >= almostOne ) {

            if ( v.z > 0.0 )
                planar.x = 4.0 - v.x;

        } else if ( absV.x >= almostOne ) {

            float signX = sign( v.x );
            planar.x = v.z * signX + 2.0 * signX;

        } else if ( absV.y >= almostOne ) {

            float signY = sign( v.y );
            planar.x = v.x + 2.0 * signY + 2.0;
            planar.y = v.z * signY - 2.0;

        }

        // Transform to UV space

        // scale := 0.5 / dim
        // translate := ( center + 0.5 ) / dim
        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );

    }

    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {

        float shadow = 1.0;
        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );

        // for point lights, the uniform @vShadowCoord is re-purposed to hold
        // the vector from the light to the world-space position of the fragment.
        vec3 lightToPosition = shadowCoord.xyz;

        // dp = normalized distance from light to fragment position
        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?
        compare += shadowBias;

        // bd3D = base direction 3D
        vec3 bd3D = normalize( lightToPosition );

        vec2 halton = haltonSequence[frameIndex];
        float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
        float temporalAngle  = temporalOffset * PI2;

        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )
            for (int i = 0; i < gShadowSamples; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                // NOTE: Removed for now
                // Penumbra offset
                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * gShadowSamplesRpc;

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
            for (int i = 0; i < 16; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * (1.0 / 16.0);
        #else // no percentage-closer filtering

            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );

        #endif

    }

#endif
`,lMe=Mi.lights_fragment_begin,cMe=Mi.shadowmask_pars_fragment,xB=null,uMe=e=>{switch(e){case"low":return 8;case"medium":return 16;case"high":return 32;default:return 16}},dMe=(e="medium")=>{if(xB===e)return!1;xB=e;let t=uMe(e);Mi.shadowmap_pars_fragment=oMe(t);let i=lMe.slice();i=i.replace("getShadow( spotShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX + 3, spotShadowMap[ i ]"),i=i.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),Mi.lights_fragment_begin=i;let r=cMe.slice();return r=r.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),Mi.shadowmask_pars_fragment=r,!0},hMe=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;
#include <skinning_pars_vertex>
#include <morphtarget_pars_vertex>
	
void main()
{
#include <beginnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
vec3 transformed = vec3(position);
#include <morphtarget_vertex>
#include <skinning_vertex>

vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(transformed, 1.0));
}
`,fMe=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
gl_FragColor = vec4(resultColor, vColor.r);
}
`,o4=new er({vertexShader:hMe,fragmentShader:fMe,uniforms:{depthContrast:{value:1}}}),_B=new Kr,SB=new Pe,pMe=class extends lj{constructor(e){super(e),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new Pe,this.dummyCamera=new ja,this.sceneTransitionDuration=0,this.sceneTransitionTimeRemaining=-1,this.isXRCopyPassSet=!1,this.clear=(n=!0,a=!0,s=!0)=>{let o=this.getContext(),l=0;n&&(l|=o.COLOR_BUFFER_BIT),a&&(l|=o.DEPTH_BUFFER_BIT),s&&(l|=o.STENCIL_BUFFER_BIT),o.clear(l),o.clearBufferfv(o.COLOR,1,[0,0,0,1])},this.pipeline=new sMe(this,(e==null?void 0:e.needsDOFResize)??!1),this.autoClear=!1;let t=this.setPixelRatio.bind(this),i=this.setSize.bind(this);this.shadowMap.enabled=!0,this.shadowMap.type=K5,this.dummyCamera.matrixAutoUpdate=!1,this.domElement.removeAttribute("data-engine");let r=this.getContext();if(r&&"drawingBufferColorSpace"in r)try{r.drawingBufferColorSpace="display-p3"}catch(n){console.warn(n)}this.setPixelRatio=n=>{this._pixelRatio!==n&&(this._pixelRatio=n,t(n))},this.setSize=(n,a,s=!0)=>{var o,l;(this.viewportWidth!==n||this.viewportHeight!==a)&&(this.viewportWidth=n,this.viewportHeight=a,i(n,a,s),(o=this.normalRenderTarget)==null||o.setSize(n*this._pixelRatio,a*this._pixelRatio),this._resizeTransmission(n,a),(l=this.transmissionDepthTarget)==null||l.setSize(n*this._pixelRatio/2,a*this._pixelRatio/2),this.pipeline.resize(n,a,s))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createAORenderTarget(){this.aoRenderTarget===void 0&&(this.aoRenderTarget=new ir(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:Ti,magFilter:Ti,wrapS:Hr,wrapT:Hr,depthBuffer:!1}))}_resizeTransmission(e,t){var i,r;(i=this.transmissionRenderTarget)==null||i.setSize(e*this._pixelRatio/(this.hdTransmission?1:2),t*this._pixelRatio/(this.hdTransmission?1:2)),(r=this.aoRenderTarget)==null||r.setSize(e*this._pixelRatio/1,t*this._pixelRatio/1)}get hdTransmission(){return ni.transmissionLod.value===1}set hdTransmission(e){ni.transmissionLod.value=e===!0?1:2,this._resizeTransmission(this.viewportWidth,this.viewportHeight)}createTransmissionRenderTarget(){this.transmissionRenderTarget===void 0&&(this.transmissionRenderTarget=new ir(this.viewportWidth*this._pixelRatio/(this.hdTransmission?1:2),this.viewportHeight*this._pixelRatio/(this.hdTransmission?1:2),{generateMipmaps:!0,minFilter:lv,magFilter:Ti,wrapS:Hr,wrapT:Hr,depthBuffer:!1}),this.transmissionDepthTarget=new ir(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:or,magFilter:or,depthBuffer:!1}))}createNormalRenderTarget(){this.normalRenderTarget===void 0&&(this.normalRenderTarget=new ir(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:or,magFilter:or,type:En,depthTexture:new uv(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(e,t,i){this.normalRenderTarget&&(this.setClearColor(0),i.layers.enable(8),i.layers.disable(0),i.layers.disable(3),t.traverseEntity(r=>{r.layers.isEnabled(8)&&(r.copyPreviousMatrix=!1)}),this.setRenderTarget(this.normalRenderTarget),this.clear(),i instanceof ja?o4.uniforms.depthContrast.value=(i.far-i.near)/1e4:o4.uniforms.depthContrast.value=1,t.overrideMaterial=o4,this.render(t,i),this.setClearColor(t.bgColor,t.bgColor.a),this.setRenderTarget(null),t.overrideMaterial=e.wireframeState?jM:null,i.layers.enable(0),i.layers.enable(3),t.traverseEntity(r=>{r.layers.isEnabled(8)&&(r.copyPreviousMatrix=!0)}))}renderSplineSceneWithDummyCamera(e,t,i=1){this.dummyCamera.updateCameraState(t.dataPatched),this.dummyCamera.matrix.copy(t.matrixWorld);let r=t.height,n=t.width,a=this.viewportWidth/this.viewportHeight;n<r?n=r*a:r=n/a,this.dummyCamera.setViewplaneSize(n,r);for(let s=0;s<i;s++)this.renderSplineScene(e,this.dummyCamera)}renderSplineScene(e,t,{sceneHelpers:i=this.sceneHelpers,sceneHelpersOnTop:r=this.sceneHelpersOnTop,overrideTransmission:n=void 0,overrideNormal:a=void 0}={}){var h;let s=e instanceof bD?e.activePage:e,o=s.visible;s.visible=!0;let l=s.scene;this.xr.enabled&&(this.isXRCopyPassSet===!1&&this.getRenderTarget()!==null&&(this.pipeline.setCopyPass(this.getRenderTarget()),this.isXRCopyPassSet=!0),this.xr.updateCamera(t)),this.setClearColor(s.bgColor,s.bgColor.a),s.penumbraSizeArray.forEach((f,p)=>{ni.penumbraSize.value[p]=f}),ni.pixelRatioNode.value=this.getPixelRatio(),this.resolution.x!==0&&this.resolution.y!==0?ni.resolution.value.set(this.resolution.x,this.resolution.y):ni.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),a!==void 0?(ni.normalRenderTarget.value=a,ni.normalRenderTargetDepth.value=_B):l.needsNormal()&&(this.createNormalRenderTarget(),ni.normalRenderTarget.value=this.normalRenderTarget.texture,ni.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(l,s,t));let c=s.data.ao,u=c.occlusion;if(u&&(this.createAORenderTarget(),ni.aoRenderTarget.value=this.aoRenderTarget.texture),ni.aoEnabled.value=u,this.pipeline.setAmbientOcclusionParams(c.occlusion,c.radius,c.bias,s.aoColor,s.fog!==null,s.backupFog.near,s.backupFog.far,c.aoFullRes&&!cy),this.pipeline.aoPass.setBlueNoiseTexture(this.pipeline.blueNoiseTexture),this.pipeline.isUIOverlayEnabled&&((h=s.uiCanvas)==null?void 0:h.enabled)&&s.uiCanvas.texture&&s.uiCanvas.texture.image.width>0){let f=this.getSize(SB),p=this.getPixelRatio();(s.uiCanvas.width!==this.viewportWidth||s.uiCanvas.height!==this.viewportHeight||s.uiCanvas.dpr!==p)&&s.uiCanvas.applySize({width:this.viewportWidth,height:this.viewportHeight},p),s.uiCanvas.render(this),this.pipeline.uiOverlayPass.uiCanvas=s.uiCanvas,this.pipeline.uiOverlayPass.enabled=!0,this.pipeline.uiOverlayPass.setResolution(f.x,f.y,p),this.pipeline.updateRenderToScreen()}else this.pipeline.uiOverlayPass.enabled=!1,this.pipeline.updateRenderToScreen();if(this.pipeline.logoOverlayPass.enabled){let f=this.getSize(SB),p=this.getPixelRatio();this.pipeline.logoOverlayPass.uniforms.uResolution.value.set(f.x,f.y),this.pipeline.logoOverlayPass.uniforms.uDPR.value=p}let d=!1;if(n!==void 0)ni.transmissionRenderTarget.value=n,ni.transmissionRenderTargetDepth.value=_B,this.pipeline.setTransmissionPassEnabled(!1);else{let f=l.needsTransmission();f&&(this.transmissionRenderTarget===void 0&&(d=!0),this.createTransmissionRenderTarget(),ni.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,ni.aspectRatio.value=q3e(this.viewportWidth,this.viewportHeight),ni.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(f)}t.layers.enable(3),t.layers.enable(8),this.pipeline.sceneHelpers=i,this.pipeline.sceneHelpersOnTop=r,this.pipeline.scene=s,this.pipeline.camera=t,d&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==s.postprocessing&&(this.pipeline.updatePostprocessing(s.postprocessing),!i&&!r&&this.pipeline.disableHelpers()),this.clearAlphaOverride!==void 0&&this.setClearAlpha(this.clearAlphaOverride),s.overrideMaterial=l.wireframeState?jM:null,this.pipeline.render(),ni.frameIndex.value=(ni.frameIndex.value+1)%16,t instanceof ja&&t.copyHistory(),s.visible=o}renderFromSceneForSceneTransitionPass(e,t,i){this.pipeline.renderToScreen=!1,this.pipeline.renderTarget,this.renderSplineScene(e,t),this.pipeline.sceneTransitionFromTexture=this.pipeline.renderTarget.texture,this.sceneTransitionDuration=i,this.sceneTransitionTimeRemaining=i,this.pipeline.renderToScreen=!0;let r=this.pipeline.sceneTransitionPass.uniforms;r.uDPR.value=window.devicePixelRatio,r.uResolution.value.set(this.domElement.width,this.domElement.height).divideScalar(window.devicePixelRatio)}_currentDispose(){var e,t,i,r,n,a;this._superDispose(),this.pipeline.dispose(),(e=this.aoRenderTarget)==null||e.dispose(),(t=this.transmissionRenderTarget)==null||t.dispose(),(i=this.transmissionDepthTarget)==null||i.dispose(),(r=this.normalRenderTarget)==null||r.dispose(),(a=(n=this.normalRenderTarget)==null?void 0:n.depthTexture)==null||a.dispose()}},A$=class extends hy(Ipe){constructor(e,t=15,i=10066329){super(e,t,i),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,t){fy(this.object,A$.geometryHelper,e,t)}},M$=class extends hy(Dpe){constructor(e,t=15,i=6710886){super(e,t,i),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,t){fy(this.object,M$.geometryHelper,e,t)}},NM=class extends hy(Ppe){constructor(e,t=6710886){super(e,t),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,t){fy(this.object,NM.geometryHelper,e,t)}update(){if(this.object!==void 0){let e=NM._vector,t=this.object.distance?this.object.distance:1e3,i=t*Math.tan(this.object.angle);this.cone.scale.set(i,i,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let r=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let n=0,a=this.cone.material.length;n<a;n++)this.cone.material[n].color.set(r);else this.cone.material.color.set(r)}}},T$=NM;T$._vector=new H;var P$=class extends yu{constructor(){super(),this.caretIndex=0,this._caretVisibleAlpha=1,this._selectionVisibleAlpha=.3,this.current={start:0,end:void 0},this.matrixAutoUpdate=!1,this.caretMesh=new Yr(new Pu(1,1),new Tu({transparent:!0,opacity:0,side:za})),this.add(this.caretMesh),this.selectionMesh=new Yr(new Pu(1,1),new Tu({color:2857471,transparent:!0,depthTest:!1,depthWrite:!1,opacity:0,side:za})),this.add(this.selectionMesh),this.hide()}get caretHeight(){var e;return((e=this.object)==null?void 0:e.AD)??0}show(e){this.visible=!0,this.object=e,this.caretMesh.scale.set(1,this.caretHeight,1),this.caretMesh.position.y=-this.caretHeight*.5,this.setCaretPosition(this.caretIndex),this.update()}hide(){this.visible=!1}update(){if(this.object===void 0)return;this.updateHelperMatrix();let{depth:e}=this.object.geometry.userData.parameters;this.caretMesh.position.z=e,this.selectionMesh.position.z=e}updateHelperMatrix(){if(this.object===void 0)return;let e=this.object,t=e.parent;t!==null&&t.updateWorldMatrix(!0,!1),e.matrixAutoUpdate&&e.updateMatrix(),t!==null?(this.matrixWorld.multiplyMatrices(t.matrixWorld,e.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,e.matrix)):this.matrixWorld.multiplyMatrices(e.hiddenMatrix,e.matrix),this.matrix.copy(this.matrixWorld);for(let i of this.children)i.matrixWorld.copy(this.matrixWorld);e.updateWorldMatrix(!0,!0)}setCaretColor(e){let t=this.caretMesh.material;t.color.setRGB(e.r,e.g,e.b);let i=this._caretVisibleAlpha===t.opacity;this._caretVisibleAlpha=e.a,i&&(t.opacity=this._caretVisibleAlpha)}setSelectionColor(e){this.selectionMesh.material.color.setRGB(e.r,e.g,e.b)}setCaretPosition(e,t={}){if(this.object===void 0)return;this.caretIndex=e;let i=this.object.wrappedText,[r,n]=Gx(i,e),[a,s]=e>0?Gx(i,e-1):[null,null];(e>0&&i.length?i[a].charAt(s):null)===`
`&&(r++,n=0),this.current.start=e,this.current.end=void 0;let[o,l]=l4(this.object,r,n),{AD:c,descender:u}=this.object,d=u+c*.5,{width:h,height:f,depth:p}=this.object.geometry.userData.parameters,m=typeof h=="string"?0:h,v=typeof f=="string"?0:f;this.caretMesh.scale.set(1,this.caretHeight,1),this.caretMesh.position.set(o-m*.5,l+d+v*.5,p),this.hideSelectionMesh(),this.showCaretMesh()}setSelection(e,t){if(this.object===void 0)return;let i=this.object.wrappedText;this.current.start=e,this.current.end=t;let r=[],n=[],a=mMe(i,e,t),{lineHeight:s,AD:o,descender:l}=this.object,c=l+o*.5-s*.5;for(let[v,y,x]of a)if(y!==x){let[b,w]=l4(this.object,v,y),[S,_]=l4(this.object,v,x);w+=c,_+=c,_+=s;let E=r.length/3;r.push(b,w,0),r.push(S,w,0),r.push(S,_,0),r.push(b,_,0),n.push(E+0,E+1,E+2),n.push(E+2,E+3,E+0)}let u=new Kt;u.setIndex(n),u.setAttribute("position",new It(r,3));let{width:d,height:h,depth:f}=this.object.geometry.userData.parameters,p=typeof d=="string"?0:d,m=typeof h=="string"?0:h;this.selectionMesh.geometry.dispose(),this.selectionMesh.geometry=u,this.selectionMesh.position.x=-p*.5,this.selectionMesh.position.y=m*.5,this.selectionMesh.position.z=f,this.showSelectionMesh(),this.hideCaretMesh()}getSelectionFromPosition(e,t,i="previous"){if(this.object===void 0||this.object.font===void 0)return;let r=this.object.wrappedText,n=r.length,a=this.object.lineHeight,s=n*a,{height:o,verticalAlign:l}=this.object.geometry.userData.parameters,c=typeof o=="string"?0:o,u=0;l===3?u=c-s:l===2&&(u=c*.5-s*.5);let d=Math.min(Math.floor(Math.max(Math.min(-t-u,s),0)/a),n-1),h=this.object.charCoords[d],f=this.object.charWidths[d],p=0,m=!1;if(i==="previous"){for(let v=0;v<h.length;v++)if(h[v][0]+f[v]*.5-e>0){p=v,m=!0;break}}else if(i==="closest"){let v=1/0;for(let y=0;y<h.length;y++){let x=h[y][0]+f[y]*.5,b=Math.abs(x-e);b<v&&(v=b,p=y,m=!0)}}else for(let v=0;v<h.length;v++){let y=h[v][0],x=h[v][0]+f[v];if(e>=y&&e<x){p=v,m=!0;break}}return m||(p=h.length),{index:this.getGlobalIndexFromLineAndCharIndexes(r,d,p),lineIndex:d,characterIndex:p}}getGlobalIndexFromLineAndCharIndexes(e,t,i){return e.slice(0,t).reduce((r,n)=>r+=n.length,0)+i}showSelectionMesh(){this.selectionMesh.material.opacity=this._selectionVisibleAlpha}hideSelectionMesh(){this.selectionMesh.material.opacity=0}showCaretMesh(){this.caretMesh.material.opacity=this._caretVisibleAlpha}hideCaretMesh(){this.caretMesh.material.opacity=0}};function l4(e,t,i){let{charCoords:r,charWidths:n,initialOffsetY:a,lineHeight:s}=e;if(r[t]&&r[t].length===0||r.length===0){let u=0,{horizontalAlign:d}=e.data.geometry,h=e.wrappedText,{width:f}=e.geometry.userData.parameters;return h.length===1&&h[0].length===0&&(d===3?u=f*.5:d===2&&(u=f)),[u,a-s*t]}let o=r[t];if(o===void 0||o.length===0)return[0,0];let[l,c]=o[Math.min(i,o.length-1)];return i>=o.length&&(l+=n[t][i-1]),[l,c]}function Gx(e,t){var r;let i=0;for(let n=0;n<e.length;n++){let a=e[n],s=t-i;if(s<=a.length)return[n,s];i+=a.length}return[Math.max(0,e.length-1),((r=e[e.length-1])==null?void 0:r.length)??0]}function mMe(e,t,i){let[r,n]=Gx(e,t),[a,s]=Gx(e,i),o=[];n>=e[r].length&&(r++,n=0);for(let l=r;l<=a;l++){let c=e[l],u=l===r?n:0,d=l===a?s:c.length;o.push([l,u,d])}return o}function vMe(e,t){let i=ya.fromHex(3223857),r=.8;for(let n of e.layers){if(n.data.type==="light"||n.data.type==="displace"||n.data.type==="fresnel"||n.data.type==="matcap"||n.data.type==="texture"||n.data.type==="toon"||n.data.type==="outline"||n.data.type==="transmission"||n.data.type==="noise")continue;let a=typeof n.data.alpha=="string"?Number(t.getVariable(n.data.alpha)):n.data.alpha;if(n.data.type==="color"&&a>.3){i=gMe(n.data.color,t),r=a;break}else if((n.data.type==="depth"||n.data.type==="gradient")&&a>.3){let s=yMe(n.data);i={r:s[0],g:s[1],b:s[2]},r=typeof n.data.alpha=="string"?1:n.data.alpha;break}}return{...i,a:r}}function gMe(e,t){return typeof e=="string"?t.data.colors[e]:e}function yMe(e){return e.colors[0]}function bMe(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}var D$=class extends cD(ppe,A$){constructor(e,t,i){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.top=1250,r.bottom=-1250,r.right=1250,r.left=-1250,r.near=-1e4,r.far=2500;let n=new sx(this.shadow.camera);n.visible=!1,this.gizmos.shadowmap=n}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof sx&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t);let i=e.depth!==void 0&&e.depth!==this.shadow.camera.far||e.size!==void 0&&e.size/2!==this.shadow.camera.right;e.size!==void 0&&bMe(this,e.size),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),e.penumbraSize!==void 0&&t.scene.markPenumbraSizeDirty(),i&&this.update()}},CB=new H,EB=new H,AB=new mi,I$=class extends cD(upe,T$){constructor(e,t,i){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.fov=kt.RAD2DEG*2*this.angle,r.aspect=1,r.near=100,r.far=2500;let n=new sx(this.shadow.camera);n.visible=!1,this.gizmos.shadowmap=n,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof sx&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),EB.setFromMatrixPosition(this.matrixWorld),AB.setFromRotationMatrix(this.matrixWorld),CB.copy(this.up).applyQuaternion(AB).negate().multiplyScalar(this.distance),this.target.position.copy(EB).add(CB),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.angle!==void 0&&(this.angle=e.angle),e.penumbra!==void 0&&(this.penumbra=e.penumbra),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.penumbraSize!==void 0&&t.scene.markPenumbraSizeDirty(),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}};function wMe(e){let t=(e[0][0]+e[1][1])/2,i=(e[0][0]-e[1][1])/2,r=(e[1][0]+e[0][1])/2,n=(e[1][0]-e[0][1])/2,a=Math.sqrt(t*t+n*n),s=Math.sqrt(i*i+r*r),o=a+s,l=a-s,c=Math.atan2(r,i),u=Math.atan2(n,t),d=(u-c)/2,h=(u+c)/2,f=[[Math.cos(h),Math.sin(h)],[-Math.sin(h),Math.cos(h)]],p=[[o,0],[0,l]],m=[[Math.cos(d),Math.sin(d)],[-Math.sin(d),Math.cos(d)]];return f[0][0]*=-1,f[0][1]*=-1,m[0][0]*=-1,m[1][0]*=-1,[f,p,m]}function t2(e,t){return[[e[0][0]*t[0][0]+e[0][1]*t[1][0],e[0][0]*t[0][1]+e[0][1]*t[1][1]],[e[1][0]*t[0][0]+e[1][1]*t[1][0],e[1][0]*t[0][1]+e[1][1]*t[1][1]]]}function MB(e){return[[e[0][0],e[1][0]],[e[0][1],e[1][1]]]}function xMe(e){let[t,i,r]=wMe(e),n=t2(t,MB(r)),a=t2(t2(r,i),MB(r)),s=Math.atan2(n[1][0],n[0][0]),o=[a[0][0],a[1][1]],l=[a[0][1]/a[1][1],a[1][0]/a[0][0]];return{rotation:s,scale:o,shear:l}}function _Me({rotation:e,scale:t,shear:i}){let r=Math.cos(e),n=Math.sin(e),a=[[r,-n],[n,r]],s=[[t[0],i[0]*t[1]],[i[1]*t[0],t[1]]],o=t2(a,s);return[o[0][0],o[1][0],o[0][1],o[1][1]]}var Xi;(e=>{function t(){return[1,0,0,0,1,0,0,0,1]}e.identity=t;function i(_,E=e.identity()){for(let C=0,A=_.length;C<A;C++)E[C]=_[C];return E}e.copy=i;function r(_,E,C,A,M,T){return e.setAbcdef(e.identity(),_,E,C,A,M,T)}e.create=r;function n(_,E,C,A,M,T,P){return _[0]=E,_[1]=A,_[2]=T,_[3]=C,_[4]=M,_[5]=P,_}e.setAbcdef=n;function a(_,E){let[C,A,M,T,P,D]=o(_),[k,L,R,N,I,B]=o(E),z=k*C+L*M,V=k*A+L*T,W=R*C+N*M,G=R*A+N*T,q=I*C+B*M+P,ae=I*A+B*T+D;return e.create(z,V,W,G,q,ae)}e.append=a;function s(_,E){let[C,A,M,T,P,D]=o(_),[k,L,R,N,I,B]=o(E),z=C,V=A,W=M,G=T;(k!==1||L!==0||R!==0||N!==1)&&(z=C*k+A*R,V=C*L+A*N,W=M*k+T*R,G=M*L+T*N);let q=P*k+D*R+I,ae=P*L+D*N+B;return e.create(z,V,W,G,q,ae)}e.prepend=s;function o(_){return[_[0],_[3],_[1],_[4],_[2],_[5]]}e.getAbcdef=o;function l(_){let[E,C,A,M,T,P]=e.getAbcdef(_),D=E*M-C*A,k=M/D,L=-C/D,R=-A/D,N=E/D,I=(A*P-M*T)/D,B=-(E*P-C*T)/D;return e.create(k,L,R,N,I,B)}e.invert=l;function c([_,E],C){let[A,M,T,P,D,k]=e.getAbcdef(C);return[A*_+T*E+D,M*_+P*E+k]}e.apply=c;function u(_,E){let[C,A,M,T,P,D]=e.getAbcdef(E),k=1/(C*T+M*-A),[L,R]=_;return[T*k*L+-M*k*R+(D*M-P*T)*k,C*k*R+-A*k*L+(-D*C+P*A)*k]}e.applyInverse=u;function d(_,E,C=E){let[A,M,T,P,D,k]=e.getAbcdef(_);return e.setAbcdef(_,A*E,M*C,T*E,P*C,D*E,k*C),_}e.scale=d;function h(_,E){let C=Math.cos(E),A=Math.sin(E),[M,T,P,D,k,L]=e.getAbcdef(_);return e.setAbcdef(_,M*C-T*A,M*A+T*C,P*C-D*A,P*A+D*C,k*C-L*A,k*A+L*C),_}e.rotate=h;function f(_,E,C){let[A,M]=C,T=e.translate(_,-A,-M);return T=e.rotate(T,E),T=e.translate(T,A,M),T}e.rotateAround=f;function p(_,E,C){let[A,M,T,P,D,k]=e.getAbcdef(_);return e.setAbcdef(_,A,M,T,P,D+E,k+C),_}e.translate=p;function m(_,E,C){let[A,M,T,P]=e.getAbcdef(_);return e.setAbcdef(_,A,M,T,P,E,C),_}e.setTranslate=m;function v(_,E,C){let[A,M,T,P]=e.getAbcdef(_);return e.setAbcdef(_,A,M,T,P,E,C),_}e.setPosition=v;function y(_){let[E,C,A,M]=e.getAbcdef(_),T=Math.sqrt(E*E+C*C),P=Math.sqrt(A*A+M*M);return[T,P]}e.getScale=y;function x(_){let[,,,,E,C]=e.getAbcdef(_);return[E,C]}e.getPosition=x;function b(_,E){return e.decompose(_,E).rotation}e.getRotation=b;function w(_,E){let[C,A,M,T,P,D]=e.getAbcdef(_),{rotation:k,scale:L,shear:R}=xMe([[C,M],[A,T]]);return{position:[P+(E[0]*C+E[1]*M)-E[0],D+(E[0]*A+E[1]*T)-E[1]],scale:L,rotation:k,shear:R,pivot:E}}e.decompose=w;function S(_,E,C,A,M=[0,0]){let[T,P]=_,[D,k]=A,[L,R,N,I]=_Me({rotation:C,scale:E,shear:M}),B=T-(D*L+k*N)+D,z=P-(D*R+k*I)+k;return e.create(L,R,N,I,B,z)}e.compose=S})(Xi||(Xi={}));var SMe=Math.PI/180;function CMe(e,t,i,r,n,a){let s=e-i,o=t-r;return s*s/(n*n)+o*o/(a*a)<=1}function EMe(e){return e*SMe}var la=class{constructor(e,t,i){this.uuid=e,this.data=t,this.localMatrix=Xi.identity(),this.worldMatrix=Xi.identity(),this.ignoreCameraZoom=!1,this.visible=!0,this._singleBBox=new FM,this._recursiveBBox=new FM,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.stateSelection=null,this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this.name="",this.position=[0,0],this.scale=[1,1],this.rotation=0,this.shear=[0,0],this.emitter=cS(),this.dpr=i.dpr??1,this.dataPatched=t}project(e,t){let i=this.worldMatrix;return t&&(i=Xi.append(t.worldMatrix,i)),Xi.applyInverse(e,i)}intersects(e,t,i,r=!1){return this.visible&&!this.data.raycastLock&&this.intersectsInLocalSpace(...this.project([e,t],i),r)}intersectsInLocalSpace(e,t,i=!1){let{min:r,max:n}=i?this.recursiveBBox:this.singleBBox;return e>=r[0]&&e<=n[0]&&t>=r[1]&&t<=n[1]}applyTransforms(e){e.setTransform(this.worldMatrix,this.ignoreCameraZoom)}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges()),this._recursiveBBox}updateLocalMatrix(){this.localMatrix=Xi.compose(this.position,this.scale,EMe(this.rotation),Bf.getPivot(this.dataPatched),this.shear)}updateWorldMatrix(e,t,i){let r=this.parent;t&&r!==null&&r!==void 0&&r.updateWorldMatrix(e,!0,!1),e&&this.updateLocalMatrix(),this.parent?this.worldMatrix=Xi.append(this.parent.worldMatrix,this.localMatrix):this.worldMatrix=Xi.copy(this.localMatrix),this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}get pivot(){return Bf.getPivot(this.data)}getCenter(){return[0,0]}getHalfSize(){return[0,0]}get id(){return this.uuid}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(e=>{e.resetBBoxNeedsUpdateSelf()})}updateTransformState(e){let t=!1;e.position!==void 0&&(t=!0,this.position=e.position),e.rotation!==void 0&&(t=!0,this.rotation=e.rotation),e.scale!==void 0&&(t=!0,this.scale=e.scale),e.shear!==void 0&&(t=!0,this.shear=e.shear),t&&(this.updateWorldMatrix(!0,!1,!0),this.resetBBoxNeedsUpdate())}updateByOp(e,t,i){e.type===0&&e.props.visible!==void 0&&(this.visible=e.props.visible),this.data=t,this.data=t;let r=e,n=Cr(e.path,["states","*"]);if(n!==null){if(e.type===0){let[a]=n;if((this==null?void 0:this.stateSelection)===a){let s={...e.props};if(delete s.name,Object.values(e.props).some(o=>o===void 0)){let o=this.data;if(o!==void 0){let l=Un.zoom(o,e.path.slice(2));if(l)for(let c in e.props)e.props[c]===void 0&&c in l&&(s[c]=l[c])}}r={...e,props:s,path:e.path.slice(2)}}}}else if(e.type===0){let a=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(a!==void 0){if(e.props.name!==void 0&&a.name){let{name:o,...l}=a;a=l}let s=Un.removeOverridden(e.path,e.props,a);r={...e,props:s}}}this.updateByPatchedOpBase(r,yf.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),i)}changeSelectedState(e,t,i=!1){if(!(this.data.states.length===0&&!i)){for(let r of this.data.states)yf.toOps(this.data,r.data).forEach(n=>{let a=gx.replaceProps(n,this.data);this.dataPatched=this.data,this.updateByPatchedOp(a,this.data,t)});if(e!==null){let r=this.data.states.data(e);r&&(this.dataPatched=yf.patch(this.data,r),yf.toOps(this.data,r).forEach(n=>{this.updateByPatchedOp(n,this.dataPatched,t)}))}i&&this.updateTransformState(this.dataPatched),this.stateSelection=e}}updateState(e,t){e.name!==void 0&&(this.name=e.name),e.visible!==void 0&&(this.visible=e.visible),this.updateTransformState(e)}updateByPatchedOpBase(e,t,i){this.dataPatched=t,this.updateByPatchedOp(e,t,i)}updateByPatchedOp(e,t,i){e.path.length===0&&e.type===0&&this.updateState(e.props,i),this.requestRender()}traverseFrameAncestors(e){this.traverseAncestors(t=>{t.data.type==="frame2d"&&e(t)})}traverseAncestors(e){let t=this.parent;for(;t;)e(t),t=t.parent}requestRender(){this.traverseFrameAncestors(e=>{e.requestRender()})}clone(e){let t=new la(this.uuid,this.data,e);return t.parent=void 0,t}addEventListener(e,t){this.emitter.on(e,t)}removeEventListener(e,t){this.emitter.off(e,t)}dispatchEvent(e){this.emitter.emit(e.type,{...e,target:e.target??this})}traverseSortNextHelper(){let e=this.parent;if(e){let t=e.children;if(t){let i=t.indexOf(this)+1;return t[i]?t[i]:e.traverseSortNextHelper()}}}sortNext(){let e=this.children;return e&&e.length>0&&e[0]?e[0]:this.traverseSortNextHelper()}isDescendantOf(e){e instanceof la&&(e=e.uuid);let t=this;for(;t.parent;){if(t.parent.uuid===e)return!0;t=t.parent}return!1}},cl=class extends la{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.context=i,this.children=[]}add(e){e.parent&&e.parent instanceof cl&&e.parent.remove(e),this.children.push(e),e.parent=this}remove(e){let t=this.children.indexOf(e);t>=0&&(this.children.splice(t,1),e.parent=void 0)}traverse(e){let t=e(this);if(t!==!0)for(let i of this.children)i instanceof cl?i.traverse(e):t=e(i)}intersectsChildrenHelper(e,t,i,r,n){for(let a of this.children)if(a.intersects(e,t,i,!1)&&(n.push(a),r)||a instanceof cl&&a.intersectsChildrenHelper(e,t,i,r,n))return!0;return!1}intersectsChildren(e,t,i,r=!1,n=[],a=!1){return this.intersectsChildrenHelper(e,t,i,r,n),n}intersectsChildrenHelperReverse(e,t,i,r,n){for(let a of this.children)if(a instanceof cl&&a.intersectsChildrenHelperReverse(e,t,i,r,n)||a.intersects(e,t,i,!1)&&(n.push(a),r))return!0;return!1}intersectsChildrenReverse(e,t,i,r=!1,n=[],a=!1){return this.intersectsChildrenHelperReverse(e,t,i,r,n),n}updateWorldMatrix(e,t,i){if(super.updateWorldMatrix(e,t,i),i&&this.children)for(let r of this.children)r.updateWorldMatrix(e,!1,!0)}find(e){let t;return this.traverse(i=>{i.uuid===e&&(t=i)}),t}innerDrawChildren(e){for(let t=this.children.length-1;t>=0;t--)this.children[t].draw(e)}resetBBoxNeedsUpdate(){super.resetBBoxNeedsUpdate(),this.traverse(e=>{e.resetBBoxNeedsUpdateSelf()})}clone(e){let t=new cl(this.uuid,this.data,e);t.parent=void 0;for(let i of this.children)t.add(i.clone(e));return t}},ch=class extends cl{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.updateState(t,i)}draw(e){!this.visible||(e.save(),this.applyTransforms(e),this.innerDrawChildren(e),e.restore())}clone(e){let t=new ch(this.uuid,this.data,e);t.parent=void 0;for(let i of this.children)t.add(i.clone(e));return t}};function AMe(e,t){let[[i,r],[n,a]]=e,[[s,o],[l,c]]=t,u=(i-n)*(o-c)-(r-a)*(s-l);if(u===0)return!1;let d=((i-s)*(o-c)-(r-o)*(s-l))/u,h=-((i-n)*(r-o)-(r-a)*(i-s))/u;return d>=0&&d<=1&&h>=0&&h<=1}var O$=[[-1,1],[-1,-1],[1,-1],[1,1]],TB=(e,t,i)=>{let r=e.getCenter(),n=e.getHalfSize(),a=Xi.append(t,e.worldMatrix);n[0]===0&&n[1]===0?i.push(Xi.apply(r,a)):O$.forEach(s=>{let o=[s[0]*n[0]+r[0],s[1]*n[1]+r[1]];i.push(Xi.apply(o,a))})},FM=class{constructor(){this.matrix=Xi.identity(),this.min=[1/0,1/0],this.max=[-1/0,-1/0],this.vertices=[],this.edges=[]}setFromObjectSize(e,t=!1){e.updateWorldMatrix(),this.makeEmpty(),Xi.copy(e.worldMatrix,this.matrix);let i=Xi.invert(e.worldMatrix);this.expandByObjectSize(e,i,t)}expandByObjectSize(e,t,i=!1){let r=[];i===!0&&e instanceof cl?e.traverse(n=>{n.visible&&TB(n,t,r)}):TB(e,t,r),this.setFromPoints(r)}setFromSize(e,t,i){this.makeEmpty(),Xi.copy(i,this.matrix),this.expandBySize(e,t,i)}expandBySize(e,t,i){[Xi.apply([0,0],i),Xi.apply([0,t],i),Xi.apply([e,t],i),Xi.apply([e,0],i)].forEach(r=>this.expandByPoint(r))}getCenter(){let[e,t]=this.min,[i,r]=this.getHalfSize();return Xi.apply([e+i,t+r],this.matrix)}getSize(){return[this.max[0]-this.min[0],this.max[1]-this.min[1]]}getHalfSize(){return[(this.max[0]-this.min[0])*.5,(this.max[1]-this.min[1])*.5]}makeEmpty(){this.min=[1/0,1/0],this.max=[-1/0,-1/0]}setFromPoints(e){this.makeEmpty();for(let t of e)this.expandByPoint(t)}expandByPoint(e){this.min=[Math.min(this.min[0],e[0]),Math.min(this.min[1],e[1])],this.max=[Math.max(this.max[0],e[0]),Math.max(this.max[1],e[1])]}computeVertices(){let[e,t]=this.getHalfSize(),i=this.getCenter(),[r,n,a,s]=Xi.getAbcdef(this.matrix),o=Xi.create(r,n,a,s,i[0],i[1]);this.vertices=O$.map(([l,c])=>Xi.apply([l*e,c*t],o))}computeEdges(){this.edges=[];for(let e=0,t=this.vertices.length;e<t;++e)this.edges.push([this.vertices[e],this.vertices[(e+1)%t]])}project(e,t){let i=this.matrix;return t&&(i=Xi.append(t.worldMatrix,i)),Xi.applyInverse(e,i)}intersects(e,t,i){return this.intersectsInLocalSpace(...this.project([e,t],i))}intersectsInLocalSpace(e,t){let{min:i,max:r}=this;return e>=i[0]&&e<=r[0]&&t>=i[1]&&t<=r[1]}containsPoint(e){let[t,i]=e,[r,n]=this.min,[a,s]=this.max;return t>=r&&t<=a&&i>=n&&i<=s}intersectsBBox2D(e){for(let t=0,i=this.edges.length;t<i;t++){let r=this.edges[t];for(let n=0,a=e.edges.length;n<a;n++){let s=e.edges[n];if(AMe(r,s))return!0}}for(let t=0,i=e.vertices.length;t<i;t++){let r=e.vertices[t];if(this.containsPoint(r))return!0}return!1}ensureMinMax(){let e=this.min,t=this.max;this.min=[Math.min(e[0],t[0]),Math.min(e[1],t[1])],this.max=[Math.max(e[0],t[0]),Math.max(e[1],t[1])]}copy(e){this.min=[...e.min],this.max=[...e.max],Xi.copy(e.matrix,this.matrix),this.computeVertices(),this.computeEdges()}clone(){let e=new FM;return e.copy(this),e}},R$,MMe=new Promise(e=>{R$=e}),PB=!1,dw;function TMe(){if(PB)return;if(dw)return dw;async function e(){let t=await Ks(()=>import("./L7l3pL7d.js"),[],import.meta.url);R$(t.default??t),PB=!0}return dw=e(),dw}function DB(e){let t=!1;return e.scene.objects.traverse((i,r)=>{(r.type==="Mesh"&&r.geometry.type==="UIGeometry"||r.type==="Page"&&r.uiFrame!==void 0)&&(t=!0)}),t}var gi,c4;async function PMe(e){let t=await MMe;gi||(c4||(c4=t({locateFile:()=>e})),gi=await c4)}var IB=Xi.identity(),k$=class{constructor(e,t=1){this.canvas=e,this._dpr=t,this._width=0,this._height=0,this._strokeMode="inside",this._layerBlur=0,this._backgroundBlur=0,this._dropShadowBlur=0,this._dropShadowOffsetX=0,this._dropShadowOffsetY=0,this._dropShadowColor=br.transparent,this._innerShadowBlur=0,this._innerShadowOffsetX=0,this._innerShadowOffsetY=0,this._innerShadowSpread=0,this._innerShadowColor=br.transparent,this._fonts=new Map,this._isSizeDirty=!1;try{let i=e.getBoundingClientRect();e.width=i.width*t,e.height=i.height*t}catch{console.log(e.width,t)}this._currentM3Transform=IB,this._currentTransform=new Float32Array(IB)}get dpr(){return this._dpr}set dpr(e){this._dpr=e,this._isSizeDirty=!0}async init(){var e,t;if(!this.wasmURL)throw Error("Your must set the wasm binary url with renderer.wasmURL = ... before you can call renderer.init");await PMe(this.wasmURL),this._surface=gi.MakeWebGLCanvasSurface(this.canvas),this.ctx=(e=this._surface)==null?void 0:e.getCanvas(),this._paint=new gi.Paint,this._paint.setAntiAlias(!0),this._paintFill=this._paint.copy(),this._paintFill.setStyle(gi.PaintStyle.Fill),this._paintStroke=this._paint.copy(),this._paintStroke.setStyle(gi.PaintStyle.Stroke),(t=this.ctx)==null||t.scale(this.dpr,this.dpr)}get currentTransform(){return this._currentM3Transform}get currentTransformBuffer(){return this._currentTransform}set currentTransform(e){this._currentM3Transform=e,this._currentTransform.set(e)}async loadFont(e,t){let i=await(await fetch(e)).arrayBuffer();this.registerFont(i,t)}registerFont(e,t){if(this._fonts.has(t))return;let i=gi.FontMgr.FromData(e);if(i)this._fonts.set(t,i);else throw new Error("Invalid font data for "+t)}get width(){return this._width}get height(){return this._height}set strokeColor(e){this._paintStroke&&this._paintStroke.setColor(hw(e),gi.ColorSpace.DISPLAY_P3)}set fillColor(e){this._paintFill&&this._paintFill.setColor(hw(e),gi.ColorSpace.DISPLAY_P3)}set lineWidth(e){this._paintStroke&&this._paintStroke.setStrokeWidth(this._strokeMode==="center"?e:e*2)}set strokeMode(e){this._strokeMode=e}set dropShadowBlur(e){this._dropShadowBlur=e}set dropShadowColor(e){this._dropShadowColor=e}set dropShadowOffsetX(e){this._dropShadowOffsetX=e}set dropShadowOffsetY(e){this._dropShadowOffsetY=e}set innerShadowBlur(e){this._innerShadowBlur=e}set innerShadowColor(e){this._innerShadowColor=e}set innerShadowOffsetX(e){this._innerShadowOffsetX=e}set innerShadowOffsetY(e){this._innerShadowOffsetY=e}set innerShadowSpread(e){this._innerShadowSpread=e}set layerBlur(e){this._layerBlur=e}set backgroundBlur(e){this._backgroundBlur=e}clear(){var e;(e=this.ctx)==null||e.clear(gi.TRANSPARENT)}save(){var e;(e=this.ctx)==null||e.save()}restore(){var e;(e=this.ctx)==null||e.restore()}beginPath(){var e;(e=this._currentPath)==null||e.delete(),this._currentPath=new gi.Path}closePath(){let e=this._currentPath;if(e){if(e.isEmpty())return;let t=e.getBounds();(t[3]-t[1]||t[2]-t[0])&&e.close()}}fill(){this._paintInner(this._paintFill,!0)}stroke(){this._paintInner(this._paintStroke,!1)}clipRect(e,t,i,r,n=0,a=0,s=0,o=0){var c,u;let l=gi.XYWHRect(e,t,i,r);if(n===0&&a===0&&o===0&&s===0)(c=this.ctx)==null||c.clipRect(l,gi.ClipOp.Intersect,!0);else{let d=gi.RRectXY(l,n,n);d[4]=d[5]=n,d[6]=d[7]=a,d[8]=d[9]=s,d[10]=d[11]=o,(u=this.ctx)==null||u.clipRRect(d,gi.ClipOp.Intersect,!0)}}_applyShadowOffsetMatrix(){if(this.ctx){let e=Xi.invert(this.currentTransform);this.ctx.concat(e);let t=Xi.translate(Xi.identity(),this._dropShadowOffsetX,this._dropShadowOffsetY);this.ctx.concat(t),this.ctx.concat(this._currentTransform)}}_applyEffectsToPaint(e,t,i=!0){var r,n,a,s;if(this.ctx&&this._currentPath){let o,l=!1;if(i&&this._hasDropShadow()){let c=e.copy();c.setColor(hw(this._dropShadowColor));let u;this._dropShadowBlur>0&&(u=gi.MaskFilter.MakeBlur(gi.BlurStyle.Normal,this._dropShadowBlur*this.dpr*(((r=this.camera)==null?void 0:r.scale)??1),!1),c.setMaskFilter(u)),this.ctx.save(),this.ctx.clipPath(this._currentPath,gi.ClipOp.Difference,!0),this._applyShadowOffsetMatrix(),t(c),this.ctx.restore(),c.delete(),u==null||u.delete()}if(this._backgroundBlur>0&&i){this.ctx.save(),this.ctx.clipPath(this._currentPath,gi.ClipOp.Intersect,!0);let c=gi.ImageFilter.MakeBlur(this._backgroundBlur,this._backgroundBlur,gi.TileMode.Clamp,null),u=e.copy();u.setImageFilter(c),u.setAlphaf(1);let d=this._currentPath.computeTightBounds();this.ctx.saveLayer(u,d,null,gi.SaveLayerInitWithPrevious),this.ctx.drawColor(e.getColor()),this.ctx.restore(),this.ctx.restore(),u.delete(),c.delete(),l=!0}if(this._layerBlur>0){let c=e.copy();o=gi.MaskFilter.MakeBlur(gi.BlurStyle.Normal,this._layerBlur*this.dpr*(((n=this.camera)==null?void 0:n.scale)??1),!1),c.setMaskFilter(o),t(c),c.delete(),o.delete(),l=!0}if(l||t(e),i&&this._hasInnerShadow()){let c=new gi.Paint;c.setAntiAlias(!0),c.setStyle(gi.PaintStyle.Fill),c.setColor(hw(this._innerShadowColor));let u;this._innerShadowBlur>0&&(u=gi.MaskFilter.MakeBlur(gi.BlurStyle.Normal,this._innerShadowBlur*this.dpr*(((a=this.camera)==null?void 0:a.scale)??1),!1),c.setMaskFilter(u));let d=this._currentPath.computeTightBounds(),[h,f,p,m]=d,v=p-h,y=m-f;this.ctx.save(),this.ctx.clipPath(this._currentPath,gi.ClipOp.Intersect,!0),this.ctx.saveLayer(c,d,null,gi.SaveLayerInitWithPrevious),(s=this.ctx)==null||s.translate(this._innerShadowOffsetX,this._innerShadowOffsetY),this.ctx.drawRect(gi.XYWHRect(-1e3-this._innerShadowOffsetX,-1e3-this._innerShadowOffsetY,2e3+v+Math.abs(this._innerShadowOffsetX*2),2e3+y+Math.abs(this._innerShadowOffsetY*2)),c),c.setBlendMode(gi.BlendMode.Clear),this.ctx.drawPath(this._currentPath,c),this.ctx.restore(),this.ctx.restore(),c.delete(),u==null||u.delete()}}}_paintInner(e,t=!0){if(this.ctx&&this._currentPath&&e){let i=this.ctx,r=this._currentPath;this._applyEffectsToPaint(e,n=>{let a=!1;!t&&this._strokeMode!=="center"&&(i.save(),i.clipPath(r,this._strokeMode==="outside"?gi.ClipOp.Difference:gi.ClipOp.Intersect,!0),a=!0),i.drawPath(r,n),a&&i.restore()},t)}}_hasDropShadow(){var e;return((e=this._dropShadowColor)==null?void 0:e.a)>0}_hasInnerShadow(){var e;return((e=this._innerShadowColor)==null?void 0:e.a)>0}path(e){var t;(t=this._currentPath)==null||t.addPath(gi.Path.MakeFromSVGString(e))}ellipse(e,t,i,r,n,a,s,o){var c;if(!OB([e,t,i,r])||!this._currentPath)return;if(i<0||r<0)throw Error("radii cannot be negative");let l=gi.XYWHRect(e-i,t-r,i*2,r*2);(c=this._currentPath)==null||c.addOval(l)}rect(e,t,i,r,n=0,a=0,s=0,o=0){var c,u;let l=gi.XYWHRect(e,t,i,r);if(OB(l))if(n===0&&a===0&&o===0&&s===0)(c=this._currentPath)==null||c.addRect(l);else{let d=gi.RRectXY(l,n,n);d[4]=d[5]=n,d[6]=d[7]=a,d[8]=d[9]=s,d[10]=d[11]=o,(u=this._currentPath)==null||u.addRRect(d)}}getHorizontalAlign(e){switch(e){case 2:return gi.TextAlign.Right;case 3:return gi.TextAlign.Center;case 4:return gi.TextAlign.Justify;case 1:default:return gi.TextAlign.Left}}drawTextInner(e,t,i,[r,n,a,s],o,l,c=!0){let u=0,{ctx:d}=this;if(!d)return u;let h=l.copy(),f=l.copy();return f.setAlphaf(0),this._applyEffectsToPaint(h,p=>{t.pushPaintStyle(i,p,f),t.addText(e);let m=t.build();m.layout(a);let v=n;o===2?v+=(s-m.getHeight())/2:o===3&&(v+=s-m.getHeight()),d.drawParagraph(m,r,v),u=m.getHeight(),t.reset(),m.delete()},c),h.delete(),f.delete(),u}drawText(e,t){let i=0,r=this._fonts.get(t.font),{ctx:n,_paintFill:a,_paintStroke:s}=this;if(r&&n){let o=new gi.TextStyle({fontFamilies:[t.font],fontSize:t.fontSize,heightMultiplier:t.lineHeight,letterSpacing:t.letterSpacing}),l=new gi.ParagraphStyle({textStyle:o,textAlign:this.getHorizontalAlign(t.horizontalAlign)}),c=gi.XYWHRect(t.x,t.y,t.width,t.height),u=gi.ParagraphBuilder.Make(l,r);a&&(i=this.drawTextInner(e,u,o,c,t.verticalAlign,a,!0)),s&&(i=this.drawTextInner(e,u,o,c,t.verticalAlign,s,!1)),u.delete()}return{height:i}}render(){var e;(e=this._surface)==null||e.flush()}moveTo(e,t){var i;(i=this._currentPath)==null||i.moveTo(e,t)}lineTo(e,t){var i;(i=this._currentPath)==null||i.lineTo(e,t)}bezierCurveTo(e,t,i,r,n,a){var s;(s=this._currentPath)==null||s.cubicTo(e,t,i,r,n,a)}quadraticCurveTo(e,t,i,r){var n;(n=this._currentPath)==null||n.quadTo(e,t,i,r)}setTransform(e,t=!1){var n,a,s,o,l;if(!this.ctx)return;let i=this.ctx.getTotalMatrix(),r=Xi.invert(i);if(r&&this.ctx.concat(r),(n=this.ctx)==null||n.scale(this.dpr,this.dpr),((a=this.camera)==null?void 0:a.enabled)&&((s=this.ctx)==null||s.concat(this.camera.worldMatrix),t)){let c=Xi.getScale(this.camera.worldMatrix);(o=this.ctx)==null||o.scale(1/c[0],1/c[1])}(l=this.ctx)==null||l.concat(e),this.currentTransform=e}transform(e){var t;(t=this.ctx)==null||t.concat(e)}setSize(e,t){var i;!this._isSizeDirty&&e===this._width&&t===this._height||(this._isSizeDirty=!1,this._width=e,this._height=t,this.canvas.style.width=e+"px",this.canvas.style.height=t+"px",this.canvas.width=e*this.dpr,this.canvas.height=t*this.dpr,this._surface&&(this._surface=gi.MakeWebGLCanvasSurface(this.canvas),this.ctx=(i=this._surface)==null?void 0:i.getCanvas()))}};function OB(e){for(let t=0;t<e.length;t++)if(e[t]!==void 0&&!Number.isFinite(e[t]))return!1;return!0}function hw({r:e,g:t,b:i,a:r}){return gi.Color4f(e,t,i,r)}var RB=class{constructor(e,t,i){this.uuid=e,this.data=t,this.enabled=!1,this.color=br.transparent,this.blurRadius=0,this.offset=[0,0],this.spread=0,this.update(t)}update(e){e.color!==void 0&&(this.color=e.color),e.enabled!==void 0&&(this.enabled=e.enabled),e.blurRadius!==void 0&&(this.blurRadius=e.blurRadius),e.offset!==void 0&&(this.offset=e.offset),e.spread!==void 0&&(this.spread=e.spread)}},kB=class{constructor(e,t,i){this.uuid=e,this.data=t,this.enabled=!1,this.radius=0,this.update(t)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.radius!==void 0&&(this.radius=e.radius)}},DMe=class{constructor(e,t,i){this.uuid=e,this.data=t,this.enabled=!1,this.color=br.transparent,this.update(t)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.color!==void 0&&(this.color=e.color)}},IMe=class{constructor(e,t,i){this.uuid=e,this.data=t,this.enabled=!1,this.color=br.transparent,this.thickness=0,this.mode="inside",this.update(t)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.color!==void 0&&(this.color=e.color),e.thickness!==void 0&&(this.thickness=e.thickness),e.mode!==void 0&&(this.mode=e.mode)}},ia=class extends la{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.autoClose=!0,this.fill=new DMe(e+"-fill",t.fill,i),this.stroke=new IMe(e+"-stroke",t.stroke,i),this.dropShadow=new RB(e+"-dropShadow",t.dropShadow,i),this.innerShadow=new RB(e+"-innerShadow",t.innerShadow,i),this.backgroundBlur=new kB(e+"-backgroundBlur",t.backgroundBlur,i),this.layerBlur=new kB(e+"-layerBlur",t.layerBlur,i)}applyFillStroke(e){e.fillColor=this.fill.enabled?this.fill.color:br.transparent,e.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:br.transparent,e.strokeMode=this.stroke.mode,e.lineWidth=this.stroke.thickness}applyFilters(e){this.layerBlur.enabled?e.layerBlur=this.layerBlur.radius*5:e.layerBlur=0,this.backgroundBlur.enabled?e.backgroundBlur=this.backgroundBlur.radius*5:e.backgroundBlur=0,this.dropShadow.enabled?(e.dropShadowBlur=this.dropShadow.blurRadius*5,e.dropShadowColor=this.dropShadow.color,e.dropShadowOffsetX=this.dropShadow.offset[0],e.dropShadowOffsetY=this.dropShadow.offset[1]):e.dropShadowColor=br.transparent,this.innerShadow.enabled?(e.innerShadowSpread=this.innerShadow.spread,e.innerShadowBlur=this.innerShadow.blurRadius*5,e.innerShadowColor=this.innerShadow.color,e.innerShadowOffsetX=this.innerShadow.offset[0],e.innerShadowOffsetY=this.innerShadow.offset[1]):e.innerShadowColor=br.transparent}innerDraw(e){}draw(e){!this.visible||(e.save(),this.applyTransforms(e),this.applyFilters(e),this.applyFillStroke(e),e.beginPath(),this.innerDraw(e),this.autoClose&&e.closePath(),this.fill.enabled&&e.fill(),this.stroke.enabled&&e.stroke(),e.restore())}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),e.type===0&&(Cr(e.path,["fill"])?this.fill.update(e.props):Cr(e.path,["stroke"])?this.stroke.update(e.props):Cr(e.path,["dropShadow"])?this.dropShadow.update(e.props):Cr(e.path,["innerShadow"])?this.innerShadow.update(e.props):Cr(e.path,["layerBlur"])?this.layerBlur.update(e.props):Cr(e.path,["backgroundBlur"])?this.backgroundBlur.update(e.props):this.resetBBoxNeedsUpdate())}updateState(e,t){super.updateState(e,t),e.fill!==void 0&&this.fill.update(e.fill),e.stroke!==void 0&&this.stroke.update(e.stroke),e.dropShadow!==void 0&&this.dropShadow.update(e.dropShadow),e.innerShadow!==void 0&&this.innerShadow.update(e.innerShadow),e.layerBlur!==void 0&&this.layerBlur.update(e.layerBlur),e.backgroundBlur!==void 0&&this.backgroundBlur.update(e.backgroundBlur)}clone(e){let t=new ia(this.uuid,this.data,e);return t.parent=void 0,t}},hD=class extends ia{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.width=0,this.height=0,this.updateState(t,i)}innerDraw(e){e.ellipse(this.width*.5,this.height*.5,this.width*.5,this.height*.5,0,0,Math.PI*2)}intersectsInLocalSpace(e,t){return CMe(e,t,this.width*.5,this.height*.5,this.width*.5,this.height*.5)}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e)}clone(e){let t=new hD(this.uuid,this.data,e);return t.parent=void 0,t}},vy=class extends ia{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.width=0,this.height=0,this.cornerRadius=[0,0,0,0],this.updateState(t,i)}innerDraw(e){e.rect(0,0,this.width,this.height,...this.cornerRadius)}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateCornerState(e){e.cornerRadius!==void 0&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateCornerState(e)}clone(e){let t=new vy(this.uuid,this.data,e);return t.parent=void 0,t}},fD=class extends ia{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this._textHeight=0,this._textHeightDirty=!0,this.width=0,this.height=0,this.updateState(t,i)}get textHeight(){return this._textHeight}applyFillStroke(e){e.fillColor=this.fill.enabled?this.fill.color:br.transparent,e.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:br.transparent,e.strokeMode="center",e.lineWidth=this.stroke.thickness}innerDraw(e){var a;(a=this._fontHolder)!=null&&a.arrayBuffer&&this._fontHolder.arrayBuffer.byteLength>1&&this.data.font&&e.registerFont(this._fontHolder.arrayBuffer,this.data.font);let t=this.data.textTransform,i=this.data.text.textValue.toString(),r=t===2?i.toUpperCase():t===3?i.toLowerCase():i,{height:n}=e.drawText(r,{x:0,y:0,width:this.width,height:this.height,fontSize:this.data.fontSize,lineHeight:this.data.lineHeight??1,letterSpacing:this.data.letterSpacing??0,horizontalAlign:this.data.horizontalAlign,verticalAlign:this.data.verticalAlign,font:this.data.font});this._textHeight=n}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateFontState(e,{shared:t}){e.font!==void 0&&(this._fontHolder=t.getFont(e.font),this._fontHolder&&!this._fontHolder.isLoaded&&this._fontHolder.loadingPromise.then(()=>{this.requestRender()}))}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateFontState(e,t)}clone(e){let t=new fD(this.uuid,this.data,e);return t.parent=void 0,t}},L$=class extends ia{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.curves=[],this.extremasBBox={min:[0,0],max:[0,0]},this.updateState(t,i)}computeExtremas(){this.curves.length===0&&this.computeCurves();let e=this.curves.map(r=>$x.extremas(r)),t=[1/0,1/0],i=[-1/0,-1/0];for(let r=0,n=e.length;r<n;r++){let a=e[r];a[0][0]<t[0]&&(t[0]=a[0][0]),a[0][1]<t[1]&&(t[1]=a[0][1]),a[1][0]>i[0]&&(i[0]=a[1][0]),a[1][1]>i[1]&&(i[1]=a[1][1])}return this.extremasBBox.min=[t[0],t[1]],this.extremasBBox.max=[i[0],i[1]],this.extremasBBox}computeCurves(){this.curves=[];for(let i=1,r=this.data.points.length;i<r;i++){let n=this.data.points[i].data,a=this.data.points[i-1].data,s={start:a.position,cp1:a.controlNext.position,cp2:n.controlPrevious.position,end:n.position};this.curves.push(s)}let e=this.data.points[0].data,t=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let i={start:t.position,cp1:t.controlNext.position,cp2:e.controlPrevious.position,end:e.position};this.curves.push(i)}}getCenter(){let[e,t]=this.extremasBBox.min,[i,r]=this.getHalfSize();return[e+i,t+r]}getHalfSize(){let{min:e,max:t}=this.extremasBBox;return[(t[0]-e[0])*.5,(t[1]-e[1])*.5]}innerDraw(e){for(let r=0,n=this.data.points.length;r<n;r++){let a=this.data.points[r].data;if(r===0){let[s,o]=a.position;e.moveTo(s,o)}else{let s=this.data.points[r-1].data,[o,l]=s.controlNext.position,[c,u]=a.controlPrevious.position,[d,h]=a.position,f={start:s.position,cp1:s.controlNext.position,cp2:a.controlPrevious.position,end:a.position};$x.derive(f),e.bezierCurveTo(o,l,c,u,d,h)}}let t=this.data.points[0].data,i=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let[r,n]=i.controlNext.position,[a,s]=t.controlPrevious.position,[o,l]=t.position;e.bezierCurveTo(r,n,a,s,o,l)}}updateState(e,t){super.updateState(e,t),this.computeExtremas()}clone(e){let t=new L$(this.uuid,this.data,e);return t.parent=void 0,t}},$x;(e=>{function t(s){let o=s.start,l=s.cp1,c=s.cp2,u=s.end,d=[3*(l[0]-o[0]),3*(l[1]-o[1])],h=[3*(c[0]-l[0]),3*(c[1]-l[1])],f=[3*(u[0]-c[0]),3*(u[1]-c[1])],p={start:d,cp:h,end:f};return s.derivative=p,p.derivative=zM.derive(p),p}e.derive=t;function i(s,o,l,c=!1){let u=s-2*o+l;if(u!==0){let d=-Math.sqrt(Math.abs(o*o-s*l)),h=-s+o,f=-(d+h)/u,p=-(-d+h)/u;return[f,p]}else if(o!==l&&u===0)return[(2*o-l)/(2*(o-l))];return[]}function r(s){let o=s.derivative??e.derive(s),l=o.start,c=o.cp,u=o.end;return[i(l[0],c[0],u[0]),i(l[1],c[1],u[1])]}e.droot=r;function n(s){let[o,l]=e.droot(s),c=[s.start[0],s.end[0]],u=[s.start[1],s.end[1]];for(let d of o)c.push(e.compute(s,Math.min(1,Math.max(0,d)))[0]);for(let d of l)u.push(e.compute(s,Math.min(1,Math.max(0,d)))[1]);return c.sort((d,h)=>d-h),u.sort((d,h)=>d-h),[[c[0],u[0]],[c[c.length-1],u[u.length-1]]]}e.extremas=n;function a(s,o){if(o===0)return[...s.start];if(o===1)return[...s.end];let l=1-o,c=l*l,u=o*o,d=c*l,h=c*o*3,f=l*u*3,p=o*u;return[d*s.start[0]+h*s.cp1[0]+f*s.cp2[0]+p*s.end[0],d*s.start[1]+h*s.cp1[1]+f*s.cp2[1]+p*s.end[1]]}e.compute=a})($x||($x={}));var zM;(e=>{function t(n){let a=n.start,s=n.cp,o=n.end,l=[2*(s[0]-a[0]),2*(s[1]-a[1])],c=[2*(o[0]-s[0]),2*(o[1]-s[1])],u={start:l,end:c};return u.derivative=VM.derive(u),n.derivative=u,u}e.derive=t;function i(n){let a=n.derivative??e.derive(n),s=a.start,o=a.end;return[s[0]!==o[0]?s[0]/(s[0]-o[0]):0,s[1]!==o[1]?s[1]/(s[1]-o[1]):0]}e.droot=i;function r(n,a){if(a===0)return[...n.start];if(a===1)return[...n.end];let s=1-a,o=s*s,l=a*a,c=o,u=s*a*2,d=l;return[c*n.start[0]+u*n.cp[0]+d*n.end[0],c*n.start[1]+u*n.cp[1]+d*n.end[1]]}e.compute=r})(zM||(zM={}));var VM;(e=>{function t(r){let n=r.start,a=r.end,s=[a[0]-n[0],a[1]-n[1]];return r.derivative=s,r.derivative}e.derive=t;function i(r,n){if(n===0)return[...r.start];if(n===1)return[...r.end];let a=r.start,s=r.end;return[a[0]+(s[0]-a[0])*n,a[1]+(s[1]-a[1])*n]}e.compute=i})(VM||(VM={}));var mc=class extends cl{constructor(e,t,i){super(e,t,i),this.uuid=e,this.width=0,this.height=0,this.clipped=!0,this.background=new vy(e+"-background",w1.defaultData,i),this.background.parent=this,this.updateState(t,i)}get fill(){return this.background.fill}get stroke(){return this.background.stroke}get backgroundBlur(){return this.background.backgroundBlur}get layerBlur(){return this.background.layerBlur}get dropShadow(){return this.background.dropShadow}get innerShadow(){return this.background.innerShadow}get cornerRadius(){return this.background.cornerRadius}set cornerRadius(e){this.background.cornerRadius=e}updateLocalMatrix(){var e;super.updateLocalMatrix(),(e=this.background)==null||e.updateLocalMatrix()}updateWorldMatrix(e,t,i){var r;super.updateWorldMatrix(e,t,i),(r=this.background)==null||r.updateWorldMatrix(e,t,i)}draw(e){if(!this.visible)return;e.save();let t=this.width,i=this.height;this.applyTransforms(e),this.background.width=t,this.background.height=i,this.background.draw(e),this.clipped&&e.clipRect(0,0,t,i,...this.cornerRadius),this.innerDrawChildren(e),e.restore()}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateCornerState(e){e.cornerRadius!==void 0&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateCornerState(e),e.fill!==void 0&&this.fill.update(e.fill),e.stroke!==void 0&&this.stroke.update(e.stroke),e.dropShadow!==void 0&&this.dropShadow.update(e.dropShadow),e.innerShadow!==void 0&&this.innerShadow.update(e.innerShadow),e.layerBlur!==void 0&&this.layerBlur.update(e.layerBlur),e.backgroundBlur!==void 0&&this.backgroundBlur.update(e.backgroundBlur),e.clipped!==void 0&&(this.clipped=e.clipped)}requestRender(){super.requestRender(),this.dispatchEvent({type:"render"})}dispose(){this.removeEventListener("render")}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),e.type===0&&(Cr(e.path,["fill"])?this.fill.update(e.props):Cr(e.path,["stroke"])?this.stroke.update(e.props):Cr(e.path,["dropShadow"])?this.dropShadow.update(e.props):Cr(e.path,["innerShadow"])?this.innerShadow.update(e.props):Cr(e.path,["layerBlur"])?this.layerBlur.update(e.props):Cr(e.path,["backgroundBlur"])?this.backgroundBlur.update(e.props):this.resetBBoxNeedsUpdate())}clone(e){let t=new mc(this.uuid,this.data,e);t.parent=void 0;for(let i of this.children)t.add(i.clone(e));return t}},OMe=_h(FH(),1),fS=class extends ia{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this._pathBBox=new DOMRect,this.path="",this.updateState(t,i),this.autoClose=!1,this.computeSVGBBox()}computeSVGBBox(){let e=document.createElementNS("http://www.w3.org/2000/svg","svg"),t=document.createElementNS("http://www.w3.org/2000/svg","path");document.body.appendChild(e),t.setAttribute("d",this.path),e.appendChild(t),this._pathBBox=t.getBBox(),e.remove()}innerDraw(e){e.path(this.path)}intersectsInLocalSpace(e,t){return e>=this._pathBBox.x&&e<=this._pathBBox.x+this._pathBBox.width&&t>=this._pathBBox.y&&t<=this._pathBBox.y+this._pathBBox.height}getCenter(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}getHalfSize(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}updateState(e,t){super.updateState(e,t),e.path!==void 0&&(this.path=e.path,this.computeSVGBBox())}clone(e){let t=new fS(this.uuid,this.data,e);return t.parent=void 0,t}};function RMe(e,t=1,i=1){if(t<=0||i<=0)return e;let r=(0,OMe.parseSVG)(e).map(n=>{let a={...n};return"x"in a&&(a.x=a.x*t),"y"in a&&(a.y=a.y*i),"x1"in a&&(a.x1=a.x1*t),"x2"in a&&(a.x2=a.x2*t),"y1"in a&&(a.y1=a.y1*i),"y2"in a&&(a.y2=a.y2*i),"rx"in a&&(a.rx=a.rx*t),"ry"in a&&(a.ry=a.ry*i),a});return kMe(r)}function kMe(e){let t=["rx","ry","xAxisRotation","largeArc","sweep","x1","y1","x2","y2","x","y"],i;return e.map(r=>{let n=[];t.forEach(s=>{if(s in r){let o=r[s]*1;n.length&&o>=0&&n.push(","),n.push(o)}});let a=(i===r.code?n[0]<0?"":",":r.code)+n.join("");return i=r.code,a}).join("")}function LMe(e,t,i){switch(t.type){case"ellipse2d":return new hD(e,t,i);case"rectangle2d":return new vy(e,t,i);case"text2d":return new fD(e,t,i);case"vector2d":return new L$(e,t,i);case"path2d":return new fS(e,t,i);case"frame2d":return new mc(e,t,i);case"group2d":default:return new ch(e,t,i)}}var B$=class{constructor(e,t,i){this.uuid=e,this.data=t,this.group=new ch(B$.GROUP_ID,{...Bx.defaultData},i),this.createChildrenObjects(t.objects,this.group,i)}createObject(e,t,i,r,n,a){let s=LMe(e,t,a);s&&(r.add(s),r.children.splice(n,0,r.children.pop()),s.updateWorldMatrix(),i.length>0&&(s instanceof ch||s instanceof mc)&&this.createChildrenObjects(i,s,a))}createChildrenObjects(e,t,i){let r=0;for(let n of e)this.createObject(n.id,n.data,n.children,t,r,i),r+=1}draw(e){this.group.draw(e)}updateEntityByOp(e,t,i,r){let n=this.find(e);if(n)try{n.updateByOp(t,i,{shared:r})}catch(a){console.error(a)}}updateTreeByOp(e,t){if(e.path.length===0&&e.type===7){let i=e.parent===null?this.group:this.find(e.parent);i!==void 0&&i instanceof cl&&(this.createObject(e.id,e.data,e.children,i,e.localIndex,t),i.requestRender())}else if(e.path.length===0&&e.type===8){let i=this.find(e.id);if(i!==void 0&&i.parent!==void 0&&i.parent instanceof cl){let r=i.parent;i.resetBBoxNeedsUpdate(),r==null||r.remove(i),r==null||r.requestRender()}}else if(e.path.length===0&&e.type===9){let i=this.find(e.id);if(i!==void 0){let r=i.parent,n=e.parent===null?this:this.find(e.parent);if(n instanceof cl||n===this){n.add(i);let a=e.localIndex;n.children.splice(a,0,n.children.pop()),i.updateWorldMatrix(!0,!1,!0),r==null||r.requestRender(),i.requestRender()}i.resetBBoxNeedsUpdate()}}}add(e){this.group.add(e)}remove(e){this.group.remove(e)}traverse(e){this.group.traverse(t=>{t!==this.group&&e(t)})}intersectsChildren(e,t,i,r=!1,n=[]){return this.group.intersectsChildren(e,t,i,r,n,!0)}intersectsChildrenReverse(e,t,i,r=!1,n=[]){return this.group.intersectsChildrenReverse(e,t,i,r,n,!0)}find(e){return this.group.find(e)}get children(){return this.group.children}project(e,t){return this.group.project(e,t)}getWithSortKey(e){let t=this.find(e);if(t===void 0)return;let i=[],r=t;for(;r!==this.group;){let n=r;r=r.parent;let a=r.children.indexOf(n);i.splice(0,0,a)}return{entity:t,sortKey:i}}getAllSorted(e){let t=[];for(let i of e){let r=this.getWithSortKey(i.id);r!==void 0&&t.push(r)}return t.sort((i,r)=>vW(i.sortKey,r.sortKey)),t.map(i=>i.entity)}},pD=B$;pD.GROUP_ID="scene2d";function N$({constraints:e,newParentWidth:t,newParentHeight:i,initialParentWidth:r,initialParentHeight:n,objectInitialWidth:a,objectInitialHeight:s,objectInitialPosition:o}){let{horizontalConstraint:l,verticalConstraint:c}=e,u=t-r,d=i-n,h=a,f=s,p=o[0],m=o[1];if(l!==0){if(l===1)p+=u;else if(l===3)p+=u/2;else if(l===2)h=Math.max(1,h+u);else if(l===4){let v=t/r;h*=v,p*=v}}if(c!==0){if(c===1)m+=d;else if(c===3)m+=d/2;else if(c===2)f=Math.max(1,f+d);else if(c===4){let v=i/n;f*=v,m*=v}}return{width:h,height:f,position:[p,m]}}_h(FH(),1);var BMe=`
	varying vec2 vUv;
	void main() {
		vUv = uv;
		gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
	}`,NMe=`
	uniform sampler2D tDiffuse;
	varying vec2 vUv;
	void main() {
		vec4 texel = texture2D( tDiffuse, vUv );
		gl_FragColor = texel;
	}`,FMe=new G_(-1,1,1,-1,0,1),zMe=class extends Kt{constructor(){super(),this.setAttribute("position",new It([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new It([0,2,0,0,2,0],2))}},VMe=new zMe,UMe=class{constructor(e){this._mesh=new Yr(VMe,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,FMe)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}},F$=new er({defines:{},uniforms:{tDiffuse:new ot(null)},vertexShader:BMe,fragmentShader:NMe}),HMe=new UMe(F$),u4=null,d4=null,jMe=()=>(u4===null&&(u4=document.createElement("canvas")),u4),WMe=e=>(d4===null&&(d4=new k$(e)),d4),GMe=Xi.identity(),z$=class{constructor(e,t,i,r){this.uuid=e,this.width=t,this.height=i,this.context=r,this.enabled=!0,this.isScreenSpace=!1,this.dpr=window.devicePixelRatio,this.isFrameDirty=!1,this.onRenderRequestedDownstream=()=>{this.isFrameDirty=!0,this.context.shared.requestRender()},this._innerApplySize=()=>{let n=this.width,a=this.height,s=this.dpr;this.renderer.dpr=this.isScreenSpace?s:Math.floor(2048/Math.max(n,a)),this.renderer.setSize(n,a)},this.onFrameOverrideObjectEvent=n=>{var a,s;if(((a=n.target)==null?void 0:a.uuid)!==void 0){let o=(s=this.frameRoot)==null?void 0:s.find(n.target.uuid);o&&o.dispatchEvent({...n,target:o})}},this.scene2d=new pD(kt.generateUUID(),lM.defaultData,{dpr:window.devicePixelRatio,shared:r.shared}),this.canvas=jMe(),this.renderer=WMe(this.canvas),this.promise=this.init(),this.renderTarget=new ir(1,1,{type:Mu,stencilBuffer:!1,depthBuffer:!1}),r.shared.addUIBuffer(this.uuid,this.renderTarget),this.textureHolder=r.shared.uiBuffer(this.uuid)}get canvasTexture(){return this._canvasTexture||(this._canvasTexture=new Sfe(this.canvas)),this._canvasTexture}async init(){this.renderer instanceof k$&&(this.renderer.wasmURL=o$.skiaWasmUrl),await this.renderer.init()}render(e){var t,i;if(this.isFrameDirty){this.isFrameDirty=!1,this._innerApplySize(),this.renderer.clear(),(t=this.frameOverride)==null||t.draw(this.renderer),this.renderer.render(),F$.uniforms.tDiffuse.value=this.canvasTexture,this.canvasTexture.needsUpdate=!0;let r=e.getRenderTarget();e.setRenderTarget(this.renderTarget),e.clear(),HMe.render(e),e.setRenderTarget(r),(i=this.textureHolder)==null||i.setNeedsUpdate(!0)}}updateEntity2DByOp(e,t,i,r){this.scene2d.updateEntityByOp(e,t,i,r),this.applySize()}updateTreeByOp(e,t){this.scene2d.updateTreeByOp(e,t),this.applySize()}applyOverrides(e){if(this.frameOverride&&this.frameRoot){this.frameOverride.position=[0,0],this.frameOverride.rotation=0;let t=(e==null?void 0:e.width)??this.width,i=(e==null?void 0:e.height)??this.height;this.frameOverride.width=t,this.frameOverride.height=i,this.frameOverride.localMatrix=GMe,this.isScreenSpace&&(this.frameOverride.fill.color=br.from0to1([0,0,0,0])),this.frameOverride.data={...this.frameOverride.data,width:t,height:i},V$({objectOverride:this.frameOverride,objectRoot:this.frameRoot,newParentWidth:this.frameOverride.width,newParentHeight:this.frameOverride.height,initialParentWidth:this.frameRoot.width,initialParentHeight:this.frameRoot.height}),this.frameOverride.updateWorldMatrix(!0,!1,!0)}}applySize(e,t=window.devicePixelRatio){var o,l;let i=Math.max(1,(e==null?void 0:e.width)??this.width),r=Math.max(1,(e==null?void 0:e.height)??this.height);this.dpr=t,this.width=i,this.height=r,this._innerApplySize();let n=1,a=512,s=512;(i*t<a||r*t<s)&&(n=Math.max(a/(i*t),s/(r*t))),this.renderTarget.setSize(i*t*n,r*t*n),(o=this._canvasTexture)==null||o.dispose(),this._canvasTexture=void 0,this.applyOverrides(e),(l=this.frameOverride)==null||l.requestRender()}applyFrame(e){var i,r;let t=this.context.scene.find2D(e);if(!(!t||!(t instanceof mc)))return this.disposeFrameOverride(),this.frameRoot=t,this.frameOverride=t.clone({dpr:this.renderer.dpr,shared:this.context.shared}),this.scene2d.add(this.frameOverride),this.applySize(),(i=this.frame)==null||i.addEventListener("render",this.onRenderRequestedDownstream),this.frameOverride.traverse(n=>{n.addEventListener("beginState",this.onFrameOverrideObjectEvent)}),this.frameOverride.traverse(n=>{n.addEventListener("completeState",this.onFrameOverrideObjectEvent)}),(r=this.frame)==null||r.requestRender(),t}get frame(){return this.frameOverride}get frameId(){var e;return(e=this.frame)==null?void 0:e.uuid}find(e){return this.scene2d.find(e)}get texture(){var e;return(e=this.textureHolder)==null?void 0:e.getTexture(1001)}disposeFrameOverride(){var e,t,i;(e=this.frameOverride)==null||e.removeEventListener("render",this.onRenderRequestedDownstream),(t=this.frameOverride)==null||t.traverse(r=>{r.removeEventListener("beginStateChange",this.onFrameOverrideObjectEvent)}),(i=this.frameOverride)==null||i.traverse(r=>{r.removeEventListener("completeState",this.onFrameOverrideObjectEvent)}),this.frameOverride&&this.scene2d.remove(this.frameOverride)}};function V$({objectOverride:e,objectRoot:t,newParentWidth:i,newParentHeight:r,initialParentWidth:n,initialParentHeight:a}){if(e instanceof mc&&t instanceof mc||e instanceof ch&&t instanceof ch)for(let s=0,o=e.children.length;s<o;s++){let l=e.children[s],c=t.children[s];l&&c&&l.uuid===c.uuid&&ZMe({objectOverride:l,objectRoot:c,newParentWidth:i,newParentHeight:r,initialParentWidth:n,initialParentHeight:a})}}function $Me(e){if(UM(e))return[e.width,e.height];if(e instanceof fS){let[t,i]=e.getHalfSize();return[t*2,i*2]}else if(e instanceof ch){let[t,i]=e.recursiveBBox.getHalfSize();return[t*2,i*2]}return[0,0]}function ZMe({objectOverride:e,objectRoot:t,newParentWidth:i,newParentHeight:r,initialParentWidth:n,initialParentHeight:a}){let[s,o]=$Me(t),{width:l,height:c,position:u}=N$({constraints:e.data,newParentWidth:i,newParentHeight:r,initialParentWidth:n,initialParentHeight:a,objectInitialWidth:s,objectInitialHeight:o,objectInitialPosition:t.position});if(e.position=u,e.data={...e.data,position:u},e.states)for(let d in e.states)qMe({stateId:d,objectOverride:e,objectRoot:t,newParentWidth:i,newParentHeight:r,initialParentWidth:n,initialParentHeight:a});if(UM(e)||e instanceof ch)UM(e)&&(e.width=l,e.height=c,e.data={...e.data,width:l,height:c}),V$({objectOverride:e,objectRoot:t,newParentWidth:l,newParentHeight:c,initialParentWidth:s,initialParentHeight:o});else if(e instanceof fS){let d=t,h=s!==0?l/s:1,f=o!==0?c/o:1;e.path=RMe(d.path,h,f),e.data={...e.data,path:e.path}}}function qMe({stateId:e,objectOverride:t,objectRoot:i,newParentWidth:r,newParentHeight:n,initialParentWidth:a,initialParentHeight:s}){var c,u;let o=(c=t.states)==null?void 0:c[e],l=(u=i.states)==null?void 0:u[e];if(o&&l){let{width:d,height:h,position:f}=N$({constraints:t.data,newParentWidth:r,newParentHeight:n,initialParentWidth:a,initialParentHeight:s,objectInitialWidth:Bf.isResizeable(l)?l.width:0,objectInitialHeight:Bf.isResizeable(l)?l.height:0,objectInitialPosition:l.position});Object.assign(t.states[e],{position:f}),Bf.isResizeable(o)&&Object.assign(t.states[e],{width:d,height:h})}}function UM(e){return e instanceof vy||e instanceof mc||e instanceof hD||e instanceof fD}var ta=class extends HP(hc){constructor(e,t,i){super(),this.data=t,this.bgColor=new Ea(1,1,1,1),this.fog=null,this.backupFog=new cj(16777215,.1,2e3),this.fogUseBGColor=!1,this.isActive=!1,this.aoColor=new ii,this.penumbraSizeArrayCache=null,this.super_Entity(e,t),this.personalCamera=new ja(Xv,{...g1.defaultData,...t.camera,name:"Personal Camera"}),this.personalCamera.objectHelper.visible=!1,this.add(this.personalCamera),this.activeCamera=this.personalCamera,this.ambientLight=new lpe(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.ambientLight.removeFromParent(),this.add(this.ambientLight),t.uiScene?this.uiScene=new pD((Array.isArray(e)?e[0]:e)+"-ui",t.uiScene,{dpr:window.devicePixelRatio,shared:i.shared}):t.uiFrame&&this.createUICanvas(t.uiFrame,i)}get scene(){return this.parent}get postprocessing(){return this.data.postprocessing}get frameId(){return this.data.uiFrame}get frame(){var e;return(e=this.uiCanvas)==null?void 0:e.frame}createUICanvas(e,t){this.uiCanvas=new z$(this.uuid+"-uiscreen",window.innerWidth,window.innerHeight,t),this.uiCanvas.isScreenSpace=!0,this.uiCanvas.promise.then(()=>{var i,r;(i=this.uiCanvas)==null||i.applyFrame(e),(r=this.uiCanvas)==null||r.applySize()})}updateVisible(){}setBackgroundColor(e){this.bgColor=e,this.fogUseBGColor===!0&&(this.backupFog.color=e)}entityChildrenCount(){return this.uiScene?this.uiScene.children.length:super.entityChildrenCount()}updateAmbientLight(e,t){e.color!==void 0&&(this.ambientLight.color=us(e.color,t)),e.intensity!==void 0&&(this.ambientLight.intensity=e.intensity),e.enabled!==void 0&&(e.enabled?this.add(this.ambientLight):this.remove(this.ambientLight))}onDeactive(){this.isActive=!1}onActive(e){this.isActive=!0,e.fog=this.fog,this.traverseEntity(t=>{t instanceof $f&&t.recomputeBoolean()}),this.updateShadow(this.data.shadow)}forceMaterialsUpdate(){this.traverseEntity(e=>{if(e instanceof e0)if(Array.isArray(e.material))for(let t of e.material)t.needsUpdate=!0;else e.material.needsUpdate=!0,e.material.dispose()})}updateShadow(e){e.softShadowQuality!==void 0&&this.isActive&&dMe(e.softShadowQuality)&&this.forceMaterialsUpdate()}updateFog(e,t){if(e.enabled?this.fog=this.backupFog:this.fog=null,this.isActive){let i=this.scene;i.fog=this.fog}this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=us(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}updateAo(e,t){e.aoColor!==void 0&&(this.aoColor=us(e.aoColor,t))}updateByOp(e,t,i,r){let n=this.data.uiFrame;super.updateByOp(e,t,i,r);let a=t;Cr(e.path,["fog"])?this.updateFog(a.fog,i.shared):Cr(e.path,["ao"])?this.updateAo(a.ao,i.shared):Cr(e.path,["ambient"])?this.updateAmbientLight(a.ambient,i.shared):Cr(e.path,["shadow"])?this.updateShadow(a.shadow):e.type===0&&e.path.length===0&&(e.props.uiFrame!==void 0||n!==a.uiFrame)&&this.updateUIFrame(e.props.uiFrame,i)}updateUIFrame(e,t){e?(this.uiCanvas||this.createUICanvas(e,t),this.uiCanvas.enabled=!0,this.uiCanvas.applyFrame(e)):this.uiCanvas&&(this.uiCanvas.enabled=!1)}updateState(e,t){this.updateState_Entity(e,t),e.backgroundColor!==void 0&&this.setBackgroundColor(us(e.backgroundColor,t.shared)),e.fog!==void 0&&this.updateFog(e.fog,t.shared),e.ambient!==void 0&&this.updateAmbientLight(e.ambient,t.shared),e.ao!==void 0&&this.updateAo(e.ao,t.shared),e.shadow!==void 0&&this.updateShadow(e.shadow)}createFrame(e,t){}raycast(e,t){super.raycast(e,t)}switchActiveCamera(e){e&&e.isDescendantOf(this)&&(this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1)}get playCamera(){var e;return((e=this.scene)==null?void 0:e.find(this.data.publish.playCamera))??this.personalCamera}switchToPlayCamera(){this.switchActiveCamera(this.playCamera)}get penumbraSizeArray(){return this.penumbraSizeArrayCache===null&&this.updatePenumbraSizeArray(),this.penumbraSizeArrayCache}updatePenumbraSizeArray(){this.penumbraSizeArrayCache=new Array(5).fill(.5);let e=0,t=0;this.traverseEntity(i=>{if(!i.visible)return!0;i instanceof D$&&i.visible&&e<3&&(this.penumbraSizeArrayCache[e]=i.data.penumbraSize??.5,e+=1),i instanceof I$&&i.visible&&e<2&&(this.penumbraSizeArrayCache[3+t]=i.data.penumbraSize??.5,t+=1)})}raycastWithClones(e){let t=[],i=r=>{for(let n of r.children){let a=n.cloner;ji.is(n)&&(n.visible||a!=null&&a.object.data.visible)&&((ll(n)||IM(n)&&this.scene.enableHelpers&&n.objectHelper.visible)&&(e.intersectObject(n,!1,t),HM(n,e,t,!0)),i(n))}};return i(this),t}updateEntity2DByOp(e,t,i,r){var n;(n=this.uiCanvas)==null||n.updateEntity2DByOp(e,t,i,r)}},YMe=class extends cD(hpe,M$){constructor(e,t,i){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.fov=90,r.aspect=1,r.near=100,r.far=2500;let n=new H(-r.far+this.position.x,-r.far+this.position.y,-r.far+this.position.z),a=new H(r.far+this.position.x,r.far+this.position.y,r.far+this.position.z),s=new gn(n,a),o=new ox(s,new ii(16755200));o.visible=!1,this.gizmos.shadowmap=o,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let e in this.gizmos){let t=this.gizmos[e];if(t instanceof ox){let i=this.shadow.camera,r=new H(-i.far+this.position.x,-i.far+this.position.y,-i.far+this.position.z),n=new H(i.far+this.position.x,i.far+this.position.y,i.far+this.position.z);t.box.set(r,n),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},KMe=class extends Ua{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(e,t){let i=this.geometry.getAttribute("position");i!==void 0?KP(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,t):super.updateEntityBoxSize(e,t)}},mD=class extends Ua{constructor(e,t,i){super(e,t,i),this._shapeId=null,this._context=i}updateState(e,t){super.updateState(e,t),this.updateShape(),this.refreshAttachedCloners(t)}updateShape(){var r;let e={...this.data.geometry.extrusion.shape};for(let n in e)typeof e[n]=="string"&&(e[n]=this._context.shared.getVariable(e[n],[this.uuid,"geometry","extrusion","shape",n]));let t;if(e.type==="Custom"){let n=e.shapeId;if(n!==this._shapeId&&this.detachShape(),n){this._shapeId=n;let a=this._context.scene.find(n);a!=null&&a.data&&(a.attachedPaths.add(this),t=(r=a.geometry.userData)==null?void 0:r.shape),t||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let n;switch(e.type){case"Rectangle":n=YP;break;case"Ellipse":n=qP;break;case"Polygon":n=SG;break;case"Star":n=CG;break;default:throw new Error(`Unknown shape type: ${e.type}`)}t=n.create({parameters:e}).userData.shape}let i=this.geometry;t&&i.inputs&&(i.inputs.shapeData=t,i.build())}detachShape(){var e;this._shapeId!==null&&((e=this._context.scene.find(this._shapeId))==null||e.attachedPaths.delete(this))}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.updateShape(),this.refreshAttachedPaths(e)}updateTransformState(e,t){return super.updateTransformState(e,t)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.updateShape()}updateEntityBoxSize(e,t){let i=this.geometry.getAttribute("position");i!==void 0?KP(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,t):super.updateEntityBoxSize(e,t)}},vD=class extends lD{constructor(e,t,i){super(e,t,i),this.data=t}},qm=class extends t0(yu,py){constructor(e,t,i){super(),t.type==="Instance"&&typeof e=="string"&&(t=this.transformAssignData(t,i)),this.super_Entity(e,t),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(e,t){let i=Ox.getComponentData({scene:t.scene.data,shared:t.shared.data},e.component);if(i){let r,n;for(let a of Nd.rootOverrideProps)e[a]===void 0?(r===void 0&&(r={...e}),r[a]=i.data[a]):(n===void 0&&(n={}),n[a]=e[a],r===void 0&&(r={...e}),r[a]=qd.apply(i.data[a],e[a]));return this.overrideData=n,r}else return{...sa.defaultData,...e,...fc(sa.defaultData,Nd.rootOverrideProps)}}updateByOp(e,t,i,r){let n;if(this.isInstanceRoot&&!r){if(t=this.transformAssignData(t,i),e.type===0&&e.path.length===0&&this.component)for(let a of Nd.rootOverrideProps)a in e.props&&e.props[a]===void 0&&(n===void 0&&(n={...e,props:{...e.props}}),n.props[a]=this.component.data[a]);else if(e.type===0&&e.path.length>0&&Nd.rootOverrideProps.includes(e.path[0])){let a=e.path[0];n===void 0&&(n={...e,path:[],props:{[a]:t[a]}})}}super.updateByOp(n??e,t,i,r)}updateState(e,t){this.updateState_Entity(e,t)}expandInstanceChildren(e){let t=this.data;if(this.component===void 0){let i=e.scene.find(t.component)??null,r=!1;if(i!==this.oldComponent){if(this.oldComponent){let n=0;for(let a of this.children)if(ji.is(a))e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(a),gD(a),n+=1;else break;this.children.splice(0,n)}r=!0}if(i){let n={};U$(e,[this.uuid],t.overrides,this,i,i,0,r,n);for(let a of this.children)if(ji.is(a)){let s=a.data;s.type==="Empty"&&s.animations&&a.traverseEntity(o=>{let l=o.dataPatched;if(o instanceof Ua&&l.bones&&l.boneInverses){let c=o.dataPatched;if(c.bones&&c.boneInverses){let u=c.bones.map(f=>e.scene.find(n[f])),d=c.boneInverses.map(f=>new pt().fromArray(f)),h=new nP(u,d);o.bind(h,o.bindMatrix)}}else o.matrixAutoUpdate=!0})}}this.oldComponent=this.component}}};function gD(e){if(e.component){let t=e.component.instances.indexOf(e);t>=0&&e.component.instances.splice(t,1);for(let i of e.children)ji.is(i)&&gD(i)}}function LB(e,t,i,r){return e.component===t&&PP(e.identity,r)?e.overrideData===i?2:1:0}function U$(e,t,i,r,n,a,s,o,l){if(s>50)return!1;if(r.component!==n){if(r.component){let u=r.component.instances.indexOf(r);u>=0&&r.component.instances.splice(u,1)}n.instances.find(u=>u===r)||n.instances.push(r),r.component=n}n instanceof qm&&n.isInstanceRoot&&n.expandInstanceChildren(e);let c=0;for(let u of n.children)if(ji.is(u)){let d=[...t,...typeof u.identity=="string"?[u.identity]:u.identity],h=Tx.resolve(i,d,1);h!=null&&!(h instanceof Tn)&&(Object.setPrototypeOf(h,Tn.prototype),console.error("wrong prototype"));let f=null,p;if(!o){let m=r.children[c];if(f=ji.is(m)?m:null,f!==null){let v=LB(f,u,h,d);p=v>=1?f.stateSelection:void 0,v!==2&&(f=null)}if(f===null&&(f=e.scene.findInstance(d)??null,f!==null)){let v=LB(f,u,h,d);if(p=v>=1?f.stateSelection:void 0,v!==2)f=null;else{let y=f.parent.children.indexOf(f);f.parent.children.splice(y,1),r.children.splice(c,0,f),f.parent===r?y<=c&&console.error("not possible"):(f.parent=r,f.matrixWorldNeedsUpdate=!0,f.resetBBoxNeedsUpdate(),f.updateVisible(),e.pendingDeletes.delete(f))}}}if(f===null){let m=h?qd.apply(u.data,h):u.data;Wf.is(m.type)&&(m={...m,type:"Empty"}),f=zd.createEntity(d,m,e),f.overrideData=h,r.add(f),r.children.splice(r.children.length-1,1),r.children.splice(c,0,f),f.updateState(f.data,e),p&&f.changeSelectedState(p,e),e.scene.registerInstanceAndSetUuid(f)}if(f.isBone){let m=f.identity[f.identity.length-1];l[m]=f.uuid}c+=1,U$(e,t,i,f,u,a,s+1,o,l)}if(!o){let u=c;for(;;){let d=r.children[c];if(ji.is(d))e.pendingDeletes.add(d);else break;c+=1}r.children.splice(u,c-u)}return!0}var XMe=class extends t0(uj,py){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update(),this.matrixAutoUpdate=!0}updateState(e,t){this.updateState_Entity(e,t)}},Na=class extends Ua{constructor(e,t,i){super(e,t,i),this.onBeforeRender=r=>{this.uiCanvas.render(r)},this.uiCanvas=new z$(e+"-canvas",t.geometry.width,t.geometry.height,i),this.uiCanvas.promise.then(()=>{this.applyFrame(this.dataPatched.geometry.frame,i.shared)})}updateByPatchedOpGeometry(e,t,i){super.updateByPatchedOpGeometry(e,t,i),e.type===0&&(e.props.frame!==void 0&&this.applyFrame(e.props.frame,i.shared),(e.props.width!==void 0||e.props.height!==void 0)&&this.applySize(e.props,i.shared))}applySize(e,t){let i=(e==null?void 0:e.width)??this.dataPatched.geometry.width,r=(e==null?void 0:e.height)??this.dataPatched.geometry.height;this.uiCanvas.applySize({width:i,height:r}),this.applyGeometryParametersFromFrame(t)}applyFrame(e,t){this.uiCanvas.applyFrame(e),this.applyGeometryParametersFromFrame(t),this.applyMaterialParametersFromFrame({shared:t})}applyGeometryParametersFromFrame(e){var i;let t=this.frame;t&&(Object.assign(this.data,{geometry:Object.assign(this.data.geometry,{cornerRadius:t.cornerRadius,cornerType:0})}),Object.assign(this.dataPatched,{geometry:Object.assign(this.dataPatched.geometry,{cornerRadius:t.cornerRadius,cornerType:0})}),(i=this.localGeometry)==null||i.dispose(),this.localGeometry=E1(this.dataPatched.geometry,e,this.data.flatShading,this))}applyMaterialParametersFromFrame(e){let t=this.frame;if(t){let i=t.data.backgroundBlur;Object.assign(this.data.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.data.material.layers[1].data,{roughness:i.radius,alpha:i.enabled?1:0}),Object.assign(this.dataPatched.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.dataPatched.material.layers[1].data,{roughness:i.radius,alpha:i.enabled?1:0}),this.material.reset(this.dataPatched.material,e,!0)}}updateEntity2DByOp(e,t,i,r){this.uiCanvas.updateEntity2DByOp(e,t,i,r),e===this.frameId&&t.type===0&&(t.props.cornerRadius!==void 0?this.applyGeometryParametersFromFrame(r):Cr(t.path,["backgroundBlur"])&&this.applyMaterialParametersFromFrame({shared:r}))}get frame(){return this.uiCanvas.frame}get frameId(){var e;return(e=this.frame)==null?void 0:e.uuid}removeInteractionGeometry(e){super.removeInteractionGeometry(e),this.applySize({},e)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.applySize({width:e.width,height:e.height},t)}},QMe=class{constructor(e,t,i){this.variables=[],this.currentTextureIndex=0;let r=En,n=new hc,a=new ap;a.position.z=1;let s={passThruTexture:{value:null}},o=u(h(),s),l=new Yr(new Pu(2,2),o);n.add(l),this.setDataType=function(f){return r=f,this},this.addVariable=function(f,p,m){let v=this.createShaderMaterial(p),y={name:f,initialValueTexture:m,material:v,dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:or,magFilter:or};return this.variables.push(y),y},this.setVariableDependencies=function(f,p){f.dependencies=p},this.init=function(){if(i.capabilities.isWebGL2===!1&&i.extensions.has("OES_texture_float")===!1)return"No OES_texture_float support for float textures.";if(i.capabilities.maxVertexTextures===0)return"No support for vertex shader textures.";for(let f=0;f<this.variables.length;f++){let p=this.variables[f];p.renderTargets[0]=this.createRenderTarget(e,t,p.wrapS,p.wrapT,p.minFilter,p.magFilter),p.renderTargets[1]=this.createRenderTarget(e,t,p.wrapS,p.wrapT,p.minFilter,p.magFilter),this.renderTexture(p.initialValueTexture,p.renderTargets[0]),this.renderTexture(p.initialValueTexture,p.renderTargets[1]);let m=p.material,v=m.uniforms;if(p.dependencies!==null)for(let y=0;y<p.dependencies.length;y++){let x=p.dependencies[y];if(x.name!==p.name){let b=!1;for(let w=0;w<this.variables.length;w++)if(x.name===this.variables[w].name){b=!0;break}if(!b)return"Variable dependency not found. Variable="+p.name+", dependency="+x.name}v[x.name]={value:null},m.fragmentShader=`
uniform sampler2D `+x.name+`;
`+m.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){let f=this.currentTextureIndex,p=this.currentTextureIndex===0?1:0;for(let m=0,v=this.variables.length;m<v;m++){let y=this.variables[m];if(y.dependencies!==null){let x=y.material.uniforms;for(let b=0,w=y.dependencies.length;b<w;b++){let S=y.dependencies[b];x[S.name].value=S.renderTargets[f].texture}}this.doRenderTarget(y.material,y.renderTargets[p])}this.currentTextureIndex=p},this.getCurrentRenderTarget=function(f){return f.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(f){return f.renderTargets[this.currentTextureIndex===0?1:0]},this.dispose=function(){l.geometry.dispose(),l.material.dispose();let f=this.variables;for(let p=0;p<f.length;p++){let m=f[p];m.initialValueTexture&&m.initialValueTexture.dispose();let v=m.renderTargets;for(let y=0;y<v.length;y++)v[y].dispose()}};function c(f){f.defines.resolution="vec2( "+e.toFixed(1)+", "+t.toFixed(1)+" )"}this.addResolutionDefine=c;function u(f,p){p=p||{};let m=new er({uniforms:p,vertexShader:d(),fragmentShader:f});return c(m),m}this.createShaderMaterial=u,this.createRenderTarget=function(f,p,m,v,y,x){return f=f||e,p=p||t,m=m||Hr,v=v||Hr,y=y||or,x=x||or,new ir(f,p,{wrapS:m,wrapT:v,minFilter:y,magFilter:x,format:ra,type:r,depthBuffer:!1})},this.createTexture=function(){let f=new Float32Array(e*t*4),p=new So(f,e,t,ra,En);return p.needsUpdate=!0,p},this.renderTexture=function(f,p){s.passThruTexture.value=f,this.doRenderTarget(o,p),s.passThruTexture.value=null},this.doRenderTarget=function(f,p){let m=i.getRenderTarget(),v=i.xr.enabled,y=i.shadowMap.autoUpdate,x=i.outputEncoding,b=i.toneMapping;i.xr.enabled=!1,i.shadowMap.autoUpdate=!1,i.outputEncoding=Sl,i.toneMapping=dc,l.material=f,i.setRenderTarget(p),i.render(n,a),l.material=o,i.xr.enabled=v,i.shadowMap.autoUpdate=y,i.outputEncoding=x,i.toneMapping=b,i.setRenderTarget(m)};function d(){return`void main()	{

	gl_Position = vec4( position, 1.0 );

}
`}function h(){return`uniform sampler2D passThruTexture;

void main() {

	vec2 uv = gl_FragCoord.xy / resolution.xy;

	gl_FragColor = texture2D( passThruTexture, uv );

}
`}}},pa=new ba,fw=new H,JMe=class{constructor(e){let t=e.geometry;if(!t.isBufferGeometry||t.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(console.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(e){return this.weightAttribute=e?this.geometry.getAttribute(e):null,this}build(){let e=this.positionAttribute,t=this.weightAttribute,i=new Float32Array(e.count/3);for(let n=0;n<e.count;n+=3){let a=1;t&&(a=t.getX(n)+t.getX(n+1)+t.getX(n+2)),pa.a.fromBufferAttribute(e,n),pa.b.fromBufferAttribute(e,n+1),pa.c.fromBufferAttribute(e,n+2),a*=pa.getArea(),i[n/3]=a}this.distribution=new Float32Array(e.count/3);let r=0;for(let n=0;n<i.length;n++)r+=i[n],this.distribution[n]=r;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t,i){let r=this.distribution[this.distribution.length-1],n=this.binarySearch(this.randomFunction()*r);return this.sampleFace(n,e,t,i)}binarySearch(e){let t=this.distribution,i=0,r=t.length-1,n=-1;for(;i<=r;){let a=Math.ceil((i+r)/2);if(a===0||t[a-1]<=e&&t[a]>e){n=a;break}else e<t[a]?r=a-1:i=a+1}return n}sampleFace(e,t,i,r){let n=this.randomFunction(),a=this.randomFunction();return n+a>1&&(n=1-n,a=1-a),pa.a.fromBufferAttribute(this.positionAttribute,e*3),pa.b.fromBufferAttribute(this.positionAttribute,e*3+1),pa.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(pa.a,n).addScaledVector(pa.b,a).addScaledVector(pa.c,1-(n+a)),i!==void 0&&pa.getNormal(i),r!==void 0&&this.colorAttribute!==void 0&&(pa.a.fromBufferAttribute(this.colorAttribute,e*3),pa.b.fromBufferAttribute(this.colorAttribute,e*3+1),pa.c.fromBufferAttribute(this.colorAttribute,e*3+2),fw.set(0,0,0).addScaledVector(pa.a,n).addScaledVector(pa.b,a).addScaledVector(pa.c,1-(n+a)),r.r=fw.x,r.g=fw.y,r.b=fw.z),this}};function eTe(e){let t=new Float32Array(e*e*2);for(let i=0;i<e;i++)for(let r=0;r<e;r++){let n=i*e+r;t[n*2+0]=i/(e-1),t[n*2+1]=r/(e-1)}return t}function tTe(e){let t=Math.ceil(Math.sqrt(e));return Math.max(t,1)}function iTe(e,t){let i=new Yr(e.geometry,e.material),r=[],n=[],a=new H,s=new H;i.geometry.index!==null&&(i.geometry=i.geometry.toNonIndexed());let o=new JMe(i).build();for(let u=0;u<t;u++)o.sample(a,s),r.push(a.x,a.y,a.z),n.push(s.x,s.y,s.z);let l=new Float32Array(r),c=new Float32Array(n);return{positions:l,normals:c}}function BB(e,t){let i=e,r=new Float32Array(4*t*t);for(let a=0;a<t*t;a++)r[4*a]=i[3*a],r[4*a+1]=i[3*a+1],r[4*a+2]=i[3*a+2],r[4*a+3]=0;let n=new So(r,t,t,ra,En);return n.needsUpdate=!0,n}function rTe({size:e}){let t=new Float32Array(4*e*e);for(let r=0;r<e*e;r++)t[4*r]=r,t[4*r+1]=0,t[4*r+2]=0,t[4*r+3]=0;let i=new So(t,e,e,ra,En);return i.needsUpdate=!0,i}function nTe(e){let t=new Float32Array(4*e*e);for(let r=0;r<e*e;r++)t[4*r]=0,t[4*r+1]=0,t[4*r+2]=0,t[4*r+3]=0;let i=new So(t,e,e,ra,En);return i.needsUpdate=!0,i}var aTe=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU
uniform sampler2D uOriginalPosition;
uniform float uTime;
uniform float uSpeed;     // update speed of the particles
uniform vec3 uWorldOffset;    
uniform vec4 uWorldQuaternion;
uniform float uMaxLifeTime;
uniform vec3 uEmitterSize;
uniform float uFPSRatio;     // 1  for 60 FPS

float random (vec2 st) {
    return fract(sin(dot(st.xy,
        vec2(12.9898,78.233)))*
        43758.5453123);
}
vec3 applyQuaternionToVector( vec4 q, vec3 v ){
    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
}

vec3 applyForce(vec3 force, float mass) {
    vec3 acceleration = force / mass;
    
    return acceleration;
  }
  

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;
    float currentLife = texture2D( uCurrentPosition, vUv ).w;   // from 1 to 0
    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).r;        // 1. = spawning, 0. = not spawning
    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;          // 1. = active, 0. = not active
    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;         // timeStart in seconds when the particle was emitted
    vec3 originalPosition = ((texture2D( uOriginalPosition, vUv ).xyz) * uEmitterSize);
    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;
    float collisionFlag = texture2D( uCurrentVelocity, vUv ).w;             // 1. = collided, 0. = not collided
    float lifeTime = uMaxLifeTime;

    // Calculate the position adjustment based on collision
    //     if (collisionFlag > .5) {  
    float isColliding = step(0.5, collisionFlag); // 1.0 if collisionFlag > 0.5, otherwise 0.0
    float bounceOffset = 3.0 * isColliding; // Becomes 3.0 if colliding, 0.0 otherwise
    vec3 collisionAdjustedVelocity = velocity * (1.0 + bounceOffset);

    // Update position based on collision or normal movement
    vec3 fpsVelocity = velocity * min(uFPSRatio, 5.0);
    position += mix(fpsVelocity, collisionAdjustedVelocity, isColliding);

    // EMISSION RATE - BIRTH
    // if (isSpawning == 1.0) {
    // Better Approach to avoid If statement
    vec3 newPosition = applyQuaternionToVector(uWorldQuaternion, originalPosition) + uWorldOffset;
    originalPosition = mix(originalPosition, newPosition, isSpawning);
    position = mix(position, originalPosition, isSpawning);;
    timeStart = mix(timeStart, uTime, isSpawning);

    // Calculate timeLeft for life normalization
    float timeLeft = max(lifeTime - (uTime - timeStart), 0.0);
    float life_Normalize = timeLeft / lifeTime;

    // Use isActive to blend between the calculated color and black
    vec4 activeColor = vec4(position, life_Normalize);
    // if (isActive == 1.0) {
    gl_FragColor = mix(vec4(0.0), activeColor, isActive);

}
`,sTe=`

    vec3 mod289(vec3 x) {
      return x - floor(x * (1.0 / 289.0)) * 289.0;
    }
    
    vec4 mod289(vec4 x) {
    return x - floor(x * (1.0 / 289.0)) * 289.0;
    }
    
    vec4 permute(vec4 x) {
        return mod289(((x*34.0)+1.0)*x);
    }
    
    vec4 taylorInvSqrt(vec4 r)
    {
    return 1.79284291400159 - 0.85373472095314 * r;
    }
    
    vec3 fade(vec3 t) {
  return t*t*t*(t*(t*6.0-15.0)+10.0);
}

    float snoise(vec3 v)
    {
    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
    vec3 i  = floor(v + dot(v, C.yyy) );
    vec3 x0 =   v - i + dot(i, C.xxx) ;
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min( g.xyz, l.zxy );
    vec3 i2 = max( g.xyz, l.zxy );
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y
    vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y
    
    // Permutations
    i = mod289(i);
    vec4 p = permute( permute( permute(
                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
              + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))
              + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
    
    // Gradients: 7x7 points over a square, mapped onto an octahedron.
    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)
    float n_ = 0.142857142857; // 1.0/7.0
    vec3  ns = n_ * D.wyz - D.xzx;
    
    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)
    
    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
    
    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);
    
    vec4 b0 = vec4( x.xy, y.xy );
    vec4 b1 = vec4( x.zw, y.zw );
    
    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));
    
    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
    
    vec3 p0 = vec3(a0.xy,h.x);
    vec3 p1 = vec3(a0.zw,h.y);
    vec3 p2 = vec3(a1.xy,h.z);
    vec3 p3 = vec3(a1.zw,h.w);
    
    //Normalise gradients
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;
    
    // Mix final noise value
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),
                                  dot(p2,x2), dot(p3,x3) ) );
    }
    
    vec3 snoiseVec3( vec3 x ){
    
      float s  = snoise(vec3( x ));
      float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));
      float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));
      vec3 c = vec3( s , s1 , s2 );
      return c;
    
    }
    
      
    vec3 curlNoise( vec3 p, float seed){
      p += seed;
      const float e = .1;
      vec3 dx = vec3( e   , 0.0 , 0.0 );
      vec3 dy = vec3( 0.0 , e   , 0.0 );
      vec3 dz = vec3( 0.0 , 0.0 , e   );
    
      vec3 p_x0 = snoiseVec3( p - dx );
      vec3 p_x1 = snoiseVec3( p + dx );
      vec3 p_y0 = snoiseVec3( p - dy );
      vec3 p_y1 = snoiseVec3( p + dy );
      vec3 p_z0 = snoiseVec3( p - dz );
      vec3 p_z1 = snoiseVec3( p + dz );
    
      float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;
      float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;
      float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;
    
      const float divisor = 1.0 / ( 2.0 * e );
      return normalize( vec3( x , y , z ) * divisor );
    
    }


// Classic Perlin noise
float cnoise(vec3 P)
{
  vec3 Pi0 = floor(P); // Integer part for indexing
  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1
  Pi0 = mod289(Pi0);
  Pi1 = mod289(Pi1);
  vec3 Pf0 = fract(P); // Fractional part for interpolation
  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
  vec4 iy = vec4(Pi0.yy, Pi1.yy);
  vec4 iz0 = Pi0.zzzz;
  vec4 iz1 = Pi1.zzzz;

  vec4 ixy = permute(permute(ix) + iy);
  vec4 ixy0 = permute(ixy + iz0);
  vec4 ixy1 = permute(ixy + iz1);

  vec4 gx0 = ixy0 * (1.0 / 7.0);
  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
  gx0 = fract(gx0);
  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
  vec4 sz0 = step(gz0, vec4(0.0));
  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
  gy0 -= sz0 * (step(0.0, gy0) - 0.5);

  vec4 gx1 = ixy1 * (1.0 / 7.0);
  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
  gx1 = fract(gx1);
  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
  vec4 sz1 = step(gz1, vec4(0.0));
  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
  gy1 -= sz1 * (step(0.0, gy1) - 0.5);

  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);

  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
  g000 *= norm0.x;
  g010 *= norm0.y;
  g100 *= norm0.z;
  g110 *= norm0.w;
  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
  g001 *= norm1.x;
  g011 *= norm1.y;
  g101 *= norm1.z;
  g111 *= norm1.w;

  float n000 = dot(g000, Pf0);
  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
  float n111 = dot(g111, Pf1);

  vec3 fade_xyz = fade(Pf0);
  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
  return 2.2 * n_xyz;
}


vec3 fbm_vec3(vec3 p, float frequency, float offset)
{
  return vec3(
    cnoise((p+vec3(offset))*frequency),
    cnoise((p+vec3(offset+20.0))*frequency),
    cnoise((p+vec3(offset-30.0))*frequency)
  );
}

`,oTe=`
  #ifdef USE_COLLIDER
    float restitution = max(uBounce * 2., .01); // Energy Loss
    // SPHERE COLLIDER
    // **************************************************************
    #ifdef USE_SPHERE_COLLIDER       
      // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)
      vec3 radii = uColliderSize;
      // Adjust position relative to collider
      vec3 relPos = position - uColliderPos;
      // Apply rotation of the collider to the relative position
      relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
      // Scale relative position by radii (for ellipsoid collision detection)
      vec3 scaledPos = relPos / radii;
      // Calculate ellipsoidal distance
      float dist = length(scaledPos); // Distance in terms of ellipsoid
      
      // Check for collision
      if (dist <= 1. + particleSize / length(radii) && collisionFlag == 0.0) {
          // Compute the normal at the collision point, accounting for particle size
        vec3 adjustedPos = scaledPos * (1.0 + particleSize / length(radii));          
        // Compute the normal at the collision point
        vec3 normal = ellipsoidNormal(adjustedPos, radii);
        // Rotate the normal back to world space
        normal = applyQuaternionToVector(uColliderQuaternion, normal);
        // Reflect the velocity vector off the normal
        velocity = reflect(velocity, normal) * restitution;

        collisionFlag = 1.0;
      } else {
        collisionFlag = 0.0;
      }
    #endif

    // BOX COLLIDER or PLANE COLLIDER 
    // **************************************************************
    #ifdef USE_BOX_COLLIDER
      // Box dimensions and repulsion variables
      vec3 boxHalfSize = uColliderSize / 2.0;
      // Convert world position to box's local space
      vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
      // Collision detection
      vec3 localDistance = abs(localPos) - boxHalfSize;
      float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));    

      // Collision Detected
      if (distToSurface <= particleSize * 0.5 && collisionFlag == 0.0) {      
        // Find the nearest face normal for bounce direction
        vec3 normal;
        if (localDistance.x > localDistance.y && localDistance.x > localDistance.z) {
            normal = vec3(sign(localPos.x), 0.0, 0.0);
        } else if (localDistance.y > localDistance.z) {
            normal = vec3(0.0, sign(localPos.y), 0.0);
        } else {
            normal = vec3(0.0, 0.0, sign(localPos.z));
        }            
        // Rotate normal back to world space
        normal = applyQuaternionToVector(uColliderQuaternion, normal);      
        // Reflect velocity and apply repulsion force
        velocity = reflect(velocity, normal) * restitution;
        
        collisionFlag = 1.0;
      } else {
        collisionFlag = 0.0;
      }
    #endif      
  #endif      
  // END COLLIDER    
`,lTe=`
  #ifdef USE_ATTRACTOR

      #ifdef USE_SPHERE_COLLIDER      
        // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)
        vec3 radii = uColliderSize;
        // Adjust position relative to collider
        vec3 relPos = position - uColliderPos;
        // Apply rotation of the collider to the relative position
        relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
        // Scale relative position by radii (for ellipsoid collision detection)
        vec3 scaledPos = relPos / radii;
        // Calculate ellipsoidal distance
        float distToSurface = length(scaledPos); // Distance in terms of ellipsoid
        float insideCheck = 1.0;

      #endif


      #ifdef USE_BOX_COLLIDER
        // Box dimensions
        vec3 boxHalfSize = uColliderSize / 2.0;
        // Convert world position to box's local space
        vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
        vec3 localDistance = abs(localPos) - boxHalfSize;
        float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));
        float insideCheck = particleSize;
      #endif      
  
      // Apply vortex force inside the Helper
      #ifdef USE_FORCE_LOCAL_SPACE
        if (distToSurface <= insideCheck ) {    
            // Define parameters for the attractor field
            #ifdef USE_SPHERE_COLLIDER      
              float attractorStrength = (1.0 - distToSurface ) * uForceIntensity; // Adjust as needed
            #endif

            #ifdef USE_BOX_COLLIDER
              float attractorStrength = max((1.0 - insideCheck / distToSurface), 0.) * uForceIntensity; // Adjust as needed
              #endif

            float attractorDamping = uForceDamping;  // Adjust as needed (higher values will attenuate velocity more)
          
            // Use the same radii calculation code as for the collider
            vec3 attractorRadii = uColliderSize;
            // Adjust position relative to attractor center
            vec3 relPos = position - uColliderPos;
            // Apply rotation of the collider to the relative position
            relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
            // Scale relative position by radii (for ellipsoid attraction)
            vec3 scaledPos = relPos / attractorRadii;

            // Calculate ellipsoidal distance as attractor radius
            float attractorRadius = length(scaledPos);
            // Calculate the distance from the attractor center
            vec3 relativePosition = position - uColliderPos;
            // Calculate the force vector towards the attractor center
            vec3 attractorForce = normalize(relativePosition) * attractorStrength;
            // Apply the attractor force to the particle
            velocity -= attractorForce;
            // Attenuate the particle's velocity
            velocity *= attractorDamping;
        }
      #else 
            // Calculate the distance from the attractor center
            vec3 relativePosition = position - uColliderPos;
            // Calculate the force vector towards the attractor center
            vec3 attractorForce = normalize(relativePosition) * uForceIntensity;
            // Apply the attractor force to the particle
            velocity -= attractorForce;
            // Attenuate the particle's velocity
            velocity *= uForceDamping;
      #endif    
  #endif      
`,cTe=`
  #ifdef USE_VORTEX
    // Box dimensions
    vec3 boxHalfSize = uColliderSize / 2.0;
    // Convert world position to box's local space
    vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
    vec3 localDistance = abs(localPos) - boxHalfSize;
    float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));

    // Apply vortex force inside the box
    if (distToSurface <= particleSize) {
      float vortexStrength = uForceIntensity;
      vec3 localTopCenter = vec3(0.0, 0., 0.0);

      // Transform the local top center to the world space
      vec3 vortexCenter = uColliderPos + applyQuaternionToVector(uColliderQuaternion, localTopCenter);
      // Calculate the vector from particle to vortex center
      vec3 vortexVector = vortexCenter - position;

      // Calculate the rotation axis from the inverse of the collider's quaternion and the fixed up vector
      // Note: important to add a tiny z component to the up vector to avoid instability
      vec3 upVector = vec3(0.0, 1.0, 0.01);
      vec3 rotationAxis = cross(upVector, applyQuaternionToVector(uColliderQuaternion, vortexVector));
      rotationAxis = normalize(rotationAxis);

      // Add rotational component to velocity
      float rotationSpeed = length(vortexVector * vortexStrength * 3.0) ; 

      vec3 rotationVelocity = rotationAxis * rotationSpeed;
      // velocity += rotationVelocity * 0.005 ;
      velocity = rotationVelocity * 0.005 ;

      // Calculate vortex force
      // vec3 vortexForce = normalize(vortexVector) * uSpeed * .1 ;
      // Apply the vortex force to the particle
      vec3 originDirection = applyQuaternionToVector(uWorldQuaternion, directions);
      velocity += applyForce( originDirection * uSpeed * (1. - uForceDamping) , mass * .5);
    }
  #endif      
`,uTe=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU
uniform sampler2D uOriginalPosition;
uniform sampler2D uDirections;     
uniform vec3 uDirectionsAxis;
uniform vec4 uWorldQuaternion;
uniform vec3 uGravity;        
uniform float uNoiseStrength;     // Variation of the noise
uniform float uNoiseScale;        // Scale of the noise
uniform float uNoiseSeed;         // Seed of the noise
uniform float particleSize;
uniform float uSpeed;     // update speed of the particles
uniform float uRandomMassFactor;

// COLLIDER
uniform vec3 uColliderPos;                // Collider Position
uniform vec3 uColliderSize;               // Collider Dimension
uniform vec4 uColliderQuaternion;         // Collider Rotation
uniform vec4 uColliderQuaternionInvert;   // Collider Rotation
uniform float uBounce;                    // Bounce factor
uniform float uForceDamping;
uniform float uForceIntensity;


`+sTe+`
float rand(vec2 co){
    return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);
}
vec3 applyQuaternionToVector( vec4 q, vec3 v ){
    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
 } 
vec3 applyForce(vec3 force, float mass) {
  vec3 acceleration = force / mass;
  
  return acceleration;
}

vec4 conjugate(vec4 q) {
  return vec4(q.w, -q.x, -q.y, -q.z);
}

// Function to compute the normal of the ellipsoid at a given point
vec3 ellipsoidNormal(vec3 p, vec3 radii) {
  return normalize(p / (radii * radii));
}

float friction = .3;

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;
    vec3 originalPosition = texture2D( uOriginalPosition, vUv ).xyz;
    float timeLeft = texture2D( uCurrentPosition, vUv ).w;
    vec3 directions = texture2D( uDirections, vUv ).xyz;    
    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;
    float mass = rand(originalPosition.xy) * 0.5 + 0.5;
    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).x;        // 1. = spawning, 0. = not spawning
    float isActive = texture2D( uCurrentEmissionRate, vUv ).y;          // 1. = active, 0. = not active
    float collisionFlag =texture2D( uCurrentVelocity, vUv ).w;          // Indicate collision

    // Randomness Mass
    mass = (1.0 - (uRandomMassFactor * mass));
    
    if (isActive == 1.0) {
      // **************************************************************
      // FORCES NOISES
      // **************************************************************
      #ifdef USE_CURL_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = curlNoise(position * uNoiseScale * .002, uNoiseSeed) * ( uNoiseStrength + 1.0) * .05 * uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {
          velocity += curlNoise( position, uNoiseSeed)  * uNoiseStrength * 0.05 * uSpeed;
        }
      #endif
      // **************************************************************
      #ifdef USE_SIMPLEX_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = vec3(snoise(position * uNoiseScale * .001) * ( uNoiseStrength + 1.0) * .1);
          velocity *= uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0) {
          velocity += vec3(snoise(position * uNoiseStrength * .001) * .05 * uSpeed);
        }
      #endif
      // ************************************************************** 
      #ifdef USE_FBM_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = fbm_vec3(position * uNoiseScale * .001, ( uNoiseStrength + 1.0), uNoiseSeed);
          velocity *= uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {      
          velocity += fbm_vec3(position * uNoiseStrength * .001, ( uNoiseStrength + 1.0), uNoiseSeed) * .1 * uSpeed;
        }
      #endif

      // COLLIDER
      ${oTe}
      // ATTRACTION
      ${lTe}  
      // VORTEX
      ${cTe}
    } 
    // End isActive

    // SPAWN BIRTH 
    // **************************************************************
    // if (isSpawning == 1.)
    #ifdef USE_NORMALS
      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, directions) * uSpeed, isSpawning);
    #else
      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, uDirectionsAxis) * uSpeed, isSpawning);    
    #endif
    
    // if (collisionFlag == 0.0)
    velocity += applyForce(uGravity, mass * .5) * (1.0 - collisionFlag);

    gl_FragColor = vec4(velocity, collisionFlag);
}
`,H$=`

  // Linear Fade In
  float linearFadeIn(float t) {
    return t;
  }


  // linear fade out
  float linearFadeOut(float t) {
    return 1.0 - t;
  }
  
  float linearInOut(float t) {
    return t < 0.5 ? t :  (1.0 - t);  
  }

    // lerp
    float lerp(float a, float b, float t) {
      return a + (b - a) * t;
    }

  // Ease In Out Quart
  float exponentialInOut(float t) {
    return t < 0.4 ? lerp(0.0, 1.0, t / 0.4) :
    t > 0.6 ? lerp(1.0, 0.0, (t - 0.6) / 0.4) :
    1.0;
   }

  // constant
  float constant(float t) {
    return 1.0;
  } 
`,dTe=`

float rand(vec3 co){
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

vec3 applyQuaternionToVector( vec4 q, vec3 v ){
  return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
}

vec3 applyForce(vec3 force, float mass) {
  vec3 acceleration = force / mass;
    
  return acceleration;
}
`,hTe=`
vec3 rgb2xyz (in vec3 rgb) {
    float r = rgb.r;
	float g = rgb.g;
	float b = rgb.b;

	r = r > 0.04045 ? pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);
	g = g > 0.04045 ? pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);
	b = b > 0.04045 ? pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);

	float x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);
	float y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);
	float z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);
    
    vec3 xyz = vec3(
        (r * 0.4124) + (g * 0.3576) + (b * 0.1805) * 100.0,
        (r * 0.2126) + (g * 0.7152) + (b * 0.0722) * 100.0,
        (r * 0.0193) + (g * 0.1192) + (b * 0.9505) * 100.0
    );
    return(xyz);
}

vec3 xyz2lab (in vec3 xyz) {
	float x = xyz.x / 95.047;
	float y = xyz.y / 100.0;
	float z = xyz.z / 108.883;

	x = x > 0.008856 ? pow(x, 1.0 / 3.0) : (7.787 * x) + (16.0 / 116.0);
	y = y > 0.008856 ? pow(y, 1.0 / 3.0) : (7.787 * y) + (16.0 / 116.0);
	z = z > 0.008856 ? pow(z, 1.0 / 3.0) : (7.787 * z) + (16.0 / 116.0);

    vec3 lab = vec3((116.0 * y) - 16.0, 500.0 * (x - y), 200.0 * (y - z));
    return(lab);
}

vec3 rgb2lab(in vec3 rgb) {
    vec3 xyz = rgb2xyz(rgb);
    vec3 lab = xyz2lab(xyz);
    return(lab);
}

vec3 xyz2rgb (in vec3 xyz) {
	float x = xyz.x / 100.0;
	float y = xyz.y / 100.0;
	float z = xyz.z / 100.0;
	
    
	float r = (x *  3.2406) + (y * -1.5372) + (z * -0.4986);
	float g = (x * -0.9689) + (y *  1.8758) + (z *  0.0415);
	float b = (x *  0.0557) + (y * -0.2040) + (z *  1.0570);

	r = r > 0.0031308 ? ((1.055 * pow(r, 1.0 / 2.4)) - 0.055) : r * 12.92;
	g = g > 0.0031308 ? ((1.055 * pow(g, 1.0 / 2.4)) - 0.055) : g * 12.92;
	b = b > 0.0031308 ? ((1.055 * pow(b, 1.0 / 2.4)) - 0.055) : b * 12.92;

	r = min(max(0.0, r), 1.0);
	g = min(max(0.0, g), 1.0);
	b = min(max(0.0, b), 1.0);

	return(vec3(r, g, b));
}

vec3 lab2xyz (in vec3 lab) {
    float l = lab.x;
	float a = lab.y;
	float b = lab.z;

  	float y = (l + 16.0) / 116.0;
	float x = a / 500.0 + y;
	float z = y - b / 200.0;

	float y2 = pow(y, 3.0);
	float x2 = pow(x, 3.0);
	float z2 = pow(z, 3.0);

  	y = y2 > 0.008856 ? y2 : (y - 16.0 / 116.0) / 7.787;
	x = x2 > 0.008856 ? x2 : (x - 16.0 / 116.0) / 7.787;
	z = z2 > 0.008856 ? z2 : (z - 16.0 / 116.0) / 7.787;

	x *= 95.047;
	y *= 100.0;
	z *= 108.883;

	return(vec3(x, y, z));
}
vec3 lab2rgb (in vec3 lab) {
    vec3 xyz = lab2xyz(lab);
    vec3 rgb = xyz2rgb(xyz);
    return(rgb);
}

`,fTe=`
  uniform sampler2D uPosition;
  uniform float uSize;
  uniform float uSizeEnd;
  uniform vec3 uWorldOffset;
  uniform vec4 uWorldQuaternion;
  // Billboard Behavior - Currently at Zero, but we can change that
  uniform float uRotation;
  uniform float uRotationEnd;
  uniform vec2 center;

  // Randomness
  uniform float uRandScaleFactor;
  uniform float uRandRotationFactor;

  attribute vec2 ref;

  varying float v_LifeLeft;    // normalized lifetime 1 to 0
  varying vec2 vUv;
  varying vec2 vRef;

  ${dTe}
  ${H$}
`,pTe=({easeSize:e="linearFadeOut"})=>`
  vUv = uv;  
  vRef = ref;
  // Normalized LifeTime 1 to 0
  float lifeLeft = texture2D(uPosition, ref).w;
  v_LifeLeft = lifeLeft;
  // Position From DataTexture Simulation
  vec3 pos = texture2D(uPosition, ref).rgb - uWorldOffset;
  // Apply World Quaternion
  pos = applyQuaternionToVector(uWorldQuaternion, pos);  
            
  #ifdef  USE_SIZE_END
    // Scaled Over Time
    float t = 1. - lifeLeft;
    float currentSize = mix(uSize, uSizeEnd, t); // Linearly interpolate between uSize and uSizeEnd
    vec3 scaledPosition = position * vec3(currentSize);
  #else
    // Change Size Behavior over LifeTime
    float easeSize = ${e}(1. - lifeLeft);
    // Scaled Over Time
    vec3 scaledPosition = position * vec3(uSize * easeSize);
  #endif

  // Billboard Behavior
  vec2 scale;
  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );    
  // Randomness 
  float randRef = rand(ref);
  scale *= (1.0 - (uRandScaleFactor * randRef));
  // Rotation
  float randRotation =  2.0 * PI * ( uRandRotationFactor * randRef);
  float originalRotation = (1.0 - uRotation) * 2.0 * PI;
  float originalRotationEnd = (1.0 - uRotationEnd) * 2.0 * PI;
  // OverTime
  float finalRotation = mix(originalRotation + randRotation, originalRotationEnd + randRotation, lifeLeft);

  vec2 alignedPosition = ( scaledPosition.xy - ( center - vec2( 0.5 ) ) ) * scale;
  vec2 rotatedPosition;
  rotatedPosition.x = cos( finalRotation ) * alignedPosition.x - sin( finalRotation ) * alignedPosition.y;
  rotatedPosition.y = sin( finalRotation ) * alignedPosition.x + cos( finalRotation ) * alignedPosition.y;
  
  mat4 instanceMatrix = mat4(
    vec4(1.0, 0.0, 0.0, 0.0),
    vec4(0.0, 1.0, 0.0, 0.0),
    vec4(0.0, 0.0, 1.0, 0.0),
    vec4(pos.x, pos.y, pos.z, 1.0)
  );  

  mvPosition = modelViewMatrix * instanceMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
  mvPosition.xy += rotatedPosition;
  gl_Position = projectionMatrix  * mvPosition;   
`,mTe=`
  uniform vec4 uColor;                // start color
  uniform vec4 uColor2;               // end color
  uniform sampler2D uTexture;         // texture
  varying float v_LifeLeft;   // normalized lifetime 1 to 0
  varying vec2 vUv;
  varying vec2 vRef;

  float random(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
  }
  `+H$+`  
  ${hTe}

`,vTe=({easeOpacity:e="linearFadeOut"})=>`  
  // if Particle is dead, hide it
  if (v_LifeLeft <= 0.005 ) {
    discard;
  }

  #ifdef USE_RANDOM_COLORING
    float randVal = random(vRef); // Generate a random value based on the reference
    vec4 color = mix(uColor, uColor2, randVal); // Interpolate between the two colors
  #else
    vec4 color = mix(uColor, uColor2, 1. - v_LifeLeft);
  #endif

  // Opacity over Life Time
  float finalAlpha = ${e}(1. - v_LifeLeft);  
  vec4 textureColor = texture2D(uTexture, vUv).rgba; 
  finalColor = textureColor.rgb * color.rgb;
  finalAlpha = color.a * textureColor.a * finalAlpha;
  
  gl_FragColor = vec4(finalColor, finalAlpha);     

`,gTe=class extends er{constructor(e,t){super(),this.needsJitter=!0,this.type="ParticleMaterial",this.easeOpacity="linearFadeIn",this.easeSize="linearFadeIn",this.useSizeEnd=!1,this.isColoringRandom=!1,this.init(e,t),this.context=t}reset(){}init(e,t){this.transparent=!0,this.depthTest=!0,this.depthWrite=!1,this.easeOpacity=e.ease,this.easeSize=e.easeSize,this.layers=[],Fn.startContext(Fn.globalContext),this.lightLayer=new ec(0,"",{...ea.defaultData("light","phong"),visible:!1},new tD,{},t.shared),Fn.endContext(Fn.globalContext),this.build()}updateState(e){e.coloring!==void 0&&(this.isColoringRandom=e.coloring==="random"),e.color!==void 0&&(e.color instanceof Array?this.uniforms.uColor.value=e.color:this.uniforms.uColor.value=this.context.shared.color(e.color)),e.color2!==void 0&&(e.color2 instanceof Array?this.uniforms.uColor2.value=e.color2:this.uniforms.uColor2.value=this.context.shared.color(e.color2)),e.size!==void 0&&(this.uniforms.uSize.value=e.size[0],this.uniforms.uSizeEnd.value=e.size[1],e.size[0]!==e.size[1]?this.useSizeEnd=!0:this.useSizeEnd=!1),e.ease!==void 0&&(this.easeOpacity=e.ease,this.build()),e.easeSize!==void 0&&(this.easeSize=e.easeSize,this.build()),this.needsUpdate=!0}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader}build(){let e=new zG;return e.needsJitter=this.needsJitter,e.addFragmentParsCode(z3e),e.buildShader("vertex",this.fragment),e.buildShader("fragment",this.fragment),e.addFragmentFinalCode(V3e),this.isColoringRandom&&e.define("USE_RANDOM_COLORING"),this.useSizeEnd&&e.define("USE_SIZE_END"),e.addVertexParsCode(fTe),e.addFragmentParsCode(mTe),e.addVertexFinalCode(pTe({easeSize:this.easeSize})),e.addFragmentFinalCode(vTe({easeOpacity:this.easeOpacity})),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms={...e.uniforms,...this.uniforms},this.extensions=e.extensions,this}get nodeMaterial(){return this}get fragment(){return this.lightLayer.node}getDefines(){return this.defines}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose()}},h4=class{constructor(e,t,i,r){this.type="SphereEmitterShape",this.targetMesh=void 0,this.size=e,this.type=i,this.textureSize=tTe(t);let n=1;this.targetMesh=(r==null?void 0:r.type)==="Mesh"&&r?r:this.getMesh(i,n);let{positions:a,dataTexture:s,dataTextureNormals:o}=this.createPositions(this.textureSize,this.targetMesh??this.getMesh(i,n));this.positionsTexture=s,this.positionsAttribute=a,this.directionsTexture=o}createPositions(e,t){let{positions:i,normals:r}=iTe(t,e*e),n=BB(i,e),a=BB(r,e);return{dataTexture:n,positions:i,dataTextureNormals:a}}getMesh(e,t){let i=null;switch(e){case"SphereEmitterShape":{i=new Nm(t*.5,32,32);break}case"TorusEmitterShape":{i=new wj(t*.5,.3,15,40);break}case"ConeEmitterShape":{i=new lP(t,t,15);break}case"BoxEmitterShape":{i=new Cl(t,t,t);break}case"PlaneEmitterShape":{i=new Pu(t,t),i.rotateX(-Math.PI/2);break}case"MeshEmitterShape":{i=new Nm(t,32,32);break}default:{i=new Nm(t,32,32);break}}return new Yr(i,new Tu({color:16711680}))}applyToShader(e,t){this.size=new H().fromArray(t.size),e.uEmitterSize.value=this.size}dispose(){this.positionsTexture.dispose(),this.directionsTexture.dispose(),this.positionsAttribute=new Float32Array}};function dm(e){let t={...e},i=_x.defaultData;t.forceFieldObjectId&&(t.colliderEntityId=t.forceFieldObjectId);let r={...i.shape,...t.shape},n={...i.renderMaterial,...t.renderMaterial};return{...i,...t,shape:r,renderMaterial:n}}var yTe=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU

uniform sampler2D uIndex; // Texture with corresponding index
uniform float uLastIndexEmitted; // Last emitted index
uniform float uParticlesToEmit; // Number of particles to emit on that frame
uniform float uTime;

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    float particleIndex = texture(uIndex, vUv).x;
    float timeLeft = texture2D( uCurrentPosition, vUv ).w;
    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;    // 1. = active, 0. = not active
    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;


    // ********** Detect Colision to Create a flag and use it in position **********
    // We are doing this here, so

    // ********** Emit Particles **********
    // X = isSpawning 0.0 or 1.0
    // Y = isActive 0.0 or 1.0
    // Check if the vertex index is between the first value and the last value
    // if (particleIndex >= uLastIndexEmitted && particleIndex < uLastIndexEmitted + uParticlesToEmit) {
    //     // Emit a particle by writing 1 to the red channel of the color output
    //     // r: 1. == emit the particle
    //     // g: 1. == particle is now active
    //     timeStart = uTime;
    //     gl_FragColor = vec4(1.0, 1.0, timeStart, 1.0);
    // } else {
    //     // The Particle is either already emitted or not in the range of the particles to emit
    //     // Do not emit a particle by writing 0 to the red channel of the color output        
    //     gl_FragColor = vec4(0.0, isActive, timeStart, 1.0);
    // }
    // Determine if the particle is within the emission range
    float emitLowerBound = step(uLastIndexEmitted, particleIndex);
    float emitUpperBound = step(particleIndex, uLastIndexEmitted + uParticlesToEmit - 1.0);
    float emitParticle = emitLowerBound * emitUpperBound; // 1.0 if in range, 0.0 otherwise

    // Set timeStart and color
    timeStart = mix(timeStart, uTime, emitParticle);
    gl_FragColor = vec4(emitParticle, mix(isActive, 1.0, emitParticle), timeStart, 1.0);


}
`,f4=10,bTe=class extends dr{constructor(e,t){super(),this.type="ParticleEmitter",this.debugMode=!1,this.worldSpace=!0,this.rootObject=null,this.gpuCompute=null,this.positionSimRT=null,this.velocitySimRT=null,this.emissionRateSimRT=null,this.emitterShape=void 0,this.isEmitting=!1,this.hasBeenReset=!1,this.emittedParticlesAmount=0,this.lastEmitTime=0,this.globalTime=0,this.targetFPS=60,this.previousRatio=1,this.lerpFactor=.4,this.particlesAmount=0,this.noiseStrength=0,this.noiseScale=0,this.isBillboardBased=!0,this.simFeaturesDefinition={USE_COLLIDER:!1,USE_ATTRACTOR:!1,USE_VORTEX:!1,USE_SPHERE_COLLIDER:!1,USE_BOX_COLLIDER:!1,USE_FORCE_LOCAL_SPACE:!1,USE_NORMALS:!1,USE_CURL_NOISE:!0,USE_SIMPLEX_NOISE:!1,USE_FBM_NOISE:!1},this.textureLoader=new ope,this.currentWorldPosition=new H,this.systemQuaternion=new mi,this.worldGravity=new H(0,0,0),this.directionAxis=new H(0,0,0),this.colliderV3=new H(0,0,0),this.colliderQuaternion=new mi(0,0,0,1),this.matrixAutoUpdate=!0,this.renderer=e,this.system=t,this.shared=t.context.shared;let i=t.data;this.material=new gTe(i.renderMaterial,t.context),this.material.uniforms={uSize:{value:0},uSizeEnd:{value:0},uColor:{value:i.renderMaterial.color},uColor2:{value:i.renderMaterial.color2},uPosition:{value:new H(0,0,0)},uEmissionData:{value:new H(0,0,0)},uTexture:{value:this.defaultTexture},uWorldOffset:{value:new H(0,0,0)},uWorldQuaternion:{value:new vi(0,0,0,1)},uRandScaleFactor:{value:i.randomScale??0},uRandRotationFactor:{value:i.randomRotation??0},uRotation:{value:i.renderMaterial.spriteRotation[0]??0},uRotationEnd:{value:i.renderMaterial.spriteRotation[1]??0}},this.setTexture(this.material.uniforms,i.renderMaterial.texture),this.init(i)}setTexture(e,t){let i=t.data;if(typeof t=="string"){let r=this.shared.image(t),n=new Kr(r.img);n.needsUpdate=!0,e.uTexture.value=n;return}if(typeof i!="string"){let r=new Image;r.onload=()=>{let s=new Kr(r);s.needsUpdate=!0,e.uTexture.value=s};let n=new Blob([i],{type:"image/*"}),a=URL.createObjectURL(n);r.src=a}}updateGeometryAttributes(e,t){var r;let i=eTe(t);!((r=this.emitterShape)!=null&&r.positionsAttribute)||e.geometry.setAttribute("ref",new s1(i,2))}applyWorldSpace(){if(!this.system.started||!this.worldSpace||!this.positionSimRT||!this.velocitySimRT)return;let e=this.system;e.getWorldQuaternion(this.systemQuaternion),this.systemQuaternion.invert(),e.getWorldPosition(this.currentWorldPosition),this.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.positionSimRT.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.systemQuaternion.invert(),this.positionSimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.velocitySimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize())}update(e,t){var s;if(!this.gpuCompute||!this.positionSimRT||!this.velocitySimRT||!this.emissionRateSimRT||this.hasBeenReset)return;if(this.checkIfAllParticlesAreDead()&&!this.hasBeenReset){this.reset();return}this.applyWorldSpace(),this.globalTime=e,this.positionSimRT.material.uniforms.uTime.value=e,this.emissionRateSimRT.material.uniforms.uTime.value=e;let i=1e3/t,r=this.targetFPS/i,n=this.previousRatio+(r-this.previousRatio)*this.lerpFactor;this.positionSimRT.material.uniforms.uFPSRatio.value=n,this.previousRatio=n;let a=this.isEmitting?this.GoEmitSomeParticles(e,this.system.data.birthRatePerSec):0;this.emissionRateSimRT.material.uniforms.uLastIndexEmitted.value=this.emittedParticlesAmount,this.emissionRateSimRT.material.uniforms.uParticlesToEmit.value=a,this.material.uniforms.uPosition.value=(s=this.gpuCompute.getCurrentRenderTarget(this.positionSimRT))==null?void 0:s.texture,this.system.colliderEntities.length>0&&this.renderColliders(),this.gpuCompute.compute()}renderColliders(){if(!this.velocitySimRT)return;let e=this.system.colliderEntities[0],t=this.simFeaturesDefinition.USE_COLLIDER||this.simFeaturesDefinition.USE_ATTRACTOR||this.simFeaturesDefinition.USE_VORTEX;if(e.destroyedInAction&&t&&this.init(dm({...this.system.data,colliderEntityId:null})),!e||e.destroyedInAction)return;e.getWorldPosition(this.colliderV3),this.colliderV3.y===0&&(this.colliderV3.y=1e-4),this.velocitySimRT.material.uniforms.uColliderPos.value.copy(this.colliderV3);let i=e.data.size;this.colliderV3.fromArray(i),this.velocitySimRT.material.uniforms.uColliderSize.value.copy(this.simFeaturesDefinition.USE_SPHERE_COLLIDER?this.colliderV3.multiplyScalar(.5):this.colliderV3),e.getWorldQuaternion(this.colliderQuaternion),this.velocitySimRT.material.uniforms.uColliderQuaternion.value.copy(this.colliderQuaternion.normalize()),this.velocitySimRT.material.uniforms.uColliderQuaternionInvert.value.copy(this.colliderQuaternion.normalize().invert())}updateState(e){!this.velocitySimRT||!this.positionSimRT||(e.renderMaterial&&this.updateMaterialState(e.renderMaterial),this.updateParticleState(e))}updateVariableState(e,t){if(!this.velocitySimRT||!this.positionSimRT)return;t[2]==="size"&&this.material.updateState({size:[e,this.material.uniforms.uSizeEnd.value]}),t[2]==="sizeEnd"&&this.material.updateState({size:[this.material.uniforms.uSize.value,e]});let i=(r,n)=>{let a=[...this.system.data.shape.size];a[r]=n,this.updateParticleState({shape:{...this.system.data.shape,size:a}})};t[2]==="shape_size_0"&&i(0,e),t[2]==="shape_size_1"&&i(1,e),t[2]==="shape_size_2"&&i(2,e),t[2]==="speed"&&(this.velocitySimRT.material.uniforms.uSpeed.value=e/f4),t[2]==="gravity"&&this.worldGravity.set(0,e/100,0),t[2]==="noiseStrength"&&(this.noiseStrength=e,this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),t[2]==="noiseScale"&&(this.noiseScale=e,this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),t[2]==="direction_x"&&(this.directionAxis=this.getDirectionAxis([Number(e),this.system.data.direction[1],this.system.data.direction[2]])),t[2]==="direction_y"&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],Number(e),this.system.data.direction[2]])),t[2]==="direction_z"&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],this.system.data.direction[1],Number(e)]))}updateMaterialState(e){this.material.updateState({...e,size:e.size?[Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","size"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","sizeEnd"]))]:[0,0]}),e.texture&&(this.setTexture(this.material.uniforms,e.texture),this.material.needsUpdate=!0)}updateParticleState(e){var t,i,r;if(!(!this.positionSimRT||!this.velocitySimRT)){if(this.shouldReInitGPUCompute(e)&&this.init(dm(this.system.data)),e.life!==void 0&&(this.positionSimRT.material.uniforms.uMaxLifeTime.value=e.life),e.speed!==void 0&&(this.velocitySimRT.material.uniforms.uSpeed.value=Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/f4),e.collisionBounce!==void 0&&(this.velocitySimRT.material.uniforms.uBounce.value=e.collisionBounce),e.noiseStrength!==void 0&&(this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),e.noiseScale!==void 0&&(this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"])),this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),e.noiseSeed!==void 0&&(this.velocitySimRT.material.uniforms.uNoiseSeed.value=e.noiseSeed),e.randomMass!==void 0&&(this.velocitySimRT.material.uniforms.uRandomMassFactor.value=e.randomMass),((t=e.renderMaterial)==null?void 0:t.size)!==void 0){let n=this.shared.getVariable(e.renderMaterial.size[0],[this.uuid,"particles","size"]);this.velocitySimRT.material.uniforms.particleSize.value=Number(n)}if(((i=e.renderMaterial)==null?void 0:i.spriteRotation)!==void 0&&(this.material.uniforms.uRotation.value=e.renderMaterial.spriteRotation[0],this.material.uniforms.uRotationEnd.value=e.renderMaterial.spriteRotation[1]),e.shape!==void 0){let n=e.shape.size??this.system.data.shape.size,a=[Number(this.shared.getVariable(n[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(n[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(n[2],[this.uuid,"particles","shape_size_2"]))],s={...dm(this.system.data).shape,size:a};(r=this.emitterShape)==null||r.applyToShader(this.positionSimRT.material.uniforms,s)}if(e.gravity!==void 0&&(this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.velocitySimRT.material.uniforms.uGravity={value:this.worldGravity}),e.direction!==void 0){let n=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(n),this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis}e.randomRotation!==void 0&&(this.material.uniforms.uRandRotationFactor.value=e.randomRotation),e.randomScale!==void 0&&(this.material.uniforms.uRandScaleFactor.value=e.randomScale)}}updateForceFieldParameters(e){!this.velocitySimRT||(e.forceIntensity!==void 0&&(this.velocitySimRT.material.uniforms.uForceIntensity.value=e.forceIntensity),e.forceDambing!==void 0&&(this.velocitySimRT.material.uniforms.uForceDamping.value=e.forceDambing))}getDirectionAxis(e){let t=[Number(e[0])*kt.DEG2RAD,Number(e[1])*kt.DEG2RAD,Number(e[2])*kt.DEG2RAD],i=new Vn(t[0],t[1],t[2],"XYZ");return this.directionAxis.set(0,1,0).applyEuler(i).normalize(),this.velocitySimRT&&(this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis),this.directionAxis}shouldReInitGPUCompute(e){let{birthRatePerSec:t,rootObjectType:i,colliderEntityId:r,shape:n,emitTimeDuration:a,emitTimeCycle:s,life:o,directionMode:l,noiseType:c}=e;return t!==void 0||i!==void 0||r||r===null||s!==void 0||n!==void 0||o!==void 0||a!==void 0||l!==void 0||c!==void 0}init(e){this.dispose(),this.particlesAmount=this.getMaxParticlesAmount({birthRatePerSecond:e.birthRatePerSec,particleMaxLifeTime:e.life,loopDuration:e.emitTimeCycle==="infinity"?0:e.emitTimeDuration}),this.particlesAmount>1e5&&(console.warn("The maximum number of particles is limited to 100000."),this.particlesAmount=1e5),this.emitterShape=this.createShape(e.shape,this.particlesAmount);let t=setInterval(()=>{if(this.emitterShape)if(isNaN(this.emitterShape.positionsTexture.source.data.data[0])){this.init(e);return}else clearInterval(t)},100);if(!this.emitterShape)return;let i=new QMe(this.emitterShape.textureSize,this.emitterShape.textureSize,this.renderer),r=this.updateSimulationDefinition(e),n=i.addVariable("uCurrentPosition",r+aTe,this.emitterShape.positionsTexture),a=i.addVariable("uCurrentVelocity",r+uTe,this.emitterShape.directionsTexture),s=i.addVariable("uCurrentEmissionRate",yTe,nTe(this.emitterShape.textureSize));i.setVariableDependencies(n,[n,a,s]),i.setVariableDependencies(a,[n,a,s]),i.setVariableDependencies(s,[n,a,s]);let o=rTe({size:this.emitterShape.textureSize}),l={uOriginalPosition:{value:this.emitterShape.positionsTexture},uWorldOffset:{value:new H(0,0,0)},uWorldQuaternion:{value:new vi(0,0,0,1)},uTime:{value:0},uFPSRatio:{value:1},uMaxLifeTime:{value:e.life},uEmitterSize:{value:new H(Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"])))},particleSize:{value:0}};n.material.uniforms=l;let c=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(c),this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"]));let u=e.colliderEntityId&&this.system.getColliderData(e.colliderEntityId),d={uOriginalPosition:{value:this.emitterShape.positionsTexture},uDirections:{value:this.emitterShape.directionsTexture},uDirectionsAxis:{value:this.directionAxis},uWorldQuaternion:{value:new vi(0,0,0,1)},uColliderPos:{value:new H(0,0,0)},uColliderSize:{value:new H(0,0,0)},uForceIntensity:{value:u?u.forceIntensity:0},uForceDamping:{value:u?u.forceDambing:0},uColliderQuaternion:{value:new vi(0,0,0,1)},uColliderQuaternionInvert:{value:new vi(0,0,0,1)},particleSize:{value:0},uGravity:{value:this.worldGravity},uNoiseStrength:{value:this.noiseStrength},uNoiseScale:{value:this.noiseScale},uNoiseSeed:{value:e.noiseSeed},uRandomMassFactor:{value:e.randomMass},uBounce:{value:e.collisionBounce},uSpeed:{value:Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/f4}};a.material.uniforms=d;let h={uIndex:{value:o},uTime:{value:0},uLastIndexEmitted:{value:0},uParticlesToEmit:{value:0}};s.material.uniforms=h;let f=[Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"]))],p={...dm(this.system.data).shape,size:f};this.emitterShape.applyToShader(n.material.uniforms,p),i.init(),this.gpuCompute=i,this.positionSimRT=n,this.velocitySimRT=a,this.emissionRateSimRT=s,this.rootObject=this.createPrimaryEmitter(this.emitterShape.textureSize),this.add(this.rootObject),this.material.needsUpdate=!0}getDirectionFromVariable(e){let t=Number(this.shared.getVariable(e[0],[this.uuid,"particles","direction_x"])),i=Number(this.shared.getVariable(e[1],[this.uuid,"particles","direction_y"])),r=Number(this.shared.getVariable(e[2],[this.uuid,"particles","direction_z"]));return[t,i,r]}updateSimulationDefinition(e){if(this.simFeaturesDefinition.USE_COLLIDER=!1,this.simFeaturesDefinition.USE_ATTRACTOR=!1,this.simFeaturesDefinition.USE_VORTEX=!1,this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!1,this.simFeaturesDefinition.USE_BOX_COLLIDER=!1,this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!1,this.simFeaturesDefinition.USE_NORMALS=!1,this.simFeaturesDefinition.USE_CURL_NOISE=!1,this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!1,this.simFeaturesDefinition.USE_FBM_NOISE=!1,e.colliderEntityId&&this.system.colliderEntities.length>0){let i=this.system.getColliderData(e.colliderEntityId);switch(i==null?void 0:i.forceType){case"attractor":this.simFeaturesDefinition.USE_ATTRACTOR=!0;break;case"collider":this.simFeaturesDefinition.USE_COLLIDER=!0;break;case"vortex":this.simFeaturesDefinition.USE_VORTEX=!0;break}let r=i==null?void 0:i.colliderType;r==="sphere"&&(this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!0),r==="box"&&(this.simFeaturesDefinition.USE_BOX_COLLIDER=!0),(i==null?void 0:i.forceRange)==="helper"&&(this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!0)}e.directionMode==="normals"&&(this.simFeaturesDefinition.USE_NORMALS=!0),e.noiseType==="curl"&&(this.simFeaturesDefinition.USE_CURL_NOISE=!0),e.noiseType==="simplex"&&(this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!0),e.noiseType==="fbm"&&(this.simFeaturesDefinition.USE_FBM_NOISE=!0);let t="";for(let[i,r]of Object.entries(this.simFeaturesDefinition))r&&(t+=`#define ${i}
`);return t}createShape(e,t){this.emitterShape&&this.emitterShape.dispose();let i=new H(Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.size[2],[this.uuid,"particles","shape_size_2"])));if(e.type==="MeshEmitterShape"){let r=null;return this.system.context.scene.traverseEntity(n=>{n.uuid===e.fromMeshId&&(r=n)}),r?new h4(i,t,e.type,r):new h4(i,t,"SphereEmitterShape")}else return new h4(i,t,e.type)}createPrimaryEmitter(e){let t,i=e*e;return t=new xfe(new Pu(1,1,1),this.material,i),this.updateGeometryAttributes(t,e),this.material.needsUpdate=!0,t.onBeforeRender=()=>{this.applyWorldSpace()},t}getMaxParticlesAmount({birthRatePerSecond:e,particleMaxLifeTime:t,loopDuration:i=0}){return Math.ceil(e*(t+i))}dispose(){var e,t,i;!this.gpuCompute||((t=(e=this.rootObject)==null?void 0:e.parent)==null||t.remove(this.rootObject),this.gpuCompute.dispose(),this.material.nodeMaterialDispose(),(i=this.emitterShape)==null||i.dispose())}GoEmitSomeParticles(e,t){let i=e-this.lastEmitTime,r=1/t;if(i>=r){let n=Math.max(1,Math.floor(i/r));return this.lastEmitTime=e,this.emittedParticlesAmount+n>this.particlesAmount&&(this.emittedParticlesAmount=0),this.emittedParticlesAmount+=n,n}return 0}checkIfAllParticlesAreDead(){return this.lastEmitTime+this.system.data.life+1<this.globalTime}reset(){this.hasBeenReset=!0,this.lastEmitTime=0,this.emittedParticlesAmount=0,this.gpuCompute&&this.init(dm(this.system.data))}startEmitting(e){this.isEmitting=!0,this.hasBeenReset=!1,this.lastEmitTime=e}stopEmitting(){this.isEmitting=!1}},i2=class extends ms{constructor(e,t,i){super(e,t),this.type="ParticleSystem",this.geometry=new Kt,this.actualTime=0,this.currentLoopTime=0,this.started=!1,this.stopped=!1,this.timeoutId=void 0,this.isFrozen=!1,this.isIdle=!0,this.emitter=null,this.colliderEntities=[],this.renderer=null,this.isPreWarm=!1,this._hasOnAfterRenderBeenCalled=!1,this.onAfterRender=r=>{this._hasOnAfterRenderBeenCalled||(this._hasOnAfterRenderBeenCalled=!0,this.init(r))},this.context=i,this.data={...t,...dm(t)},this.geometry.setAttribute("position",new It([],3)),this.material=new Tu({colorWrite:!1}),this.frustumCulled=!1}init(e){this.renderer=e,this.emitter=new bTe(e,this),this.add(this.emitter),this.updateParticleState(this.data)}update(e){if(!this.isReady||!this.started||this.isFrozen||this.isIdle)return;this.actualTime+=e,this.stopped||(this.currentLoopTime+=e);let t=this.data.emitTimeCycle==="one_time";if((this.data.emitTimeCycle==="loop"||t)&&this.currentLoopTime>this.data.emitTimeDuration*1e3&&(this.stopped||(this.stop(),t||this.start(this.data.emitTimeDelay*1e3))),this.emitter&&this.started){let i=this.actualTime/1e3;this.emitter.update(i,e)}this.scale.set(1,1,1),this.updateMatrix()}isReady(){return!!this.emitter}hasCollider(e){return this.colliderEntities.some(t=>t.identity===e)}getColliderData(e){let t=this.colliderEntities.find(i=>i.identity===e);return t?t.data:null}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),Cr(e.path,["renderMaterial"])&&this.updateParticleState({renderMaterial:{...this.data.renderMaterial,...na.drop(e,1).props}}),Cr(e.path,["shape"])&&this.updateParticleState({shape:{...this.data.shape,...na.drop(e,1).props}})}updateState(e,t){super.updateState(e,t),this.updateParticleState(e)}updateParticleState(e){if(this.emitter){if(e.colliderEntityId!==void 0&&e.colliderEntityId!==null){let t=this.context.scene.find(e.colliderEntityId);this.colliderEntities=t?[t]:[]}e.colliderEntityId===null&&(this.colliderEntities=[]),this.emitter.updateState(e),e.emitTimeCycle&&this.started&&this.start()}}updateFromColliderEntity(e){!this.emitter||(this.emitter.updateForceFieldParameters(e),this.stop(),this.start())}start(e=0){var t;if(this.currentLoopTime=0,e){this.timeoutId=window.setTimeout(()=>{this.start(0)},e);return}this.started=!0,this.stopped=!1,this.isFrozen=!1,(t=this.emitter)==null||t.startEmitting(this.actualTime/1e3)}froze(){this.isFrozen=!0}unFroze(){this.isFrozen=!1}stop(){var e;this.stopped=!0,this.currentLoopTime=0,(e=this.emitter)==null||e.stopEmitting(),clearTimeout(this.timeoutId)}reset(){var e;this.started=!1,this.stopped=!1,(e=this.emitter)==null||e.reset()}wakeUp(){this.isIdle=!1}sleep(){this.isIdle=!0,this.reset()}};function wTe(){try{let e=window.location.href;if(e.includes("reducesubdiv=")){let t=e.indexOf("reducesubdiv=")+13;return parseInt(e.slice(t,t+1))}}catch{}}var p4=wTe();function xTe(e,t,i){var n;p4!==void 0&&(((n=t==null?void 0:t.geometry)==null?void 0:n.subdivisions)??0)>p4&&(console.log("reducing subdivisions",t.name,t.geometry.subdivisions),t.geometry.subdivisions=p4);let r;return t.geometry.type==="TextGeometry"?new lD(e,t,i):t.geometry.type==="InputGeometry"?new vD(e,t,i):(t.geometry.type==="SubdivGeometry"?r=new A1(e,t,i):t.geometry.type==="PathGeometry"?r=new mD(e,t,i):t.geometry.type==="VectorGeometry"?r=new KMe(e,t,i):t.geometry.type==="BooleanGeometry"?r=new $f(e,t,i):t.geometry.type==="UIGeometry"?r=new Na(e,t,i):r=new Ua(e,t,i),r)}function yD(e,t,i){return console.assert(t.type!==void 0),t.type==="Mesh"?xTe(e,t,i):t.type==="Empty"?new Zm(e,t):t.type==="Particle"?new i2(e,t,i):t.type==="ParticleCollider"?new e2(e,t,i):t.type==="Splat"?new Zm(e,t):t.type==="Bone"?new XMe(e,t):t.type==="Page"?new ta(e,t,i):t.type==="PointLight"?new YMe(e,t,i):t.type==="SpotLight"?new I$(e,t,i):t.type==="DirectionalLight"?new D$(e,t,i):t.type==="Component"||t.type==="Instance"?new qm(e,t,i):Wf.is(t.type)?new ja(e,t):(console.error(t),new Zm(e,t))}zd.createEntity=yD;function _Te(e,t,i){let r=yD(e.identity,t,i),n=e.children,a=e.attachedPaths,s=e.parent,o=e.component,l=e.instances,c=e.overrideData,u=e.uuid,d=e.stateSelection;e.dispose();for(let h of Object.keys(e))delete e[h];Object.setPrototypeOf(e,Object.getPrototypeOf(r));for(let h of Object.keys(r))e[h]=r[h];e.children=[...e.children,...n],e.attachedPaths=a,e.parent=s,e.component=o,e.instances=l,e.uuid=u,e.overrideData=c,e.updateState(e.data,i),d&&e.changeSelectedState(d,i),e.resetBBoxNeedsUpdate()}zd.changeEntityProptotype=_Te;zd.Cloner=hl;function STe(e,t,i,r){e.updateByOp(t,i,r,!1)}function NB(e,t){let i=!1,r=t.getLayersOfType("transmission"),n=t.getLayersOfType("outline");return n.length>0&&(e.layers.set(8),r.length>0&&e.layers.enable(3),i=!0,oD(e),sD(e)),r.length===0&&n.length===0&&e.layers.set(0),e instanceof e0&&e.needsAO&&e.layers.enable(5),i}function FB(e,t){if(!t.layers)return!1;let i=!1,r=t.getLayersOfType("transmission").filter(a=>a.data.visible),n=t.getLayersOfType("outline").filter(a=>a.data.visible);return r.length>0&&(e.layers.set(3),n.length>0&&e.layers.enable(8),i=!0),r.length===0&&n.length===0&&e.layers.set(0),e.needsAO&&e.layers.enable(5),i}function CTe(e){let t=!1;return e.traverseEntity(i=>{if(i instanceof e0)if(Array.isArray(i.material))for(let r=0;r<i.material.length;r++)NB(i,i.material[r])&&(t=!0);else NB(i,i.material)&&(t=!0)}),t}function ETe(e){let t=!1;return e.traverseEntity(i=>{if(i instanceof e0)if(Array.isArray(i.material))for(let r=0;r<i.material.length;r++)FB(i,i.material[r])&&(t=!0);else FB(i,i.material)&&(t=!0)}),t}var ATe=new Pj,MTe=new pt,TTe=new Vv;function HM(e,t,i,r=!1){let n=e.cloner;if(n)for(let a of n.children){let s=MTe.copy(a.matrixWorld).invert(),o=TTe.copy(t.ray).applyMatrix4(s),l=e.matrixWorld;o.applyMatrix4(l);let c=ATe;c.set(o.origin,o.direction),c.near=t.near,c.far=t.far;let u=c.intersectObject(e,!1);u.length>0&&i.push({...u[0],object:r?a:e})}}var PTe=class{constructor(){this._constraints=new Map}setConstraint(e,t){t===null?this._constraints.delete(e):this._constraints.set(e,t)}removeDependencies(e){this._constraints.delete(e)}applyConstraints(e){let t=new Set;this._constraints.forEach((i,r)=>{let n=[r,i],a=i;for(;this._constraints.has(a);){if(a=this._constraints.get(a),n.includes(a)){console.warn(`circular dependency detected: ${n.join(" -> ")}`);break}t.has(a)||n.push(a)}for(let s=n.length-2;s>=0;s--)if(!t.has(n[s])){let o=e.find(n[s]);o?o.applyPathSnapping(e):console.warn(`missing entity ${n[s]}`),t.add(n[s])}})}findDependency(e,t){let i=e;for(;this._constraints.has(i);)if(i=this._constraints.get(i),i===t)return!0;return!1}},DTe="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAETA2AAAGAIf39/f39/f38AYAABfwISAQNlbnYGbWVtb3J5AgMAgIAEAwQDAAECBzkDEV9fd2FzbV9jYWxsX2N0b3JzAAALc29ydEluZGV4ZXMAARNlbXNjcmlwdGVuX3Rsc19pbml0AAIK3gMDAwABC9IDAwF/BnwBfgJAIAdFDQAgAysDUCEMIAMrAzAhDSADKwMQIQ5BACEDRP///////+9/IQtEAAAAAAAAEAAhCgNAIAIgA0ECdGoCfyAOIAEgA0EMbGoiCCoCALuiIA0gCCoCBLuioCAMIAgqAgi7oqBEAAAAAAAAsECiIgmZRAAAAAAAAOBBYwRAIAmqDAELQYCAgIB4CzYCACAJIAsgCSALYxshCyAJIAogCSAKZBshCiADQQFqIgMgB0cNAAsgB0UNACAGuCAKIAuhoyEJQQAhAwNAAn8gCSACIANBAnRqIgEoAgC3IAuhoiIKmUQAAAAAAADgQWMEQCAKqgwBC0GAgICAeAshCCABIAg2AgAgBCAIQQJ0aiIBIAEoAgBBAWo2AgAgA0EBaiIDIAdHDQALCyAGQQJPBEAgBCgCACEIQQEhAwNAIAQgA0ECdGoiASABKAIAIAhqIgg2AgAgA0EBaiIDIAZHDQALCyAHQQFrIgGtIQ8DQCAEIAIgD6dBAnQiA2ooAgBBAnRqIgcgBygCAEEBayIHNgIAIAUgASAHa0ECdGogACADaigCADYCACAPUCEDIA9CAX0hDyADRQ0ACyAGBEAgBEEAIAZBAnT8CwALCwQAQQAL",Ud=class{};df(Ud,"DepthMapRange",65536),df(Ud,"MemoryPageSize",65536),df(Ud,"BytesPerFloat",4),df(Ud,"BytesPerInt",4);function ITe(e){let t,i,r,n,a,s,o,l,c,u,d,h,f,p,m,v;function y(T){let P=new Float64Array(u,s,16);for(let k=0;k<16;k++)P[k]=T[k];let D;if(r>1){t.exports.sortIndexes(n,a,c,s,o,l,h.DepthMapRange,r);let k=new Uint32Array(r);D=k.buffer,k.set(new Uint32Array(u,l,r))}else if(r===1){let k=new Uint32Array(r);k[0]=new Uint32Array(u,n,i)[0],D=k.buffer}else D=new ArrayBuffer(0);e.postMessage({sortDone:!0,indexesBuffer:D},[D])}function x(T,P,D){let k=new Float32Array(u,a,i*3);r=0;let L=new Uint32Array(u,n,i);for(let R=0;R<D.length-1;R++){let N=P[R],I=T[R].elements,B=N.filter(V=>V.enabled&&V.mode==="Include").map(V=>V.type==="Box"?_(V):A(V)),z=N.filter(V=>V.enabled&&V.mode==="Exclude").map(V=>V.type==="Box"?_(V):A(V));for(let V=D[R];V<D[R+1];V++){let W=f[V*3],G=f[V*3+1],q=f[V*3+2];if((B.length===0||w(W,G,q,B))&&(z.length===0||!w(W,G,q,z))){let ae=1/(I[3]*W+I[7]*G+I[11]*q+I[15]);k[r*3]=(I[0]*W+I[4]*G+I[8]*q+I[12])*ae,k[r*3+1]=(I[1]*W+I[5]*G+I[9]*q+I[13])*ae,k[r*3+2]=(I[2]*W+I[6]*G+I[10]*q+I[14])*ae,L[r]=V,r++}}}}function b(T,P){let D=[],k=P.filter(N=>N.enabled&&N.mode==="Include").map(N=>N.type==="Box"?_(N):A(N)),L=P.filter(N=>N.enabled&&N.mode==="Exclude").map(N=>N.type==="Box"?_(N):A(N)),R=T.length;for(let N=0;N<R;N+=3){let I=T[N],B=T[N+1],z=T[N+2];(k.length===0||w(I,B,z,k))&&(L.length===0||!w(I,B,z,L))||D.push(N/3)}return D}function w(T,P,D,k,L){return k.some(R=>{let N=S(T,P,D,R.invRotationMatrix,R.cropCenter);return Array.isArray(R)?C(N.x,N.y,N.z,R):M(N.x,N.y,N.z,R)})}function S(T,P,D,k,L){let R=T-L[0],N=P-L[1],I=D-L[2],B=1/(k[3]*R+k[7]*N+k[11]*I+k[15]);return{x:(k[0]*R+k[4]*N+k[8]*I+k[12])*B+L[0],y:(k[1]*R+k[5]*N+k[9]*I+k[13])*B+L[1],z:(k[2]*R+k[6]*N+k[10]*I+k[14])*B+L[2]}}function _(T){let P=T.cropSize[0]/2,D=T.cropSize[1]/2,k=T.cropSize[2]/2,L=[T.cropCenter[0]-P,T.cropCenter[1]-D,T.cropCenter[2]-k,T.cropCenter[0]+P,T.cropCenter[1]+D,T.cropCenter[2]+k],R=E(T.cropRotation);return Object.assign(L,{invRotationMatrix:R,cropCenter:T.cropCenter})}function E(T){let P=[],D=T[0]*Math.PI/180,k=T[1]*Math.PI/180,L=T[2]*Math.PI/180,R=Math.cos(D),N=Math.sin(D),I=Math.cos(k),B=Math.sin(k),z=Math.cos(L),V=Math.sin(L),W=R*z,G=R*V,q=N*z,ae=N*V;return P[0]=I*z,P[1]=-I*V,P[2]=B,P[4]=G+q*B,P[5]=W-ae*B,P[6]=-N*I,P[8]=ae-W*B,P[9]=q+G*B,P[10]=R*I,P[12]=0,P[13]=0,P[14]=0,P[3]=0,P[7]=0,P[11]=0,P[15]=1,P}function C(T,P,D,k){return T>=k[0]&&T<=k[3]&&P>=k[1]&&P<=k[4]&&D>=k[2]&&D<=k[5]}function A(T){let P=2/T.cropSize[0],D=2/T.cropSize[1],k=2/T.cropSize[2],L=E(T.cropRotation);return{invRadiusX:P,invRadiusY:D,invRadiusZ:k,cropCenter:T.cropCenter,invRotationMatrix:L}}function M(T,P,D,k){let L=(T-k.cropCenter[0])*k.invRadiusX,R=(P-k.cropCenter[1])*k.invRadiusY,N=(D-k.cropCenter[2])*k.invRadiusZ;return L*L+R*R+N*N<=1}e.onmessage=T=>{if(T.data.getCroppedIndexes){let P=new Uint32Array(b(new Float32Array(T.data.positions),T.data.crops)).buffer;e.postMessage({outOfBoundsIndexes:P},[P])}else if(T.data.positions)d=T.data.positions,f=new Float32Array(d),m=T.data.meshMatrixWorlds,v=T.data.cropsArray,p=T.data.meshIndexIntervals,x(m,v,p),e.postMessage({sortSetupComplete:!0});else if(T.data.sort||T.data.newMatrixWorlds||T.data.newCropsArray)(T.data.newMatrixWorlds||T.data.newCropsArray)&&(v=T.data.newCropsArray||v,m=T.data.newMatrixWorlds||m,x(m,v,p)),y(T.data.sort.view,T.data.sort.cameraPosition);else if(T.data.init){h=T.data.init.Constants,i=T.data.init.splatCount;let P=h.BytesPerInt,D=h.BytesPerFloat*3,k=new Uint8Array(T.data.init.sorterWasmBytes),L=P+D,R=i*L,N=i*h.BytesPerInt*2+h.DepthMapRange*h.BytesPerInt*2,I=h.MemoryPageSize*32,B=R+N+I,z=Math.floor(B/h.MemoryPageSize)+1,V={module:{},env:{memory:new WebAssembly.Memory({initial:z*2,maximum:z*3,shared:!0})}};WebAssembly.compile(k).then(W=>WebAssembly.instantiate(W,V)).then(W=>{t=W,n=0,a=i*P,s=a+i*D,c=s+16*h.BytesPerFloat*2,o=c+i*h.BytesPerInt,l=o+h.DepthMapRange*h.BytesPerInt,u=V.env.memory.buffer,e.postMessage({sortSetupPhase1Complete:!0})})}}}function OTe(e){let t=new Worker(URL.createObjectURL(new Blob(["(",ITe.toString(),")(self)"],{type:"application/javascript"}))),i=atob(DTe),r=new Uint8Array(i.length);for(let n=0;n<i.length;n++)r[n]=i.charCodeAt(n);return t.postMessage({init:{sorterWasmBytes:r.buffer,splatCount:e,Constants:{BytesPerFloat:Ud.BytesPerFloat,BytesPerInt:Ud.BytesPerInt,DepthMapRange:Ud.DepthMapRange,MemoryPageSize:Ud.MemoryPageSize}}}),t}var m4=function(){let e=new Float32Array(1),t=new Int32Array(e.buffer);return function(i){return e[0]=i,t[0]}}(),RTe=function(e,t,i,r){return e+(t<<8)+(i<<16)+(r<<24)},pw=new Pe;function zB(e){let t=!1;return e.scene.objects.traverse((i,r)=>{if(r.visible===!1)return!0;r.type==="Splat"&&(t=!0)}),t}var r2=class extends Yr{constructor(e,t,i,r,n=!1,a=1,s,o){super(i,r),this.splatCount=t,this.meshIndexIntervals=s,this.meshMatrixWorlds=o,this.splatBuffers=e,this.geometry=i,this.material=r,this.splatDataTextures=null,this.halfPrecisionCovariancesOnGPU=n,this.devicePixelRatio=a,this.resetLocalSplatDataAndTexturesFromSplatBuffer()}static buildMesh(e,t,i=!1,r=1,n,a){let s=r2.buildGeomtery(t),o=r2.buildMaterial(n);return new r2(e,t,s,o,i,r,n,a)}static buildMaterial(e){let t=`
            precision highp float;
            #include <common>

            attribute uint splatIndex;

            uniform highp sampler2D covariancesTexture;
            uniform highp usampler2D centersColorsTexture;
            uniform vec2 focal;
            uniform vec2 viewport;
            uniform vec2 basisViewport;
            uniform vec2 covariancesTextureSize;
            uniform vec2 centersColorsTextureSize;
						uniform highp sampler2D meshMatrixWorldsTexture;
						uniform uint meshIndexIntervals[257];
						uniform float orthoZoom;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;

            const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);
            const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));
            const uvec4 shift4 = uvec4(0, 8, 16, 24);
            vec4 uintToRGBAVec (uint u) {
               uvec4 urgba = mask4 & u;
               urgba = urgba >> shift4;
               vec4 rgba = vec4(urgba) * encodeNorm4;
               return rgba;
            }

            vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {
                vec2 samplerUV = vec2(0.0, 0.0);
                float d = float(splatIndex * uint(stride) + uint(offset)) / dimensions.x;
                samplerUV.y = float(floor(d)) / dimensions.y;
                samplerUV.x = fract(d);
                return samplerUV;
            }

            void main () {
                uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));
                vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));
                vColor = uintToRGBAVec(sampledCenterColor.r);

                vPosition = position.xy * 2.0;

								uint meshIndex;
								for (int i = 1; i < 257; i++) {
									if (splatIndex < meshIndexIntervals[i]) {
										meshIndex = uint(i - 1);
										break;
									}
								}

								float strideMulmeshIndex = float(4u*meshIndex);
								float meshMatrixWorldsTextureLength = float(256*4);

								mat4 modelMat = mat4(
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+0.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+1.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+2.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+3.0)/meshMatrixWorldsTextureLength, 0))
								);
								mat4 modelViewMat = viewMatrix * modelMat;
								vec4 viewCenter = modelViewMat * vec4(splatCenter, 1.0); 
                vec4 clipCenter = projectionMatrix * viewCenter;

                vec2 sampledCovarianceA = texture(covariancesTexture, getDataUV(3, 0, covariancesTextureSize)).rg;
                vec2 sampledCovarianceB = texture(covariancesTexture, getDataUV(3, 1, covariancesTextureSize)).rg;
                vec2 sampledCovarianceC = texture(covariancesTexture, getDataUV(3, 2, covariancesTextureSize)).rg;

                vec3 cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rg, sampledCovarianceB.r);
                vec3 cov3D_M22_M23_M33 = vec3(sampledCovarianceB.g, sampledCovarianceC.rg);

                // Compute the 2D covariance matrix from the upper-right portion of the 3D covariance matrix
                mat3 Vrk = mat3(
                    cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,
                    cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,
                    cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z
                );
                float s = 1.0 / (viewCenter.z * viewCenter.z);

                mat3 W = transpose(mat3(modelViewMat));
                mat3 T = orthoZoom > 0.0 ? W : W * mat3(
									focal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,
									0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,
									0., 0., 0.
								);
                mat3 cov2Dm = transpose(T) * Vrk * T;
                cov2Dm[0][0] += 0.3;
                cov2Dm[1][1] += 0.3;

                // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because
                // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],
                // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't
                // need cov2Dm[1][0] because it is a symetric matrix.
                vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);

                vec3 ndcCenter = clipCenter.xyz / clipCenter.w;

                // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix
                // so that we can determine the 2D basis for the splat. This is done using the method described
                // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html
                //
                // This is a different approach than in the original work at INRIA. In that work they compute the
                // max extents of the 2D covariance matrix in screen space to form an axis aligned bounding rectangle
                // which forms the geometry that is actually rasterized. They then use the inverse 2D covariance
                // matrix (called 'conic') to determine fragment opacity.
                float a = cov2Dv.x;
                float d = cov2Dv.z;
                float b = cov2Dv.y;
                float D = a * d - b * b;
                float trace = a + d;
                float traceOver2 = 0.5 * trace;
                float term2 = sqrt(trace * trace / 4.0 - D);
                float eigenValue1 = traceOver2 + term2;
								float eigenValue2 = max(traceOver2 - term2, 0.00); // prevent negative eigen value

                const float maxSplatSize = 1024.0;
                vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));
                // since the eigen vectors are orthogonal, we derive the second one from the first
                vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);
                vec2 basisVector1 = eigenVector1 * min(sqrt(2.0 * eigenValue1), maxSplatSize);
                vec2 basisVector2 = eigenVector2 * min(sqrt(2.0 * eigenValue2), maxSplatSize);

                vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) * basisViewport;

								if (orthoZoom > 0.0) {
									ndcOffset *= orthoZoom;
								}

                gl_Position = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            }`,i=`
            precision highp float;
            #include <common>

            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;
						layout(location = 1) out vec4 gVelocity; 

            void main () {
                // compute the negative squared distance from the center of the splat to the
                // current fragment in the splat's local space.
                float A = -dot(vPosition, vPosition);
                if (A < -4.0) discard;
                vec3 color = vColor.rgb;
                A = exp(A) * vColor.a;
                gl_FragColor = vec4(color.rgb, A);
								gVelocity = vec4(0.0); // so it is ignored by TAA
            }`,r={covariancesTexture:{type:"t",value:null},centersColorsTexture:{type:"t",value:null},meshIndexIntervals:{value:e},meshMatrixWorldsTexture:{type:"t",value:null},focal:{type:"v2",value:new Pe},viewport:{type:"v2",value:new Pe},basisViewport:{type:"v2",value:new Pe},debugColor:{type:"v3",value:new ii},covariancesTextureSize:{type:"v2",value:new Pe(1024,1024)},centersColorsTextureSize:{type:"v2",value:new Pe(1024,1024)},orthoZoom:{type:"f",value:-1}};return new er({uniforms:r,vertexShader:t,fragmentShader:i,transparent:!0,alphaTest:1,blending:If,depthTest:!0,depthWrite:!1,side:za})}static buildGeomtery(e){let t=new Kt;t.setIndex([0,1,2,0,2,3]);let i=new Float32Array(4*3),r=new ui(i,3);t.setAttribute("position",r),r.setXYZ(0,-1,-1,0),r.setXYZ(1,-1,1,0),r.setXYZ(2,1,1,0),r.setXYZ(3,1,-1,0),r.needsUpdate=!0;let n=new Mj().copy(t),a=new Uint32Array(e),s=new s1(a,1,!1);return s.setUsage(sle),n.setAttribute("splatIndex",s),n.instanceCount=e,n}resetLocalSplatDataAndTexturesFromSplatBuffer(){this.updateLocalSplatDataFromSplatBuffer(),this.allocateAndStoreLocalSplatDataInTextures()}updateLocalSplatDataFromSplatBuffer(){this.splatBuffers.forEach(r=>r.buildPreComputedBuffers()),this.covariances=new Float32Array(this.splatCount*6),this.colors=new Uint8Array(this.splatCount*4),this.centers=new Float32Array(this.splatCount*3);let e=0,t=0,i=0;for(let r of this.splatBuffers){let n=r.nsplats;this.colors.subarray(e,e+n*4).set(r.colorsA),e+=n*4,this.centers.subarray(t,t+n*3).set(r.decoded.xyz.denormDequant().data),t+=n*3,this.covariances.subarray(i,i+n*6).set(new Float32Array(r.precomputedCovarianceBufferData)),i+=n*6}}allocateAndStoreLocalSplatDataInTextures(){let e=this.splatCount,t=new Pe(4096,1024);for(;t.x*t.y*2<e*6;)t.y*=2;let i=new Pe(4096,1024);for(;i.x*i.y*4<e*4;)i.y*=2;let r,n;if(this.halfPrecisionCovariancesOnGPU){n=new Uint16Array(t.x*t.y*2);for(let u=0;u<this.covariances.length;u++)n[u]=Bpe.toHalfFloat(this.covariances[u]);r=new So(n,t.x,t.y,q2,Mu)}else n=new Float32Array(t.x*t.y*2),n.set(this.covariances),r=new So(n,t.x,t.y,q2,En);r.needsUpdate=!0,this.material.uniforms.covariancesTexture.value=r,this.material.uniforms.covariancesTextureSize.value.copy(t);let a=new Uint32Array(i.x*i.y*4);for(let u=0;u<e;u++){let d=u*4,h=u*3,f=u*4;a[f]=RTe(this.colors[d],this.colors[d+1],this.colors[d+2],this.colors[d+3]),a[f+1]=m4(this.centers[h]),a[f+2]=m4(this.centers[h+1]),a[f+3]=m4(this.centers[h+2])}let s=new So(a,i.x,i.y,WH,vu);s.internalFormat="RGBA32UI",s.needsUpdate=!0,this.material.uniforms.centersColorsTexture.value=s,this.material.uniforms.centersColorsTextureSize.value.copy(i);let o=256*4,l=new Float32Array(256*16);for(let u=0;u<this.meshMatrixWorlds.length;u++)l.set(this.meshMatrixWorlds[u].elements,u*16);let c=new So(l,o,1,ra,En);c.needsUpdate=!0,this.material.uniforms.meshMatrixWorldsTexture.value=c,this.material.uniformsNeedUpdate=!0,this.splatDataTextures={covariances:{data:n,texture:r,size:t},centerColors:{data:a,texture:s,size:i},meshMatrixWorlds:{data:l,texture:c}}}updateIndexes(e){let t=this.geometry;t.attributes.splatIndex.set(e),t.attributes.splatIndex.needsUpdate=!0,t.instanceCount=e.length}updateUniforms(e,t,i,r){this.splatCount>0&&(pw.set(e.x*this.devicePixelRatio,e.y*this.devicePixelRatio),this.material.uniforms.viewport.value.copy(pw),this.material.uniforms.basisViewport.value.set(2/pw.x,2/pw.y),this.material.uniforms.focal.value.set(t,i),this.material.uniforms.orthoZoom.value=r,this.material.uniformsNeedUpdate=!0)}getSplatDataTextures(){return this.splatDataTextures}getSplatCount(){return this.splatCount}getCenters(){return this.centers}getColors(){return this.colors}getCovariances(){return this.covariances}dispose(){this.geometry.dispose(),this.material.dispose(),this.splatDataTextures&&(this.splatDataTextures.covariances.texture.dispose(),this.splatDataTextures.centerColors.texture.dispose(),this.splatDataTextures.meshMatrixWorlds.texture.dispose()),this.removeFromParent()}},j$,kTe=new Promise(e=>{j$=e}),VB=!1,mw;function LTe(){if(VB)return;if(mw)return mw;async function e(){let t=await Ks(()=>import("./ro4O0smp.js"),[],import.meta.url);j$(t),VB=!0}return mw=e(),mw}var W$;kTe.then(e=>W$=e);var BTe=class{constructor(e={}){df(this,"updateView",function(){let t=new pt,i=[],r=new H(0,0,-1),n=new H(0,0,-1),a=new H,s=new H;return function(o=!1,l){let c=this.updateMatrixWorldsInWorkerIfNeeded(),u=this.cropsChanged();if(!o){n.set(0,0,-1).applyQuaternion(l.quaternion);let h=!1,f=!1;if(n.dot(r)<=.95&&(h=!0),s.copy(l.position).sub(a).length()>=1&&(f=!0),!h&&!f&&!c&&!u&&!this.needsInitialRender)return}this.needsInitialRender=!1,a.copy(l.position),r.copy(n),t.copy(l.matrixWorld).invert(),t.premultiply(this.dummyPerspectiveMatrix),i[0]=l.position.x,i[1]=l.position.y,i[2]=l.position.z;let d={sort:{view:t.elements,cameraPosition:i,splatRenderCount:this.splatRenderCount,splatSortCount:this.splatRenderCount},...c?{newMatrixWorlds:this.meshMatrixWorlds}:{},...u?{newCropsArray:this.cropsArray}:{}};this.sortRunning?this.queuedMessage=d:(this.queuedMessage=null,this.sortRunning=!0,this.sortWorker.postMessage(d))}}()),this.scene=e.scene,this.currentPage=null,this.devicePixelRatio=window.devicePixelRatio,this.sortWorker=null,this.splatRenderCount=0,this.splatSortCount=0,this.splatMesh=null,this.sortRunning=!1,this.meshMatrixWorlds=null,this.meshMatrixWorldsOld=null,this.cropsArray=null,this.splatEntries=null,this.queuedMessage=null,this.needsInitialRender=!0,this.dummyPerspectiveMatrix=new pt().makePerspective(-1,1,-1,1,.1,1e3)}updateSplatMeshUniforms(e,t){let i=new Pe;this.splatMesh!==null&&this.splatMesh.getSplatCount()>0&&(e.getSize(i),this.cameraFocalLengthX=t.projectionMatrix.elements[0]*this.devicePixelRatio*i.x*.45,this.cameraFocalLengthY=t.projectionMatrix.elements[5]*this.devicePixelRatio*i.y*.45,this.splatMesh.updateUniforms(i,this.cameraFocalLengthX,this.cameraFocalLengthY,t.isPerspectiveCamera?-1:t.zoom*this.devicePixelRatio))}loadSplat(e={}){this.activePage=this.scene.activePage,e.position&&(e.position=new H().fromArray(e.position)),e.orientation&&(e.orientation=new mi().fromArray(e.orientation)),e.halfPrecisionCovariances=!!e.halfPrecisionCovariances;let t=[];if(this.splatEntries=t,this.activePage.traverseVisibleEntity(a=>{a.data.type==="Splat"&&t.push(a)}),this.splatMesh&&this.splatMesh.dispose(),t.length===0)return this.splatMesh=null,!1;this.meshMatrixWorlds=t.map(a=>a.matrixWorld),this.meshMatrixWorldsOld=t.map(a=>a.matrixWorld.clone()),this.cropsArray=t.map(a=>a.data.crops.map(s=>s.data));let i=t.map(a=>new W$.GSplineBuffer(new Uint8Array(a.data.buffer).buffer)),r=0,n=[0];for(let a of i)r+=a.getSplatCount(),n.push(r);return this.setupSplatMesh(i,r,e.position,e.orientation,e.halfPrecisionCovariances,this.devicePixelRatio,n,this.meshMatrixWorlds),this.setupSortWorker(r),!0}updateMatrixWorldsInWorkerIfNeeded(){let e=this.splatDataTextures.meshMatrixWorlds.data;for(let t=0;t<this.meshMatrixWorlds.length;t++)e.set(this.meshMatrixWorlds[t].elements,t*16);return this.splatDataTextures.meshMatrixWorlds.texture.needsUpdate=!0,this.meshMatrixWorlds.every((t,i)=>t.equals(this.meshMatrixWorldsOld[i]))?!1:(this.meshMatrixWorldsOld=this.meshMatrixWorlds.map(t=>t.clone()),!0)}cropsChanged(){let e=!1;return this.splatEntries.forEach((t,i)=>{var r;t.data.crops.forEach((n,a)=>{this.cropsArray[i][a]===void 0?(e=!0,this.cropsArray[i][a]=n.data):Object.entries(n.data).forEach(([s,o])=>{var l;Array.isArray(o)&&o.some((c,u)=>c!==this.cropsArray[i][a][s][u])?(e=!0,this.cropsArray[i][a][s]=o):o!==((l=this.cropsArray[i][a])==null?void 0:l[s])&&(e=!0,this.cropsArray[i][a][s]=o)})}),t.data.crops.length!==((r=this.cropsArray[i])==null?void 0:r.length)&&(this.cropsArray[i].length=t.data.crops.length,e=!0)}),e}setupSplatMesh(e,t,i=new H,r=new mi,n=!1,a=1,s,o){this.splatMesh=r2.buildMesh(e,t,n,a,s,o),this.splatMesh.position.copy(i),this.splatMesh.quaternion.copy(r),this.splatMesh.frustumCulled=!1,this.splatMesh.renderOrder=99999,this.splatRenderCount=t,this.splatMesh.onBeforeRender=(l,c,u)=>this.update(l,u)}setupSortWorker(e){this.sortWorker=OTe(e),this.sortWorker.onmessage=t=>{var i;t.data.sortDone?(this.sortRunning=!1,(i=this.splatMesh)==null||i.updateIndexes(new Uint32Array(t.data.indexesBuffer)),this.lastSortTime=t.data.sortTime,this.queuedMessage&&(this.sortWorker.postMessage(this.queuedMessage),this.queuedMessage=null)):t.data.sortCanceled?this.sortRunning=!1:t.data.sortSetupPhase1Complete?this.sortWorker.postMessage({positions:this.splatMesh.getCenters().buffer,meshMatrixWorlds:this.splatMesh.meshMatrixWorlds,meshIndexIntervals:this.splatMesh.meshIndexIntervals,cropsArray:this.cropsArray}):t.data.sortSetupComplete&&(this.splatDataTextures=this.splatMesh.getSplatDataTextures(),this.scene.activePage.add(this.splatMesh),this.needsInitialRender=!0)}}update(e,t){this.splatMesh!==null&&(this.updateSplatMeshUniforms(e,t),this.updateView(!1,t))}getSplatMesh(){return this.splatMesh}},jM=new Tu;jM.wireframe=!0;var UB=new H,bD=class extends hc{constructor(e,t){super(),this.data=e,this.sharedAssets=t,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.splatViewer=null,this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new PTe,this.invisibleObjects=new Zm("jflkdsafjasdifjaslk",{...YA.defaultData,visible:!1,name:"buildin invisible"}),this.needsRecomputeInstances=!1,this.init(e,t),this.matrixAutoUpdate=!1,this.errorPage=new ta("fdasfa",{...bv.defaultData,name:""},{shared:t,scene:this})}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=ETe(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=CTe(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(e){let t=e.identity.join("-"),i=this.entityIdentityToEntity[t];i&&(e.uuid=i.uuid),this.entityIdentityToEntity[t]=e,this.entityByUuid[e.uuid]=e}markPenumbraSizeDirty(){for(let e of this.children)e instanceof ta&&(e.penumbraSizeArrayCache=null)}findInstance(e){return this.entityIdentityToEntity[e.join("-")]}get bgColor(){return this.activePage.bgColor}get postprocessing(){return this.activePage.data.postprocessing}getWithSortKey(e){let t=this.find(e);if(t===void 0)return;let i=[],r=t;for(;r!==this;){let n=r;r=r.parent;let a=r.children.indexOf(n);i.splice(0,0,a)}return{entity:t,sortKey:i}}getAllSorted(e){let t=[];for(let i of e){let r=this.getWithSortKey(i.id);r!==void 0&&t.push(r)}return t.sort((i,r)=>vW(i.sortKey,r.sortKey)),t.map(i=>i.entity)}nonExistOrDescendantOf(e,t){let i=this.find(e);if(i===void 0)return!0;for(;i;){if(i.uuid===t)return!0;i=i.parent}return!1}find(e){if(this.activePage&&this.activePage.personalCamera.parent){if(e==="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera")return this.activePage.personalCamera;if(e===Xv)return this.activePage.personalCamera}if(e===""||e===void 0)return;let t=this.entityByUuid[e];return t===void 0?this.getObjectByProperty("uuid",e):t}find2D(e){for(let t of this.children)if(t instanceof ta&&t.uiScene){let i=t.uiScene.find(e);if(i)return i}}findScene2DfromObject2D(e){for(let t of this.children)if(t instanceof ta&&t.uiScene&&t.uiScene.find(e))return t.uiScene}find2DInUIObjects(e){let t;return this.traverseEntity(i=>{t===void 0&&i instanceof Na&&(t=i.uiCanvas.find(e))}),t}traverse2D(e){for(let t of this.children)t instanceof ta&&t.uiScene&&t.uiScene.traverse(e)}debugEnsureEntity(e){let t=this.find(e);if(t){if(Array.isArray(t.identity)&&this.findInstance(t.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(e){this.toExpandCloner.add(e)}addPendingUpdateCloner(e){this.toUpdateCloner.add(e)}markToExpandCloner(e){this.toExpandCloner.add(e),e.traverseEntityAncestors(t=>{this.toExpandCloner.add(t)})}doPendingExpandCloner(){this.toExpandCloner.forEach(e=>{e.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(e=>{var t;(t=e.cloner)==null||t.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(e){this.pendingCommands.push(e)}applyPendingCommands(){this.pendingCommands.forEach(e=>e()),this.pendingCommands.length=0}updateByLibOp(e,t){e.path.length===1&&e.path[0]==="components"&&e.type===1&&this.createChildrenObjects([{...e.data.asset,id:e.id}],this.invisibleObjects,t)}updateTreeByOp(e,t){var i;if(e.path.length===0&&e.type===7){let r=e.parent===null?this:this.find(e.parent);if(r===void 0)throw new Error("unexpected");let n=this.createObject(e.id,e.data,e.children,r,e.localIndex,t);n.updateVisible(this),n.resetBBoxNeedsUpdate(),ll(n)&&wu(n.parent)&&(n.invalidateUpstreamBooleanData(),n.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(r),this.markNeedsRecomputeInstancesForChildren(n),this.markToExpandCloner(n),this.markPenumbraSizeDirty(),n.updatePathSnapping()}else if(e.path.length===0&&e.type===8){let r=this.find(e.id);if(r===void 0)throw new Error("unexpected");this.markToExpandCloner(r),r.resetBBoxNeedsUpdate(),this.unregisterObject(r);let n=r.parent;this.markNeedsRecomputeInstancesForAncessors(n),this.markNeedsRecomputeInstancesForChildren(r),this.markPenumbraSizeDirty(),r.parent.remove(r),wu(r.parent)&&(r.parent.invalidateUpstreamBooleanData(),r.parent.invalidateDownstreamBooleanData().recomputeBoolean()),ll(r)&&(r.freeBooleanPointer(),n instanceof $f&&n.invalidateDownstreamBooleanData().recomputeBoolean()),r instanceof mD&&r.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(r),this.pathConstraints.removeDependencies(r.uuid),r.updatePathSnapping()}else if(e.path.length===0&&e.type===9){let r=this.find(e.id);if(r===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(r);let n=r.parent;this.markNeedsRecomputeInstancesForAncessors(n),(i=r.cloner)==null||i.resetOnMove(),this.markToExpandCloner(r);let a=e.parent===null?this:this.find(e.parent);if(a===void 0)throw new Error("unexpected");a.add(r),this.markNeedsRecomputeInstancesForAncessors(a),this.markToExpandCloner(r),r.invalidateClonerTransform(r),r.updateVisible(this),r.resetBBoxNeedsUpdate(),this.markPenumbraSizeDirty();let s=e.localIndex;a.children.splice(s,0,a.children.pop()),ll(r)&&(r.invalidateUpstreamBooleanData(),wu(r.parent)?r.parent.invalidateDownstreamBooleanData().recomputeBoolean():n instanceof $f&&n.invalidateDownstreamBooleanData().recomputeBoolean()),r.updatePathSnapping()}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}get playPage(){return this.find(this.data.publish.playPage)??this.errorPage}updatePage(e){var t;this.activePage&&this.activePage.onDeactive(),this.activePage=this.errorPage;for(let i of this.children)i instanceof ta&&(i.visible=i.uuid===e,i.visible&&(this.activePage=i,this.activePage.onActive(this)));this.activePage!==((t=this.splatViewer)==null?void 0:t.activePage)&&this.reloadSplats()}updateEntityByOp(e,t,i,r){if(t.type===0){if(("overrides"in t.props||"component"in t.props)&&this.markNeedsRecomputeInstances(),"visible"in t.props&&this.markPenumbraSizeDirty(),t.path.includes("overrides")&&"states"in t.props){let{rest:a}=t.props;t={...t,props:a},this.markNeedsRecomputeInstances()}t.path[0]==="pathSnapping"&&t.props.pathId!==void 0&&this.pathConstraints.setConstraint(e,t.props.pathId)}let n=this.find(e);if(n)try{STe(n,t,i,{scene:this,shared:r}),n instanceof Ua&&n.updateGeometryGroupsIfNeeded()}catch(a){console.error(a)}}updateEntity2DByOp(e,t,i,r,n,a=[]){e.updateEntityByOp(t,i,r,n),this.traverseEntity(s=>{(s instanceof Na||s instanceof ta)&&(a.includes(s.frameId??"")||s.frameId===t)&&s.updateEntity2DByOp(t,i,r,n)})}get activeCamera(){return this.activePage.activeCamera}switchActiveCamera(e){this.activePage.switchActiveCamera(e)}isInvisibleObjects(e){return e===this.invisibleObjects||e.hasAnccestor(this.invisibleObjects)}init(e,t){let i=Object.entries(t.data.lib.components).map((r,n)=>({data:r[1].asset.data,children:r[1].asset.children,id:r[0],fi:n}));this.invisibleObjects.updateState(this.invisibleObjects.data,{scene:this,shared:t}),this.add(this.invisibleObjects),this.createChildrenObjects(i,this.invisibleObjects,t),this.createChildrenObjects(e.objects,this,t),this.updatePage(e.publish.playPage),this.activePage.switchToPlayCamera(),this.expandInstances(t,!0),this.traverseEntity(r=>{r instanceof ja&&r.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(e){e.traverseEntity(t=>{(t.data.type==="Component"||t.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(e){ji.is(e)&&(e.data.type==="Component"&&this.markNeedsRecomputeInstances(),e.traverseAncestors(t=>{ji.is(t)&&t.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(e,t,i,r,n,a,s){if(e){let o=r.find(e);o&&o!==r&&n.forInstancesRec(l=>{l.data=v1(l.data,c=>{let u=c.events.data(s.id),d=l.goUp(a);if(d){let h=[...mW(d.identity),e].join("-"),f=this.entityIdentityToEntity[h];if(f){let p=f.uuid,m=Un.zoom(u,t);m[i]=p}else console.warn("cannot find instance")}}).data})}}rewriteActions(e,t,i,r,n,a){e.forEach(s=>{s.data.type==="Transition"?this.relativeizeInner(s.data.object,[...t,s.id],"object",i,r,n,a):s.data.type==="Animation"?this.relativeizeInner(s.data.object,[...t,s.id],"object",i,r,n,a):s.data.type==="Conditional"&&(this.rewriteActions(s.data.ifActions,[...t,s.id,"ifActions"],i,r,n,a),this.rewriteActions(s.data.elseActions,[...t,s.id,"elseActions"],i,r,n,a))})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(e=>{if(e instanceof qm&&typeof e.identity=="string"&&e.data.type==="Component")return e.traverseEntity((t,i)=>{t.data.events.forEach(r=>{if(r.data.type==="GameControl"){let n=!1;if(t.forInstancesRec(a=>{a.data=v1(a.data,s=>{a.isInstanceRoot||(s.events.delete(r.id),n=!0)}).data}),n===!1)for(let a of Dx.list)this.rewriteActions(r.data.gameActions[a],["gameActions",a],e,t,i,r)}else r.data.type==="Conditional"?(r.data.condition.type==="Distance"?(this.relativeizeInner(r.data.condition.fromObject,["condition"],"fromObject",e,t,i,r),this.relativeizeInner(r.data.condition.toObject,["condition"],"toObject",e,t,i,r)):r.data.condition.type==="State"?this.relativeizeInner(r.data.condition.object,["condition"],"object",e,t,i,r):r.data.condition.type==="Comparison"&&(r.data.condition.lOperand.type==="Property"&&this.relativeizeInner(r.data.condition.lOperand.value[0],["condition","lOperand","value"],0,e,t,i,r),r.data.condition.rOperand.type==="Property"&&this.relativeizeInner(r.data.condition.rOperand.value[0],["condition","rOperand","value"],0,e,t,i,r)),this.rewriteActions(r.data.inActions,["inActions"],e,t,i,r),this.rewriteActions(r.data.outActions,["outActions"],e,t,i,r)):"actions"in r.data&&this.rewriteActions(r.data.actions,["actions"],e,t,i,r)})}),!0})}expandInstances(e,t,i){let r=new Set;this.traverseEntity(n=>{if(n instanceof qm&&n.isInstanceRoot)return n.expandInstanceChildren({scene:this,shared:e,pendingDeletes:r}),t||n.resetBBoxNeedsUpdate(),i&&n.traverseEntity(a=>{i.addClip(a)}),!0});for(let n of r)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(n),gD(n)}recomputeInstances(e,t){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(i=>{i instanceof qm&&i.isInstanceRoot&&(i.component=void 0)}),this.expandInstances(e,!1,t))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(e){e.traverseEntity(t=>{let i=typeof t.identity=="string"?t.identity:t.identity.join("-");this.entityIdentityToEntity[i]===t&&(delete this.entityByUuid[t.uuid],delete this.entityIdentityToEntity[i]),t.dispose()})}clearScene(){for(let e of this.children)ji.is(e)&&e.disposeRecursively();this.children.length=0}resetAfterClear(e,t){this.init(e,t)}raycast(e){return this.raycast1(e,!1)}raycast1(e,t){let i=[],r=n=>{for(let a of n.children){let s=a.cloner;if(ji.is(a)&&!a.raycastLock&&(a.visible||s!=null&&s.object.data.visible))if(t===!0&&a.isInstanceRoot){let o=[];if(e.intersectObject(a,!0,o),o.length){let l=o[0];l.object=a,l.point.applyMatrix4(l.object.matrixWorld);let c=a.matrixWorld.clone().invert();l.point.applyMatrix4(c),i.push(l)}}else(ll(a)||IM(a)&&this.enableHelpers&&a.objectHelper.visible)&&(e.intersectObject(a,!1,i),HM(a,e,i)),r(a)}};return r(this.activePage),i}raycastWithClones(e){let t=[],i=r=>{for(let n of r.children){let a=n.cloner;ji.is(n)&&(n.visible||a!=null&&a.object.data.visible)&&((ll(n)||IM(n)&&this.enableHelpers&&n.objectHelper.visible)&&(e.intersectObject(n,!1,t),HM(n,e,t,!0)),i(n))}};return i(this),t}forEachEntity(e){for(let t of this.children)ji.is(t)&&e(t)}traverseConcreteEntity(e){for(let t of this.children)ji.is(t)&&t.isConcreteEntity&&t.traverseEntity(e)}traverseEntity(e){for(let t of this.children)ji.is(t)&&t.traverseEntity(e)}updateFont(e,t){this.traverseEntity(i=>{if(i instanceof Ua&&i.data.type==="Mesh"&&(i.data.geometry.type==="TextGeometry"||i.data.geometry.type==="InputGeometry")&&i.data.geometry.font===e){let r=i.geometry,n=i.data.geometry;r.updateFont(e,t).then(()=>{r.update(n);let a=i.invalidateDownstreamBooleanData();wu(a)&&a.recomputeBoolean()})}})}traverseObject(e){for(let t of this.children)C1.is(t)&&t.traverseObject(e)}traverseVisibleEntity(e){for(let t of this.children)ji.is(t)&&t.visible&&t.traverseVisibleEntity(e)}dispose(){this.clearScene()}createChildrenObjects(e,t,i){let r=0;for(let n of e)this.createObject(n.id,n.data,n.children,t,r,i),r+=1}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createObject(e,t,i,r,n,a){var l;let s={scene:this,shared:a},o=yD(e,t,s);return o&&(this.entityByUuid[e]=o,r.add(o),r.children.splice(n,0,r.children.pop()),i.length>0&&(o.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(i,o,a)),o.updateState(t,s),o instanceof Ua&&o.updateGeometryGroupsIfNeeded(),o.updateVisible(this),o.cloner&&this.toExpandCloner.add(o),(l=t.pathSnapping)!=null&&l.pathId&&this.pathConstraints.setConstraint(e,t.pathSnapping.pathId)),t.type==="Empty"&&t.animations&&o.traverseEntity(c=>{let u=c.dataPatched;if(c instanceof Ua&&u.bones&&u.boneInverses){let d=u.bones.map(p=>this.find(p)),h=u.boneInverses.map(p=>new pt().fromArray(p)),f=new nP(d,h);c.bind(f,c.bindMatrix)}else c.matrixAutoUpdate=!0}),o}getCenter(e){let t=[];for(let r=0,n=e.length;r<n;++r){let{id:a,recursive:s}=e[r],o=this.find(a),l=s?o.recursiveBBox:o.singleBBox;t.push(...l.vertices)}let i=new gn;return i.setFromPoints(t),i.getCenter(UB),UB}copyMatrixWorld(e,t){if(e===null){t.identity();return}let i=this.find(e);i?t.copy(i.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){var r;if(e===null){t.identity();return}let i=(r=this.find(e))==null?void 0:r.parent;i?t.copy(i.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity(t=>{if(t instanceof ms)if(Array.isArray(t.material))for(let i=0;i<t.material.length;i++)t.material[i]instanceof lh&&e(t.material[i]);else t.material instanceof lh&&e(t.material)})}updateViewPlaneSize(e,t,i=!1){this.traverseConcreteEntity(r=>{r instanceof ja&&r.setViewplaneSize(e,t,i)})}initializeSplatViewer(){this.splatViewer=new BTe({scene:this}),this.reloadSplats()}reloadSplats(){var e;(e=this.splatViewer)==null||e.loadSplat()}},n2=(e,t)=>{let i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)},NTe=(e,t)=>{let i=t.x-e.x,r=t.y-e.y;return zTe(Math.atan2(r,i))},FTe=(e,t,i)=>{let r={x:0,y:0};return i=WM(i),r.x=e.x-t*Math.cos(i),r.y=e.y-t*Math.sin(i),r},WM=e=>e*(Math.PI/180),zTe=e=>e*(180/Math.PI),VTe=e=>isNaN(e.buttons)?e.pressure!==0:e.buttons!==0,v4=new Map,HB=e=>{v4.has(e)&&clearTimeout(v4.get(e)),v4.set(e,setTimeout(e,100))},Zx=(e,t,i)=>{let r=t.split(/[ ,]+/g),n;for(let a=0;a<r.length;a+=1)n=r[a],e.addEventListener?e.addEventListener(n,i,!1):e.attachEvent&&e.attachEvent(n,i)},jB=(e,t,i)=>{let r=t.split(/[ ,]+/g),n;for(let a=0;a<r.length;a+=1)n=r[a],e.removeEventListener?e.removeEventListener(n,i):e.detachEvent&&e.detachEvent(n,i)},G$=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),WB=()=>{if(typeof window>"u")return;let e=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:e,y:t}},GM=(e,t)=>{t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},wD=(e,t,i)=>{let r=$$(e);for(let n in r)if(r.hasOwnProperty(n))if(typeof t=="string")r[n]=t+" "+i;else{let a="";for(let s=0,o=t.length;s<o;s+=1)a+=t[s]+" "+i+", ";r[n]=a.slice(0,-2)}return r},UTe=(e,t)=>{let i=$$(e);for(let r in i)i.hasOwnProperty(r)&&(i[r]=t);return i},$$=e=>{let t={};return t[e]="",["webkit","Moz","o"].forEach(function(i){t[i+e.charAt(0).toUpperCase()+e.slice(1)]=""}),t},g4=(e,t)=>{for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},HTe=(e,t)=>{let i={};for(let r in e)e.hasOwnProperty(r)&&t.hasOwnProperty(r)?i[r]=t[r]:e.hasOwnProperty(r)&&(i[r]=e[r]);return i},$M=(e,t)=>{if(e.length)for(let i=0,r=e.length;i<r;i+=1)t(e[i]);else t(e)},jTe=(e,t,i)=>({x:Math.min(Math.max(e.x,t.x-i),t.x+i),y:Math.min(Math.max(e.y,t.y-i),t.y+i)});typeof window<"u"&&(Z$="ontouchstart"in window,q$=!!window.PointerEvent,Y$=!!window.MSPointerEvent);var Z$,q$,Y$,W0={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},Em,M1={};q$?Em=W0.pointer:Y$?Em=W0.MSPointer:Z$?(Em=W0.touch,M1=W0.mouse):Em=W0.mouse;function up(){}up.prototype.on=function(e,t){var i=this,r=e.split(/[ ,]+/g),n;i._handlers_=i._handlers_||{};for(var a=0;a<r.length;a+=1)n=r[a],i._handlers_[n]=i._handlers_[n]||[],i._handlers_[n].push(t);return i};up.prototype.off=function(e,t){var i=this;return i._handlers_=i._handlers_||{},e===void 0?i._handlers_={}:t===void 0?i._handlers_[e]=null:i._handlers_[e]&&i._handlers_[e].indexOf(t)>=0&&i._handlers_[e].splice(i._handlers_[e].indexOf(t),1),i};up.prototype.trigger=function(e,t){var i=this,r=e.split(/[ ,]+/g),n;i._handlers_=i._handlers_||{};for(var a=0;a<r.length;a+=1)n=r[a],i._handlers_[n]&&i._handlers_[n].length&&i._handlers_[n].forEach(function(s){s.call(i,{type:n,target:i},t)})};up.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=HTe(t.options,e))};up.prototype.bindEvt=function(e,t){var i=this;return i._domHandlers_=i._domHandlers_||{},i._domHandlers_[t]=function(){typeof i["on"+t]=="function"?i["on"+t].apply(i,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},Zx(e,Em[t],i._domHandlers_[t]),M1[t]&&Zx(e,M1[t],i._domHandlers_[t]),i};up.prototype.unbindEvt=function(e,t){var i=this;return i._domHandlers_=i._domHandlers_||{},jB(e,Em[t],i._domHandlers_[t]),M1[t]&&jB(e,M1[t],i._domHandlers_[t]),delete i._domHandlers_[t],this};var xD=up;function qn(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=qn.id,qn.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}qn.prototype=new xD;qn.constructor=qn;qn.id=0;qn.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};qn.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=UTe("borderRadius","50%"),i=wD("transition","opacity",e),r={};return r.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},r.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},r.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},g4(r.el,i),this.options.shape==="circle"&&g4(r.back,t),g4(r.front,t),this.applyStyles(r),this};qn.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var i in e[t])this.ui[t].style[i]=e[t][i];return this};qn.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};qn.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};qn.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};qn.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout(function(){t.ui.el.style.opacity=1},0),t.showTimeout=setTimeout(function(){t.trigger("shown",t.instance),typeof e=="function"&&e.call(this)},t.options.fadeTime)),t};qn.prototype.hide=function(e){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout(function(){var i=t.options.mode==="dynamic"?"none":"block";t.ui.el.style.display=i,typeof e=="function"&&e.call(t),t.trigger("hidden",t.instance)},t.options.fadeTime),t.options.restJoystick){let i=t.options.restJoystick,r={};r.x=i===!0||i.x!==!1?0:t.instance.frontPosition.x,r.y=i===!0||i.y!==!1?0:t.instance.frontPosition.y,t.setPosition(e,r)}return t};qn.prototype.setPosition=function(e,t){var i=this;i.frontPosition={x:t.x,y:t.y};var r=i.options.fadeTime+"ms",n={};n.front=wD("transition",["top","left"],r);var a={front:{}};a.front={left:i.frontPosition.x+"px",top:i.frontPosition.y+"px"},i.applyStyles(n),i.applyStyles(a),i.restTimeout=setTimeout(function(){typeof e=="function"&&e.call(i),i.restCallback()},i.options.fadeTime)};qn.prototype.restCallback=function(){var e=this,t={};t.front=wD("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)};qn.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};qn.prototype.computeDirection=function(e){var t=e.angle.radian,i=Math.PI/4,r=Math.PI/2,n,a,s;if(t>i&&t<i*3&&!e.lockX?n="up":t>-i&&t<=i&&!e.lockY?n="left":t>-i*3&&t<=-i&&!e.lockX?n="down":e.lockY||(n="right"),e.lockY||(t>-r&&t<r?a="left":a="right"),e.lockX||(t>0?s="up":s="down"),e.force>this.options.threshold){var o={},l;for(l in this.direction)this.direction.hasOwnProperty(l)&&(o[l]=this.direction[l]);var c={};this.direction={x:a,y:s,angle:n},e.direction=this.direction;for(l in o)o[l]===this.direction[l]&&(c[l]=!0);if(c.x&&c.y&&c.angle)return e;(!c.x||!c.y)&&this.trigger("plain",e),c.x||this.trigger("plain:"+a,e),c.y||this.trigger("plain:"+s,e),c.angle||this.trigger("dir dir:"+n,e)}else this.resetDirection();return e};var WTe=qn;function yn(e,t){var i=this;i.nipples=[],i.idles=[],i.actives=[],i.ids=[],i.pressureIntervals={},i.manager=e,i.id=yn.id,yn.id+=1,i.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},i.config(t),(i.options.mode==="static"||i.options.mode==="semi")&&(i.options.multitouch=!1),i.options.multitouch||(i.options.maxNumberOfNipples=1);let r=getComputedStyle(i.options.zone.parentElement);return r&&r.display==="flex"&&(i.parentIsFlex=!0),i.updateBox(),i.prepareNipples(),i.bindings(),i.begin(),i.nipples}yn.prototype=new xD;yn.constructor=yn;yn.id=0;yn.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(i){if(i===void 0)return t[0];for(var r=0,n=t.length;r<n;r+=1)if(t[r].identifier===i)return t[r];return!1}};yn.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"};yn.prototype.begin=function(){var e=this,t=e.options;if(t.mode==="static"){var i=e.createNipple(t.position,e.manager.getIdentifier());i.add(),e.idles.push(i)}};yn.prototype.createNipple=function(e,t){var i=this,r=i.manager.scroll,n={},a=i.options,s={x:i.parentIsFlex?r.x:r.x+i.box.left,y:i.parentIsFlex?r.y:r.y+i.box.top};if(e.x&&e.y)n={x:e.x-s.x,y:e.y-s.y};else if(e.top||e.right||e.bottom||e.left){var o=document.createElement("DIV");o.style.display="hidden",o.style.top=e.top,o.style.right=e.right,o.style.bottom=e.bottom,o.style.left=e.left,o.style.position="absolute",a.zone.appendChild(o);var l=o.getBoundingClientRect();a.zone.removeChild(o),n=e,e={x:l.left+r.x,y:l.top+r.y}}var c=new WTe(i,{color:a.color,size:a.size,threshold:a.threshold,fadeTime:a.fadeTime,dataOnly:a.dataOnly,restJoystick:a.restJoystick,restOpacity:a.restOpacity,mode:a.mode,identifier:t,position:e,zone:a.zone,frontPosition:{x:0,y:0},shape:a.shape});return a.dataOnly||(GM(c.ui.el,n),GM(c.ui.front,c.frontPosition)),i.nipples.push(c),i.trigger("added "+c.identifier+":added",c),i.manager.trigger("added "+c.identifier+":added",c),i.bindNipple(c),c};yn.prototype.updateBox=function(){var e=this;e.box=e.options.zone.getBoundingClientRect()};yn.prototype.bindNipple=function(e){var t=this,i,r=function(n,a){i=n.type+" "+a.id+":"+n.type,t.trigger(i,a)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",r),e.on("dir:up dir:right dir:down dir:left",r),e.on("plain:up plain:right plain:down plain:left",r)};yn.prototype.pressureFn=function(e,t,i){var r=this,n=0;clearInterval(r.pressureIntervals[i]),r.pressureIntervals[i]=setInterval((function(){var a=e.force||e.pressure||e.webkitForce||0;a!==n&&(t.trigger("pressure",a),r.trigger("pressure "+t.identifier+":pressure",a),n=a)}).bind(r),100)};yn.prototype.onstart=function(e){var t=this,i=t.options,r=e;e=G$(e),t.updateBox();var n=function(a){t.actives.length<i.maxNumberOfNipples?t.processOnStart(a):r.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach(function(s){if(Object.values(r.touches).findIndex(function(l){return l.identifier===s})<0){var o=[e[0]];o.identifier=s,t.processOnEnd(o)}}),t.actives.length<i.maxNumberOfNipples&&t.processOnStart(a))};return $M(e,n),t.manager.bindDocument(),!1};yn.prototype.processOnStart=function(e){var t=this,i=t.options,r,n=t.manager.getIdentifier(e),a=e.force||e.pressure||e.webkitForce||0,s={x:e.pageX,y:e.pageY},o=t.getOrCreate(n,s);o.identifier!==n&&t.manager.removeIdentifier(o.identifier),o.identifier=n;var l=function(u){u.trigger("start",u),t.trigger("start "+u.id+":start",u),u.show(),a>0&&t.pressureFn(e,u,u.identifier),t.processOnMove(e)};if((r=t.idles.indexOf(o))>=0&&t.idles.splice(r,1),t.actives.push(o),t.ids.push(o.identifier),i.mode!=="semi")l(o);else{var c=n2(s,o.position);if(c<=i.catchDistance)l(o);else{o.destroy(),t.processOnStart(e);return}}return o};yn.prototype.getOrCreate=function(e,t){var i=this,r=i.options,n;return/(semi|static)/.test(r.mode)?(n=i.idles[0],n?(i.idles.splice(0,1),n):r.mode==="semi"?i.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1)):(n=i.createNipple(t,e),n)};yn.prototype.processOnMove=function(e){var t=this,i=t.options,r=t.manager.getIdentifier(e),n=t.nipples.get(r),a=t.manager.scroll;if(!VTe(e)){this.processOnEnd(e);return}if(!n){console.error("Found zombie joystick with ID "+r),t.manager.removeIdentifier(r);return}if(i.dynamicPage){var s=n.el.getBoundingClientRect();n.position={x:a.x+s.left,y:a.y+s.top}}n.identifier=r;var o=n.options.size/2,l={x:e.pageX,y:e.pageY};i.lockX&&(l.y=n.position.y),i.lockY&&(l.x=n.position.x);var c=n2(l,n.position),u=NTe(l,n.position),d=WM(u),h=c/o,f={distance:c,position:l},p,m;if(n.options.shape==="circle"?(p=Math.min(c,o),m=FTe(n.position,p,u)):(m=jTe(l,n.position,o),p=n2(m,n.position)),i.follow){if(c>o){let b=l.x-m.x,w=l.y-m.y;n.position.x+=b,n.position.y+=w,n.el.style.top=n.position.y-(t.box.top+a.y)+"px",n.el.style.left=n.position.x-(t.box.left+a.x)+"px",c=n2(l,n.position)}}else l=m,c=p;var v=l.x-n.position.x,y=l.y-n.position.y;n.frontPosition={x:v,y},i.dataOnly||GM(n.ui.front,n.frontPosition);var x={identifier:n.identifier,position:l,force:h,pressure:e.force||e.pressure||e.webkitForce||0,distance:c,angle:{radian:d,degree:u},vector:{x:v/o,y:-y/o},raw:f,instance:n,lockX:i.lockX,lockY:i.lockY};x=n.computeDirection(x),x.angle={radian:WM(180-u),degree:180-u},n.trigger("move",x),t.trigger("move "+n.id+":move",x)};yn.prototype.processOnEnd=function(e){var t=this,i=t.options,r=t.manager.getIdentifier(e),n=t.nipples.get(r),a=t.manager.removeIdentifier(n.identifier);!n||(i.dataOnly||n.hide(function(){i.mode==="dynamic"&&(n.trigger("removed",n),t.trigger("removed "+n.id+":removed",n),t.manager.trigger("removed "+n.id+":removed",n),n.destroy())}),clearInterval(t.pressureIntervals[n.identifier]),n.resetDirection(),n.trigger("end",n),t.trigger("end "+n.id+":end",n),t.ids.indexOf(n.identifier)>=0&&t.ids.splice(t.ids.indexOf(n.identifier),1),t.actives.indexOf(n)>=0&&t.actives.splice(t.actives.indexOf(n),1),/(semi|static)/.test(i.mode)?t.idles.push(n):t.nipples.indexOf(n)>=0&&t.nipples.splice(t.nipples.indexOf(n),1),t.manager.unbindDocument(),/(semi|static)/.test(i.mode)&&(t.manager.ids[a.id]=a.identifier))};yn.prototype.onDestroyed=function(e,t){var i=this;i.nipples.indexOf(t)>=0&&i.nipples.splice(i.nipples.indexOf(t),1),i.actives.indexOf(t)>=0&&i.actives.splice(i.actives.indexOf(t),1),i.idles.indexOf(t)>=0&&i.idles.splice(i.idles.indexOf(t),1),i.ids.indexOf(t.identifier)>=0&&i.ids.splice(i.ids.indexOf(t.identifier),1),i.manager.removeIdentifier(t.identifier),i.manager.unbindDocument()};yn.prototype.destroy=function(){var e=this;e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(i){i.destroy()});for(var t in e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var GTe=yn;function ca(e){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=WB(),t.config(e),t.prepareCollections();var i=function(){var n;t.collections.forEach(function(a){a.forEach(function(s){n=s.el.getBoundingClientRect(),s.position={x:t.scroll.x+n.left,y:t.scroll.y+n.top}})})};if(typeof window>"u")return t.collections;Zx(window,"resize",function(){HB(i)});var r=function(){t.scroll=WB()};return Zx(window,"scroll",function(){HB(r)}),t.collections}ca.prototype=new xD;ca.constructor=ca;ca.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var i;return e.collections.every(function(r){return i=r.get(t),!i}),i}};ca.prototype.create=function(e){return this.createCollection(e)};ca.prototype.createCollection=function(e){var t=this,i=new GTe(t,e);return t.bindCollection(i),t.collections.push(i),i};ca.prototype.bindCollection=function(e){var t=this,i,r=function(n,a){i=n.type+" "+a.id+":"+n.type,t.trigger(i,a)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",r),e.on("dir:up dir:right dir:down dir:left",r),e.on("plain:up plain:right plain:down plain:left",r)};ca.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)};ca.prototype.unbindDocument=function(e){var t=this;(!Object.keys(t.ids).length||e===!0)&&(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)};ca.prototype.getIdentifier=function(e){var t;return e?(t=e.identifier===void 0?e.pointerId:e.identifier,t===void 0&&(t=this.latest||0)):t=this.index,this.ids[t]===void 0&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]};ca.prototype.removeIdentifier=function(e){var t={};for(var i in this.ids)if(this.ids[i]===e){t.id=i,t.identifier=this.ids[i],delete this.ids[i];break}return t};ca.prototype.onmove=function(e){var t=this;return t.onAny("move",e),!1};ca.prototype.onend=function(e){var t=this;return t.onAny("end",e),!1};ca.prototype.oncancel=function(e){var t=this;return t.onAny("end",e),!1};ca.prototype.onAny=function(e,t){var i=this,r,n="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=G$(t);var a=function(o,l,c){c.ids.indexOf(l)>=0&&(c[n](o),o._found_=!0)},s=function(o){r=i.getIdentifier(o),$M(i.collections,a.bind(null,o,r)),o._found_||i.removeIdentifier(r)};return $M(t,s),!1};ca.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(t){t.destroy()}),e.off()};ca.prototype.onDestroyed=function(e,t){var i=this;if(i.collections.indexOf(t)<0)return!1;i.collections.splice(i.collections.indexOf(t),1)};var $Te=ca,GB=new $Te,ZTe={create:function(e){return GB.create(e)},factory:GB},K$=new Map,Ng=new Map,wf=class{constructor(e,t,i,r){this.data=t;let{audio:n,volume:a,delay:s,loop:o}=t;if(!n)throw new Error("Missing property");let l=typeof n=="string"?r.getAudio(n).src:n.data;this.audioPlayer=new fg({src:l,volume:a,delay:s,loop:o}),Ng.has(i.uuid)?Ng.get(i.uuid).push(this):Ng.set(i.uuid,[this]),K$.set(e,this)}playByToggle(){this.data.toggle==="stop"?this.audioPlayer.status==="playing"?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.status==="playing"?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},ZM=class{constructor(e){this.data=e}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(e){let t=K$.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):t.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(e){let t=Ng.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(i=>i.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(i=>i.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let e=[...Ng.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(i=>{i.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(i=>{i.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},X$=class{constructor(e,t,i,r,n){if(this.data=t,this.shared=r,this.condition=n,t.interaction==="play")this.interaction=new wf(e,t,i,r);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new ZM(t);else throw new Error("Missing property")}dispatchBasic(){if(Fr(this.shared,this.condition)===!1)return!1;this.interaction instanceof wf?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(Fr(this.shared,this.condition)===!1)return!1;this.interaction instanceof wf?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(e){if(Fr(this.shared,this.condition)===!1)return!1;this.interaction instanceof wf&&(e==="start"?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}},Q$=class{constructor(e,t,i,r){this.data=e,this.page=t,this.shared=i,this.condition=r,this.delay=0,this.emission=e.emission,e.delay!==void 0&&(this.delay=e.delay),this.particleSystem=this.page.scene.find(this.data.emitterObjectId)}toggleEmitting(){this.particleSystem.started&&!this.particleSystem.stopped?this.stop(this.delay):this.start(this.delay)}toggleFroze(){this.particleSystem.started&&!this.particleSystem.isFrozen?this.freeze(this.delay):this.unFreeze(this.delay)}start(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.start(0),this.clearDelay()},e);return}this.particleSystem.start()}stop(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.stop(0),this.clearDelay()},e);return}this.particleSystem.stop()}freeze(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.freeze(0),this.clearDelay()},e);return}this.particleSystem.froze()}unFreeze(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.unFreeze(0),this.clearDelay()},e);return}this.particleSystem.unFroze()}reset(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.reset(0),this.clearDelay()},e);return}this.particleSystem.reset()}reverseFromCurrent(){switch(this.emission){case"emitToggle":this.toggleEmitting();break;case"pauseToggle":this.toggleFroze();break}}dispatchBasic(){if(Fr(this.shared,this.condition)===!1||!this.particleSystem)return!1;switch(this.emission){case"start":this.start(this.delay);break;case"emitToggle":this.toggleEmitting();break;case"pause":this.freeze(this.delay);break;case"pauseToggle":this.toggleFroze();break;case"stop":this.stop(this.delay);break;case"reset":this.reset(this.delay);break}}dispatchConditional(){if(Fr(this.shared,this.condition)===!1||!this.particleSystem)return!1;switch(this.emission){case"start":this.start(this.delay);break;case"stop":this.stop(this.delay);break;case"reset":this.reset(this.delay);break}}dispatchGameControl(e){if(Fr(this.shared,this.condition)===!1||!this.particleSystem)return!1;e==="start"?this.start(this.delay):this.stop(this.delay)}dispose(){!this.particleSystem||(this.particleSystem.reset(),this.clearDelay())}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}},qTe="text/plain",YTe="us-ascii",$B=(e,t)=>t.some(i=>i instanceof RegExp?i.test(e):i===e),KTe=(e,{stripHash:t})=>{let i=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!i)throw new Error(`Invalid URL: ${e}`);let{type:r,data:n,hash:a}=i.groups,s=r.split(";");a=t?"":a;let o=!1;s[s.length-1]==="base64"&&(s.pop(),o=!0);let l=(s.shift()||"").toLowerCase(),c=[...s.map(u=>{let[d,h=""]=u.split("=").map(f=>f.trim());return d==="charset"&&(h=h.toLowerCase(),h===YTe)?"":`${d}${h?`=${h}`:""}`}).filter(Boolean)];return o&&c.push("base64"),(c.length>0||l&&l!==qTe)&&c.unshift(l),`data:${c.join(";")},${o?n.trim():n}${a?`#${a}`:""}`};function XTe(e,t){if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return KTe(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let i=e.startsWith("//");!i&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let r=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&r.protocol==="https:"&&(r.protocol="http:"),t.forceHttps&&r.protocol==="http:"&&(r.protocol="https:"),t.stripAuthentication&&(r.username="",r.password=""),t.stripHash?r.hash="":t.stripTextFragment&&(r.hash=r.hash.replace(/#?:~:text.*?$/i,"")),r.pathname){let a=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,s=0,o="";for(;;){let c=a.exec(r.pathname);if(!c)break;let u=c[0],d=c.index,h=r.pathname.slice(s,d);o+=h.replace(/\/{2,}/g,"/"),o+=u,s=d+u.length}let l=r.pathname.slice(s,r.pathname.length);o+=l.replace(/\/{2,}/g,"/"),r.pathname=o}if(r.pathname)try{r.pathname=decodeURI(r.pathname)}catch{}if(t.removeDirectoryIndex===!0&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let a=r.pathname.split("/"),s=a[a.length-1];$B(s,t.removeDirectoryIndex)&&(a=a.slice(0,-1),r.pathname=a.slice(1).join("/")+"/")}if(r.hostname&&(r.hostname=r.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(r.hostname)&&(r.hostname=r.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let a of[...r.searchParams.keys()])$B(a,t.removeQueryParameters)&&r.searchParams.delete(a);if(t.removeQueryParameters===!0&&(r.search=""),t.sortQueryParameters){r.searchParams.sort();try{r.search=decodeURIComponent(r.search)}catch{}}t.removeTrailingSlash&&(r.pathname=r.pathname.replace(/\/$/,""));let n=e;return e=r.toString(),!t.removeSingleSlash&&r.pathname==="/"&&!n.endsWith("/")&&r.hash===""&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||r.pathname==="/")&&r.hash===""&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),i&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var QTe=class{constructor({url:e,context:t},i,r,n){if(this.controlsManager=i,this.shared=r,this.condition=n,!e)throw new Error("Missing property");this.url=e.startsWith("mailto:")?e:XTe(e,{removeTrailingSlash:!1,removeSingleSlash:!1,stripWWW:!1}),this.context=t??"tab"}dispatch(){var e;if(Fr(this.shared,this.condition)===!1)return!1;cy?window.location.assign(this.url):(this.context==="tab"||pW&&this.context==="none"?window.open(this.url,"_blank"):this.context==="window"?window.open(this.url,"_blank",`width=${window.innerWidth}, height=${window.innerHeight}`):window.open(this.url,"_parent"),(e=this.controlsManager.orbitControls)==null||e.onPointerUp(ai[0]),h2e())}},J$=class{constructor(e,t,i,r,n){this.data=e,this.page=t,this.controlsManager=i,this.shared=r,this.condition=n,this.timeoutIdQueue=[],this.dispatchInner=()=>{this.objects.forEach(this.destroyCallback)},this.destroyCallback=a=>{var c,u;this.timeoutIdQueue.shift();let s=this.page.scene.find(a);if(s===void 0)return;let o=this.controlsManager.sharedGameControlGlobals.rapierWorld,l=o?(c=s.dataPatched.physics)==null?void 0:c.fusedBody:!0;if(s.cloner){for(let d of s.cloner.children)l?(d.playModeVisible=!1,d.rigidBody&&((u=s.dataPatched.physics)==null?void 0:u.rigidBody)==="positioned"&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(d.rigidBody.collider(0).handle),o.removeRigidBody(d.rigidBody),d.rigidBody=void 0),d.bvhGeometry&&(d.bvhGeometry=void 0)):this.clone===void 0||this.clone===d?(d.playModeVisible=!1,d.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(d.rigidBody.collider(0).handle),o.removeRigidBody(d.rigidBody),d.rigidBody=void 0)):d.playModeVisible===void 0&&(d.playModeVisible=!0);(l||this.clone===void 0||this.clone===!1)&&(s.visible=!1,s.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(s.rigidBody.collider(0).handle),o.removeRigidBody(s.rigidBody),s.rigidBody=void 0),s.bvhGeometry&&(s.bvhGeometry=void 0))}else s.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(s.rigidBody.collider(0).handle),o.removeRigidBody(s.rigidBody),s.rigidBody=void 0),s.bvhGeometry&&(s.bvhGeometry=void 0),s.visible=!1;o===void 0?this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(d=>d.bvhGeometry!==void 0):this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(d=>d.rigidBody!==void 0),s.destroyedInAction=!0,this.controlsManager.requestRender()},this.objects=[...e.objects]}dispatch(e){if(Fr(this.shared,this.condition)===!1)return!1;this.clone=e,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()}dispatchFromStart(){if(Fr(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))}dispose(){this.timeoutIdQueue.forEach(e=>window.clearTimeout(e))}},eZ=class{constructor(e,t,i,r,n){this.data=e,this.page=t,this.shared=i,this.eventManager=r,this.condition=n,this.shared=i}dispatch(){if(Fr(this.shared,this.condition)===!1)return!1;clearTimeout(this.timeoutId),delete this.timeoutId,this.timeoutId=window.setTimeout(()=>{var e;this.shared.reset(this.shared.data,!0),OD(this.page,this.shared,!0),this.eventManager.reset(),(e=this.eventManager.controlsManager.gameControl)==null||e.reset(!0),this.page.switchToPlayCamera(),this.eventManager.controlsManager.requestRender(),delete this.timeoutId},(this.data.delay??0)*1e3)}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},tZ={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},_D={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},JTe=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],qx={CSS:{},springs:{}};function fl(e,t,i){return Math.min(Math.max(e,t),i)}function Fg(e,t){return e.indexOf(t)>-1}function y4(e,t){return e.apply(null,t)}var ci={arr:function(e){return Array.isArray(e)},obj:function(e){return Fg(Object.prototype.toString.call(e),"Object")},pth:function(e){return ci.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||ci.svg(e))},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return ci.hex(e)||ci.rgb(e)||ci.hsl(e)},key:function(e){return!tZ.hasOwnProperty(e)&&!_D.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function iZ(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(i){return parseFloat(i)}):[]}function rZ(e,t){var i=iZ(e),r=fl(ci.und(i[0])?1:i[0],.1,100),n=fl(ci.und(i[1])?100:i[1],.1,100),a=fl(ci.und(i[2])?10:i[2],.1,100),s=fl(ci.und(i[3])?0:i[3],.1,100),o=Math.sqrt(n/r),l=a/(2*Math.sqrt(n*r)),c=l<1?o*Math.sqrt(1-l*l):0,u=1,d=l<1?(l*o+-s)/c:-s+o;function h(p){var m=t?t*p/1e3:p;return l<1?m=Math.exp(-m*l*o)*(u*Math.cos(c*m)+d*Math.sin(c*m)):m=(u+d*m)*Math.exp(-m*o),p===0||p===1?p:1-m}function f(){var p=qx.springs[e];if(p)return p;for(var m=1/6,v=0,y=0;;)if(v+=m,h(v)===1){if(y++,y>=16)break}else y=0;var x=v*m*1e3;return qx.springs[e]=x,x}return t?h:f}function e5e(e){return e===void 0&&(e=10),function(t){return Math.ceil(fl(t,1e-6,1)*e)*(1/e)}}var t5e=function(){var e=11,t=1/(e-1);function i(u,d){return 1-3*d+3*u}function r(u,d){return 3*d-6*u}function n(u){return 3*u}function a(u,d,h){return((i(d,h)*u+r(d,h))*u+n(d))*u}function s(u,d,h){return 3*i(d,h)*u*u+2*r(d,h)*u+n(d)}function o(u,d,h,f,p){var m,v,y=0;do v=d+(h-d)/2,m=a(v,f,p)-u,m>0?h=v:d=v;while(Math.abs(m)>1e-7&&++y<10);return v}function l(u,d,h,f){for(var p=0;p<4;++p){var m=s(d,h,f);if(m===0)return d;var v=a(d,h,f)-u;d-=v/m}return d}function c(u,d,h,f){if(!(0<=u&&u<=1&&0<=h&&h<=1))return;var p=new Float32Array(e);if(u!==d||h!==f)for(var m=0;m<e;++m)p[m]=a(m*t,u,h);function v(y){for(var x=0,b=1,w=e-1;b!==w&&p[b]<=y;++b)x+=t;--b;var S=(y-p[b])/(p[b+1]-p[b]),_=x+S*t,E=s(_,u,h);return E>=.001?l(y,_,u,h):E===0?_:o(y,x,x+t,u,h)}return function(y){return u===d&&h===f||y===0||y===1?y:a(v(y),d,f)}}return c}(),nZ=function(){var e={linear:function(){return function(r){return r}}},t={Sine:function(){return function(r){return 1-Math.cos(r*Math.PI/2)}},Circ:function(){return function(r){return 1-Math.sqrt(1-r*r)}},Back:function(){return function(r){return r*r*(3*r-2)}},Bounce:function(){return function(r){for(var n,a=4;r<((n=Math.pow(2,--a))-1)/11;);return 1/Math.pow(4,3-a)-7.5625*Math.pow((n*3-2)/22-r,2)}},Elastic:function(r,n){r===void 0&&(r=1),n===void 0&&(n=.5);var a=fl(r,1,10),s=fl(n,.1,2);return function(o){return o===0||o===1?o:-a*Math.pow(2,10*(o-1))*Math.sin((o-1-s/(Math.PI*2)*Math.asin(1/a))*(Math.PI*2)/s)}}},i=["Quad","Cubic","Quart","Quint","Expo"];return i.forEach(function(r,n){t[r]=function(){return function(a){return Math.pow(a,n+2)}}}),Object.keys(t).forEach(function(r){var n=t[r];e["easeIn"+r]=n,e["easeOut"+r]=function(a,s){return function(o){return 1-n(a,s)(1-o)}},e["easeInOut"+r]=function(a,s){return function(o){return o<.5?n(a,s)(o*2)/2:1-n(a,s)(o*-2+2)/2}}}),e}();function SD(e,t){if(ci.fnc(e))return e;var i=e.split("(")[0],r=nZ[i],n=iZ(e);switch(i){case"spring":return rZ(e,t);case"cubicBezier":return y4(t5e,n);case"steps":return y4(e5e,n);default:return y4(r,n)}}function aZ(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function pS(e,t){for(var i=e.length,r=arguments.length>=2?arguments[1]:void 0,n=[],a=0;a<i;a++)if(a in e){var s=e[a];t.call(r,s,a,e)&&n.push(s)}return n}function mS(e){return e.reduce(function(t,i){return t.concat(ci.arr(i)?mS(i):i)},[])}function ZB(e){return ci.arr(e)?e:(ci.str(e)&&(e=aZ(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function CD(e,t){return e.some(function(i){return i===t})}function ED(e){var t={};for(var i in e)t[i]=e[i];return t}function qM(e,t){var i=ED(e);for(var r in e)i[r]=t.hasOwnProperty(r)?t[r]:e[r];return i}function vS(e,t){var i=ED(e);for(var r in t)i[r]=ci.und(e[r])?t[r]:e[r];return i}function i5e(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function r5e(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=e.replace(t,function(o,l,c,u){return l+l+c+c+u+u}),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i),n=parseInt(r[1],16),a=parseInt(r[2],16),s=parseInt(r[3],16);return"rgba("+n+","+a+","+s+",1)"}function n5e(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),i=parseInt(t[1],10)/360,r=parseInt(t[2],10)/100,n=parseInt(t[3],10)/100,a=t[4]||1;function s(h,f,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?h+(f-h)*6*p:p<1/2?f:p<2/3?h+(f-h)*(2/3-p)*6:h}var o,l,c;if(r==0)o=l=c=n;else{var u=n<.5?n*(1+r):n+r-n*r,d=2*n-u;o=s(d,u,i+1/3),l=s(d,u,i),c=s(d,u,i-1/3)}return"rgba("+o*255+","+l*255+","+c*255+","+a+")"}function a5e(e){if(ci.rgb(e))return i5e(e);if(ci.hex(e))return r5e(e);if(ci.hsl(e))return n5e(e)}function Cu(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function s5e(e){if(Fg(e,"translate")||e==="perspective")return"px";if(Fg(e,"rotate")||Fg(e,"skew"))return"deg"}function YM(e,t){return ci.fnc(e)?e(t.target,t.id,t.total):e}function cc(e,t){return e.getAttribute(t)}function AD(e,t,i){var r=Cu(t);if(CD([i,"deg","rad","turn"],r))return t;var n=qx.CSS[t+i];if(!ci.und(n))return n;var a=100,s=document.createElement(e.tagName),o=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;o.appendChild(s),s.style.position="absolute",s.style.width=a+i;var l=a/s.offsetWidth;o.removeChild(s);var c=l*parseFloat(t);return qx.CSS[t+i]=c,c}function sZ(e,t,i){if(t in e.style){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=e.style[t]||getComputedStyle(e).getPropertyValue(r)||"0";return i?AD(e,n,i):n}}function MD(e,t){if(ci.dom(e)&&!ci.inp(e)&&(cc(e,t)||ci.svg(e)&&e[t]))return"attribute";if(ci.dom(e)&&CD(JTe,t))return"transform";if(ci.dom(e)&&t!=="transform"&&sZ(e,t))return"css";if(e[t]!=null)return"object"}function oZ(e){if(ci.dom(e)){for(var t=e.style.transform||"",i=/(\w+)\(([^)]*)\)/g,r=new Map,n;n=i.exec(t);)r.set(n[1],n[2]);return r}}function o5e(e,t,i,r){var n=Fg(t,"scale")?1:0+s5e(t),a=oZ(e).get(t)||n;return i&&(i.transforms.list.set(t,a),i.transforms.last=t),r?AD(e,a,r):a}function TD(e,t,i,r){switch(MD(e,t)){case"transform":return o5e(e,t,r,i);case"css":return sZ(e,t,i);case"attribute":return cc(e,t);default:return e[t]||0}}function PD(e,t){var i=/^(\*=|\+=|-=)/.exec(e);if(!i)return e;var r=Cu(e)||0,n=parseFloat(t),a=parseFloat(e.replace(i[0],""));switch(i[0][0]){case"+":return n+a+r;case"-":return n-a+r;case"*":return n*a+r}}function lZ(e,t){if(ci.col(e))return a5e(e);if(/\s/g.test(e))return e;var i=Cu(e),r=i?e.substr(0,e.length-i.length):e;return t?r+t:r}function DD(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function l5e(e){return Math.PI*2*cc(e,"r")}function c5e(e){return cc(e,"width")*2+cc(e,"height")*2}function u5e(e){return DD({x:cc(e,"x1"),y:cc(e,"y1")},{x:cc(e,"x2"),y:cc(e,"y2")})}function cZ(e){for(var t=e.points,i=0,r,n=0;n<t.numberOfItems;n++){var a=t.getItem(n);n>0&&(i+=DD(r,a)),r=a}return i}function d5e(e){var t=e.points;return cZ(e)+DD(t.getItem(t.numberOfItems-1),t.getItem(0))}function uZ(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return l5e(e);case"rect":return c5e(e);case"line":return u5e(e);case"polyline":return cZ(e);case"polygon":return d5e(e)}}function h5e(e){var t=uZ(e);return e.setAttribute("stroke-dasharray",t),t}function f5e(e){for(var t=e.parentNode;ci.svg(t)&&ci.svg(t.parentNode);)t=t.parentNode;return t}function dZ(e,t){var i=t||{},r=i.el||f5e(e),n=r.getBoundingClientRect(),a=cc(r,"viewBox"),s=n.width,o=n.height,l=i.viewBox||(a?a.split(" "):[0,0,s,o]);return{el:r,viewBox:l,x:l[0]/1,y:l[1]/1,w:s/l[2],h:o/l[3]}}function p5e(e,t){var i=ci.str(e)?aZ(e)[0]:e,r=t||100;return function(n){return{property:n,el:i,svg:dZ(i),totalLength:uZ(i)*(r/100)}}}function m5e(e,t){function i(o){o===void 0&&(o=0);var l=t+o>=1?t+o:0;return e.el.getPointAtLength(l)}var r=dZ(e.el,e.svg),n=i(),a=i(-1),s=i(1);switch(e.property){case"x":return(n.x-r.x)*r.w;case"y":return(n.y-r.y)*r.h;case"angle":return Math.atan2(s.y-a.y,s.x-a.x)*180/Math.PI}}function qB(e,t){var i=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=lZ(ci.pth(e)?e.totalLength:e,t)+"";return{original:r,numbers:r.match(i)?r.match(i).map(Number):[0],strings:ci.str(e)||t?r.split(i):[]}}function hZ(e){var t=e?mS(ci.arr(e)?e.map(ZB):ZB(e)):[];return pS(t,function(i,r,n){return n.indexOf(i)===r})}function fZ(e){var t=hZ(e);return t.map(function(i,r){return{target:i,id:r,total:t.length,transforms:{list:oZ(i)}}})}function v5e(e,t){var i=ED(t);if(/^spring/.test(i.easing)&&(i.duration=rZ(i.easing)),ci.arr(e)){var r=e.length,n=r===2&&!ci.obj(e[0]);n?e={value:e}:ci.fnc(t.duration)||(i.duration=t.duration/r)}var a=ci.arr(e)?e:[e];return a.map(function(s,o){var l=ci.obj(s)&&!ci.pth(s)?s:{value:s};return ci.und(l.delay)&&(l.delay=o?0:t.delay),ci.und(l.endDelay)&&(l.endDelay=o===a.length-1?t.endDelay:0),l}).map(function(s){return vS(s,i)})}function g5e(e){for(var t=pS(mS(e.map(function(a){return Object.keys(a)})),function(a){return ci.key(a)}).reduce(function(a,s){return a.indexOf(s)<0&&a.push(s),a},[]),i={},r=function(a){var s=t[a];i[s]=e.map(function(o){var l={};for(var c in o)ci.key(c)?c==s&&(l.value=o[c]):l[c]=o[c];return l})},n=0;n<t.length;n++)r(n);return i}function y5e(e,t){var i=[],r=t.keyframes;r&&(t=vS(g5e(r),t));for(var n in t)ci.key(n)&&i.push({name:n,tweens:v5e(t[n],e)});return i}function b5e(e,t){var i={};for(var r in e){var n=YM(e[r],t);ci.arr(n)&&(n=n.map(function(a){return YM(a,t)}),n.length===1&&(n=n[0])),i[r]=n}return i.duration=parseFloat(i.duration),i.delay=parseFloat(i.delay),i}function w5e(e,t){var i;return e.tweens.map(function(r){var n=b5e(r,t),a=n.value,s=ci.arr(a)?a[1]:a,o=Cu(s),l=TD(t.target,e.name,o,t),c=i?i.to.original:l,u=ci.arr(a)?a[0]:c,d=Cu(u)||Cu(l),h=o||d;return ci.und(s)&&(s=c),n.from=qB(u,h),n.to=qB(PD(s,u),h),n.start=i?i.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=SD(n.easing,n.duration),n.isPath=ci.pth(a),n.isColor=ci.col(n.from.original),n.isColor&&(n.round=1),i=n,n})}var pZ={css:function(e,t,i){return e.style[t]=i},attribute:function(e,t,i){return e.setAttribute(t,i)},object:function(e,t,i){return e[t]=i},transform:function(e,t,i,r,n){if(r.list.set(t,i),t===r.last||n){var a="";r.list.forEach(function(s,o){a+=o+"("+s+") "}),e.style.transform=a}}};function mZ(e,t){var i=fZ(e);i.forEach(function(r){for(var n in t){var a=YM(t[n],r),s=r.target,o=Cu(a),l=TD(s,n,o,r),c=o||Cu(l),u=PD(lZ(a,c),l),d=MD(s,n);pZ[d](s,n,u,r.transforms,!0)}})}function x5e(e,t){var i=MD(e.target,t.name);if(i){var r=w5e(t,e),n=r[r.length-1];return{type:i,property:t.name,animatable:e,tweens:r,duration:n.end,delay:r[0].delay,endDelay:n.endDelay}}}function _5e(e,t){return pS(mS(e.map(function(i){return t.map(function(r){return x5e(i,r)})})),function(i){return!ci.und(i)})}function vZ(e,t){var i=e.length,r=function(a){return a.timelineOffset?a.timelineOffset:0},n={};return n.duration=i?Math.max.apply(Math,e.map(function(a){let s=a.startOnceDelay??0,o=a.pingPongDelayCorrection??0,l=a.pingPongEndDelayCorrection??0;return r(a)+s+o+l+a.duration*(a.loop??1)})):t.duration,n.delay=i?Math.min.apply(Math,e.map(function(a){let s=a.startOnceDelay??0,o=a.pingPongDelayCorrection??0;return r(a)+s+o+a.delay})):t.delay,n.endDelay=i?n.duration-Math.max.apply(Math,e.map(function(a){let s=a.startOnceDelay??0,o=a.pingPongDelayCorrection??0,l=a.pingPongEndDelayCorrection??0;return r(a)+s+o+a.duration*(a.loop??1)-a.endDelay-l})):t.endDelay,n}var YB=0;function S5e(e){var t=qM(tZ,e),i=qM(_D,e),r=y5e(i,e),n=fZ(e.targets),a=_5e(n,r),s=vZ(a,i),o=YB;return YB++,vS(t,{id:o,children:[],animatables:n,animations:a,duration:s.duration,delay:s.delay,endDelay:s.endDelay,startOnceDelay:i.startOnceDelay,pingPongDelayCorrection:i.pingPongDelayCorrection,pingPongEndDelayCorrection:i.pingPongEndDelayCorrection})}var Do=[],KB=[],a2,C5e=function(){function e(){a2=requestAnimationFrame(t)}function t(i){var r=Do.length;if(r){for(var n=0;n<r;){var a=Do[n];a.paused?(Do.splice(n,1),r-=1):(a.tick(i),n++)}e()}else a2=cancelAnimationFrame(a2)}return e}();function E5e(e){document.hidden?(Do.forEach(function(t){return t.pause(e.timeStamp)}),KB=Do.slice(0),fn.running=Do=[]):KB.forEach(function(t){return t.play(e.timeStamp)})}typeof document<"u"&&document.addEventListener("visibilitychange",E5e);function fn(e){e===void 0&&(e={});var t=0,i=0,r=0,n,a,s=0,o=null;function l(_){var E=window.Promise&&new Promise(function(C){return o=C});return _.finished=E,E}var c=S5e(e);l(c);function u(){var _=c.direction;_!=="alternate"&&(c.direction=_!=="normal"?"normal":"reverse"),c.reversed=!c.reversed,a.forEach(function(E){(E.loop===1||E.loop%2===0)&&(E.reversed=c.reversed)})}function d(){c.direction="normal",c.reversed=!1,a.forEach(function(_){return _.reversed=!1})}function h(_){return c.reversed?c.duration-_:_}function f(){t=0,i=h(c.currentTime)*(1/fn.speed)}function p(_,E,C=!1){E&&(c.reversed?E.seek(E.duration*E.loop-(_-E.timelineOffset-E.pingPongDelayCorrection),C):E.seek(_-E.timelineOffset-E.startOnceDelay-E.pingPongDelayCorrection,C))}function m(_,E=!1){if(c.reversed)for(var C=s;C--;)p(_,a[C],E);else for(var A=0;A<s;A++)p(_,a[A],E)}function v(_){var $,te,Q,pe,me,le,Z,oe,ge,Ie;var E=0,C=c.animations,A=C.length;for(c.direction!=="alternate"&&(($=c.parent)==null?void 0:$.direction)==="alternate"?((te=c.parent)==null?void 0:te.rewind)===!1&&c.reversePlayback===!0&&c.rewind===!1&&((Q=c.parent)!=null&&Q.reversed&&c.direction==="alternate"?_=c.duration-c.delay+c.endDelay-_:_=c.duration+c.delay-c.endDelay-_):w(!1,(pe=c.parent)==null?void 0:pe.rewind,c.rewind,(me=c.parent)==null?void 0:me.reversePlayback,c.reversePlayback)&&((le=c.parent)!=null&&le.reversed&&c.direction==="alternate"?_=c.duration-c.delay+c.endDelay-_:_=c.duration+c.delay-c.endDelay-_);E<A;){var M=C[E],T=M.animatable,P=M.tweens,D=P.length-1,k=P[D];D&&(k=pS(P,function(xe){return _<xe.end})[0]||k);let we;(Z=c.parent)!=null&&Z.reversed&&c.direction==="alternate"?we=fl(_-k.start-k.endDelay,0,k.duration)/k.duration:we=fl(_-k.start-k.delay,0,k.duration)/k.duration;for(var L=isNaN(we)?1:k.easing(we),R=k.to.strings,N=k.round,I=[],B=k.to.numbers.length,z=void 0,V=0;V<B;V++){var W=void 0;let xe,Se;c.direction!=="alternate"?((oe=c.parent)==null?void 0:oe.rewind)===!1&&c.reversePlayback===!0&&c.rewind===!1?(xe=k.to.numbers[V],Se=k.from.numbers[V]||0):(Se=k.to.numbers[V],xe=k.from.numbers[V]||0):w(!0,(ge=c.parent)==null?void 0:ge.rewind,c.rewind,(Ie=c.parent)==null?void 0:Ie.reversePlayback,c.reversePlayback)?(xe=k.to.numbers[V],Se=k.from.numbers[V]||0):(Se=k.to.numbers[V],xe=k.from.numbers[V]||0),k.isPath?W=m5e(k.value,L*Se):W=xe+L*(Se-xe),N&&(k.isColor&&V>2||(W=Math.round(W*N)/N)),I.push(W)}var G=R.length;if(!G)z=I[0];else{z=R[0];for(var q=0;q<G;q++){R[q];var ae=R[q+1],J=I[q];isNaN(J)||(ae?z+=J+ae:z+=J+" ")}}pZ[M.type](T.target,M.property,z,T.transforms),M.currentValue=z,E++}}function y(_){c[_]&&!c.passThrough&&c[_](c)}function x(){c.remaining&&c.remaining!==!0&&c.remaining--}let b={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function w(_,E,C,A,M){return b[_<<4|E<<3|C<<2|A<<1|M]}function S(_,E=!1){var P;var C=c.duration;let A=c.delay,M=C-c.endDelay;(P=c.parent)!=null&&P.reversed&&c.direction==="alternate"&&(A=c.endDelay,M=C-c.delay);var T=h(_);if(c.progress=fl(T/C*100,0,100),E||(c.reversePlayback=T<c.currentTime),s&&m(T,E),!c.began&&c.currentTime>=0&&(c.began=!0,y("begin")),!c.loopBegan&&c.currentTime>0&&(c.loopBegan=!0,y("loopBegin")),(c.reversed||T>=0)&&T<=A&&c.currentTime!==0&&(v(0),y("change")),(T>=M&&c.currentTime!==C+c.pingPongDelayCorrection||!C)&&(v(C),y("change")),T>A&&T<M?(c.changeBegan||(c.changeBegan=!0,c.changeCompleted=!1,y("changeBegin")),v(T),y("change")):c.changeBegan?(c.changeCompleted=!0,c.changeBegan=!1,y("change"),s&&y("timelineChangeComplete")):c.began&&T>M&&y("changeComplete"),c.currentTime=fl(T,0,C+c.pingPongDelayCorrection),c.began&&y("update"),_>=C)if(x(),!c.remaining)c.paused=!0,c.completed||(c.completed=!0,y("loopComplete"),y("complete"),!c.passThrough&&"Promise"in window&&(o(),l(c)));else{s?t+=c.duration/fn.speed:t+=c.duration;for(let D of a)D.setStartTime(0),D.remaining=D.loop;y("loopComplete"),c.loopBegan=!1,c.direction==="alternate"?u():s&&d()}}return c.reset=function(){var _=c.direction;c.passThrough=!1,c.currentTime=0,c.progress=0,c.paused=!0,c.began=!1,c.loopBegan=!1,c.changeBegan=!1,c.completed=!1,c.changeCompleted=!1,c.reversePlayback=!1,c.reversed=_==="reverse",c.remaining=c.loop,a=c.children,s=a.length;for(var E=s;E--;)c.children[E].reset();v(c.reversed?c.duration:0)},c.setStartTime=function(_){t=_},c.set=function(_,E){return mZ(_,E),c},c.tick=function(_){r=_,t||(t=r),S((r+(i-t))*fn.speed)},c.seek=function(_,E=!1){S(_-t,E)},c.pause=function(_){c.paused=!0,s&&(n=_??performance.now())},c.play=function(_){!c.paused||(c.completed&&c.reset(),c.paused=!1,Do.push(c),s&&n!==void 0&&(t+=(_??performance.now())-n),a2||C5e())},c.reverse=function(){u(),c.completed=!c.reversed,f()},c.restart=function(){c.reset(),c.play()},c.reset(),c.autoplay&&c.play(),c}function XB(e,t){for(var i=t.length;i--;)CD(e,t[i].animatable.target)&&t.splice(i,1)}function A5e(e){for(var t=hZ(e),i=Do.length;i--;){var r=Do[i],n=r.animations,a=r.children;XB(t,n);for(var s=a.length;s--;){var o=a[s],l=o.animations;XB(t,l),!l.length&&!o.children.length&&a.splice(s,1)}!n.length&&!a.length&&r.pause()}}function M5e(e,t){t===void 0&&(t={});var i=t.direction||"normal",r=t.easing?SD(t.easing):null,n=t.grid,a=t.axis,s=t.from||0,o=s==="first",l=s==="center",c=s==="last",u=ci.arr(e),d=parseFloat(u?e[0]:e),h=u?parseFloat(e[1]):0,f=Cu(u?e[1]:e)||0,p=t.start||0+(u?d:0),m=[],v=0;return function(y,x,b){if(o&&(s=0),l&&(s=(b-1)/2),c&&(s=b-1),!m.length){for(var w=0;w<b;w++){if(!n)m.push(Math.abs(s-w));else{var S=l?(n[0]-1)/2:s%n[0],_=l?(n[1]-1)/2:Math.floor(s/n[0]),E=w%n[0],C=Math.floor(w/n[0]),A=S-E,M=_-C,T=Math.sqrt(A*A+M*M);a==="x"&&(T=-A),a==="y"&&(T=-M),m.push(T)}v=Math.max.apply(Math,m)}r&&(m=m.map(function(D){return r(D/v)*v})),i==="reverse"&&(m=m.map(function(D){return a?D<0?D*-1:-D:Math.abs(v-D)}))}var P=u?(h-d)/v:d;return p+P*(Math.round(m[x]*100)/100)+f}}function T5e(e){e===void 0&&(e={});var t=fn(e);return t.duration=0,t.add=function(i,r){var n=Do.indexOf(t),a=t.children;n>-1&&Do.splice(n,1);function s(h){h.passThrough=!0}for(var o=0;o<a.length;o++)s(a[o]);var l=vS(i,qM(_D,e));l.targets=l.targets||e.targets;var c=t.duration;l.autoplay=!1,l.timelineOffset=ci.und(r)?c:PD(r,c),s(t);var u=fn(l);s(u),a.push(u),u.parent=t;var d=vZ(a,e);return t.delay=d.delay,t.endDelay=d.endDelay,t.duration=d.duration,u.loop===!0&&(t.duration=1/0),t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}fn.version="3.2.0";fn.speed=1;fn.running=Do;fn.remove=A5e;fn.get=TD;fn.set=mZ;fn.convertPx=AD;fn.path=p5e;fn.setDashoffset=h5e;fn.stagger=M5e;fn.timeline=T5e;fn.easing=SD;fn.penner=nZ;fn.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var gZ=fn,QB=new H,JB=new H,e9=new mi;function P5e(e,t,i,r){if(r===0)return i.copy(e);if(r===1)return i.copy(t);let n=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(n>=1)return i.copy(e);let a=1-n*n;if(a<=Number.EPSILON){let u=1-r;return i.w=u*e.w+r*t.w,i.x=u*e.x+r*t.x,i.y=u*e.y+r*t.y,i.z=u*e.z+r*t.z,i.normalize(),i}let s=Math.sqrt(a),o=Math.atan2(s,n),l=Math.sin((1-r)*o)/s,c=Math.sin(r*o)/s;return i.w=e.w*l+t.w*c,i.x=e.x*l+t.x*c,i.y=e.y*l+t.y*c,i.z=e.z*l+t.z*c,i}function ga(e,t,i,r,n,a){let s=i[e]!==void 0?i[e]:void 0,o=r[e];if(o==null)return;let l=s!=null?typeof s=="string"?Number(n.getVariable(s)??0):s:t[e],c=typeof o=="string"?Number(n.getVariable(o)??0):o;if(l!==c)return{update:u=>{let d=kt.lerp(l,c,u);a?t[e]=Math.trunc(d):t[e]=d},start:()=>{t[e]=l},end:()=>{t[e]=c}}}function ID(e,t,i,r,n,a){let s=i[e]?i[e]:void 0,o=r[e];if(!o)return;let l=t[e],c=[...s??l].map(d=>typeof d=="string"?Number(n.getVariable(d)??0):d),u=[...o].map(d=>typeof d=="string"?Number(n.getVariable(d)??0):d);if(!(c.length!==u.length||PP(c,u)))return{update:d=>{c.forEach((h,f)=>{let p=kt.lerp(h,u[f],d);t[e][f]=a?Math.trunc(p):p})},start:()=>{Object.assign(t[e],c)},end:()=>{Object.assign(t[e],u)}}}function Yx(e,t,i){return t.forEach((r,n)=>{e.setComponent(n,typeof r=="string"?Number(i.getVariable(r)??0):r)}),e}function t9(e,t,i,r,n){let a=i[e]?i[e]:void 0,s=r[e];if(!s)return;let o=t[e],l=a?Yx(new H,a,n):o.clone(),c=Yx(new H,s,n);if(!l.equals(c))return{update:u=>{o.lerpVectors(l,c,u)},start:()=>{o.copy(l)},end:()=>{o.copy(c)}}}function i9(e,t,i){return t.forEach((r,n)=>{e.setComponent(n,typeof r=="string"?Number(i.getVariable(r)??0):r)}),e}function Kx(e,t,i,r,n){let a=i[e]?i[e]:void 0,s=r[e];if(!s)return;let o=t[e],l=!(o instanceof Pe),c=o instanceof Pe?o:new Pe().fromArray(o),u=a?i9(new Pe,a,n):c.clone(),d=i9(new Pe,s,n);if(!u.equals(d))return{update:h=>{c.lerpVectors(u,d,h),l&&(t[e]=c.toArray())},start:()=>{c.copy(u),l&&(t[e]=c.toArray())},end:()=>{c.copy(d),l&&(t[e]=c.toArray())}}}function D5e(e,t,i,r){let n=i[e]?i[e]:void 0,a=r[e];if(!a)return;let s=t[e],o=n?new pt().fromArray(n):s.clone(),l=new H,c=new mi,u=new H;o.decompose(l,c,u);let d=new pt().fromArray(a),h=new H,f=new mi,p=new H;if(d.decompose(h,f,p),!o.equals(d))return{update:m=>{e9.slerpQuaternions(c,f,m),QB.lerpVectors(l,h,m),JB.lerpVectors(u,p,m),s.compose(QB,e9,JB)},start:()=>{s.compose(l,c,u)},end:()=>{s.compose(h,f,p)}}}function I5e(e,t,i,r,n){let a=i[e]?i[e]:void 0,s=r[e];if(!s)return;let o=t[e],l=a?typeof a=="string"?n.getColor(a).clone():new ii().setRGB(a.r,a.g,a.b):o.clone(),c=typeof s=="string"?n.getColor(s).clone():new ii().setRGB(s.r,s.g,s.b);if(l.equals(c))return;let u=o.clone();return{update:d=>{var h,f;u.lerpColors(l,c,d),(f=(h=t[e])==null?void 0:h.copy)==null||f.call(h,u)},start:()=>{u.copy(l)},end:()=>{u.copy(c)}}}function vw(e,t,i,r,n){let a=i[e]?i[e]:void 0,s=r[e];if(!s)return;let o=t[e],l=new Ea(o.r,o.g,o.b,o.a),c=a?typeof a=="string"?n.getColor(a).clone():new Ea(a.r,a.g,a.b,a.a):l.clone(),u=typeof s=="string"?n.getColor(s).clone():new Ea(s.r,s.g,s.b,s.a);if(!c.equals(u))return{update:d=>{l.lerpColors(c,u,d);let h=kt.lerp(c.a,u.a,d);l.a=h,t[e]={r:l.r,g:l.g,b:l.b,a:l.a}},start:()=>{l.copy(c)},end:()=>{l.copy(u)}}}function Ch(e,t,i,r,n){if(typeof t[e]=="number")return ga(e,t,i??{},r,n);if(Array.isArray(t[e]))return ID(e,t,i??{},r,n)}function O5e(e,t,i,r){var o,l,c,u;let n=[],a=e.cameraType==="OrthographicCamera"?(o=t.orthographic)==null?void 0:o.zoom:(l=t.perspective)==null?void 0:l.zoom,s=e.cameraType==="OrthographicCamera"?(c=i.orthographic)==null?void 0:c.zoom:(u=i.perspective)==null?void 0:u.zoom;if(s!==void 0){let d=a??e.zoom,h=s;d!==h&&n.push({update:f=>{e.zoom=kt.lerp(d,h,f),e.updateProjectionMatrix()},start:()=>{e.zoom=d,e.updateProjectionMatrix()},end:()=>{e.zoom=h,e.updateProjectionMatrix()}})}if(i.targetOffset!==void 0){let d=ga("targetOffset",e,t,i,r);d&&n.push(d)}return n}function R5e(e,t,i,r){if(i.scaleBaked===void 0)return;let n=(t.scaleBaked??e.data.geometry.scaleBaked).map(o=>typeof o=="string"?Number(r.getVariable(o)??0):o),a=i.scaleBaked.map(o=>typeof o=="string"?Number(r.getVariable(o)??0):o);if(Lf.isEqual(n,a))return;let s=[];return s.push({update:o=>{e.updateGeometryInteractions({scaleBaked:[kt.lerp(n[0],a[0],o),kt.lerp(n[1],a[1],o),kt.lerp(n[2],a[2],o)]},r),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()},start:()=>{e.updateGeometryInteractions({scaleBaked:n},r),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()},end:()=>{e.updateGeometryInteractions({scaleBaked:a},r),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()}}),s}function k5e(e,t,i,r){if(!i.extrusion)return;let n=e.extrusion,a=t.extrusion??{},s=i.extrusion,o=[];return XW.forEach(l=>{let c=Ch(l,n,a,s,r);c&&o.push(c)}),o}function L5e(e,t,i,r){let n=[];if(!("geometry"in i))return n;let a=e.geometry.userData.parameters,s="geometry"in t?t.geometry:{},o=i.geometry;if(e instanceof A1){let l=R5e(e,s,o,r);l&&n.push(...l)}else{let l={};if(Object.assign(l,fc(a,CC),fc(s,CC)),CC.forEach(c=>{let u=Ch(c,l,s,o,r);u&&n.push(u)}),e instanceof mD){Object.assign(l,{extrusion:{...a.extrusion}});let c=k5e(l,s,o,r);c&&n.push(...c)}n.length&&n.push({update:c=>{e.updateGeometryInteractions(l,r),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()},start:c=>{e.updateGeometryInteractions(l,r),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()},end:c=>{e.updateGeometryInteractions(l,r),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()}})}return n}function B5e(e,t,i,r){let n=[];if(i.intensity!==void 0){let a=ga("intensity",e,t,i,r);a&&n.push(a)}if(i.color!==void 0){let a=I5e("color",e,t,i,r);a&&n.push(a)}return n}function N5e(e,t,i,r){let n=[];if(Array.isArray(e.material)){if(!("materials"in i&&i.materials))return n;let a="materials"in t&&t.materials?t.materials:[],s=i.materials;e.material.forEach((o,l)=>{if(!s[l])return;let c=a[l]??{},u=s[l];typeof c=="string"||typeof u=="string"||n.push(...r9(o,c,u,r))})}else{if(!("material"in i&&i.material))return n;let a="material"in t&&t.material?t.material:{},s=i.material;if(typeof a=="string"||typeof s=="string")return n;n.push(...r9(e.material,a,s,r))}return n}function r9(e,t,i,r){var s;let n=[],a=Cm(i,r)||!!t.layers&&Cm(t,r);n.push($5e(e,a));for(let o of e.layers){let l=(s=t.layers)==null?void 0:s.data(o.uuid),c=i.layers.data(o.uuid);if(!c||o.type!=="light"&&(!(o.visible??!0)||!(c.visible??!0)))continue;let u=o.getNames().filter(d=>!qW.some(h=>d.includes(h)));for(let d of u)try{let h=o.getValue(d),f;if(d==="colors")f=W5e(o,l,c,d);else if(Array.isArray(h))d==="steps"&&(f=j5e(o,l,c,d));else if(typeof h=="number")f=F5e(o,l,c,d,r);else{if(typeof h=="boolean")continue;h instanceof Pe?f=z5e(o,l,c,d):h instanceof H?f=V5e(o,l,c,d,r):h instanceof Ea?f=H5e(o,l,c,d,r):h instanceof ii?f=U5e(o,l,c,d,r):"isTexture"in h&&(f=G5e(o,l,c,d))}f&&(Array.isArray(f)?n.push(...f):n.push(f))}catch(h){console.error(`lerpMaterial: unexpected material layer for ${d}`,h)}}return n}function F5e(e,t,i,r,n){if(!e.hasValue(r)||!(r in i))return;let a=t?t[r]:e.getValue(r),s=i[r],o=typeof a=="string"?Number(n.getVariable(a)??0):a,l=typeof s=="string"?Number(n.getVariable(s)??0):s;if(o!==l)return{update:c=>{e.setValue(r,kt.lerp(o,l,c))},start:()=>{e.setValue(r,o)},end:()=>{e.setValue(r,l)}}}function z5e(e,t,i,r){if(!e.hasValue(r)||!(r in i))return;let n=e.getValue(r),a=t?new Pe().fromArray(t[r]):n.clone(),s=new Pe().fromArray(i[r]);if(!a.equals(s))return{update:o=>{n.lerpVectors(a,s,o)},start:()=>{n.copy(a)},end:()=>{n.copy(s)}}}function V5e(e,t,i,r,n){if(!e.hasValue(r)||!(r in i))return;let a=e.getValue(r),s=t?t[r]:void 0,o=i[r],l=s?Yx(new H,s,n):a.clone(),c=Yx(new H,o,n);if(!l.equals(c))return{update:u=>{a.lerpVectors(l,c,u)},start:()=>{a.copy(l)},end:()=>{a.copy(c)}}}function U5e(e,t,i,r,n){if(!e.hasValue(r)||!(r in i))return;let a=t?t[r]:void 0,s=i[r],o=e.getValue(r),l=a?typeof a=="string"?n.getColor(a).clone():new ii().setRGB(a.r,a.g,a.b):o.clone(),c=typeof s=="string"?n.getColor(s).clone():new ii().setRGB(s.r,s.g,s.b);if(l.equals(c))return;let u=o.clone();return{update:d=>{e.getValue(r)!==u&&e.setValue(r,u),u.lerpColors(l,c,d)},start:()=>{u.copy(l)},end:()=>{u.copy(c)}}}function H5e(e,t,i,r,n){if(!e.hasValue(r)||!(r in i))return;let a=t?t[r]:void 0,s=i[r],o=e.getValue(r),l=a?typeof a=="string"?n.getColor(a).clone():new ii().setRGB(a.r,a.g,a.b):o.clone(),c=typeof s=="string"?n.getColor(s).clone():new Ea(s.r,s.g,s.b,s.a);if(l.equals(c))return;let u=o.clone();return{update:d=>{e.getValue(r)!==u&&e.setValue(r,u),u.lerpColors(l,c,d)},start:()=>{u.copy(l)},end:()=>{u.copy(c)}}}function j5e(e,t,i,r="steps"){if(!e.hasValue(r)||!(r in i))return;let n=[],a=e.getValue(r),s=t?t[r]:a,o=i[r];return PP(s,o)||n.push({update:l=>{let c=[...a];for(let u=0;u<a.length;++u){let d=s[u],h=o[u];c[u]=kt.lerp(d,h,l)}e.setValue(r,c)},start:()=>{e.setValue(r,s)},end:()=>{e.setValue(r,o)}}),n.length?n:void 0}function W5e(e,t,i,r="colors"){if(!e.hasValue(r)||!(r in i))return;let n=[],a=e.getValue(r),s=t?t[r]:a.map(l=>l.toArray()),o=i[r];for(let l=0;l<a.length;++l){let c=[...s[l]],u=[...o[l]];xx.isEqual(c,u)||n.push({update:d=>{a[l].fromArray(xx.lerp(c,u,d))},start:()=>{a[l].fromArray(c)},end:()=>{a[l].fromArray(u)}})}return n.length?n:void 0}function G5e(e,t,i,r="texture"){var v,y;if(!e.hasValue(r)||!(r in i))return;let n=e.getNode("rotation"),a=((v=t==null?void 0:t[r])==null?void 0:v.rotation)??0,s=((y=i[r])==null?void 0:y.rotation)??0;if(n&&a!==s)return{update:x=>{n.value=kt.lerp(a,s,x)*kt.DEG2RAD},start:()=>{n.value=a*kt.DEG2RAD},end:()=>{n.value=s*kt.DEG2RAD}};let o=e.getNode("mat");if(!o)return;let l=t?t[r]:o,c=i[r],u=[...l.repeat],d=[...l.offset],h=[...c.repeat],f=[...c.offset],p=l.rotation??0,m=c.rotation??0;if(!bu.isEqual(u,h)||!bu.isEqual(d,f)||p!==m)return{update:x=>{o.repeat=bu.lerp(u,h,x),o.offset=bu.lerp(d,f,x),o.rotation=kt.lerp(p,m,x),o.updateMatrix()},start:()=>{o.repeat=[...u],o.offset=[...d],o.rotation=p,o.updateMatrix()},end:()=>{o.repeat=[...h],o.offset=[...f],o.rotation=m,o.updateMatrix()}}}function $5e(e,t){return{update:()=>{e.transparent=t}}}var b4=new H,n9=new Vn;function Z5e(e,t,i,r,n){var p,m,v,y,x,b;let a=[],s,o,l,c,u,d,h,f;if(e instanceof la?(s=Kx("position",e,t,i,n),s&&a.push(s),l=ga("rotation",e,t,i,n),l&&a.push(l),c=Kx("shear",e,t,i,n),c&&a.push(c)):(f={slide:((p=t.pathSnapping)==null?void 0:p.slide)??((m=e.updatedPathSnapping)==null?void 0:m.slide)??((v=e.dataPatched.pathSnapping)==null?void 0:v.slide)??0,offset:((y=t.pathSnapping)==null?void 0:y.offset)??((x=e.updatedPathSnapping)==null?void 0:x.offset)??((b=e.dataPatched.pathSnapping)==null?void 0:b.offset)??0},d=ga("slide",f,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,i.pathSnapping??e.dataPatched.pathSnapping,n),d&&a.push(d),h=ga("offset",f,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,i.pathSnapping??e.dataPatched.pathSnapping,n),h&&a.push(h),!d&&!h&&(s=t9("position",e,t,i,n),s&&a.push(s),o=t9("scale",e,t,i,n),o&&a.push(o),l=q5e(e,t,i,r,n),l&&a.push(l),u=D5e("hiddenMatrix",e,t,i),u&&a.push(u))),s||o||l||u||d||h){let w=e instanceof la?()=>{e.updateWorldMatrix(!0,!1,!0),e.resetBBoxNeedsUpdate()}:()=>{var S;e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),(S=e.parent)!=null&&S.matrixWorldFusedFalse&&(e.matrixWorld.multiplyMatrices(e.parent.matrixWorldFusedFalse,e.matrix),e.matrixWorldNeedsUpdate=!1),ll(e)&&wu(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.updatePathSnapping(Object.assign({},t.pathSnapping,f))};a.push({update:w,start:w,end:w})}return a}function q5e(e,t,i,r,n){var u;let a=t!=null&&t.rotation?t.rotation.map(d=>(typeof d=="string"?Number(n.getVariable(d)??0):d)*kt.DEG2RAD):void 0,s=(u=i.rotation)==null?void 0:u.map(d=>(typeof d=="string"?Number(n.getVariable(d)??0):d)*kt.DEG2RAD);if(!s)return;let o=a?new H().fromArray(a):new H().setFromEuler(e.rotation),l=new H().fromArray(s);if(o.equals(l))return;let c=b4.subVectors(l,o);if(r&&c.toArray().every(d=>Math.abs(d)<2*Math.PI)){let d=new mi().setFromEuler(n9.setFromVector3(o)),h=new mi().setFromEuler(n9.setFromVector3(l));return{update:f=>{P5e(d,h,e.quaternion,f)},start:()=>{e.rotation.setFromVector3(o)},end:()=>{e.rotation.setFromVector3(l)}}}else return{update:d=>{b4.lerpVectors(o,l,d),e.rotation.setFromVector3(b4)},start:()=>{e.rotation.setFromVector3(o)},end:()=>{e.rotation.setFromVector3(l)}}}function Y5e(e,t,i,r){let n=[];if(!("cloner"in i)||!e.cloner)return n;let a=e.cloner,s="cloner"in t?t.cloner:{},o=i.cloner;HW.forEach(f=>{let p;f==="count"?p=ga("count",a.parameters,s,o,r,!0):p=Ch(f,a.parameters,s??{},o,r),p&&n.push(p)});let l=K5e(a,s,o,r);l!=null&&l.length&&n.push(...l);let c=X5e(a,s,o,r);c!=null&&c.length&&n.push(...c);let u=Q5e(a,s,o,r);u!=null&&u.length&&n.push(...u);let d=J5e(a,s,o,r);d!=null&&d.length&&n.push(...d);let h=ePe(a,s,o,r);return h!=null&&h.length&&n.push(...h),n.length&&n.push({update:()=>{a.update()}}),n}function K5e(e,t,i,r){if(e.parameters.type!=="radial")return;let n=t.radial,a=i.radial;if(!a)return;let s=e.parameters.radial,o=[];return jW.forEach(l=>{let c=Ch(l,s,n??{},a,r);c&&o.push(c)}),o}function X5e(e,t,i,r){if(e.parameters.type!=="linear")return;let n=t.linear,a=i.linear;if(!a)return;let s=[],o=e.parameters.linear;return WW.forEach(l=>{let c=Ch(l,o,n??{},a,r);c&&s.push(c)}),s}function Q5e(e,t,i,r){if(e.parameters.type!=="grid")return;let n=t.grid,a=i.grid;if(!a)return;let s=[],o=e.parameters.grid;return GW.forEach(l=>{let c;l==="count"?c=ID(l,o,n??{},a,r,!0):c=Ch(l,o,n??{},a,r),c&&s.push(c)}),s}function J5e(e,t,i,r){if(e.parameters.type!=="toObject")return;let n=t.toObject,a=i.toObject;if(!a)return;let s=[],o=e.parameters.toObject;return $W.forEach(l=>{let c;l==="count"?c=ga(l,o,n??{},a,r,!0):c=Ch(l,o,n??{},a,r),c&&s.push(c)}),s}function ePe(e,t,i,r){if(!e.parameters.randomness)return;let n=t.randomnessObject,a=i.randomnessObject;if(!a)return;let s=[],o=e.parameters.randomnessObject;return ZW.forEach(l=>{let c=Ch(l,o,n??{},a,r);c&&s.push(c)}),s}function tPe(e,t){return{update:()=>{e instanceof ia&&(e.fill.enabled=t)}}}function iPe(e,t){return{update:()=>{e instanceof ia&&(e.stroke.enabled=t)}}}function rPe(e,t){return{update:()=>{e instanceof ia&&(e.dropShadow.enabled=t)}}}function nPe(e,t){return{update:()=>{e instanceof ia&&(e.innerShadow.enabled=t)}}}function aPe(e,t){return{update:()=>{e instanceof ia&&(e.backgroundBlur.enabled=t)}}}function sPe(e,t){return{update:()=>{e instanceof ia&&(e.layerBlur.enabled=t)}}}function oPe(e,t,i,r,n){let a=[],s,o,l,c,u,d,h,f,p,m,v,y,x,b,w;if("width"in e&&(s=ga("width",e,t,i,n),s&&a.push(s)),"height"in e&&(o=ga("height",e,t,i,n),o&&a.push(o)),e instanceof ia||e instanceof mc){let S={...t.fill},_={...i.fill};S.enabled!==void 0&&S.enabled!==_.enabled&&(a.push(tPe(e,!0)),S.enabled||Object.assign(S,{enabled:!0,color:{...S.color,a:0}}),_.enabled||Object.assign(_,{enabled:!0,color:{..._.color,a:0}})),l=vw("color",e.fill,S,_,n),l&&a.push(l)}if(e instanceof ia){let S={...t.stroke},_={...i.stroke};(S.enabled||_.enabled)&&(a.push(iPe(e,!0)),S.enabled||Object.assign(S,{enabled:!0,color:{...S.color,a:0}}),_.enabled||Object.assign(_,{enabled:!0,color:{..._.color,a:0}})),c=vw("color",e.stroke,S,_,n),c&&a.push(c),u=ga("thickness",e.stroke,S,_,n),u&&a.push(u)}if(e instanceof ia){let S={...t.dropShadow},_={...i.dropShadow};(S.enabled||_.enabled)&&(a.push(rPe(e,!0)),S.enabled||Object.assign(S,{enabled:!0,color:{...S.color,a:0}}),_.enabled||Object.assign(_,{enabled:!0,color:{..._.color,a:0}})),d=vw("color",e.dropShadow,S,_,n),d&&a.push(d),h=ga("blurRadius",e.dropShadow,S,_,n),h&&a.push(h),p=ga("spread",e.dropShadow,S,_,n),p&&a.push(p),f=Kx("offset",e.dropShadow,S,_,n),f&&a.push(f)}if(e instanceof ia){let S={...t.innerShadow},_={...i.innerShadow};(S.enabled||_.enabled)&&(a.push(nPe(e,!0)),S.enabled||Object.assign(S,{enabled:!0,color:{...S.color,a:0}}),_.enabled||Object.assign(_,{enabled:!0,color:{..._.color,a:0}})),m=vw("color",e.innerShadow,S,_,n),m&&a.push(m),v=ga("blurRadius",e.innerShadow,S,_,n),v&&a.push(v),x=ga("spread",e.innerShadow,S,_,n),x&&a.push(x),y=Kx("offset",e.innerShadow,S,_,n),y&&a.push(y)}if(e instanceof ia||e instanceof mc){let S={...t.backgroundBlur},_={...i.backgroundBlur};(S.enabled||_.enabled)&&(a.push(aPe(e,!0)),S.enabled||Object.assign(S,{enabled:!0,radius:0}),_.enabled||Object.assign(_,{enabled:!0,radius:0})),b=ga("radius",e.backgroundBlur,S,_,n),b&&a.push(b)}if(e instanceof ia){let S={...t.layerBlur},_={...i.layerBlur};(S.enabled||_.enabled)&&(a.push(sPe(e,!0)),S.enabled||Object.assign(S,{enabled:!0,radius:0}),_.enabled||Object.assign(_,{enabled:!0,radius:0})),w=ga("radius",e.layerBlur,S,_,n),w&&a.push(w)}if(e instanceof mc||e instanceof vy){let S=ID("cornerRadius",e,t,i,n);S&&a.push(S)}return a}function a9(e,t,i,r,n){let a=[];return e.data.visible&&a.push(...Z5e(e,t,i,n,r)),e instanceof la?a.push(...oPe(e,t,i,n,r)):(e.data.visible&&a.push(...Y5e(e,t,i,r)),ll(e)?(e instanceof Ua&&e.data.visible&&a.push(...L5e(e,t,i,r)),e.data.visible&&a.push(...N5e(e,t,i,r))):J4e(e)?e.data.visible&&a.push(...B5e(e,t,i,r)):Q4e(e)&&a.push(...O5e(e,t,i,r))),a.length?{update:s=>{a.forEach(o=>o.update(s))},start:s=>{a.forEach(o=>{var l;return(l=o.start)==null?void 0:l.call(o,s)})},end:s=>{a.forEach(o=>{var l;return(l=o.end)==null?void 0:l.call(o,s)})}}:void 0}var s9=new H;function OD(e,t,i=!1){var a;let r=[],n=s=>{let o=s.data;delete s.states,s.currentState=null,s.reversibleToState=null,s.currentTransitionEvent=null;for(let l of o.states){let c={...l.data};s.states||(s.states={}),s.states[l.id]=yf.patch(o,c)}l9(e.scene,s,null,t,o.events.find(l=>l.data.type==="Follow"||l.data.type==="LookAt")!==void 0),o9(e)};e.scene.traverse2D(n),e.traverseChildren(s=>{var u,d,h,f,p,m;if(i&&((u=s.rigidBody)==null||u.setTranslation(s.position0,!0),(d=s.rigidBody)==null||d.setRotation(s.rotation0,!0),(h=s.rigidBody)==null||h.setLinvel(s9,!0),(f=s.rigidBody)==null||f.setAngvel(s9,!0)),!ji.is(s))return;let o=s.uuid,l=s.data;if(delete s.states,s.uuid===Xv)return;let c=!1;r.some(v=>{var y;return(y=e.scene.find(o))==null?void 0:y.isDescendantOf(v)})?c=!0:((p=l.physics)==null?void 0:p.fusedBody)===!0&&l.physics.rigidBody==="dynamic"&&r.push(o),s.data=l,s.currentState=null,s.reversibleToState=null,s.currentTransitionEvent=null;for(let v of l.states){let y={...v.data};e.data.globalPhysics.usePhysics===!0&&l.physics&&(l.physics.rigidBody==="dynamic"||c)&&(v.data.position!==void 0&&delete y.position,v.data.rotation!==void 0&&delete y.rotation,v.data.hiddenMatrix!==void 0&&delete y.hiddenMatrix),s.states||(s.states={}),s.states[v.id]=mf.patch(l,y)}l9(e.scene,s,null,t,l.events.find(v=>v.data.type==="Follow"||v.data.type==="LookAt")!==void 0),s instanceof Na&&s.frame&&(s.frame.traverse(v=>n(v)),(m=s.uiCanvas)==null||m.applySize())}),o9(e),e.frame&&(e.frame.traverse(s=>n(s)),(a=e.uiCanvas)==null||a.applySize())}function o9(e){e.traverseEntity(t=>{for(let i of t.data.events){let r=[];switch(i.data.type){case"Follow":case"MouseHover":case"Scroll":case"MouseDown":case"MouseUp":case"MousePress":case"KeyUp":case"KeyDown":case"KeyPress":case"Collision":r.push(...i.data.actions);break;case"GameControl":for(let n of Object.values(i.data.gameActions))r.push(...n);break;case"DragDrop":r.push(...i.data.dragDropActions.drag,...i.data.dragDropActions.drop);break;case"Conditional":r.push(...i.data.inActions,...i.data.outActions);break}for(let n of r)if(n.data.type==="Create"&&n.data.hideBase==="Yes"){let a=e.scene.find(n.data.object);a&&(a.visible=!1)}}})}function l9(e,t,i,r,n=!1){if(t instanceof Ua&&t.removeInteractionGeometry(r),t instanceof la?t.changeSelectedState(i,{shared:r},n):t.changeSelectedState(i,{scene:e,shared:r},n),t instanceof Ua&&t.updateGeometryGroupsIfNeeded(),t instanceof ja&&t.updateCameraState(t.dataPatched,{scene:e,shared:r}),!(t instanceof la)){if(t.cloner)for(let a of t.cloner.children)a.playModeVisible=void 0;t.updateVisible()}}function yZ(e){let t;if(e.easing===5){let{control1:i,control2:r}=e;t=`cubicBezier(
			${i[0]}, ${i[1]}, ${r[0]}, ${r[1]}
		)`}else if(e.easing===6){let{mass:i,stiffness:r,damping:n,velocity:a}=e;t=`spring( ${i}, ${r}, ${n}, ${a} )`}else{let i;switch(e.easing){case 0:i=Ad.linear;break;case 1:i=Ad.ease;break;case 2:i=Ad.easeIn;break;case 3:i=Ad.easeOut;break;case 4:i=Ad.easeInOut;break;default:i=Ad.linear}let[r,n,a,s]=i;t=`cubicBezier( ${r}, ${n}, ${a}, ${s} )`}return{duration:Math.max(e.duration,1e-4),easing:t}}function KM(e){let t={delay:0,loop:e.repeat===-1?!0:e.repeat+1};if(e.repeat===0)t.direction="normal",t.rewind=!1;else switch(e.direction){case"pingpong":t.direction="alternate",t.rewind=!1;break;case"pingpong-rewind":t.direction="alternate",t.rewind=!0;break;default:t.direction="normal",t.rewind=!1;break}switch(t.delay=0,t.endDelay=0,t.startOnceDelay=0,t.pingPongDelayCorrection=0,t.pingPongEndDelayCorrection=0,e.delayDirection){case"start-once":t.startOnceDelay=e.delay;break;case"start":t.delay=e.delay;break;case"end":t.endDelay=e.delay;break;case"start-end":case void 0:t.delay=e.delay,t.endDelay=e.delay;break}return t.direction==="alternate"&&(t.delay/=2,t.endDelay/=2,e.delayDirection==="start"?(t.pingPongDelayCorrection=t.delay,typeof t.loop=="number"&&t.loop%2===0&&(t.pingPongEndDelayCorrection=t.delay)):e.delayDirection==="end"?typeof t.loop=="number"&&t.loop%2!==0&&(t.pingPongEndDelayCorrection=t.endDelay):e.delayDirection==="start-end"&&(t.pingPongDelayCorrection=t.delay,t.pingPongEndDelayCorrection=t.endDelay)),t}var lPe={type:"beginState"},cPe={type:"completeState",isfromEntity:!1},c9=class{constructor(e,t,i,r,n,a){if(this.object=e,this.data=r,this.sharedAssets=n,this.allowSlerp=a,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.requestRender()),this.targets.t===0||this.targets.t===1?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let s=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=s,this.object.dispatchEvent({type:"beginState",state:s}),this.object instanceof la||this.object.traverseEntity(o=>{o!==this.object&&o instanceof ja&&o.dispatchEvent(lPe)})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let s=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=s,this.object.dispatchEvent({type:"completeState",state:s}),this.object instanceof la||this.object.traverseEntity(o=>{o!==this.object&&o instanceof ja&&o.dispatchEvent(cPe)})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=a9(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},t===void 0){let s=s2(this.object,this.object.currentState===i?this.object.prevState:this.object.currentState);if(!s)throw new Error("Missing property");this.from=s}else{let s=s2(this.object,t);if(!s)throw new Error("Missing property");this.from=s}if(i===void 0)throw new Error("Missing property");{let s=s2(this.object,i);if(!s)throw new Error("Missing property");this.to=s}this.useCurrentState=t===void 0||i===void 0,this.params={targets:this.targets,t:1,autoplay:!1,...KM(r),...yZ(r),change:this.onChange},this.callback=a9(this.object,t===void 0?{}:this.from.data,i===void 0?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},bZ=class extends Pa{constructor(e,t,i,r,n){var s;if(super(),this.eventType=e,this.data=t,this.page=i,this.shared=r,this.condition=n,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.hasPlayedOnce=!1,this.onTimelineChangeComplete=()=>{var o;this.data.tweens[0].data.direction!=="normal"&&(this.toggleIsForward=!this.toggleIsForward),this.timelineNeedsRebuild!==!1&&((o=this.timeline)==null||o.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!1,isRebuild:!0}),this.timeline.play())},!t.object)throw new Error("Missing property");let a=this.page.scene.find(t.object)??((s=this.page.uiCanvas)==null?void 0:s.find(t.object))??this.page.scene.find2DInUIObjects(t.object);if(!a)throw new Error("Missing property");if(!a.states)throw new Error("Missing property");if(this.object=a,t.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay=t.tweens[0].data.delayDirection==="start-once"?t.tweens[0].data.delay:0,this.init()}get playing(){var e;return((e=this.timeline)==null?void 0:e.paused)===!1}get changeBegan(){return this.tweens.some(e=>e.changeBegan)??!1}init(){this.initialCurrentState=s2(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return this.data.runMode==="Toggle"&&r7(this.eventType)?this.initialCurrentState:this.object.currentState}buildTimeline({isForward:e=!0,needsRebuild:t=!1,isRebuild:i=!1}={}){var r,n,a,s;try{let o=KM(this.data.tweens[0].data);i&&typeof o.loop=="number"&&o.loop--,(r=this.timeline)==null||r.pause(),this.timeline=gZ.timeline({autoplay:!1,...o,...o.loop===!0||o.loop>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let l=this.tweens.findIndex(c=>c==null?void 0:c.changeBegan);if(t===!0&&(this.timelineNeedsRebuild=!0),e){let c=l===-1?0:l;for(let u=c;u<this.data.tweens.length-1;u++){let d=this.data.tweens[u],h=this.data.tweens[u+1],f;u===c&&(this.object.wasMovedByUser===!0||((n=this.object.previousAction)==null?void 0:n.changeBegan)===!0)?(f=void 0,this.object instanceof ja&&(this.object.wasMovedByUser=!1)):f=d.data.state===void 0?this.currentState:d.data.state;let p=new c9(this.object,f,h.data.state===void 0?this.currentState:h.data.state,h.data,this.shared,this.data.allowSlerp??!1);l!==-1&&u===c&&Object.assign(p.params,{startOnceDelay:0}),this.tweens[u]=p,this.timeline.add(p.params,this.timeline.duration+(u===c?o.delay:0))}this.timeline.duration+=o.endDelay}else{let c=l===-1?this.data.tweens.length-1:l+1;for(let u=c;u>0;u--){let d=this.data.tweens[u],h=this.data.tweens[u-1],f;u===c&&(this.object.wasMovedByUser===!0||((a=this.object.previousAction)==null?void 0:a.changeBegan)===!0)?(f=void 0,this.object instanceof ja&&(this.object.wasMovedByUser=!1)):f=d.data.state===void 0?this.currentState:d.data.state;let p=new c9(this.object,f,h.data.state===void 0?this.currentState:h.data.state,d.data,this.shared,this.data.allowSlerp??!1);l!==-1&&u===c&&Object.assign(p.params,{startOnceDelay:0}),this.tweens[u-1]=p,this.timeline.add(p.params,this.timeline.duration+(u===c?o.endDelay:0))}this.timeline.duration+=o.delay}}catch(o){o instanceof Error&&console.error(o.message)}((s=this.object.previousAction)==null?void 0:s.playing)===!0&&this.object.previousAction.pause(),this.object.previousAction=this}play(){if(Fr(this.shared,this.condition)===!1||r7(this.eventType)&&this.data.runMode==="Once"&&this.hasPlayedOnce||(this.hasPlayedOnce=!0,this.playing))return!1;clearTimeout(this.timeoutId);let e=KM(this.data.tweens[0].data).pingPongDelayCorrection;this.timeoutId=window.setTimeout(()=>{try{this.buildTimeline(),this.timeline.play()}catch(t){t instanceof Error&&console.error(t.message)}},this.startOnceDelay+e)}pause(){var e;(e=this.timeline)==null||e.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause();let e=this.data.tweens[0].data.state===void 0?this.initialCurrentState:this.data.tweens[0].data.state;this.object instanceof la?this.object.changeSelectedState(e,{shared:this.shared}):this.object.changeSelectedState(e,{scene:this.page.scene,shared:this.shared}),this.object.currentState=e}seek(e){var t;if(Fr(this.shared,this.condition)===!1)return!1;this.timeline===void 0&&this.buildTimeline(),(t=this.timeline)==null||t.seek(e*this.timeline.duration,!0)}toggle(e){var t;if(Fr(this.shared,this.condition)===!1)return!1;clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward,this.playing?((t=this.timeline)==null||t.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!0}),this.timeline.play()):this.timeoutId=window.setTimeout(()=>{var i;(i=this.timeline)==null||i.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function s2(e,t){var n;let i,r;if(typeof t=="string"?(i=t,r=(n=e.states)==null?void 0:n[i]):t===null&&(i=null,r=e.data),!(i===void 0||r===void 0))return{id:i,data:r}}var uPe={type:"beginState"},u9={type:"completeState",isfromEntity:!1},d9={type:"requestRender"},wZ=class extends Pa{constructor(e,t,i,r){super(),this.data=e,this.page=t,this.shared=i,this.condition=r,this.toggleIsForward=!1,this.posStart=new H,this.posEnd=new H,this.qStart=new mi,this.qEnd=new mi,this.zoomStart=1,this.zoomEnd=1}init(){}get playing(){return this.animation&&this.animation.began&&!this.animation.completed}buildAnimation(e=!1){if(!this.data.animate)return;let t=this.page.scene.find(this.data.targetCamera);if(!t||!t.visible)throw new ReferenceError("Target camera not founded or not visible");let i={t:0};this.posStart.copy(this.page.activeCamera.position),this.qStart.copy(this.page.activeCamera.quaternion),this.zoomStart=this.page.activeCamera.zoom,this.animation=gZ({targets:i,t:1,...yZ(this.data),update:()=>{i.t===0&&(this.data.runMode==="Toggle"&&!this.toggleIsForward?this.fromCamera&&(this.posEnd.copy(this.fromCamera.position),this.qEnd.copy(this.fromCamera.quaternion),this.zoomEnd=this.fromCamera.zoom,this.switchCamera(this.fromCamera.uuid)):(this.posEnd.copy(t.position),this.qEnd.copy(t.quaternion),this.zoomEnd=t.zoom,this.fromCamera=this.page.activeCamera,this.switchCamera(t.uuid)),this.page.activeCamera.dispatchEvent(uPe));let r=this.page.activeCamera;r.position.lerpVectors(this.posStart,this.posEnd,i.t),r.quaternion.slerpQuaternions(this.qStart,this.qEnd,i.t),r.zoom=this.zoomStart+(this.zoomEnd-this.zoomStart)*i.t,r.wasMovedBySwitchCameraAction=!0,r.updateMatrix(),r.updateMatrixWorld(),r.updateProjectionMatrix(),r.dispatchEvent(d9),i.t===1&&r.dispatchEvent(u9)}})}switchCamera(e){let t=this.page.activeCamera,i=this.page.scene.find(e);if(!i||!i.visible)throw new ReferenceError("Target camera not founded or not visible");this.page.switchActiveCamera(i),t.dispatchEvent({type:"cameraChange",camera:i})}play(){if(Fr(this.shared,this.condition)===!1)return!1;if(!this.playing&&this.page.activeCamera.uuid!==this.data.targetCamera)try{clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var e;delete this.timeoutId,this.data.animate?(this.buildAnimation(),(e=this.animation)==null||e.play()):this.switchCamera(this.data.targetCamera)},this.data.delay*1e3)}catch{}}pause(){var e;(e=this.animation)==null||e.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}toggle(e){var t,i;if(Fr(this.shared,this.condition)===!1)return!1;if(window.clearTimeout(this.timeoutId),delete this.timeoutId,e!==this.toggleIsForward)try{this.playing?((t=this.animation)==null||t.pause(),this.toggleIsForward=e??!this.toggleIsForward,this.buildAnimation(!0),(i=this.animation)==null||i.play()):this.timeoutId=window.setTimeout(()=>{var r,n;this.toggleIsForward=e??!this.toggleIsForward,this.data.animate?((r=this.animation)==null||r.pause(),this.buildAnimation(),(n=this.animation)==null||n.play()):(this.toggleIsForward?(this.fromCamera=this.page.activeCamera,this.switchCamera(this.data.targetCamera)):this.fromCamera&&this.switchCamera(this.fromCamera.uuid),this.page.activeCamera.dispatchEvent(u9),this.page.activeCamera.dispatchEvent(d9))},this.data.delay*1e3)}catch{}}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause(),this.toggleIsForward=!1}};function xZ(e){let t=e==null?void 0:e.tracks.filter(i=>i.ValueTypeName==="vector"||i.ValueTypeName==="quaternion").map(i=>i.times.length);if(t!=null&&t.length){let i=Bwe(t);return i&&i>2?i:2}return 2}var _Z=class extends Pa{constructor(e,t,i,r,n){var l,c,u;super(),this.data=e,this.page=t,this.animationControls=i,this.shared=r,this.condition=n,this.startOnceDelay=0,this.toggleIsForward=!1;let a=e.object,s=t.scene.find(e.object);s&&Array.isArray(s.identity)&&(a=s.identity[0]),this.data={...e,object:a};let o=this.animationControls.clipIdToAction[e.clipId+"/"+a];if(this.duration=((l=o==null?void 0:o.getClip())==null?void 0:l.duration)??1,this.data.crop2){let d=xZ(o==null?void 0:o.getClip());this.leftFrameTime=this.data.crop2[0]/(d-1)*this.duration,this.rightFrameTime=this.data.crop2[1]/(d-1)*this.duration}else{let d=(u=(c=o==null?void 0:o.getClip())==null?void 0:c.tracks[0])==null?void 0:u.times.length;d&&d>1?(this.leftFrameTime=this.data.crop[0]/d*this.duration,this.rightFrameTime=this.data.crop[1]/d*this.duration):(this.leftFrameTime=0,this.rightFrameTime=this.duration)}this.startOnceDelay=e.delay}get playing(){var e;return((e=this.threeAnimAction)==null?void 0:e.isRunning())??!1}play(e=!1){if(Fr(this.shared,this.condition)===!1)return!1;window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var i;if(this.threeAnimAction=this.animationControls.play(this.data),!this.threeAnimAction)return;this.threeAnimAction.reset(),this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime;let t=this.data.object;Object.entries(this.animationControls.clipIdToAction).forEach(([r,n])=>{let a=r.split("/")[1];this.threeAnimAction!==n&&a===t&&n.isRunning()&&(e?n.fadeOut(.2):n.stop())}),e&&((i=this.threeAnimAction)==null||i.fadeIn(.2))},this.startOnceDelay)}pause(){this.threeAnimAction&&(this.threeAnimAction.paused=!0),window.clearTimeout(this.timeoutId),delete this.timeoutId}stop(){var e;(e=this.threeAnimAction)==null||e.fadeOut(.2)}seek(e){this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction&&(this.threeAnimAction.paused=!0,this.threeAnimAction.time=kt.clamp(this.threeAnimAction.time+1/60*e,this.leftFrameTime,this.rightFrameTime-16e-5),this.animationControls.needsUpdate=!0,this.animationControls.requestRender())}toggle(e,t=!1){if(Fr(this.shared,this.condition)===!1)return!1;this.toggleIsForward=e??!this.toggleIsForward,this.threeAnimAction&&(this.threeAnimAction._loopCount=0),this.playing?this.threeAnimAction&&(this.threeAnimAction.timeScale=this.toggleIsForward?1:-1,this.toggleIsForward?(this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime)):this.timeoutId=window.setTimeout(()=>{var i;if(this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction){this.toggleIsForward?(this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction.time=this.rightFrameTime,this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime),this.threeAnimAction.paused=!1,this.threeAnimAction.timeScale=this.toggleIsForward?1:-1;let r=this.data.clipId.split("/")[1];Object.entries(this.animationControls.clipIdToAction).forEach(([n,a])=>{let s=n.split("/")[1];this.threeAnimAction!==a&&s===r&&a.isRunning()&&(t?a.fadeOut(.2):a.stop())}),t&&((i=this.threeAnimAction)==null||i.fadeIn(.2))}},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){var t;let e=(t=this.animationControls.clipIdToAction[this.data.clipId+"/"+this.data.object])==null?void 0:t.getClip();e&&(e.duration=this.duration),this.pause()}},SZ=class{constructor(e,t,i,r,n){this.data=e,this.page=t,this.eventManager=i,this.shared=r,this.condition=n,this.timeOutId=-1,this.scene=t.scene}dispatch(){if(Fr(this.shared,this.condition)===!1)return!1;this.data.target!==this.page.uuid&&(window.clearTimeout(this.timeOutId),this.timeOutId=window.setTimeout(()=>{this.play()},this.data.delay*1e3))}dispose(){window.clearTimeout(this.timeOutId)}play(){if(this.scene.children.every(t=>t.uuid!==this.data.target||t.data.uiScene))return;this.data.transition==="fade"&&this.data.duration>0&&this.eventManager.eventContext.renderer.renderFromSceneForSceneTransitionPass(this.scene,this.scene.activeCamera,this.data.duration*1e3),this.eventManager.deactivate(),this.eventManager.controlsManager.deactivate();let e=this.scene.activeCamera;this.scene.updatePage(this.data.target),this.scene.traverseVisibleEntity(t=>{t.type==="ParticleSystem"&&(t.sleep(),t.wakeUp(),t.data.autoPlay?t.start():t.stop())}),this.scene.activePage.switchToPlayCamera(),this.scene.activeCamera.copyViewPlaneSize(e),OD(this.scene.activePage,this.shared),this.eventManager.activate(),this.eventManager.controlsManager.activate(this.eventManager)}},CZ=class{constructor(e,t,i,r){this.data=e,this.page=t,this.shared=i,this.condition=r,this.evaluatedCondition=!1}checkConditions(){this.evaluatedCondition=Fr(this.shared,this.condition)}dispatch(){if(this.evaluatedCondition===!1)return!1;let e=this.shared.getVariable(this.data.variableId),t=MG(this.data.expression,this.shared,Sa.typeOfVariable(e));t!==void 0&&this.shared.updateVariable(this.data.variableId,typeof t=="string"?{textValue:t}:t)}dispose(){}},EZ=class{constructor(e,t,i,r){this.data=e,this.page=t,this.shared=i,this.condition=r,this.timeoutId=null}dispatchInner(){if(Fr(this.shared,this.condition)===!1)return!1;let e=this.shared.getDynamicVariablePlayState(this.data.variableId);if(this.data.mode==="PlayPause")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,e==="Playing"?"Paused":"Playing");else if(this.data.mode==="Play"&&e!=="Playing")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing");else if(this.data.mode==="Stop"&&e!=="Stopped")this.shared.setDynamicVariablePlayState(this.data.variableId,"Stopped");else if(this.data.mode==="Pause"&&e!=="Paused")this.shared.setDynamicVariablePlayState(this.data.variableId,"Paused");else if(this.data.mode==="Restart")this.shared.setDynamicVariablePlayState(this.data.variableId,"Restarted");else if(this.data.mode==="Toggle"){let t=this.shared.getDynamicVariableToggleIsForward(this.data.variableId);e==="Playing"?this.shared.setDynamicVariableToggleIsForward(this.data.variableId,t===void 0?!1:!t):(this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!t),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing"))}}dispatch(){let e=this.data.delay,t=this.shared.getDynamicVariablePlayState(this.data.variableId);this.data.mode==="PlayPause"&&t==="Playing"&&(e=this.data.pauseDelay),e!==0?(this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.timeoutId=null,this.dispatchInner()},e)):this.dispatchInner()}dispose(){this.timeoutId&&window.clearTimeout(this.timeoutId)}},dPe=class{constructor(e,t,i,r){this.data=e,this.page=t,this.shared=i,this.condition=r}dispatch(){if(Fr(this.shared,this.condition)===!1)return!1;(this.data.target==="single"?this.data.variableId?[this.data.variableId]:[]:Object.keys(this.shared.getVariables())).forEach(e=>{var i;this.shared.getVariable(e);let t=(i=this.shared.data.variables.data(e))==null?void 0:i.value;t!==void 0&&this.shared.updateVariable(e,t),this.shared.enableLocalStorageForPersistentVariables&&localStorage.removeItem(TM(e))})}dispose(){}},hPe=class{constructor(e,t,i,r){this.data=e,this.page=t,this.shared=i,this.condition=r}dispatch(){var e;if(Fr(this.shared,this.condition)===!1)return!1;this.data.userAPIId&&((e=this.shared.getUserAPI(this.data.userAPIId))==null||e.callUserAPI(this.shared))}dispose(){}};function Fr(e,t){if(t===void 0)return!0;if(t.expression.length===0)return!1;let i=MG(t.expression,e,"boolean");return t.negate?!i:!!i}function Dn(e,t,i,r,n,a){let s={Audio:[],Video:[],Particles:[],Link:[],Destroy:[],Create:[],Reset:[],Transition:[],SwitchCamera:[],Animation:[],SceneTransition:[],SetVariable:[],DynamicVariablePlay:[],ClearLocalStorage:[],UserAPI:[]},o=l=>({id:c,data:u})=>{try{u.type==="Audio"?Oa[e.type].includes("Audio")&&s.Audio.push(new X$(c,u,a,r,l)):u.type==="Video"&&!(a instanceof la)?Oa[e.type].includes("Video")&&s.Video.push(new MZ(c,u,a,r,l)):u.type==="Particles"?Oa[e.type].includes("Particles")&&s.Particles.push(new Q$(u,i,r,l)):u.type==="Link"?Oa[e.type].includes("Link")&&s.Link.push(new QTe(u,n.controlsManager,r,l)):u.type==="Create"?Oa[e.type].includes("Create")&&s.Create.push(new TZ(u,i,n.controlsManager,r,l)):u.type==="Destroy"?Oa[e.type].includes("Destroy")&&s.Destroy.push(new J$(u,i,n.controlsManager,r,l)):u.type==="Reset"?Oa[e.type].includes("Reset")&&s.Reset.push(new eZ(u,i,r,n,l)):u.type==="Transition"?Oa[e.type].includes("Transition")&&s.Transition.push(new bZ(e.type,u,i,r,l)):u.type==="SwitchCamera"?Oa[e.type].includes("SwitchCamera")&&s.SwitchCamera.push(new wZ(u,i,r,l)):u.type==="SceneTransition"?Oa[e.type].includes("SceneTransition")&&s.SceneTransition.push(new SZ(u,i,n,r,l)):u.type==="Animation"?Oa[e.type].includes("Animation")&&s.Animation.push(new _Z(u,i,n.animationControls,r,l)):u.type==="SetVariable"?Oa[e.type].includes("SetVariable")&&s.SetVariable.push(new CZ(u,i,r,l)):u.type==="DynamicVariablePlay"?Oa[e.type].includes("DynamicVariablePlay")&&s.DynamicVariablePlay.push(new EZ(u,i,r,l)):u.type==="Conditional"?Oa[e.type].includes("Conditional")&&(u.ifActions.forEach(o({expression:u.condition,negate:!1})),u.elseActions.forEach(o({expression:u.condition,negate:!0}))):u.type==="ClearLocalStorage"?Oa[e.type].includes("ClearLocalStorage")&&s.ClearLocalStorage.push(new dPe(u,i,r,l)):u.type==="UserAPI"&&Oa[e.type].includes("UserAPI")&&s.UserAPI.push(new hPe(u,i,r,l))}catch{}};return t.forEach(o()),s}function oa(e){Object.values(e).forEach(t=>{t.forEach(i=>{(i instanceof X$||i instanceof MZ||i instanceof Q$||i instanceof _Z||i instanceof bZ||i instanceof TZ||i instanceof J$||i instanceof wZ||i instanceof SZ||i instanceof eZ||i instanceof CZ||i instanceof EZ)&&i.dispose()})})}function fPe(e,t){let i;if("material"in e){let r=e.material;Array.isArray(r)?i=e.material[0].layers.find(n=>n.uuid===t):i=e.material.layers.find(n=>n.uuid===t)}if(i)return i.color.texture.image.img instanceof HTMLVideoElement?i.color.texture.image.img:void 0}var AZ=new Map,zg=new Map,Ym=class{constructor(e,t,i){this.data=t,this.delay=0,this.status="stopped";let{layerId:r,loop:n,volume:a,delay:s}=t;if(this.object=i,r===void 0)throw new Error("Missing property");let o=fPe(i,r);o&&(this.videoElement=o,this.videoElement.loop=n===1/0,cy&&(this.videoElement.autoplay=!0),a!==void 0&&(this.videoElement.volume=a)),s!==void 0&&(this.delay=s),zg.has(i.uuid)?zg.get(i.uuid).push(this):zg.set(i.uuid,[this]),AZ.set(e,this),this.pause()}mute(){!this.videoElement||(this.videoElement.muted=!0)}unMute(){!this.videoElement||(this.videoElement.muted=!1)}play(e){if(!this.videoElement)return;let t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e?(this.mute(),this.delay+=150):t?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{if(!this.videoElement)return;let i=this.videoElement.play();i!==void 0&&i.then(r=>{}).catch(r=>{this.play()}),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){!this.videoElement||(this.videoElement.pause(),this.status="paused")}stop(){!this.videoElement||(this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay())}playByToggle(){this.data.toggle==="stop"?this.status==="playing"?this.stop():(this.stop(),this.play()):this.data.toggle==="pause"?this.status==="playing"?this.pause():this.play():(this.stop(),this.play())}dispose(){!this.videoElement||(this.stop(),this.videoElement.muted=!0)}},XM=class{constructor(e){this.data=e}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(e){let t=AZ.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t[this.data.interaction](),this.disposeDelay()},this.data.delay)):t[this.data.interaction]())}pauseAllVideosFromObject(e){let t=zg.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(i=>i[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(i=>i[this.data.interaction]()))}pauseAllVideos(){let e=[...zg.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(i=>{i[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(i=>{i[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},MZ=class{constructor(e,t,i,r,n){if(this.data=t,this.shared=r,this.condition=n,t.interaction==="play")this.interaction=new Ym(e,t,i);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new XM(t);else throw new Error("Missing property")}dispatchBasic(){if(Fr(this.shared,this.condition)===!1)return!1;this.interaction instanceof Ym?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(Fr(this.shared,this.condition)===!1)return!1;this.interaction instanceof Ym?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},h9=(()=>{let e,t,i,r;function n(o){!e&&!f9()&&(t==null?void 0:t.sharedGameControlGlobals.createdObjects.length)>0&&(e=requestAnimationFrame(a)),o&&(t=o,r=o.requestRender)}function a(o){let l=i?o-i:0,c=t.sharedGameControlGlobals.createdObjects,u=t.sharedGameControlGlobals.nCreatedPerAction,d=c.length,h=0;for(;h<d;){let f=c[h];f.userData.createdTime===void 0&&(f.userData.createdTime=o),f.userData.lifetime===void 0&&f.userData.quantity===void 0||f.userData.lifetime&&o-f.userData.createdTime<f.userData.lifetime||f.userData.quantity&&u[f.userData.actionId]<=f.userData.quantity?(f.userData.velocity&&(f.position.addScaledVector(f.userData.velocity,l/1e3),f.updateMatrix(),r()),h++):(u[f.userData.actionId]>f.userData.quantity&&u[f.userData.actionId]--,c.splice(h,1),f.removeFromParent(),t.sharedGameControlGlobals.rapierWorld&&f.rigidBody?(t.sharedGameControlGlobals.colliderToEntity.delete(f.rigidBody.collider(0).handle),t.sharedGameControlGlobals.rapierWorld.removeRigidBody(f.rigidBody)):(f.bvhGeometry=void 0,t.sharedGameControlGlobals.entitiesWithTransformAnim=t.sharedGameControlGlobals.entitiesWithTransformAnim.filter(p=>p.bvhGeometry!==void 0)),d--,r())}e=h>0?requestAnimationFrame(a):void 0,i=h>0?o:void 0}function s(){f9()?e&&(cancelAnimationFrame(e),e=void 0,i=void 0):n()}return typeof document<"u"&&document.addEventListener("visibilitychange",s),n})();function f9(){return!!document&&document.hidden}var p9=new mi,pPe=new H,mPe=new H,TZ=class{constructor(e,t,i,r,n){this.data=e,this.page=t,this.controlsManager=i,this.shared=r,this.condition=n,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=kt.generateUUID(),this.dispatch=()=>{if(Fr(this.shared,this.condition)===!1)return!1;this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()},this.dispatchFromStart=()=>{if(Fr(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))},this.dispatchThrottled=e2e(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=()=>{this.intervalId===null&&(this.intervalId=window.setInterval(this.dispatch,1e3/this.data.creationSpeed))},this.dispatchStop=()=>{this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null)},this.dispatchInner=()=>{this.timeoutIdQueue.shift();let s=new Va(this.object);if(s.playModeVisible=!0,s.expand(),this.data.coordinateSystem!=="world"){let l=this.data.coordinateSystem,c=this.page.scene.find(l);c&&(c.updateMatrixWorldSVD(),s.hiddenMatrix.copy(c.matrixWorldRigid))}s.scale.copy(this.object.scale),s.position.fromArray(this.data.position),s.rotation.fromArray(this.data.rotation),s.updateMatrix(),this.page.add(s);let o=this.controlsManager.sharedGameControlGlobals;o.createdObjects.push(s),o.nCreatedPerAction[this.uniqueId]===void 0?o.nCreatedPerAction[this.uniqueId]=1:o.nCreatedPerAction[this.uniqueId]++,s.updateWorldMatrix(!0,!0),s.traverseObject(this.traverseObjectCB),h9(),this.controlsManager.requestRender()},this.traverseObjectCB=s=>{var u,d,h,f;s.hasNonUniformScale&&s.updateMatrixWorldSVD();let o;if(this.controlsManager.sharedGameControlGlobals.rapierWorld){if(s instanceof hl)if(s.objectForSample){if(s.objectForSample.dataPatched.physics.fusedBody)return;o=s.object}else return s.object.dataPatched.physics.fusedBody===!0&&s.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(s instanceof Va)o=s.object;else if(o=s,(u=o.dataPatched.cloner)==null?void 0:u.hideBase)return!0}else{if(s instanceof hl)return;s instanceof Va?o=s.object:o=s}this.data.destroy==="Time"?s.userData.lifetime=this.data.lifetime*1e3:this.data.destroy==="Quantity"&&(s.userData.quantity=this.data.destroyAfterQuantity,s.userData.actionId=this.uniqueId);let l=new H().fromArray(this.data.velocity),c=o.dataPatched;if(!(c.physics.enabled==="visibility"?!c.visible:!c.physics.enabled)&&(this.controlsManager.sharedGameControlGlobals.rapierWorld?(this.controlsManager.addRigidBody(s,o,{fromCreate:!0,dynamic:this.data.dynamic}),this.data.destroy==="Collision"&&((d=s.rigidBody)==null||d.collider(0).setActiveEvents(1),s.userData.hasCollisionDestroy=!0),s.matrixWorld.decompose(pPe,p9,mPe),l.applyQuaternion(p9),this.data.velocity.some(p=>p!==0)&&this.data.dynamic&&((h=s.rigidBody)==null||h.setLinvel(l.divideScalar(this.controlsManager.pixelsPerMeter),!0))):("geometry"in s.object&&this.controlsManager.addBoundsTree(s),this.data.velocity.some(p=>p!==0)&&this.data.dynamic&&(s.userData.velocity=l)),((f=o.dataPatched.physics)==null?void 0:f.fusedBody)===!0))return!0};let a=this.page.scene.find(this.data.object);if(!a)throw new Error("Missing Property");if(this.object=a,this.data.coordinateSystem!=="world"&&!this.page.scene.find(this.data.coordinateSystem))throw new Error("Missing Property");h9(i)}dispose(){this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null),this.timeoutIdQueue.forEach(e=>window.clearTimeout(e)),this.dispatchThrottled.cancel(),this.page.remove(...this.controlsManager.sharedGameControlGlobals.createdObjects),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}},PZ=200,w4=.02,x4=.3,vPe=65;new H;var m9=new H,v9=new H,gPe=new H,es=new H,_s=new H,hd=new H,_4=new pt,g9=new pt,yPe=new pt;new pt;var Jo=new mi,qc=new mi,Gl=new Vn(0,0,0,"YXZ"),bPe=new H(1,0,0),el=new H(0,1,0),wPe=new H(0,0,1),y9=new H(1,1,1);new Fs;var xPe=1,_Pe=.025,SPe=16e-6,b9=12,CPe=20,Qn=new Po,uo=new gn,EPe={type:"requestRender"},APe={type:"updateMatrix"},w9=Math.PI/6,QM=class extends Pa{constructor(e,t,i,r,n,a,s,o,l){var p;super(),this.object=e,this.domElement=t,this.data=i,this.gloabalPhysics=r,this.controlsManager=n,this.cameraFollow=a,this.camera=s,this.page=o,this.sharedAssets=l,this.enableDamping=!0,this.hiddenMatrix0=new pt,this.target0=new H,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.pixelsPerMeter=PZ,this.euler0=new Vn(0,0,0,"YXZ"),this.position0Cam=new H,this.quat0Cam=new mi,this.scale0Cam=new H,this.hiddenMatrix0Cam=new pt,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new Po(new H(0,-40,0),new H(0,40,0)),matrix:new pt,position:new H,rotation:new mi},this.euler=new Vn(0,0,0,"YXZ"),this.eulerDelta=new H,this.lastPosition=new H,this.lastCameraQuaternion=new mi,this.lastCameraPosition=new H,this.PI_2=Math.PI/2,this.prevMouse=new Pe,this.velocityTarget=new H,this.velocity=new H,this.directionXZ=new H,this.rotVelocityStick=new H,this.rotVelocityTarget=new H,this.rotVelocity=new H,this.rotDirection=new H,this.nonColliderRotOffset=new pt,this.nonColliderPosOffset=new pt,this.firstPointerId=-1,this.rot=new H,this.path=[],this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new pt,this.objectToTarget=new H,this.objectToTarget0=new H,this.objectToCamXZ=new H,this.objectToCamXZ0=new H,this.targetToCamera=new H,this.targetToCamera0=new H,this.cameraPolarAxis0=new H,this.targetPos=new H,this.targetQuat=new mi,this.lerpFactorPos=new H().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new mi,this.objXZQuatInv=new mi,this.objXZRotMat=new pt,this.isFirstPerson=!1,this.didHit=!1,this.groundVelocity=new H,this.pushedVelocity=new H,this.groundYRotation=0,this.objectRealQuat=new mi,this.colliderWorldQuat=new mi,this.groundNormal=new H,this.groundTilt=new mi,this.groundTiltInv=new mi,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.navMeshPathDest=null,this.position=new H,this.quaternion=new mi,this.scale=new H,this.initialAction=!0,this.onPointerDown=m=>{var v;!(m.target===this.domElement||m.target instanceof HTMLElement&&m.target.tagName==="SPLINE-VIEWER"&&((v=m.target.shadowRoot)!=null&&v.contains(this.domElement)))||this.firstPointerId!==-1||(this.firstPointerId=m.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!qs&&!H6&&this.domElement.requestPointerLock(),this.prevMouse.set(m.clientX,m.clientY))},this.onPointerUp=m=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),m.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=m=>{if(m.pointerId!==this.firstPointerId)return;let v=m.clientX-this.prevMouse.x,y=m.clientY-this.prevMouse.y;this.prevMouse.set(m.clientX,m.clientY),m.pointerType==="mouse"&&this.rotBy!=="keys"&&(H6&&u2e<15.5&&!qs?(this.eulerDelta.y=-v*this.mouseOrbitSensitivity,this.eulerDelta.x=-y*this.mouseOrbitSensitivity):(this.eulerDelta.y=-m.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-m.movementY*this.mouseOrbitSensitivity)),m.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-v*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-y*this.mouseOrbitSensitivity*5),this.controlsManager.requestRender()},this.onPointerlockChange=m=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?QM.isLocked=!0:QM.isLocked=!1},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.handleVisibilityChange=()=>{if(document!=null&&document.hidden)for(let m in this.movementState)this.movementState[m]=0},this.onKeyDown=m=>{!(m.target instanceof HTMLInputElement)&&(m.code==="ArrowLeft"||m.code==="ArrowUp"||m.code==="ArrowRight"||m.code==="ArrowDown"||m.code==="Space")&&m.preventDefault();for(let v of this.keyAssignments)if(m.key.toUpperCase()===v[1]||m.key===v[1]){this.movementState[v[0]]=1;break}this.controlsManager.requestRender()},this.onKeyUp=m=>{for(let v of this.keyAssignments)if(m.key.toUpperCase()===v[1]||m.key===v[1]||m.code.slice(3,m.code.length).toUpperCase()===v[1]){this.movementState[v[0]]=0;break}},this.copyVRGamePadValues=(m,v)=>{for(let y=2;y<4;y++){let x=m.axes[y];v===0?y===2?this.movementState.movePosX=x:this.movementState.movePosZ=x:(m.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,y===2?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(x)>=.3&&(this.vrEulerYOffset+=x<0?1:-1),this.movementState.rotPosY=x):this.moveMode==="fly"&&(this.movementState.moveNegY=x))}},this.sharedGameControlGlobals=n.sharedGameControlGlobals,e===s&&(this.isFirstPerson=!0),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.euler0.setFromQuaternion(this.quaternion,"YXZ");let c=this.euler0.clone(),u=c.y;if(this.objectRealQuat.copy(this.quaternion),c.y=0,this.quaternion.setFromEuler(c),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),c.set(0,u,0),this.quaternion.setFromEuler(c),this.rot.setFromEuler(c),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||this.cameraFollow===!0)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),this.cameraFollow===!0){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),this.camera.parent?(this.camera.hiddenMatrix.copy((p=this.camera)==null?void 0:p.parent.matrixWorld),this.camera.matrix.copy(this.camera.matrixWorld)):this.camera.hiddenMatrix.identity(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let m=new H(0,0,-1).applyQuaternion(this.camera.quaternion),v=new H().subVectors(this.position,this.camera.position);this.objectToCamXZ.copy(v),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let y,x;Math.abs(m.y)<1e-6?(v.y=0,m.y=0,x=v.projectOnVector(m)):v.y/m.y>0?x=m.multiplyScalar(v.y/m.y):x=m.multiplyScalar(v.length()),this.targetToCamera0.copy(x).negate(),y=this.camera.position.clone().add(x),this.objectToTarget0.subVectors(y,this.position);let b=new Vn().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-b.x,b.x=0,b.z=0,b.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(b)}if(this.object instanceof ja&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.rotByTouch=i.rotByTouch??"joystick",this.rotBy=i.rotBy??"keys",this.rotationMode=i.rotationMode??"normal",this.moveMode=i.moveMode??"walk",this.collisionEnabled=i.collisionEnabled,this.speedTranslate=(i.speedTranslate??250)*xPe,this.speedOrbit=(i.speedRotate??100)*_Pe,this.mouseOrbitSensitivity=(i.speedRotate??100)*SPe,this.keyAssignments=i.keyAssignments.map(m=>{let v=[m[0],m[1]];return v[1]===""?v[1]="ArrowUp":v[1]===""?v[1]="ArrowLeft":v[1]===""?v[1]="ArrowDown":v[1]===""?v[1]="ArrowRight":v[1]===""?v[1]="Shift":v[1]===""?v[1]="Enter":v[1]==="Space"?v[1]=" ":v[1]===""?v[1]="Meta":v[1]==="Ctrl"?v[1]="Control":v[1]==="Esc"&&(v[1]="Escape"),v}),i.rotBy==="mouse"){let m;m=this.keyAssignments.findIndex(v=>v[0]==="rotNegX"),m!==-1&&(this.keyAssignments[m][1]=""),m=this.keyAssignments.findIndex(v=>v[0]==="rotPosX"),m!==-1&&(this.keyAssignments[m][1]=""),m=this.keyAssignments.findIndex(v=>v[0]==="rotPosY"),m!==-1&&(this.keyAssignments[m][1]=""),m=this.keyAssignments.findIndex(v=>v[0]==="rotNegY"),m!==-1&&(this.keyAssignments[m][1]="")}this.lerpFactorPosStart=1-.02**(1/((i.delayPos[0]??.3)*60)),this.lerpFactorPosEnd=1-.02**(1/((i.delayPos[1]??.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/((i.delayRot[0]??.3)*60)),this.lerpFactorRotEnd=1-.02**(1/((i.delayRot[1]??.3)*60)),this.lerpFactorPosCamera=1-.02**(1/((i.delayPosCamera??.3)*60)),this.lerpFactorRotCamera=1-.02**(1/((i.delayRotCamera??.3)*60)),this.gravity=(this.gloabalPhysics.gravity??gv.defaultData.gravity)*b9,this.usePhysics=this.gloabalPhysics.usePhysics??gv.defaultData.usePhysics,this.jumpPower=i.jumpPower*CPe,this.resetYPosition=this.position.y+Math.abs(i.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=i.alignToGround??!1,this.orientMode=i.autoOrientMove?i.orientMode:"none",this.orientWith=i.orientWith??Ix.defaultDataThirdPerson.orientWith,this.slopeThresh=vPe*Math.PI/180,i.collider.type==="capsule"?(this.collider.radius=i.collider.radius,this.collider.segment.start.y=i.collider.height/2-i.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=i.collider.height*w4/this.pixelsPerMeter,this.stepThresh=i.collider.height*x4/this.pixelsPerMeter,this.colliderHeight=i.collider.height):i.collider.type==="sphere"?(this.collider.radius=i.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*i.collider.radius*w4/this.pixelsPerMeter,this.stepThresh=2*i.collider.radius*x4/this.pixelsPerMeter,this.colliderHeight=i.collider.radius*2):(this.offset=i.collider.height*w4/this.pixelsPerMeter,this.stepThresh=i.collider.height*x4/this.pixelsPerMeter,this.colliderHeight=i.collider.height),this.collider.type=i.collider.type;let d=new H().fromArray(i.collider.position),h=new mi().setFromEuler(new Vn().fromArray([...i.collider.rotation,"XYZ"]));this.collider.position.copy(d).multiply(this.scale),this.collider.rotation.copy(h),this.collider.matrix.compose(d,h,y9),i.cameraXAxis!==void 0&&(this.cameraXAxis=i.cameraXAxis,this.cameraYAxis=i.cameraYAxis,this.minPolarAngle=i.cameraRotXLimits[0],this.maxPolarAngle=i.cameraRotXLimits[1],this.minAzimuthAngleRel=i.cameraRotYLimits[0],this.maxAzimuthAngleRel=i.cameraRotYLimits[1]),this.forwardDir=i.forwardDirection??"-z",this.isFirstPerson&&(this.forwardDir="-z"),this.runMultiplier=i.runMultiplier??2;let f=i.navmesh.destinationHelperRadius*2;if(f>0){let m=new Zt;m.push({fi:0,data:{...ea.defaultData("light","phong"),alpha:0},id:"layer1"}),m.push({fi:0,data:{...ea.defaultData("color"),color:i.navmesh.destinationHelperColor,alpha:i.navmesh.destinationHelperColor.a},id:"layer2"});let v=new iD({layers:m},{scene:this.page.scene,shared:this.sharedAssets});this.navMeshPathDest=new Yr(sG.create({parameters:{width:f,height:f/10,hollow:.7}}),v),this.navMeshPathDest.material.userData.opacity0=i.navmesh.destinationHelperColor.a}this.activate()}reset(e=!1){if(this.object.hiddenMatrix.copy(this.hiddenMatrix0),e){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity();let t=new Vn().setFromQuaternion(this.quaternion,"YXZ"),i=t.y;this.objectRealQuat.copy(this.quaternion),t.y=0,this.quaternion.setFromEuler(t),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),t.set(0,i,0),this.quaternion.setFromEuler(t),this.rot.setFromEuler(t),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}else this.object instanceof ja?this.object.matrixAutoUpdate=!0:this.object.updateMatrix();this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.controlsManager.requestRender()}activate(){this.instantiateActions(),this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.addEventListener("visibilitychange",this.handleVisibilityChange)}deactivate(){this.disposeActions(),this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.removeEventListener("visibilitychange",this.handleVisibilityChange)}dispose(){var e;this.deactivate(),(e=this.navMeshPathDest)!=null&&e.parent&&this.page.remove(this.navMeshPathDest)}instantiateActions(){let e=this.data,t=this.sharedAssets;e.gameActions!==void 0&&(this.actions={},Dx.list.forEach(i=>{this.actions[i]=Dn({...e,disabled:!1,type:"GameControl"},e.gameActions[i],this.page,t,this.controlsManager.eventManager,this.object)})),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"),this.initialAction&&(this.initialAction=!1)}disposeActions(){this.initialAction=!1,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),oa(this.actions.idle),oa(this.actions.move),oa(this.actions.run),oa(this.actions.jump)}dispatchStartEvent(e){this.actions[e]!==void 0&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].Transition.forEach(t=>{t.play()}),this.actions[e].Animation.forEach(t=>{t.play(this.initialAction===!1)}),this.actions[e].Create.forEach(t=>{t.dispatchStart()}),this.actions[e].Audio.forEach(t=>{t.dispatchGameControl("start")}),this.actions[e].Particles.forEach(t=>{t.dispatchGameControl("start")})))}dispatchStopEvent(e){this.actions[e]!==void 0&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].Transition.forEach(t=>{t.stop(),t.object.currentState!==null&&t.object.changeSelectedState(null,{scene:this.page.scene,shared:this.sharedAssets})}),this.actions[e].Create.forEach(t=>{t.dispatchStop()}),this.actions[e].Audio.forEach(t=>{t.dispatchGameControl("stop")}),this.actions[e].Particles.forEach(t=>{t.dispatchGameControl("stop")})))}get colliderWorldPosition(){return es.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.position)}update(e,t,i){var o,l,c,u,d,h,f,p,m;if(this.gravity<0?this.position.y<this.resetYPosition:this.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let r=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let n=r*60,a=!1;if(this.usePhysics&&this.collisionEnabled){let v=_s.set(0,(this.velocity.y===0?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/(10*b9),1)*(this.gravity>0?1:-1):this.velocity.y)*r,0).divideScalar(this.pixelsPerMeter),y=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,v,(o=this.object.rigidBody)==null?void 0:o.collider(0).shape,1,!1,16,void 0,void 0,this.object.rigidBody);if(y){this.onObject=!0,this.groundNormal.set(y.normal2.x,y.normal2.y,y.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(a=!0),((l=y.collider.parent())==null?void 0:l.bodyType())===0&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let x=y.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let b of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(b.rigidBody===x&&b.userData.isFollowingObj!==this.object.uuid){(b.hasNonUniformScale?b.matrixWorldRigid:b.matrixWorld).decompose(es,qc,_s),this.groundVelocity.subVectors(es,b.prevT),this.object.getWorldPosition(_s).add(this.collider.position).sub(es),this.groundYRotation=Gl.setFromQuaternion(qc).y-b.prevR.y,hd.copy(_s).applyAxisAngle(el,this.groundYRotation),this.groundVelocity.add(hd.sub(_s)).divideScalar(r);break}}else this.onObject=!1}if(this.moveMode==="walk"&&this.collisionEnabled&&(this.movementState.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*n),this.moveMode==="fly"&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,this.forwardDir==="+z"&&this.directionXZ.multiplyScalar(-1),this.directionXZ.manhattanLength()>0&&(this.path=[]),this.navMeshPathDest){let v=this.navMeshPathDest.material;if(this.moveMode==="walk"&&this.path.length>1){this.navMeshPathDest.position.copy(this.path[this.path.length-1]),this.navMeshPathDest.parent||this.page.add(this.navMeshPathDest);let y=es.subVectors(this.path[1],this.position),x=_s.subVectors(this.path[1],this.path[0]);y.dot(x)<0?this.path.shift():(this.directionXZ.x=x.x,this.directionXZ.z=x.z),v.opacity=v.userData.opacity0}else v.opacity-=.05*v.userData.opacity0,this.navMeshPathDest.material.opacity<=0&&this.navMeshPathDest.parent&&this.page.remove(this.navMeshPathDest)}this.directionXZ.normalize(),this.movementState.run?this.moveForce=this.runMultiplier:this.moveForce=1,this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce,this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.didHit===!1&&this.pushedVelocity.manhattanLength()===0||this.usePhysics===!1?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**n),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**n),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**n)):this.velocity.copy(this.velocityTarget),(this.moveMode==="walk"?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.movementState.run?(this.dispatchStopEvent("move"),this.dispatchStartEvent("run")):(this.dispatchStopEvent("run"),this.dispatchStartEvent("move"))));let s=gPe.copy(this.velocity);if(this.orientMode!=="none"&&this.isFirstPerson===!1){let v=_s.copy(s);v.y=0,s.set(0,s.y,v.length()*(this.forwardDir==="+z"?1:-1))}if(this.directionXZ.manhattanLength()>0&&this.orientMode!=="none"&&this.isFirstPerson===!1)if(this.orientWith==="camera"&&this.path.length<=1){let v=es;this.camera.getWorldDirection(v);let y=hd.copy(el).multiplyScalar(v.dot(el));v.sub(y);let x=_s.copy(this.directionXZ);x.x*=-1,this.rot.y=v.angleTo(x)*(v.cross(x).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera}else this.rot.y=(this.path.length>1?0:this.euler.y)+Math.atan2(-this.directionXZ.z,this.directionXZ.x)+Math.PI/2*(this.forwardDir==="+z"?1:-1);if(Gl.setFromVector3(this.rot),this.moveMode==="walk"&&(Gl.x=0),s.applyEuler(Gl),a&&(qc.setFromUnitVectors(el,this.groundNormal),s.applyQuaternion(qc)),i){let v=Gl.set(0,this.vrEulerYOffset*w9,0);i.applyEuler(v),s.x+=i.x,s.z+=i.z,this.nonColliderPosOffset.elements[13]+=i.y*r}if(this.usePhysics===!0){let v=_s;this.pushedVelocity.set(0,0,0);for(let y of this.sharedGameControlGlobals.entitiesWithTransformAnim){let x=hd.setFromMatrixPosition(y.matrixWorld).sub(y.prevT).divideScalar(r).divideScalar(this.pixelsPerMeter),b=y.rigidBody.collider(0).castCollider(x,this.object.rigidBody.collider(0),es.copy(s).divideScalar(this.pixelsPerMeter),r,!1);x.multiplyScalar(this.pixelsPerMeter);let w=ji.is(y)?y:y.object;if(b!==null&&this.lastHitObj!==w){let S;y instanceof Va&&(S=y);let _=this.sharedGameControlGlobals.entityToCollisionEvents[w.uuid];if(_)for(let E of _)E.data.target==="character"&&(E.dispatch(S),w.dispatchEvent(eT));this.lastHitObj=w}if(b!==null){this.pushedVelocity.copy(x),v.copy(b.normal1).applyQuaternion(y.quaternion);break}}if(this.pushedVelocity.manhattanLength()!==0){let y=v.dot(s);y<0&&s.addScaledVector(v,-y),s.add(this.pushedVelocity)}else s.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.movementState.rotPosX||this.movementState.rotNegX)||this.rotationMode==="steer"&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.movementState.rotPosY||this.movementState.rotNegY)||this.rotationMode==="steer"&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(r),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**n):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**n),this.euler.x+=this.rotVelocity.x*r,this.euler.y+=this.rotVelocity.y*r+this.groundYRotation,this.rotVelocityTarget.y===0&&this.directionXZ.manhattanLength()===0?this.rotationAccumWhenOrientWithCamera=0:(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*r),this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){if(this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(el,this.euler.y-this.euler0.y);let v=_s.copy(this.objectToCamXZ).normalize(),y=hd.copy(s).multiplyScalar(r);y.y=0;let x=y.sub(es.copy(v).multiplyScalar(y.dot(v))).cross(v).y;this.euler.y-=Math.atan2(x,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*r+this.groundYRotation,this.rotVelocityTarget.y!==0&&(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.euler.y=this.rot.y);if(this.cameraFollow===!0&&(this.moveMode==="walk"?this.cameraXAxis==="Limit"?this.euler.x=kt.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=kt.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):this.cameraXAxis==="Limit"&&(this.euler.x=kt.clamp(this.euler.x,-this.PI_2,this.PI_2))),this.moveMode==="fly"?this.rot.x=this.euler.x:this.isFirstPerson&&(t?(Gl.copy(t),Gl.y=0):(Gl.copy(this.euler),Gl.y=0),this.nonColliderRotOffset.makeRotationFromEuler(Gl)),t&&(this.moveMode==="walk"?(this.rot.y=t.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(t),this.rot.y+=this.vrEulerYOffset*w9),Jo.setFromAxisAngle(bPe,this.rot.x),qc.setFromAxisAngle(el,this.rot.y),qc.multiply(Jo),Jo.setFromAxisAngle(wPe,this.rot.z),qc.multiply(Jo),this.quaternion.copy(qc),this.objectRealQuat.multiplyQuaternions(this.quaternion,this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let v=_s.copy(s).multiplyScalar(r/this.pixelsPerMeter),y=null;this.didHit=!1;let x=new H;for(let b=0;b<5;b++){let w=v.length(),S=hd.copy(v).normalize();if(y=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(x),this.colliderWorldQuat,S,(c=this.object.rigidBody)==null?void 0:c.collider(0).shape,w,!1,24,void 0,void 0,this.object.rigidBody),y!==null){this.didHit=!0;let _=this.sharedGameControlGlobals.colliderToEntity.get(y.collider.handle);if(_!==this.lastHitObj&&b===0){this.lastHitObj=_;let M=this.sharedGameControlGlobals.entityToCollisionEvents[_==null?void 0:_.uuid];if(M){for(let T of M)if(T.data.target==="character"){let P=((u=this.sharedGameControlGlobals.rapierWorld)==null?void 0:u.getCollider(y.collider.handle))._parent,D;if(_.cloner){for(let k of _.cloner.children)if(k.rigidBody===P){D=k;break}}T.dispatch(D),_.dispatchEvent(eT)}}}let E=m9.set(y.normal2.x,y.normal2.y,y.normal2.z).applyQuaternion(this.colliderWorldQuat),C=v9.copy(S).multiplyScalar(y.toi).dot(E),A=y.toi;if(A===0&&(this.position.y+=this.offset*this.pixelsPerMeter),C>this.offset&&(A=y.toi*(C-this.offset)/C,x.addScaledVector(S,A)),v.copy(S).multiplyScalar(w-A),Math.acos(-E.y)>this.slopeThresh){let M=this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(x),T=hd.copy(y.witness2).applyQuaternion(this.colliderWorldQuat);T.y=0;let P=M.add(T);P.y+=this.stepThresh;let D=this.sharedGameControlGlobals.rapierWorld.castShape(P,this.colliderWorldQuat,v,(d=this.object.rigidBody)==null?void 0:d.collider(0).shape,1,!1,24,void 0,void 0,this.object.rigidBody);D!==null&&D.toi===0&&(E.y=0,E.normalize())}v.addScaledVector(E,-v.dot(E))}else{b===0&&this.directionXZ.manhattanLength()!==0&&(this.lastHitObj=null),x.add(v);break}}this.position.addScaledVector(x,this.pixelsPerMeter),(h=this.object.rigidBody)==null||h.setTranslation(es.copy(this.position).divideScalar(this.pixelsPerMeter),!0),(f=this.object.rigidBody)==null||f.setRotation(Jo.copy(this.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let v=this.onObject?1:5,y=s.multiplyScalar(r/v);for(let x=0;x<v;x++)this.position.add(y),this.collisionAdjustment(r/v)}else this.position.addScaledVector(s,r);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.matrix.compose(this.position,this.quaternion,this.scale),this.object.matrixWorldNeedsUpdate=!0,this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let v=this.objectToTarget.add(this.position),y=this.targetToCamera.add(v);_4.lookAt(y,v,el).setPosition(y),_4.decompose(this.targetPos,this.targetQuat,es),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**n),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**n),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=kt.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=kt.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.object.dispatchEvent(APe),this.path.length<2&&this.lastPosition.distanceToSquared(this.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(this.camera===void 0||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode==="fly"||this.onObject===!0||this.collisionEnabled===!1)&&(this.navMeshPathDest===null||this.navMeshPathDest.material.opacity<-.04*((m=(p=this.navMeshPathDest)==null?void 0:p.material)==null?void 0:m.userData.opacity0))?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.position),this.object.dispatchEvent(EPe),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let e=Jo.setFromAxisAngle(el,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?kt.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(e);let t;this.cameraXAxis==="Limit"?t=kt.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):t=kt.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let i=es.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&i.applyQuaternion(e);let r=qc.setFromAxisAngle(i,t);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(e),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(r)}groundTiltAdjustment(e){el.angleTo(e)*180/Math.PI<15||el.angleTo(e)*180/Math.PI>85?Jo.identity():Jo.setFromUnitVectors(el,e),this.groundTilt.slerp(Jo,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(e){var n;let t=v9.set(0,0,0);this.object.matrix.compose(this.position,this.quaternion,this.scale);let i=_4.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(es,Jo,_s).compose(es,Jo,y9);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(a=>{if(a===this.object||a.isDescendantOf(this.object))return;uo.makeEmpty(),a.updateMatrixWorldSVD();let s=a.matrixWorldRigid,o=g9.copy(s).invert(),l=yPe.copy(g9).multiply(i);Qn.copy(this.collider.segment),Qn.start.applyMatrix4(l),Qn.end.applyMatrix4(l);let c=m9.copy(this.position).applyMatrix4(o);uo.expandByPoint(Qn.start),uo.expandByPoint(Qn.end),uo.min.addScalar(-this.collider.radius),uo.max.addScalar(this.collider.radius),a.bvhGeometry.boundsTree.shapecast({traverseBoundsOrder(u){return u.distanceToPoint(Qn.end)},intersectsBounds:u=>u.intersectsBox(uo),intersectsTriangle:u=>{let d=es,h=_s,f=u.closestPointToSegment(Qn,d,h);if(f<this.collider.radius){let p=this.collider.radius-f,m=h.sub(d).normalize(),v=hd.copy(c);v.addScaledVector(m,p);let y=v.applyMatrix4(s).sub(this.position);t.add(y),Qn.start.addScaledVector(m,p),Qn.end.addScaledVector(m,p)}}})}),uo.makeEmpty(),Qn.copy(this.collider.segment),Qn.start.applyMatrix4(i),Qn.end.applyMatrix4(i),uo.expandByPoint(Qn.start),uo.expandByPoint(Qn.end),uo.min.addScalar(-this.collider.radius),uo.max.addScalar(this.collider.radius),(n=this.sharedGameControlGlobals.staticMeshBVH)==null||n.shapecast({traverseBoundsOrder(a){return a.distanceToPoint(Qn.end)},intersectsBounds:a=>a.intersectsBox(uo),intersectsTriangle:a=>{let s=es,o=_s,l=a.closestPointToSegment(Qn,s,o);if(l<this.collider.radius){let c=this.collider.radius-l,u=o.sub(s).normalize();this.alignToGround&&this.groundTiltAdjustment(u),t.addScaledVector(u,c),Qn.start.addScaledVector(u,c),Qn.end.addScaledVector(u,c)}}}),this.onObject=Math.abs(t.y)>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let r=Math.max(0,t.length()-1e-5);t.normalize().multiplyScalar(r),this.position.add(t)}},DZ=QM;DZ.isLocked=!1;var MPe=_h(NH());function ou(e,t){let i=new Kt;if(t){let a=t.elements,s=a[0]**2+a[1]**2+a[2]**2,o=a[4]**2+a[5]**2+a[6]**2,l=a[8]**2+a[9]**2+a[10]**2,c=a[0]**2+a[4]**2+a[8]**2,u=a[1]**2+a[5]**2+a[9]**2,d=a[2]**2+a[6]**2+a[10]**2,h=1e-8;if(s<h||o<h||l<h||c<h||u<h||d<h)return i.setAttribute("position",new It([],3)),i.setIndex([]),i}if(!e.getAttribute("position"))return i.setAttribute("position",new It([],3)),i.setIndex([]),i;let{positions:r,triIndices:n}=uS(e.getAttribute("position"),e.getIndex());return i.setAttribute("position",new It(r,3)),i.setIndex(n),t&&i.applyMatrix4(t),i}var TPe=new pt,PPe=new pt,$l=[[0,0,0],[0,0,0],[0,0,0]];function IZ(e){let t=e.elements;$l[0][0]=t[0],$l[0][1]=t[4],$l[0][2]=t[8],$l[1][0]=t[1],$l[1][1]=t[5],$l[1][2]=t[9],$l[2][0]=t[2],$l[2][1]=t[6],$l[2][2]=t[10];let{u:i,v:r}=(0,MPe.SVD)($l),n=TPe.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),a=PPe.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1);return n.multiply(a.transpose())}var DPe=class extends Pj{constructor(){super(),this.layers.enable(3),this.layers.enable(8)}setFromCamera(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e,t=!0,i=[]){return e.forEach(r=>{r.visible&&this.intersectObject(r,t,i)}),i}createRaycastLineHelper(){let e=new Sh({color:65280,linewidth:10}),t=new H(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),i=new H(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),r=this.camera.far-this.camera.near,n=new H().addVectors(t,i.multiplyScalar(r)),a=new Kt;return a.setFromPoints([t,n]),new ex(a,e)}},OZ=e=>e instanceof Zm||e instanceof qm;function IPe(e,t){return e.distance-t.distance}function RZ(e,t,i){if(!(!su(t)||!t.visible)){ll(t)&&t.raycast(e,i);for(let r of t.children)RZ(e,r,i)}}function o2(e,t,i,r=!1){if(!r&&!i.some(a=>Xx(e,a)!==void 0))return[];let n=[];return t.children.forEach(a=>RZ(e,a,n)),n.sort(IPe),n}function JM(e){let t=[];if(e.length){let i=e[0].object;su(i)&&t.push(i);let r=i.parent;for(;r;)OZ(r)&&t.push(r),r=r.parent}return t}function lu(e,t,i,r){let n=e.frame;if(n){let a=t[0]*n.width,s=(1-t[1])*n.height;for(let o of i){let l=o===n.uuid?n:n.find(o);if(l!=null&&l.intersects(a,s))return r(l),!0}}return!1}function Xx(e,t){if(ll(t)){if(t.visible){let i=[];return t.raycast(e,i),i.length?i[0]:void 0}}else if(OZ(t))return kZ(e,t)}function kZ(e,t){if(!(!su(t)||!t.visible)){if(ll(t)){let i=[];if(t.raycast(e,i),i.length)return i[0]}for(let i of t.children){let r=kZ(e,i);if(r)return r}}}function OPe(e,t,i){return{x:(e-(i.left+window.scrollX))/i.width*2-1,y:-((t-(i.top+window.scrollY))/i.height)*2+1}}function RPe(e,t,i){return{x:(e-(i.left+window.scrollX))/i.width,y:1-(t-(i.top+window.scrollY))/i.height}}var kPe=class{constructor(e,t,i,r,n,a,s,o){this.renderer=e,this.publish=t,this.scene=i,this.getCamera=r,this.sharedAssets=n,this.requestRender=a,this.isExport=s,this.frame=o,this.raycaster=new DPe,this._useWindowEvents=!1,this.pointerWorld={x:0,y:0},this.pointerScreen={x:0,y:0},this._useWindowEvents=t.mouseEventTarget==="window",this.domElement=e.domElement,this.eventElement=this._useWindowEvents?window:e.domElement,this._domRect=this.domElement.getBoundingClientRect()}get stopRaycast(){return this.publish.stopRaycast}get page(){return this.scene.activePage}set useWindowEvents(e){this._useWindowEvents=e,this.eventElement=e?window:this.renderer.domElement}get useWindowEvents(){return this._useWindowEvents}set domRect(e){this._domRect=e}get domRect(){return this._domRect}updateRaycaster(e){var r;let{pageX:t,pageY:i}=((r=e.touches)==null?void 0:r.length)>0?e.touches[0]:e;this.pointerWorld=OPe(t,i,this._domRect),this.pointerScreen=RPe(t,i,this._domRect),this.raycaster.setFromCamera(this.pointerWorld,this.getCamera())}},Za=class{constructor(t){this.eventContext=t,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},RD=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],LZ=e=>{var t;return(t=RD.find(([i,r])=>r===e))==null?void 0:t[0]},gy=e=>{var t;return(t=RD.find(([i])=>i===e))==null?void 0:t[1]},LPe=(e,t)=>{let i=LZ(e);if(i){let r=new CustomEvent(i,{bubbles:!0});return Object.defineProperty(r,"target",{writable:!1,value:t}),r}},BPe=class extends Za{constructor(){super(...arguments),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=e=>{var r;if(!e.eventName||!e.target||e.eventName==="Scroll")return;let t=(r=this.splineEvents[LZ(e.eventName)])==null?void 0:r[e.target.uuid];if(!t)return;e.eventName==="Scroll"&&e.deltaY!==void 0&&Object.assign(t,{deltaY:e.deltaY});let{domElement:i}=this.eventContext;i.dispatchEvent(t)}}connect(){let{page:e}=this.eventContext;e.traverseEntity(t=>{var i,r;if((i=t.data)!=null&&i.events.length){for(let[n,a]of RD)if(t.data.events.some(s=>s.data.type===a&&!s.data.disabled)){this.objectsPerEvents.has(n)?(r=this.objectsPerEvents.get(n))==null||r.push(t):this.objectsPerEvents.set(n,[t]);let s={id:t.uuid,name:t.name},o=LPe(a,s),l=this.splineEvents[n];l?l[t.uuid]=o:this.splineEvents[n]={[t.uuid]:o}}}}),this.objectsPerEvents.forEach(t=>{t.forEach(i=>{i.addEventListener("beginEvent",this.onBeginEvent)})})}disconnect(){this.objectsPerEvents.forEach(e=>{e.forEach(t=>{t.removeEventListener("beginEvent",this.onBeginEvent)})})}},NPe=class{constructor(e,t,i,r,n,a){if(this.id=e,this.data=t,this.object=i,this.entered=!1,(t.type==="KeyDown"||t.type==="KeyUp"||t.type==="KeyPress")&&!t.key)throw new Error("Missing property");this.actions=Dn(t,t.actions,r,n,a,i)}disconnect(){oa(this.actions)}dispatchHeld(e){this.actions.Create.forEach(t=>{e&&t.dispatchThrottled.cancel(),t.dispatchThrottled()})}dispatch(e=!1){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.data.type==="MousePress"||this.data.type==="KeyPress"?this.entered||(this.entered=!0,this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatchStart())):(this.actions.Transition.some(t=>t.playing&&t.data.runMode!=="Toggle")||this.actions.Transition.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.SwitchCamera.some(t=>t.playing&&t.data.runMode!=="Toggle")||this.actions.SwitchCamera.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.Animation.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()})),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),e===!1&&this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.Animation.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()),this.actions.Create.forEach(e=>e.dispatchStop()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},FPe=class extends Za{constructor(e,t,i){super(e),this.eventManager=t,this.useForRaycastProperty=i,this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.canvasMouseEvents=[],this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.sceneInterects=null,this.onCanvasRaycast=r=>{if(this.useForRaycastProperty===!0&&this.sceneInterects===null){this.eventContext.updateRaycaster(r);let{raycaster:n,page:a}=this.eventContext,s=o2(n,a,[],!0);this.sceneInterects=s,s.length&&(this.eventContext.sharedAssets.raycastProperty={x:s[0].point.x,y:s[0].point.y,z:s[0].point.z,objX:s[0].object.matrixWorld.elements[12],objY:s[0].object.matrixWorld.elements[13],objZ:s[0].object.matrixWorld.elements[14]})}},this.onCanvasMouseDown=r=>{(r.target===this.eventContext.domElement||r.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(n=>{(n.data.type==="MouseDown"||n.data.type==="MousePress")&&(this.onCanvasRaycast(r),n.dispatch())})},this.onCanvasMouseUp=r=>{(r.target===this.eventContext.domElement||r.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(n=>{n.data.type==="MouseUp"?(this.onCanvasRaycast(r),n.dispatch()):n.data.type==="MousePress"&&n.dispatchRelease()})},this.onMouseDown=r=>{ai.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseEvent("MouseDown"))},this.onMouseUp=r=>{ai.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=r=>{ai.length>1||(this.eventContext.updateRaycaster(r),this.handleMousePressEvent())},this.onMousePressRelease=r=>{ai.length>1||(this.eventContext.updateRaycaster(r),this.handleMousePressEvent(!0))},this.onKeyDown=r=>{this.heldKeys[r.key]||(this.handleKeyEvent(r,"KeyDown"),this.handleKeyEventHeld(r,"KeyDown",!0)),this.heldKeys[r.key]=!0},this.onKeyUp=r=>{this.handleKeyEvent(r,"KeyUp"),this.handleKeyEventHeld(r,"KeyUp",!0)},this.onKeyPressDown=r=>{this.heldKeysPress[r.key]?this.handleKeyEventHeld(r,"KeyPress"):(this.handleKeyEvent(r,"KeyPress"),this.handleKeyEventHeld(r,"KeyPress",!0)),this.heldKeysPress[r.key]=!0},this.onKeyPressUp=r=>{this.handleKeyEvent(r,"KeyPress",!0)},this.releaseHeldKey=r=>{delete this.heldKeys[r.key]},this.releaseHeldKeyPress=r=>{delete this.heldKeysPress[r.key]},this._onUserEvent=({eventName:r,target:n,reverse:a})=>{var o,l,c,u;if(!r||!n)return;let s=gy(r);s&&(s==="MouseDown"||s==="MouseUp"||s==="MousePress"?(n.dispatchEvent({type:"beginEvent",eventName:s}),(l=(o=this.eventsPerObjects[s])==null?void 0:o[n.uuid])==null||l.forEach(d=>{d.dispatchUserEvent(a)})):(s==="KeyDown"||s==="KeyUp"||s==="KeyPress")&&(n.dispatchEvent({type:"beginEvent",eventName:s}),(u=(c=this.eventsPerObjects[s])==null?void 0:c[n.uuid])==null||u.forEach(d=>{d.dispatchUserEvent()})))}}connect(){var n,a,s,o,l,c;let{page:e,sharedAssets:t,domElement:i}=this.eventContext,r=(u,d)=>{var f,p;if(!((f=u.data)!=null&&f.events.length))return;let h=["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"];for(let m of h){let v=this.eventsPerObjects[m];u.data.events.filter(({data:y})=>y.type===m&&y.disabled!==!0).forEach(({id:y,data:x})=>{try{let b=new NPe(y,x,u,e,t,this.eventManager);b.actions.Video.length&&(this.hasVideoAction=!0),(x.type==="MouseDown"||x.type==="MouseUp"||x.type==="MousePress")&&(x.mode==="Canvas"||x.mode==="Window")?this.canvasMouseEvents.push(b):v[u.uuid]?v[u.uuid].some(w=>w.id===b.id)||v[u.uuid].push(b):v[u.uuid]=[b]}catch{}}),(p=v[u.uuid])!=null&&p.length&&this.objectsPerTypes[m].push(u instanceof la&&(m==="MouseDown"||m==="MouseUp"||m==="MousePress")?d:u)}};e.traverseEntity(u=>{var d;(u instanceof Na||u instanceof ta)&&((d=u.frame)==null||d.traverse(h=>{r(h,u)})),r(u)}),this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),i.addEventListener("pointerdown",this.onCanvasMouseDown),i.addEventListener("pointerup",this.onCanvasMouseUp),((n=this.objectsPerTypes.MouseDown)!=null&&n.length||this.useForRaycastProperty)&&(this.domEventsNeeded.add("pointerdown"),i.addEventListener("pointerdown",this.onMouseDown)),(a=this.objectsPerTypes.MouseUp)!=null&&a.length&&(this.domEventsNeeded.add("pointerup"),i.addEventListener("pointerup",this.onMouseUp)),(s=this.objectsPerTypes.MousePress)!=null&&s.length&&(this.domEventsNeeded.add("pointerdown"),i.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),i.addEventListener("pointerup",this.onMousePressRelease)),(o=this.objectsPerTypes.KeyDown)!=null&&o.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),(l=this.objectsPerTypes.KeyUp)!=null&&l.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),(c=this.objectsPerTypes.KeyPress)!=null&&c.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach(([u,d])=>{d.forEach(h=>{h.addEventListener("userEvent",this._onUserEvent)})})}disconnect(){let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},e.removeEventListener("pointerdown",this.onCanvasMouseDown),e.removeEventListener("pointerup",this.onCanvasMouseUp),e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerdown",this.onMousePressDown),e.removeEventListener("pointerup",this.onMouseUp),e.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach(t=>{Object.values(t).forEach(i=>{i.forEach(r=>{r.disconnect()})})}),this.canvasMouseEvents.forEach(t=>{t.disconnect()}),Object.entries(this.objectsPerTypes).forEach(([t,i])=>{i.forEach(r=>{r.removeEventListener("userEvent",this._onUserEvent)})})}handleMouseEvent(e){var o,l,c,u;let{stopRaycast:t,raycaster:i,page:r,pointerScreen:n}=this.eventContext,a=this.objectsPerTypes[e],s=a.filter(d=>!(d instanceof la));if(!(!a.length&&!this.useForRaycastProperty)&&!(r.uiCanvas&&lu(r,[n.x,n.y],Object.keys(this.eventsPerObjects[e]),d=>{this.handleObjectMouseEventDispatch(d,e)}))){if(t||this.useForRaycastProperty){let d;if(this.sceneInterects===null?d=o2(i,r,s,this.useForRaycastProperty):(d=this.sceneInterects,this.sceneInterects=null),this.useForRaycastProperty&&d.length&&(this.eventContext.sharedAssets.raycastProperty={x:d[0].point.x,y:d[0].point.y,z:d[0].point.z,objX:d[0].object.matrixWorld.elements[12],objY:d[0].object.matrixWorld.elements[13],objZ:d[0].object.matrixWorld.elements[14]}),t){let h=[((l=(o=d[0])==null?void 0:o.uv)==null?void 0:l.x)??0,((u=(c=d[0])==null?void 0:c.uv)==null?void 0:u.y)??0];JM(d).forEach(f=>{f instanceof Na&&lu(f,h,Object.keys(this.eventsPerObjects[e]),p=>{this.handleObjectMouseEventDispatch(p,e)}),this.eventsPerObjects[e][f.uuid]&&this.handleObjectMouseEventDispatch(f,e)})}}t||s.forEach(d=>{var f,p;let h=Xx(i,d);h&&(this.handleObjectMouseEventDispatch(d,e),d instanceof Na&&lu(d,[((f=h==null?void 0:h.uv)==null?void 0:f.x)??0,((p=h==null?void 0:h.uv)==null?void 0:p.y)??0],Object.keys(this.eventsPerObjects[e]),m=>{this.handleObjectMouseEventDispatch(m,e)}))})}}handleMousePressEvent(e=!1){let t="MousePress",i=this.objectsPerTypes[t],r=i.filter(a=>!(a instanceof la)),n=[];if(i.length){if(!e){let{stopRaycast:a,raycaster:s,page:o,pointerScreen:l}=this.eventContext,c=!1;if(o.uiCanvas&&(c=lu(o,[l.x,l.y],Object.keys(this.eventsPerObjects[t]),u=>{n.push(u)})),a&&!c){let u=o2(s,o,r);n=JM(u),u.forEach(d=>{var h,f;d.object instanceof Na&&lu(d.object,[((h=d==null?void 0:d.uv)==null?void 0:h.x)??0,((f=d==null?void 0:d.uv)==null?void 0:f.y)??0],Object.keys(this.eventsPerObjects[t]),p=>{n.push(p)})})}else r.forEach(u=>{var h,f;let d=Xx(s,u);d&&(n.push(u),u instanceof Na&&lu(u,[((h=d==null?void 0:d.uv)==null?void 0:h.x)??0,((f=d==null?void 0:d.uv)==null?void 0:f.y)??0],Object.keys(this.eventsPerObjects[t]),p=>{n.push(p)}))})}this._prevObjects.length&&this._prevObjects.forEach(a=>{n.includes(a)||this.handleObjectMouseEventDispatchRelease(a,t)}),n.length&&n.forEach(a=>{this.handleObjectMouseEventDispatch(a,t)}),this._prevObjects=n}}handleObjectMouseEventDispatch(e,t){var i,r;e.dispatchEvent({type:"beginEvent",eventName:t}),(r=(i=this.eventsPerObjects[t])==null?void 0:i[e.uuid])==null||r.forEach(n=>{n.dispatch()})}handleObjectMouseEventDispatchRelease(e,t){var i,r;e.dispatchEvent({type:"beginEvent",eventName:t}),(r=(i=this.eventsPerObjects[t])==null?void 0:i[e.uuid])==null||r.forEach(n=>{n.dispatchRelease()})}handleKeyEvent(e,t,i=!1){this.objectsPerTypes[t].forEach(r=>{let n=this.eventsPerObjects[t][r.uuid];n.some(({data:a})=>"key"in a&&a.key===e.key)&&r.dispatchEvent({type:"beginEvent",eventName:t}),n.forEach(a=>{"key"in a.data&&a.data.key===e.key&&(i?a.dispatchRelease():a.dispatch(!0))})})}handleKeyEventHeld(e,t,i=!1){this.objectsPerTypes[t].forEach(r=>{this.eventsPerObjects[t][r.uuid].forEach(n=>{"key"in n.data&&n.data.key===e.key&&n.dispatchHeld(i)})})}},zPe=new H,VPe=new H,BZ=class{constructor(e,t,i,r,n){this.actionsIn=Dn(e,e.inActions,i,r,n,t),this.actionsOut=Dn(e,e.outActions,i,r,n,t)}disconnect(){oa(this.actionsIn),oa(this.actionsOut)}},UPe=class extends BZ{constructor(e,t,i,r,n,a){super(t,i,r,n,a),this.id=e,this.data=t,this.object=i,this.stage="out",this.objects=[],this.onUpdateMatrixWorld=()=>{for(let h of this.objects)if(!h.visible)return;let c=zPe.setFromMatrixPosition(this.objects[0].matrixWorld),u=VPe.setFromMatrixPosition(this.objects[1].matrixWorld),d=c.distanceTo(u)<=this.distance?"in":"out";if(this.stage!==d){this.stage=d;let h=d==="in"?this.actionsIn:this.actionsOut;h.Audio.forEach(f=>f.dispatchConditional()),h.Particles.forEach(f=>f.dispatchConditional()),h.Video.forEach(f=>f.dispatchConditional()),h.Link.forEach(f=>f.dispatch()),h.Create.forEach(f=>f.dispatch()),h.Destroy.forEach(f=>f.dispatch()),h.Reset.forEach(f=>f.dispatch()),h.Transition.forEach(f=>{f.object.currentTransitionEvent!==this&&(f.object.currentTransitionEvent=this),f.init()}),h.Transition.forEach(f=>f.play()),h.Animation.forEach(f=>f.play()),h.SwitchCamera.forEach(f=>f.play()),h.SceneTransition.forEach(f=>f.dispatch()),h.SetVariable.forEach(f=>f.checkConditions()),h.SetVariable.forEach(f=>f.dispatch()),h.DynamicVariablePlay.forEach(f=>f.dispatch()),h.ClearLocalStorage.forEach(f=>f.dispatch()),h.UserAPI.forEach(f=>f.dispatch())}};let{distance:s,fromObject:o,toObject:l}=t.condition;this.distance=s;for(let c of[o,l]){if(!c)throw new Error("Missing property");let u=r.find(c);if(!u)throw new Error("Missing property");this.objects.push(u)}}connect(){window.setTimeout(()=>{this.objects.forEach(e=>{e.addEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)}),this.onUpdateMatrixWorld()},0)}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach(e=>{e.removeEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)})}},HPe=class extends BZ{constructor(e,t,i,r,n,a){var l;super(t,i,r,n,a),this.id=e,this.data=t,this.object=i,this.onBegin=({target:c,state:u})=>{this.toState!==u&&(this.actionsOut.Audio.forEach(d=>d.dispatchConditional()),this.actionsOut.Particles.forEach(d=>d.dispatchConditional()),this.actionsOut.Video.forEach(d=>d.dispatchConditional()),this.actionsOut.Link.forEach(d=>d.dispatch()),this.actionsOut.Create.forEach(d=>d.dispatch()),this.actionsOut.Destroy.forEach(d=>d.dispatch()),this.actionsOut.Reset.forEach(d=>d.dispatch()),this.actionsIn.Transition.forEach(d=>d.pause()),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach(d=>d.play()),this.actionsOut.Animation.forEach(d=>d.play()),this.actionsIn.SwitchCamera.forEach(d=>d.pause()),this.actionsOut.SwitchCamera.forEach(d=>d.play()),this.actionsOut.SceneTransition.forEach(d=>d.dispatch()),this.actionsOut.SetVariable.forEach(d=>d.checkConditions()),this.actionsOut.SetVariable.forEach(d=>d.dispatch()),this.actionsOut.DynamicVariablePlay.forEach(d=>d.dispatch()),this.actionsOut.ClearLocalStorage.forEach(d=>d.dispatch()),this.actionsOut.UserAPI.forEach(d=>d.dispatch()))},this.onComplete=({target:c,state:u})=>{this.toState===u&&(this.actionsIn.Audio.forEach(d=>d.dispatchConditional()),this.actionsIn.Particles.forEach(d=>d.dispatchConditional()),this.actionsIn.Video.forEach(d=>d.dispatchConditional()),this.actionsIn.Link.forEach(d=>d.dispatch()),this.actionsIn.Create.forEach(d=>d.dispatch()),this.actionsIn.Destroy.forEach(d=>d.dispatch()),this.actionsIn.Reset.forEach(d=>d.dispatch()),this.actionsOut.Transition.forEach(d=>d.pause()),this.actionsOut.Transition.forEach(d=>d.pause()),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach(d=>d.play()),this.actionsIn.Animation.forEach(d=>d.play()),this.actionsOut.SwitchCamera.forEach(d=>d.pause()),this.actionsIn.SwitchCamera.forEach(d=>d.play()),this.actionsIn.SceneTransition.forEach(d=>d.dispatch()),this.actionsIn.SetVariable.forEach(d=>d.checkConditions()),this.actionsIn.SetVariable.forEach(d=>d.dispatch()),this.actionsIn.DynamicVariablePlay.forEach(d=>d.dispatch()),this.actionsOut.ClearLocalStorage.forEach(d=>d.dispatch()),this.actionsOut.UserAPI.forEach(d=>d.dispatch()))};let{condition:s}=t;if(!s.object)throw new Error("Missing property");let o=r.find(s.object)??r.scene.find2D(s.object);if(!o)throw new Error("Missing property");if(this.toObject=o,s.state&&!((l=this.toObject.states)!=null&&l[s.state]))throw new Error("Missing property");this.toState=s.state}connect(){hf(this.actionsOut).forEach(e=>{var t;(t=this.actionsOut[e])!=null&&t.length&&this.toObject.addEventListener("beginState",this.onBegin)}),hf(this.actionsIn).forEach(e=>{var t;(t=this.actionsIn[e])!=null&&t.length&&this.toObject.addEventListener("completeState",this.onComplete)})}disconnect(){super.disconnect(),hf(this.actionsOut).forEach(e=>{var t;(t=this.actionsIn[e])!=null&&t.length&&this.toObject.removeEventListener("beginState",this.onBegin)}),hf(this.actionsIn).forEach(e=>{var t;(t=this.actionsIn[e])!=null&&t.length&&this.toObject.removeEventListener("completeState",this.onComplete)})}},jPe=class extends Za{constructor(e,t){super(e),this.eventManager=t,this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1}connect(){super.connect();let{page:e,sharedAssets:t}=this.eventContext;e.traverseEntity(i=>{var r;if((r=i.data)!=null&&r.events.length){for(let{id:n,data:a}of i.data.events)if(!a.disabled&&a.type==="Conditional")try{let s;a.condition.type==="Comparison"||(a.condition.type==="Distance"?s=new UPe(n,a,i,e,t,this.eventManager):a.condition.type==="State"&&(s=new HPe(n,a,i,e,t,this.eventManager))),s&&(this.eventsPerConditions[a.condition.type].push(s),(s.actionsIn.Video.length||s.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch{}}}),Object.values(this.eventsPerConditions).forEach(i=>i.forEach(r=>r.connect()))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(t=>t.disconnect()))}},G0=new H,fd=new H,Wh=new H,x9=new As,WPe=.01,sr=new H,Ln=new H,_9=new H,xf=new mi,S4=new Vn,GPe=new pt,C4=new An,$p=new H,Zl=new H,Zp=.2;function E4(e,t){!t||(t[0]<t[1]&&(e.x=Math.min(Math.max(e.x,t[0]),t[1])),t[2]<t[3]&&(e.y=Math.min(Math.max(e.y,t[2]),t[3])),t[4]<t[5]&&(e.z=Math.min(Math.max(e.z,t[4]),t[5])))}var $Pe=function(){let e=new pt;return(t,i,r)=>{let n=t.obj;e.copy(n.hiddenMatrix),n.parent!==null&&e.premultiply(n.parent.matrixWorld),e.invert(),n.position.copy(i),t.reference==="global"&&E4(n.position,t.limits),n.position.applyMatrix4(e),t.reference==="parent"?E4(n.position,t.limits):t.reference==="local"&&(xf.copy(t.quat0).invert(),n.position.sub(t.position0),n.position.applyQuaternion(xf),E4(n.position,t.limits),xf.invert(),n.position.applyQuaternion(xf),n.position.add(t.position0)),e.multiply(r??n.matrixWorld).decompose(sr,n.quaternion,Ln),n.updateMatrix(),n.hasNonUniformScale&&(n.updateMatrixWorld(),n.updateMatrixWorldSVD()),n instanceof ms&&wu(n.parent)&&n.invalidateDownstreamBooleanData(!0)}}(),ZPe=class{constructor(e,t,i,r,n,a,s){this.object=e,this.id=t,this.data=i,this.dropDestIds=[],this.activeIdx=null,this.wasDragEventTriggered=!1,this.resetDampingFactor=this.data.resetSpeed===0?1:8/this.data.resetSpeed+1,this.snapDampingFactor=this.data.snapSpeed===0?1:8/this.data.snapSpeed+1,this.actionsDrag=Dn(i,i.dragDropActions.drag,r,n,a,this.object),this.actionsDrop=Dn(i,i.dragDropActions.drop,r,n,a,this.object);let o=[];this.data.objects.forEach(l=>{let c=r.find(l);!c||c.data.visible!==!1&&(o.push(c),s[c.uuid]&&s[c.uuid].forEach(u=>{let d=r.find(u);!d||d.data.visible!==!1&&o.push(d)}))}),this.data.dropDestinations.forEach(l=>{let c=r.find(l);!c||c.data.visible!==!1&&(this.dropDestIds.push(c.uuid),s[c.uuid]&&s[c.uuid].forEach(u=>{let d=r.find(u);!d||d.data.visible!==!1&&this.dropDestIds.push(d.uuid)}))}),this.dragItems=o.map(l=>(this.data.planeMode==="locked"&&(l.userData.lockedPlane=!0),l.userData.worldPosition0=new H().setFromMatrixPosition(l.matrixWorld),{obj:l,fromPosition:new H().setFromMatrixPosition(l.matrixWorld),pointStart:new H,pointEnd:new H,paused:!0,currentDampingFactor:this.data.dampingFactor,reset:!1,position0:new H().copy(l.position),quat0:new mi().copy(l.quaternion),snapped:!1,orientationMatrix:new pt,limits:this.data.limits,reference:this.data.referenceFrame}))}get activeDragItem(){return this.activeIdx!==null?this.dragItems[this.activeIdx]:null}dispose(){oa(this.actionsDrag),oa(this.actionsDrop),this.dragItems.forEach(e=>{e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart),e.obj.recursiveBBoxNeedsUpdate=!0,e.obj.userData.lockedPlane=void 0,e.obj.position.copy(e.position0),e.obj.quaternion.copy(e.quat0),e.obj.updateMatrix()})}},qPe=class extends Za{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.lastDropDestination=null,this.dragTimeout=null,this.onPointerDown=i=>{var s;if(ai.length>1)return;this.eventContext.updateRaycaster(i);let{raycaster:r,page:n}=this.eventContext,a=n.raycastWithClones(r);if(this.lastDropDestination=null,a.length===0){this.activeEvent=null;return}for(let o of this.events){let l=0;for(let{obj:c,pointEnd:u,pointStart:d}of o.dragItems){if(c===a[0].object||c===a[0].object.object||ji.is(c)&&c.isAncestorOf(a[0].object.uuid)){if(o.activeIdx=l,o.activeDragItem.reset=!1,o.activeDragItem.currentDampingFactor=o.data.dampingFactor,o.activeDragItem.snapped=!1,o.data.cursor==="hand"&&this.setCursor("grabbing"),this.eventManager.controlsManager.usePhysics){o.activeDragItem.obj.rigidBody&&o.activeDragItem.obj.rigidBody.setBodyType(2,!0);let h=o.activeDragItem.obj;c.hasNonUniformScale&&c.updateMatrixWorldSVD(),(h.hasNonUniformScale?h.matrixWorldRigid:h.matrixWorld).decompose(sr,xf,Ln),S4.setFromQuaternion(xf),h.prevR===void 0?(h.prevR=S4.clone(),h.prevT=sr.clone()):(h.prevR.copy(S4),h.prevT.copy(sr)),this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.push(o.activeDragItem.obj)}this.calcPlaneIntersectPos(c,d,o.data.plane,o.data.referenceFrame),u.copy(d),(this.eventManager.controlsManager.usePhysics&&((s=c.data.physics)==null?void 0:s.rigidBody)==="dynamic"||o.data.drop===!1||o.data.resetOnSnapFail===!1)&&o.activeDragItem.fromPosition.setFromMatrixPosition(o.activeDragItem.obj.matrixWorld),this.activeEvent=o,this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1);return}l++}}this.activeEvent=null},this.onPointerMove=i=>{var s,o,l,c;if(ai.length>1)return;this.eventContext.updateRaycaster(i);let{raycaster:r,page:n}=this.eventContext,a=n.raycastWithClones(r);if(ai.length===0){let u=!1;for(let d of this.events){for(let{obj:h}of d.dragItems)if(h===((s=a[0])==null?void 0:s.object)||h===((l=(o=a[0])==null?void 0:o.object)==null?void 0:l.object)||ji.is(h)&&h.isAncestorOf((c=a[0])==null?void 0:c.object.uuid)){switch(u=!0,d.data.cursor){case"hand":this.setCursor("grab");break;case"move":this.setCursor("move");break}break}if(u)break}u||this.setCursor("default");return}if(this.activeEvent&&this.activeEvent.activeDragItem){let u=this.activeEvent.activeDragItem;u.snapped=!1;let d;if(this.activeEvent.data.drop&&(d=a.filter(h=>u.obj!==h.object&&!u.obj.isAncestorOf(h.object.uuid)&&!(h.object instanceof Zm)&&(this.activeEvent.data.dropOn==="all"||this.activeEvent.dropDestIds.some(f=>f===h.object.uuid||n.scene.find(f).isAncestorOf(h.object.uuid))))[0]),d){let h=_9.copy(d.face.normal).applyMatrix3(C4.getNormalMatrix(d.object.matrixWorld));if(this.activeEvent.data.snapTo==="center")u.fromPosition.setFromMatrixPosition(d.object.matrixWorld);else if(this.activeEvent.data.snapTo==="surface"){if(u.fromPosition.copy(d.point),this.activeEvent.data.snapSurfaceMode==="bbox"){sr.copy(h).applyMatrix3(C4.setFromMatrix4(u.obj.matrixWorld).transpose());let f=u.obj;sr.x>Zp?Ln.x=-f.recursiveBBox.min.x:sr.x<-Zp&&(Ln.x=-f.recursiveBBox.max.x),sr.y>Zp?Ln.y=-f.recursiveBBox.min.y:sr.y<-Zp&&(Ln.y=-f.recursiveBBox.max.y),sr.z>Zp?Ln.z=-f.recursiveBBox.min.z:sr.z<-Zp&&(Ln.z=-f.recursiveBBox.max.z),Ln.applyMatrix3(C4.invert())}else Ln.copy(h).multiplyScalar(this.activeEvent.data.snapSurfaceOffset);u.fromPosition.add(Ln)}this.activeEvent.data.autoOrient&&(sr.set(0,1,0).cross(h),sr.length()<1e-4&&sr.set(-1,0,0).cross(h),Ln.crossVectors(_9,sr),u.orientationMatrix.makeBasis(sr,Ln,h)),u.pointStart.copy(u.fromPosition),u.pointEnd.copy(u.pointStart),u.currentDampingFactor=this.activeEvent.snapDampingFactor,u.snapped=!0,this.lastDropDestination!==d.object&&(this.lastDropDestination=d.object,this.activeEvent.actionsDrop.Transition.forEach(f=>{f.play()}),this.activeEvent.actionsDrop.Animation.forEach(f=>{f.play()}),this.activeEvent.actionsDrop.Audio.forEach(f=>{f.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Particles.forEach(f=>{f.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Create.forEach(f=>{f.dispatchThrottled()}))}else u.orientationMatrix.makeRotationFromQuaternion(u.quat0),this.lastDropDestination=null,u.currentDampingFactor=this.activeEvent.data.dampingFactor,this.calcPlaneIntersectPos(u.obj,u.pointEnd,this.activeEvent.data.plane,this.activeEvent.data.referenceFrame),this.activeEvent.actionsDrop.Transition.forEach(h=>{h.stop(),h.object.currentState!==null&&h.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrop.Animation.forEach(h=>{h.stop()}),this.activeEvent.actionsDrop.Audio.forEach(h=>{h.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.Particles.forEach(h=>{h.dispatchGameControl("stop")});this.activeEvent.actionsDrag.Create.forEach(h=>{h.dispatchThrottled()}),this.activeEvent.actionsDrag.SetVariable.forEach(h=>h.checkConditions()),this.activeEvent.actionsDrag.SetVariable.forEach(h=>h.dispatch()),this.activeEvent.actionsDrag.DynamicVariablePlay.forEach(h=>h.dispatch()),this.activeEvent.actionsDrag.ClearLocalStorage.forEach(h=>h.dispatch()),this.activeEvent.actionsDrag.UserAPI.forEach(h=>h.dispatch()),this.activeEvent.wasDragEventTriggered===!1&&(this.activeEvent.wasDragEventTriggered=!0,this.activeEvent.actionsDrag.Transition.forEach(h=>{h.play()}),this.activeEvent.actionsDrag.Animation.forEach(h=>{h.play()}),this.activeEvent.actionsDrag.Audio.forEach(h=>{h.dispatchGameControl("start")}),this.activeEvent.actionsDrag.Particles.forEach(h=>{h.dispatchGameControl("start")})),this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>{!this.activeEvent||(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Audio.forEach(h=>{h.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Particles.forEach(h=>{h.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Transition.forEach(h=>{h.stop(),h.object.currentState!==null&&h.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(h=>{h.stop()}))},500),this.updateDragItem(u),u.obj.dispatchEvent({type:"requestRender"})}},this.onPointerUp=i=>{var r;if(this.activeEvent&&this.activeEvent.activeDragItem){this.activeEvent.data.cursor==="hand"&&this.setCursor("grab");let n=((r=this.activeEvent.activeDragItem.obj.data.physics)==null?void 0:r.rigidBody)==="dynamic";this.activeEvent.activeDragItem.snapped===!1&&this.activeEvent.data.drop&&this.activeEvent.data.resetOnSnapFail&&(this.eventManager.controlsManager.usePhysics===!1||!n)&&(this.activeEvent.activeDragItem.reset=this.activeEvent.data.resetOnSnapFail,this.activeEvent.activeDragItem.paused=!1,this.activeEvent.activeDragItem.currentDampingFactor=this.activeEvent.resetDampingFactor),this.eventManager.controlsManager.usePhysics&&n&&(this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.pop(),this.activeEvent.activeDragItem.obj.rigidBody.setBodyType(0,!0),this.activeEvent.activeDragItem.paused=!0),this.activeEvent.wasDragEventTriggered===!0&&(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Transition.forEach(a=>{a.stop(),a.object.currentState!==null&&a.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(a=>{a.stop()}),this.activeEvent.actionsDrag.Audio.forEach(a=>{a.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Particles.forEach(a=>{a.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.SetVariable.forEach(a=>a.checkConditions()),this.activeEvent.actionsDrop.SetVariable.forEach(a=>a.dispatch()),this.activeEvent.actionsDrop.DynamicVariablePlay.forEach(a=>a.dispatch()),this.activeEvent.actionsDrop.ClearLocalStorage.forEach(a=>a.dispatch()),this.activeEvent.actionsDrop.UserAPI.forEach(a=>a.dispatch())),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0)}}}connect(){let e={};if(this.eventContext.page.traverseEntity(i=>{i.component&&(e[i.component.uuid]?e[i.component.uuid].push(i.uuid):e[i.component.uuid]=[i.uuid])}),this.eventContext.page.traverseEntity(i=>{var r;(r=i.data)==null||r.events.filter(n=>n.data.type==="DragDrop"&&!n.data.disabled).forEach(n=>{this.events.push(new ZPe(i,n.id,n.data,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager,e))})}),!this.events.length)return;this.domEventsNeeded.clear(),this.domEventsNeeded.add("pointerdown");let t=this.eventContext.domElement;t.addEventListener("pointerdown",this.onPointerDown),t.addEventListener("pointermove",this.onPointerMove),t.addEventListener("pointerup",this.onPointerUp),this.domEventsNeeded.add("pointermove")}disconnect(){if(!this.events.length)return;this.domEventsNeeded.clear();let e=this.eventContext.domElement;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),this.events.forEach(t=>t.dispose())}setCursor(e){this.eventContext.domElement.style.cursor=e}onAnimationFrameDamping(){for(let e of this.events)for(let t of e.dragItems)t.paused||this.updateDragItem(t,!0)}calcPlaneIntersectPos(e,t,i,r){let{getCamera:n,raycaster:a}=this.eventContext;n().getWorldDirection(fd),fd.negate();let s=xf.identity();switch(r==="parent"?GPe.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix).decompose(sr,s,Ln):r==="local"&&e.matrixWorld.decompose(sr,s,Ln),i){case"x":sr.set(1,0,0).applyQuaternion(s),$p.copy(fd).cross(sr),Zl.copy(sr).cross($p);break;case"y":sr.set(0,1,0).applyQuaternion(s),$p.copy(fd).cross(sr),Zl.copy(sr).cross($p);break;case"z":sr.set(0,0,1).applyQuaternion(s),$p.copy(fd).cross(sr),Zl.copy(sr).cross($p);break;case"xy":Zl.set(0,0,1).applyQuaternion(s);break;case"yz":Zl.set(1,0,0).applyQuaternion(s);break;case"xz":Zl.set(0,1,0).applyQuaternion(s);break;case"adaptive":fd.angleTo(Ln.set(0,1,0))>Math.PI/6?(sr.crossVectors(Ln.set(0,1,0),fd),Zl.crossVectors(sr,Ln)):Zl.set(0,1,0);break;default:Zl.copy(fd);break}Wh.setFromMatrixPosition(e.matrixWorld);let o=e.userData.lockedPlane?e.userData.worldPosition0:Wh;if(x9.setFromNormalAndCoplanarPoint(Zl,o),!!a.ray.intersectPlane(x9,t)&&(i==="x"||i==="y"||i==="z")){let l=Ln.subVectors(t,o).dot(sr);t.copy(o).addScaledVector(sr,l)}}updateDragItem(e,t=!1){var i,r;Wh.setFromMatrixPosition(e.obj.matrixWorld),e.reset==="current"?G0.subVectors(e.fromPosition,Wh).divideScalar(e.currentDampingFactor):e.reset==="original"?(G0.subVectors(e.obj.userData.worldPosition0,Wh).divideScalar(e.currentDampingFactor),e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart)):G0.subVectors(e.pointEnd,e.pointStart).add(e.fromPosition).sub(Wh).divideScalar(e.currentDampingFactor),e.paused=e.currentDampingFactor>1?G0.length()<WPe:!0,(this.activeEvent&&this.activeEvent.data.dampingFactor===1||t)&&$Pe(e,G0.add(Wh),(i=this.activeEvent)!=null&&i.data.drop&&((r=this.activeEvent)!=null&&r.data.autoOrient)?e.orientationMatrix:null),e.obj.dispatchEvent({type:"beginEvent",eventName:"DragDrop"}),this.eventManager.requestRender()}},qp=new H,A4=new H,Yc=new H,Kc=new H,S9=new As,YPe=.01,KPe={type:"requestRender"},XPe=function(){let e=new H,t=new H;return(i,r,n)=>n>0?(e.subVectors(i,r),e.length()<=n?i:t.copy(r).add(e.normalize().multiplyScalar(n))):r}(),C9=function(){let e=new pt;return(t,i)=>{t.position.copy(i),t.parent!==null&&(e.copy(t.parent.matrixWorld).invert(),t.position.applyMatrix4(e)),e.copy(t.hiddenMatrix).invert(),t.position.applyMatrix4(e),t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD()),t instanceof ms&&wu(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),QPe=class{constructor(e,t,i,r,n,a){this.data=e,this.id=t,this.object=i,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new H,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...PA.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=r.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0),this.actions=Dn(e,e.actions,r,n,a,i)}},JPe=class extends Za{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.pairOfEventListeners=[],this.onMouseMove=i=>{if(!(ai.length>1)){this.eventContext.updateRaycaster(i);for(let r of this.events)r.target===void 0&&this.updateSingleEvent(r)}},this.onMouseEnter=i=>{for(let r of this.events)r.target===void 0&&(r.isReset=!1,r.currentDampingFactor=r.data.dampingFactor)},this.onMouseLeave=i=>{for(let r of this.events)r.target===void 0&&(r.data.resetOnPointerLeave&&(r.isReset=!0,r.currentDampingFactor=r.resetDampingFactor),this.updateSingleEvent(r))},this.onTargetChange=i=>()=>{this.updateSingleEvent(i)}}connect(){let{page:e}=this.eventContext;if(e.traverseEntity(r=>{var a,s;let n=(a=r.data)==null?void 0:a.events.find(o=>o.data.type==="Follow"&&!o.data.disabled);n&&(!e.data.globalPhysics.usePhysics||((s=r.dataPatched.physics)==null?void 0:s.rigidBody)!=="dynamic")&&this.events.push(new QPe(n.data,n.id,r,e,this.eventContext.sharedAssets,this.eventManager))}),!this.events.length)return;let{domElement:t,eventElement:i}=this.eventContext;this.domEventsNeeded.clear(),qs&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),i.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let r of this.events)if(r.target!==void 0){let n=r.target,a=this.onTargetChange(r);this.pairOfEventListeners.push([n,a]),n.addEventListener("requestRender",a)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),qs&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave);for(let[i,r]of this.pairOfEventListeners)i.removeEventListener("requestRender",r);for(let i of this.events)i.paused=!0,i.isReset=!1,oa(i.actions)}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e,!0)}updateSingleEvent(e,t=!1){var s;this.events.forEach(o=>{o.actions.Create.forEach(l=>{l.dispatchThrottled()})});let{plane:i,limitDistance:r,limitDistanceEnabled:n}=e.data;if(e.object.getWorldPosition(Yc),e.isReset)Kc.copy(e.worldPosition0);else if(e.target)e.target.getWorldPosition(Kc);else{let{getCamera:o,raycaster:l}=this.eventContext;if(i==="custom"?(o().getWorldDirection(A4),A4.negate(),qp.copy(A4)):i==="xy"?qp.set(0,0,1):i==="xz"?qp.set(0,1,0):i==="yz"&&qp.set(1,0,0),S9.setFromNormalAndCoplanarPoint(qp,Yc),!l.ray.intersectPlane(S9,Kc))return}if(!e.isReset){if(Kc.distanceTo(e.worldPosition0)>r&&n&&e.target)if(e.snapComplete=!1,e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)Kc.copy(e.worldPosition0),e.currentDampingFactor=e.resetDampingFactor;else return;else if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return}e.data.enabledTranslation[0]===!1&&(Kc.x=Yc.x),e.data.enabledTranslation[1]===!1&&(Kc.y=Yc.y),e.data.enabledTranslation[2]===!1&&(Kc.z=Yc.z);let a=XPe(Yc,Kc,e.wasOutside?0:e.data.maxDelta);if(e.currentDampingFactor>1){let o=qp.subVectors(a,Yc).divideScalar(e.currentDampingFactor);Yc.add(o),t&&C9(e.object,Yc),e.paused=o.length()<YPe}else C9(e.object,a),e.paused=!0;(s=e.object)==null||s.dispatchEvent({type:"beginEvent",eventName:"Follow"}),e.object.dispatchEvent(KPe)}},$0=new H,gw=new H,Z0=new pt,Yp=new mi,pd=new mi,q0=new H,Y0=new H,Gh=new H,Xc=new H,M4=new As,eDe=1e-6,tDe={type:"requestRender"},iDe={type:"changeRotation"},E9=function(){let e=new pt;return function(t,i){t.parent!==null?e.multiplyMatrices(t.parent.matrixWorld,t.hiddenMatrix):e.copy(t.hiddenMatrix),i.premultiply(IZ(e).invert()),t.rotation.setFromRotationMatrix(i),t.updateMatrix(),t instanceof ms&&wu(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),rDe=class{constructor(e,t,i,r){this.id=t,this.object=i,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new mi,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...DA.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=r.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1}},nDe=class extends Za{constructor(){super(...arguments),this.events=[],this.pairOfEventListeners=[],this.pairOfUserEventListeners=[],this.onMouseMove=e=>{if(!(ai.length>1)){this._lastMouseEvent=e,this.eventContext.updateRaycaster(e);for(let t of this.events)t.target===void 0&&this.updateSingleEvent(t)}},this.onMouseEnter=e=>{for(let t of this.events)t.target===void 0&&(t.isReset=!1,t.currentDampingFactor=t.data.dampingFactor)},this.onMouseLeave=e=>{for(let t of this.events)t.target===void 0&&(t.data.resetOnPointerLeave&&(t.isReset=!0,t.currentDampingFactor=t.resetDampingFactor),this.updateSingleEvent(t))},this.onScroll=e=>{if(this._lastMouseEvent){let t=new PointerEvent("pointermove",{clientX:this._lastMouseEvent.clientX,clientY:this._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});this.eventContext.eventElement.dispatchEvent(t)}},this.onTargetChange=e=>()=>{this.updateSingleEvent(e)},this.createUserEventListener=e=>({eventName:t,target:i})=>{if(!t||!i)return;let r=gy(t);r&&r==="LookAt"&&this.updateSingleEvent(e)}}connect(){let{page:e}=this.eventContext;if(e.traverseEntity(r=>{var a,s;let n=(a=r.data)==null?void 0:a.events.find(o=>o.data.type==="LookAt"&&!o.data.disabled);n&&(!e.data.globalPhysics.usePhysics||((s=r.dataPatched.physics)==null?void 0:s.rigidBody)!=="dynamic")&&this.events.push(new rDe(n.data,n.id,r,e))}),!this.events.length)return;let{domElement:t,eventElement:i}=this.eventContext;this.domEventsNeeded.clear(),qs&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),i.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?i.addEventListener("scroll",this.onScroll):(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let r of this.events){if(r.target!==void 0){let s=this.onTargetChange(r),o=r.target;this.pairOfEventListeners.push([o,s]),o.addEventListener("requestRender",s)}let n=this.createUserEventListener(r),a=r.object;this.pairOfUserEventListeners.push([a,n]),a.addEventListener("userEvent",n)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),qs&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave),t.removeEventListener("scroll",this.onScroll);for(let[i,r]of this.pairOfEventListeners)i.removeEventListener("requestRender",r);for(let[i,r]of this.pairOfUserEventListeners)i.removeEventListener("userEvent",r);for(let i of this.events)i.paused=!0,i.isReset=!1}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e)}updateSingleEvent(e){var h;let{tilt:t,axis:i,distance:r,plane:n,limitDistance:a,enabledRotation:s,limitDistanceEnabled:o}=e.data,{getCamera:l,raycaster:c}=this.eventContext,{object:u,target:d}=e;if(u.getWorldPosition(q0),!e.isReset)if(e.target)e.target.getWorldPosition(Y0);else{if(n==="custom"?(l().getWorldDirection(gw),gw.negate(),M4.setFromNormalAndCoplanarPoint(gw,q0)):(n==="xy"?$0.set(0,0,1):n==="xz"?$0.set(0,1,0):n==="yz"&&$0.set(1,0,0),M4.setFromNormalAndCoplanarPoint($0,q0)),!c.ray.intersectPlane(M4,Y0))return;r>0&&(n==="custom"||n===void 0)&&Y0.addScaledVector(gw,r)}if(e.isReset||(d?t==="target"?Gh.copy(d.up).applyMatrix4(Z0.extractRotation(d.matrixWorld)).normalize():s.some(f=>f===!1)?(i==="x"?(Xc.set(0,0,1),s[2]===!1&&Xc.set(0,1,0)):i==="y"?(Xc.set(1,0,0),s[0]===!1&&Xc.set(0,0,1)):(Xc.set(0,1,0),s[1]===!1&&Xc.set(1,0,0)),Gh.copy(Xc).applyQuaternion(e.worldQuaternion0).normalize()):Gh.set(0,1,0):n==="custom"?Gh.set(0,1,0):Gh.copy($0)),e.isReset)pd.copy(e.worldQuaternion0);else if(q0.distanceTo(Y0)>a&&o&&d)if(e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)pd.copy(e.worldQuaternion0),e.currentDampingFactor=e.resetDampingFactor;else return;else{if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return;aDe(Z0,Y0,q0,Gh,i,Xc),pd.setFromRotationMatrix(Z0),Yp.setFromUnitVectors(Xc.applyQuaternion(pd),Gh),s.some(f=>f===!1)&&t!=="target"&&pd.premultiply(Yp).normalize()}e.currentDampingFactor>1?(u.updateWorldMatrix(!0,!1),Yp.setFromRotationMatrix(IZ(u.matrixWorld)),Yp.slerp(pd,1/e.currentDampingFactor),E9(u,Z0.makeRotationFromQuaternion(Yp)),e.paused=8*(1-Yp.dot(pd))<eDe):(E9(u,Z0.makeRotationFromQuaternion(pd)),e.paused=!0),(h=e.object)==null||h.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),u.dispatchEvent(tDe),u.dispatchEvent(iDe)}},ho=new H,kn=new H,dn=new H;function aDe(e,t,i,r,n,a){let s=e.elements;dn.subVectors(t,i),dn.lengthSq()===0&&(dn.z=1),dn.normalize(),kn.crossVectors(r,dn),kn.lengthSq()===0&&(Math.abs(r.z)===1?dn.x+=1e-4:dn.z+=1e-4,dn.normalize(),kn.crossVectors(r,dn)),kn.normalize(),ho.crossVectors(dn,kn),n==="x"?a.z===1?[kn,ho,dn]=[dn,kn,ho]:(kn.negate(),[kn,dn]=[dn,kn]):n==="y"?a.x===1?[kn,ho,dn]=[ho,dn,kn]:(kn.negate(),[ho,dn]=[dn,ho]):a.x===1&&(kn.negate(),[kn,ho]=[ho,kn]),s[0]=kn.x,s[4]=ho.x,s[8]=dn.x,s[1]=kn.y,s[5]=ho.y,s[9]=dn.y,s[2]=kn.z,s[6]=ho.z,s[10]=dn.z}var sDe=class{constructor(e,t,i,r,n,a){this.id=e,this.data=t,this.object=i,this.entered=!1,this.actions=Dn(t,t.actions,r,n,a,i)}disconnect(){oa(this.actions)}dispatchEnter(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered||(this.entered=!0,this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Animation.forEach(e=>e.play()),this.actions.Create.forEach(e=>e.dispatchStart()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()))}dispatchLeave(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered&&(this.entered=!1,this.actions.Create.forEach(e=>e.dispatchStop()),this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Particles.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatch()),this.actions.Particles.forEach(t=>t.dispatchBasic()),this.actions.Destroy.forEach(t=>t.dispatch()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},oDe=class extends Za{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObjects={},this.objects=[],this.objects2D=[],this._prevObjects=[],this.onMouseDown=i=>{ai.length>1||(this.eventContext.updateRaycaster(i),this.handleMouseHoverEvent())},this.onMouseUp=i=>{ai.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=i=>{ai.length>1||(this.eventContext.updateRaycaster(i),this.handleMouseHoverEvent())},this.onUserEvent=({eventName:i,target:r,reverse:n})=>{var s;if(!i||!r)return;let a=gy(i);a&&a==="MouseHover"&&(r.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(s=this.eventsPerObjects[r.uuid])==null||s.forEach(o=>o.dispatchUserEvent(n)))}}connect(){let{page:e,sharedAssets:t}=this.eventContext,i=(n,a)=>{var s,o;if(!(!n.visible||!((s=n.data)!=null&&s.events.length))){for(let{id:l,data:c}of n.data.events)if(!c.disabled&&c.type==="MouseHover")try{let u=new sDe(l,c,n,e,t,this.eventManager);this.eventsPerObjects[n.uuid]?this.eventsPerObjects[n.uuid].push(u):this.eventsPerObjects[n.uuid]=[u]}catch{}(o=this.eventsPerObjects[n.uuid])!=null&&o.length&&this.objects.push(n instanceof la?a:n)}};if(e.traverseEntity(n=>{var a;(n instanceof Na||n instanceof ta)&&((a=n.frame)==null||a.traverse(s=>{i(s,n)})),i(n)}),!this.objects.length)return;let{domElement:r}=this.eventContext;this.domEventsNeeded.clear(),qs&&(this.domEventsNeeded.add("pointerdown"),r.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),r.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),r.addEventListener("pointermove",this.onMouseMove),this.objects.forEach(n=>{n.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),qs&&(e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp)),e.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach(t=>{t.forEach(i=>{i.disconnect()})}),this.objects.forEach(t=>{t.removeEventListener("userEvent",this.onUserEvent)})}handleMouseHoverEvent(e=!1){let t=[];if(!e){let{stopRaycast:i,raycaster:r,page:n,pointerScreen:a}=this.eventContext,s=!1;if(n.uiCanvas&&(s=lu(n,[a.x,a.y],Object.keys(this.eventsPerObjects),o=>{t.push(o)})),i&&!s){let o=o2(r,n,this.objects);t=JM(o),o.forEach(l=>{var c,u;l.object instanceof Na&&lu(l.object,[((c=l==null?void 0:l.uv)==null?void 0:c.x)??0,((u=l==null?void 0:l.uv)==null?void 0:u.y)??0],Object.keys(this.eventsPerObjects),d=>{t.push(d)})})}else this.objects.forEach(o=>{var c,u;let l=Xx(r,o);l&&(t.push(o),o instanceof Na&&lu(o,[((c=l==null?void 0:l.uv)==null?void 0:c.x)??0,((u=l==null?void 0:l.uv)==null?void 0:u.y)??0],Object.keys(this.eventsPerObjects),d=>{t.push(d)}))})}this._prevObjects.length&&this._prevObjects.forEach(i=>{var r;t.includes(i)||(i.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(r=this.eventsPerObjects[i.uuid])==null||r.forEach(n=>n.dispatchLeave()))}),t.length&&t.forEach(i=>{var r;i.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(r=this.eventsPerObjects[i.uuid])==null||r.forEach(n=>n.dispatchEnter())}),this._prevObjects=t}},lDe=class{constructor(e,t,i,r,n,a){this.id=e,this.data=t,this.object=i,this.scrollCounter=0,this.actions=Dn(t,t.actions,r,n,a,i)}connect(){this.scrollCounter=0}disconnect(){oa(this.actions)}dispatch(e){this.actions.Transition.forEach(r=>{r.object.currentTransitionEvent!==this&&(r.object.currentTransitionEvent=this,r.init())});let t=e>0?1:-1;this.scrollCounter+=t,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let i=this.scrollCounter/this.data.steps;this.actions.Transition.forEach(r=>r.seek(i)),this.actions.Animation.forEach(r=>r.seek(t)),this.actions.Create.forEach(r=>r.dispatchThrottled()),this.actions.SetVariable.forEach(r=>r.checkConditions()),this.actions.SetVariable.forEach(r=>r.dispatch()),this.actions.DynamicVariablePlay.forEach(r=>r.dispatch()),this.actions.ClearLocalStorage.forEach(r=>r.dispatch()),this.actions.UserAPI.forEach(r=>r.dispatch())}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},cDe=class{constructor(e,t,i,r,n,a,s){this.id=e,this.data=t,this.object=i,this.domElement=a,this.eventManager=s,this.scrollStart=0,this.scrollEnd=0,this.actions=Dn(t,t.actions,r,n,s,i)}getStickyParentElement(){let e=this.domElement;for(;e;){if(window.getComputedStyle(e).position==="sticky")return e;e=e.parentElement}return null}computeScrollBounds(){let e=this.getStickyParentElement(),t=e==null?void 0:e.parentElement,i=this.domElement.getBoundingClientRect(),r={top:i.top,bottom:i.bottom,left:i.left,right:i.right,width:i.width,height:i.height};if(t){let c=t.getBoundingClientRect(),u=window.getComputedStyle(e),d=parseFloat(u.marginTop)+parseFloat(u.marginBottom),h=parseFloat(u.top),f=parseFloat(u.bottom),p=c.height-d;if(!isNaN(h))i.top===h?(r.top+=c.top-h,r.bottom+=c.top-h):i.top<0&&(r.top-=p-i.height,r.bottom-=p-i.height);else if(!isNaN(f)){let m=document.body.clientHeight??window.innerHeight,v=window.innerWidth-(document.documentElement.clientWidth??window.innerWidth);i.bottom===m-f?(r.top+=c.top-i.height+f+v,r.bottom+=c.top-i.height+f+v):i.bottom<m-f&&(r.top-=p-i.height,r.bottom-=p-i.height)}}let n=document.body,a=document.documentElement,s=window.pageYOffset||a.scrollTop||n.scrollTop,o=a.clientTop||n.clientTop||0,l=Math.round(r.top+s-o);if(this.data.startFrom==="enter"){let c=window.innerHeight,u=r.height,d=this.data.enterAnchor,h=d==="top"?c:d==="bottom"?c-u:c-u*.5;this.scrollStart=l-h}else this.scrollStart=0;this.scrollStart+=this.data.startOffset??0,this.scrollEnd=this.scrollStart+(this.data.endAfter??400),this.box=r,this.computeScroll({x:window.scrollX,y:window.scrollY})}connect(){this.computeScrollBounds()}disconnect(){oa(this.actions)}handleResize(){this.computeScrollBounds()}get isInvalidBox(){return this.box===void 0||this.box.width===0&&this.box.height===0&&this.box.top===0&&this.box.bottom===0}computeScroll({x:e,y:t}){this.actions.Transition.forEach(n=>{n.object.currentTransitionEvent!==this&&(n.object.currentTransitionEvent=this,n.init())});let i=this.scrollEnd-this.scrollStart,r=Math.min(1,Math.max(0,(t-this.scrollStart)/i));this.actions.Transition.forEach(n=>n.seek(r)),this.actions.Animation.forEach(n=>n.seek(r)),this.actions.Create.forEach(n=>n.dispatchThrottled()),this.actions.SetVariable.forEach(n=>n.checkConditions()),this.actions.SetVariable.forEach(n=>n.dispatch()),this.actions.DynamicVariablePlay.forEach(n=>n.dispatch()),this.actions.ClearLocalStorage.forEach(n=>n.dispatch()),this.actions.UserAPI.forEach(n=>n.dispatch())}dispatch(e){this.isInvalidBox&&this.computeScrollBounds(),this.computeScroll(e)}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},uDe=class extends Za{constructor(e,t){super(e),this.managers=t,this.wheelEventsPerObject=new Map,this.scrollEventsPerObject=new Map,this.isInview=!0,this.handleResize=()=>{[...this.scrollEventsPerObject.entries()].forEach(([i,r])=>{r.forEach(n=>n.handleResize())})},this.onScroll=i=>{if(!this.isInview)return;let r={y:window.scrollY,x:window.scrollX};[...this.scrollEventsPerObject.entries()].forEach(([n,a])=>{n.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:r}),a.forEach(s=>s.dispatch(r))})},this.onWheel=i=>{!this.isInview||i.ctrlKey||[...this.wheelEventsPerObject.entries()].forEach(([r,n])=>{r.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:i.deltaY}),n.forEach(a=>a.dispatch(i.deltaY))})},this.onUserEvent=({eventName:i,target:r,reverse:n})=>{var s;if(!i||!r)return;let a=gy(i);a&&a==="Scroll"&&(r.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),(s=this.wheelEventsPerObject.get(r))==null||s.forEach(o=>{o.dispatchUserEvent(n)}))}}connect(){let{page:e,sharedAssets:t,domElement:i,isExport:r}=this.eventContext,n=a=>{var s,o,l;if((s=a.data)!=null&&s.events.length){for(let{id:c,data:u}of a.data.events)if(!u.disabled&&u.type==="Scroll")if(u.trigger==="load"||!r){let d=new lDe(c,u,a,e,t,this.managers);this.wheelEventsPerObject.has(a)?(o=this.wheelEventsPerObject.get(a))==null||o.push(d):this.wheelEventsPerObject.set(a,[d])}else{let d=new cDe(c,u,a,e,t,i,this.managers);this.scrollEventsPerObject.has(a)?(l=this.scrollEventsPerObject.get(a))==null||l.push(d):this.scrollEventsPerObject.set(a,[d])}}};e.traverseEntity(a=>{var s;(a instanceof Na||a instanceof ta)&&((s=a.frame)==null||s.traverse(o=>{n(o)})),n(a)}),this.intersectionObserver=new IntersectionObserver(a=>{let s=a[0];s&&(this.isInview=s.isIntersecting)},{root:null}),this.intersectionObserver.observe(this.eventContext.domElement),[...this.wheelEventsPerObject.entries()].forEach(([a,s])=>{s.forEach(o=>o.connect()),a.addEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([a,s])=>{s.forEach(o=>o.connect()),a.addEventListener("userEvent",this.onUserEvent)}),[...this.wheelEventsPerObject.values()].some(a=>a.length)&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),[...this.scrollEventsPerObject.values()].some(a=>a.length)&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}disconnect(){window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),[...this.wheelEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(i=>i.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(i=>i.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)})}},dDe=class{constructor(e,t,i,r,n,a){this.id=e,this.data=t,this.object=i,this.actions=Dn(t,t.actions,r,n,a,i)}disconnect(){oa(this.actions)}dispatch(){this.actions.Transition.forEach(e=>{e.play()}),this.actions.Animation.forEach(e=>{e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()),this.actions.Create.forEach(e=>{e.dispatchFromStart()}),this.actions.Destroy.forEach(e=>{e.dispatchFromStart()})}dispatchAfter(e){this.actions.Audio.forEach(t=>{(t.interaction.data.triggerAfter??"any")===e&&(t.interaction instanceof wf?t.interaction.audioPlayer.play():t.interaction instanceof ZM&&t.interaction.dispatch())}),this.actions.Video.forEach(t=>{let i=t.interaction.data.triggerAfter??"autoplay";i===e&&(t.interaction instanceof Ym?t.interaction.play(i==="autoplay"):t.interaction instanceof XM&&t.interaction.dispatch())}),this.actions.Particles.forEach(t=>{(t.data.triggerAfter??"any")===e&&t.dispatchBasic()})}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.Reset.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch()),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.interaction instanceof wf?t.interaction.audioPlayer.play():t.interaction instanceof ZM&&t.interaction.dispatch()}),this.actions.Video.forEach(t=>{t.interaction instanceof Ym?t.interaction.play():t.interaction instanceof XM&&t.interaction.dispatch()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()})}},hDe=class extends Za{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),r.forEach(n=>{n.dispatchAfter("mouseDown")})})},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),r.forEach(n=>{n.dispatchAfter("keyDown")})})},this.onAny=()=>{let{domElement:i,isExport:r}=this.eventContext,n=r?document:i;n.removeEventListener("pointerdown",this.onAny),n.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([a,s])=>{a.dispatchEvent({type:"beginEvent",eventName:"Start"}),s.forEach(o=>{o.dispatchAfter("any")})})},this.onSceneTransitionAudioVideoPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),r.forEach(n=>{n.actions.Audio.forEach(a=>{a.interaction instanceof wf&&a.interaction.audioPlayer.play()}),n.actions.Video.forEach(a=>{let s=a.interaction.data.triggerAfter??"autoplay";a.interaction instanceof Ym&&a.interaction.play(s==="autoplay")}),n.actions.Particles.forEach(a=>{a.dispatchBasic()})})})},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),r.forEach(n=>{n.dispatchAfter("autoplay")})})},this.onUserEvent=({eventName:i,target:r,reverse:n})=>{var s,o;if(!i||!r)return;let a=gy(i);a&&a==="Start"&&(r instanceof la||r.dispatchEvent({type:"beginEvent",eventName:"Start"}),(s=this.eventsPerObject.get(r))==null||s.forEach(l=>{l.dispatchUserEvent(n)}),(o=this.eventsAfterPerObject.get(r))==null||o.forEach(l=>{l.dispatchUserEvent(n)}))}}connect(){let{sharedAssets:e,page:t}=this.eventContext,i=r=>{var n,a,s,o,l;if((n=r.data)!=null&&n.events.length)for(let{id:c,data:u}of r.data.events){if(u.disabled||u.type!=="Start")continue;let d=new dDe(c,u,r,t,e,this.eventManager);(d.actions.Transition.length||d.actions.Animation.length||d.actions.SwitchCamera.length||d.actions.Create.length||d.actions.Destroy.length||d.actions.SceneTransition.length||d.actions.Reset.length||d.actions.SetVariable.length||d.actions.DynamicVariablePlay.length||d.actions.ClearLocalStorage.length||d.actions.UserAPI.length)&&(this.eventsPerObject.has(r)?(a=this.eventsPerObject.get(r))==null||a.push(d):this.eventsPerObject.set(r,[d])),d.actions.Audio.length&&(this.eventsAfterPerObject.has(r)?(s=this.eventsAfterPerObject.get(r))==null||s.push(d):this.eventsAfterPerObject.set(r,[d])),d.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(r)?(o=this.eventsAfterPerObject.get(r))==null||o.push(d):this.eventsAfterPerObject.set(r,[d])),d.actions.Particles.length&&(this.eventsAfterPerObject.has(r)?(l=this.eventsAfterPerObject.get(r))==null||l.push(d):this.eventsAfterPerObject.set(r,[d]))}};if(t.traverseEntity(r=>{var n;(r instanceof Na||r instanceof ta)&&((n=r.frame)==null||n.traverse(a=>{i(a)})),i(r)}),[...this.eventsAfterPerObject.values()].some(r=>r.length)){if(this.eventManager.activateCount===0){let{domElement:r,isExport:n}=this.eventContext,a=n?document:r;a.addEventListener("pointerdown",this.onMouseDown,{once:!0}),a.addEventListener("mousedown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),a.addEventListener("pointerdown",this.onAny),a.addEventListener("mousedown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([s,o])=>{s.addEventListener("userEvent",this.onUserEvent)})}else this.onSceneTransitionAudioVideoPlay();this.onPlay()}[...this.eventsPerObject.entries()].forEach(([r,n])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),n.forEach(a=>a.dispatch()),r.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if([...this.eventsAfterPerObject.values()].some(e=>e.length)){let{domElement:e,isExport:t}=this.eventContext,i=t?document:e;i.removeEventListener("pointerdown",this.onMouseDown),i.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),i.removeEventListener("pointerdown",this.onAny),i.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([r,n])=>{r.removeEventListener("userEvent",this.onUserEvent),n.forEach(a=>a.disconnect())})}[...this.eventsPerObject.entries()].forEach(([e,t])=>{e.removeEventListener("userEvent",this.onUserEvent),t.forEach(i=>i.disconnect())}),this.eventsPerObject.clear(),this.eventsAfterPerObject.clear()}},fDe=class{constructor(e,t,i,r,n,a){this.id=e,this.data=t,this.object=i,this.initialDisabled=!1,this.actions=Dn(t,t.actions,r,n,a,i),this.target=t.target}disconnect(){oa(this.actions)}dispatch(e){this.initialDisabled||(this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.actions.Transition.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.Animation.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch(e??!1)}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch()))}},pDe=class extends Za{constructor(e,t,i,r,n){super(e),this.sharedVariables=t,this.eventManager=i,this.needsMouse=r,this.needsRaycast=n,this.dynamicVars=[],this.variablesToWatch=[],this.prevMouseProperty=null,this.prevRaycastProperty=null,this.pauseTime=0,this.isOutOfFocus=!1,this.events=[],this.onFrame=a=>{let s=this.eventContext.sharedAssets;if(this.rafId=window.requestAnimationFrame(this.onFrame),this.isOutOfFocus)return;let o=new Date,l=[],c=[];for(let h=0;h<this.propertiesToWatch.length;h++){let{objectId:f,property:p,prevValue:m}=this.propertiesToWatch[h],v=this.eventContext.scene.find(f),y=OA.propertyPaths[p];if(y[0]==="width"||y[0]==="height"||y[0]==="depth")v=v.geometry.userData.parameters[y[0]];else for(let x=0;x<y.length;x++)v=v[y[x]];m===null?this.propertiesToWatch[h].prevValue=v instanceof H?v.clone():v:(v instanceof H?!v.equals(m):m!==v)&&(c.push({objId:f,property:p}),v instanceof H?this.propertiesToWatch[h].prevValue.copy(v):this.propertiesToWatch[h].prevValue=v)}for(let h=0;h<this.variablesToWatch.length;h++){let{id:f,prevValue:p}=this.variablesToWatch[h],m=s.getVariable(f);m!==p&&(l.push(f),this.variablesToWatch[h].prevValue=m)}for(let h=0;h<this.dynamicVars.length;h++){let{id:f,expectedTime:p,last:m,data:v,timerSeconds:y,startValue:x}=this.dynamicVars[h],b=1e3;if((v.dynamicVariableType==="timer"||v.dynamicVariableType==="stopwatch")&&v.format==="number3decimal"?b=1:v.dynamicVariableType==="counter"?b=v.updateInterval:v.dynamicVariableType==="random"&&(b=v.isStatic?1/0:v.updateInterval),p===-1){this.dynamicVars[h].last=a,this.dynamicVars[h].expectedTime=a+b;continue}if(!((s.getDynamicVariablePlayState(f)==="Stopped"||s.getDynamicVariablePlayState(f)==="Restarted")&&(this.dynamicVars[h].last=a,this.dynamicVars[h].expectedTime=a+b,v.dynamicVariableType==="counter"&&s.getVariable(f)!==x&&(s.updateVariable(f,x),this.eventManager.requestRender()),(v.dynamicVariableType==="timer"||v.dynamicVariableType==="stopwatch")&&this.dynamicVars[h].timerSeconds!==x&&(this.dynamicVars[h].timerSeconds=x,s.updateVariable(f,yo.getFormattedTimerTime(x,v)),this.eventManager.requestRender()),s.getDynamicVariablePlayState(f)==="Restarted"&&s.setDynamicVariablePlayState(f,"Playing"),s.getDynamicVariablePlayState(f)==="Stopped"))){if(s.getDynamicVariablePlayState(f)==="Paused"){this.dynamicVars[h].deltaToExpectedTime===void 0&&(this.dynamicVars[h].deltaToExpectedTime=Math.max(this.dynamicVars[h].expectedTime-a,0)),this.dynamicVars[h].last=a-(b-this.dynamicVars[h].deltaToExpectedTime),this.dynamicVars[h].expectedTime=a+this.dynamicVars[h].deltaToExpectedTime;continue}else this.dynamicVars[h].deltaToExpectedTime=void 0;if(a>=p)if(this.dynamicVars[h].last=a,this.dynamicVars[h].expectedTime+=b,v.dynamicVariableType==="random"){let w=v.min+Math.random()*(v.max-v.min),S=v.decimals;w=Math.round(w*Math.pow(10,S))/Math.pow(10,S),s.updateVariable(f,w),l.push(f),this.eventManager.requestRender()}else if(v.dynamicVariableType==="counter"){let w=s.getVariable(f),S=s.getDynamicVariableToggleIsForward(f)??!0,_=s.getVariable(f)+v.increment*(S?1:-1);v.hasEnd&&(_=v.increment>0?kt.clamp(_,x,v.endValue):kt.clamp(_,v.endValue,x),_===x&&s.setDynamicVariableToggleIsForward(f,void 0),v.repeat?_===v.endValue&&(_=x):(_===x||_===v.endValue)&&s.setDynamicVariablePlayState(f,"Paused")),_!==w&&(l.push(f),s.updateVariable(f,_),this.eventManager.requestRender())}else if(v.dynamicVariableType==="time"){let w=s.getVariable(f),S=NL(o,v);if(typeof w=="object"&&"textValue"in w&&typeof S=="object"&&"textValue"in S){if(Array.isArray(w.textValue)&&Array.isArray(S.textValue)){if(w.textValue.every((_,E)=>_===S.textValue[E]))continue}else if(w.textValue===S.textValue)continue}else if(w===S)continue;s.updateVariable(f,S),l.push(f),this.eventManager.requestRender()}else{let w=Sa.isTextValue(v.endValue)?A9(v.endValue.textValue):v.endValue,S=s.getDynamicVariableToggleIsForward(f)??!0,_=y+(a-m)/1e3*(v.dynamicVariableType==="timer"?-1:1)*(S?1:-1);_=Math.max(_,0),v.hasEnd&&(_=v.dynamicVariableType==="stopwatch"?kt.clamp(_,x,w):kt.clamp(_,w,x),_===x&&s.setDynamicVariableToggleIsForward(f,void 0),v.repeat?Math.abs(_-w)<(v.format==="number3decimal"?1e-4:.1)&&(_=x):(Math.abs(_-x)<(v.format==="number3decimal"?1e-4:.1)||Math.abs(_-w)<(v.format==="number3decimal"?1e-4:.1))&&s.setDynamicVariablePlayState(f,"Paused")),_!==y&&(l.push(f),this.dynamicVars[h].timerSeconds=_,s.updateVariable(f,yo.getFormattedTimerTime(_,v)),this.eventManager.requestRender())}}}let u=!1;s.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=s.mouseProperty,u=!0);let d=!1;s.raycastProperty!==this.prevRaycastProperty&&(this.prevRaycastProperty=s.raycastProperty,d=!0),this.events.forEach(h=>{(l.includes(h.data.variableId)||c.find(f=>f.objId===h.data.objectId&&f.property===h.data.property)||h.data.variableId==="mouseProperty"&&u||h.data.variableId==="raycastProperty"&&d)&&(h.dispatch(),this.eventManager.requestRender())})},this.onBlur=()=>{this.pause()},this.onFocus=()=>{this.resume()}}pause(){this.isOutOfFocus||(this.isOutOfFocus=!0,this.pauseTime=Date.now())}resume(){if(!this.isOutOfFocus)return;this.isOutOfFocus=!1;let e=Date.now()-this.pauseTime;for(let t=0;t<this.dynamicVars.length;t++)this.dynamicVars[t].last+=e,this.dynamicVars[t].expectedTime+=e}connect(){this.eventContext.page.traverseEntity(t=>{var i;(i=t.data)==null||i.events.filter(r=>r.data.type==="VariableChange"&&!r.data.disabled).forEach(r=>{this.events.push(new mDe(r.id,r.data,t,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),this.propertiesToWatch=this.events.filter(t=>t.data.variableId==="objectProperty"&&t.data.objectId!==null).map(t=>({objectId:t.data.objectId,property:t.data.property,prevValue:null}));let e=this.eventContext.sharedAssets;this.sharedVariables.forEach(({id:t,data:i})=>{if(!("dynamicVariableType"in i)){this.events.find(n=>n.data.variableId===t)&&this.variablesToWatch.push({id:t,prevValue:e.getVariable(t)});return}let r;if(i.dynamicVariableType==="timer"||i.dynamicVariableType==="stopwatch"){let n;if(Sa.isTextValue(i.value)&&Array.isArray(i.value.textValue)){let a=i.value.textValue;a.length===3?n=a[2]+a[1]*60+a[0]*3600:n=a[1]+a[0]*60}else n=i.value;r=n,this.dynamicVars.push({id:t,last:-1,expectedTime:-1,data:i,timerSeconds:n,startValue:r})}else i.dynamicVariableType==="time"&&e.updateVariable(t,NL(new Date,i)),i.dynamicVariableType==="counter"&&(r=Sa.isTextValue(i.value)?A9(i.value.textValue):i.value),this.dynamicVars.push({id:t,last:-1,expectedTime:-1,data:i,startValue:r})}),this.rafId=window.requestAnimationFrame(this.onFrame),window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus)}disconnect(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),this.rafId&&(window.cancelAnimationFrame(this.rafId),this.rafId=void 0),this.events.forEach(e=>e.dispose())}},mDe=class{constructor(e,t,i,r,n,a){this.id=e,this.data=t,this.object=i,this.actions=Dn(t,t.actions,r,n,a,i)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}dispose(){oa(this.actions)}};function A9(e){return e.length===3?e[2]+e[1]*60+e[0]*3600:e[1]+e[0]*60}var vDe="https://unpkg.com/@splinetool/runtime@1.9.45/build/",gDe="https://unpkg.com/@splinetool/navmesh-wasm@1.9.45/build/",yDe=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import('${vDe}' + 'navmesh.js'),
		fetch('${gDe}' + 'navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,bDe=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import(self.location.origin + '/_libraries/navmesh.js'),
		fetch(self.location.origin + '/_libraries/navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,wDe=`

onmessage = function(messageEvent) {
	const meshData = messageEvent.data;
	const positions = meshData[0];
	const offset = meshData[1];
	const indices = meshData[2];
	const indicesLength = meshData[3];
	const parameters = meshData[4];

	const module = self.module;
	const rc = new module.rcConfig();
	rc.cs = parameters.cs;
	rc.ch = parameters.ch;
	rc.borderSize = parameters.borderSize ? parameters.borderSize : 0;
	rc.tileSize = parameters.tileSize ? parameters.tileSize : 0;
	rc.walkableSlopeAngle = parameters.walkableSlopeAngle;
	rc.walkableHeight = parameters.walkableHeight;
	rc.walkableClimb = parameters.walkableClimb;
	rc.walkableRadius = parameters.walkableRadius;
	rc.maxEdgeLen = parameters.maxEdgeLen;
	rc.maxSimplificationError = parameters.maxSimplificationError;
	rc.minRegionArea = parameters.minRegionArea;
	rc.mergeRegionArea = parameters.mergeRegionArea;
	rc.maxVertsPerPoly = parameters.maxVertsPerPoly;
	rc.detailSampleDist = parameters.detailSampleDist;
	rc.detailSampleMaxError = parameters.detailSampleMaxError;

	if (!self.navMesh) {
		self.navMesh = new module.NavMesh();
	}
	self.navMesh.build(positions, offset, indices, indicesLength, rc);

	const navmeshData = navMesh.getNavmeshData();
	const arrView = new Uint8Array(module.HEAPU8.buffer, navmeshData.dataPointer, navmeshData.size);
	const ret = new Uint8Array(navmeshData.size);
	ret.set(arrView);
	navMesh.freeNavmeshData(navmeshData);

	postMessage(ret);
}
`,xDe=.001,_De={cs:6,ch:2,walkableSlopeAngle:90,walkableHeight:20,walkableClimb:5,walkableRadius:0,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1},NZ,Fi,ma;m2e.then(e=>{NZ=e,Fi=new e.Vec3,ma=new e.Vec3});var SDe=new H,CDe=class{constructor(e=!1,t=!1){this.usePhysics=e,this.isExport=t,this.onPointerDown=i=>{if(ai.length!==1)return;let{raycaster:r,page:n}=this.eventContext;this.eventContext.updateRaycaster(i);let a=n.raycastWithClones(r);if(a.length!==0){if(this.gameControl){let s=SDe.copy(this.gameControl.colliderWorldPosition);s.y-=this.gameControl.colliderHeight/2,this.gameControl.path=this.computePath(s,a[0].point)}this.eventContext.requestRender()}},this.traverseWithPhysics=(i,r)=>n=>{var h,f,p,m,v,y,x;let a;if(n instanceof hl)if(n.objectForSample){if(n.objectForSample.dataPatched.physics.fusedBody)return;a=n.object}else return n.object.dataPatched.physics.fusedBody===!0&&n.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(n instanceof Va)a=n.object;else if(a=n,((h=a.dataPatched.cloner)==null?void 0:h.disabled)===!1&&((f=a.dataPatched.cloner)==null?void 0:f.hideBase)&&((p=a.dataPatched.physics)==null?void 0:p.fusedBody)!==!0)return!0;if(r&&!a.userData.navmesh)return;let s=a.dataPatched;if(!s.visible&&((m=s.physics)==null?void 0:m.enabled)!==!0)return!0;n.updateMatrixWorldSVD();let o=Qx(s),l=a.userData.hasDestroy,c=a.userData.hasDrag,u=!1,d=!1;for(let b of s.events)b.data.disabled!==!0&&(b.data.type==="GameControl"?u=!0:b.data.type==="Follow"&&(d=!0));if(u||o||d||l||c)return!0;if(this.usePhysics&&((v=s.physics)==null?void 0:v.rigidBody)==="dynamic"){if(this.usePhysics&&((y=s.physics)!=null&&y.fusedBody))return!0}else if("geometry"in n&&n.geometry&&i.push(ou(n.geometry,n.matrixWorld)),this.usePhysics&&((x=s.physics)==null?void 0:x.fusedBody))return n.traverseObject((b,w)=>{var E,C;if(w===0)return;let S;if(b instanceof hl)if(b.objectForSample){if(b.objectForSample.dataPatched.physics.fusedBody)return;S=b.object}else return b.object.dataPatched.physics.fusedBody===!0&&b.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(b instanceof Va)S=b.object;else if(S=b,(E=b.dataPatched.cloner)==null?void 0:E.hideBase)return!0;let _=S.dataPatched;if(!_.visible&&((C=_.physics)==null?void 0:C.enabled)!==!0)return!0;"geometry"in b&&b.geometry&&i.push(ou(b.geometry,b.matrixWorld))}),!0},this.traverseNoPhysics=(i,r)=>n=>{let a;if(n instanceof hl)return;n instanceof Va?a=n.object:a=n;let s=a.dataPatched;if(s.physics.enabled==="visibility"?!s.visible:!s.physics.enabled)return!0;if(r&&!a.userData.navmesh)return;let o=n.geometry,l=a.userData.hasDestroy===!0,c=a.userData.hasDrag===!0;if(Qx(s)||l||c||a.dataPatched.events.some(u=>u.data.disabled!==!0&&u.data.type==="GameControl"))return!0;o&&i.push(ou(o,n.matrixWorld))},this.navmeshWasm=NZ,this.navMesh=new this.navmeshWasm.NavMesh,this._workerURL=URL.createObjectURL(new Blob([(t?yDe:bDe)+wDe])),this._worker=new Worker(this._workerURL)}init(e,t,i){this.gameControl=t,this.eventContext=i,this.setDefaultQueryExtent(new H().setScalar(e.ch*e.walkableRadius*1.2)),this._worker.onmessage=()=>{this.createNavMesh(i.page,e,r=>{this.buildFromNavmeshData(r.data)})},this.eventContext.renderer.domElement.addEventListener("pointerdown",this.onPointerDown)}createNavMesh(e,t,i){t.objects.forEach(l=>{var u;let c=e.scene.find(l);c.traverseEntity(d=>{d.userData.navmesh=!0}),(u=c.cloner)==null||u.traverseObject(d=>{d.userData.navmesh=!0})});let r=[],n=(this.usePhysics?this.traverseWithPhysics:this.traverseNoPhysics)(r,t.zones==="custom");if(e.traverseChildren(n),t.objects.forEach(l=>{var u;let c=e.scene.find(l);c.traverseEntity(d=>{d.userData.navmesh=void 0}),(u=c.cloner)==null||u.traverseObject(d=>{d.userData.navmesh=void 0})}),r.length===0)return!1;let a=bf(r),{positions:s,triIndices:o}=uS(a.getAttribute("position"),a.getIndex());return this._worker.postMessage([s,s.length/3,o,o.length,{..._De,...t}]),this._worker.onmessage=i,!0}createDebugNavGeometry(){let e,t,i=this.navMesh.getDebugNavMesh(),r=i.getTriangleCount(),n=new Uint32Array(r*3),a=new Float32Array(r*3*3);for(e=0;e<r*3;e++)n[e]=e;for(e=0;e<r;e++)for(t=0;t<3;t++){let o=i.getTriangle(e).getPoint(t);a[e*9+t*3+0]=o.x,a[e*9+t*3+1]=o.y,a[e*9+t*3+2]=o.z}let s=new Kt;return s.setIndex(new ui(n,1)),s.setAttribute("position",new ui(a,3)),s}getClosestPoint(e){return Fi.x=e.x,Fi.y=e.y,Fi.z=e.z,this.navMesh.getClosestPoint(Fi)}getClosestPointToRef(e,t){Fi.x=e.x,Fi.y=e.y,Fi.z=e.z;let i=this.navMesh.getClosestPoint(Fi);t.set(i.x,i.y,i.z)}getRandomPointAround(e,t){return Fi.x=e.x,Fi.y=e.y,Fi.z=e.z,this.navMesh.getRandomPointAround(Fi,t)}getRandomPointAroundToRef(e,t,i){Fi.x=e.x,Fi.y=e.y,Fi.z=e.z;let r=this.navMesh.getRandomPointAround(Fi,t);i.set(r.x,r.y,r.z)}moveAlong(e,t){return Fi.x=e.x,Fi.y=e.y,Fi.z=e.z,ma.x=t.x,ma.y=t.y,ma.z=t.z,this.navMesh.moveAlong(Fi,ma)}moveAlongToRef(e,t,i){return Fi.x=e.x,Fi.y=e.y,Fi.z=e.z,ma.x=t.x,ma.y=t.y,ma.z=t.z,this.navMesh.moveAlong(Fi,ma)}computePath(e,t){let i=this.getClosestPoint(t);if(ma.x=i.x,ma.y=i.y,ma.z=i.z,Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)+Math.pow(t.z-i.z,2))>this.getDefaultQueryExtent().y)return[];this.getClosestPoint(e);let r=this.navMesh.computePath(Fi,ma),n=r.getPointCount(),a=[];for(let s=0;s<n;s++){let o=r.getPoint(s);a.push(new H(o.x,o.y,o.z))}return a}createCrowd(e,t){return new EDe(this,e,t)}setDefaultQueryExtent(e){Fi.x=e.x,Fi.y=e.y,Fi.z=e.z,this.navMesh.setDefaultQueryExtent(Fi)}getDefaultQueryExtent(){return this.navMesh.getDefaultQueryExtent()}buildFromNavmeshData(e){let t=e.length*e.BYTES_PER_ELEMENT,i=this.navmeshWasm._malloc(t),r=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,i,t);r.set(e);let n=new this.navmeshWasm.NavmeshData;n.dataPointer=r.byteOffset,n.size=e.length,this.navMesh.buildFromNavmeshData(n),this.navmeshWasm._free(r.byteOffset)}getNavmeshData(){let e=this.navMesh.getNavmeshData(),t=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,e.dataPointer,e.size),i=new Uint8Array(e.size);return i.set(t),this.navMesh.freeNavmeshData(e),i}getDefaultQueryExtentToRef(e){let t=this.navMesh.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}dispose(){var e;this.navMesh.destroy(),this._worker.terminate(),URL.revokeObjectURL(this._workerURL),(e=this.eventContext)==null||e.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown)}addCylinderObstacle(e,t,i){return Fi.x=e.x,Fi.y=e.y,Fi.z=e.z,this.navMesh.addCylinderObstacle(Fi,t,i)}addBoxObstacle(e,t,i){return Fi.x=e.x,Fi.y=e.y,Fi.z=e.z,ma.x=t.x,ma.y=t.y,ma.z=t.z,this.navMesh.addBoxObstacle(Fi,ma,i)}removeObstacle(e){this.navMesh.removeObstacle(e)}isSupported(){return this.navmeshWasm!==void 0}},EDe=class{constructor(e,t,i){this.navmeshWasmWrapper=e,this.transforms=[],this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this.crowd=new this.navmeshWasmWrapper.navmeshWasm.Crowd(t,i,this.navmeshWasmWrapper.navMesh.getNavMesh())}onReachTarget(e,t){}addAgent(e,t,i){let r=new this.navmeshWasmWrapper.navmeshWasm.dtCrowdAgentParams;r.radius=t.radius,r.height=t.height,r.maxAcceleration=t.maxAcceleration,r.maxSpeed=t.maxSpeed,r.collisionQueryRange=t.collisionQueryRange,r.pathOptimizationRange=t.pathOptimizationRange,r.separationWeight=t.separationWeight,r.updateFlags=7,r.obstacleAvoidanceType=0,r.queryFilterType=0,r.userData=0;let n=this.crowd.addAgent(new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z),r);return this.transforms.push(i),this.agents.push(n),this.reachRadii.push(t.reachRadius?t.reachRadius:t.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new H(0,0,0)),n}getAgentPosition(e){return this.crowd.getAgentPosition(e)}getAgentPositionToRef(e,t){let i=this.crowd.getAgentPosition(e);t.set(i.x,i.y,i.z)}getAgentVelocity(e){return this.crowd.getAgentVelocity(e)}getAgentVelocityToRef(e,t){let i=this.crowd.getAgentVelocity(e);t.set(i.x,i.y,i.z)}getAgentNextTargetPath(e){return this.crowd.getAgentNextTargetPath(e)}getAgentNextTargetPathToRef(e,t){let i=this.crowd.getAgentNextTargetPath(e);t.set(i.x,i.y,i.z)}getAgentState(e){return this.crowd.getAgentState(e)}overOffmeshConnection(e){return this.crowd.overOffmeshConnection(e)}agentGoto(e,t){this.crowd.agentGoto(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z));let i=this.agents.indexOf(e);i>-1&&(this._agentDestinationArmed[i]=!0,this._agentDestination[i].set(t.x,t.y,t.z))}agentTeleport(e,t){this.crowd.agentTeleport(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z))}updateAgentParameters(e,t){let i=this.crowd.getAgentParameters(e);t.radius!==void 0&&(i.radius=t.radius),t.height!==void 0&&(i.height=t.height),t.maxAcceleration!==void 0&&(i.maxAcceleration=t.maxAcceleration),t.maxSpeed!==void 0&&(i.maxSpeed=t.maxSpeed),t.collisionQueryRange!==void 0&&(i.collisionQueryRange=t.collisionQueryRange),t.pathOptimizationRange!==void 0&&(i.pathOptimizationRange=t.pathOptimizationRange),t.separationWeight!==void 0&&(i.separationWeight=t.separationWeight),this.crowd.setAgentParameters(e,i)}removeAgent(e){this.crowd.removeAgent(e);let t=this.agents.indexOf(e);t>-1&&(this.agents.splice(t,1),this.transforms.splice(t,1),this.reachRadii.splice(t,1),this._agentDestinationArmed.splice(t,1),this._agentDestination.splice(t,1))}getAgents(){return this.agents}update(e){if(this.navmeshWasmWrapper.navMesh.update(),e<=xDe)return;let t=1/60,i=10;{let r=Math.floor(e/t);r>i&&(r=i),r<1&&(r=1);let n=e/r;for(let a=0;a<r;a++)this.crowd.update(n)}for(let r=0;r<this.agents.length;r++){let n=this.agents[r],a=this.getAgentPosition(n);if(this.transforms[r].copy(a),this._agentDestinationArmed[r]){let s=a.x-this._agentDestination[r].x,o=a.z-this._agentDestination[r].z,l=this.reachRadii[r],c=this._agentDestination[r].y-this.reachRadii[r],u=this._agentDestination[r].y+this.reachRadii[r],d=s*s+o*o;a.y>c&&a.y<u&&d<l*l&&(this.onReachTarget(n,this._agentDestination[r]),this._agentDestinationArmed[r]=!1)}}}setDefaultQueryExtent(e){let t=new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z);this.crowd.setDefaultQueryExtent(t)}getDefaultQueryExtent(){return this.crowd.getDefaultQueryExtent()}getDefaultQueryExtentToRef(e){let t=this.crowd.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}getCorners(e){let t,i=this.crowd.getCorners(e),r=i.getPointCount(),n=[];for(t=0;t<r;t++){let a=i.getPoint(t);n.push(new H(a.x,a.y,a.z))}return n}dispose(){this.crowd.destroy()}};function ADe(e){let t=!1;return e.scene.objects.forEach(i=>{i.data.type==="Page"&&!t&&i.data.publish.gameControlObject&&y1.traverseModuleInstances(e,i.id,(r,n,a)=>{for(let s of a)s.data.type==="GameControl"&&s.data.navmesh.enabled&&(t=!0)})}),t}var MDe={type:"change"},M9={type:"changeZoom"},TDe={type:"changePan"},$h={type:"start"},Zh={type:"end",changed:!0},PDe={type:"end",changed:!1},T4=new mi,T9=new Pe,DDe=2*Math.PI,IDe=1e-8,ODe=.01,P4=new H,yw=new Pe,D4=new H,bw=new mi,P9=new pt,RDe={type:"requestRender"},FZ=class extends Pa{constructor(e,t,i={isPlayMode:!1,isExport:!1}){super(),this.object=e,this.domElement=t,this.options=i,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,so.DOLLY_ROTATE,so.PAN],this.offset=new H,this.eye=new H,this.lastPosition=new H,this.lastQuaternion=new mi,this.current=new Pe,this.overShoot=new Pe,this.overRatio=new Pe,this.spherical=new e6,this.sphericalDelta=new e6,this.panOffset=new H,this.panLeftV=new H,this.panUpV=new H,this.panV=new H,this.rotateStart=new Pe,this.rotateEnd=new Pe,this.rotateDelta=new Pe,this.panStart=new Pe,this.panEnd=new Pe,this.panDelta=new Pe,this.dollyStart=new Pe,this.dollyEnd=new Pe,this.dollyDelta=new Pe,this.rotationRangeFactor=new Pe,this.panRangeFactor=new Pe,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.useWindowEvents=!1,this.isTouchZoom=!0,this.autoRotateSpeed=2,this.dampingFactor=.125,this.zoomSpeed=2,this.rotateSpeed=1,this.panSpeed=1,this.hoverRotatePanStrength=.1,this.hoverRotateDamping=this.dampingFactor,this.thetaIsFree=!1,this.phiIsFree=!1,this.needsUpdate=!0,this.onCameraChange=r=>{this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange),this.object=r.camera,this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)},this.update=()=>{this.object.updateWorldMatrix(!0,!1),this.object.matrixWorld.decompose(D4,bw,P4),this.offset.copy(D4).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==0&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==2&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==1||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&this.object.isPerspectiveCamera&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==0&&(this.target.applyQuaternion(T4.copy(bw).invert()),this.panOffset.applyQuaternion(T4),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(bw),this.panOffset.applyQuaternion(bw)),this.panLimitsMode===2&&(this.panOffset.y=0),this.panLimitsMode===1&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-this.dampingFactor),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),D4.copy(this.target).add(this.offset),this.object.position.copy(this.target).add(this.offset),this.object.parent&&(P9.copy(this.object.parent.matrixWorld).invert(),this.object.position.applyMatrix4(P9));let r=this.spherical.phi%DDe;if(this.eye.copy(this.offset).normalize(),this.object.up.copy(dr.DEFAULT_UP).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),r>0&&r>Math.PI||r<0&&r>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0){let n=this.hoverRotatePanMode===1?this.hoverRotateDamping:this.dampingFactor;this.sphericalDelta.theta*=1-n,this.sphericalDelta.phi*=1-n}else this.sphericalDelta.set(0,0,0);return this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>ODe||8*(1-this.lastQuaternion.dot(this.object.quaternion))>IDe?(this.dispatchEvent(MDe),this.object.dispatchEvent(RDe),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.object.wasMovedBySwitchCameraAction=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=r=>{this.enabled!==!1&&(r.pointerType==="touch"||r.pointerType==="pen"&&qs?this.onPointerDownTouch(r):this.onPointerDownMouse(r),this.state!==-1&&(this.isPointerDown=!0,this.dispatchEvent($h),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),r.stopPropagation(),r.pointerType==="touch"||r.pointerType==="pen"&&qs||this.domElement.setPointerCapture(r.pointerId)))},this.onPointerLeave=r=>{this.resetHoverEffectOnPointerLeave&&!this.useWindowEvents?(this.hoverRotatePanMode===1?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,P4.subVectors(this.position0,this.target0),this.spherical.setFromVector3(P4),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):this.hoverRotatePanMode===2&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=r},this.onPointerEnter=r=>{this.resetHoverEffectOnPointerLeave||this.pointerLeaveEvent===void 0?yw.set(r.clientX-this.domElement.clientWidth/2,r.clientY-this.domElement.clientHeight/2):yw.set(r.clientX-this.pointerLeaveEvent.clientX,r.clientY-this.pointerLeaveEvent.clientY),this.hoverRotatePanMode===1?(this.rotateDelta.copy(yw).multiplyScalar(this.rotateSpeed*this.hoverRotatePanStrength).rotateAround(T9,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(r.clientX,r.clientY)):this.hoverRotatePanMode===2&&(this.panDelta.copy(yw).multiplyScalar(this.panSpeed*this.hoverRotatePanStrength),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(r.clientX,r.clientY)),this.update()},this.onPointerMove=r=>{this.enabled!==!1&&(this.checkRaycastLock()||(r.pointerType==="touch"||r.pointerType==="pen"&&qs?this.onPointerMoveTouch(r):this.onPointerMoveMouse(r),r.stopPropagation()))},this.onPointerUp=r=>{this.isPointerDown=!1,ai.length===0&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),ai.length>1&&r.preventDefault(),this.hasChange?this.dispatchEvent(Zh):this.dispatchEvent(PDe),this.state=-1,r&&(r.stopPropagation(),r.pointerType==="touch"||r.pointerType==="pen"&&qs||this.domElement.releasePointerCapture(r.pointerId))},this.onPointerDownMouse=r=>{let n;switch(this.useKeyEvents?n=this.mouseButtons[r.button]:n=this.mouseButtonsPlay[r.button],n){case 0:if(r.altKey===!0&&!r.shiftKey&&!Db(r)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2;break;case 3:if(Db(r)||r.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}break;case 5:if(Db(r)||r.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=r=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(r);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(r);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(r);break}this.object.wasMovedByUser=!0},this.onPointerDownTouch=r=>{switch(ai.length>1&&r.preventDefault(),this.touches[ai.length-1]){case so.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case so.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case so.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case so.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=r=>{switch(ai.length>1&&r.preventDefault(),this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(r),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(r),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchMoveDollyPan(r),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchMoveDollyRotate(r),this.update();break;default:this.state=-1}this.object.wasMovedByUser=!0},this.dispatchEndDebounced=f1(()=>this.dispatchEvent(Zh),33),this.onMouseWheel=r=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||this.checkRaycastLock()||(!this.options.isExport&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&r.preventDefault(),this.dispatchEvent($h),this.handleMouseWheel(r),this.dispatchEndDebounced(),this.object.wasMovedByUser=!0)},this.onGesture=r=>{if(r.preventDefault(),this.enabled!==!1&&!this.checkRaycastLock()&&!cy)if(r.type==="gesturechange"){if(this.enableZoom===!1||this.isTouchZoom===!1)return;this.dispatchEvent($h),r.scale>this.prevScale?this.dollyIn(this.getZoomScale()):r.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=r.scale,this.update(),this.object.wasMovedByUser=!0}else this.dispatchEvent(Zh)},this.onContextMenu=r=>{r.preventDefault()},this.onTouchEnd=r=>{r.preventDefault()},this.onKeyDown=r=>{this.enabled!==!1&&(this.key=r.key,r.key===" "&&this.dispatchEvent($h))},this.onKeyUp=r=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&r.key==="Alt"&&this.onPointerUp(ai[0]),r.key===" "&&this.dispatchEvent(Zh))},this.onPointerHover=r=>{r.pointerType!=="mouse"||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===2&&this.isPanOverShoot||this.hoverRotatePanMode===1&&this.isRotateOverShoot||(this.isPointerDown=!0,this.hoverRotatePanMode===2?this.handleMouseMovePan(r,this.hoverRotatePanStrength):this.hoverRotatePanMode===1&&this.handleMouseMoveRotate(r,this.hoverRotatePanStrength))},this.onBeginState=()=>{this.enabled=!1,this.needsUpdate=!1},this.onCompleteState=r=>{r.isfromEntity&&this.options.isPlayMode||(this.enabled=!0,this.needsUpdate=!0,this.object.updateUp(),this.object.getTarget(this.target))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.quat0=this.object.quaternion.clone(),this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.initialSphericalRadius=this.spherical.radius,this.addEventListenersToCamera()}dispatchEvent(e){e.type==="start"?this.hasChange=!1:this.hasChange=!0,super.dispatchEvent(e)}addEventListenersToCamera(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)}removeEventListenersFromCamera(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange)}updateUseWindowEvents(e){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=e,this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let t=this.useWindowEvents?window:this.domElement;t.addEventListener("pointerleave",this.onPointerLeave),t.addEventListener("pointerenter",this.onPointerEnter)}}fromJSON(e,t){this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.thetaIsFree=e.rotationHorizontalOffset.min===e.rotationHorizontalOffset.max&&e.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=e.rotationVerticalOffset.min===e.rotationVerticalOffset.max&&e.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.hoverRotateDamping=e.hoverRotateDamping??this.dampingFactor,this.useWindowEvents=t==="window",this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover));let i=e.hoverRotatePanStrength/100;this.hoverRotatePanStrength=i**2,this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/e.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,this.autoRotateSpeed=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;let r=this.object.getTarget().applyQuaternion(T4.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+r.y,this.maxV=e.panVerticalOffset.max+r.y,this.minH=-e.panHorizontalOffset.min+r.x,this.maxH=e.panHorizontalOffset.max+r.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=ql(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=ql(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=ql(ql(this.spherical.theta)-e.rotationHorizontalOffset.min),this.maxTheta=ql(ql(this.spherical.theta)+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,e.orbitTouches===1&&(this.touches[0]=so.ROTATE),e.panTouches===1&&(this.touches[0]=so.PAN),e.orbitTouches===2&&(this.touches[1]=so.DOLLY_ROTATE),e.panTouches===2&&(this.touches[1]=so.DOLLY_PAN),e.orbitTouches===3&&(this.touches[2]=so.ROTATE),e.panTouches===3&&(this.touches[2]=so.PAN),this.isTouchZoom=e.isTouchZoom,this.resetHoverEffectOnPointerLeave=e.resetHoverEffectOnPointerLeave??!1}connect(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture),this.domElement.addEventListener("touchend",this.onTouchEnd),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let e=this.useWindowEvents?window:this.domElement;e.addEventListener("pointerleave",this.onPointerLeave),e.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}dispose(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(e,t,i,r,n,a,s,o){this.overShoot.set(0,0);let l,c,u;e instanceof H?(l=e.x,c=e.y,this.current.set(this.target.x,this.target.y),u=!0):(l=e.theta,c=e.phi,this.current.set(ql(this.spherical.theta),ql(this.spherical.phi)),u=!1),i===0&&(this.current.x+=l,this.current.y+=c),(t===3||t===2)&&(!u&&this.isThetaFlipped?this.current.x>r&&this.current.x<0?this.overShoot.x=r-this.current.x:this.current.x<n&&this.current.x>0&&(this.overShoot.x=n-this.current.x):this.current.x>r?this.overShoot.x=r-this.current.x:this.current.x<n&&(this.overShoot.x=n-this.current.x)),(t===3||t===1)&&(this.current.y>a?this.overShoot.y=a-this.current.y:this.current.y<s&&(this.overShoot.y=s-this.current.y)),u||(this.overShoot.x=ql(this.overShoot.x),this.overShoot.y=ql(this.overShoot.y)),i!==0?(this.overRatio.copy(this.overShoot).divide(o),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),i===1&&(this.overRatio.x=D9(Math.abs(this.overRatio.x)),this.overRatio.y=D9(Math.abs(this.overRatio.y))),this.isPointerDown||i===1?i===2&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:(l*this.overShoot.x<0&&!this.thetaIsFree&&(l*=1-this.overRatio.x),c*this.overShoot.y<0&&!this.phiIsFree&&(c*=1-this.overRatio.y)):i===2&&(!u&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||u&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||(l=this.overShoot.x*.05),this.phiIsFree||(c=this.overShoot.y*.05),u?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):u?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,c+=this.overShoot.y),e instanceof H?(e.x=l,e.y=c):(this.thetaIsFree||(e.theta=l),this.phiIsFree||(e.phi=c))}setEnableDampingSpeed(e){this.enableDamping=e,this.rotateSpeed=e===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*this.autoRotateSpeed}getZoomScale(){return Math.pow(.95,this.zoomSpeed)}rotateLeft(e){this.sphericalDelta.theta-=e}rotateUp(e){this.sphericalDelta.phi-=e}panLeft(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}panUp(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}pan(e,t){let i=this.domElement;if(i&&this.object.isPerspectiveCamera){let r=this.object.position;this.panV.copy(r).sub(this.target);let n=this.panV.length();n*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*n/i.clientHeight,this.object.matrixWorld),this.panUp(2*t*n/i.clientHeight,this.object.matrixWorld)}else i&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrixWorld),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrixWorld));this.dispatchEvent(TDe)}dollyOut(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(M9)}dollyIn(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(M9)}zoomOut(e=this.getZoomScale()){this.dispatchEvent($h),this.dollyOut(e),this.dispatchEvent(Zh)}zoomIn(e=this.getZoomScale()){this.dispatchEvent($h),this.dollyIn(e),this.dispatchEvent(Zh)}setZoom(e){if(this.dispatchEvent($h),this.object.isPerspectiveCamera){let t=this.initialSphericalRadius/e/this.spherical.radius;this.scale=t}else this.object.isOrthographicCamera&&(this.object.zoom=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0);this.dispatchEvent(Zh)}handleMouseDownRotate(e){this.rotateStart.set(e.clientX,e.clientY)}handleMouseDownDolly(e){this.dollyStart.set(e.clientX,e.clientY)}handleMouseDownPan(e){this.panStart.set(e.clientX,e.clientY)}handleMouseMoveRotate(e,t=1){e.movementX!==void 0?this.rotateDelta.set(e.movementX,e.movementY):(this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*t).rotateAround(T9,-this.object.angleOffsetFromUp);let i=this.domElement,r=this.useWindowEvents?window.innerHeight:i.clientHeight,n=2*Math.PI*this.rotateDelta.x/r,a=2*Math.PI*this.rotateDelta.y/r;this.rotateLeft(n),this.rotateUp(a),this.update()}handleMouseMoveDolly(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(e,t=1){e.movementX!==void 0?this.panDelta.set(e.movementX,e.movementY):(this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*t),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(e){if(c2e===!1&&Db(e)===!1&&d2e(e)===!0){if(this.enablePan===!1)return;this.gesture?(this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):e.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(this.enableZoom===!1||this.gesture)return;e.deltaY===0?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if(ai.length===2){let e=.5*(ai[0].pageX+ai[1].pageX),t=.5*(ai[0].pageY+ai[1].pageY);this.rotateStart.set(e,t)}else this.rotateStart.set(ai[0].pageX,ai[0].pageY)}handleTouchStartPan(){if(ai.length===2){let e=.5*(ai[0].pageX+ai[1].pageX),t=.5*(ai[0].pageY+ai[1].pageY);this.panStart.set(e,t)}else this.panStart.set(ai[0].pageX,ai[0].pageY)}handleTouchStartDolly(){let e=ai[0].pageX-ai[1].pageX,t=ai[0].pageY-ai[1].pageY,i=Math.sqrt(e*e+t*t);this.dollyStart.set(0,i)}handleTouchStartDollyPan(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(e){if(ai.length===2){let i=bC(e),r=.5*(e.pageX+i.x),n=.5*(e.pageY+i.y);this.rotateEnd.set(r,n)}else{if(e.pointerId!==ai[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;t&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/t.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/t.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(e){if(ai.length===2){let t=bC(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this.panEnd.set(i,r)}else{if(e.pointerId!==ai[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(e){let t=bC(e),i=e.pageX-t.x,r=e.pageY-t.y,n=Math.sqrt(i*i+r*r);this.dollyEnd.set(0,n),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(e){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}handleTouchMoveDollyRotate(e){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}checkRaycastLock(){var e;if(this.object.data.raycastLock){if(this.options.isPlayMode)return!1;{let t=(e=this.options)==null?void 0:e.showCameraLock;return t&&t(),!0}}else return!1}};function ql(e){let t=Math.PI*2;for(;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function D9(e){return 1-Math.pow(1-e,4)}var I9=class{constructor(e,t,i,r,n,a){this.id=e,this.data=t,this.object=i,this.page=r,this.currentIntersectedObjects=[],this.actions=Dn(t,t.actions,r,n,a,i),this.target=t.target,this.triggeringObjects=[];for(let s of t.triggeringObjects){let o=r.scene.find(s);o&&this.triggeringObjects.push(o)}}isValidTriggeringObject(e){return this.target==="all"?!0:this.triggeringObjects.some(t=>t===e||t.isAncestorOf(e.uuid)||e.isAncestorOf(t.uuid))}disconnect(){oa(this.actions)}dispatch(){this.object.destroyedInAction||(this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Trigger"}),this.actions.Transition.forEach(e=>{e.data.runMode==="Toggle"?e.toggle():e.play()}),this.actions.SwitchCamera.forEach(e=>{e.data.runMode==="Toggle"?e.toggle():e.play()}),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch(!1)}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Particles.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()))}},qi;g2e.then(e=>qi=e);var _n=new H,tl=new mi,md=new H,I4=new Vn(0,0,0,"YXZ"),O9=new Vn(0,0,0,"XYZ"),il=new H,O4=new H,R4=new H(1,1,1),Kp=new mi,ww=new pt,R9=new pt,kDe={type:"updateMatrix"},k9=new mi,k4=new Fs,eT={type:"beginEvent",eventName:"Collision"},LDe={type:"beginEvent",eventName:"Trigger"};function BDe(e){if(y1.physicsEnabled(e.scene.objects))return!0;let t=!1;return e.scene.objects.traverse((i,r)=>{if(r.events){if(Array.isArray(r.events)){for(let n of r.events)if(n.data.disabled!==!0&&n.data.type==="GameControl"&&n.data.collisionEnabled){t=!0;break}}else for(let n of Object.values(r.events))if(n.disabled!==!0&&n.type==="GameControl"&&n.collisionEnabled){t=!0;break}}}),t}var Qx=e=>e.states.some(t=>t.data.position!==void 0||t.data.rotation!==void 0||t.data.hiddenMatrix!==void 0||t.data.cloner!==void 0||t.data.pathSnapping!==void 0),NDe=class{constructor(e){this.eventContext=e,this.isEnabled=!1,this.gameControl=null,this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],entityToCollisionEvents:{},colliderToEntity:new Map,triggers:[],gamePads:[],createdObjects:[],nCreatedPerAction:{}},this.sensorToTriggerEvent={},this.eventManager=void 0,this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.isExport=!1,this.processRigidBody=t=>{if(t.bodyType()!==qi.RigidBodyType.Dynamic)return;t.isSleeping()||this.nActiveRigidBodies++;let[i,r,n]=this.rigidBodyToMesh.get(t.handle);if(_n.copy(t.translation()).multiplyScalar(this.pixelsPerMeter),tl.copy(t.rotation()),i.matrixWorld.compose(_n,tl,r),i.hasNonUniformScale&&i.matrixWorld.multiply(i.shearScale),i.dispatchEvent(kDe),n){let a=i.cloner;if(a&&a.objectForSample===void 0){a.matrixWorld.copy(i.matrixWorld);for(let s of a.children)s.updateMatrixWorld(!0)}for(let s of i.children)s.updateMatrixWorld(!0)}},this.accumulator=0,this.handleCollisionEvents=(t,i,r)=>{var s,o,l,c;if(r===!1)return;let n,a;if(this.sensorToTriggerEvent[t]?(n=this.sensorToTriggerEvent[t],a=this.sharedGameControlGlobals.colliderToEntity.get(i)):this.sensorToTriggerEvent[i]&&(n=this.sensorToTriggerEvent[i],a=this.sharedGameControlGlobals.colliderToEntity.get(t)),n&&a&&n.isValidTriggeringObject(a)){n.dispatch();return}for(let u=this.sharedGameControlGlobals.createdObjects.length-1;u>=0;u--){let d=this.sharedGameControlGlobals.createdObjects[u];if(d.userData.hasCollisionDestroy&&(((s=d.rigidBody)==null?void 0:s.collider(0).handle)===t||((o=d.rigidBody)==null?void 0:o.collider(0).handle)===i)){this.sharedGameControlGlobals.createdObjects.splice(u,1),d.removeFromParent(),requestAnimationFrame(()=>{var h;return(h=this.sharedGameControlGlobals.rapierWorld)==null?void 0:h.removeRigidBody(d.rigidBody)});break}}if(((l=this.gameControl)==null?void 0:l.object)!==void 0&&this.gameControl.object===this.sharedGameControlGlobals.colliderToEntity.get(t)){let u=this.sharedGameControlGlobals.colliderToEntity.get(i),d=this.sharedGameControlGlobals.entityToCollisionEvents[u.uuid];if(d===void 0)return;for(let h of d)h.data.target==="character"&&this.dispatchCollisionEvent(h,u,i)}else if(((c=this.gameControl)==null?void 0:c.object)!==void 0&&this.gameControl.object===this.sharedGameControlGlobals.colliderToEntity.get(i)){let u=this.sharedGameControlGlobals.colliderToEntity.get(t),d=this.sharedGameControlGlobals.entityToCollisionEvents[u.uuid];if(d===void 0)return;for(let h of d)h.data.target==="character"&&this.dispatchCollisionEvent(h,u,t)}else{let u=this.sharedGameControlGlobals.colliderToEntity.get(t),d=this.sharedGameControlGlobals.entityToCollisionEvents[u.uuid];if(d!==void 0)for(let p of d)p.data.target==="scene"&&this.dispatchCollisionEvent(p,u,t);let h=this.sharedGameControlGlobals.colliderToEntity.get(i),f=this.sharedGameControlGlobals.entityToCollisionEvents[h==null?void 0:h.uuid];if(f!==void 0)for(let p of f)p.data.target==="scene"&&this.dispatchCollisionEvent(p,h,i)}},this.isExport=e.isExport,this.sharedAssets=e.sharedAssets,this.renderer=e.renderer,this.requestRender=e.requestRender,this.domElement=this.renderer.domElement,this.pixelsPerMeter=PZ,this.gravity=this.page.data.globalPhysics.gravity}get page(){return this.eventContext.page}attachVRControllers(e){e.forEach(t=>{t.addEventListener("connected",i=>{"gamepad"in i.data&&"axes"in i.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(i.data.gamepad)})})}markIsDestroyTarget(){this.page.traverseVisibleEntity(e=>{var i,r;let t=e.dataPatched;for(let n of t.events){if(n.data.disabled===!0)continue;let a=(r=(i=n.data.actions)==null?void 0:i.find(s=>s.data.type==="Destroy"))==null?void 0:r.data;if(a)for(let s of a.objects){let o=this.page.scene.find(s);o&&(o.userData.hasDestroy=!0)}}})}markIsDragObject(){this.page.traverseVisibleEntity(e=>{let t=e.dataPatched;for(let i of t.events)if(!(i.data.disabled===!0||i.data.type!=="DragDrop"))for(let r of i.data.objects){let n=this.page.scene.find(r);n&&(n.userData.hasDrag=!0)}})}initBVH(){let e=[];if(this.page.traverseChildren(t=>{var c,u;let i,r=t instanceof e2,n=t instanceof i2;if(t instanceof hl||r||n)return;t instanceof Va?i=t.object:i=t;let a=i.dataPatched;if(((c=a.physics)==null?void 0:c.enabled)==="visibility"?!a.visible:!((u=a.physics)!=null&&u.enabled))return!0;let s=t.geometry,o=i.userData.hasDestroy===!0,l=i.userData.hasDrag===!0;if(Qx(a)||o||l||i.dataPatched.events.some(d=>d.data.disabled!==!0&&(d.data.type==="GameControl"||d.data.type==="Follow")))return t.updateMatrixWorldSVD(),this.addBoundsTree(t),!0;s&&e.push(ou(s,t.matrixWorld))}),e.length>0){let t=bf(e,!1);this.sharedGameControlGlobals.staticMeshBVH=new Lg(t)}}addRigidBody(e,t,i){let r=[],n="geometry"in e?e.geometry:void 0,a=t.dataPatched;if((n==null?void 0:n.getAttribute("position"))!==void 0&&r.push(ou(n,e.shearScale)),a.physics.fusedBody){let s=this.gatherChildrenGeom(e,r);e.traverseObject(s),e.children.forEach(l=>l.updateMatrixWorld(!0));let o=e.cloner;o&&o.objectForSample===void 0&&a.physics.rigidBody==="dynamic"&&(o.traverseObject(s),o.children.forEach(l=>l.updateMatrixWorld(!0)))}if(r.length>0){let s,o=!i.fromCreate&&a.physics.rigidBody==="dynamic"||i.fromCreate&&i.dynamic;o?(s=qi.RigidBodyDesc.dynamic(),s.setLinearDamping(a.physics.damping).setAngularDamping(a.physics.damping).setAdditionalMass(1e-9).setGravityScale(a.physics.gravityScale).enabledRotations(...a.physics.enabledRotation).enabledTranslations(...a.physics.enabledTranslation)):(i.hasTransformAnim||i.hasFollow||i.hasDrag)&&!i.fromCreate?(s=qi.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)):s=qi.RigidBodyDesc.fixed();let l=bf(r);(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(_n,tl,md),e.position0=_n.clone().divideScalar(this.pixelsPerMeter),e.rotation0=tl.clone(),_n.divideScalar(this.pixelsPerMeter),s.setTranslation(_n.x,_n.y,_n.z).setRotation(tl),n?l==null||l.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):l==null||l.scale(md.x/this.pixelsPerMeter,md.y/this.pixelsPerMeter,md.z/this.pixelsPerMeter);let c=this.sharedGameControlGlobals.rapierWorld.createRigidBody(s);o&&this.rigidBodyToMesh.set(c.handle,[e,md.clone(),a.physics.fusedBody]);let u=!(a.geometry===void 0||a.geometry.type==="SubdivGeometry"||a.geometry.type==="NonParametricGeometry"||a.geometry.type==="BooleanGeometry"||a.geometry.type==="VectorGeometry"||a.geometry.type==="StarGeometry"||a.geometry.type==="RectangleGeometry"||a.geometry.type==="EllipseGeometry"||a.geometry.type==="TriangleGeometry"||a.geometry.type==="TorusGeometry"||a.geometry.type==="HelixGeometry");try{this.addCollider(c,a.physics,l,t,u)}catch{try{this.addCollider(c,a.physics,l,t,!1)}catch(d){console.error(d)}}e.rigidBody=c}}addBoundsTree(e){var i,r;let t=[];if(((i=e.geometry)==null?void 0:i.getAttribute("position"))!==void 0&&((r=e.geometry)==null?void 0:r.getAttribute("position").count)>0&&t.push(ou(e.geometry,e.shearScale)),e.traverseObject(this.gatherChildrenGeom(e,t)),e.children.forEach(n=>n.updateMatrixWorld(!0)),t.length>0){let n=bf(t,!1);e.bvhGeometry=n,n.getAttribute("position").count>0&&(e.bvhGeometry.boundsTree=new Lg(n),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e))}}addCollider(e,t,i,r,n=!0){var o,l;if((i==null?void 0:i.getAttribute("position").count)===0||((o=i==null?void 0:i.getIndex())==null?void 0:o.count)===0)return;let a;i&&(t.colliderType==="trimesh"?a=qi.ColliderDesc.trimesh(i.getAttribute("position").array,i.getIndex().array):a=qi.ColliderDesc.convexMesh(i.getAttribute("position").array,n?i.getIndex().array:void 0)),a.setFrictionCombineRule(qi.CoefficientCombineRule.Average).setRestitutionCombineRule(qi.CoefficientCombineRule.Average).setDensity(t.density).setFriction(t.friction).setRestitution(t.restitution);let s=this.sharedGameControlGlobals.rapierWorld.createCollider(a,e);this.sharedGameControlGlobals.colliderToEntity.set(s.handle,r),(l=this.sharedGameControlGlobals.entityToCollisionEvents[r.uuid])!=null&&l.some(c=>c.target==="scene")&&s.setActiveEvents(qi.ActiveEvents.COLLISION_EVENTS)}gatherChildrenGeom(e,t){return(i,r)=>{var o;if(r===0)return;let n;if(i instanceof hl)if(i.objectForSample){if(i.objectForSample.dataPatched.physics.fusedBody)return;n=i.object}else return i.object.dataPatched.physics.fusedBody===!0&&i.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(i instanceof Va)n=i.object;else if(n=i,(o=n.dataPatched.cloner)==null?void 0:o.hideBase)return!0;let a=n.dataPatched;if(a.physics.enabled==="visibility"?!a.visible:!a.physics.enabled)return!0;r===1?e.hasNonUniformScale?i.matrixWorld.multiplyMatrices(e.shearScale,i.hiddenMatrix):i.matrixWorld.copy(i.hiddenMatrix):i.matrixWorld.multiplyMatrices(i.parent.matrixWorld,i.hiddenMatrix),i.matrixWorld.multiply(i.matrix);let s=i.geometry;(s==null?void 0:s.getAttribute("position"))!==void 0&&t.push(ou(s,i.matrixWorld))}}activate(e){var h,f;if(this.isEnabled)return;this.isEnabled=!0,this.eventManager=e,this.usePhysics=this.page.data.globalPhysics.usePhysics;let t=this.page.playCamera,i=!1,r=5,n=8,a=9,s="drag",o=this.page.data.publish.gameControlObject,l=o!==null?this.page.find(o):null,c=null;if(l)for(let p of l.data.events){if(p.data.disabled||p.data.type!=="GameControl")continue;let m=l;for(;this.usePhysics&&((h=m=m.parent)==null?void 0:h.parent)!==null;)(f=m.data.physics)==null||f.fusedBody;p.data.collisionEnabled&&(this.needsCollisionDetection=!0),c===null&&(c=p.data)}if(this.page.traverseEntity(p=>{for(let m of p.dataPatched.events)if(m.data.disabled===!1&&m.data.type==="Trigger")return this.needsCollisionDetection=!0,!0}),l&&c&&(l.data.visible===!0||l.data.physics.enabled===!0)){i=i||c.camera===t.uuid||l.uuid===t.uuid;let p=new DZ(l,this.renderer.domElement,c,this.eventContext.page.data.globalPhysics,this,l.uuid!==t.uuid&&c.camera===t.uuid,t,this.page,this.sharedAssets);this.gameControl=p,r=c.joystickPosLoc,n=c.joystickRotLoc,a=c.jumpTouchButtonLoc,s=c.rotByTouch,qs&&c.touchControl&&(this.joystickToGameControls[r]="pos",c.moveMode==="walk"&&(this.joystickToGameControls[a]="jmp"),s==="joystick"&&(this.joystickToGameControls[n]="rot"))}if(this.gameControl&&this.gameControl.data.navmesh.enabled){let p=this.gameControl.data;if(!this.navigationMeshWrapper){this.navigationMeshWrapper=new CDe(this.usePhysics,this.isExport);let m;p.collider.type==="sphere"?m=p.collider.radius*2:m=p.collider.height,m=Math.floor(m/p.navmesh.ch-1),this.navigationMeshWrapper.init({...p.navmesh,walkableHeight:m},this.gameControl,this.eventContext)}}if(i===!1){let{enableRotate:p,enablePan:m,enableZoom:v,autoRotate:y,hoverRotatePanMode:x}=this.eventManager.publish.orbitControls;(p||m||v||y||x!==0)&&(this.orbitControls=new FZ(t,this.renderer.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",this.requestRender),this.orbitControls.addEventListener("end",this.requestRender),this.orbitControls.addEventListener("start",this.requestRender),this.orbitControls.fromJSON(this.eventManager.publish.orbitControls,this.eventManager.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}let u=this.renderer.domElement.width/this.renderer.getPixelRatio(),d=this.renderer.domElement.height/this.renderer.getPixelRatio();this.joystickToGameControls.forEach((p,m)=>{let v=document.body.appendChild(document.createElement("div")),[y,x,b]=this.eventManager.eventContext.publish.joystickSizeAndXYOffset[m],w=(u-5*y)/4+y,S={},_=p==="jmp",E=_?0:y;m<10?(m<5?S.top=E/2:S.bottom=E/2,S.left=E/2+m%5*w):m===10?(S.left=E/2,S.top=d/2):(S.right=E/2,S.top=d/2),S.top?S.top-=x[1]:S.bottom+=x[1],S.left?S.left+=x[0]:S.right-=x[0];for(let M in S)S[M]+="px";if(_){let M=v.appendChild(document.createElement("div"));Object.assign(M.style,S,{position:"absolute",width:y+"px",height:y+"px",backgroundColor:`rgba(255,255,255,${b==="show"?.4:0})`,zIndex:"9999",borderRadius:y+"px",border:b==="show"?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let T=y/16*16*.4;b==="show"&&(M.innerHTML=`
						<svg width="${T}" height="${y*.4}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					`),M.addEventListener("pointerdown",()=>{this.gameControl.movementState.jump=1,this.requestRender()}),M.addEventListener("touchend",P=>P.preventDefault()),this.joysticks[m]=[void 0,v];return}let C={zone:v,mode:"static",position:S,size:y};b==="hide"&&(C.restOpacity=0);let A=ZTe.create(C);A.on("move",(M,T)=>{let P=this.gameControl;p==="pos"?T.force<.2?P.moveForce=0:(P.movementState.movePosZ=Math.sin(-T.angle.radian),P.movementState.movePosX=Math.cos(-T.angle.radian),T.force>1.2?P.movementState.run=1:P.movementState.run=0,T.force<.3?P.moveForce=(T.force-.2)/.1:P.moveForce=1):p==="rot"&&(T.force<.2?P.rotForce=0:(P.movementState.rotPosX=T.vector.y,P.movementState.rotPosY=-T.vector.x,T.force<.3?P.rotForce=(T.force-.2)/.1:P.rotForce=1)),this.requestRender()}),A.on("end",(M,T)=>{let P=this.gameControl;p==="pos"?(P.movementState.movePosZ=0,P.movementState.movePosX=0,P.moveForce=1):p==="rot"&&(P.movementState.rotPosX=0,P.movementState.rotPosY=0,P.rotForce=1)}),this.joysticks[m]=[A,v]}),this.markIsDestroyTarget(),this.markIsDragObject(),this.rebuildBVH(),this.initializationCounter++,window.setTimeout(()=>{this.collisionEvents.forEach(p=>p.initialDisabled=!1)},80)}initPhysics(){var s;(s=this.sharedGameControlGlobals.rapierWorld)==null||s.free(),this.sharedGameControlGlobals.rapierWorld=new qi.World(new qi.Vector3(0,this.gravity,0)),this.events=new qi.EventQueue(!0);let e=[],t=[];if(this.page.traverseChildren(o=>{var y,x,b,w;let l;if(o instanceof hl)if(o.objectForSample){if(o.objectForSample.dataPatched.physics.fusedBody)return;l=o.object}else return o.object.dataPatched.physics.fusedBody===!0&&o.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(o instanceof Va)l=o.object;else{if(o instanceof i2||o instanceof e2)return;if(l=o,((y=l.dataPatched.cloner)==null?void 0:y.disabled)===!1&&((x=l.dataPatched.cloner)==null?void 0:x.hideBase)&&((b=l.dataPatched.physics)==null?void 0:b.fusedBody)!==!0)return!0}let c=l.dataPatched,u;for(let S of c.events)S.data.disabled!==!0&&S.data.type==="GameControl"&&(u=S.data);if(!c.physics||(c.physics.enabled==="visibility"?!c.visible:!c.physics.enabled))return!0;o.updateMatrixWorldSVD();let d=Qx(c),h=!1,f=l.userData.hasDestroy,p=l.userData.hasDrag,m=!1;for(let S of c.events)if(S.data.disabled!==!0){if(S.data.type==="Collision"){h=!0;let _=new fDe(S.id,S.data,l,this.page,this.sharedAssets,this.eventManager);_.initialDisabled=!0,this.collisionEvents.push(_),this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid]&&this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid].every(E=>E.id!==S.id)?this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid].push(_):this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid]=[_]}else if(S.data.type==="Follow"){m=!0;let _=S.data.target;o.traverseVisible(E=>{E.userData.isFollowingObj=_})}}c.physics.rigidBody==="dynamic"&&c.physics.fusedBody===!1&&(o.matrixWorldFusedFalse=o.matrixWorld.clone());let v=o.geometry;if(u!==void 0){let S=qi.RigidBodyDesc.kinematicPositionBased();(o.hasNonUniformScale?o.matrixWorldRigid:o.matrixWorld).decompose(_n,tl,md),o.position0=_n.clone().divideScalar(this.pixelsPerMeter),o.rotation0=tl.clone(),_n.divideScalar(this.pixelsPerMeter),S.setTranslation(_n.x,_n.y,_n.z).setRotation(tl);let _=this.sharedGameControlGlobals.rapierWorld.createRigidBody(S);o.rigidBody=_;let E;u.collider.type==="sphere"?E=qi.ColliderDesc.ball(u.collider.radius/this.pixelsPerMeter):u.collider.type==="capsule"?E=qi.ColliderDesc.capsule((u.collider.height/2-u.collider.radius)/this.pixelsPerMeter,u.collider.radius/this.pixelsPerMeter):E=qi.ColliderDesc.cuboid(u.collider.width/this.pixelsPerMeter/2,u.collider.height/this.pixelsPerMeter/2,u.collider.depth/this.pixelsPerMeter/2),E.setFrictionCombineRule(qi.CoefficientCombineRule.Average).setRestitutionCombineRule(qi.CoefficientCombineRule.Average).setDensity(c.physics.density).setFriction(c.physics.friction).setRestitution(c.physics.restitution);let C=this.sharedGameControlGlobals.rapierWorld.createCollider(E,_);this.sharedGameControlGlobals.colliderToEntity.set(C.handle,l),_n.fromArray(u.collider.position).multiply(md.setFromMatrixScale(l.matrixWorld)).divideScalar(this.pixelsPerMeter),C.setTranslationWrtParent(_n);let A=new mi().setFromEuler(new Vn().setFromVector3(new H().fromArray(u.collider.rotation)));C.setRotationWrtParent(A),C.setActiveEvents(qi.ActiveEvents.COLLISION_EVENTS),this.generateSensorColliderDescs(l,!0)}else c.physics.rigidBody==="dynamic"||d||m||f||p||h?(this.addRigidBody(o,l,{hasFollow:m,hasTransformAnim:d,hasDrag:p}),this.generateSensorColliderDescs(l,c.physics.fusedBody)):(v&&e.push(ou(v,o.matrixWorld)),c.physics.fusedBody&&o.traverseObject((S,_)=>{var M;if(_===0)return;let E;if(S instanceof hl)if(S.objectForSample){if(S.objectForSample.dataPatched.physics.fusedBody)return;E=S.object}else return S.object.dataPatched.physics.fusedBody===!0&&S.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else{if(S instanceof i2||S instanceof e2)return;if(S instanceof Va)E=S.object;else if(E=S,(M=E.dataPatched.cloner)==null?void 0:M.hideBase)return!0}let C=E.dataPatched;if(C.physics.enabled==="visibility"?!C.visible:!C.physics.enabled)return!0;let A=S.geometry;(A==null?void 0:A.getAttribute("position"))!==void 0&&e.push(ou(A,S.matrixWorld))}),this.generateSensorColliderDescs(l,c.physics.fusedBody,t));if(((w=c.physics)==null?void 0:w.fusedBody)===!0||u)return!0}),e.length===0)return;let i=bf(e);i.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let r=qi.RigidBodyDesc.fixed(),n=this.sharedGameControlGlobals.rapierWorld.createRigidBody(r),a=qi.ColliderDesc.trimesh(i.getAttribute("position").array,i.getIndex().array).setFrictionCombineRule(qi.CoefficientCombineRule.Multiply).setRestitutionCombineRule(qi.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(a,n);for(let[o,l]of t){let c=this.sharedGameControlGlobals.rapierWorld.createCollider(o,n);this.sensorToTriggerEvent[c.handle]=l}}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}rebuildBVH(){this.usePhysics?this.initPhysics():(this.page.traverseEntity(e=>{for(let t of e.dataPatched.events)if(t.data.type==="Trigger"&&t.data.disabled!==!0){let i=new I9(t.id,t.data,e,this.page,this.sharedAssets,this.eventManager),r=new pt().compose(il.fromArray(t.data.position),Kp.setFromEuler(O9.fromArray(t.data.rotation)),R4);if(t.data.triggerZone==="box"){let n=new gn;n.min.fromArray(t.data.size).multiplyScalar(-.5),n.max.fromArray(t.data.size).multiplyScalar(.5),this.sharedGameControlGlobals.triggers.push([n,r,e,i])}else this.sharedGameControlGlobals.triggers.push([t.data.radius,r,e,i])}}),this.needsCollisionDetection&&this.initBVH())}disconnectEvents(){this.collisionEvents.forEach(e=>e.disconnect()),this.sharedGameControlGlobals.triggers.forEach(e=>e[3].disconnect()),this.sharedGameControlGlobals.triggers.length=0}deactivate(){var e,t,i,r;if(this.isEnabled){this.isEnabled=!1,this.page.traverse(n=>{let a=n;a.matrixWorldFusedFalse&&(a.matrixWorldFusedFalse=void 0),a.rigidBody&&(a.rigidBody=void 0),a.position0&&(a.position0=void 0),a.rotation0&&(a.rotation0=void 0)}),(e=this.sharedGameControlGlobals.rapierWorld)==null||e.free(),this.sharedGameControlGlobals.rapierWorld=void 0,this.sharedGameControlGlobals.staticMeshBVH=void 0,this.accumulator=0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.disconnectEvents(),(t=this.gameControl)==null||t.reset(),(i=this.gameControl)==null||i.dispose(),this.gameControl=null,this.initializationCounter=-1,this.joysticks.forEach(([n,a])=>{n==null||n.destroy(),a.remove()}),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0),(r=this.navigationMeshWrapper)==null||r.dispose(),this.navigationMeshWrapper=void 0;for(let n of Object.values(this.sharedGameControlGlobals.entityToCollisionEvents))n.forEach(a=>a.disconnect());this.sharedGameControlGlobals.entityToCollisionEvents={},this.page.updateMatrixWorld(!0)}}update(e,t,i){if(!this.isEnabled)return!0;let r=!0;if(this.orbitControls!==void 0&&this.orbitControls.needsUpdate&&(r=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2?(this.initializationCounter++,r=!1):this.initializationCounter===2&&this.gameControl&&(r=!this.gameControl.update(e,t,i)&&r),this.usePhysics===!1&&this.checkTrigger(),this.usePhysics){let n=.016666666666666666;if(e===0)r=this.stepPhysics()&&r;else{let a=e/1e3;a<n&&a>n*.55&&(a=n),this.accumulator+=a;let s=performance.now(),o=0,l=6;for(;this.accumulator>=n&&o<l&&(r=this.stepPhysics()&&r,this.accumulator-=n,o++,!(performance.now()-s>n*1e3)););this.accumulator=this.accumulator%n}}return r}stepPhysics(){var e;for(let t of this.sharedGameControlGlobals.entitiesWithTransformAnim){(t.hasNonUniformScale?t.matrixWorldRigid:t.matrixWorld).decompose(_n,tl,md),I4.setFromQuaternion(tl);let i=t;i.prevR===void 0?(i.prevR=I4.clone(),i.prevT=_n.clone()):(i.prevR.copy(I4),i.prevT.copy(_n)),t.rigidBody&&(t.rigidBody.setNextKinematicTranslation(_n.divideScalar(this.pixelsPerMeter)),t.rigidBody.setNextKinematicRotation(tl))}return this.sharedGameControlGlobals.rapierWorld.step(this.events),(e=this.events)==null||e.drainCollisionEvents(this.handleCollisionEvents),!this.updatePositions()}dispatchCollisionEvent(e,t,i){var a;let r=((a=this.sharedGameControlGlobals.rapierWorld)==null?void 0:a.getCollider(i))._parent,n;if(t.cloner){for(let s of t.cloner.children)if(s.rigidBody===r){n=s;break}}e.dispatch(n),t.dispatchEvent(eT)}updateUseWindowEvents(e){var t;(t=this.orbitControls)==null||t.updateUseWindowEvents(e)}generateSensorColliderDescs(e,t,i){let r=R9.copy(e.matrixWorld).invert();e.traverseEntity((n,a)=>{if(t===!1&&a===1)return!0;for(let s of n.dataPatched.events)if(s.data.type==="Trigger"&&s.data.disabled!==!0){let o=new I9(s.id,s.data,n,this.page,this.sharedAssets,this.eventManager),l;if(s.data.triggerZone==="box"?l=qi.ColliderDesc.cuboid(...s.data.size.map(c=>c/(2*this.pixelsPerMeter))):l=qi.ColliderDesc.ball(s.data.radius/this.pixelsPerMeter),l.setDensity(0).setSensor(!0).setActiveEvents(qi.ActiveEvents.COLLISION_EVENTS),il.fromArray(s.data.position),Kp.setFromEuler(O9.fromArray(s.data.rotation)),ww.compose(il,Kp,R4).premultiply(n.matrixWorld),i?(ww.decompose(il,Kp,O4),l.setActiveCollisionTypes(qi.ActiveCollisionTypes.KINEMATIC_FIXED|qi.ActiveCollisionTypes.DYNAMIC_FIXED)):(ww.premultiply(r).decompose(il,Kp,O4),e.rigidBody.bodyType()===qi.RigidBodyType.Dynamic||(e.rigidBody.bodyType()===qi.RigidBodyType.Fixed?l.setActiveCollisionTypes(qi.ActiveCollisionTypes.KINEMATIC_FIXED|qi.ActiveCollisionTypes.DYNAMIC_FIXED):l.setActiveCollisionTypes(qi.ActiveCollisionTypes.KINEMATIC_KINEMATIC|qi.ActiveCollisionTypes.DYNAMIC_KINEMATIC))),il.divideScalar(this.pixelsPerMeter),l.setTranslation(il.x,il.y,il.z),l.setRotation(Kp),i)i.push([l,o]);else{let c=this.sharedGameControlGlobals.rapierWorld.createCollider(l,e.rigidBody);this.sensorToTriggerEvent[c.handle]=o}}})}checkTrigger(){let e;for(let t=0;t<this.sharedGameControlGlobals.triggers.length;t++){let[i,r,n,a]=this.sharedGameControlGlobals.triggers[t];for(let s=0;s<this.sharedGameControlGlobals.entitiesWithTransformAnim.length;s++){let o=this.sharedGameControlGlobals.entitiesWithTransformAnim[s];if(n===o||a.isValidTriggeringObject(ji.is(o)?o:o.object)===!1)continue;let l=R9.copy(n.matrixWorld).decompose(il,k9,O4).compose(il,k9,R4).multiply(r),c=ww.copy(o.matrixWorld).invert().multiply(l);i instanceof gn?e=o.bvhGeometry.boundsTree.intersectsBox(i,c):(k4.radius=i,k4.center.setFromMatrixPosition(c),e=o.bvhGeometry.boundsTree.intersectsSphere(k4)),e?a.currentIntersectedObjects.indexOf(o)===-1&&(a.currentIntersectedObjects.push(o),a.dispatch(),n.dispatchEvent(LDe)):a.currentIntersectedObjects=a.currentIntersectedObjects.filter(u=>u!==o)}}}};function FDe(e){let t=this._clip.duration,i=this._clip.start??0,r=this.loop,n=this.time+e,a=this._loopCount,s=r===X5;if(e===0)return a===-1?n:s&&(a&1)===1?t-(n-i):n;if(r===GH){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n>=t)n=t;else if(n<0)n=0;else{this.time=n;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),n>=t||n<i){let o=Math.floor((n-i)/(t-i));n-=(t-i)*o,a+=Math.abs(o);let l=this.repetitions-a;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s||(n=e>0?t:i,this.repetitions===1&&(n=t)),this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){let c=e<0;this._setEndings(c,!c,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=n;if(s&&(a&1)===1)return t-(n-i)}return n}var L9=!1,zDe=class{constructor(e,t,i,r){this.scene=e,this.requestRender=t,this.updateDisplayProgress=i,this.animationInspectorState=r,this.clipIdToAction={},this.activeClip=null,this.needsUpdate=!1,this.addClip=n=>{n.data.type==="Empty"&&n.data.animations&&n.data.animations.forEach((a,s)=>{let o=a[0]+"/";if(Array.isArray(n.identity)?o+=n.identity[0]:o+=n.uuid,this.clipIdToAction[o])return;let l=dA.parse(JSON.parse(a[2]));n.animations[s]=l;let c=this.mixer.clipAction(l,n);L9===!1&&(Object.getPrototypeOf(c)._updateTime=FDe,L9=!0),c.clampWhenFinished=!0,this.clipIdToAction[o]=c})},this.mixer=new Tpe(e),this.scene.traverseEntity(this.addClip)}deleteClip(e,t){let i=this.scene.find(t);if(!i)return;let r=i.animations.find(a=>a.uuid===e);if(!r)return;let n=this.clipIdToAction[e];!n||(n.stop(),this.mixer.uncacheClip(r),delete this.clipIdToAction[e],i.animations=i.animations.filter(a=>a.uuid!==e))}get isPlaying(){return Object.values(this.clipIdToAction).some(e=>e.isRunning())}playFromInspector(e){this.mixer.stopAllAction();let t=this.clipIdToAction[e];!t||(t.play(),this.activeClip=t.getClip(),this.requestRender())}onExitPlayMode(){Object.values(this.clipIdToAction).forEach(e=>{e.repetitions=1/0,e.loop=$H}),this.mixer.stopAllAction(),this.requestRender()}play(e){let t=e.clipId+"/"+e.object,i=this.clipIdToAction[t];if(i)return e&&(e.repeat>=0&&(i.repetitions=e.repeat+1),e.direction==="pingpong"&&e.repeat!==0&&(i.loop=X5)),i.play(),i.paused=!1,this.requestRender(),i}resumeFromInspector(e){let t=this.clipIdToAction[e];!t||(t.play(),t.paused=!1,this.requestRender())}pauseFromInspector(e){let t=this.clipIdToAction[e];!t||(t.paused=!0)}stop(){this.mixer.stopAllAction(),this.requestRender()}update(e){var t;if(this.needsUpdate)this.needsUpdate=!1;else if(this.isPlaying===!1||(t=this.animationInspectorState)!=null&&t.isScrubbing)return;this.mixer.update(e/1e3),this.activeClip&&this.updateDisplayProgress(Math.round(this.mixer.time/this.activeClip.duration*(this.maxFrames-1)%(this.maxFrames-1))),this.requestRender()}get maxFrames(){return xZ(this.activeClip??void 0)}setProgressFromInspector(e,t){if(!this.clipIdToAction[t])return;this.activeClip!==this.clipIdToAction[t].getClip()&&this.playFromInspector(t);let i=this.clipIdToAction[t].paused;this.clipIdToAction[t].paused=!1,this.mixer.setTime(Math.min(e/(this.maxFrames-1),.9999)*this.activeClip.duration),this.requestRender(),i&&(this.clipIdToAction[t].paused=!0)}},L4=new WeakMap,VDe=class extends ay{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){let n=new hA(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(e,a=>{this.decodeDracoFile(a,t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){let n={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};return this.decodeGeometry(e,n).then(t)}decodeGeometry(e,t){let i=JSON.stringify(t);if(L4.has(e)){let o=L4.get(e);if(o.key===i)return o.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r,n=this.workerNextTaskID++,a=e.byteLength,s=this._getWorker(n,a).then(o=>(r=o,new Promise((l,c)=>{r._callbacks[n]={resolve:l,reject:c},r.postMessage({type:"decode",id:n,taskConfig:t,buffer:e},[e])}))).then(o=>this._createGeometry(o.geometry));return s.catch(()=>!0).then(()=>{r&&n&&this._releaseTask(r,n)}),L4.set(e,{key:i,promise:s}),s}_createGeometry(e){let t=new Kt;e.index&&t.setIndex(new ui(e.index.array,1));for(let i=0;i<e.attributes.length;i++){let r=e.attributes[i],n=r.name,a=r.array,s=r.itemSize;t.setAttribute(n,new ui(a,s))}return t}_loadLibrary(e,t){let i=new hA(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,n)=>{i.load(e,r,void 0,n)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{let r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);let n=UDe.toString(),a=["/* draco decoder */",r,"","/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(n){let a=n.data;switch(a.type){case"decode":r._callbacks[a.id].resolve(a);break;case"error":r._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,n){return r._taskLoad>n._taskLoad?-1:1});let i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function UDe(){let e,t;onmessage=function(s){let o=s.data;switch(o.type){case"init":e=o.decoderConfig,t=new Promise(function(u){e.onModuleLoaded=function(d){u({draco:d})},DracoDecoderModule(e)});break;case"decode":let l=o.buffer,c=o.taskConfig;t.then(u=>{let d=u.draco,h=new d.Decoder,f=new d.DecoderBuffer;f.Init(new Int8Array(l),l.byteLength);try{let p=i(d,h,f,c),m=p.attributes.map(v=>v.array.buffer);p.index&&m.push(p.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:p},m)}catch(p){console.error(p),self.postMessage({type:"error",id:o.id,error:p.message})}finally{d.destroy(f),d.destroy(h)}});break}};function i(s,o,l,c){let u=c.attributeIDs,d=c.attributeTypes,h,f,p=o.GetEncodedGeometryType(l);if(p===s.TRIANGULAR_MESH)h=new s.Mesh,f=o.DecodeBufferToMesh(l,h);else if(p===s.POINT_CLOUD)h=new s.PointCloud,f=o.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());let m={index:null,attributes:[]};for(let v in u){let y=self[d[v]],x,b;if(c.useUniqueIDs)b=u[v],x=o.GetAttributeByUniqueId(h,b);else{if(b=o.GetAttributeId(h,s[u[v]]),b===-1)continue;x=o.GetAttribute(h,b)}m.attributes.push(n(s,o,h,v,y,x))}return p===s.TRIANGULAR_MESH&&(m.index=r(s,o,h)),s.destroy(h),m}function r(s,o,l){let c=l.num_faces()*3,u=c*4,d=s._malloc(u);o.GetTrianglesUInt32Array(l,u,d);let h=new Uint32Array(s.HEAPF32.buffer,d,c).slice();return s._free(d),{array:h,itemSize:1}}function n(s,o,l,c,u,d){let h=d.num_components(),f=l.num_points()*h,p=f*u.BYTES_PER_ELEMENT,m=a(s,u),v=s._malloc(p);o.GetAttributeDataArrayForAllPoints(l,d,m,p,v);let y=new u(s.HEAPF32.buffer,v,f).slice();return s._free(v),{name:c,array:y,itemSize:h}}function a(s,o){switch(o){case Float32Array:return s.DT_FLOAT32;case Int8Array:return s.DT_INT8;case Int16Array:return s.DT_INT16;case Int32Array:return s.DT_INT32;case Uint8Array:return s.DT_UINT8;case Uint16Array:return s.DT_UINT16;case Uint32Array:return s.DT_UINT32}}}var Hd;function HDe(){return Hd||(Hd=new VDe,Hd.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),Hd.decoderPending}async function jDe(e){if(Hd){let t={attributeIDs:Hd.defaultAttributeIDs,attributeTypes:Hd.defaultAttributeTypes,useUniqueIDs:!1},i;try{i=await Hd.decodeGeometry(new Int8Array(e).buffer,t)}catch(r){console.error(r)}if(i)return{index:i.index?{array:i.index.array}:void 0,attributes:Object.entries(i.attributes).map(([r,n])=>({name:r,itemSize:n.itemSize,array:n.array}))}}return null}async function WDe(e,t){let[i,r]=PW(MA.deserialize(new Uint8Array(e)));return eG(i),r.result().data}function GDe(e){let t=[];return e.scene.objects.traverse((i,r)=>{r.type==="Mesh"&&r.geometry.type==="NonParametricGeometry"&&r.geometry.data.draco!==void 0&&t.push(r)}),t}async function $De(e){for(let t of e){let i=await jDe(t.geometry.data.draco);if(i){let r=t.geometry.data;i.index&&(r.index={array:i.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let n={};i.attributes.forEach(({name:a,array:s,itemSize:o})=>{n[a]={array:s,itemSize:o,type:"Float32Array",normalized:!1}}),r.attributes=n,r.draco=void 0}}}var ZDe=class{constructor(){this._clickCount=0,this._lastTime=0,this._lastPosition=[0,0],this._delay=500,this._distance=2,this._onMouseDown=e=>{let t=[e.clientX,e.clientY],i=new Date().getTime();if(this._clickCount>0){let r=t[0]-this._lastPosition[0],n=t[1]-this._lastPosition[1];Math.sqrt(r*r+n*n)>this._distance&&(this._clickCount=0)}this._lastPosition=t,this._clickCount=i-this._lastTime>this._delay?1:this._clickCount+1,this._lastTime=i},this._onMouseUp=e=>{}}start(e,t=500,i=2){this._target&&this.stop(),this.reset(),this._delay=t,this._distance=i,this._target=e,this._target.addEventListener("pointerdown",this._onMouseDown,!1),this._target.addEventListener("pointerup",this._onMouseUp,!1)}stop(){this._target&&(this._target.removeEventListener("pointerdown",this._onMouseDown,!1),this._target.removeEventListener("pointerup",this._onMouseUp,!1),this._target=void 0)}get clickCount(){return this._clickCount}reset(){this._clickCount=0,this._lastTime=0,this._lastPosition=[0,0]}},qDe=class{constructor(e,t,i,r,n,a,s,o){this.eventId=e,this.id=t,this.data=i,this.dataEvent=r,this.object=n,this.stage=!1,this.actions=Dn(r,i.actions,a,s,o,n)}disconnect(){oa(this.actions)}dispatchIn(){this.actions.Audio.forEach(e=>e.dispatchBasic()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Video.forEach(e=>e.dispatchBasic()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.Link.forEach(e=>e.dispatch()),this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.actions.Transition.forEach(e=>e.toggle()),this.actions.Animation.forEach(e=>e.play()),this.actions.SwitchCamera.forEach(e=>e.play()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch())}dispatchOut(){this.actions.Transition.forEach(e=>{e.toggle()})}},YDe=class extends Za{constructor(e,t){super(e),this.eventManager=t,this.breakpoints=[],this.resize=(i,r)=>{this.breakpoints.forEach(n=>{let a=IA.deviceToSize(n.data.size),s=n.dataEvent.orientation==="horizontal"?i:r,o;switch(n.data.operator){case"<":o=s<a[0];break;case">":o=s>a[0];break;case"<>":o=s>a[0]&&s<a[1];break}n.stage!==o&&(n.stage=o,n.stage?n.dispatchIn():n.dispatchOut())})},this.onResizeObserver=new ResizeObserver(i=>{for(let r of i){let{width:n,height:a}=r.contentRect;this.resize(n,a)}})}connect(){let{page:e,sharedAssets:t,domElement:i}=this.eventContext;this.onResizeObserver.observe(i);let r=n=>{var a;if(!(!n.visible||!((a=n.data)!=null&&a.events.length)))for(let{data:s,id:o}of n.data.events)s.disabled||s.type==="Resize"&&s.breakpoints.forEach(({data:l,id:c})=>{try{let u=new qDe(o,c,l,s,n,e,t,this.eventManager);this.breakpoints.push(u)}catch{}})};e.traverseEntity(n=>{var a;(n instanceof Na||n instanceof ta)&&((a=n.frame)==null||a.traverse(s=>{r(s)})),r(n)})}disconnect(){this.onResizeObserver.disconnect(),this.breakpoints.forEach(e=>{e.disconnect()}),this.breakpoints=[]}},KDe=class extends Za{constructor(e,t){super(e),this.eventManager=t,this.userAPIs={},this.events=[],this.onSuccess=({userAPIId:i})=>{this.events.forEach(r=>{r.data.userAPIId===i&&r.dispatchSuccess()})},this.onError=({userAPIId:i})=>{this.events.forEach(r=>{r.data.userAPIId===i&&r.dispatchError()})},this.userAPIs=e.sharedAssets.getUserAPIs()}connect(){this.eventContext.page.traverseEntity(e=>{var t;(t=e.data)==null||t.events.filter(i=>i.data.type==="API"&&!i.data.disabled).forEach(i=>{this.events.push(new XDe(i.id,i.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),Object.entries(this.userAPIs).forEach(([e,t])=>{t.on("success",this.onSuccess),t.on("error",this.onError),t.autostart&&t.callUserAPI(this.eventContext.sharedAssets)})}disconnect(){Object.entries(this.userAPIs).forEach(([e,t])=>{t.off("success",this.onSuccess),t.off("error",this.onError)})}},XDe=class{constructor(e,t,i,r,n,a){this.id=e,this.data=t,this.object=i,this.successActions=Dn(t,t.successActions,r,n,a,i),this.errorActions=Dn(t,t.errorActions,r,n,a,i)}dispatchSuccess(){this.dispatchActions(this.successActions)}dispatchError(){this.dispatchActions(this.errorActions)}dispatchActions(e){e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}},QDe=class extends Za{constructor(e,t){super(e),this.eventManager=t,this.userWebhooks={},this.events=[],this.onMessage=({userWebhookId:i})=>{this.events.forEach(r=>{r.data.userWebhookId===i&&r.dispatch()})},this.userWebhooks=e.sharedAssets.getUserWebhooks()}connect(){this.eventContext.page.traverseEntity(e=>{var t;(t=e.data)==null||t.events.filter(i=>i.data.type==="WEBHOOK"&&!i.data.disabled).forEach(i=>{this.events.push(new JDe(i.id,i.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),Object.entries(this.userWebhooks).forEach(([e,t])=>{t.connect(),t.on("message",this.onMessage)})}disconnect(){Object.entries(this.userWebhooks).forEach(([e,t])=>{t.off("message",this.onMessage),t.disconnect()})}},JDe=class{constructor(e,t,i,r,n,a){this.id=e,this.data=t,this.object=i,this.actions=Dn(t,t.actions,r,n,a,i)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}};function eIe(){let e=document.createElement("textarea");return e.style.position="fixed",e.style.top="200px",e.style.left="400px",e.style.zIndex="-1",e.style.border="1px solid rgba(255,0,0,0.5)",e.style.width="10px",e.style.height="500px",e.style.color="white",e.style.opacity="0.5",e.style.background="transparent",e.style.display="none",e.style.margin="0px",e.style.padding="0px",e.style.boxSizing="content-box",e.style.pointerEvents="none",e}var tIe=new H(0,0,1),B9=new H,N9=new H,F9=new An,iIe=class{constructor(e,t,i,r,n){this.containerScene=e,this.raycaster=t,this.sharedAssets=i,this.requestRender=r,this.onExit=n,this.htmlInput=null,this.virtualInput=null,this.helper=new P$,this.doubleClickHandler=new ZDe,this.isDragging=!1,this.plane=new As,this.caretInterval=0,this.planeIntersection=new H,this.projected=new Pe,this._lastIndex=0,this._isFirstDragMove=!1,this.selectionOnDragStart=0,this.onTextMaterialChanged=()=>{var s;let a=(s=this.virtualInput)==null?void 0:s.data;if(this.virtualInput!==void 0&&a){let o=a.material,l=typeof o=="string"?this.sharedAssets.data.materials[o]:o,c=vMe(l,this.sharedAssets);this.helper.setCaretColor(c)}},this.stopAnimateTextCursor=()=>{clearInterval(this.caretInterval),this.helper&&(this.helper.caretMesh.visible=!1)},this.startAnimateTextCursor=()=>{this.stopAnimateTextCursor(),this.helper&&(this.helper.caretMesh.visible=!0,this.caretInterval=setInterval(()=>{this.helper&&(this.helper.caretMesh.visible=!this.helper.caretMesh.visible),this.requestRender()},600))},this.handleCaretUpdate=a=>{if(!this.htmlInput||!this.virtualInput)return;let s=this.helper,o=(a==null?void 0:a.key)==="ArrowLeft"||(a==null?void 0:a.key)==="ArrowRight",l=(a==null?void 0:a.key)==="ArrowUp"||(a==null?void 0:a.key)==="ArrowDown";this.htmlInput.selectionStart===this.htmlInput.selectionEnd?(s.setCaretPosition(this.htmlInput.selectionStart,{horizontalKeyMove:o,verticalKeyMove:l}),this.startAnimateTextCursor()):s.setSelection(this.htmlInput.selectionStart,this.htmlInput.selectionEnd),this.requestRender()},this.containerScene.add(this.helper)}createInput(){return this.htmlInput=eIe(),this.htmlInput}connect(){}disconnect(){var e;this.stopAnimateTextCursor(),this.helper.hide(),(e=this.htmlInput)==null||e.remove(),this.doubleClickHandler.stop()}handleMouseDown(){var a,s;if(!this.htmlInput||!this.virtualInput)return!0;this.getPointOnPlane();let e=this.doubleClickHandler.clickCount,{index:t,lineIndex:i,characterIndex:r}=this.helper.getSelectionFromPosition(this.projected.x,this.projected.y,e>1?"inside":"previous")??{index:0,lineIndex:0,characterIndex:0};(s=(a=this.virtualInput)==null?void 0:a.wrappedText)!=null&&s.length&&this.virtualInput.wrappedText[i][Math.max(0,r-1)]===`
`&&(t--,r--),this._lastIndex=t,this._isFirstDragMove=!0;let n=this.checkClickedObject();if(e===1){if(n===null)return this.onExit(this.virtualInput),!0;this.selectionOnDragStart=t,this.isDragging=!0,this.setInputSelection(t)}else n===this.virtualInput&&(e===2?this.selectClosestWord(i,r):e>2&&(this.setInputSelection(0,this.htmlInput.value.length),this.doubleClickHandler.reset()))}handleMouseUp(){this.applyRangeToTextInput(),this.isDragging=!1,this._isFirstDragMove=!1}handleMouseMove(){!this.virtualInput||(this._isFirstDragMove&&this.doubleClickHandler.clickCount>1&&(this.selectionOnDragStart=this._lastIndex,this.isDragging=!0,this.setInputSelection(this._lastIndex)),this._isFirstDragMove=!1,this.getPointOnPlane(),this.applyRangeToTextInput())}focus(e){var t;if(this.virtualInput=e,this.updateTextInputStyles(),this.htmlInput)if(e){let i=(t=this.data)==null?void 0:t.geometry.text;this.htmlInput.value=typeof i=="string"?"":(i==null?void 0:i.textValue.toString())??""}else this.htmlInput.value=""}blur(){}get data(){let{virtualInput:e}=this;if(e)return e.dataPatched}applyRangeToTextInput(){var n;if(!this.isDragging||!this.virtualInput||!this.htmlInput)return;let e=this.selectionOnDragStart,{index:t,lineIndex:i,characterIndex:r}=this.helper.getSelectionFromPosition(this.projected.x,this.projected.y,this.doubleClickHandler.clickCount>2?"inside":"previous")??{index:0};i!==void 0&&r!==void 0&&((n=this.virtualInput)==null?void 0:n.wrappedText[i][r-1])===`
`&&t--,this.htmlInput.setSelectionRange(Math.min(e,t),Math.max(e,t))}checkClickedObject(){if(this.virtualInput){let e=this.raycaster.intersectObject(this.virtualInput,!1);if(e.length>0){let t=e[0];if(t.object instanceof vD)return t.object}}return null}selectClosestWord(e,t){if(!this.virtualInput)return;let i=this.virtualInput.wrappedText,r=i[e],n=t+1,a=t;r[t]!==" "&&(n=this.findNextCharOccurence(r,t,"forward"," "),a=this.findNextCharOccurence(r,t,"backward"," "),a>0&&a++,n>=r.length-1&&e===i.length-1&&n++);let s=this.helper,o=s.getGlobalIndexFromLineAndCharIndexes(i,e,a),l=s.getGlobalIndexFromLineAndCharIndexes(i,e,n);this.setInputSelection(o,l)}findNextCharOccurence(e,t,i,r=" "){let n=Math.max(0,e.length-1),a=i==="forward"?n:0,s=i==="forward"?1:-1,o=Math.max(Math.min(t,n),0);for(;o!==a;)if(o+=s,e.charAt(o)===r)return o;return a}getPointOnPlane(){var t;let e=(t=this.virtualInput)==null?void 0:t.data;if(!(!this.virtualInput||!e)&&this.raycaster.ray.intersectsPlane(this.plane)){this.planeIntersection===null&&(this.planeIntersection=new H);let i=this.raycaster.ray.intersectPlane(this.plane,this.planeIntersection);if(i){this.planeIntersection.copy(this.virtualInput.worldToLocal(i));let r=typeof e.geometry.width=="number"?e.geometry.width:1,n=typeof e.geometry.height=="number"?e.geometry.height:1;this.projected.set(i.x+r*.5,i.y-n*.5)}}}updatePlane(){var t;let e=(t=this.virtualInput)==null?void 0:t.data;this.virtualInput&&e&&(F9.getNormalMatrix(this.virtualInput.matrixWorld),B9.copy(tIe).applyMatrix3(F9).normalize(),this.virtualInput.localToWorld(N9.set(0,0,e.geometry.depth)),this.plane.setFromNormalAndCoplanarPoint(B9,N9))}setInputSelection(e,t=e){var i;(i=this.htmlInput)==null||i.setSelectionRange(e,t),setTimeout(()=>{var r;(r=this.htmlInput)==null||r.focus()})}updateTextInputStyles(){var t;let e=(t=this.virtualInput)==null?void 0:t.data;this.virtualInput&&e&&this.htmlInput&&(this.htmlInput.style.fontSize=e.geometry.fontSize+"px",this.htmlInput.style.letterSpacing=e.geometry.letterSpacing*e.geometry.fontSize+"px",this.htmlInput.style.lineHeight=e.geometry.fontSize*e.geometry.lineHeight+"px",this.htmlInput.style.width=e.geometry.width+"px",this.htmlInput.style.height=e.geometry.height+"px",this.htmlInput.style.textAlign=rIe(e.geometry.horizontalAlign))}};function rIe(e){return e===4?"justify":e===2?"right":e===3?"center":"left"}var zZ=(e,t)=>{if(typeof e=="string"){let i=t.data(e);if(i)return zZ(i.value,t)}return Sa.getDisplayedValue(e)};function z9(e,t){let i=e.text,r="";if(typeof i=="string"){let n=t.variables.data(r);n&&(r=zZ(n.value,t.variables))}else r=i.textValue.toString();return r}var nIe=class extends Za{constructor(e,t){super(e),this.eventManager=t,this._textInputs=[],this.sceneHelpers=new hc,this.helper=new P$,this._onMouseDownFocusIn=i=>{if(ai.length>1)return;this.eventContext.updateRaycaster(i);let r=null;if(this.eventContext.raycaster){for(let n of this._textInputs)if(this.eventContext.raycaster.intersectObject(n,!0).length>0){r=n;break}}this.focusOnTextInput(r),this._onCaretUpdate(),this._onMouseUp(),this.textInputManager.doubleClickHandler.start(this.eventContext.domElement),this.textInputManager.doubleClickHandler._onMouseDown(i),this._onMouseDown(i)},this.onExit=()=>{let{virtualInput:i}=this.textInputManager;if(i===null)return;let r=this.textInputManager.htmlInput;this.helper.hide(),r==null||r.setSelectionRange(r.value.length,r.value.length),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0);let{domElement:n}=this.eventContext;n.removeEventListener("pointerdown",this._onMouseDown,!1),n.removeEventListener("pointerup",this._onMouseUp,!1),n.removeEventListener("pointermove",this._onMouseMove,!1),window.removeEventListener("keydown",this._onKeyPress),this.textInputManager.doubleClickHandler.reset(),n.addEventListener("pointerdown",this._onMouseDownFocusIn),this.eventContext.renderer.sceneHelpersOnTop=void 0,this.eventContext.renderer.pipeline.disableHelpers()},this._onMouseDown=i=>{this.eventContext.updateRaycaster(i),this.textInputManager.handleMouseDown(),this.textInputManager.virtualInput&&this.eventContext.raycaster.intersectObject(this.textInputManager.virtualInput,!0).length>0&&this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1)},this._onMouseUp=()=>{this.textInputManager.handleMouseUp(),this.eventManager.controlsManager.orbitControls&&!this.eventManager.controlsManager.orbitControls.enabled&&(this.eventManager.controlsManager.orbitControls.enabled=!0)},this._onMouseMove=i=>{this.eventContext.updateRaycaster(i),this.textInputManager.handleMouseMove()},this._onTextEdit=i=>{let{htmlInput:r,virtualInput:n,helper:a}=this.textInputManager;if(!r||!n)return;let s=r.value;n.textGeometry.setText(s).then(()=>{this.eventContext.requestRender()});let o=n.data;a.update();let l=o.geometry.text;if(typeof l=="string"){let c=l;this.eventContext.sharedAssets.updateVariable(c,{textValue:s})}this.textInputManager.updateTextInputStyles(),this._onCaretUpdate()},this._onCaretUpdate=i=>{this.textInputManager.handleCaretUpdate(i)},this._onKeyPress=i=>{i.key==="Escape"&&this.onExit()},this.textInputManager=new iIe(this.sceneHelpers,e.raycaster,e.sharedAssets,e.requestRender,this.onExit)}connect(){let e=[];if(this.eventContext.scene.traverseEntity(r=>{r instanceof vD&&e.push(r)}),this._textInputs=e,e.length===0)return;let{domElement:t}=this.eventContext;t.addEventListener("pointerdown",this._onMouseDownFocusIn),this.textInputManager.connect();let i=this.textInputManager.createInput();document.body.appendChild(i),i.style.display="none",i.addEventListener("keyup",this._onCaretUpdate),i.addEventListener("keydown",this._onCaretUpdate),i.addEventListener("beforeinput",this._onCaretUpdate),i.addEventListener("paste",this._onCaretUpdate),i.addEventListener("cut",this._onCaretUpdate),i.addEventListener("select",this._onCaretUpdate),i.addEventListener("selectstart",this._onCaretUpdate)}disconnect(){let e=this.textInputManager.htmlInput,{domElement:t}=this.eventContext;t.removeEventListener("pointerdown",this._onMouseDownFocusIn),e==null||e.removeEventListener("keyup",this._onCaretUpdate),e==null||e.removeEventListener("keydown",this._onCaretUpdate),e==null||e.removeEventListener("beforeinput",this._onCaretUpdate),e==null||e.removeEventListener("paste",this._onCaretUpdate),e==null||e.removeEventListener("cut",this._onCaretUpdate),e==null||e.removeEventListener("select",this._onCaretUpdate),e==null||e.removeEventListener("selectstart",this._onCaretUpdate),this._textInputs.forEach(i=>{let r=z9(i.data.geometry,this.eventContext.sharedAssets.data);i.textGeometry.setText(r)}),t.removeEventListener("pointerdown",this._onMouseDown,!1),t.removeEventListener("pointerup",this._onMouseUp,!1),t.removeEventListener("pointermove",this._onMouseMove,!1),window.addEventListener("keydown",this._onKeyPress),this.eventContext.renderer.sceneHelpersOnTop=void 0,this.eventContext.renderer.pipeline.disableHelpers(),this.textInputManager.disconnect()}focusOnTextInput(e){this.textInputManager.focus(e),this.textInputManager.onTextMaterialChanged();let t=this.textInputManager.htmlInput;if(!t||e===null)return;this.textInputManager.updateTextInputStyles(),this.eventContext.renderer.sceneHelpersOnTop=this.sceneHelpers,this.eventContext.renderer.pipeline.enableHelpers(),this.textInputManager.isDragging=!1;let i=z9(e.textGeometry.userData.parameters,this.eventContext.sharedAssets.data);t.value=i,t.setSelectionRange(0,0),this.textInputManager.helper.show(e),t.style.display="block",t.addEventListener("input",this._onTextEdit),this.textInputManager.updatePlane();let{domElement:r}=this.eventContext;r.removeEventListener("pointerdown",this._onMouseDownFocusIn),r.addEventListener("pointerdown",this._onMouseDown,!1),r.addEventListener("pointerup",this._onMouseUp,!1),r.addEventListener("pointermove",this._onMouseMove,!1),window.addEventListener("keydown",this._onKeyPress)}},aIe=class extends Za{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.onVoice=({value:i,frequencies:r})=>{this.events.forEach(n=>{n.dispatch()})}}connect(){this.openAIRealtime=this.eventContext.sharedAssets.openAIRealtime,this.openAIRealtime&&(this.eventContext.page.traverseEntity(e=>{var t;(t=e.data)==null||t.events.filter(i=>i.data.type==="AIAssistantListener"&&!i.data.disabled).forEach(i=>{this.events.push(new sIe(i.id,i.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),this.openAIRealtime.on("voice",this.onVoice))}disconnect(){var e;(e=this.openAIRealtime)==null||e.off("voice",this.onVoice)}},sIe=class{constructor(e,t,i,r,n,a){this.id=e,this.data=t,this.object=i,this.actions=Dn(t,t.actions,r,n,a,i)}dispatch(){this.dispatchActions(this.actions)}dispatchActions(e){e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}},oIe=class extends Za{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.onTriggerEvent=({description:i,direction:r})=>{let n=this.events.find(a=>a.data.description===i);n&&(r==="backward"?n.dispatchReverse():n.dispatch())}}connect(){this.openAIRealtime=this.eventContext.sharedAssets.openAIRealtime,this.openAIRealtime&&(this.eventContext.page.traverseEntity(e=>{var t;(t=e.data)==null||t.events.filter(i=>i.data.type==="AIAssistantTrigger"&&!i.data.disabled).forEach(i=>{this.events.push(new lIe(i.id,i.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),this.openAIRealtime.on("trigger_event",this.onTriggerEvent))}disconnect(){var e;(e=this.openAIRealtime)==null||e.off("trigger_event",this.onTriggerEvent)}},lIe=class{constructor(e,t,i,r,n,a){this.id=e,this.data=t,this.object=i,this.actions=Dn(t,t.actions,r,n,a,i)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}dispatchReverse(){let e=this.actions;e.Transition.forEach(t=>t.reverseFromCurrent()),e.Particles.forEach(t=>t.reverseFromCurrent()),e.Animation.forEach(t=>t.reverseFromCurrent()),e.SwitchCamera.forEach(t=>t.reverseFromCurrent()),e.Create.forEach(t=>t.dispatchStop())}},cIe=class{constructor(e,t,i,r,n){this.publish=e,this.controlsManager=t,this.animationControls=i,this.eventContext=r,this.sharedVariables=n,this.isEnabled=!1,this.activateCount=0,this.needsMouse=!1,this.needsRaycast=!1,this.onTouchMovePreventScroll=a=>{let s=window.parent!==window,o=document.documentElement.scrollHeight>document.documentElement.clientHeight||document.documentElement.scrollWidth>document.documentElement.clientWidth;(a.touches.length>1||this.preventTouchScroll||s===!1&&o===!1)&&a.preventDefault()},this.onMouseWheelPreventScroll=a=>{this.preventScroll&&a.preventDefault()},this.onMouseMove=a=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(a),pressed:a.buttons>0}},this.onMouseDown=a=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(a),pressed:!0}},this.onMouseUp=a=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(a),pressed:!1}},this.getMousePosition=a=>{var c;let{domRect:s}=this.eventContext,{pageX:o,pageY:l}=((c=a.touches)==null?void 0:c.length)>0?a.touches[0]:a;return{x:o-(s.left+window.scrollX),y:l-(s.top+window.scrollY)}},this.stopRaycast=e.stopRaycast,this.preventScroll=e.preventScroll,this.preventTouchScroll=e.preventTouchScroll,this.hideCursor=e.hideCursor,this.requestRender=r.requestRender}activate(e=!1){var r,n;if(this.isEnabled)return;this.isEnabled=!0,this.initializeActionsDependentStates(),this.needsMouse&&(this.eventContext.domElement.addEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.addEventListener("pointerdown",this.onMouseDown)),this.handlers={Spline:new BPe(this.eventContext),VariableChange:new pDe(this.eventContext,this.sharedVariables,this,this.needsMouse,this.needsRaycast),API:new KDe(this.eventContext,this),WEBHOOK:new QDe(this.eventContext,this),AIAssistantListener:new aIe(this.eventContext,this),AIAssistantTrigger:new oIe(this.eventContext,this),Conditional:new jPe(this.eventContext,this),Start:new hDe(this.eventContext,this),Basic:new FPe(this.eventContext,this,this.needsRaycast),MouseHover:new oDe(this.eventContext,this),Scroll:new uDe(this.eventContext,this),Follow:new JPe(this.eventContext,this),DragDrop:new qPe(this.eventContext,this),LookAt:new nDe(this.eventContext),Resize:new YDe(this.eventContext,this),Textfields:new nIe(this.eventContext,this)};let{page:t,domElement:i}=this.eventContext;this.hideCursor&&(i.style.cursor="none"),t.traverseEntity(a=>{a.addEventListener("requestRender",this.requestRender)}),Object.values(this.handlers).forEach(a=>a.connect()),i.addEventListener("wheel",this.onMouseWheelPreventScroll),i.addEventListener("touchmove",this.onTouchMovePreventScroll),this.activateCount++,e||((r=this.eventContext.sharedAssets.openAIRealtime)==null||r.connect(),(n=this.eventContext.sharedAssets.openAIRealtime)==null||n.start())}deactivate(e=!1){var r;if(!this.isEnabled)return;this.isEnabled=!1,this.eventContext.domElement.removeEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.removeEventListener("pointerdown",this.onMouseDown),this.eventContext.domElement.removeEventListener("pointerup",this.onMouseUp),this.eventContext.sharedAssets.mouseProperty=null,this.eventContext.sharedAssets.raycastProperty=null;let{page:t,domElement:i}=this.eventContext;if(i.style.cursor="",Object.values(this.handlers).forEach(n=>n.disconnect()),(r=this.controlsManager.gameControl)==null||r.disposeActions(),this.controlsManager.disconnectEvents(),t.traverseEntity(n=>{n.removeEventListener("requestRender",this.requestRender),n.destroyedInAction=!1}),i.removeEventListener("touchmove",this.onTouchMovePreventScroll),i.removeEventListener("wheel",this.onMouseWheelPreventScroll),this.animationControls.onExitPlayMode(),!e){let n=this.eventContext.sharedAssets.openAIRealtime;n==null||n.disconnect(),n==null||n.stop().then(()=>{n==null||n.disconnect()})}}get isPaused(){return this.isEnabled}pause(){this.deactivate()}resume(){this.activate()}reset(){this.deactivate(!0),this.activate(!0),this.controlsManager.deactivate(),this.controlsManager.activate(this),this.controlsManager.page.updateMatrixWorld(!0),this.controlsManager.rebuildBVH()}updateUseWindowEvents(e){let t=this.isEnabled;t&&this.deactivate(),this.eventContext.useWindowEvents=e,t&&this.activate()}initializeActionsDependentStates(){let e=this.eventContext.sharedAssets;e.resetDynamicVariablePlayState();let t=i=>{if(i.data.type==="Conditional"&&(i.data.ifActions.forEach(t),i.data.elseActions.forEach(t)),i.data.type==="Conditional"||i.data.type==="SetVariable")for(let r of i.data.type==="Conditional"?i.data.condition:i.data.expression)"id"in r&&Array.isArray(r.id)&&(r.id[0]==="mouse"&&(this.needsMouse=!0),r.id[0]==="raycast"&&(this.needsRaycast=!0));i.data.type==="DynamicVariablePlay"&&i.data.variableId!==""&&(i.data.mode==="Play"||i.data.mode==="PlayPause"||i.data.mode==="Toggle")&&e.setDynamicVariablePlayState(i.data.variableId,"Stopped")};this.eventContext.page.traverseEntity(i=>{var r;if((r=i.data)!=null&&r.events.length)for(let n of i.data.events)if(n.data.type==="VariableChange"&&(n.data.variableId==="mouseProperty"&&(this.needsMouse=!0),n.data.variableId==="raycastProperty"&&(this.needsRaycast=!0)),n.data.type==="Conditional")for(let a of["inActions","outActions"])n.data[a].forEach(t);else if(n.data.type==="DragDrop")for(let a of["drag","drop"])n.data.dragDropActions[a].forEach(t);else if(n.data.type==="GameControl")for(let a of["idle","move","jump","run"])n.data.gameActions[a].forEach(t);else if(n.data.type==="Resize")for(let a of n.data.breakpoints)a.data.actions.forEach(t);else n.data.type==="LookAt"||n.data.type==="API"||n.data.actions.forEach(t)})}},uIe=class{constructor(e,t,i,r,n){this._aspect=1,this.enableResponsive=!1,this._renderer=e,this._camera=t,this._frameSize=new Pe().copy(i),this._editorSize=new Pe().copy(r),this._aspect=t.aspect,this._fov=n??t.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,t=this._frameSize.y,i=this._editorSize.y;this._aspect=e/t,t<=i&&(this._camera.zoom*=i/t),this._renderer.setViewport(0,0,e,t)}updateCamera(e=!0){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let t=this._frameSize.y,i=this._editorSize.y,r=this._fov;if(e&&t>i){let n=dIe(t,1080,2160,1,15)/100;r*=t/i,r*=1-n}this._camera.aspect=this._aspect,this._camera.fov=r,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y,this.enableResponsive)}setCamera(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}revert(){let e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t,this.enableResponsive),this._camera.updateProjectionMatrix())}};function dIe(e,t,i,r,n){return(e-t)/(i-t)*(n-r)+r}var hIe=class{get sharedAssets(){return this.shared}constructor(e,t={},i=!0){this.shared=new aD(e.shared,t,!0,i),this.scene=new bD(e.scene,this.sharedAssets),this.shared.setEntityOpContext({scene:this.scene,shared:this.shared})}reset(e,t){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}resetPersonalCameraFromDocumentData(){for(let e of this.scene.children)e instanceof ta&&!e.uiScene&&e.personalCamera.updateState(e.data.camera,{scene:this.scene,shared:this.shared})}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity(e=>{e instanceof Ua&&e.markGeometryAsReachable(this.shared)}),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}},fIe=class{constructor({x:e=10,y:t=10}){this._startTime=0;let i=document.getElementById("spe-perfs");i?this.element=i:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${e}px`,this.element.style.top=`${t}px`}dispose(){var e;(e=this.element.parentElement)==null||e.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}};function pIe(e){let t;if(e.index)for(let i=0;i<e.index.array.length;i+=3)t=e.index.array[i],e.index.array[i]=e.index.array[i+2],e.index.array[i+2]=t}function Vg(e){return e instanceof A1?"SubdivObject":e.geometry.type==="NonParametricGeometry"?"NonParametric":"Mesh"}function mIe(e,t){let i={};return e.traverseEntity(r=>{var l;if(!r.visible||!(r instanceof ms)||r.type!=="Mesh"||Array.isArray(r.material)||r.states&&Object.keys(r.states).length)return;let n=r.parent;for(;n;){if(n instanceof ms&&r.states&&Object.keys(r.states).length)return;n=n.parent}let a=r.material.uuid,s=t.shared.materials[a];if(s){if(!_a.isMergable(s))return}else{let c=(l=t.scene.objects.get(r.uuid))==null?void 0:l.data;if(c&&"material"in c&&typeof c.material!="string"){if(!_a.isMergable(c.material))return;a=_a.getHash(c.material)}}i[a]||(i[a]={});let o=i[a][Vg(r)];if(o){if(o.push(r),r.cloner)for(let c of r.cloner.children)o.push(c)}else if(i[a][Vg(r)]=[r],r.cloner)for(let c of r.cloner.children)i[a][Vg(r)].push(c)}),i}function vIe(e){let t=0;return Object.values(e).forEach(i=>{Object.values(i).forEach(r=>{let n=r.length;n>t&&(t=n)})}),t}function gIe(e,t){let i=mIe(t,e),r=vIe(i),n=new Array(r),a=0,s=new Array(r),o=0,l=new Array(r),c=0,u=new Array(r),d=0;for(let[h,f]of Object.entries(i))for(let p of Object.values(f)){if(o=0,c=0,p.forEach(v=>{v instanceof ms&&(s[o++]=v.geometry.clone(),l[c++]=v)}),c<2)continue;for(let v=0;v<c;v++)l[v].updateWorldMatrix(!0,!1),s[v].applyMatrix4(l[v].matrixWorld),l[v].matrixWorld.determinant()<0&&pIe(s[v]);let m=bf(s.slice(0,o),!1);if(m){let v;switch(h){case"SubdivObject":{console.warn("Turning subdiv object into mesh"),v=new Yr(m,l[0].material);break}default:{v=new Yr(m,l[0].material);break}}v.castShadow=l[0].castShadow,v.receiveShadow=l[0].receiveShadow,t.add(v);let y=x=>{d=0;for(let b of x)b.children&&y(b.children),b instanceof ms&&(Array.isArray(b.material)||i[b.material.uuid]&&i[b.material.uuid][Vg(b)]&&i[b.material.uuid][Vg(b)].length>1||(u[d++]=b));for(let b=0;b<d;b++)t.attach(u[b])};for(let x=0;x<c;x++){let b=l[x];y(b.children),n[a++]=b}}}for(let h=0;h<a;h++)n[h].removeFromParent()}var yIe=_h(hoe(),1),bIe=new Pe;function wIe(e){let t="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";e.endsWith(".spline")?console.warn(t+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(t)}var xIe=class{constructor(e,{renderOnDemand:t,renderMode:i="auto"}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._variablesCache=new Map,this._isPaused=!1,this._renderRequested=!1,this._skipRender=!1,this.time=performance.now(),this.dt=0,this.currentTAAFrame=0,this.disposed=!1,this._requestRenderAutoMode=()=>{this._skipRender=!1},this.requestRender=()=>{this._renderRequested=!0},this.render=r=>{var n,a,s,o,l,c,u,d,h,f,p,m,v;if(this.time=r,this._lastTime&&(this.dt=this.time-this._lastTime),this._lastTime=this.time,(n=this._perfs)==null||n.start(),!this._renderer){(a=this._perfs)==null||a.end();return}if(!this._isPaused&&(this.renderMode==="manual"&&!this._renderRequested||this.renderMode==="auto"&&this._skipRender)){(s=this._perfs)==null||s.end();return}if(this._renderRequested=!1,this._skipRender=!0,this._controls&&(this._skipRender=this._controls.update(this.dt)),this._eventManager&&((o=this._eventManager.handlers)!=null&&o.Start.hasVideoAction||(l=this._eventManager.handlers)!=null&&l.Basic.hasVideoAction||(c=this._eventManager.handlers)!=null&&c.Conditional.hasVideoAction)&&(this._skipRender=!1),(u=this._animationControls)==null||u.update(this.dt),this._skipRender?(this.currentTAAFrame++,this.currentTAAFrame<32?this._skipRender=!1:this.currentTAAFrame=0):this.currentTAAFrame=0,(d=this._scene)==null||d.traverseVisibleEntity(y=>{y.type==="ParticleSystem"&&(y.update(this.dt),this._skipRender=!1)}),this._scene&&this._scene.activeCamera!==this._camera&&(this._camera=this._scene.activeCamera),(h=this._eventManager)!=null&&h.isEnabled&&(((f=this._eventManager.handlers)==null?void 0:f.Follow).onAnimationFrameDamping(),((p=this._eventManager.handlers)==null?void 0:p.LookAt).onAnimationFrameDamping(),((m=this._eventManager.handlers)==null?void 0:m.DragDrop).onAnimationFrameDamping()),this._scene&&this._camera){if(this._scene.pathConstraints.applyConstraints(this._scene),this._renderer.sceneTransitionTimeRemaining>0){this._renderer.sceneTransitionTimeRemaining-=this.dt;let y=1-this._renderer.sceneTransitionTimeRemaining/this._renderer.sceneTransitionDuration;this._renderer.pipeline.sceneTransitionPass.uniforms.mixRatio.value=y,this._skipRender=!1}else this._renderer.pipeline.sceneTransitionFromTexture=null;this._renderer.renderSplineScene(this._scene,this._camera)}this.canvas.dispatchEvent(this._renderedEvent),(v=this._perfs)==null||v.end()},this._resize=r=>{var n,a,s,o,l,c,u,d,h,f;if(this._renderer){if(this._viewportMode===1&&this._frameView&&(this._frameView.frameSize=bIe.set(this._viewportWidth,this._viewportHeight)),r){let p=this._viewportWidth,m=this._viewportHeight;this._renderer.setSize(p-1,m-1,!1),this._renderer.setSize(p,m,!1)}else this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1);if(this._camera=(n=this._scene)==null?void 0:n.activeCamera,(u=this._scene)==null||u.updateViewPlaneSize(((s=(a=this._frameView)==null?void 0:a.frameSize)==null?void 0:s.x)??this._viewportWidth,((l=(o=this._frameView)==null?void 0:o.frameSize)==null?void 0:l.y)??this._viewportHeight,((c=this._frameView)==null?void 0:c.enableResponsive)??!1),this._camera){let p=Object.values(((d=this._data)==null?void 0:d.frames)??{})[0].preset??"fullscreen";(h=this._frameView)==null||h.setCamera(this._camera),(f=this._frameView)==null||f.updateCamera(p!=="fullscreen"),this._camera.cameraType==="PerspectiveCamera"&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()}this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect()),this._requestRenderAutoMode()}},this._debouncedResize=f1(this._resize,10),this._onScroll=r=>{this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect())},this.canvas=e,this.renderMode=t?"auto":i,this._renderedEvent=new CustomEvent("rendered",{bubbles:!0}),Object.defineProperty(this._renderedEvent,"target",{writable:!1,value:this}),window.location.search.includes("perfs")&&(this._perfs=new fIe({x:10,y:10})),f2e(e)}async load(e,t,i){wIe(e),this.disposed=!1;let r=await(await fetch(e,i)).arrayBuffer();await this.start(r,{variables:t})}async start(e,{interactive:t=!0,variables:i}={}){var l,c,u,d;if(this.disposed)return;let r=await WDe(e);this._data=r;let n=GDe(r);r.version&&(0,yIe.default)(r.version,"1.9.45")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/runtime to the latest version."),await Promise.all([n.length&&HDe(),cB(r)&&g3e(),I4e(r)&&f3e(),y1.physicsEnabled(r.scene.objects)&&y2e(),aB(r)&&QCe(),zB(r)&&LTe(),KCe(r)&&YCe(),DB(r)&&TMe(),ADe(r)&&v2e()].filter(Boolean)),n.length&&await $De(n),(l=this._eventManager)==null||l.deactivate(),(c=this._controls)==null||c.deactivate(),(u=this._scene)==null||u.dispose();let a=new hIe(r);if(a.resetPersonalCameraFromDocumentData(),this._scene=a.scene,this._sharedAssetsManager=a.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let h=performance.now();gIe(r,a.scene);let f=performance.now();console.log("Merged geometries in ",f-h," ms")}cB(r)&&this._scene.traverse(h=>{wu(h)&&h.recomputeBoolean()}),this._sharedAssetsManager.setRequestRender(()=>{var h;this._requestRenderAutoMode(),(h=this._scene)==null||h.traverse(f=>{f instanceof hl&&f.pendingMediaLoad&&f.update()})}),(d=this._scene)==null||d.traverse(h=>{h.type==="ParticleSystem"&&(h.wakeUp(),h.data.autoPlay?h.start():h.stop())});let s=Object.keys(r.shared.fonts).map(h=>this._sharedAssetsManager.getFont(h).loadingPromise);if(Promise.all(s).then(()=>{a.scene.markNeedsUpdateRendererDirty(),this._requestRenderAutoMode()}),aB(r)&&BDe(r)&&await Promise.all(s),DB(r)){let h=[];this._scene.traverseEntity(f=>{(f instanceof Na||f instanceof ta)&&f.uiCanvas&&h.push(f.uiCanvas)}),await Promise.all(h.map(f=>f.promise))}if(this._scene.rewriteEventsBeforeGoToPlayMode(),OD(this._scene.activePage,this._sharedAssetsManager),!this._renderer&&(this._renderer=new pMe({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.hdTransmission=r.scene.publish.hdTransmission===!0,this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.enableUIOverlay(),this._renderer.pipeline.addEventListener("smaaloaded",this._requestRenderAutoMode),r.shared.images.SplineWatermark)){let h=this._sharedAssetsManager.getImage("SplineWatermark");await h.loadPromise;let f=h.getTexture(1001);this._renderer.pipeline.setWatermark(f)}zB(r)&&this._scene.initializeSplatViewer(),r.scene.blueNoiseTextureData!==void 0&&this._renderer.pipeline.updateBlueNoiseTexture(r.scene.blueNoiseTextureData);let o=Object.values(r.frames)[0];if(this._frameView?this._frameView.setCamera(this._camera):(o.preset==="fullscreen"?(this._viewportMode=1,this.canvas.style.display="block",this.canvas.parentElement&&(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"),this.canvas.parentElement&&(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%")):(this._viewportMode=2,this._viewportWidth=o.size[0],this._viewportHeight=o.size[1],this.canvas.style.width=`${this._viewportWidth}px`,this.canvas.style.height=`${this._viewportHeight}px`),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new uIe(this._renderer,this._camera,new Pe(this._viewportWidth,this._viewportHeight),new Pe(window.innerWidth,window.innerHeight)),this._frameView.enableResponsive=(o.allowResponsive??!1)&&o.preset==="fullscreen"),t){let h=new kPe(this._renderer,this.data.scene.publish,this._scene,()=>this._scene.activeCamera,this._sharedAssetsManager,this._requestRenderAutoMode,!0,o);this._scene.updateMatrixWorld(!0),this._controls=new NDe(h),this._animationControls=new zDe(this._scene,this._requestRenderAutoMode),this._eventManager=new cIe(r.scene.publish,this._controls,this._animationControls,h,r.shared.variables),this._eventManager.activate(),this._controls.activate(this._eventManager)}this._resize(),this._scene.activePage.data.postprocessing.depthOfField.enabled&&Promise.all(this._sharedAssetsManager.getImageLoadPromises()).then(()=>{this._resize(!0)}),i!==void 0&&this.setVariables(i),this.dt===0&&(this.render(performance.now()),setTimeout(()=>{var h;(h=this._renderer)==null||h.setAnimationLoop(this.render)},0)),this._resizeObserverTimeout=setTimeout(()=>{!this._resizeObserver&&this.canvas.parentElement&&(this._resizeObserver=new ResizeObserver(()=>{this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._debouncedResize()}),this._resizeObserver.observe(this.canvas.parentElement))},300),document.addEventListener("scroll",this._onScroll)}setVariables(e){if(this._data!==void 0){let t=Object.entries(e);for(let[i,r]of t)this.setVariable(i,r)}}setVariable(e,t){var r;let i=this._getVariableByName(e);if(i&&!("dynamicVariableType"in i.data)){let n=t;typeof i.data.value=="number"?n=typeof t=="number"?t:typeof t=="boolean"?t===!0?1:0:parseFloat(t):typeof i.data.value=="boolean"?n=typeof t=="number"?!!t:typeof t=="boolean"?t:t.toLocaleLowerCase()==="false"?!1:!!t:typeof i.data.value!="string"&&i.data.value.textValue!==void 0&&(n=t.toString());let a=typeof n=="string"?{textValue:n}:n;(r=this._sharedAssetsManager)==null||r.updateVariable(i.id,a),this.requestRender(),this._requestRenderAutoMode()}else i===void 0?console.warn(`No variable named ${e} was found in your Spline file. Make sure to create it from Spline editor.`):"dynamicVariableType"in i.data&&console.warn(`Dynamic variables like ${e} cannot be updated from code.`)}getVariables(){let e={};return this._data&&this._data.shared.variables.forEach(t=>{e[t.data.name]===void 0&&(e[t.data.name]=this._getVariableValue(this._sharedAssetsManager.getVariable(t.id)))}),e}getVariable(e){let t=this._getVariableByName(e);if(t){let i=this._sharedAssetsManager.getVariable(t.id);return this._getVariableValue(i)}}_getVariableValue(e){return typeof e!="string"&&Sa.isTextValue(e)?Sa.getDisplayedValue(e):e}_getVariableByName(e){if(this._data){if(this._variablesCache.has(e))return this._variablesCache.get(e);let t=this._data.shared.variables.find(i=>i.data.name===e);return t&&this._variablesCache.set(e,t),t}}findObjectById(e){var i;let t=(i=this._scene)==null?void 0:i.getObjectByProperty("uuid",e);return this._createProxyObject(t)}findObjectByName(e){var i;let t=(i=this._scene)==null?void 0:i.getObjectByName(e);return this._createProxyObject(t)}getAllObjects(){var t;let e=[];return(t=this._scene)==null||t.traverseEntity(i=>{if(i.uuid!==Xv&&!this._scene.isInvisibleObjects(i)&&!(i instanceof ta)){let r=this._createProxyObject(i);r&&e.push(r)}}),e}getSplineEvents(){var e,t;return((t=(e=this._eventManager)==null?void 0:e.handlers)==null?void 0:t.Spline).splineEvents}emitEvent(e,t){var i;(i=this.findObjectById(t)||this.findObjectByName(t))==null||i.emitEvent(e)}emitEventReverse(e,t){var i;(i=this.findObjectById(t)||this.findObjectByName(t))==null||i.emitEventReverse(e)}addEventListener(e,t){this.canvas.addEventListener(e,t)}removeEventListener(e,t){this.canvas.removeEventListener(e,t)}setZoom(e){var t,i;((t=this._controls)==null?void 0:t.orbitControls)instanceof FZ&&((i=this._controls)==null||i.orbitControls.setZoom(e))}get eventManager(){return this._eventManager}get controls(){return this._controls}setSize(e,t){this._viewportWidth=e,this._viewportHeight=t,this._viewportMode=2,this._resize()}setBackgroundColor(e){var s;let{r:t,g:i,b:r,a:n}={r:0,g:0,b:0,a:1},a=new Ea(t,i,r,n);try{a.setStyle(e)}catch{console.error("This is not a valid css color",e)}(s=this._scene)==null||s.activePage.setBackgroundColor(a),this._requestRenderAutoMode()}dispose(){var e,t,i,r,n,a,s;this.disposed=!0,(e=this._eventManager)==null||e.deactivate(),(t=this._scene)==null||t.dispose(),(i=this._sharedAssetsManager)==null||i.dispose(),this._proxyObjectCache.forEach(o=>{u6.unsubscribe(o)}),this._variablesCache.clear(),(r=this._renderer)==null||r.setAnimationLoop(null),(n=this._renderer)==null||n.dispose(),this._renderer=void 0,(a=this._sharedAssetsManager)==null||a.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this._resizeObserverTimeout!==void 0&&clearTimeout(this._resizeObserverTimeout),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),(s=this._controls)==null||s.deactivate(),this.dt=0,p2e(this.canvas),document.removeEventListener("scroll",this._onScroll)}get isStopped(){return this._isPaused}stop(){var e,t,i;this._isPaused||((e=this._renderer)==null||e.setAnimationLoop(null),this._isPaused=!0,(t=this._eventManager)==null||t.pause(),(i=this._controls)!=null&&i.orbitControls&&(this._controls.orbitControls.enabled=!1))}play(){var e,t,i;!this._isPaused||(this._isPaused=!1,(e=this._eventManager)==null||e.resume(),(t=this._controls)!=null&&t.orbitControls&&(this._controls.orbitControls.enabled=!0),(i=this._renderer)==null||i.setAnimationLoop(this.render))}setGlobalEvents(e){var t;(t=this._eventManager)==null||t.updateUseWindowEvents(e)}get data(){return this._data}_createProxyObject(e){var n;if(e==null)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let t;e.traverseAncestors(a=>{a instanceof ta&&(t=a.name)});let i={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,type:e.data.type,page:t,parentUuid:e.parent instanceof ta||e instanceof bD||(n=e.parent)==null?void 0:n.uuid,emitEvent(a){e.dispatchEvent({type:"userEvent",eventName:a})},emitEventReverse(a){e.dispatchEvent({type:"userEvent",eventName:a,reverse:!0})}},r=u6(i,(a,s)=>{var o;typeof e[a]!="object"&&((o=Object.getOwnPropertyDescriptor(e,a))!=null&&o.writable)&&(e[a]=s),this._requestRenderAutoMode(),e.updateMatrix()});return this._proxyObjectCache.set(e.uuid,r),r}setUIWasmUrl(e){o$.skiaWasmUrl=e}};const _Ie=Wo(e=>{e.provide("spline",xIe)});const SIe='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',CIe=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,V9=e=>Array.from(e.querySelectorAll(SIe)).filter(t=>tT(t)&&CIe(t)),tT=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.tabIndex<0||e.hasAttribute("disabled")||e.getAttribute("aria-disabled")==="true")return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},l2=function(e,t,...i){let r;t.includes("mouse")||t.includes("click")?r="MouseEvents":t.includes("key")?r="KeyboardEvent":r="HTMLEvents";const n=document.createEvent(r);return n.initEvent(t,...i),e.dispatchEvent(n),e},VZ=e=>!e.getAttribute("aria-owns"),UZ=(e,t,i)=>{const{parentNode:r}=e;if(!r)return null;const n=r.querySelectorAll(i),a=Array.prototype.indexOf.call(n,e);return n[a+t]||null},c2=e=>{e&&(e.focus(),!VZ(e)&&e.click())},Br=(e,t,{checkForDefaultPrevented:i=!0}={})=>n=>{const a=e==null?void 0:e(n);if(i===!1||!a)return t==null?void 0:t(n)},U9=e=>t=>t.pointerType==="mouse"?e(t):void 0;var EIe=Object.defineProperty,AIe=Object.defineProperties,MIe=Object.getOwnPropertyDescriptors,H9=Object.getOwnPropertySymbols,TIe=Object.prototype.hasOwnProperty,PIe=Object.prototype.propertyIsEnumerable,j9=(e,t,i)=>t in e?EIe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,DIe=(e,t)=>{for(var i in t||(t={}))TIe.call(t,i)&&j9(e,i,t[i]);if(H9)for(var i of H9(t))PIe.call(t,i)&&j9(e,i,t[i]);return e},IIe=(e,t)=>AIe(e,MIe(t));function iT(e,t){var i;const r=Wi();return Ca(()=>{r.value=e()},IIe(DIe({},t),{flush:(i=void 0)!=null?i:"sync"})),K1(r)}var W9;const si=typeof window<"u",OIe=e=>typeof e<"u",RIe=e=>typeof e=="string",B4=()=>{},G9=si&&((W9=window==null?void 0:window.navigator)==null?void 0:W9.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Zf(e){return typeof e=="function"?e():g(e)}function HZ(e,t){function i(...r){e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})}return i}function kIe(e,t={}){let i,r;return a=>{const s=Zf(e),o=Zf(t.maxWait);if(i&&clearTimeout(i),s<=0||o!==void 0&&o<=0)return r&&(clearTimeout(r),r=null),a();o&&!r&&(r=setTimeout(()=>{i&&clearTimeout(i),r=null,a()},o)),i=setTimeout(()=>{r&&clearTimeout(r),r=null,a()},s)}}function LIe(e,t=!0,i=!0){let r=0,n,a=!0;const s=()=>{n&&(clearTimeout(n),n=void 0)};return l=>{const c=Zf(e),u=Date.now()-r;if(s(),c<=0)return r=Date.now(),l();u>c&&(i||!a)?(r=Date.now(),l()):t&&(n=setTimeout(()=>{r=Date.now(),a=!0,s(),l()},c)),!i&&!n&&(n=setTimeout(()=>a=!0,c)),a=!1}}function BIe(e){return e}function yy(e){return C5()?(yV(e),!0):!1}function NIe(e,t=200,i={}){return HZ(kIe(t,i),e)}function FIe(e,t=200,i={}){if(t<=0)return e;const r=j(e.value),n=NIe(()=>{r.value=e.value},t,i);return Ne(e,()=>n()),r}function jZ(e,t=200,i=!1,r=!0){return HZ(LIe(t,i,r),e)}function kD(e,t=!0){Ut()?Lt(e):t?e():ft(e)}function qf(e,t,i={}){const{immediate:r=!0}=i,n=j(!1);let a=null;function s(){a&&(clearTimeout(a),a=null)}function o(){n.value=!1,s()}function l(...c){s(),n.value=!0,a=setTimeout(()=>{n.value=!1,a=null,e(...c)},Zf(t))}return r&&(n.value=!0,si&&l()),yy(o),{isPending:n,start:l,stop:o}}function ds(e){var t;const i=Zf(e);return(t=i==null?void 0:i.$el)!=null?t:i}const Eh=si?window:void 0,zIe=si?window.document:void 0;function Oi(...e){let t,i,r,n;if(RIe(e[0])?([i,r,n]=e,t=Eh):[t,i,r,n]=e,!t)return B4;let a=B4;const s=Ne(()=>ds(t),l=>{a(),l&&(l.addEventListener(i,r,n),a=()=>{l.removeEventListener(i,r,n),a=B4})},{immediate:!0,flush:"post"}),o=()=>{s(),a()};return yy(o),o}function LD(e,t,i={}){const{window:r=Eh,ignore:n,capture:a=!0,detectIframe:s=!1}=i;if(!r)return;const o=j(!0);let l;const c=h=>{r.clearTimeout(l);const f=ds(e),p=h.composedPath();!f||f===h.target||p.includes(f)||!o.value||n&&n.length>0&&n.some(m=>{const v=ds(m);return v&&(h.target===v||p.includes(v))})||t(h)},u=[Oi(r,"click",c,{passive:!0,capture:a}),Oi(r,"pointerdown",h=>{const f=ds(e);o.value=!!f&&!h.composedPath().includes(f)},{passive:!0}),Oi(r,"pointerup",h=>{if(h.button===0){const f=h.composedPath();h.composedPath=()=>f,l=r.setTimeout(()=>c(h),50)}},{passive:!0}),s&&Oi(r,"blur",h=>{var f;const p=ds(e);((f=document.activeElement)==null?void 0:f.tagName)==="IFRAME"&&!(p!=null&&p.contains(document.activeElement))&&t(h)})].filter(Boolean);return()=>u.forEach(h=>h())}function VIe(e={}){const{window:t=Eh}=e,i=j(0);return t&&(Oi(t,"blur",()=>i.value+=1,!0),Oi(t,"focus",()=>i.value+=1,!0)),O(()=>(i.value,t==null?void 0:t.document.activeElement))}function WZ(e,t=!1){const i=j(),r=()=>i.value=!!e();return r(),kD(r,t),i}const $9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Z9="__vueuse_ssr_handlers__";$9[Z9]=$9[Z9]||{};function UIe(e,t,{window:i=Eh,initialValue:r=""}={}){const n=j(r),a=O(()=>{var s;return ds(t)||((s=i==null?void 0:i.document)==null?void 0:s.documentElement)});return Ne([a,()=>Zf(e)],([s,o])=>{var l;if(s&&i){const c=(l=i.getComputedStyle(s).getPropertyValue(o))==null?void 0:l.trim();n.value=c||r}},{immediate:!0}),Ne(n,s=>{var o;(o=a.value)!=null&&o.style&&a.value.style.setProperty(Zf(e),s)}),n}function HIe({document:e=zIe}={}){if(!e)return j("visible");const t=j(e.visibilityState);return Oi(e,"visibilitychange",()=>{t.value=e.visibilityState}),t}var q9=Object.getOwnPropertySymbols,jIe=Object.prototype.hasOwnProperty,WIe=Object.prototype.propertyIsEnumerable,GIe=(e,t)=>{var i={};for(var r in e)jIe.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&q9)for(var r of q9(e))t.indexOf(r)<0&&WIe.call(e,r)&&(i[r]=e[r]);return i};function gr(e,t,i={}){const r=i,{window:n=Eh}=r,a=GIe(r,["window"]);let s;const o=WZ(()=>n&&"ResizeObserver"in n),l=()=>{s&&(s.disconnect(),s=void 0)},c=Ne(()=>ds(e),d=>{l(),o.value&&n&&d&&(s=new ResizeObserver(t),s.observe(d,a))},{immediate:!0,flush:"post"}),u=()=>{l(),c()};return yy(u),{isSupported:o,stop:u}}function Y9(e,t={}){const{reset:i=!0,windowResize:r=!0,windowScroll:n=!0,immediate:a=!0}=t,s=j(0),o=j(0),l=j(0),c=j(0),u=j(0),d=j(0),h=j(0),f=j(0);function p(){const m=ds(e);if(!m){i&&(s.value=0,o.value=0,l.value=0,c.value=0,u.value=0,d.value=0,h.value=0,f.value=0);return}const v=m.getBoundingClientRect();s.value=v.height,o.value=v.bottom,l.value=v.left,c.value=v.right,u.value=v.top,d.value=v.width,h.value=v.x,f.value=v.y}return gr(e,p),Ne(()=>ds(e),m=>!m&&p()),n&&Oi("scroll",p,{passive:!0}),r&&Oi("resize",p,{passive:!0}),kD(()=>{a&&p()}),{height:s,bottom:o,left:l,right:c,top:u,width:d,x:h,y:f,update:p}}var K9=Object.getOwnPropertySymbols,$Ie=Object.prototype.hasOwnProperty,ZIe=Object.prototype.propertyIsEnumerable,qIe=(e,t)=>{var i={};for(var r in e)$Ie.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&K9)for(var r of K9(e))t.indexOf(r)<0&&ZIe.call(e,r)&&(i[r]=e[r]);return i};function GZ(e,t,i={}){const r=i,{window:n=Eh}=r,a=qIe(r,["window"]);let s;const o=WZ(()=>n&&"MutationObserver"in n),l=()=>{s&&(s.disconnect(),s=void 0)},c=Ne(()=>ds(e),d=>{l(),o.value&&n&&d&&(s=new MutationObserver(t),s.observe(d,a))},{immediate:!0}),u=()=>{l(),c()};return yy(u),{isSupported:o,stop:u}}var X9;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(X9||(X9={}));var YIe=Object.defineProperty,Q9=Object.getOwnPropertySymbols,KIe=Object.prototype.hasOwnProperty,XIe=Object.prototype.propertyIsEnumerable,J9=(e,t,i)=>t in e?YIe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,QIe=(e,t)=>{for(var i in t||(t={}))KIe.call(t,i)&&J9(e,i,t[i]);if(Q9)for(var i of Q9(t))XIe.call(t,i)&&J9(e,i,t[i]);return e};const JIe={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};QIe({linear:BIe},JIe);function $Z(e,t,i,r={}){var n,a,s;const{passive:o=!1,eventName:l,deep:c=!1,defaultValue:u}=r,d=Ut(),h=i||(d==null?void 0:d.emit)||((n=d==null?void 0:d.$emit)==null?void 0:n.bind(d))||((s=(a=d==null?void 0:d.proxy)==null?void 0:a.$emit)==null?void 0:s.bind(d==null?void 0:d.proxy));let f=l;t||(t="modelValue"),f=l||f||`update:${t.toString()}`;const p=()=>OIe(e[t])?e[t]:u;if(o){const m=j(p());return Ne(()=>e[t],v=>m.value=v),Ne(m,v=>{(v!==e[t]||c)&&h(f,v)},{deep:c}),m}else return O({get(){return p()},set(m){h(f,m)}})}function e8e({window:e=Eh}={}){if(!e)return j(!1);const t=j(e.document.hasFocus());return Oi(e,"blur",()=>{t.value=!1}),Oi(e,"focus",()=>{t.value=!0}),t}function t8e(e={}){const{window:t=Eh,initialWidth:i=1/0,initialHeight:r=1/0,listenOrientation:n=!0}=e,a=j(i),s=j(r),o=()=>{t&&(a.value=t.innerWidth,s.value=t.innerHeight)};return o(),kD(o),Oi("resize",o,{passive:!0}),n&&Oi("orientationchange",o,{passive:!0}),{width:a,height:s}}const BD=()=>si&&/firefox/i.test(window.navigator.userAgent),i8e=(e,t)=>{if(!si||!e||!t)return!1;const i=e.getBoundingClientRect();let r;return t instanceof Element?r=t.getBoundingClientRect():r={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},i.top<r.bottom&&i.bottom>r.top&&i.right>r.left&&i.left<r.right},eN=e=>{let t=0,i=e;for(;i;)t+=i.offsetTop,i=i.offsetParent;return t},rT=(e,t)=>Math.abs(eN(e)-eN(t)),ND=e=>{let t,i;return e.type==="touchend"?(i=e.changedTouches[0].clientY,t=e.changedTouches[0].clientX):e.type.startsWith("touch")?(i=e.touches[0].clientY,t=e.touches[0].clientX):(i=e.clientY,t=e.clientX),{clientX:t,clientY:i}};function r8e(e,t,i,r){const n=i-t;return e/=r/2,e<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t}const Sr=()=>{},n8e=Object.prototype.hasOwnProperty,Ma=(e,t)=>n8e.call(e,t),ct=Array.isArray,Sv=e=>ZZ(e)==="[object Date]",Wt=e=>typeof e=="function",Et=e=>typeof e=="string",Ri=e=>e!==null&&typeof e=="object",nT=e=>Ri(e)&&Wt(e.then)&&Wt(e.catch),a8e=Object.prototype.toString,ZZ=e=>a8e.call(e),aT=e=>ZZ(e)==="[object Object]",FD=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},s8e=/-(\w)/g,qZ=FD(e=>e.replace(s8e,(t,i)=>i?i.toUpperCase():"")),o8e=/\B([A-Z])/g,l8e=FD(e=>e.replace(o8e,"-$1").toLowerCase()),c8e=FD(e=>e.charAt(0).toUpperCase()+e.slice(1));var YZ=typeof global=="object"&&global&&global.Object===Object&&global,u8e=typeof self=="object"&&self&&self.Object===Object&&self,da=YZ||u8e||Function("return this")(),$a=da.Symbol,KZ=Object.prototype,d8e=KZ.hasOwnProperty,h8e=KZ.toString,K0=$a?$a.toStringTag:void 0;function f8e(e){var t=d8e.call(e,K0),i=e[K0];try{e[K0]=void 0;var r=!0}catch{}var n=h8e.call(e);return r&&(t?e[K0]=i:delete e[K0]),n}var p8e=Object.prototype,m8e=p8e.toString;function v8e(e){return m8e.call(e)}var g8e="[object Null]",y8e="[object Undefined]",tN=$a?$a.toStringTag:void 0;function bs(e){return e==null?e===void 0?y8e:g8e:tN&&tN in Object(e)?f8e(e):v8e(e)}function sn(e){return e!=null&&typeof e=="object"}var b8e="[object Symbol]";function Js(e){return typeof e=="symbol"||sn(e)&&bs(e)==b8e}var w8e=NaN;function iN(e){return typeof e=="number"?e:Js(e)?w8e:+e}function Wr(e,t){for(var i=-1,r=e==null?0:e.length,n=Array(r);++i<r;)n[i]=t(e[i],i,e);return n}var Pi=Array.isArray,x8e=1/0,rN=$a?$a.prototype:void 0,nN=rN?rN.toString:void 0;function eo(e){if(typeof e=="string")return e;if(Pi(e))return Wr(e,eo)+"";if(Js(e))return nN?nN.call(e):"";var t=e+"";return t=="0"&&1/e==-x8e?"-0":t}function gS(e,t){return function(i,r){var n;if(i===void 0&&r===void 0)return t;if(i!==void 0&&(n=i),r!==void 0){if(n===void 0)return r;typeof i=="string"||typeof r=="string"?(i=eo(i),r=eo(r)):(i=iN(i),r=iN(r)),n=e(i,r)}return n}}var _8e=gS(function(e,t){return e+t},0),S8e=/\s/;function XZ(e){for(var t=e.length;t--&&S8e.test(e.charAt(t)););return t}var C8e=/^\s+/;function QZ(e){return e&&e.slice(0,XZ(e)+1).replace(C8e,"")}function Gr(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var aN=NaN,E8e=/^[-+]0x[0-9a-f]+$/i,A8e=/^0b[01]+$/i,M8e=/^0o[0-7]+$/i,T8e=parseInt;function Io(e){if(typeof e=="number")return e;if(Js(e))return aN;if(Gr(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Gr(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=QZ(e);var i=A8e.test(e);return i||M8e.test(e)?T8e(e.slice(2),i?2:8):E8e.test(e)?aN:+e}var sN=1/0,P8e=17976931348623157e292;function Eu(e){if(!e)return e===0?e:0;if(e=Io(e),e===sN||e===-sN){var t=e<0?-1:1;return t*P8e}return e===e?e:0}function Ii(e){var t=Eu(e),i=t%1;return t===t?i?t-i:t:0}var D8e="Expected a function";function I8e(e,t){if(typeof t!="function")throw new TypeError(D8e);return e=Ii(e),function(){if(--e<1)return t.apply(this,arguments)}}function ws(e){return e}var O8e="[object AsyncFunction]",R8e="[object Function]",k8e="[object GeneratorFunction]",L8e="[object Proxy]";function ju(e){if(!Gr(e))return!1;var t=bs(e);return t==R8e||t==k8e||t==O8e||t==L8e}var u2=da["__core-js_shared__"],oN=function(){var e=/[^.]+$/.exec(u2&&u2.keys&&u2.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function B8e(e){return!!oN&&oN in e}var N8e=Function.prototype,F8e=N8e.toString;function dp(e){if(e!=null){try{return F8e.call(e)}catch{}try{return e+""}catch{}}return""}var z8e=/[\\^$.*+?()[\]{}|]/g,V8e=/^\[object .+?Constructor\]$/,U8e=Function.prototype,H8e=Object.prototype,j8e=U8e.toString,W8e=H8e.hasOwnProperty,G8e=RegExp("^"+j8e.call(W8e).replace(z8e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function JZ(e){if(!Gr(e)||B8e(e))return!1;var t=ju(e)?G8e:V8e;return t.test(dp(e))}function $8e(e,t){return e==null?void 0:e[t]}function hp(e,t){var i=$8e(e,t);return JZ(i)?i:void 0}var T1=hp(da,"WeakMap"),Jx=T1&&new T1,eq=Jx?function(e,t){return Jx.set(e,t),e}:ws,lN=Object.create,i0=function(){function e(){}return function(t){if(!Gr(t))return{};if(lN)return lN(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();function P1(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=i0(e.prototype),r=e.apply(i,t);return Gr(r)?r:i}}var Z8e=1;function q8e(e,t,i){var r=t&Z8e,n=P1(e);function a(){var s=this&&this!==da&&this instanceof a?n:e;return s.apply(r?i:this,arguments)}return a}function to(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}var Y8e=Math.max;function tq(e,t,i,r){for(var n=-1,a=e.length,s=i.length,o=-1,l=t.length,c=Y8e(a-s,0),u=Array(l+c),d=!r;++o<l;)u[o]=t[o];for(;++n<s;)(d||n<a)&&(u[i[n]]=e[n]);for(;c--;)u[o++]=e[n++];return u}var K8e=Math.max;function iq(e,t,i,r){for(var n=-1,a=e.length,s=-1,o=i.length,l=-1,c=t.length,u=K8e(a-o,0),d=Array(u+c),h=!r;++n<u;)d[n]=e[n];for(var f=n;++l<c;)d[f+l]=t[l];for(;++s<o;)(h||n<a)&&(d[f+i[s]]=e[n++]);return d}function X8e(e,t){for(var i=e.length,r=0;i--;)e[i]===t&&++r;return r}function yS(){}var Q8e=4294967295;function Zi(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Q8e,this.__views__=[]}Zi.prototype=i0(yS.prototype);Zi.prototype.constructor=Zi;function zD(){}var VD=Jx?function(e){return Jx.get(e)}:zD,Km={},J8e=Object.prototype,eOe=J8e.hasOwnProperty;function d2(e){for(var t=e.name+"",i=Km[t],r=eOe.call(Km,t)?i.length:0;r--;){var n=i[r],a=n.func;if(a==null||a==e)return n.name}return t}function Fo(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}Fo.prototype=i0(yS.prototype);Fo.prototype.constructor=Fo;function ks(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}function rq(e){if(e instanceof Zi)return e.clone();var t=new Fo(e.__wrapped__,e.__chain__);return t.__actions__=ks(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var tOe=Object.prototype,iOe=tOe.hasOwnProperty;function fe(e){if(sn(e)&&!Pi(e)&&!(e instanceof Zi)){if(e instanceof Fo)return e;if(iOe.call(e,"__wrapped__"))return rq(e)}return new Fo(e)}fe.prototype=yS.prototype;fe.prototype.constructor=fe;function sT(e){var t=d2(e),i=fe[t];if(typeof i!="function"||!(t in Zi.prototype))return!1;if(e===i)return!0;var r=VD(i);return!!r&&e===r[0]}var rOe=800,nOe=16,aOe=Date.now;function nq(e){var t=0,i=0;return function(){var r=aOe(),n=nOe-(r-i);if(i=r,n>0){if(++t>=rOe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var aq=nq(eq),sOe=/\{\n\/\* \[wrapped with (.+)\] \*/,oOe=/,? & /;function lOe(e){var t=e.match(sOe);return t?t[1].split(oOe):[]}var cOe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function uOe(e,t){var i=t.length;if(!i)return e;var r=i-1;return t[r]=(i>1?"& ":"")+t[r],t=t.join(i>2?", ":" "),e.replace(cOe,`{
/* [wrapped with `+t+`] */
`)}function UD(e){return function(){return e}}var e_=function(){try{var e=hp(Object,"defineProperty");return e({},"",{}),e}catch{}}(),dOe=e_?function(e,t){return e_(e,"toString",{configurable:!0,enumerable:!1,value:UD(t),writable:!0})}:ws,HD=nq(dOe);function Go(e,t){for(var i=-1,r=e==null?0:e.length;++i<r&&t(e[i],i,e)!==!1;);return e}function bS(e,t,i,r){for(var n=e.length,a=i+(r?1:-1);r?a--:++a<n;)if(t(e[a],a,e))return a;return-1}function sq(e){return e!==e}function hOe(e,t,i){for(var r=i-1,n=e.length;++r<n;)if(e[r]===t)return r;return-1}function r0(e,t,i){return t===t?hOe(e,t,i):bS(e,sq,i)}function wS(e,t){var i=e==null?0:e.length;return!!i&&r0(e,t,0)>-1}var fOe=1,pOe=2,mOe=8,vOe=16,gOe=32,yOe=64,bOe=128,wOe=256,xOe=512,_Oe=[["ary",bOe],["bind",fOe],["bindKey",pOe],["curry",mOe],["curryRight",vOe],["flip",xOe],["partial",gOe],["partialRight",yOe],["rearg",wOe]];function SOe(e,t){return Go(_Oe,function(i){var r="_."+i[0];t&i[1]&&!wS(e,r)&&e.push(r)}),e.sort()}function oq(e,t,i){var r=t+"";return HD(e,uOe(r,SOe(lOe(r),i)))}var COe=1,EOe=2,AOe=4,MOe=8,cN=32,uN=64;function lq(e,t,i,r,n,a,s,o,l,c){var u=t&MOe,d=u?s:void 0,h=u?void 0:s,f=u?a:void 0,p=u?void 0:a;t|=u?cN:uN,t&=~(u?uN:cN),t&AOe||(t&=~(COe|EOe));var m=[e,t,n,f,d,p,h,o,l,c],v=i.apply(void 0,m);return sT(e)&&aq(v,m),v.placeholder=r,oq(v,e,t)}function n0(e){var t=e;return t.placeholder}var TOe=9007199254740991,POe=/^(?:0|[1-9]\d*)$/;function Wu(e,t){var i=typeof e;return t=t??TOe,!!t&&(i=="number"||i!="symbol"&&POe.test(e))&&e>-1&&e%1==0&&e<t}var DOe=Math.min;function IOe(e,t){for(var i=e.length,r=DOe(t.length,i),n=ks(e);r--;){var a=t[r];e[r]=Wu(a,i)?n[a]:void 0}return e}var dN="__lodash_placeholder__";function uh(e,t){for(var i=-1,r=e.length,n=0,a=[];++i<r;){var s=e[i];(s===t||s===dN)&&(e[i]=dN,a[n++]=i)}return a}var OOe=1,ROe=2,kOe=8,LOe=16,BOe=128,NOe=512;function xS(e,t,i,r,n,a,s,o,l,c){var u=t&BOe,d=t&OOe,h=t&ROe,f=t&(kOe|LOe),p=t&NOe,m=h?void 0:P1(e);function v(){for(var y=arguments.length,x=Array(y),b=y;b--;)x[b]=arguments[b];if(f)var w=n0(v),S=X8e(x,w);if(r&&(x=tq(x,r,n,f)),a&&(x=iq(x,a,s,f)),y-=S,f&&y<c){var _=uh(x,w);return lq(e,t,xS,v.placeholder,i,x,_,o,l,c-y)}var E=d?i:this,C=h?E[e]:e;return y=x.length,o?x=IOe(x,o):p&&y>1&&x.reverse(),u&&l<y&&(x.length=l),this&&this!==da&&this instanceof v&&(C=m||P1(C)),C.apply(E,x)}return v}function FOe(e,t,i){var r=P1(e);function n(){for(var a=arguments.length,s=Array(a),o=a,l=n0(n);o--;)s[o]=arguments[o];var c=a<3&&s[0]!==l&&s[a-1]!==l?[]:uh(s,l);if(a-=c.length,a<i)return lq(e,t,xS,n.placeholder,void 0,s,c,void 0,void 0,i-a);var u=this&&this!==da&&this instanceof n?r:e;return to(u,this,s)}return n}var zOe=1;function VOe(e,t,i,r){var n=t&zOe,a=P1(e);function s(){for(var o=-1,l=arguments.length,c=-1,u=r.length,d=Array(u+l),h=this&&this!==da&&this instanceof s?a:e;++c<u;)d[c]=r[c];for(;l--;)d[c++]=arguments[++o];return to(h,n?i:this,d)}return s}var hN="__lodash_placeholder__",N4=1,UOe=2,HOe=4,fN=8,X0=128,pN=256,jOe=Math.min;function WOe(e,t){var i=e[1],r=t[1],n=i|r,a=n<(N4|UOe|X0),s=r==X0&&i==fN||r==X0&&i==pN&&e[7].length<=t[8]||r==(X0|pN)&&t[7].length<=t[8]&&i==fN;if(!(a||s))return e;r&N4&&(e[2]=t[2],n|=i&N4?0:HOe);var o=t[3];if(o){var l=e[3];e[3]=l?tq(l,o,t[4]):o,e[4]=l?uh(e[3],hN):t[4]}return o=t[5],o&&(l=e[5],e[5]=l?iq(l,o,t[6]):o,e[6]=l?uh(e[5],hN):t[6]),o=t[7],o&&(e[7]=o),r&X0&&(e[8]=e[8]==null?t[8]:jOe(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=n,e}var GOe="Expected a function",mN=1,$Oe=2,F4=8,z4=16,V4=32,vN=64,gN=Math.max;function Gu(e,t,i,r,n,a,s,o){var l=t&$Oe;if(!l&&typeof e!="function")throw new TypeError(GOe);var c=r?r.length:0;if(c||(t&=~(V4|vN),r=n=void 0),s=s===void 0?s:gN(Ii(s),0),o=o===void 0?o:Ii(o),c-=n?n.length:0,t&vN){var u=r,d=n;r=n=void 0}var h=l?void 0:VD(e),f=[e,t,i,r,n,u,d,a,s,o];if(h&&WOe(f,h),e=f[0],t=f[1],i=f[2],r=f[3],n=f[4],o=f[9]=f[9]===void 0?l?0:e.length:gN(f[9]-c,0),!o&&t&(F4|z4)&&(t&=~(F4|z4)),!t||t==mN)var p=q8e(e,t,i);else t==F4||t==z4?p=FOe(e,t,o):(t==V4||t==(mN|V4))&&!n.length?p=VOe(e,t,i,r):p=xS.apply(void 0,f);var m=h?eq:aq;return oq(m(p,f),e,t)}var ZOe=128;function cq(e,t,i){return t=i?void 0:t,t=e&&t==null?e.length:t,Gu(e,ZOe,void 0,void 0,void 0,void 0,t)}function $u(e,t,i){t=="__proto__"&&e_?e_(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function Il(e,t){return e===t||e!==e&&t!==t}var qOe=Object.prototype,YOe=qOe.hasOwnProperty;function by(e,t,i){var r=e[t];(!(YOe.call(e,t)&&Il(r,i))||i===void 0&&!(t in e))&&$u(e,t,i)}function Dc(e,t,i,r){var n=!i;i||(i={});for(var a=-1,s=t.length;++a<s;){var o=t[a],l=r?r(i[o],e[o],o,i,e):void 0;l===void 0&&(l=e[o]),n?$u(i,o,l):by(i,o,l)}return i}var yN=Math.max;function uq(e,t,i){return t=yN(t===void 0?e.length-1:t,0),function(){for(var r=arguments,n=-1,a=yN(r.length-t,0),s=Array(a);++n<a;)s[n]=r[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=r[n];return o[t]=i(s),to(e,this,o)}}function Ni(e,t){return HD(uq(e,t,ws),e+"")}var KOe=9007199254740991;function _S(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=KOe}function Vs(e){return e!=null&&_S(e.length)&&!ju(e)}function vs(e,t,i){if(!Gr(i))return!1;var r=typeof t;return(r=="number"?Vs(i)&&Wu(t,i.length):r=="string"&&t in i)?Il(i[t],e):!1}function a0(e){return Ni(function(t,i){var r=-1,n=i.length,a=n>1?i[n-1]:void 0,s=n>2?i[2]:void 0;for(a=e.length>3&&typeof a=="function"?(n--,a):void 0,s&&vs(i[0],i[1],s)&&(a=n<3?void 0:a,n=1),t=Object(t);++r<n;){var o=i[r];o&&e(t,o,r,a)}return t})}var XOe=Object.prototype;function wy(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||XOe;return e===i}function jD(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}var QOe="[object Arguments]";function bN(e){return sn(e)&&bs(e)==QOe}var dq=Object.prototype,JOe=dq.hasOwnProperty,eRe=dq.propertyIsEnumerable,Yf=bN(function(){return arguments}())?bN:function(e){return sn(e)&&JOe.call(e,"callee")&&!eRe.call(e,"callee")};function WD(){return!1}var hq=typeof exports=="object"&&exports&&!exports.nodeType&&exports,wN=hq&&typeof module=="object"&&module&&!module.nodeType&&module,tRe=wN&&wN.exports===hq,xN=tRe?da.Buffer:void 0,iRe=xN?xN.isBuffer:void 0,dh=iRe||WD,rRe="[object Arguments]",nRe="[object Array]",aRe="[object Boolean]",sRe="[object Date]",oRe="[object Error]",lRe="[object Function]",cRe="[object Map]",uRe="[object Number]",dRe="[object Object]",hRe="[object RegExp]",fRe="[object Set]",pRe="[object String]",mRe="[object WeakMap]",vRe="[object ArrayBuffer]",gRe="[object DataView]",yRe="[object Float32Array]",bRe="[object Float64Array]",wRe="[object Int8Array]",xRe="[object Int16Array]",_Re="[object Int32Array]",SRe="[object Uint8Array]",CRe="[object Uint8ClampedArray]",ERe="[object Uint16Array]",ARe="[object Uint32Array]",Ur={};Ur[yRe]=Ur[bRe]=Ur[wRe]=Ur[xRe]=Ur[_Re]=Ur[SRe]=Ur[CRe]=Ur[ERe]=Ur[ARe]=!0;Ur[rRe]=Ur[nRe]=Ur[vRe]=Ur[aRe]=Ur[gRe]=Ur[sRe]=Ur[oRe]=Ur[lRe]=Ur[cRe]=Ur[uRe]=Ur[dRe]=Ur[hRe]=Ur[fRe]=Ur[pRe]=Ur[mRe]=!1;function MRe(e){return sn(e)&&_S(e.length)&&!!Ur[bs(e)]}function io(e){return function(t){return e(t)}}var fq=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ug=fq&&typeof module=="object"&&module&&!module.nodeType&&module,TRe=Ug&&Ug.exports===fq,U4=TRe&&YZ.process,zo=function(){try{var e=Ug&&Ug.require&&Ug.require("util").types;return e||U4&&U4.binding&&U4.binding("util")}catch{}}(),_N=zo&&zo.isTypedArray,s0=_N?io(_N):MRe,PRe=Object.prototype,DRe=PRe.hasOwnProperty;function pq(e,t){var i=Pi(e),r=!i&&Yf(e),n=!i&&!r&&dh(e),a=!i&&!r&&!n&&s0(e),s=i||r||n||a,o=s?jD(e.length,String):[],l=o.length;for(var c in e)(t||DRe.call(e,c))&&!(s&&(c=="length"||n&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Wu(c,l)))&&o.push(c);return o}function mq(e,t){return function(i){return e(t(i))}}var IRe=mq(Object.keys,Object),ORe=Object.prototype,RRe=ORe.hasOwnProperty;function GD(e){if(!wy(e))return IRe(e);var t=[];for(var i in Object(e))RRe.call(e,i)&&i!="constructor"&&t.push(i);return t}function Kn(e){return Vs(e)?pq(e):GD(e)}var kRe=Object.prototype,LRe=kRe.hasOwnProperty,BRe=a0(function(e,t){if(wy(t)||Vs(t)){Dc(t,Kn(t),e);return}for(var i in t)LRe.call(t,i)&&by(e,i,t[i])});function NRe(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}var FRe=Object.prototype,zRe=FRe.hasOwnProperty;function VRe(e){if(!Gr(e))return NRe(e);var t=wy(e),i=[];for(var r in e)r=="constructor"&&(t||!zRe.call(e,r))||i.push(r);return i}function Us(e){return Vs(e)?pq(e,!0):VRe(e)}var SN=a0(function(e,t){Dc(t,Us(t),e)}),t_=a0(function(e,t,i,r){Dc(t,Us(t),e,r)}),URe=a0(function(e,t,i,r){Dc(t,Kn(t),e,r)}),HRe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jRe=/^\w*$/;function $D(e,t){if(Pi(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||Js(e)?!0:jRe.test(e)||!HRe.test(e)||t!=null&&e in Object(t)}var D1=hp(Object,"create");function WRe(){this.__data__=D1?D1(null):{},this.size=0}function GRe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var $Re="__lodash_hash_undefined__",ZRe=Object.prototype,qRe=ZRe.hasOwnProperty;function YRe(e){var t=this.__data__;if(D1){var i=t[e];return i===$Re?void 0:i}return qRe.call(t,e)?t[e]:void 0}var KRe=Object.prototype,XRe=KRe.hasOwnProperty;function QRe(e){var t=this.__data__;return D1?t[e]!==void 0:XRe.call(t,e)}var JRe="__lodash_hash_undefined__";function eke(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=D1&&t===void 0?JRe:t,this}function Kf(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Kf.prototype.clear=WRe;Kf.prototype.delete=GRe;Kf.prototype.get=YRe;Kf.prototype.has=QRe;Kf.prototype.set=eke;function tke(){this.__data__=[],this.size=0}function SS(e,t){for(var i=e.length;i--;)if(Il(e[i][0],t))return i;return-1}var ike=Array.prototype,rke=ike.splice;function nke(e){var t=this.__data__,i=SS(t,e);if(i<0)return!1;var r=t.length-1;return i==r?t.pop():rke.call(t,i,1),--this.size,!0}function ake(e){var t=this.__data__,i=SS(t,e);return i<0?void 0:t[i][1]}function ske(e){return SS(this.__data__,e)>-1}function oke(e,t){var i=this.__data__,r=SS(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this}function Zu(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Zu.prototype.clear=tke;Zu.prototype.delete=nke;Zu.prototype.get=ake;Zu.prototype.has=ske;Zu.prototype.set=oke;var I1=hp(da,"Map");function lke(){this.size=0,this.__data__={hash:new Kf,map:new(I1||Zu),string:new Kf}}function cke(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function CS(e,t){var i=e.__data__;return cke(t)?i[typeof t=="string"?"string":"hash"]:i.map}function uke(e){var t=CS(this,e).delete(e);return this.size-=t?1:0,t}function dke(e){return CS(this,e).get(e)}function hke(e){return CS(this,e).has(e)}function fke(e,t){var i=CS(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this}function qu(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}qu.prototype.clear=lke;qu.prototype.delete=uke;qu.prototype.get=dke;qu.prototype.has=hke;qu.prototype.set=fke;var pke="Expected a function";function xy(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(pke);var i=function(){var r=arguments,n=t?t.apply(this,r):r[0],a=i.cache;if(a.has(n))return a.get(n);var s=e.apply(this,r);return i.cache=a.set(n,s)||a,s};return i.cache=new(xy.Cache||qu),i}xy.Cache=qu;var mke=500;function vke(e){var t=xy(e,function(r){return i.size===mke&&i.clear(),r}),i=t.cache;return t}var gke=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yke=/\\(\\)?/g,vq=vke(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(gke,function(i,r,n,a){t.push(n?a.replace(yke,"$1"):r||i)}),t});function hr(e){return e==null?"":eo(e)}function Ah(e,t){return Pi(e)?e:$D(e,t)?[e]:vq(hr(e))}var bke=1/0;function Ic(e){if(typeof e=="string"||Js(e))return e;var t=e+"";return t=="0"&&1/e==-bke?"-0":t}function fp(e,t){t=Ah(t,e);for(var i=0,r=t.length;e!=null&&i<r;)e=e[Ic(t[i++])];return i&&i==r?e:void 0}function Nr(e,t,i){var r=e==null?void 0:fp(e,t);return r===void 0?i:r}function ZD(e,t){for(var i=-1,r=t.length,n=Array(r),a=e==null;++i<r;)n[i]=a?void 0:Nr(e,t[i]);return n}function Mh(e,t){for(var i=-1,r=t.length,n=e.length;++i<r;)e[n+i]=t[i];return e}var CN=$a?$a.isConcatSpreadable:void 0;function wke(e){return Pi(e)||Yf(e)||!!(CN&&e&&e[CN])}function Da(e,t,i,r,n){var a=-1,s=e.length;for(i||(i=wke),n||(n=[]);++a<s;){var o=e[a];t>0&&i(o)?t>1?Da(o,t-1,i,r,n):Mh(n,o):r||(n[n.length]=o)}return n}function qD(e){var t=e==null?0:e.length;return t?Da(e,1):[]}function Yu(e){return HD(uq(e,void 0,qD),e+"")}var xke=Yu(ZD),ES=mq(Object.getPrototypeOf,Object),_ke="[object Object]",Ske=Function.prototype,Cke=Object.prototype,gq=Ske.toString,Eke=Cke.hasOwnProperty,Ake=gq.call(Object);function _y(e){if(!sn(e)||bs(e)!=_ke)return!1;var t=ES(e);if(t===null)return!0;var i=Eke.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&gq.call(i)==Ake}var Mke="[object DOMException]",Tke="[object Error]";function YD(e){if(!sn(e))return!1;var t=bs(e);return t==Tke||t==Mke||typeof e.message=="string"&&typeof e.name=="string"&&!_y(e)}var yq=Ni(function(e,t){try{return to(e,void 0,t)}catch(i){return YD(i)?i:new Error(i)}}),Pke="Expected a function";function bq(e,t){var i;if(typeof t!="function")throw new TypeError(Pke);return e=Ii(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=void 0),i}}var Dke=1,Ike=32,AS=Ni(function(e,t,i){var r=Dke;if(i.length){var n=uh(i,n0(AS));r|=Ike}return Gu(e,r,t,i,n)});AS.placeholder={};var Oke=Yu(function(e,t){return Go(t,function(i){i=Ic(i),$u(e,i,AS(e[i],e))}),e}),Rke=1,kke=2,Lke=32,KD=Ni(function(e,t,i){var r=Rke|kke;if(i.length){var n=uh(i,n0(KD));r|=Lke}return Gu(t,r,e,i,n)});KD.placeholder={};function Vo(e,t,i){var r=-1,n=e.length;t<0&&(t=-t>n?0:n+t),i=i>n?n:i,i<0&&(i+=n),n=t>i?0:i-t>>>0,t>>>=0;for(var a=Array(n);++r<n;)a[r]=e[r+t];return a}function Th(e,t,i){var r=e.length;return i=i===void 0?r:i,!t&&i>=r?e:Vo(e,t,i)}var Bke="\\ud800-\\udfff",Nke="\\u0300-\\u036f",Fke="\\ufe20-\\ufe2f",zke="\\u20d0-\\u20ff",Vke=Nke+Fke+zke,Uke="\\ufe0e\\ufe0f",Hke="\\u200d",jke=RegExp("["+Hke+Bke+Vke+Uke+"]");function o0(e){return jke.test(e)}function Wke(e){return e.split("")}var wq="\\ud800-\\udfff",Gke="\\u0300-\\u036f",$ke="\\ufe20-\\ufe2f",Zke="\\u20d0-\\u20ff",qke=Gke+$ke+Zke,Yke="\\ufe0e\\ufe0f",Kke="["+wq+"]",oT="["+qke+"]",lT="\\ud83c[\\udffb-\\udfff]",Xke="(?:"+oT+"|"+lT+")",xq="[^"+wq+"]",_q="(?:\\ud83c[\\udde6-\\uddff]){2}",Sq="[\\ud800-\\udbff][\\udc00-\\udfff]",Qke="\\u200d",Cq=Xke+"?",Eq="["+Yke+"]?",Jke="(?:"+Qke+"(?:"+[xq,_q,Sq].join("|")+")"+Eq+Cq+")*",e6e=Eq+Cq+Jke,t6e="(?:"+[xq+oT+"?",oT,_q,Sq,Kke].join("|")+")",i6e=RegExp(lT+"(?="+lT+")|"+t6e+e6e,"g");function r6e(e){return e.match(i6e)||[]}function Al(e){return o0(e)?r6e(e):Wke(e)}function Aq(e){return function(t){t=hr(t);var i=o0(t)?Al(t):void 0,r=i?i[0]:t.charAt(0),n=i?Th(i,1).join(""):t.slice(1);return r[e]()+n}}var XD=Aq("toUpperCase");function Mq(e){return XD(hr(e).toLowerCase())}function QD(e,t,i,r){var n=-1,a=e==null?0:e.length;for(r&&a&&(i=e[++n]);++n<a;)i=t(i,e[n],n,e);return i}function JD(e){return function(t){return e==null?void 0:e[t]}}var n6e={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},a6e=JD(n6e),s6e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,o6e="\\u0300-\\u036f",l6e="\\ufe20-\\ufe2f",c6e="\\u20d0-\\u20ff",u6e=o6e+l6e+c6e,d6e="["+u6e+"]",h6e=RegExp(d6e,"g");function Tq(e){return e=hr(e),e&&e.replace(s6e,a6e).replace(h6e,"")}var f6e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function p6e(e){return e.match(f6e)||[]}var m6e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function v6e(e){return m6e.test(e)}var Pq="\\ud800-\\udfff",g6e="\\u0300-\\u036f",y6e="\\ufe20-\\ufe2f",b6e="\\u20d0-\\u20ff",w6e=g6e+y6e+b6e,Dq="\\u2700-\\u27bf",Iq="a-z\\xdf-\\xf6\\xf8-\\xff",x6e="\\xac\\xb1\\xd7\\xf7",_6e="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",S6e="\\u2000-\\u206f",C6e=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Oq="A-Z\\xc0-\\xd6\\xd8-\\xde",E6e="\\ufe0e\\ufe0f",Rq=x6e+_6e+S6e+C6e,kq="[']",EN="["+Rq+"]",A6e="["+w6e+"]",Lq="\\d+",M6e="["+Dq+"]",Bq="["+Iq+"]",Nq="[^"+Pq+Rq+Lq+Dq+Iq+Oq+"]",T6e="\\ud83c[\\udffb-\\udfff]",P6e="(?:"+A6e+"|"+T6e+")",D6e="[^"+Pq+"]",Fq="(?:\\ud83c[\\udde6-\\uddff]){2}",zq="[\\ud800-\\udbff][\\udc00-\\udfff]",hm="["+Oq+"]",I6e="\\u200d",AN="(?:"+Bq+"|"+Nq+")",O6e="(?:"+hm+"|"+Nq+")",MN="(?:"+kq+"(?:d|ll|m|re|s|t|ve))?",TN="(?:"+kq+"(?:D|LL|M|RE|S|T|VE))?",Vq=P6e+"?",Uq="["+E6e+"]?",R6e="(?:"+I6e+"(?:"+[D6e,Fq,zq].join("|")+")"+Uq+Vq+")*",k6e="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",L6e="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",B6e=Uq+Vq+R6e,N6e="(?:"+[M6e,Fq,zq].join("|")+")"+B6e,F6e=RegExp([hm+"?"+Bq+"+"+MN+"(?="+[EN,hm,"$"].join("|")+")",O6e+"+"+TN+"(?="+[EN,hm+AN,"$"].join("|")+")",hm+"?"+AN+"+"+MN,hm+"+"+TN,L6e,k6e,Lq,N6e].join("|"),"g");function z6e(e){return e.match(F6e)||[]}function Hq(e,t,i){return e=hr(e),t=i?void 0:t,t===void 0?v6e(e)?z6e(e):p6e(e):e.match(t)||[]}var V6e="[']",U6e=RegExp(V6e,"g");function l0(e){return function(t){return QD(Hq(Tq(t).replace(U6e,"")),e,"")}}var H6e=l0(function(e,t,i){return t=t.toLowerCase(),e+(i?Mq(t):t)});function wa(){if(!arguments.length)return[];var e=arguments[0];return Pi(e)?e:[e]}var j6e=da.isFinite,W6e=Math.min;function eI(e){var t=Math[e];return function(i,r){if(i=Io(i),r=r==null?0:W6e(Ii(r),292),r&&j6e(i)){var n=(hr(i)+"e").split("e"),a=t(n[0]+"e"+(+n[1]+r));return n=(hr(a)+"e").split("e"),+(n[0]+"e"+(+n[1]-r))}return t(i)}}var G6e=eI("ceil");function jq(e){var t=fe(e);return t.__chain__=!0,t}var $6e=Math.ceil,Z6e=Math.max;function q6e(e,t,i){(i?vs(e,t,i):t===void 0)?t=1:t=Z6e(Ii(t),0);var r=e==null?0:e.length;if(!r||t<1)return[];for(var n=0,a=0,s=Array($6e(r/t));n<r;)s[a++]=Vo(e,n,n+=t);return s}function pp(e,t,i){return e===e&&(i!==void 0&&(e=e<=i?e:i),t!==void 0&&(e=e>=t?e:t)),e}function Y6e(e,t,i){return i===void 0&&(i=t,t=void 0),i!==void 0&&(i=Io(i),i=i===i?i:0),t!==void 0&&(t=Io(t),t=t===t?t:0),pp(Io(e),t,i)}function K6e(){this.__data__=new Zu,this.size=0}function X6e(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function Q6e(e){return this.__data__.get(e)}function J6e(e){return this.__data__.has(e)}var e7e=200;function t7e(e,t){var i=this.__data__;if(i instanceof Zu){var r=i.__data__;if(!I1||r.length<e7e-1)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new qu(r)}return i.set(e,t),this.size=i.size,this}function yl(e){var t=this.__data__=new Zu(e);this.size=t.size}yl.prototype.clear=K6e;yl.prototype.delete=X6e;yl.prototype.get=Q6e;yl.prototype.has=J6e;yl.prototype.set=t7e;function Wq(e,t){return e&&Dc(t,Kn(t),e)}function i7e(e,t){return e&&Dc(t,Us(t),e)}var Gq=typeof exports=="object"&&exports&&!exports.nodeType&&exports,PN=Gq&&typeof module=="object"&&module&&!module.nodeType&&module,r7e=PN&&PN.exports===Gq,DN=r7e?da.Buffer:void 0,IN=DN?DN.allocUnsafe:void 0;function $q(e,t){if(t)return e.slice();var i=e.length,r=IN?IN(i):new e.constructor(i);return e.copy(r),r}function Ph(e,t){for(var i=-1,r=e==null?0:e.length,n=0,a=[];++i<r;){var s=e[i];t(s,i,e)&&(a[n++]=s)}return a}function tI(){return[]}var n7e=Object.prototype,a7e=n7e.propertyIsEnumerable,ON=Object.getOwnPropertySymbols,iI=ON?function(e){return e==null?[]:(e=Object(e),Ph(ON(e),function(t){return a7e.call(e,t)}))}:tI;function s7e(e,t){return Dc(e,iI(e),t)}var o7e=Object.getOwnPropertySymbols,Zq=o7e?function(e){for(var t=[];e;)Mh(t,iI(e)),e=ES(e);return t}:tI;function l7e(e,t){return Dc(e,Zq(e),t)}function qq(e,t,i){var r=t(e);return Pi(e)?r:Mh(r,i(e))}function cT(e){return qq(e,Kn,iI)}function rI(e){return qq(e,Us,Zq)}var uT=hp(da,"DataView"),dT=hp(da,"Promise"),Xm=hp(da,"Set"),RN="[object Map]",c7e="[object Object]",kN="[object Promise]",LN="[object Set]",BN="[object WeakMap]",NN="[object DataView]",u7e=dp(uT),d7e=dp(I1),h7e=dp(dT),f7e=dp(Xm),p7e=dp(T1),rf=bs;(uT&&rf(new uT(new ArrayBuffer(1)))!=NN||I1&&rf(new I1)!=RN||dT&&rf(dT.resolve())!=kN||Xm&&rf(new Xm)!=LN||T1&&rf(new T1)!=BN)&&(rf=function(e){var t=bs(e),i=t==c7e?e.constructor:void 0,r=i?dp(i):"";if(r)switch(r){case u7e:return NN;case d7e:return RN;case h7e:return kN;case f7e:return LN;case p7e:return BN}return t});var xc=rf,m7e=Object.prototype,v7e=m7e.hasOwnProperty;function g7e(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&v7e.call(e,"index")&&(i.index=e.index,i.input=e.input),i}var i_=da.Uint8Array;function nI(e){var t=new e.constructor(e.byteLength);return new i_(t).set(new i_(e)),t}function y7e(e,t){var i=t?nI(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}var b7e=/\w*$/;function w7e(e){var t=new e.constructor(e.source,b7e.exec(e));return t.lastIndex=e.lastIndex,t}var FN=$a?$a.prototype:void 0,zN=FN?FN.valueOf:void 0;function x7e(e){return zN?Object(zN.call(e)):{}}function Yq(e,t){var i=t?nI(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}var _7e="[object Boolean]",S7e="[object Date]",C7e="[object Map]",E7e="[object Number]",A7e="[object RegExp]",M7e="[object Set]",T7e="[object String]",P7e="[object Symbol]",D7e="[object ArrayBuffer]",I7e="[object DataView]",O7e="[object Float32Array]",R7e="[object Float64Array]",k7e="[object Int8Array]",L7e="[object Int16Array]",B7e="[object Int32Array]",N7e="[object Uint8Array]",F7e="[object Uint8ClampedArray]",z7e="[object Uint16Array]",V7e="[object Uint32Array]";function U7e(e,t,i){var r=e.constructor;switch(t){case D7e:return nI(e);case _7e:case S7e:return new r(+e);case I7e:return y7e(e,i);case O7e:case R7e:case k7e:case L7e:case B7e:case N7e:case F7e:case z7e:case V7e:return Yq(e,i);case C7e:return new r;case E7e:case T7e:return new r(e);case A7e:return w7e(e);case M7e:return new r;case P7e:return x7e(e)}}function Kq(e){return typeof e.constructor=="function"&&!wy(e)?i0(ES(e)):{}}var H7e="[object Map]";function j7e(e){return sn(e)&&xc(e)==H7e}var VN=zo&&zo.isMap,Xq=VN?io(VN):j7e,W7e="[object Set]";function G7e(e){return sn(e)&&xc(e)==W7e}var UN=zo&&zo.isSet,Qq=UN?io(UN):G7e,$7e=1,Z7e=2,q7e=4,Jq="[object Arguments]",Y7e="[object Array]",K7e="[object Boolean]",X7e="[object Date]",Q7e="[object Error]",eY="[object Function]",J7e="[object GeneratorFunction]",eLe="[object Map]",tLe="[object Number]",tY="[object Object]",iLe="[object RegExp]",rLe="[object Set]",nLe="[object String]",aLe="[object Symbol]",sLe="[object WeakMap]",oLe="[object ArrayBuffer]",lLe="[object DataView]",cLe="[object Float32Array]",uLe="[object Float64Array]",dLe="[object Int8Array]",hLe="[object Int16Array]",fLe="[object Int32Array]",pLe="[object Uint8Array]",mLe="[object Uint8ClampedArray]",vLe="[object Uint16Array]",gLe="[object Uint32Array]",Rr={};Rr[Jq]=Rr[Y7e]=Rr[oLe]=Rr[lLe]=Rr[K7e]=Rr[X7e]=Rr[cLe]=Rr[uLe]=Rr[dLe]=Rr[hLe]=Rr[fLe]=Rr[eLe]=Rr[tLe]=Rr[tY]=Rr[iLe]=Rr[rLe]=Rr[nLe]=Rr[aLe]=Rr[pLe]=Rr[mLe]=Rr[vLe]=Rr[gLe]=!0;Rr[Q7e]=Rr[eY]=Rr[sLe]=!1;function Oo(e,t,i,r,n,a){var s,o=t&$7e,l=t&Z7e,c=t&q7e;if(i&&(s=n?i(e,r,n,a):i(e)),s!==void 0)return s;if(!Gr(e))return e;var u=Pi(e);if(u){if(s=g7e(e),!o)return ks(e,s)}else{var d=xc(e),h=d==eY||d==J7e;if(dh(e))return $q(e,o);if(d==tY||d==Jq||h&&!n){if(s=l||h?{}:Kq(e),!o)return l?l7e(e,i7e(s,e)):s7e(e,Wq(s,e))}else{if(!Rr[d])return n?e:{};s=U7e(e,d,o)}}a||(a=new yl);var f=a.get(e);if(f)return f;a.set(e,s),Qq(e)?e.forEach(function(v){s.add(Oo(v,t,i,v,e,a))}):Xq(e)&&e.forEach(function(v,y){s.set(y,Oo(v,t,i,y,e,a))});var p=c?l?rI:cT:l?Us:Kn,m=u?void 0:p(e);return Go(m||e,function(v,y){m&&(y=v,v=e[y]),by(s,y,Oo(v,t,i,y,e,a))}),s}var yLe=4;function hT(e){return Oo(e,yLe)}var bLe=1,wLe=4;function O1(e){return Oo(e,bLe|wLe)}var xLe=1,_Le=4;function SLe(e,t){return t=typeof t=="function"?t:void 0,Oo(e,xLe|_Le,t)}var CLe=4;function ELe(e,t){return t=typeof t=="function"?t:void 0,Oo(e,CLe,t)}function ALe(){return new Fo(this.value(),this.__chain__)}function MLe(e){for(var t=-1,i=e==null?0:e.length,r=0,n=[];++t<i;){var a=e[t];a&&(n[r++]=a)}return n}function TLe(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),i=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Mh(Pi(i)?ks(i):[i],Da(t,1))}var PLe="__lodash_hash_undefined__";function DLe(e){return this.__data__.set(e,PLe),this}function ILe(e){return this.__data__.has(e)}function Xf(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new qu;++t<i;)this.add(e[t])}Xf.prototype.add=Xf.prototype.push=DLe;Xf.prototype.has=ILe;function aI(e,t){for(var i=-1,r=e==null?0:e.length;++i<r;)if(t(e[i],i,e))return!0;return!1}function R1(e,t){return e.has(t)}var OLe=1,RLe=2;function iY(e,t,i,r,n,a){var s=i&OLe,o=e.length,l=t.length;if(o!=l&&!(s&&l>o))return!1;var c=a.get(e),u=a.get(t);if(c&&u)return c==t&&u==e;var d=-1,h=!0,f=i&RLe?new Xf:void 0;for(a.set(e,t),a.set(t,e);++d<o;){var p=e[d],m=t[d];if(r)var v=s?r(m,p,d,t,e,a):r(p,m,d,e,t,a);if(v!==void 0){if(v)continue;h=!1;break}if(f){if(!aI(t,function(y,x){if(!R1(f,x)&&(p===y||n(p,y,i,r,a)))return f.push(x)})){h=!1;break}}else if(!(p===m||n(p,m,i,r,a))){h=!1;break}}return a.delete(e),a.delete(t),h}function sI(e){var t=-1,i=Array(e.size);return e.forEach(function(r,n){i[++t]=[n,r]}),i}function MS(e){var t=-1,i=Array(e.size);return e.forEach(function(r){i[++t]=r}),i}var kLe=1,LLe=2,BLe="[object Boolean]",NLe="[object Date]",FLe="[object Error]",zLe="[object Map]",VLe="[object Number]",ULe="[object RegExp]",HLe="[object Set]",jLe="[object String]",WLe="[object Symbol]",GLe="[object ArrayBuffer]",$Le="[object DataView]",HN=$a?$a.prototype:void 0,H4=HN?HN.valueOf:void 0;function ZLe(e,t,i,r,n,a,s){switch(i){case $Le:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case GLe:return!(e.byteLength!=t.byteLength||!a(new i_(e),new i_(t)));case BLe:case NLe:case VLe:return Il(+e,+t);case FLe:return e.name==t.name&&e.message==t.message;case ULe:case jLe:return e==t+"";case zLe:var o=sI;case HLe:var l=r&kLe;if(o||(o=MS),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;r|=LLe,s.set(e,t);var u=iY(o(e),o(t),r,n,a,s);return s.delete(e),u;case WLe:if(H4)return H4.call(e)==H4.call(t)}return!1}var qLe=1,YLe=Object.prototype,KLe=YLe.hasOwnProperty;function XLe(e,t,i,r,n,a){var s=i&qLe,o=cT(e),l=o.length,c=cT(t),u=c.length;if(l!=u&&!s)return!1;for(var d=l;d--;){var h=o[d];if(!(s?h in t:KLe.call(t,h)))return!1}var f=a.get(e),p=a.get(t);if(f&&p)return f==t&&p==e;var m=!0;a.set(e,t),a.set(t,e);for(var v=s;++d<l;){h=o[d];var y=e[h],x=t[h];if(r)var b=s?r(x,y,h,t,e,a):r(y,x,h,e,t,a);if(!(b===void 0?y===x||n(y,x,i,r,a):b)){m=!1;break}v||(v=h=="constructor")}if(m&&!v){var w=e.constructor,S=t.constructor;w!=S&&"constructor"in e&&"constructor"in t&&!(typeof w=="function"&&w instanceof w&&typeof S=="function"&&S instanceof S)&&(m=!1)}return a.delete(e),a.delete(t),m}var QLe=1,jN="[object Arguments]",WN="[object Array]",xw="[object Object]",JLe=Object.prototype,GN=JLe.hasOwnProperty;function eBe(e,t,i,r,n,a){var s=Pi(e),o=Pi(t),l=s?WN:xc(e),c=o?WN:xc(t);l=l==jN?xw:l,c=c==jN?xw:c;var u=l==xw,d=c==xw,h=l==c;if(h&&dh(e)){if(!dh(t))return!1;s=!0,u=!1}if(h&&!u)return a||(a=new yl),s||s0(e)?iY(e,t,i,r,n,a):ZLe(e,t,l,i,r,n,a);if(!(i&QLe)){var f=u&&GN.call(e,"__wrapped__"),p=d&&GN.call(t,"__wrapped__");if(f||p){var m=f?e.value():e,v=p?t.value():t;return a||(a=new yl),n(m,v,i,r,a)}}return h?(a||(a=new yl),XLe(e,t,i,r,n,a)):!1}function Sy(e,t,i,r,n){return e===t?!0:e==null||t==null||!sn(e)&&!sn(t)?e!==e&&t!==t:eBe(e,t,i,r,Sy,n)}var tBe=1,iBe=2;function oI(e,t,i,r){var n=i.length,a=n,s=!r;if(e==null)return!a;for(e=Object(e);n--;){var o=i[n];if(s&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++n<a;){o=i[n];var l=o[0],c=e[l],u=o[1];if(s&&o[2]){if(c===void 0&&!(l in e))return!1}else{var d=new yl;if(r)var h=r(c,u,l,e,t,d);if(!(h===void 0?Sy(u,c,tBe|iBe,r,d):h))return!1}}return!0}function rY(e){return e===e&&!Gr(e)}function lI(e){for(var t=Kn(e),i=t.length;i--;){var r=t[i],n=e[r];t[i]=[r,n,rY(n)]}return t}function nY(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==void 0||e in Object(i))}}function aY(e){var t=lI(e);return t.length==1&&t[0][2]?nY(t[0][0],t[0][1]):function(i){return i===e||oI(i,e,t)}}function rBe(e,t){return e!=null&&t in Object(e)}function sY(e,t,i){t=Ah(t,e);for(var r=-1,n=t.length,a=!1;++r<n;){var s=Ic(t[r]);if(!(a=e!=null&&i(e,s)))break;e=e[s]}return a||++r!=n?a:(n=e==null?0:e.length,!!n&&_S(n)&&Wu(s,n)&&(Pi(e)||Yf(e)))}function cI(e,t){return e!=null&&sY(e,t,rBe)}var nBe=1,aBe=2;function oY(e,t){return $D(e)&&rY(t)?nY(Ic(e),t):function(i){var r=Nr(i,e);return r===void 0&&r===t?cI(i,e):Sy(t,r,nBe|aBe)}}function uI(e){return function(t){return t==null?void 0:t[e]}}function sBe(e){return function(t){return fp(t,e)}}function lY(e){return $D(e)?uI(Ic(e)):sBe(e)}function Ai(e){return typeof e=="function"?e:e==null?ws:typeof e=="object"?Pi(e)?oY(e[0],e[1]):aY(e):lY(e)}var oBe="Expected a function";function lBe(e){var t=e==null?0:e.length,i=Ai;return e=t?Wr(e,function(r){if(typeof r[1]!="function")throw new TypeError(oBe);return[i(r[0]),r[1]]}):[],Ni(function(r){for(var n=-1;++n<t;){var a=e[n];if(to(a[0],this,r))return to(a[1],this,r)}})}function cY(e,t,i){var r=i.length;if(e==null)return!r;for(e=Object(e);r--;){var n=i[r],a=t[n],s=e[n];if(s===void 0&&!(n in e)||!a(s))return!1}return!0}function cBe(e){var t=Kn(e);return function(i){return cY(i,e,t)}}var uBe=1;function dBe(e){return cBe(Oo(e,uBe))}function hBe(e,t){return t==null||cY(e,t,Kn(t))}function fBe(e,t,i,r){for(var n=-1,a=e==null?0:e.length;++n<a;){var s=e[n];t(r,s,i(s),e)}return r}function uY(e){return function(t,i,r){for(var n=-1,a=Object(t),s=r(t),o=s.length;o--;){var l=s[e?o:++n];if(i(a[l],l,a)===!1)break}return t}}var dI=uY();function Oc(e,t){return e&&dI(e,t,Kn)}function dY(e,t){return function(i,r){if(i==null)return i;if(!Vs(i))return e(i,r);for(var n=i.length,a=t?n:-1,s=Object(i);(t?a--:++a<n)&&r(s[a],a,s)!==!1;);return i}}var Dh=dY(Oc);function pBe(e,t,i,r){return Dh(e,function(n,a,s){t(r,n,i(n),s)}),r}function TS(e,t){return function(i,r){var n=Pi(i)?fBe:pBe,a=t?t():{};return n(i,e,Ai(r),a)}}var mBe=Object.prototype,vBe=mBe.hasOwnProperty,gBe=TS(function(e,t,i){vBe.call(e,i)?++e[i]:$u(e,i,1)});function yBe(e,t){var i=i0(e);return t==null?i:Wq(i,t)}var bBe=8;function hI(e,t,i){t=i?void 0:t;var r=Gu(e,bBe,void 0,void 0,void 0,void 0,void 0,t);return r.placeholder=hI.placeholder,r}hI.placeholder={};var wBe=16;function fI(e,t,i){t=i?void 0:t;var r=Gu(e,wBe,void 0,void 0,void 0,void 0,void 0,t);return r.placeholder=fI.placeholder,r}fI.placeholder={};var h2=function(){return da.Date.now()},xBe="Expected a function",_Be=Math.max,SBe=Math.min;function gs(e,t,i){var r,n,a,s,o,l,c=0,u=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(xBe);t=Io(t)||0,Gr(i)&&(u=!!i.leading,d="maxWait"in i,a=d?_Be(Io(i.maxWait)||0,t):a,h="trailing"in i?!!i.trailing:h);function f(_){var E=r,C=n;return r=n=void 0,c=_,s=e.apply(C,E),s}function p(_){return c=_,o=setTimeout(y,t),u?f(_):s}function m(_){var E=_-l,C=_-c,A=t-E;return d?SBe(A,a-C):A}function v(_){var E=_-l,C=_-c;return l===void 0||E>=t||E<0||d&&C>=a}function y(){var _=h2();if(v(_))return x(_);o=setTimeout(y,m(_))}function x(_){return o=void 0,h&&r?f(_):(r=n=void 0,s)}function b(){o!==void 0&&clearTimeout(o),c=0,r=l=n=o=void 0}function w(){return o===void 0?s:x(h2())}function S(){var _=h2(),E=v(_);if(r=arguments,n=this,l=_,E){if(o===void 0)return p(l);if(d)return clearTimeout(o),o=setTimeout(y,t),f(l)}return o===void 0&&(o=setTimeout(y,t)),s}return S.cancel=b,S.flush=w,S}function CBe(e,t){return e==null||e!==e?t:e}var hY=Object.prototype,EBe=hY.hasOwnProperty,ABe=Ni(function(e,t){e=Object(e);var i=-1,r=t.length,n=r>2?t[2]:void 0;for(n&&vs(t[0],t[1],n)&&(r=1);++i<r;)for(var a=t[i],s=Us(a),o=-1,l=s.length;++o<l;){var c=s[o],u=e[c];(u===void 0||Il(u,hY[c])&&!EBe.call(e,c))&&(e[c]=a[c])}return e});function fT(e,t,i){(i!==void 0&&!Il(e[t],i)||i===void 0&&!(t in e))&&$u(e,t,i)}function pn(e){return sn(e)&&Vs(e)}function pT(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function fY(e){return Dc(e,Us(e))}function MBe(e,t,i,r,n,a,s){var o=pT(e,i),l=pT(t,i),c=s.get(l);if(c){fT(e,i,c);return}var u=a?a(o,l,i+"",e,t,s):void 0,d=u===void 0;if(d){var h=Pi(l),f=!h&&dh(l),p=!h&&!f&&s0(l);u=l,h||f||p?Pi(o)?u=o:pn(o)?u=ks(o):f?(d=!1,u=$q(l,!0)):p?(d=!1,u=Yq(l,!0)):u=[]:_y(l)||Yf(l)?(u=o,Yf(o)?u=fY(o):(!Gr(o)||ju(o))&&(u=Kq(l))):d=!1}d&&(s.set(l,u),n(u,l,r,a,s),s.delete(l)),fT(e,i,u)}function PS(e,t,i,r,n){e!==t&&dI(t,function(a,s){if(n||(n=new yl),Gr(a))MBe(e,t,s,i,PS,r,n);else{var o=r?r(pT(e,s),a,s+"",e,t,n):void 0;o===void 0&&(o=a),fT(e,s,o)}},Us)}function pY(e,t,i,r,n,a){return Gr(e)&&Gr(t)&&(a.set(t,e),PS(e,t,void 0,pY,a),a.delete(t)),e}var mY=a0(function(e,t,i,r){PS(e,t,i,r)}),TBe=Ni(function(e){return e.push(void 0,pY),to(mY,void 0,e)}),PBe="Expected a function";function vY(e,t,i){if(typeof e!="function")throw new TypeError(PBe);return setTimeout(function(){e.apply(void 0,i)},t)}var DBe=Ni(function(e,t){return vY(e,1,t)}),IBe=Ni(function(e,t,i){return vY(e,Io(t)||0,i)});function pI(e,t,i){for(var r=-1,n=e==null?0:e.length;++r<n;)if(i(t,e[r]))return!0;return!1}var OBe=200;function Cy(e,t,i,r){var n=-1,a=wS,s=!0,o=e.length,l=[],c=t.length;if(!o)return l;i&&(t=Wr(t,io(i))),r?(a=pI,s=!1):t.length>=OBe&&(a=R1,s=!1,t=new Xf(t));e:for(;++n<o;){var u=e[n],d=i==null?u:i(u);if(u=r||u!==0?u:0,s&&d===d){for(var h=c;h--;)if(t[h]===d)continue e;l.push(u)}else a(t,d,r)||l.push(u)}return l}var RBe=Ni(function(e,t){return pn(e)?Cy(e,Da(t,1,pn,!0)):[]});function ro(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var kBe=Ni(function(e,t){var i=ro(t);return pn(i)&&(i=void 0),pn(e)?Cy(e,Da(t,1,pn,!0),Ai(i)):[]}),LBe=Ni(function(e,t){var i=ro(t);return pn(i)&&(i=void 0),pn(e)?Cy(e,Da(t,1,pn,!0),void 0,i):[]}),BBe=gS(function(e,t){return e/t},1);function NBe(e,t,i){var r=e==null?0:e.length;return r?(t=i||t===void 0?1:Ii(t),Vo(e,t<0?0:t,r)):[]}function FBe(e,t,i){var r=e==null?0:e.length;return r?(t=i||t===void 0?1:Ii(t),t=r-t,Vo(e,0,t<0?0:t)):[]}function DS(e,t,i,r){for(var n=e.length,a=r?n:-1;(r?a--:++a<n)&&t(e[a],a,e););return i?Vo(e,r?0:a,r?a+1:n):Vo(e,r?a+1:0,r?n:a)}function zBe(e,t){return e&&e.length?DS(e,Ai(t),!0,!0):[]}function VBe(e,t){return e&&e.length?DS(e,Ai(t),!0):[]}function Rc(e){return typeof e=="function"?e:ws}function $N(e,t){var i=Pi(e)?Go:Dh;return i(e,Rc(t))}function UBe(e,t){for(var i=e==null?0:e.length;i--&&t(e[i],i,e)!==!1;);return e}var gY=uY(!0);function mI(e,t){return e&&gY(e,t,Kn)}var yY=dY(mI,!0);function ZN(e,t){var i=Pi(e)?UBe:yY;return i(e,Rc(t))}function HBe(e,t,i){e=hr(e),t=eo(t);var r=e.length;i=i===void 0?r:pp(Ii(i),0,r);var n=i;return i-=t.length,i>=0&&e.slice(i,n)==t}function jBe(e,t){return Wr(t,function(i){return[i,e[i]]})}function WBe(e){var t=-1,i=Array(e.size);return e.forEach(function(r){i[++t]=[r,r]}),i}var GBe="[object Map]",$Be="[object Set]";function bY(e){return function(t){var i=xc(t);return i==GBe?sI(t):i==$Be?WBe(t):jBe(t,e(t))}}var qN=bY(Kn),YN=bY(Us),ZBe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},qBe=JD(ZBe),wY=/[&<>"']/g,YBe=RegExp(wY.source);function xY(e){return e=hr(e),e&&YBe.test(e)?e.replace(wY,qBe):e}var _Y=/[\\^$.*+?()[\]{}|]/g,KBe=RegExp(_Y.source);function XBe(e){return e=hr(e),e&&KBe.test(e)?e.replace(_Y,"\\$&"):e}function SY(e,t){for(var i=-1,r=e==null?0:e.length;++i<r;)if(!t(e[i],i,e))return!1;return!0}function QBe(e,t){var i=!0;return Dh(e,function(r,n,a){return i=!!t(r,n,a),i}),i}function JBe(e,t,i){var r=Pi(e)?SY:QBe;return i&&vs(e,t,i)&&(t=void 0),r(e,Ai(t))}var e9e=4294967295;function CY(e){return e?pp(Ii(e),0,e9e):0}function t9e(e,t,i,r){var n=e.length;for(i=Ii(i),i<0&&(i=-i>n?0:n+i),r=r===void 0||r>n?n:Ii(r),r<0&&(r+=n),r=i>r?0:CY(r);i<r;)e[i++]=t;return e}function i9e(e,t,i,r){var n=e==null?0:e.length;return n?(i&&typeof i!="number"&&vs(e,t,i)&&(i=0,r=n),t9e(e,t,i,r)):[]}function EY(e,t){var i=[];return Dh(e,function(r,n,a){t(r,n,a)&&i.push(r)}),i}function r9e(e,t){var i=Pi(e)?Ph:EY;return i(e,Ai(t))}function AY(e){return function(t,i,r){var n=Object(t);if(!Vs(t)){var a=Ai(i);t=Kn(t),i=function(o){return a(n[o],o,n)}}var s=e(t,i,r);return s>-1?n[a?t[s]:s]:void 0}}var n9e=Math.max;function MY(e,t,i){var r=e==null?0:e.length;if(!r)return-1;var n=i==null?0:Ii(i);return n<0&&(n=n9e(r+n,0)),bS(e,Ai(t),n)}var a9e=AY(MY);function TY(e,t,i){var r;return i(e,function(n,a,s){if(t(n,a,s))return r=a,!1}),r}function s9e(e,t){return TY(e,Ai(t),Oc)}var o9e=Math.max,l9e=Math.min;function IS(e,t,i){var r=e==null?0:e.length;if(!r)return-1;var n=r-1;return i!==void 0&&(n=Ii(i),n=i<0?o9e(r+n,0):l9e(n,r-1)),bS(e,Ai(t),n,!0)}var c9e=AY(IS);function u9e(e,t){return TY(e,Ai(t),mI)}function KN(e){return e&&e.length?e[0]:void 0}function PY(e,t){var i=-1,r=Vs(e)?Array(e.length):[];return Dh(e,function(n,a,s){r[++i]=t(n,a,s)}),r}function OS(e,t){var i=Pi(e)?Wr:PY;return i(e,Ai(t))}function DY(e,t){return Da(OS(e,t),1)}var d9e=1/0;function h9e(e,t){return Da(OS(e,t),d9e)}function f9e(e,t,i){return i=i===void 0?1:Ii(i),Da(OS(e,t),i)}var p9e=1/0;function IY(e){var t=e==null?0:e.length;return t?Da(e,p9e):[]}function m9e(e,t){var i=e==null?0:e.length;return i?(t=t===void 0?1:Ii(t),Da(e,t)):[]}var v9e=512;function g9e(e){return Gu(e,v9e)}var y9e=eI("floor"),b9e="Expected a function",w9e=8,x9e=32,_9e=128,S9e=256;function OY(e){return Yu(function(t){var i=t.length,r=i,n=Fo.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if(typeof a!="function")throw new TypeError(b9e);if(n&&!s&&d2(a)=="wrapper")var s=new Fo([],!0)}for(r=s?r:i;++r<i;){a=t[r];var o=d2(a),l=o=="wrapper"?VD(a):void 0;l&&sT(l[0])&&l[1]==(_9e|w9e|x9e|S9e)&&!l[4].length&&l[9]==1?s=s[d2(l[0])].apply(s,l[3]):s=a.length==1&&sT(a)?s[o]():s.thru(a)}return function(){var c=arguments,u=c[0];if(s&&c.length==1&&Pi(u))return s.plant(u).value();for(var d=0,h=i?t[d].apply(this,c):u;++d<i;)h=t[d].call(this,h);return h}})}var C9e=OY(),E9e=OY(!0);function A9e(e,t){return e==null?e:dI(e,Rc(t),Us)}function M9e(e,t){return e==null?e:gY(e,Rc(t),Us)}function T9e(e,t){return e&&Oc(e,Rc(t))}function P9e(e,t){return e&&mI(e,Rc(t))}function Cv(e){for(var t=-1,i=e==null?0:e.length,r={};++t<i;){var n=e[t];r[n[0]]=n[1]}return r}function RS(e,t){return Ph(t,function(i){return ju(e[i])})}function D9e(e){return e==null?[]:RS(e,Kn(e))}function I9e(e){return e==null?[]:RS(e,Us(e))}var O9e=Object.prototype,R9e=O9e.hasOwnProperty,k9e=TS(function(e,t,i){R9e.call(e,i)?e[i].push(t):$u(e,i,[t])});function vI(e,t){return e>t}function kS(e){return function(t,i){return typeof t=="string"&&typeof i=="string"||(t=Io(t),i=Io(i)),e(t,i)}}var L9e=kS(vI),B9e=kS(function(e,t){return e>=t}),N9e=Object.prototype,F9e=N9e.hasOwnProperty;function z9e(e,t){return e!=null&&F9e.call(e,t)}function V9e(e,t){return e!=null&&sY(e,t,z9e)}var U9e=Math.max,H9e=Math.min;function j9e(e,t,i){return e>=H9e(t,i)&&e<U9e(t,i)}function W9e(e,t,i){return t=Eu(t),i===void 0?(i=t,t=0):i=Eu(i),e=Io(e),j9e(e,t,i)}var G9e="[object String]";function LS(e){return typeof e=="string"||!Pi(e)&&sn(e)&&bs(e)==G9e}function gI(e,t){return Wr(t,function(i){return e[i]})}function c0(e){return e==null?[]:gI(e,Kn(e))}var $9e=Math.max;function Z9e(e,t,i,r){e=Vs(e)?e:c0(e),i=i&&!r?Ii(i):0;var n=e.length;return i<0&&(i=$9e(n+i,0)),LS(e)?i<=n&&e.indexOf(t,i)>-1:!!n&&r0(e,t,i)>-1}var q9e=Math.max;function Y9e(e,t,i){var r=e==null?0:e.length;if(!r)return-1;var n=i==null?0:Ii(i);return n<0&&(n=q9e(r+n,0)),r0(e,t,n)}function K9e(e){var t=e==null?0:e.length;return t?Vo(e,0,-1):[]}var X9e=Math.min;function yI(e,t,i){for(var r=i?pI:wS,n=e[0].length,a=e.length,s=a,o=Array(a),l=1/0,c=[];s--;){var u=e[s];s&&t&&(u=Wr(u,io(t))),l=X9e(u.length,l),o[s]=!i&&(t||n>=120&&u.length>=120)?new Xf(s&&u):void 0}u=e[0];var d=-1,h=o[0];e:for(;++d<n&&c.length<l;){var f=u[d],p=t?t(f):f;if(f=i||f!==0?f:0,!(h?R1(h,p):r(c,p,i))){for(s=a;--s;){var m=o[s];if(!(m?R1(m,p):r(e[s],p,i)))continue e}h&&h.push(p),c.push(f)}}return c}function bI(e){return pn(e)?e:[]}var Q9e=Ni(function(e){var t=Wr(e,bI);return t.length&&t[0]===e[0]?yI(t):[]}),J9e=Ni(function(e){var t=ro(e),i=Wr(e,bI);return t===ro(i)?t=void 0:i.pop(),i.length&&i[0]===e[0]?yI(i,Ai(t)):[]}),eNe=Ni(function(e){var t=ro(e),i=Wr(e,bI);return t=typeof t=="function"?t:void 0,t&&i.pop(),i.length&&i[0]===e[0]?yI(i,void 0,t):[]});function tNe(e,t,i,r){return Oc(e,function(n,a,s){t(r,i(n),a,s)}),r}function RY(e,t){return function(i,r){return tNe(i,e,t(r),{})}}var iNe=Object.prototype,rNe=iNe.toString,nNe=RY(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=rNe.call(t)),e[t]=i},UD(ws)),kY=Object.prototype,aNe=kY.hasOwnProperty,sNe=kY.toString,oNe=RY(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=sNe.call(t)),aNe.call(e,t)?e[t].push(i):e[t]=[i]},Ai);function LY(e,t){return t.length<2?e:fp(e,Vo(t,0,-1))}function Ey(e,t,i){t=Ah(t,e),e=LY(e,t);var r=e==null?e:e[Ic(ro(t))];return r==null?void 0:to(r,e,i)}var lNe=Ni(Ey),cNe=Ni(function(e,t,i){var r=-1,n=typeof t=="function",a=Vs(e)?Array(e.length):[];return Dh(e,function(s){a[++r]=n?to(t,s,i):Ey(s,t,i)}),a}),uNe="[object ArrayBuffer]";function dNe(e){return sn(e)&&bs(e)==uNe}var XN=zo&&zo.isArrayBuffer,hNe=XN?io(XN):dNe,fNe="[object Boolean]";function pNe(e){return e===!0||e===!1||sn(e)&&bs(e)==fNe}var mNe="[object Date]";function vNe(e){return sn(e)&&bs(e)==mNe}var QN=zo&&zo.isDate,gNe=QN?io(QN):vNe;function yNe(e){return sn(e)&&e.nodeType===1&&!_y(e)}var bNe="[object Map]",wNe="[object Set]",xNe=Object.prototype,_Ne=xNe.hasOwnProperty;function SNe(e){if(e==null)return!0;if(Vs(e)&&(Pi(e)||typeof e=="string"||typeof e.splice=="function"||dh(e)||s0(e)||Yf(e)))return!e.length;var t=xc(e);if(t==bNe||t==wNe)return!e.size;if(wy(e))return!GD(e).length;for(var i in e)if(_Ne.call(e,i))return!1;return!0}function jn(e,t){return Sy(e,t)}function CNe(e,t,i){i=typeof i=="function"?i:void 0;var r=i?i(e,t):void 0;return r===void 0?Sy(e,t,void 0,i):!!r}var ENe=da.isFinite;function ANe(e){return typeof e=="number"&&ENe(e)}function BY(e){return typeof e=="number"&&e==Ii(e)}function MNe(e,t){return e===t||oI(e,t,lI(t))}function TNe(e,t,i){return i=typeof i=="function"?i:void 0,oI(e,t,lI(t),i)}var PNe="[object Number]";function NY(e){return typeof e=="number"||sn(e)&&bs(e)==PNe}function DNe(e){return NY(e)&&e!=+e}var INe=u2?ju:WD,ONe="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function RNe(e){if(INe(e))throw new Error(ONe);return JZ(e)}function mn(e){return e==null}function kNe(e){return e===null}var LNe="[object RegExp]";function BNe(e){return sn(e)&&bs(e)==LNe}var JN=zo&&zo.isRegExp,wI=JN?io(JN):BNe,eF=9007199254740991;function NNe(e){return BY(e)&&e>=-eF&&e<=eF}function xI(e){return e===void 0}var FNe="[object WeakMap]";function zNe(e){return sn(e)&&xc(e)==FNe}var VNe="[object WeakSet]";function UNe(e){return sn(e)&&bs(e)==VNe}var HNe=1;function jNe(e){return Ai(typeof e=="function"?e:Oo(e,HNe))}var WNe=Array.prototype,GNe=WNe.join;function $Ne(e,t){return e==null?"":GNe.call(e,t)}var ZNe=l0(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),qNe=TS(function(e,t,i){$u(e,i,t)});function YNe(e,t,i){for(var r=i+1;r--;)if(e[r]===t)return r;return r}var KNe=Math.max,XNe=Math.min;function QNe(e,t,i){var r=e==null?0:e.length;if(!r)return-1;var n=r;return i!==void 0&&(n=Ii(i),n=n<0?KNe(r+n,0):XNe(n,r-1)),t===t?YNe(e,t,n):bS(e,sq,n,!0)}var JNe=l0(function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}),eFe=Aq("toLowerCase");function _I(e,t){return e<t}var tFe=kS(_I),iFe=kS(function(e,t){return e<=t});function rFe(e,t){var i={};return t=Ai(t),Oc(e,function(r,n,a){$u(i,t(r,n,a),r)}),i}function nFe(e,t){var i={};return t=Ai(t),Oc(e,function(r,n,a){$u(i,n,t(r,n,a))}),i}var aFe=1;function sFe(e){return aY(Oo(e,aFe))}var oFe=1;function lFe(e,t){return oY(e,Oo(t,oFe))}function BS(e,t,i){for(var r=-1,n=e.length;++r<n;){var a=e[r],s=t(a);if(s!=null&&(o===void 0?s===s&&!Js(s):i(s,o)))var o=s,l=a}return l}function cFe(e){return e&&e.length?BS(e,ws,vI):void 0}function uFe(e,t){return e&&e.length?BS(e,Ai(t),vI):void 0}function SI(e,t){for(var i,r=-1,n=e.length;++r<n;){var a=t(e[r]);a!==void 0&&(i=i===void 0?a:i+a)}return i}var dFe=NaN;function FY(e,t){var i=e==null?0:e.length;return i?SI(e,t)/i:dFe}function hFe(e){return FY(e,ws)}function fFe(e,t){return FY(e,Ai(t))}var CI=a0(function(e,t,i){PS(e,t,i)}),pFe=Ni(function(e,t){return function(i){return Ey(i,e,t)}}),mFe=Ni(function(e,t){return function(i){return Ey(e,i,t)}});function vFe(e){return e&&e.length?BS(e,ws,_I):void 0}function gFe(e,t){return e&&e.length?BS(e,Ai(t),_I):void 0}function zY(e,t,i){var r=Kn(t),n=RS(t,r),a=!(Gr(i)&&"chain"in i)||!!i.chain,s=ju(e);return Go(n,function(o){var l=t[o];e[o]=l,s&&(e.prototype[o]=function(){var c=this.__chain__;if(a||c){var u=e(this.__wrapped__),d=u.__actions__=ks(this.__actions__);return d.push({func:l,args:arguments,thisArg:e}),u.__chain__=c,u}return l.apply(e,Mh([this.value()],arguments))})}),e}var yFe=gS(function(e,t){return e*t},1),bFe="Expected a function";function Ay(e){if(typeof e!="function")throw new TypeError(bFe);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function wFe(e){for(var t,i=[];!(t=e.next()).done;)i.push(t.value);return i}var xFe="[object Map]",_Fe="[object Set]",j4=$a?$a.iterator:void 0;function VY(e){if(!e)return[];if(Vs(e))return LS(e)?Al(e):ks(e);if(j4&&e[j4])return wFe(e[j4]());var t=xc(e),i=t==xFe?sI:t==_Fe?MS:c0;return i(e)}function SFe(){this.__values__===void 0&&(this.__values__=VY(this.value()));var e=this.__index__>=this.__values__.length,t=e?void 0:this.__values__[this.__index__++];return{done:e,value:t}}function UY(e,t){var i=e.length;if(i)return t+=t<0?i:0,Wu(t,i)?e[t]:void 0}function CFe(e,t){return e&&e.length?UY(e,Ii(t)):void 0}function EFe(e){return e=Ii(e),Ni(function(t){return UY(t,e)})}function EI(e,t){return t=Ah(t,e),e=LY(e,t),e==null||delete e[Ic(ro(t))]}function AFe(e){return _y(e)?void 0:e}var MFe=1,TFe=2,PFe=4,HY=Yu(function(e,t){var i={};if(e==null)return i;var r=!1;t=Wr(t,function(a){return a=Ah(a,e),r||(r=a.length>1),a}),Dc(e,rI(e),i),r&&(i=Oo(i,MFe|TFe|PFe,AFe));for(var n=t.length;n--;)EI(i,t[n]);return i});function My(e,t,i,r){if(!Gr(e))return e;t=Ah(t,e);for(var n=-1,a=t.length,s=a-1,o=e;o!=null&&++n<a;){var l=Ic(t[n]),c=i;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(n!=s){var u=o[l];c=r?r(u,l,o):void 0,c===void 0&&(c=Gr(u)?u:Wu(t[n+1])?[]:{})}by(o,l,c),o=o[l]}return e}function jY(e,t,i){for(var r=-1,n=t.length,a={};++r<n;){var s=t[r],o=fp(e,s);i(o,s)&&My(a,Ah(s,e),o)}return a}function WY(e,t){if(e==null)return{};var i=Wr(rI(e),function(r){return[r]});return t=Ai(t),jY(e,i,function(r,n){return t(r,n[0])})}function DFe(e,t){return WY(e,Ay(Ai(t)))}function IFe(e){return bq(2,e)}function OFe(e,t){var i=e.length;for(e.sort(t);i--;)e[i]=e[i].value;return e}function GY(e,t){if(e!==t){var i=e!==void 0,r=e===null,n=e===e,a=Js(e),s=t!==void 0,o=t===null,l=t===t,c=Js(t);if(!o&&!c&&!a&&e>t||a&&s&&l&&!o&&!c||r&&s&&l||!i&&l||!n)return 1;if(!r&&!a&&!c&&e<t||c&&i&&n&&!r&&!a||o&&i&&n||!s&&n||!l)return-1}return 0}function RFe(e,t,i){for(var r=-1,n=e.criteria,a=t.criteria,s=n.length,o=i.length;++r<s;){var l=GY(n[r],a[r]);if(l){if(r>=o)return l;var c=i[r];return l*(c=="desc"?-1:1)}}return e.index-t.index}function $Y(e,t,i){t.length?t=Wr(t,function(a){return Pi(a)?function(s){return fp(s,a.length===1?a[0]:a)}:a}):t=[ws];var r=-1;t=Wr(t,io(Ai));var n=PY(e,function(a,s,o){var l=Wr(t,function(c){return c(a)});return{criteria:l,index:++r,value:a}});return OFe(n,function(a,s){return RFe(a,s,i)})}function kFe(e,t,i,r){return e==null?[]:(Pi(t)||(t=t==null?[]:[t]),i=r?void 0:i,Pi(i)||(i=i==null?[]:[i]),$Y(e,t,i))}function AI(e){return Yu(function(t){return t=Wr(t,io(Ai)),Ni(function(i){var r=this;return e(t,function(n){return to(n,r,i)})})})}var LFe=AI(Wr),BFe=Ni,NFe=Math.min,FFe=BFe(function(e,t){t=t.length==1&&Pi(t[0])?Wr(t[0],io(Ai)):Wr(Da(t,1),io(Ai));var i=t.length;return Ni(function(r){for(var n=-1,a=NFe(r.length,i);++n<a;)r[n]=t[n].call(this,r[n]);return to(e,this,r)})}),zFe=AI(SY),VFe=AI(aI),UFe=9007199254740991,HFe=Math.floor;function mT(e,t){var i="";if(!e||t<1||t>UFe)return i;do t%2&&(i+=e),t=HFe(t/2),t&&(e+=e);while(t);return i}var jFe=uI("length"),ZY="\\ud800-\\udfff",WFe="\\u0300-\\u036f",GFe="\\ufe20-\\ufe2f",$Fe="\\u20d0-\\u20ff",ZFe=WFe+GFe+$Fe,qFe="\\ufe0e\\ufe0f",YFe="["+ZY+"]",vT="["+ZFe+"]",gT="\\ud83c[\\udffb-\\udfff]",KFe="(?:"+vT+"|"+gT+")",qY="[^"+ZY+"]",YY="(?:\\ud83c[\\udde6-\\uddff]){2}",KY="[\\ud800-\\udbff][\\udc00-\\udfff]",XFe="\\u200d",XY=KFe+"?",QY="["+qFe+"]?",QFe="(?:"+XFe+"(?:"+[qY,YY,KY].join("|")+")"+QY+XY+")*",JFe=QY+XY+QFe,eze="(?:"+[qY+vT+"?",vT,YY,KY,YFe].join("|")+")",tF=RegExp(gT+"(?="+gT+")|"+eze+JFe,"g");function tze(e){for(var t=tF.lastIndex=0;tF.test(e);)++t;return t}function u0(e){return o0(e)?tze(e):jFe(e)}var ize=Math.ceil;function r_(e,t){t=t===void 0?" ":eo(t);var i=t.length;if(i<2)return i?mT(t,e):t;var r=mT(t,ize(e/u0(t)));return o0(t)?Th(Al(r),0,e).join(""):r.slice(0,e)}var rze=Math.ceil,nze=Math.floor;function aze(e,t,i){e=hr(e),t=Ii(t);var r=t?u0(e):0;if(!t||r>=t)return e;var n=(t-r)/2;return r_(nze(n),i)+e+r_(rze(n),i)}function sze(e,t,i){e=hr(e),t=Ii(t);var r=t?u0(e):0;return t&&r<t?e+r_(t-r,i):e}function oze(e,t,i){e=hr(e),t=Ii(t);var r=t?u0(e):0;return t&&r<t?r_(t-r,i)+e:e}var lze=/^\s+/,cze=da.parseInt;function uze(e,t,i){return i||t==null?t=0:t&&(t=+t),cze(hr(e).replace(lze,""),t||0)}var dze=32,NS=Ni(function(e,t){var i=uh(t,n0(NS));return Gu(e,dze,void 0,t,i)});NS.placeholder={};var hze=64,MI=Ni(function(e,t){var i=uh(t,n0(MI));return Gu(e,hze,void 0,t,i)});MI.placeholder={};var fze=TS(function(e,t,i){e[i?0:1].push(t)},function(){return[[],[]]});function pze(e,t){return jY(e,t,function(i,r){return cI(e,r)})}var Co=Yu(function(e,t){return e==null?{}:pze(e,t)});function mze(e){for(var t,i=this;i instanceof yS;){var r=rq(i);r.__index__=0,r.__values__=void 0,t?n.__wrapped__=r:t=r;var n=r;i=i.__wrapped__}return n.__wrapped__=e,t}function vze(e){return function(t){return e==null?void 0:fp(e,t)}}function gze(e,t,i,r){for(var n=i-1,a=e.length;++n<a;)if(r(e[n],t))return n;return-1}var yze=Array.prototype,iF=yze.splice;function TI(e,t,i,r){var n=r?gze:r0,a=-1,s=t.length,o=e;for(e===t&&(t=ks(t)),i&&(o=Wr(e,io(i)));++a<s;)for(var l=0,c=t[a],u=i?i(c):c;(l=n(o,u,l,r))>-1;)o!==e&&iF.call(o,l,1),iF.call(e,l,1);return e}function JY(e,t){return e&&e.length&&t&&t.length?TI(e,t):e}var bze=Ni(JY);function wze(e,t,i){return e&&e.length&&t&&t.length?TI(e,t,Ai(i)):e}function xze(e,t,i){return e&&e.length&&t&&t.length?TI(e,t,void 0,i):e}var _ze=Array.prototype,Sze=_ze.splice;function eK(e,t){for(var i=e?t.length:0,r=i-1;i--;){var n=t[i];if(i==r||n!==a){var a=n;Wu(n)?Sze.call(e,n,1):EI(e,n)}}return e}var Cze=Yu(function(e,t){var i=e==null?0:e.length,r=ZD(e,t);return eK(e,Wr(t,function(n){return Wu(n,i)?+n:n}).sort(GY)),r}),Eze=Math.floor,Aze=Math.random;function PI(e,t){return e+Eze(Aze()*(t-e+1))}var Mze=parseFloat,Tze=Math.min,Pze=Math.random;function Dze(e,t,i){if(i&&typeof i!="boolean"&&vs(e,t,i)&&(t=i=void 0),i===void 0&&(typeof t=="boolean"?(i=t,t=void 0):typeof e=="boolean"&&(i=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=Eu(e),t===void 0?(t=e,e=0):t=Eu(t)),e>t){var r=e;e=t,t=r}if(i||e%1||t%1){var n=Pze();return Tze(e+n*(t-e+Mze("1e-"+((n+"").length-1))),t)}return PI(e,t)}var Ize=Math.ceil,Oze=Math.max;function Rze(e,t,i,r){for(var n=-1,a=Oze(Ize((t-e)/(i||1)),0),s=Array(a);a--;)s[r?a:++n]=e,e+=i;return s}function tK(e){return function(t,i,r){return r&&typeof r!="number"&&vs(t,i,r)&&(i=r=void 0),t=Eu(t),i===void 0?(i=t,t=0):i=Eu(i),r=r===void 0?t<i?1:-1:Eu(r),Rze(t,i,r,e)}}var kze=tK(),Lze=tK(!0),Bze=256,Nze=Yu(function(e,t){return Gu(e,Bze,void 0,void 0,void 0,t)});function iK(e,t,i,r,n){return n(e,function(a,s,o){i=r?(r=!1,a):t(i,a,s,o)}),i}function Fze(e,t,i){var r=Pi(e)?QD:iK,n=arguments.length<3;return r(e,Ai(t),i,n,Dh)}function zze(e,t,i,r){var n=e==null?0:e.length;for(r&&n&&(i=e[--n]);n--;)i=t(i,e[n],n,e);return i}function Vze(e,t,i){var r=Pi(e)?zze:iK,n=arguments.length<3;return r(e,Ai(t),i,n,yY)}function Uze(e,t){var i=Pi(e)?Ph:EY;return i(e,Ay(Ai(t)))}function Hze(e,t){var i=[];if(!(e&&e.length))return i;var r=-1,n=[],a=e.length;for(t=Ai(t);++r<a;){var s=e[r];t(s,r,e)&&(i.push(s),n.push(r))}return eK(e,n),i}function jze(e,t,i){return(i?vs(e,t,i):t===void 0)?t=1:t=Ii(t),mT(hr(e),t)}function Wze(){var e=arguments,t=hr(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var Gze="Expected a function";function $ze(e,t){if(typeof e!="function")throw new TypeError(Gze);return t=t===void 0?t:Ii(t),Ni(e,t)}function Zze(e,t,i){t=Ah(t,e);var r=-1,n=t.length;for(n||(n=1,e=void 0);++r<n;){var a=e==null?void 0:e[Ic(t[r])];a===void 0&&(r=n,a=i),e=ju(a)?a.call(e):a}return e}var qze=Array.prototype,Yze=qze.reverse;function yT(e){return e==null?e:Yze.call(e)}var Kze=eI("round");function rK(e){var t=e.length;return t?e[PI(0,t-1)]:void 0}function Xze(e){return rK(c0(e))}function Qze(e){var t=Pi(e)?rK:Xze;return t(e)}function FS(e,t){var i=-1,r=e.length,n=r-1;for(t=t===void 0?r:t;++i<t;){var a=PI(i,n),s=e[a];e[a]=e[i],e[i]=s}return e.length=t,e}function Jze(e,t){return FS(ks(e),pp(t,0,e.length))}function eVe(e,t){var i=c0(e);return FS(i,pp(t,0,i.length))}function tVe(e,t,i){(i?vs(e,t,i):t===void 0)?t=1:t=Ii(t);var r=Pi(e)?Jze:eVe;return r(e,t)}function nK(e,t,i){return e==null?e:My(e,t,i)}function iVe(e,t,i,r){return r=typeof r=="function"?r:void 0,e==null?e:My(e,t,i,r)}function rVe(e){return FS(ks(e))}function nVe(e){return FS(c0(e))}function aVe(e){var t=Pi(e)?rVe:nVe;return t(e)}var sVe="[object Map]",oVe="[object Set]";function lVe(e){if(e==null)return 0;if(Vs(e))return LS(e)?u0(e):e.length;var t=xc(e);return t==sVe||t==oVe?e.size:GD(e).length}function cVe(e,t,i){var r=e==null?0:e.length;return r?(i&&typeof i!="number"&&vs(e,t,i)?(t=0,i=r):(t=t==null?0:Ii(t),i=i===void 0?r:Ii(i)),Vo(e,t,i)):[]}var uVe=l0(function(e,t,i){return e+(i?"_":"")+t.toLowerCase()});function dVe(e,t){var i;return Dh(e,function(r,n,a){return i=t(r,n,a),!i}),!!i}function hVe(e,t,i){var r=Pi(e)?aI:dVe;return i&&vs(e,t,i)&&(t=void 0),r(e,Ai(t))}var fVe=Ni(function(e,t){if(e==null)return[];var i=t.length;return i>1&&vs(e,t[0],t[1])?t=[]:i>2&&vs(t[0],t[1],t[2])&&(t=[t[0]]),$Y(e,Da(t,1),[])}),pVe=4294967295,mVe=pVe-1,vVe=Math.floor,gVe=Math.min;function DI(e,t,i,r){var n=0,a=e==null?0:e.length;if(a===0)return 0;t=i(t);for(var s=t!==t,o=t===null,l=Js(t),c=t===void 0;n<a;){var u=vVe((n+a)/2),d=i(e[u]),h=d!==void 0,f=d===null,p=d===d,m=Js(d);if(s)var v=r||p;else c?v=p&&(r||h):o?v=p&&h&&(r||!f):l?v=p&&h&&!f&&(r||!m):f||m?v=!1:v=r?d<=t:d<t;v?n=u+1:a=u}return gVe(a,mVe)}var yVe=4294967295,bVe=yVe>>>1;function zS(e,t,i){var r=0,n=e==null?r:e.length;if(typeof t=="number"&&t===t&&n<=bVe){for(;r<n;){var a=r+n>>>1,s=e[a];s!==null&&!Js(s)&&(i?s<=t:s<t)?r=a+1:n=a}return n}return DI(e,t,ws,i)}function wVe(e,t){return zS(e,t)}function xVe(e,t,i){return DI(e,t,Ai(i))}function _Ve(e,t){var i=e==null?0:e.length;if(i){var r=zS(e,t);if(r<i&&Il(e[r],t))return r}return-1}function SVe(e,t){return zS(e,t,!0)}function CVe(e,t,i){return DI(e,t,Ai(i),!0)}function EVe(e,t){var i=e==null?0:e.length;if(i){var r=zS(e,t,!0)-1;if(Il(e[r],t))return r}return-1}function aK(e,t){for(var i=-1,r=e.length,n=0,a=[];++i<r;){var s=e[i],o=t?t(s):s;if(!i||!Il(o,l)){var l=o;a[n++]=s===0?0:s}}return a}function AVe(e){return e&&e.length?aK(e):[]}function MVe(e,t){return e&&e.length?aK(e,Ai(t)):[]}var TVe=4294967295;function PVe(e,t,i){return i&&typeof i!="number"&&vs(e,t,i)&&(t=i=void 0),i=i===void 0?TVe:i>>>0,i?(e=hr(e),e&&(typeof t=="string"||t!=null&&!wI(t))&&(t=eo(t),!t&&o0(e))?Th(Al(e),0,i):e.split(t,i)):[]}var DVe="Expected a function",IVe=Math.max;function OVe(e,t){if(typeof e!="function")throw new TypeError(DVe);return t=t==null?0:IVe(Ii(t),0),Ni(function(i){var r=i[t],n=Th(i,0,t);return r&&Mh(n,r),to(e,this,n)})}var RVe=l0(function(e,t,i){return e+(i?" ":"")+XD(t)});function kVe(e,t,i){return e=hr(e),i=i==null?0:pp(Ii(i),0,e.length),t=eo(t),e.slice(i,i+t.length)==t}function LVe(){return{}}function BVe(){return""}function NVe(){return!0}var FVe=gS(function(e,t){return e-t},0);function zVe(e){return e&&e.length?SI(e,ws):0}function VVe(e,t){return e&&e.length?SI(e,Ai(t)):0}function UVe(e){var t=e==null?0:e.length;return t?Vo(e,1,t):[]}function HVe(e,t,i){return e&&e.length?(t=i||t===void 0?1:Ii(t),Vo(e,0,t<0?0:t)):[]}function jVe(e,t,i){var r=e==null?0:e.length;return r?(t=i||t===void 0?1:Ii(t),t=r-t,Vo(e,t<0?0:t,r)):[]}function WVe(e,t){return e&&e.length?DS(e,Ai(t),!1,!0):[]}function GVe(e,t){return e&&e.length?DS(e,Ai(t)):[]}function $Ve(e,t){return t(e),e}var sK=Object.prototype,ZVe=sK.hasOwnProperty;function rF(e,t,i,r){return e===void 0||Il(e,sK[i])&&!ZVe.call(r,i)?t:e}var qVe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function YVe(e){return"\\"+qVe[e]}var oK=/<%=([\s\S]+?)%>/g,KVe=/<%-([\s\S]+?)%>/g,XVe=/<%([\s\S]+?)%>/g,bT={escape:KVe,evaluate:XVe,interpolate:oK,variable:"",imports:{_:{escape:xY}}},QVe="Invalid `variable` option passed into `_.template`",JVe=/\b__p \+= '';/g,eUe=/\b(__p \+=) '' \+/g,tUe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,iUe=/[()=,{}\[\]\/\s]/,rUe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_w=/($^)/,nUe=/['\n\r\u2028\u2029\\]/g,aUe=Object.prototype,nF=aUe.hasOwnProperty;function sUe(e,t,i){var r=bT.imports._.templateSettings||bT;i&&vs(e,t,i)&&(t=void 0),e=hr(e),t=t_({},t,r,rF);var n=t_({},t.imports,r.imports,rF),a=Kn(n),s=gI(n,a),o,l,c=0,u=t.interpolate||_w,d="__p += '",h=RegExp((t.escape||_w).source+"|"+u.source+"|"+(u===oK?rUe:_w).source+"|"+(t.evaluate||_w).source+"|$","g"),f=nF.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+`
`:"";e.replace(h,function(v,y,x,b,w,S){return x||(x=b),d+=e.slice(c,S).replace(nUe,YVe),y&&(o=!0,d+=`' +
__e(`+y+`) +
'`),w&&(l=!0,d+=`';
`+w+`;
__p += '`),x&&(d+=`' +
((__t = (`+x+`)) == null ? '' : __t) +
'`),c=S+v.length,v}),d+=`';
`;var p=nF.call(t,"variable")&&t.variable;if(!p)d=`with (obj) {
`+d+`
}
`;else if(iUe.test(p))throw new Error(QVe);d=(l?d.replace(JVe,""):d).replace(eUe,"$1").replace(tUe,"$1;"),d="function("+(p||"obj")+`) {
`+(p?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(o?", __e = _.escape":"")+(l?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+d+`return __p
}`;var m=yq(function(){return Function(a,f+"return "+d).apply(void 0,s)});if(m.source=d,YD(m))throw m;return m}var oUe="Expected a function";function Jd(e,t,i){var r=!0,n=!0;if(typeof e!="function")throw new TypeError(oUe);return Gr(i)&&(r="leading"in i?!!i.leading:r,n="trailing"in i?!!i.trailing:n),gs(e,t,{leading:r,maxWait:t,trailing:n})}function Ty(e,t){return t(e)}var lUe=9007199254740991,W4=4294967295,cUe=Math.min;function uUe(e,t){if(e=Ii(e),e<1||e>lUe)return[];var i=W4,r=cUe(e,W4);t=Rc(t),e-=W4;for(var n=jD(r,t);++i<e;)t(i);return n}function dUe(){return this}function lK(e,t){var i=e;return i instanceof Zi&&(i=i.value()),QD(t,function(r,n){return n.func.apply(n.thisArg,Mh([r],n.args))},i)}function G4(){return lK(this.__wrapped__,this.__actions__)}function hUe(e){return hr(e).toLowerCase()}function fUe(e){return Pi(e)?Wr(e,Ic):Js(e)?[e]:ks(vq(hr(e)))}var aF=9007199254740991;function pUe(e){return e?pp(Ii(e),-aF,aF):e===0?e:0}function mUe(e){return hr(e).toUpperCase()}function vUe(e,t,i){var r=Pi(e),n=r||dh(e)||s0(e);if(t=Ai(t),i==null){var a=e&&e.constructor;n?i=r?new a:[]:Gr(e)?i=ju(a)?i0(ES(e)):{}:i={}}return(n?Go:Oc)(e,function(s,o,l){return t(i,s,o,l)}),i}function cK(e,t){for(var i=e.length;i--&&r0(t,e[i],0)>-1;);return i}function uK(e,t){for(var i=-1,r=e.length;++i<r&&r0(t,e[i],0)>-1;);return i}function gUe(e,t,i){if(e=hr(e),e&&(i||t===void 0))return QZ(e);if(!e||!(t=eo(t)))return e;var r=Al(e),n=Al(t),a=uK(r,n),s=cK(r,n)+1;return Th(r,a,s).join("")}function yUe(e,t,i){if(e=hr(e),e&&(i||t===void 0))return e.slice(0,XZ(e)+1);if(!e||!(t=eo(t)))return e;var r=Al(e),n=cK(r,Al(t))+1;return Th(r,0,n).join("")}var bUe=/^\s+/;function wUe(e,t,i){if(e=hr(e),e&&(i||t===void 0))return e.replace(bUe,"");if(!e||!(t=eo(t)))return e;var r=Al(e),n=uK(r,Al(t));return Th(r,n).join("")}var xUe=30,_Ue="...",SUe=/\w*$/;function CUe(e,t){var i=xUe,r=_Ue;if(Gr(t)){var n="separator"in t?t.separator:n;i="length"in t?Ii(t.length):i,r="omission"in t?eo(t.omission):r}e=hr(e);var a=e.length;if(o0(e)){var s=Al(e);a=s.length}if(i>=a)return e;var o=i-u0(r);if(o<1)return r;var l=s?Th(s,0,o).join(""):e.slice(0,o);if(n===void 0)return l+r;if(s&&(o+=l.length-o),wI(n)){if(e.slice(o).search(n)){var c,u=l;for(n.global||(n=RegExp(n.source,hr(SUe.exec(n))+"g")),n.lastIndex=0;c=n.exec(u);)var d=c.index;l=l.slice(0,d===void 0?o:d)}}else if(e.indexOf(eo(n),o)!=o){var h=l.lastIndexOf(n);h>-1&&(l=l.slice(0,h))}return l+r}function EUe(e){return cq(e,1)}var AUe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},MUe=JD(AUe),dK=/&(?:amp|lt|gt|quot|#39);/g,TUe=RegExp(dK.source);function PUe(e){return e=hr(e),e&&TUe.test(e)?e.replace(dK,MUe):e}var DUe=1/0,IUe=Xm&&1/MS(new Xm([,-0]))[1]==DUe?function(e){return new Xm(e)}:zD,OUe=200;function hh(e,t,i){var r=-1,n=wS,a=e.length,s=!0,o=[],l=o;if(i)s=!1,n=pI;else if(a>=OUe){var c=t?null:IUe(e);if(c)return MS(c);s=!1,n=R1,l=new Xf}else l=t?[]:o;e:for(;++r<a;){var u=e[r],d=t?t(u):u;if(u=i||u!==0?u:0,s&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),o.push(u)}else n(l,d,i)||(l!==o&&l.push(d),o.push(u))}return o}var f2=Ni(function(e){return hh(Da(e,1,pn,!0))}),RUe=Ni(function(e){var t=ro(e);return pn(t)&&(t=void 0),hh(Da(e,1,pn,!0),Ai(t))}),kUe=Ni(function(e){var t=ro(e);return t=typeof t=="function"?t:void 0,hh(Da(e,1,pn,!0),void 0,t)});function LUe(e){return e&&e.length?hh(e):[]}function BUe(e,t){return e&&e.length?hh(e,Ai(t)):[]}function NUe(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?hh(e,void 0,t):[]}var FUe=0;function zUe(e){var t=++FUe;return hr(e)+t}function VUe(e,t){return e==null?!0:EI(e,t)}var UUe=Math.max;function II(e){if(!(e&&e.length))return[];var t=0;return e=Ph(e,function(i){if(pn(i))return t=UUe(i.length,t),!0}),jD(t,function(i){return Wr(e,uI(i))})}function hK(e,t){if(!(e&&e.length))return[];var i=II(e);return t==null?i:Wr(i,function(r){return to(t,void 0,r)})}function fK(e,t,i,r){return My(e,t,i(fp(e,t)),r)}function HUe(e,t,i){return e==null?e:fK(e,t,Rc(i))}function jUe(e,t,i,r){return r=typeof r=="function"?r:void 0,e==null?e:fK(e,t,Rc(i),r)}var WUe=l0(function(e,t,i){return e+(i?" ":"")+t.toUpperCase()});function GUe(e){return e==null?[]:gI(e,Us(e))}var $Ue=Ni(function(e,t){return pn(e)?Cy(e,t):[]});function ZUe(e,t){return NS(Rc(t),e)}var qUe=Yu(function(e){var t=e.length,i=t?e[0]:0,r=this.__wrapped__,n=function(a){return ZD(a,e)};return t>1||this.__actions__.length||!(r instanceof Zi)||!Wu(i)?this.thru(n):(r=r.slice(i,+i+(t?1:0)),r.__actions__.push({func:Ty,args:[n],thisArg:void 0}),new Fo(r,this.__chain__).thru(function(a){return t&&!a.length&&a.push(void 0),a}))});function YUe(){return jq(this)}function KUe(){var e=this.__wrapped__;if(e instanceof Zi){var t=e;return this.__actions__.length&&(t=new Zi(this)),t=t.reverse(),t.__actions__.push({func:Ty,args:[yT],thisArg:void 0}),new Fo(t,this.__chain__)}return this.thru(yT)}function OI(e,t,i){var r=e.length;if(r<2)return r?hh(e[0]):[];for(var n=-1,a=Array(r);++n<r;)for(var s=e[n],o=-1;++o<r;)o!=n&&(a[n]=Cy(a[n]||s,e[o],t,i));return hh(Da(a,1),t,i)}var XUe=Ni(function(e){return OI(Ph(e,pn))}),QUe=Ni(function(e){var t=ro(e);return pn(t)&&(t=void 0),OI(Ph(e,pn),Ai(t))}),JUe=Ni(function(e){var t=ro(e);return t=typeof t=="function"?t:void 0,OI(Ph(e,pn),void 0,t)}),eHe=Ni(II);function pK(e,t,i){for(var r=-1,n=e.length,a=t.length,s={};++r<n;){var o=r<a?t[r]:void 0;i(s,e[r],o)}return s}function tHe(e,t){return pK(e||[],t||[],by)}function iHe(e,t){return pK(e||[],t||[],My)}var rHe=Ni(function(e){var t=e.length,i=t>1?e[t-1]:void 0;return i=typeof i=="function"?(e.pop(),i):void 0,hK(e,i)}),qt={chunk:q6e,compact:MLe,concat:TLe,difference:RBe,differenceBy:kBe,differenceWith:LBe,drop:NBe,dropRight:FBe,dropRightWhile:zBe,dropWhile:VBe,fill:i9e,findIndex:MY,findLastIndex:IS,first:KN,flatten:qD,flattenDeep:IY,flattenDepth:m9e,fromPairs:Cv,head:KN,indexOf:Y9e,initial:K9e,intersection:Q9e,intersectionBy:J9e,intersectionWith:eNe,join:$Ne,last:ro,lastIndexOf:QNe,nth:CFe,pull:bze,pullAll:JY,pullAllBy:wze,pullAllWith:xze,pullAt:Cze,remove:Hze,reverse:yT,slice:cVe,sortedIndex:wVe,sortedIndexBy:xVe,sortedIndexOf:_Ve,sortedLastIndex:SVe,sortedLastIndexBy:CVe,sortedLastIndexOf:EVe,sortedUniq:AVe,sortedUniqBy:MVe,tail:UVe,take:HVe,takeRight:jVe,takeRightWhile:WVe,takeWhile:GVe,union:f2,unionBy:RUe,unionWith:kUe,uniq:LUe,uniqBy:BUe,uniqWith:NUe,unzip:II,unzipWith:hK,without:$Ue,xor:XUe,xorBy:QUe,xorWith:JUe,zip:eHe,zipObject:tHe,zipObjectDeep:iHe,zipWith:rHe},Mr={countBy:gBe,each:$N,eachRight:ZN,every:JBe,filter:r9e,find:a9e,findLast:c9e,flatMap:DY,flatMapDeep:h9e,flatMapDepth:f9e,forEach:$N,forEachRight:ZN,groupBy:k9e,includes:Z9e,invokeMap:cNe,keyBy:qNe,map:OS,orderBy:kFe,partition:fze,reduce:Fze,reduceRight:Vze,reject:Uze,sample:Qze,sampleSize:tVe,shuffle:aVe,size:lVe,some:hVe,sortBy:fVe},nHe={now:h2},ln={after:I8e,ary:cq,before:bq,bind:AS,bindKey:KD,curry:hI,curryRight:fI,debounce:gs,defer:DBe,delay:IBe,flip:g9e,memoize:xy,negate:Ay,once:IFe,overArgs:FFe,partial:NS,partialRight:MI,rearg:Nze,rest:$ze,spread:OVe,throttle:Jd,unary:EUe,wrap:ZUe},oi={castArray:wa,clone:hT,cloneDeep:O1,cloneDeepWith:SLe,cloneWith:ELe,conformsTo:hBe,eq:Il,gt:L9e,gte:B9e,isArguments:Yf,isArray:Pi,isArrayBuffer:hNe,isArrayLike:Vs,isArrayLikeObject:pn,isBoolean:pNe,isBuffer:dh,isDate:gNe,isElement:yNe,isEmpty:SNe,isEqual:jn,isEqualWith:CNe,isError:YD,isFinite:ANe,isFunction:ju,isInteger:BY,isLength:_S,isMap:Xq,isMatch:MNe,isMatchWith:TNe,isNaN:DNe,isNative:RNe,isNil:mn,isNull:kNe,isNumber:NY,isObject:Gr,isObjectLike:sn,isPlainObject:_y,isRegExp:wI,isSafeInteger:NNe,isSet:Qq,isString:LS,isSymbol:Js,isTypedArray:s0,isUndefined:xI,isWeakMap:zNe,isWeakSet:UNe,lt:tFe,lte:iFe,toArray:VY,toFinite:Eu,toInteger:Ii,toLength:CY,toNumber:Io,toPlainObject:fY,toSafeInteger:pUe,toString:hr},xs={add:_8e,ceil:G6e,divide:BBe,floor:y9e,max:cFe,maxBy:uFe,mean:hFe,meanBy:fFe,min:vFe,minBy:gFe,multiply:yFe,round:Kze,subtract:FVe,sum:zVe,sumBy:VVe},RI={clamp:Y6e,inRange:W9e,random:Dze},Si={assign:BRe,assignIn:SN,assignInWith:t_,assignWith:URe,at:xke,create:yBe,defaults:ABe,defaultsDeep:TBe,entries:qN,entriesIn:YN,extend:SN,extendWith:t_,findKey:s9e,findLastKey:u9e,forIn:A9e,forInRight:M9e,forOwn:T9e,forOwnRight:P9e,functions:D9e,functionsIn:I9e,get:Nr,has:V9e,hasIn:cI,invert:nNe,invertBy:oNe,invoke:lNe,keys:Kn,keysIn:Us,mapKeys:rFe,mapValues:nFe,merge:CI,mergeWith:mY,omit:HY,omitBy:DFe,pick:Co,pickBy:WY,result:Zze,set:nK,setWith:iVe,toPairs:qN,toPairsIn:YN,transform:vUe,unset:VUe,update:HUe,updateWith:jUe,values:c0,valuesIn:GUe},kc={at:qUe,chain:jq,commit:ALe,lodash:fe,next:SFe,plant:mze,reverse:KUe,tap:$Ve,thru:Ty,toIterator:dUe,toJSON:G4,value:G4,valueOf:G4,wrapperChain:YUe},lr={camelCase:H6e,capitalize:Mq,deburr:Tq,endsWith:HBe,escape:xY,escapeRegExp:XBe,kebabCase:ZNe,lowerCase:JNe,lowerFirst:eFe,pad:aze,padEnd:sze,padStart:oze,parseInt:uze,repeat:jze,replace:Wze,snakeCase:uVe,split:PVe,startCase:RVe,startsWith:kVe,template:sUe,templateSettings:bT,toLower:hUe,toUpper:mUe,trim:gUe,trimEnd:yUe,trimStart:wUe,truncate:CUe,unescape:PUe,upperCase:WUe,upperFirst:XD,words:Hq},fr={attempt:yq,bindAll:Oke,cond:lBe,conforms:dBe,constant:UD,defaultTo:CBe,flow:C9e,flowRight:E9e,identity:ws,iteratee:jNe,matches:sFe,matchesProperty:lFe,method:pFe,methodOf:mFe,mixin:zY,noop:zD,nthArg:EFe,over:LFe,overEvery:zFe,overSome:VFe,property:lY,propertyOf:vze,range:kze,rangeRight:Lze,stubArray:tI,stubFalse:WD,stubObject:LVe,stubString:BVe,stubTrue:NVe,times:uUe,toPath:fUe,uniqueId:zUe};function aHe(){var e=new Zi(this.__wrapped__);return e.__actions__=ks(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ks(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ks(this.__views__),e}function sHe(){if(this.__filtered__){var e=new Zi(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}var oHe=Math.max,lHe=Math.min;function cHe(e,t,i){for(var r=-1,n=i.length;++r<n;){var a=i[r],s=a.size;switch(a.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=lHe(t,e+s);break;case"takeRight":e=oHe(e,t-s);break}}return{start:e,end:t}}var uHe=1,dHe=2,hHe=Math.min;function fHe(){var e=this.__wrapped__.value(),t=this.__dir__,i=Pi(e),r=t<0,n=i?e.length:0,a=cHe(0,n,this.__views__),s=a.start,o=a.end,l=o-s,c=r?o:s-1,u=this.__iteratees__,d=u.length,h=0,f=hHe(l,this.__takeCount__);if(!i||!r&&n==l&&f==l)return lK(e,this.__actions__);var p=[];e:for(;l--&&h<f;){c+=t;for(var m=-1,v=e[c];++m<d;){var y=u[m],x=y.iteratee,b=y.type,w=x(v);if(b==dHe)v=w;else if(!w){if(b==uHe)continue e;break e}}p[h++]=v}return p}var pHe="4.17.21",mHe=2,vHe=1,gHe=3,mK=4294967295,yHe=Array.prototype,bHe=Object.prototype,vK=bHe.hasOwnProperty,sF=$a?$a.iterator:void 0,wHe=Math.max,oF=Math.min,kI=function(e){return function(t,i,r){if(r==null){var n=Gr(i),a=n&&Kn(i),s=a&&a.length&&RS(i,a);(s?s.length:n)||(r=i,i=t,t=this)}return e(t,i,r)}}(zY);fe.after=ln.after;fe.ary=ln.ary;fe.assign=Si.assign;fe.assignIn=Si.assignIn;fe.assignInWith=Si.assignInWith;fe.assignWith=Si.assignWith;fe.at=Si.at;fe.before=ln.before;fe.bind=ln.bind;fe.bindAll=fr.bindAll;fe.bindKey=ln.bindKey;fe.castArray=oi.castArray;fe.chain=kc.chain;fe.chunk=qt.chunk;fe.compact=qt.compact;fe.concat=qt.concat;fe.cond=fr.cond;fe.conforms=fr.conforms;fe.constant=fr.constant;fe.countBy=Mr.countBy;fe.create=Si.create;fe.curry=ln.curry;fe.curryRight=ln.curryRight;fe.debounce=ln.debounce;fe.defaults=Si.defaults;fe.defaultsDeep=Si.defaultsDeep;fe.defer=ln.defer;fe.delay=ln.delay;fe.difference=qt.difference;fe.differenceBy=qt.differenceBy;fe.differenceWith=qt.differenceWith;fe.drop=qt.drop;fe.dropRight=qt.dropRight;fe.dropRightWhile=qt.dropRightWhile;fe.dropWhile=qt.dropWhile;fe.fill=qt.fill;fe.filter=Mr.filter;fe.flatMap=Mr.flatMap;fe.flatMapDeep=Mr.flatMapDeep;fe.flatMapDepth=Mr.flatMapDepth;fe.flatten=qt.flatten;fe.flattenDeep=qt.flattenDeep;fe.flattenDepth=qt.flattenDepth;fe.flip=ln.flip;fe.flow=fr.flow;fe.flowRight=fr.flowRight;fe.fromPairs=qt.fromPairs;fe.functions=Si.functions;fe.functionsIn=Si.functionsIn;fe.groupBy=Mr.groupBy;fe.initial=qt.initial;fe.intersection=qt.intersection;fe.intersectionBy=qt.intersectionBy;fe.intersectionWith=qt.intersectionWith;fe.invert=Si.invert;fe.invertBy=Si.invertBy;fe.invokeMap=Mr.invokeMap;fe.iteratee=fr.iteratee;fe.keyBy=Mr.keyBy;fe.keys=Kn;fe.keysIn=Si.keysIn;fe.map=Mr.map;fe.mapKeys=Si.mapKeys;fe.mapValues=Si.mapValues;fe.matches=fr.matches;fe.matchesProperty=fr.matchesProperty;fe.memoize=ln.memoize;fe.merge=Si.merge;fe.mergeWith=Si.mergeWith;fe.method=fr.method;fe.methodOf=fr.methodOf;fe.mixin=kI;fe.negate=Ay;fe.nthArg=fr.nthArg;fe.omit=Si.omit;fe.omitBy=Si.omitBy;fe.once=ln.once;fe.orderBy=Mr.orderBy;fe.over=fr.over;fe.overArgs=ln.overArgs;fe.overEvery=fr.overEvery;fe.overSome=fr.overSome;fe.partial=ln.partial;fe.partialRight=ln.partialRight;fe.partition=Mr.partition;fe.pick=Si.pick;fe.pickBy=Si.pickBy;fe.property=fr.property;fe.propertyOf=fr.propertyOf;fe.pull=qt.pull;fe.pullAll=qt.pullAll;fe.pullAllBy=qt.pullAllBy;fe.pullAllWith=qt.pullAllWith;fe.pullAt=qt.pullAt;fe.range=fr.range;fe.rangeRight=fr.rangeRight;fe.rearg=ln.rearg;fe.reject=Mr.reject;fe.remove=qt.remove;fe.rest=ln.rest;fe.reverse=qt.reverse;fe.sampleSize=Mr.sampleSize;fe.set=Si.set;fe.setWith=Si.setWith;fe.shuffle=Mr.shuffle;fe.slice=qt.slice;fe.sortBy=Mr.sortBy;fe.sortedUniq=qt.sortedUniq;fe.sortedUniqBy=qt.sortedUniqBy;fe.split=lr.split;fe.spread=ln.spread;fe.tail=qt.tail;fe.take=qt.take;fe.takeRight=qt.takeRight;fe.takeRightWhile=qt.takeRightWhile;fe.takeWhile=qt.takeWhile;fe.tap=kc.tap;fe.throttle=ln.throttle;fe.thru=Ty;fe.toArray=oi.toArray;fe.toPairs=Si.toPairs;fe.toPairsIn=Si.toPairsIn;fe.toPath=fr.toPath;fe.toPlainObject=oi.toPlainObject;fe.transform=Si.transform;fe.unary=ln.unary;fe.union=qt.union;fe.unionBy=qt.unionBy;fe.unionWith=qt.unionWith;fe.uniq=qt.uniq;fe.uniqBy=qt.uniqBy;fe.uniqWith=qt.uniqWith;fe.unset=Si.unset;fe.unzip=qt.unzip;fe.unzipWith=qt.unzipWith;fe.update=Si.update;fe.updateWith=Si.updateWith;fe.values=Si.values;fe.valuesIn=Si.valuesIn;fe.without=qt.without;fe.words=lr.words;fe.wrap=ln.wrap;fe.xor=qt.xor;fe.xorBy=qt.xorBy;fe.xorWith=qt.xorWith;fe.zip=qt.zip;fe.zipObject=qt.zipObject;fe.zipObjectDeep=qt.zipObjectDeep;fe.zipWith=qt.zipWith;fe.entries=Si.toPairs;fe.entriesIn=Si.toPairsIn;fe.extend=Si.assignIn;fe.extendWith=Si.assignInWith;kI(fe,fe);fe.add=xs.add;fe.attempt=fr.attempt;fe.camelCase=lr.camelCase;fe.capitalize=lr.capitalize;fe.ceil=xs.ceil;fe.clamp=RI.clamp;fe.clone=oi.clone;fe.cloneDeep=oi.cloneDeep;fe.cloneDeepWith=oi.cloneDeepWith;fe.cloneWith=oi.cloneWith;fe.conformsTo=oi.conformsTo;fe.deburr=lr.deburr;fe.defaultTo=fr.defaultTo;fe.divide=xs.divide;fe.endsWith=lr.endsWith;fe.eq=oi.eq;fe.escape=lr.escape;fe.escapeRegExp=lr.escapeRegExp;fe.every=Mr.every;fe.find=Mr.find;fe.findIndex=qt.findIndex;fe.findKey=Si.findKey;fe.findLast=Mr.findLast;fe.findLastIndex=qt.findLastIndex;fe.findLastKey=Si.findLastKey;fe.floor=xs.floor;fe.forEach=Mr.forEach;fe.forEachRight=Mr.forEachRight;fe.forIn=Si.forIn;fe.forInRight=Si.forInRight;fe.forOwn=Si.forOwn;fe.forOwnRight=Si.forOwnRight;fe.get=Si.get;fe.gt=oi.gt;fe.gte=oi.gte;fe.has=Si.has;fe.hasIn=Si.hasIn;fe.head=qt.head;fe.identity=ws;fe.includes=Mr.includes;fe.indexOf=qt.indexOf;fe.inRange=RI.inRange;fe.invoke=Si.invoke;fe.isArguments=oi.isArguments;fe.isArray=Pi;fe.isArrayBuffer=oi.isArrayBuffer;fe.isArrayLike=oi.isArrayLike;fe.isArrayLikeObject=oi.isArrayLikeObject;fe.isBoolean=oi.isBoolean;fe.isBuffer=oi.isBuffer;fe.isDate=oi.isDate;fe.isElement=oi.isElement;fe.isEmpty=oi.isEmpty;fe.isEqual=oi.isEqual;fe.isEqualWith=oi.isEqualWith;fe.isError=oi.isError;fe.isFinite=oi.isFinite;fe.isFunction=oi.isFunction;fe.isInteger=oi.isInteger;fe.isLength=oi.isLength;fe.isMap=oi.isMap;fe.isMatch=oi.isMatch;fe.isMatchWith=oi.isMatchWith;fe.isNaN=oi.isNaN;fe.isNative=oi.isNative;fe.isNil=oi.isNil;fe.isNull=oi.isNull;fe.isNumber=oi.isNumber;fe.isObject=Gr;fe.isObjectLike=oi.isObjectLike;fe.isPlainObject=oi.isPlainObject;fe.isRegExp=oi.isRegExp;fe.isSafeInteger=oi.isSafeInteger;fe.isSet=oi.isSet;fe.isString=oi.isString;fe.isSymbol=oi.isSymbol;fe.isTypedArray=oi.isTypedArray;fe.isUndefined=oi.isUndefined;fe.isWeakMap=oi.isWeakMap;fe.isWeakSet=oi.isWeakSet;fe.join=qt.join;fe.kebabCase=lr.kebabCase;fe.last=ro;fe.lastIndexOf=qt.lastIndexOf;fe.lowerCase=lr.lowerCase;fe.lowerFirst=lr.lowerFirst;fe.lt=oi.lt;fe.lte=oi.lte;fe.max=xs.max;fe.maxBy=xs.maxBy;fe.mean=xs.mean;fe.meanBy=xs.meanBy;fe.min=xs.min;fe.minBy=xs.minBy;fe.stubArray=fr.stubArray;fe.stubFalse=fr.stubFalse;fe.stubObject=fr.stubObject;fe.stubString=fr.stubString;fe.stubTrue=fr.stubTrue;fe.multiply=xs.multiply;fe.nth=qt.nth;fe.noop=fr.noop;fe.now=nHe.now;fe.pad=lr.pad;fe.padEnd=lr.padEnd;fe.padStart=lr.padStart;fe.parseInt=lr.parseInt;fe.random=RI.random;fe.reduce=Mr.reduce;fe.reduceRight=Mr.reduceRight;fe.repeat=lr.repeat;fe.replace=lr.replace;fe.result=Si.result;fe.round=xs.round;fe.sample=Mr.sample;fe.size=Mr.size;fe.snakeCase=lr.snakeCase;fe.some=Mr.some;fe.sortedIndex=qt.sortedIndex;fe.sortedIndexBy=qt.sortedIndexBy;fe.sortedIndexOf=qt.sortedIndexOf;fe.sortedLastIndex=qt.sortedLastIndex;fe.sortedLastIndexBy=qt.sortedLastIndexBy;fe.sortedLastIndexOf=qt.sortedLastIndexOf;fe.startCase=lr.startCase;fe.startsWith=lr.startsWith;fe.subtract=xs.subtract;fe.sum=xs.sum;fe.sumBy=xs.sumBy;fe.template=lr.template;fe.times=fr.times;fe.toFinite=oi.toFinite;fe.toInteger=Ii;fe.toLength=oi.toLength;fe.toLower=lr.toLower;fe.toNumber=oi.toNumber;fe.toSafeInteger=oi.toSafeInteger;fe.toString=oi.toString;fe.toUpper=lr.toUpper;fe.trim=lr.trim;fe.trimEnd=lr.trimEnd;fe.trimStart=lr.trimStart;fe.truncate=lr.truncate;fe.unescape=lr.unescape;fe.uniqueId=fr.uniqueId;fe.upperCase=lr.upperCase;fe.upperFirst=lr.upperFirst;fe.each=Mr.forEach;fe.eachRight=Mr.forEachRight;fe.first=qt.head;kI(fe,function(){var e={};return Oc(fe,function(t,i){vK.call(fe.prototype,i)||(e[i]=t)}),e}(),{chain:!1});fe.VERSION=pHe;(fe.templateSettings=lr.templateSettings).imports._=fe;Go(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){fe[e].placeholder=fe});Go(["drop","take"],function(e,t){Zi.prototype[e]=function(i){i=i===void 0?1:wHe(Ii(i),0);var r=this.__filtered__&&!t?new Zi(this):this.clone();return r.__filtered__?r.__takeCount__=oF(i,r.__takeCount__):r.__views__.push({size:oF(i,mK),type:e+(r.__dir__<0?"Right":"")}),r},Zi.prototype[e+"Right"]=function(i){return this.reverse()[e](i).reverse()}});Go(["filter","map","takeWhile"],function(e,t){var i=t+1,r=i==vHe||i==gHe;Zi.prototype[e]=function(n){var a=this.clone();return a.__iteratees__.push({iteratee:Ai(n),type:i}),a.__filtered__=a.__filtered__||r,a}});Go(["head","last"],function(e,t){var i="take"+(t?"Right":"");Zi.prototype[e]=function(){return this[i](1).value()[0]}});Go(["initial","tail"],function(e,t){var i="drop"+(t?"":"Right");Zi.prototype[e]=function(){return this.__filtered__?new Zi(this):this[i](1)}});Zi.prototype.compact=function(){return this.filter(ws)};Zi.prototype.find=function(e){return this.filter(e).head()};Zi.prototype.findLast=function(e){return this.reverse().find(e)};Zi.prototype.invokeMap=Ni(function(e,t){return typeof e=="function"?new Zi(this):this.map(function(i){return Ey(i,e,t)})});Zi.prototype.reject=function(e){return this.filter(Ay(Ai(e)))};Zi.prototype.slice=function(e,t){e=Ii(e);var i=this;return i.__filtered__&&(e>0||t<0)?new Zi(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==void 0&&(t=Ii(t),i=t<0?i.dropRight(-t):i.take(t-e)),i)};Zi.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()};Zi.prototype.toArray=function(){return this.take(mK)};Oc(Zi.prototype,function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),n=fe[r?"take"+(t=="last"?"Right":""):t],a=r||/^find/.test(t);n&&(fe.prototype[t]=function(){var s=this.__wrapped__,o=r?[1]:arguments,l=s instanceof Zi,c=o[0],u=l||Pi(s),d=function(y){var x=n.apply(fe,Mh([y],o));return r&&h?x[0]:x};u&&i&&typeof c=="function"&&c.length!=1&&(l=u=!1);var h=this.__chain__,f=!!this.__actions__.length,p=a&&!h,m=l&&!f;if(!a&&u){s=m?s:new Zi(this);var v=e.apply(s,o);return v.__actions__.push({func:Ty,args:[d],thisArg:void 0}),new Fo(v,h)}return p&&m?e.apply(this,o):(v=this.thru(d),p?r?v.value()[0]:v.value():v)})});Go(["pop","push","shift","sort","splice","unshift"],function(e){var t=yHe[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);fe.prototype[e]=function(){var n=arguments;if(r&&!this.__chain__){var a=this.value();return t.apply(Pi(a)?a:[],n)}return this[i](function(s){return t.apply(Pi(s)?s:[],n)})}});Oc(Zi.prototype,function(e,t){var i=fe[t];if(i){var r=i.name+"";vK.call(Km,r)||(Km[r]=[]),Km[r].push({name:t,func:i})}});Km[xS(void 0,mHe).name]=[{name:"wrapper",func:void 0}];Zi.prototype.clone=aHe;Zi.prototype.reverse=sHe;Zi.prototype.value=fHe;fe.prototype.at=kc.at;fe.prototype.chain=kc.wrapperChain;fe.prototype.commit=kc.commit;fe.prototype.next=kc.next;fe.prototype.plant=kc.plant;fe.prototype.reverse=kc.reverse;fe.prototype.toJSON=fe.prototype.valueOf=fe.prototype.value=kc.value;fe.prototype.first=fe.prototype.head;sF&&(fe.prototype[sF]=kc.toIterator);/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */const Qi=e=>e===void 0,Gi=e=>typeof e=="boolean",gt=e=>typeof e=="number",Zs=e=>!e&&e!==0||ct(e)&&e.length===0||Ri(e)&&!Object.keys(e).length,Xs=e=>typeof Element>"u"?!1:e instanceof Element,Qf=e=>mn(e),xHe=e=>Et(e)?!Number.isNaN(Number(e)):!1,VS=e=>e===window,fh=e=>si?window.requestAnimationFrame(e):setTimeout(e,16),Jf=e=>si?window.cancelAnimationFrame(e):clearTimeout(e),LI=(e="")=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),sc=e=>c8e(e),Ev=e=>Object.keys(e),_He=e=>Object.entries(e),p2=(e,t,i)=>({get value(){return Nr(e,t,i)},set value(r){nK(e,t,r)}});class SHe extends Error{constructor(t){super(t),this.name="ElementPlusError"}}function bn(e,t){throw new SHe(`[${e}] ${t}`)}const gK=(e="")=>e.split(" ").filter(t=>!!t.trim()),Rs=(e,t)=>{if(!e||!t)return!1;if(t.includes(" "))throw new Error("className should not contain space.");return e.classList.contains(t)},Eo=(e,t)=>{!e||!t.trim()||e.classList.add(...gK(t))},Wa=(e,t)=>{!e||!t.trim()||e.classList.remove(...gK(t))},Rd=(e,t)=>{var i;if(!si||!e||!t)return"";let r=qZ(t);r==="float"&&(r="cssFloat");try{const n=e.style[r];if(n)return n;const a=(i=document.defaultView)==null?void 0:i.getComputedStyle(e,"");return a?a[r]:""}catch{return e.style[r]}};function zr(e,t="px"){if(!e)return"";if(gt(e)||xHe(e))return`${e}${t}`;if(Et(e))return e}const CHe=(e,t)=>{if(!si)return!1;const i={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(t)],r=Rd(e,i);return["scroll","auto","overlay"].some(n=>r.includes(n))},BI=(e,t)=>{if(!si)return;let i=e;for(;i;){if([window,document,document.documentElement].includes(i))return window;if(CHe(i,t))return i;i=i.parentNode}return i};let Sw;const yK=e=>{var t;if(!si)return 0;if(Sw!==void 0)return Sw;const i=document.createElement("div");i.className=`${e}-scrollbar__wrap`,i.style.visibility="hidden",i.style.width="100px",i.style.position="absolute",i.style.top="-9999px",document.body.appendChild(i);const r=i.offsetWidth;i.style.overflow="scroll";const n=document.createElement("div");n.style.width="100%",i.appendChild(n);const a=n.offsetWidth;return(t=i.parentNode)==null||t.removeChild(i),Sw=r-a,Sw};function NI(e,t){if(!si)return;if(!t){e.scrollTop=0;return}const i=[];let r=t.offsetParent;for(;r!==null&&e!==r&&e.contains(r);)i.push(r),r=r.offsetParent;const n=t.offsetTop+i.reduce((l,c)=>l+c.offsetTop,0),a=n+t.offsetHeight,s=e.scrollTop,o=s+e.clientHeight;n<s?e.scrollTop=n:a>o&&(e.scrollTop=a-e.clientHeight)}function EHe(e,t,i,r,n){const a=Date.now();let s;const o=()=>{const c=Date.now()-a,u=r8e(c>r?r:c,t,i,r);VS(e)?e.scrollTo(window.pageXOffset,u):e.scrollTop=u,c<r?s=fh(o):Wt(n)&&n()};return o(),()=>{s&&Jf(s)}}const lF=(e,t)=>VS(t)?e.ownerDocument.documentElement:t,cF=e=>VS(e)?window.scrollY:e.scrollTop,Cw=e=>{if(!si||e==="")return null;if(Et(e))try{return document.querySelector(e)}catch{return null}return e};var AHe=ce({name:"ArrowDown",__name:"arrow-down",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"})]))}}),Ku=AHe,MHe=ce({name:"ArrowLeft",__name:"arrow-left",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"})]))}}),ph=MHe,THe=ce({name:"ArrowRight",__name:"arrow-right",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),hs=THe,PHe=ce({name:"ArrowUp",__name:"arrow-up",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),FI=PHe,DHe=ce({name:"Back",__name:"back",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64"}),ie("path",{fill:"currentColor",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312z"})]))}}),IHe=DHe,OHe=ce({name:"Calendar",__name:"calendar",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64"})]))}}),RHe=OHe,kHe=ce({name:"CaretRight",__name:"caret-right",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"})]))}}),bK=kHe,LHe=ce({name:"CaretTop",__name:"caret-top",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"})]))}}),BHe=LHe,NHe=ce({name:"Check",__name:"check",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),Py=NHe,FHe=ce({name:"CircleCheckFilled",__name:"circle-check-filled",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),zHe=FHe,VHe=ce({name:"CircleCheck",__name:"circle-check",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),ie("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"})]))}}),zI=VHe,UHe=ce({name:"CircleCloseFilled",__name:"circle-close-filled",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),VI=UHe,HHe=ce({name:"CircleClose",__name:"circle-close",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),ie("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),Ih=HHe,jHe=ce({name:"Clock",__name:"clock",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),ie("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32"}),ie("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32"})]))}}),wK=jHe,WHe=ce({name:"Close",__name:"close",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),Ml=WHe,GHe=ce({name:"DArrowLeft",__name:"d-arrow-left",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"})]))}}),mh=GHe,$He=ce({name:"DArrowRight",__name:"d-arrow-right",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688m-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"})]))}}),vh=$He,ZHe=ce({name:"Delete",__name:"delete",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})]))}}),qHe=ZHe,YHe=ce({name:"Document",__name:"document",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})]))}}),KHe=YHe,XHe=ce({name:"FullScreen",__name:"full-screen",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z"})]))}}),QHe=XHe,JHe=ce({name:"Hide",__name:"hide",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"}),ie("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"})]))}}),eje=JHe,tje=ce({name:"InfoFilled",__name:"info-filled",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),UI=tje,ije=ce({name:"Loading",__name:"loading",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})]))}}),_c=ije,rje=ce({name:"Minus",__name:"minus",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64"})]))}}),nje=rje,aje=ce({name:"MoreFilled",__name:"more-filled",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224"})]))}}),uF=aje,sje=ce({name:"More",__name:"more",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96"})]))}}),oje=sje,lje=ce({name:"PictureFilled",__name:"picture-filled",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112M256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384"})]))}}),cje=lje,uje=ce({name:"Plus",__name:"plus",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),xK=uje,dje=ce({name:"QuestionFilled",__name:"question-filled",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784 49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.968 51.968 0 0 0-15.488-38.016 55.936 55.936 0 0 0-39.424-14.784z"})]))}}),hje=dje,fje=ce({name:"RefreshLeft",__name:"refresh-left",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"})]))}}),pje=fje,mje=ce({name:"RefreshRight",__name:"refresh-right",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"})]))}}),vje=mje,gje=ce({name:"ScaleToOriginal",__name:"scale-to-original",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118M512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412M512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512"})]))}}),yje=gje,bje=ce({name:"Search",__name:"search",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"})]))}}),wje=bje,xje=ce({name:"SortDown",__name:"sort-down",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M576 96v709.568L333.312 562.816A32 32 0 1 0 288 608l297.408 297.344A32 32 0 0 0 640 882.688V96a32 32 0 0 0-64 0"})]))}}),_je=xje,Sje=ce({name:"SortUp",__name:"sort-up",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M384 141.248V928a32 32 0 1 0 64 0V218.56l242.688 242.688A32 32 0 1 0 736 416L438.592 118.656A32 32 0 0 0 384 141.248"})]))}}),Cje=Sje,Eje=ce({name:"StarFilled",__name:"star-filled",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M283.84 867.84 512 747.776l228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72z"})]))}}),Ew=Eje,Aje=ce({name:"Star",__name:"star",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"m512 747.84 228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72zM313.6 924.48a70.4 70.4 0 0 1-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"})]))}}),Mje=Aje,Tje=ce({name:"SuccessFilled",__name:"success-filled",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),_K=Tje,Pje=ce({name:"View",__name:"view",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),Dje=Pje,Ije=ce({name:"WarningFilled",__name:"warning-filled",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),US=Ije,Oje=ce({name:"ZoomIn",__name:"zoom-in",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704m-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64z"})]))}}),SK=Oje,Rje=ce({name:"ZoomOut",__name:"zoom-out",setup(e){return(t,i)=>(F(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[ie("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704M352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64"})]))}}),kje=Rje;/*! Element Plus Icons Vue v2.3.1 */const CK="__epPropKey",be=e=>e,Lje=e=>Ri(e)&&!!e[CK],Ol=(e,t)=>{if(!Ri(e)||Lje(e))return e;const{values:i,required:r,default:n,type:a,validator:s}=e,l={type:a,required:!!r,validator:i||s?c=>{let u=!1,d=[];if(i&&(d=Array.from(i),Ma(e,"default")&&d.push(n),u||(u=d.includes(c))),s&&(u||(u=s(c))),!u&&d.length>0){const h=[...new Set(d)].map(f=>JSON.stringify(f)).join(", ");hie(`Invalid prop: validation failed${t?` for prop "${t}"`:""}. Expected one of [${h}], got value ${JSON.stringify(c)}.`)}return u}:void 0,[CK]:!0};return Ma(e,"default")&&(l.default=n),l},je=e=>Cv(Object.entries(e).map(([t,i])=>[t,Ol(i,t)])),zi=be([String,Object,Function]),HI={Close:Ml},jI={Close:Ml,SuccessFilled:_K,InfoFilled:UI,WarningFilled:US,CircleCloseFilled:VI},gh={success:_K,warning:US,error:VI,info:UI},WI={validating:_c,success:zI,error:Ih},Rt=(e,t)=>{if(e.install=i=>{for(const r of[e,...Object.values(t??{})])i.component(r.name,r)},t)for(const[i,r]of Object.entries(t))e[i]=r;return e},EK=(e,t)=>(e.install=i=>{e._context=i._context,i.config.globalProperties[t]=e},e),Bje=(e,t)=>(e.install=i=>{i.directive(t,e)},e),Tr=e=>(e.install=Sr,e),HS=(...e)=>t=>{e.forEach(i=>{Wt(i)?i(t):i.value=t})},at={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},Nje=["year","years","month","months","date","dates","week","datetime","datetimerange","daterange","monthrange","yearrange"],$4=["sun","mon","tue","wed","thu","fri","sat"],Vt="update:modelValue",nr="change",fs="input",dF=Symbol("INSTALLED_KEY"),Lc=["","default","small","large"],AK=e=>["",...Lc].includes(e);var go=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(go||{});function wT(e){return rr(e)&&e.type===ht}function Fje(e){return rr(e)&&e.type===Zr}function zje(e){return rr(e)&&!wT(e)&&!Fje(e)}const Vje=e=>{if(!rr(e))return{};const t=e.props||{},i=(rr(e.type)?e.type.props:void 0)||{},r={};return Object.keys(i).forEach(n=>{Ma(i[n],"default")&&(r[n]=i[n].default)}),Object.keys(t).forEach(n=>{r[qZ(n)]=t[n]}),r},Uje=e=>{if(!ct(e)||e.length>1)throw new Error("expect to receive a single Vue element child");return e[0]},eh=e=>{const t=ct(e)?e:[e],i=[];return t.forEach(r=>{var n;ct(r)?i.push(...eh(r)):rr(r)&&((n=r.component)!=null&&n.subTree)?i.push(r,...eh(r.component.subTree)):rr(r)&&ct(r.children)?i.push(...eh(r.children)):i.push(r)}),i},hF=e=>[...new Set(e)],cs=e=>!e&&e!==0?[]:ct(e)?e:[e],Hje=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e),Er=e=>e;function jje(e){let t=0;const i=(...r)=>{t&&Jf(t),t=fh(()=>{e(...r),t=0})};return i.cancel=()=>{Jf(t),t=0},i}const Wje=["class","style"],Gje=/^on[A-Z]/,jS=(e={})=>{const{excludeListeners:t=!1,excludeKeys:i}=e,r=O(()=>((i==null?void 0:i.value)||[]).concat(Wje)),n=Ut();return O(n?()=>{var a;return Cv(Object.entries((a=n.proxy)==null?void 0:a.$attrs).filter(([s])=>!r.value.includes(s)&&!(t&&Gje.test(s))))}:()=>({}))},th=({from:e,replacement:t,scope:i,version:r,ref:n,type:a="API"},s)=>{Ne(()=>g(s),o=>{},{immediate:!0})},MK=(e,t,i,r)=>{let n={offsetX:0,offsetY:0};const a=c=>{const u=c.clientX,d=c.clientY,{offsetX:h,offsetY:f}=n,p=e.value.getBoundingClientRect(),m=p.left,v=p.top,y=p.width,x=p.height,b=document.documentElement.clientWidth,w=document.documentElement.clientHeight,S=-m+h,_=-v+f,E=b-m-y+h,C=w-v-x+f,A=T=>{let P=h+T.clientX-u,D=f+T.clientY-d;r!=null&&r.value||(P=Math.min(Math.max(P,S),E),D=Math.min(Math.max(D,_),C)),n={offsetX:P,offsetY:D},e.value&&(e.value.style.transform=`translate(${zr(P)}, ${zr(D)})`)},M=()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",A),document.addEventListener("mouseup",M)},s=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",a)},o=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",a)},l=()=>{n={offsetX:0,offsetY:0},e.value&&(e.value.style.transform="none")};return Lt(()=>{Ca(()=>{i.value?s():o()})}),Bi(()=>{o()}),{resetPosition:l}};var $je={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const Zje=e=>(t,i)=>qje(t,i,g(e)),qje=(e,t,i)=>Nr(i,e,e).replace(/\{(\w+)\}/g,(r,n)=>{var a;return`${(a=t==null?void 0:t[n])!=null?a:`{${n}}`}`}),Yje=e=>{const t=O(()=>g(e).name),i=Ji(e)?e:j(e);return{lang:t,locale:i,t:Zje(e)}},TK=Symbol("localeContextKey"),di=e=>{const t=e||rt(TK,j());return Yje(O(()=>t.value||$je))},Hg="el",Kje="is-",qh=(e,t,i,r,n)=>{let a=`${e}-${t}`;return i&&(a+=`-${i}`),r&&(a+=`__${r}`),n&&(a+=`--${n}`),a},PK=Symbol("namespaceContextKey"),GI=e=>{const t=e||(Ut()?rt(PK,j(Hg)):j(Hg));return O(()=>g(t)||Hg)},Ve=(e,t)=>{const i=GI(t);return{namespace:i,b:(m="")=>qh(i.value,e,m,"",""),e:m=>m?qh(i.value,e,"",m,""):"",m:m=>m?qh(i.value,e,"","",m):"",be:(m,v)=>m&&v?qh(i.value,e,m,v,""):"",em:(m,v)=>m&&v?qh(i.value,e,"",m,v):"",bm:(m,v)=>m&&v?qh(i.value,e,m,"",v):"",bem:(m,v,y)=>m&&v&&y?qh(i.value,e,m,v,y):"",is:(m,...v)=>{const y=v.length>=1?v[0]:!0;return m&&y?`${Kje}${m}`:""},cssVar:m=>{const v={};for(const y in m)m[y]&&(v[`--${i.value}-${y}`]=m[y]);return v},cssVarName:m=>`--${i.value}-${m}`,cssVarBlock:m=>{const v={};for(const y in m)m[y]&&(v[`--${i.value}-${e}-${y}`]=m[y]);return v},cssVarBlockName:m=>`--${i.value}-${e}-${m}`}},$I=(e,t={})=>{Ji(e)||bn("[useLockscreen]","You need to pass a ref param to this function");const i=t.ns||Ve("popup"),r=O(()=>i.bm("parent","hidden"));if(!si||Rs(document.body,r.value))return;let n=0,a=!1,s="0";const o=()=>{setTimeout(()=>{typeof document>"u"||(Wa(document==null?void 0:document.body,r.value),a&&document&&(document.body.style.width=s))},200)};Ne(e,l=>{if(!l){o();return}a=!Rs(document.body,r.value),a&&(s=document.body.style.width),n=yK(i.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,u=Rd(document.body,"overflowY");n>0&&(c||u==="scroll")&&a&&(document.body.style.width=`calc(100% - ${n}px)`),Eo(document.body,r.value)}),yV(()=>o())},Z4=[],Xje=e=>{Z4.length!==0&&e.code===at.esc&&(e.stopPropagation(),Z4[Z4.length-1].handleClose())};si&&Oi(document,"keydown",Xje);const Qje=Ol({type:be(Boolean),default:null}),Jje=Ol({type:be(Function)}),eWe=e=>{const t=`update:${e}`,i=`onUpdate:${e}`,r=[t],n={[e]:Qje,[i]:Jje};return{useModelToggle:({indicator:s,toggleReason:o,shouldHideWhenRouteChanges:l,shouldProceed:c,onShow:u,onHide:d})=>{const h=Ut(),{emit:f}=h,p=h.props,m=O(()=>Wt(p[i])),v=O(()=>p[e]===null),y=E=>{s.value!==!0&&(s.value=!0,o&&(o.value=E),Wt(u)&&u(E))},x=E=>{s.value!==!1&&(s.value=!1,o&&(o.value=E),Wt(d)&&d(E))},b=E=>{if(p.disabled===!0||Wt(c)&&!c())return;const C=m.value&&si;C&&f(t,!0),(v.value||!C)&&y(E)},w=E=>{if(p.disabled===!0||!si)return;const C=m.value&&si;C&&f(t,!1),(v.value||!C)&&x(E)},S=E=>{Gi(E)&&(p.disabled&&E?m.value&&f(t,!1):s.value!==E&&(E?y():x()))},_=()=>{s.value?w():b()};return Ne(()=>p[e],S),l&&h.appContext.config.globalProperties.$route!==void 0&&Ne(()=>({...h.proxy.$route}),()=>{l.value&&s.value&&w()}),Lt(()=>{S(p[e])}),{hide:w,show:b,toggle:_,hasUpdateHandler:m}},useModelToggleProps:n,useModelToggleEmits:r}},DK=e=>{const t=Ut();return O(()=>{var i,r;return(r=(i=t==null?void 0:t.proxy)==null?void 0:i.$props)==null?void 0:r[e]})};var Ls="top",Uo="bottom",Ho="right",Bs="left",ZI="auto",Dy=[Ls,Uo,Ho,Bs],Av="start",k1="end",tWe="clippingParents",IK="viewport",Q0="popper",iWe="reference",fF=Dy.reduce(function(e,t){return e.concat([t+"-"+Av,t+"-"+k1])},[]),Xu=[].concat(Dy,[ZI]).reduce(function(e,t){return e.concat([t,t+"-"+Av,t+"-"+k1])},[]),rWe="beforeRead",nWe="read",aWe="afterRead",sWe="beforeMain",oWe="main",lWe="afterMain",cWe="beforeWrite",uWe="write",dWe="afterWrite",hWe=[rWe,nWe,aWe,sWe,oWe,lWe,cWe,uWe,dWe];function Sc(e){return e?(e.nodeName||"").toLowerCase():null}function Rl(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Mv(e){var t=Rl(e).Element;return e instanceof t||e instanceof Element}function Ro(e){var t=Rl(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function qI(e){if(typeof ShadowRoot>"u")return!1;var t=Rl(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function fWe(e){var t=e.state;Object.keys(t.elements).forEach(function(i){var r=t.styles[i]||{},n=t.attributes[i]||{},a=t.elements[i];!Ro(a)||!Sc(a)||(Object.assign(a.style,r),Object.keys(n).forEach(function(s){var o=n[s];o===!1?a.removeAttribute(s):a.setAttribute(s,o===!0?"":o)}))})}function pWe(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(r){var n=t.elements[r],a=t.attributes[r]||{},s=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:i[r]),o=s.reduce(function(l,c){return l[c]="",l},{});!Ro(n)||!Sc(n)||(Object.assign(n.style,o),Object.keys(a).forEach(function(l){n.removeAttribute(l)}))})}}var OK={name:"applyStyles",enabled:!0,phase:"write",fn:fWe,effect:pWe,requires:["computeStyles"]};function vc(e){return e.split("-")[0]}var Ff=Math.max,n_=Math.min,Tv=Math.round;function Pv(e,t){t===void 0&&(t=!1);var i=e.getBoundingClientRect(),r=1,n=1;if(Ro(e)&&t){var a=e.offsetHeight,s=e.offsetWidth;s>0&&(r=Tv(i.width)/s||1),a>0&&(n=Tv(i.height)/a||1)}return{width:i.width/r,height:i.height/n,top:i.top/n,right:i.right/r,bottom:i.bottom/n,left:i.left/r,x:i.left/r,y:i.top/n}}function YI(e){var t=Pv(e),i=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:r}}function RK(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&qI(i)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ku(e){return Rl(e).getComputedStyle(e)}function mWe(e){return["table","td","th"].indexOf(Sc(e))>=0}function Oh(e){return((Mv(e)?e.ownerDocument:e.document)||window.document).documentElement}function WS(e){return Sc(e)==="html"?e:e.assignedSlot||e.parentNode||(qI(e)?e.host:null)||Oh(e)}function pF(e){return!Ro(e)||ku(e).position==="fixed"?null:e.offsetParent}function vWe(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,i=navigator.userAgent.indexOf("Trident")!==-1;if(i&&Ro(e)){var r=ku(e);if(r.position==="fixed")return null}var n=WS(e);for(qI(n)&&(n=n.host);Ro(n)&&["html","body"].indexOf(Sc(n))<0;){var a=ku(n);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return n;n=n.parentNode}return null}function Iy(e){for(var t=Rl(e),i=pF(e);i&&mWe(i)&&ku(i).position==="static";)i=pF(i);return i&&(Sc(i)==="html"||Sc(i)==="body"&&ku(i).position==="static")?t:i||vWe(e)||t}function KI(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function jg(e,t,i){return Ff(e,n_(t,i))}function gWe(e,t,i){var r=jg(e,t,i);return r>i?i:r}function kK(){return{top:0,right:0,bottom:0,left:0}}function LK(e){return Object.assign({},kK(),e)}function BK(e,t){return t.reduce(function(i,r){return i[r]=e,i},{})}var yWe=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,LK(typeof e!="number"?e:BK(e,Dy))};function bWe(e){var t,i=e.state,r=e.name,n=e.options,a=i.elements.arrow,s=i.modifiersData.popperOffsets,o=vc(i.placement),l=KI(o),c=[Bs,Ho].indexOf(o)>=0,u=c?"height":"width";if(!(!a||!s)){var d=yWe(n.padding,i),h=YI(a),f=l==="y"?Ls:Bs,p=l==="y"?Uo:Ho,m=i.rects.reference[u]+i.rects.reference[l]-s[l]-i.rects.popper[u],v=s[l]-i.rects.reference[l],y=Iy(a),x=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,b=m/2-v/2,w=d[f],S=x-h[u]-d[p],_=x/2-h[u]/2+b,E=jg(w,_,S),C=l;i.modifiersData[r]=(t={},t[C]=E,t.centerOffset=E-_,t)}}function wWe(e){var t=e.state,i=e.options,r=i.element,n=r===void 0?"[data-popper-arrow]":r;n!=null&&(typeof n=="string"&&(n=t.elements.popper.querySelector(n),!n)||!RK(t.elements.popper,n)||(t.elements.arrow=n))}var xWe={name:"arrow",enabled:!0,phase:"main",fn:bWe,effect:wWe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Dv(e){return e.split("-")[1]}var _We={top:"auto",right:"auto",bottom:"auto",left:"auto"};function SWe(e){var t=e.x,i=e.y,r=window,n=r.devicePixelRatio||1;return{x:Tv(t*n)/n||0,y:Tv(i*n)/n||0}}function mF(e){var t,i=e.popper,r=e.popperRect,n=e.placement,a=e.variation,s=e.offsets,o=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,h=s.x,f=h===void 0?0:h,p=s.y,m=p===void 0?0:p,v=typeof u=="function"?u({x:f,y:m}):{x:f,y:m};f=v.x,m=v.y;var y=s.hasOwnProperty("x"),x=s.hasOwnProperty("y"),b=Bs,w=Ls,S=window;if(c){var _=Iy(i),E="clientHeight",C="clientWidth";if(_===Rl(i)&&(_=Oh(i),ku(_).position!=="static"&&o==="absolute"&&(E="scrollHeight",C="scrollWidth")),_=_,n===Ls||(n===Bs||n===Ho)&&a===k1){w=Uo;var A=d&&_===S&&S.visualViewport?S.visualViewport.height:_[E];m-=A-r.height,m*=l?1:-1}if(n===Bs||(n===Ls||n===Uo)&&a===k1){b=Ho;var M=d&&_===S&&S.visualViewport?S.visualViewport.width:_[C];f-=M-r.width,f*=l?1:-1}}var T=Object.assign({position:o},c&&_We),P=u===!0?SWe({x:f,y:m}):{x:f,y:m};if(f=P.x,m=P.y,l){var D;return Object.assign({},T,(D={},D[w]=x?"0":"",D[b]=y?"0":"",D.transform=(S.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",D))}return Object.assign({},T,(t={},t[w]=x?m+"px":"",t[b]=y?f+"px":"",t.transform="",t))}function CWe(e){var t=e.state,i=e.options,r=i.gpuAcceleration,n=r===void 0?!0:r,a=i.adaptive,s=a===void 0?!0:a,o=i.roundOffsets,l=o===void 0?!0:o,c={placement:vc(t.placement),variation:Dv(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,mF(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,mF(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var NK={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:CWe,data:{}},Aw={passive:!0};function EWe(e){var t=e.state,i=e.instance,r=e.options,n=r.scroll,a=n===void 0?!0:n,s=r.resize,o=s===void 0?!0:s,l=Rl(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach(function(u){u.addEventListener("scroll",i.update,Aw)}),o&&l.addEventListener("resize",i.update,Aw),function(){a&&c.forEach(function(u){u.removeEventListener("scroll",i.update,Aw)}),o&&l.removeEventListener("resize",i.update,Aw)}}var FK={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:EWe,data:{}},AWe={left:"right",right:"left",bottom:"top",top:"bottom"};function m2(e){return e.replace(/left|right|bottom|top/g,function(t){return AWe[t]})}var MWe={start:"end",end:"start"};function vF(e){return e.replace(/start|end/g,function(t){return MWe[t]})}function XI(e){var t=Rl(e),i=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:i,scrollTop:r}}function QI(e){return Pv(Oh(e)).left+XI(e).scrollLeft}function TWe(e){var t=Rl(e),i=Oh(e),r=t.visualViewport,n=i.clientWidth,a=i.clientHeight,s=0,o=0;return r&&(n=r.width,a=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=r.offsetLeft,o=r.offsetTop)),{width:n,height:a,x:s+QI(e),y:o}}function PWe(e){var t,i=Oh(e),r=XI(e),n=(t=e.ownerDocument)==null?void 0:t.body,a=Ff(i.scrollWidth,i.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),s=Ff(i.scrollHeight,i.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),o=-r.scrollLeft+QI(e),l=-r.scrollTop;return ku(n||i).direction==="rtl"&&(o+=Ff(i.clientWidth,n?n.clientWidth:0)-a),{width:a,height:s,x:o,y:l}}function JI(e){var t=ku(e),i=t.overflow,r=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+n+r)}function zK(e){return["html","body","#document"].indexOf(Sc(e))>=0?e.ownerDocument.body:Ro(e)&&JI(e)?e:zK(WS(e))}function Wg(e,t){var i;t===void 0&&(t=[]);var r=zK(e),n=r===((i=e.ownerDocument)==null?void 0:i.body),a=Rl(r),s=n?[a].concat(a.visualViewport||[],JI(r)?r:[]):r,o=t.concat(s);return n?o:o.concat(Wg(WS(s)))}function xT(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function DWe(e){var t=Pv(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function gF(e,t){return t===IK?xT(TWe(e)):Mv(t)?DWe(t):xT(PWe(Oh(e)))}function IWe(e){var t=Wg(WS(e)),i=["absolute","fixed"].indexOf(ku(e).position)>=0,r=i&&Ro(e)?Iy(e):e;return Mv(r)?t.filter(function(n){return Mv(n)&&RK(n,r)&&Sc(n)!=="body"}):[]}function OWe(e,t,i){var r=t==="clippingParents"?IWe(e):[].concat(t),n=[].concat(r,[i]),a=n[0],s=n.reduce(function(o,l){var c=gF(e,l);return o.top=Ff(c.top,o.top),o.right=n_(c.right,o.right),o.bottom=n_(c.bottom,o.bottom),o.left=Ff(c.left,o.left),o},gF(e,a));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function VK(e){var t=e.reference,i=e.element,r=e.placement,n=r?vc(r):null,a=r?Dv(r):null,s=t.x+t.width/2-i.width/2,o=t.y+t.height/2-i.height/2,l;switch(n){case Ls:l={x:s,y:t.y-i.height};break;case Uo:l={x:s,y:t.y+t.height};break;case Ho:l={x:t.x+t.width,y:o};break;case Bs:l={x:t.x-i.width,y:o};break;default:l={x:t.x,y:t.y}}var c=n?KI(n):null;if(c!=null){var u=c==="y"?"height":"width";switch(a){case Av:l[c]=l[c]-(t[u]/2-i[u]/2);break;case k1:l[c]=l[c]+(t[u]/2-i[u]/2);break}}return l}function L1(e,t){t===void 0&&(t={});var i=t,r=i.placement,n=r===void 0?e.placement:r,a=i.boundary,s=a===void 0?tWe:a,o=i.rootBoundary,l=o===void 0?IK:o,c=i.elementContext,u=c===void 0?Q0:c,d=i.altBoundary,h=d===void 0?!1:d,f=i.padding,p=f===void 0?0:f,m=LK(typeof p!="number"?p:BK(p,Dy)),v=u===Q0?iWe:Q0,y=e.rects.popper,x=e.elements[h?v:u],b=OWe(Mv(x)?x:x.contextElement||Oh(e.elements.popper),s,l),w=Pv(e.elements.reference),S=VK({reference:w,element:y,strategy:"absolute",placement:n}),_=xT(Object.assign({},y,S)),E=u===Q0?_:w,C={top:b.top-E.top+m.top,bottom:E.bottom-b.bottom+m.bottom,left:b.left-E.left+m.left,right:E.right-b.right+m.right},A=e.modifiersData.offset;if(u===Q0&&A){var M=A[n];Object.keys(C).forEach(function(T){var P=[Ho,Uo].indexOf(T)>=0?1:-1,D=[Ls,Uo].indexOf(T)>=0?"y":"x";C[T]+=M[D]*P})}return C}function RWe(e,t){t===void 0&&(t={});var i=t,r=i.placement,n=i.boundary,a=i.rootBoundary,s=i.padding,o=i.flipVariations,l=i.allowedAutoPlacements,c=l===void 0?Xu:l,u=Dv(r),d=u?o?fF:fF.filter(function(p){return Dv(p)===u}):Dy,h=d.filter(function(p){return c.indexOf(p)>=0});h.length===0&&(h=d);var f=h.reduce(function(p,m){return p[m]=L1(e,{placement:m,boundary:n,rootBoundary:a,padding:s})[vc(m)],p},{});return Object.keys(f).sort(function(p,m){return f[p]-f[m]})}function kWe(e){if(vc(e)===ZI)return[];var t=m2(e);return[vF(e),t,vF(t)]}function LWe(e){var t=e.state,i=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var n=i.mainAxis,a=n===void 0?!0:n,s=i.altAxis,o=s===void 0?!0:s,l=i.fallbackPlacements,c=i.padding,u=i.boundary,d=i.rootBoundary,h=i.altBoundary,f=i.flipVariations,p=f===void 0?!0:f,m=i.allowedAutoPlacements,v=t.options.placement,y=vc(v),x=y===v,b=l||(x||!p?[m2(v)]:kWe(v)),w=[v].concat(b).reduce(function(q,ae){return q.concat(vc(ae)===ZI?RWe(t,{placement:ae,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:m}):ae)},[]),S=t.rects.reference,_=t.rects.popper,E=new Map,C=!0,A=w[0],M=0;M<w.length;M++){var T=w[M],P=vc(T),D=Dv(T)===Av,k=[Ls,Uo].indexOf(P)>=0,L=k?"width":"height",R=L1(t,{placement:T,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),N=k?D?Ho:Bs:D?Uo:Ls;S[L]>_[L]&&(N=m2(N));var I=m2(N),B=[];if(a&&B.push(R[P]<=0),o&&B.push(R[N]<=0,R[I]<=0),B.every(function(q){return q})){A=T,C=!1;break}E.set(T,B)}if(C)for(var z=p?3:1,V=function(q){var ae=w.find(function(J){var $=E.get(J);if($)return $.slice(0,q).every(function(te){return te})});if(ae)return A=ae,"break"},W=z;W>0;W--){var G=V(W);if(G==="break")break}t.placement!==A&&(t.modifiersData[r]._skip=!0,t.placement=A,t.reset=!0)}}var BWe={name:"flip",enabled:!0,phase:"main",fn:LWe,requiresIfExists:["offset"],data:{_skip:!1}};function yF(e,t,i){return i===void 0&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function bF(e){return[Ls,Ho,Uo,Bs].some(function(t){return e[t]>=0})}function NWe(e){var t=e.state,i=e.name,r=t.rects.reference,n=t.rects.popper,a=t.modifiersData.preventOverflow,s=L1(t,{elementContext:"reference"}),o=L1(t,{altBoundary:!0}),l=yF(s,r),c=yF(o,n,a),u=bF(l),d=bF(c);t.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}var FWe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:NWe};function zWe(e,t,i){var r=vc(e),n=[Bs,Ls].indexOf(r)>=0?-1:1,a=typeof i=="function"?i(Object.assign({},t,{placement:e})):i,s=a[0],o=a[1];return s=s||0,o=(o||0)*n,[Bs,Ho].indexOf(r)>=0?{x:o,y:s}:{x:s,y:o}}function VWe(e){var t=e.state,i=e.options,r=e.name,n=i.offset,a=n===void 0?[0,0]:n,s=Xu.reduce(function(u,d){return u[d]=zWe(d,t.rects,a),u},{}),o=s[t.placement],l=o.x,c=o.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=s}var UWe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:VWe};function HWe(e){var t=e.state,i=e.name;t.modifiersData[i]=VK({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var UK={name:"popperOffsets",enabled:!0,phase:"read",fn:HWe,data:{}};function jWe(e){return e==="x"?"y":"x"}function WWe(e){var t=e.state,i=e.options,r=e.name,n=i.mainAxis,a=n===void 0?!0:n,s=i.altAxis,o=s===void 0?!1:s,l=i.boundary,c=i.rootBoundary,u=i.altBoundary,d=i.padding,h=i.tether,f=h===void 0?!0:h,p=i.tetherOffset,m=p===void 0?0:p,v=L1(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),y=vc(t.placement),x=Dv(t.placement),b=!x,w=KI(y),S=jWe(w),_=t.modifiersData.popperOffsets,E=t.rects.reference,C=t.rects.popper,A=typeof m=="function"?m(Object.assign({},t.rects,{placement:t.placement})):m,M=typeof A=="number"?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,P={x:0,y:0};if(_){if(a){var D,k=w==="y"?Ls:Bs,L=w==="y"?Uo:Ho,R=w==="y"?"height":"width",N=_[w],I=N+v[k],B=N-v[L],z=f?-C[R]/2:0,V=x===Av?E[R]:C[R],W=x===Av?-C[R]:-E[R],G=t.elements.arrow,q=f&&G?YI(G):{width:0,height:0},ae=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:kK(),J=ae[k],$=ae[L],te=jg(0,E[R],q[R]),Q=b?E[R]/2-z-te-J-M.mainAxis:V-te-J-M.mainAxis,pe=b?-E[R]/2+z+te+$+M.mainAxis:W+te+$+M.mainAxis,me=t.elements.arrow&&Iy(t.elements.arrow),le=me?w==="y"?me.clientTop||0:me.clientLeft||0:0,Z=(D=T==null?void 0:T[w])!=null?D:0,oe=N+Q-Z-le,ge=N+pe-Z,Ie=jg(f?n_(I,oe):I,N,f?Ff(B,ge):B);_[w]=Ie,P[w]=Ie-N}if(o){var we,xe=w==="x"?Ls:Bs,Se=w==="x"?Uo:Ho,Le=_[S],Be=S==="y"?"height":"width",ee=Le+v[xe],X=Le-v[Se],ue=[Ls,Bs].indexOf(y)!==-1,Oe=(we=T==null?void 0:T[S])!=null?we:0,Y=ue?ee:Le-E[Be]-C[Be]-Oe+M.altAxis,qe=ue?Le+E[Be]+C[Be]-Oe-M.altAxis:X,et=f&&ue?gWe(Y,Le,qe):jg(f?Y:ee,Le,f?qe:X);_[S]=et,P[S]=et-Le}t.modifiersData[r]=P}}var GWe={name:"preventOverflow",enabled:!0,phase:"main",fn:WWe,requiresIfExists:["offset"]};function $We(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function ZWe(e){return e===Rl(e)||!Ro(e)?XI(e):$We(e)}function qWe(e){var t=e.getBoundingClientRect(),i=Tv(t.width)/e.offsetWidth||1,r=Tv(t.height)/e.offsetHeight||1;return i!==1||r!==1}function YWe(e,t,i){i===void 0&&(i=!1);var r=Ro(t),n=Ro(t)&&qWe(t),a=Oh(t),s=Pv(e,n),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!i)&&((Sc(t)!=="body"||JI(a))&&(o=ZWe(t)),Ro(t)?(l=Pv(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):a&&(l.x=QI(a))),{x:s.left+o.scrollLeft-l.x,y:s.top+o.scrollTop-l.y,width:s.width,height:s.height}}function KWe(e){var t=new Map,i=new Set,r=[];e.forEach(function(a){t.set(a.name,a)});function n(a){i.add(a.name);var s=[].concat(a.requires||[],a.requiresIfExists||[]);s.forEach(function(o){if(!i.has(o)){var l=t.get(o);l&&n(l)}}),r.push(a)}return e.forEach(function(a){i.has(a.name)||n(a)}),r}function XWe(e){var t=KWe(e);return hWe.reduce(function(i,r){return i.concat(t.filter(function(n){return n.phase===r}))},[])}function QWe(e){var t;return function(){return t||(t=new Promise(function(i){Promise.resolve().then(function(){t=void 0,i(e())})})),t}}function JWe(e){var t=e.reduce(function(i,r){var n=i[r.name];return i[r.name]=n?Object.assign({},n,r,{options:Object.assign({},n.options,r.options),data:Object.assign({},n.data,r.data)}):r,i},{});return Object.keys(t).map(function(i){return t[i]})}var wF={placement:"bottom",modifiers:[],strategy:"absolute"};function xF(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function e8(e){e===void 0&&(e={});var t=e,i=t.defaultModifiers,r=i===void 0?[]:i,n=t.defaultOptions,a=n===void 0?wF:n;return function(s,o,l){l===void 0&&(l=a);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},wF,a),modifiersData:{},elements:{reference:s,popper:o},attributes:{},styles:{}},u=[],d=!1,h={state:c,setOptions:function(m){var v=typeof m=="function"?m(c.options):m;p(),c.options=Object.assign({},a,c.options,v),c.scrollParents={reference:Mv(s)?Wg(s):s.contextElement?Wg(s.contextElement):[],popper:Wg(o)};var y=XWe(JWe([].concat(r,c.options.modifiers)));return c.orderedModifiers=y.filter(function(x){return x.enabled}),f(),h.update()},forceUpdate:function(){if(!d){var m=c.elements,v=m.reference,y=m.popper;if(xF(v,y)){c.rects={reference:YWe(v,Iy(y),c.options.strategy==="fixed"),popper:YI(y)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(C){return c.modifiersData[C.name]=Object.assign({},C.data)});for(var x=0;x<c.orderedModifiers.length;x++){if(c.reset===!0){c.reset=!1,x=-1;continue}var b=c.orderedModifiers[x],w=b.fn,S=b.options,_=S===void 0?{}:S,E=b.name;typeof w=="function"&&(c=w({state:c,options:_,name:E,instance:h})||c)}}}},update:QWe(function(){return new Promise(function(m){h.forceUpdate(),m(c)})}),destroy:function(){p(),d=!0}};if(!xF(s,o))return h;h.setOptions(l).then(function(m){!d&&l.onFirstUpdate&&l.onFirstUpdate(m)});function f(){c.orderedModifiers.forEach(function(m){var v=m.name,y=m.options,x=y===void 0?{}:y,b=m.effect;if(typeof b=="function"){var w=b({state:c,name:v,instance:h,options:x}),S=function(){};u.push(w||S)}})}function p(){u.forEach(function(m){return m()}),u=[]}return h}}e8();var eGe=[FK,UK,NK,OK];e8({defaultModifiers:eGe});var tGe=[FK,UK,NK,OK,UWe,BWe,GWe,xWe,FWe],iGe=e8({defaultModifiers:tGe});const rGe=(e,t,i={})=>{const r={name:"updateState",enabled:!0,phase:"write",fn:({state:l})=>{const c=nGe(l);Object.assign(s.value,c)},requires:["computeStyles"]},n=O(()=>{const{onFirstUpdate:l,placement:c,strategy:u,modifiers:d}=g(i);return{onFirstUpdate:l,placement:c||"bottom",strategy:u||"absolute",modifiers:[...d||[],r,{name:"applyStyles",enabled:!1}]}}),a=Wi(),s=j({styles:{popper:{position:g(n).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),o=()=>{a.value&&(a.value.destroy(),a.value=void 0)};return Ne(n,l=>{const c=g(a);c&&c.setOptions(l)},{deep:!0}),Ne([e,t],([l,c])=>{o(),!(!l||!c)&&(a.value=iGe(l,c,g(n)))}),Bi(()=>{o()}),{state:O(()=>{var l;return{...((l=g(a))==null?void 0:l.state)||{}}}),styles:O(()=>g(s).styles),attributes:O(()=>g(s).attributes),update:()=>{var l;return(l=g(a))==null?void 0:l.update()},forceUpdate:()=>{var l;return(l=g(a))==null?void 0:l.forceUpdate()},instanceRef:O(()=>g(a))}};function nGe(e){const t=Object.keys(e.elements),i=Cv(t.map(n=>[n,e.styles[n]||{}])),r=Cv(t.map(n=>[n,e.attributes[n]]));return{styles:i,attributes:r}}const t8=e=>{if(!e)return{onClick:Sr,onMousedown:Sr,onMouseup:Sr};let t=!1,i=!1;return{onClick:s=>{t&&i&&e(s),t=i=!1},onMousedown:s=>{t=s.target===s.currentTarget},onMouseup:s=>{i=s.target===s.currentTarget}}},aGe=(e,t=0)=>{if(t===0)return e;const i=Ri(t)&&!!t.initVal,r=j(i);let n=null;const a=o=>{if(Qi(o)){r.value=e.value;return}n&&clearTimeout(n),n=setTimeout(()=>{r.value=e.value},o)},s=o=>{o==="leading"?gt(t)?a(t):a(t.leading):Ri(t)?a(t.trailing):r.value=!1};return Lt(()=>s("leading")),Ne(()=>e.value,o=>{s(o?"leading":"trailing")}),r};function _F(){let e;const t=(r,n)=>{i(),e=window.setTimeout(r,n)},i=()=>window.clearTimeout(e);return yy(()=>i()),{registerTimeout:t,cancelTimeout:i}}const SF={prefix:Math.floor(Math.random()*1e4),current:0},sGe=Symbol("elIdInjection"),i8=()=>Ut()?rt(sGe,SF):SF,ua=e=>{const t=i8(),i=GI();return iT(()=>g(e)||`${i.value}-id-${t.prefix}-${t.current++}`)};let fm=[];const CF=e=>{e.code===at.esc&&fm.forEach(t=>t(e))},oGe=e=>{Lt(()=>{fm.length===0&&document.addEventListener("keydown",CF),si&&fm.push(e)}),Bi(()=>{fm=fm.filter(t=>t!==e),fm.length===0&&si&&document.removeEventListener("keydown",CF)})},HK=()=>{const e=GI(),t=i8(),i=O(()=>`${e.value}-popper-container-${t.prefix}`),r=O(()=>`#${i.value}`);return{id:i,selector:r}},lGe=e=>{const t=document.createElement("div");return t.id=e,document.body.appendChild(t),t},cGe=()=>{const{id:e,selector:t}=HK();return I_(()=>{si&&(document.body.querySelector(t.value)||lGe(e.value))}),{id:e,selector:t}},uGe=je({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),dGe=({showAfter:e,hideAfter:t,autoClose:i,open:r,close:n})=>{const{registerTimeout:a}=_F(),{registerTimeout:s,cancelTimeout:o}=_F();return{onOpen:u=>{a(()=>{r(u);const d=g(i);gt(d)&&d>0&&s(()=>{n(u)},d)},g(e))},onClose:u=>{o(),a(()=>{n(u)},g(t))}}},jK=Symbol("elForwardRef"),hGe=e=>{Yt(jK,{setForwardRef:i=>{e.value=i}})},fGe=e=>({mounted(t){e(t)},updated(t){e(t)},unmounted(){e(null)}}),EF={current:0},AF=j(0),WK=2e3,MF=Symbol("elZIndexContextKey"),GK=Symbol("zIndexContextKey"),d0=e=>{const t=Ut()?rt(MF,EF):EF,i=e||(Ut()?rt(GK,void 0):void 0),r=O(()=>{const s=g(i);return gt(s)?s:WK}),n=O(()=>r.value+AF.value),a=()=>(t.current++,AF.value=t.current,n.value);return!si&&rt(MF),{initialZIndex:r,currentZIndex:n,nextZIndex:a}};function Oy(e){return e.split("-")[0]}function GS(e){return e.split("-")[1]}function Ry(e){return["top","bottom"].includes(Oy(e))?"x":"y"}function r8(e){return e==="y"?"height":"width"}function TF(e,t,i){let{reference:r,floating:n}=e;const a=r.x+r.width/2-n.width/2,s=r.y+r.height/2-n.height/2,o=Ry(t),l=r8(o),c=r[l]/2-n[l]/2,u=Oy(t),d=o==="x";let h;switch(u){case"top":h={x:a,y:r.y-n.height};break;case"bottom":h={x:a,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:s};break;case"left":h={x:r.x-n.width,y:s};break;default:h={x:r.x,y:r.y}}switch(GS(t)){case"start":h[o]-=c*(i&&d?-1:1);break;case"end":h[o]+=c*(i&&d?-1:1);break}return h}const pGe=async(e,t,i)=>{const{placement:r="bottom",strategy:n="absolute",middleware:a=[],platform:s}=i,o=await(s.isRTL==null?void 0:s.isRTL(t));let l=await s.getElementRects({reference:e,floating:t,strategy:n}),{x:c,y:u}=TF(l,r,o),d=r,h={},f=0;for(let p=0;p<a.length;p++){const{name:m,fn:v}=a[p],{x:y,y:x,data:b,reset:w}=await v({x:c,y:u,initialPlacement:r,placement:d,strategy:n,middlewareData:h,rects:l,platform:s,elements:{reference:e,floating:t}});if(c=y??c,u=x??u,h={...h,[m]:{...h[m],...b}},w&&f<=50){f++,typeof w=="object"&&(w.placement&&(d=w.placement),w.rects&&(l=w.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:n}):w.rects),{x:c,y:u}=TF(l,d,o)),p=-1;continue}}return{x:c,y:u,placement:d,strategy:n,middlewareData:h}};function mGe(e){return{top:0,right:0,bottom:0,left:0,...e}}function $K(e){return typeof e!="number"?mGe(e):{top:e,right:e,bottom:e,left:e}}function a_(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function n8(e,t){var i;t===void 0&&(t={});const{x:r,y:n,platform:a,rects:s,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=t,p=$K(f),v=o[h?d==="floating"?"reference":"floating":d],y=a_(await a.getClippingRect({element:(i=await(a.isElement==null?void 0:a.isElement(v)))==null||i?v:v.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),x=a_(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({rect:d==="floating"?{...s.floating,x:r,y:n}:s.reference,offsetParent:await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),strategy:l}):s[d]);return{top:y.top-x.top+p.top,bottom:x.bottom-y.bottom+p.bottom,left:y.left-x.left+p.left,right:x.right-y.right+p.right}}const vGe=Math.min,gGe=Math.max;function _T(e,t,i){return gGe(e,vGe(t,i))}const ZK=e=>({name:"arrow",options:e,async fn(t){const{element:i,padding:r=0}=e??{},{x:n,y:a,placement:s,rects:o,platform:l}=t;if(i==null)return{};const c=$K(r),u={x:n,y:a},d=Ry(s),h=GS(s),f=r8(d),p=await l.getDimensions(i),m=d==="y"?"top":"left",v=d==="y"?"bottom":"right",y=o.reference[f]+o.reference[d]-u[d]-o.floating[f],x=u[d]-o.reference[d],b=await(l.getOffsetParent==null?void 0:l.getOffsetParent(i));let w=b?d==="y"?b.clientHeight||0:b.clientWidth||0:0;w===0&&(w=o.floating[f]);const S=y/2-x/2,_=c[m],E=w-p[f]-c[v],C=w/2-p[f]/2+S,A=_T(_,C,E),P=(h==="start"?c[m]:c[v])>0&&C!==A&&o.reference[f]<=o.floating[f]?C<_?_-C:E-C:0;return{[d]:u[d]-P,data:{[d]:A,centerOffset:C-A}}}}),yGe={left:"right",right:"left",bottom:"top",top:"bottom"};function s_(e){return e.replace(/left|right|bottom|top/g,t=>yGe[t])}function bGe(e,t,i){i===void 0&&(i=!1);const r=GS(e),n=Ry(e),a=r8(n);let s=n==="x"?r===(i?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(s=s_(s)),{main:s,cross:s_(s)}}const wGe={start:"end",end:"start"};function PF(e){return e.replace(/start|end/g,t=>wGe[t])}function xGe(e){const t=s_(e);return[PF(e),t,PF(t)]}const _Ge=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var i;const{placement:r,middlewareData:n,rects:a,initialPlacement:s,platform:o,elements:l}=t,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",flipAlignment:f=!0,...p}=e,m=Oy(r),y=d||(m===s||!f?[s_(s)]:xGe(s)),x=[s,...y],b=await n8(t,p),w=[];let S=((i=n.flip)==null?void 0:i.overflows)||[];if(c&&w.push(b[m]),u){const{main:A,cross:M}=bGe(r,a,await(o.isRTL==null?void 0:o.isRTL(l.floating)));w.push(b[A],b[M])}if(S=[...S,{placement:r,overflows:w}],!w.every(A=>A<=0)){var _,E;const A=((_=(E=n.flip)==null?void 0:E.index)!=null?_:0)+1,M=x[A];if(M)return{data:{index:A,overflows:S},reset:{placement:M}};let T="bottom";switch(h){case"bestFit":{var C;const P=(C=S.map(D=>[D,D.overflows.filter(k=>k>0).reduce((k,L)=>k+L,0)]).sort((D,k)=>D[1]-k[1])[0])==null?void 0:C[0].placement;P&&(T=P);break}case"initialPlacement":T=s;break}if(r!==T)return{reset:{placement:T}}}return{}}}};async function SGe(e,t){const{placement:i,platform:r,elements:n}=e,a=await(r.isRTL==null?void 0:r.isRTL(n.floating)),s=Oy(i),o=GS(i),l=Ry(i)==="x",c=["left","top"].includes(s)?-1:1,u=a&&l?-1:1,d=typeof t=="function"?t(e):t;let{mainAxis:h,crossAxis:f,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return o&&typeof p=="number"&&(f=o==="end"?p*-1:p),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}const qK=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:i,y:r}=t,n=await SGe(t,e);return{x:i+n.x,y:r+n.y,data:n}}}};function CGe(e){return e==="x"?"y":"x"}const EGe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:i,y:r,placement:n}=t,{mainAxis:a=!0,crossAxis:s=!1,limiter:o={fn:v=>{let{x:y,y:x}=v;return{x:y,y:x}}},...l}=e,c={x:i,y:r},u=await n8(t,l),d=Ry(Oy(n)),h=CGe(d);let f=c[d],p=c[h];if(a){const v=d==="y"?"top":"left",y=d==="y"?"bottom":"right",x=f+u[v],b=f-u[y];f=_T(x,f,b)}if(s){const v=h==="y"?"top":"left",y=h==="y"?"bottom":"right",x=p+u[v],b=p-u[y];p=_T(x,p,b)}const m=o.fn({...t,[d]:f,[h]:p});return{...m,data:{x:m.x-i,y:m.y-r}}}}};function YK(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function Qu(e){if(e==null)return window;if(!YK(e)){const t=e.ownerDocument;return t&&t.defaultView||window}return e}function Cc(e){return Qu(e).getComputedStyle(e)}function Lu(e){return YK(e)?"":e?(e.nodeName||"").toLowerCase():""}function KK(){const e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(t=>t.brand+"/"+t.version).join(" "):navigator.userAgent}function Ec(e){return e instanceof Qu(e).HTMLElement}function yh(e){return e instanceof Qu(e).Element}function AGe(e){return e instanceof Qu(e).Node}function Iv(e){if(typeof ShadowRoot>"u")return!1;const t=Qu(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function $S(e){const{overflow:t,overflowX:i,overflowY:r}=Cc(e);return/auto|scroll|overlay|hidden/.test(t+r+i)}function MGe(e){return["table","td","th"].includes(Lu(e))}function XK(e){const t=/firefox/i.test(KK()),i=Cc(e);return i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].includes(i.willChange)||t&&i.willChange==="filter"||t&&(i.filter?i.filter!=="none":!1)}function QK(){return!/^((?!chrome|android).)*safari/i.test(KK())}const DF=Math.min,Gg=Math.max,o_=Math.round;function Bu(e,t,i){var r,n,a,s;t===void 0&&(t=!1),i===void 0&&(i=!1);const o=e.getBoundingClientRect();let l=1,c=1;t&&Ec(e)&&(l=e.offsetWidth>0&&o_(o.width)/e.offsetWidth||1,c=e.offsetHeight>0&&o_(o.height)/e.offsetHeight||1);const u=yh(e)?Qu(e):window,d=!QK()&&i,h=(o.left+(d&&(r=(n=u.visualViewport)==null?void 0:n.offsetLeft)!=null?r:0))/l,f=(o.top+(d&&(a=(s=u.visualViewport)==null?void 0:s.offsetTop)!=null?a:0))/c,p=o.width/l,m=o.height/c;return{width:p,height:m,top:f,right:h+p,bottom:f+m,left:h,x:h,y:f}}function Rh(e){return((AGe(e)?e.ownerDocument:e.document)||window.document).documentElement}function ZS(e){return yh(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function JK(e){return Bu(Rh(e)).left+ZS(e).scrollLeft}function TGe(e){const t=Bu(e);return o_(t.width)!==e.offsetWidth||o_(t.height)!==e.offsetHeight}function PGe(e,t,i){const r=Ec(t),n=Rh(t),a=Bu(e,r&&TGe(t),i==="fixed");let s={scrollLeft:0,scrollTop:0};const o={x:0,y:0};if(r||!r&&i!=="fixed")if((Lu(t)!=="body"||$S(n))&&(s=ZS(t)),Ec(t)){const l=Bu(t,!0);o.x=l.x+t.clientLeft,o.y=l.y+t.clientTop}else n&&(o.x=JK(n));return{x:a.left+s.scrollLeft-o.x,y:a.top+s.scrollTop-o.y,width:a.width,height:a.height}}function eX(e){return Lu(e)==="html"?e:e.assignedSlot||e.parentNode||(Iv(e)?e.host:null)||Rh(e)}function IF(e){return!Ec(e)||Cc(e).position==="fixed"?null:DGe(e)}function DGe(e){let{offsetParent:t}=e,i=e,r=!1;for(;i&&i!==t;){const{assignedSlot:n}=i;if(n){let a=n.offsetParent;if(Cc(n).display==="contents"){const s=n.hasAttribute("style"),o=n.style.display;n.style.display=Cc(i).display,a=n.offsetParent,n.style.display=o,s||n.removeAttribute("style")}i=n,t!==a&&(t=a,r=!0)}else if(Iv(i)&&i.host&&r)break;i=Iv(i)&&i.host||i.parentNode}return t}function IGe(e){let t=eX(e);for(Iv(t)&&(t=t.host);Ec(t)&&!["html","body"].includes(Lu(t));){if(XK(t))return t;{const i=t.parentNode;t=Iv(i)?i.host:i}}return null}function ST(e){const t=Qu(e);let i=IF(e);for(;i&&MGe(i)&&Cc(i).position==="static";)i=IF(i);return i&&(Lu(i)==="html"||Lu(i)==="body"&&Cc(i).position==="static"&&!XK(i))?t:i||IGe(e)||t}function OF(e){if(Ec(e))return{width:e.offsetWidth,height:e.offsetHeight};const t=Bu(e);return{width:t.width,height:t.height}}function OGe(e){let{rect:t,offsetParent:i,strategy:r}=e;const n=Ec(i),a=Rh(i);if(i===a)return t;let s={scrollLeft:0,scrollTop:0};const o={x:0,y:0};if((n||!n&&r!=="fixed")&&((Lu(i)!=="body"||$S(a))&&(s=ZS(i)),Ec(i))){const l=Bu(i,!0);o.x=l.x+i.clientLeft,o.y=l.y+i.clientTop}return{...t,x:t.x-s.scrollLeft+o.x,y:t.y-s.scrollTop+o.y}}function RGe(e,t){const i=Qu(e),r=Rh(e),n=i.visualViewport;let a=r.clientWidth,s=r.clientHeight,o=0,l=0;if(n){a=n.width,s=n.height;const c=QK();(c||!c&&t==="fixed")&&(o=n.offsetLeft,l=n.offsetTop)}return{width:a,height:s,x:o,y:l}}function kGe(e){var t;const i=Rh(e),r=ZS(e),n=(t=e.ownerDocument)==null?void 0:t.body,a=Gg(i.scrollWidth,i.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),s=Gg(i.scrollHeight,i.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0);let o=-r.scrollLeft+JK(e);const l=-r.scrollTop;return Cc(n||i).direction==="rtl"&&(o+=Gg(i.clientWidth,n?n.clientWidth:0)-a),{width:a,height:s,x:o,y:l}}function tX(e){const t=eX(e);return["html","body","#document"].includes(Lu(t))?e.ownerDocument.body:Ec(t)&&$S(t)?t:tX(t)}function l_(e,t){var i;t===void 0&&(t=[]);const r=tX(e),n=r===((i=e.ownerDocument)==null?void 0:i.body),a=Qu(r),s=n?[a].concat(a.visualViewport||[],$S(r)?r:[]):r,o=t.concat(s);return n?o:o.concat(l_(s))}function LGe(e,t){const i=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(i&&Iv(i)){let r=t;do{if(r&&e===r)return!0;r=r.parentNode||r.host}while(r)}return!1}function BGe(e,t){const i=Bu(e,!1,t==="fixed"),r=i.top+e.clientTop,n=i.left+e.clientLeft;return{top:r,left:n,x:n,y:r,right:n+e.clientWidth,bottom:r+e.clientHeight,width:e.clientWidth,height:e.clientHeight}}function RF(e,t,i){return t==="viewport"?a_(RGe(e,i)):yh(t)?BGe(t,i):a_(kGe(Rh(e)))}function NGe(e){const t=l_(e),r=["absolute","fixed"].includes(Cc(e).position)&&Ec(e)?ST(e):e;return yh(r)?t.filter(n=>yh(n)&&LGe(n,r)&&Lu(n)!=="body"):[]}function FGe(e){let{element:t,boundary:i,rootBoundary:r,strategy:n}=e;const s=[...i==="clippingAncestors"?NGe(t):[].concat(i),r],o=s[0],l=s.reduce((c,u)=>{const d=RF(t,u,n);return c.top=Gg(d.top,c.top),c.right=DF(d.right,c.right),c.bottom=DF(d.bottom,c.bottom),c.left=Gg(d.left,c.left),c},RF(t,o,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}const zGe={getClippingRect:FGe,convertOffsetParentRelativeRectToViewportRelativeRect:OGe,isElement:yh,getDimensions:OF,getOffsetParent:ST,getDocumentElement:Rh,getElementRects:e=>{let{reference:t,floating:i,strategy:r}=e;return{reference:PGe(t,ST(i),r),floating:{...OF(i),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>Cc(e).direction==="rtl"};function VGe(e,t,i,r){r===void 0&&(r={});const{ancestorScroll:n=!0,ancestorResize:a=!0,elementResize:s=!0,animationFrame:o=!1}=r,l=n&&!o,c=a&&!o,u=l||c?[...yh(e)?l_(e):[],...l_(t)]:[];u.forEach(m=>{l&&m.addEventListener("scroll",i,{passive:!0}),c&&m.addEventListener("resize",i)});let d=null;if(s){let m=!0;d=new ResizeObserver(()=>{m||i(),m=!1}),yh(e)&&!o&&d.observe(e),d.observe(t)}let h,f=o?Bu(e):null;o&&p();function p(){const m=Bu(e);f&&(m.x!==f.x||m.y!==f.y||m.width!==f.width||m.height!==f.height)&&i(),f=m,h=requestAnimationFrame(p)}return i(),()=>{var m;u.forEach(v=>{l&&v.removeEventListener("scroll",i),c&&v.removeEventListener("resize",i)}),(m=d)==null||m.disconnect(),d=null,o&&cancelAnimationFrame(h)}}const iX=(e,t,i)=>pGe(e,t,{platform:zGe,...i});je({});const UGe=e=>{if(!si)return;if(!e)return e;const t=ds(e);return t||(Ji(e)?t:e)},HGe=({middleware:e,placement:t,strategy:i})=>{const r=j(),n=j(),a=j(),s=j(),o=j({}),l={x:a,y:s,placement:t,strategy:i,middlewareData:o},c=async()=>{if(!si)return;const u=UGe(r),d=ds(n);if(!u||!d)return;const h=await iX(u,d,{placement:g(t),strategy:g(i),middleware:g(e)});Ev(l).forEach(f=>{l[f].value=h[f]})};return Lt(()=>{Ca(()=>{c()})}),{...l,update:c,referenceRef:r,contentRef:n}},jGe=({arrowRef:e,padding:t})=>({name:"arrow",options:{element:e,padding:t},fn(i){const r=g(e);return r?ZK({element:r,padding:t}).fn(i):{}}});function WGe(e){let t;function i(){if(e.value==null)return;const{selectionStart:n,selectionEnd:a,value:s}=e.value;if(n==null||a==null)return;const o=s.slice(0,Math.max(0,n)),l=s.slice(Math.max(0,a));t={selectionStart:n,selectionEnd:a,value:s,beforeTxt:o,afterTxt:l}}function r(){if(e.value==null||t==null)return;const{value:n}=e.value,{beforeTxt:a,afterTxt:s,selectionStart:o}=t;if(a==null||s==null||o==null)return;let l=n.length;if(n.endsWith(s))l=n.length-s.length;else if(n.startsWith(a))l=a.length;else{const c=a[o-1],u=n.indexOf(c,o-1);u!==-1&&(l=u+1)}e.value.setSelectionRange(l,l)}return[i,r]}const GGe=(e,t,i)=>eh(e.subTree).filter(a=>{var s;return rr(a)&&((s=a.type)==null?void 0:s.name)===t&&!!a.component}).map(a=>a.component.uid).map(a=>i[a]).filter(a=>!!a),a8=(e,t)=>{const i={},r=Wi([]);return{children:r,addChild:s=>{i[s.uid]=s,r.value=GGe(e,t,i)},removeChild:s=>{delete i[s],r.value=r.value.filter(o=>o.uid!==s)}}},wn=Ol({type:String,values:Lc,required:!1}),rX=Symbol("size"),nX=()=>{const e=rt(rX,{});return O(()=>g(e.size)||"")};function mp(e,{beforeFocus:t,afterFocus:i,beforeBlur:r,afterBlur:n}={}){const a=Ut(),{emit:s}=a,o=Wi(),l=j(!1),c=h=>{Wt(t)&&t(h)||l.value||(l.value=!0,s("focus",h),i==null||i())},u=h=>{var f;Wt(r)&&r(h)||h.relatedTarget&&((f=o.value)!=null&&f.contains(h.relatedTarget))||(l.value=!1,s("blur",h),n==null||n())},d=()=>{var h,f;(h=o.value)!=null&&h.contains(document.activeElement)&&o.value!==document.activeElement||(f=e.value)==null||f.focus()};return Ne(o,h=>{h&&h.setAttribute("tabindex","-1")}),Oi(o,"focus",c,!0),Oi(o,"blur",u,!0),Oi(o,"click",d,!0),{isFocused:l,wrapperRef:o,handleFocus:c,handleBlur:u}}function qS({afterComposition:e,emit:t}){const i=j(!1),r=o=>{t==null||t("compositionstart",o),i.value=!0},n=o=>{var l;t==null||t("compositionupdate",o);const c=(l=o.target)==null?void 0:l.value,u=c[c.length-1]||"";i.value=!Hje(u)},a=o=>{t==null||t("compositionend",o),i.value&&(i.value=!1,ft(()=>e(o)))};return{isComposing:i,handleComposition:o=>{o.type==="compositionend"?a(o):n(o)},handleCompositionStart:r,handleCompositionUpdate:n,handleCompositionEnd:a}}const aX=Symbol("emptyValuesContextKey"),$Ge=["",void 0,null],ZGe=void 0,h0=je({emptyValues:Array,valueOnClear:{type:[String,Number,Boolean,Function],default:void 0,validator:e=>Wt(e)?!e():!e}}),YS=(e,t)=>{const i=Ut()?rt(aX,j({})):j({}),r=O(()=>e.emptyValues||i.value.emptyValues||$Ge),n=O(()=>Wt(e.valueOnClear)?e.valueOnClear():e.valueOnClear!==void 0?e.valueOnClear:Wt(i.value.valueOnClear)?i.value.valueOnClear():i.value.valueOnClear!==void 0?i.value.valueOnClear:t!==void 0?t:ZGe),a=s=>r.value.includes(s);return r.value.includes(n.value),{emptyValues:r,valueOnClear:n,isEmptyValue:a}},qGe=je({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),ha=e=>Co(qGe,e),sX=Symbol(),c_=j();function KS(e,t=void 0){const i=Ut()?rt(sX,c_):c_;return e?O(()=>{var r,n;return(n=(r=i.value)==null?void 0:r[e])!=null?n:t}):i}function XS(e,t){const i=KS(),r=Ve(e,O(()=>{var o;return((o=i.value)==null?void 0:o.namespace)||Hg})),n=di(O(()=>{var o;return(o=i.value)==null?void 0:o.locale})),a=d0(O(()=>{var o;return((o=i.value)==null?void 0:o.zIndex)||WK})),s=O(()=>{var o;return g(t)||((o=i.value)==null?void 0:o.size)||""});return s8(O(()=>g(i)||{})),{ns:r,locale:n,zIndex:a,size:s}}const s8=(e,t,i=!1)=>{var r;const n=!!Ut(),a=n?KS():void 0,s=(r=t==null?void 0:t.provide)!=null?r:n?Yt:void 0;if(!s)return;const o=O(()=>{const l=g(e);return a!=null&&a.value?YGe(a.value,l):l});return s(sX,o),s(TK,O(()=>o.value.locale)),s(PK,O(()=>o.value.namespace)),s(GK,O(()=>o.value.zIndex)),s(rX,{size:O(()=>o.value.size||"")}),s(aX,O(()=>({emptyValues:o.value.emptyValues,valueOnClear:o.value.valueOnClear}))),(i||!c_.value)&&(c_.value=o.value),o},YGe=(e,t)=>{const i=[...new Set([...Ev(e),...Ev(t)])],r={};for(const n of i)r[n]=t[n]!==void 0?t[n]:e[n];return r},KGe=je({a11y:{type:Boolean,default:!0},locale:{type:be(Object)},size:wn,button:{type:be(Object)},experimentalFeatures:{type:be(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:be(Object)},zIndex:Number,namespace:{type:String,default:"el"},...h0}),sl={},XGe=ce({name:"ElConfigProvider",props:KGe,setup(e,{slots:t}){Ne(()=>e.message,r=>{Object.assign(sl,r??{})},{immediate:!0,deep:!0});const i=s8(e);return()=>Ee(t,"default",{config:i==null?void 0:i.value})}}),QGe=Rt(XGe),JGe="2.8.8",e$e=(e=[])=>({version:JGe,install:(i,r)=>{i[dF]||(i[dF]=!0,e.forEach(n=>i.use(n)),r&&s8(r,i,!0))}}),t$e=je({zIndex:{type:be([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),i$e={scroll:({scrollTop:e,fixed:t})=>gt(e)&&Gi(t),[nr]:e=>Gi(e)};var Ze=(e,t)=>{const i=e.__vccOpts||e;for(const[r,n]of t)i[r]=n;return i};const oX="ElAffix",r$e=ce({name:oX}),n$e=ce({...r$e,props:t$e,emits:i$e,setup(e,{expose:t,emit:i}){const r=e,n=Ve("affix"),a=Wi(),s=Wi(),o=Wi(),{height:l}=t8e(),{height:c,width:u,top:d,bottom:h,update:f}=Y9(s,{windowScroll:!1}),p=Y9(a),m=j(!1),v=j(0),y=j(0),x=O(()=>({height:m.value?`${c.value}px`:"",width:m.value?`${u.value}px`:""})),b=O(()=>{if(!m.value)return{};const _=r.offset?zr(r.offset):0;return{height:`${c.value}px`,width:`${u.value}px`,top:r.position==="top"?_:"",bottom:r.position==="bottom"?_:"",transform:y.value?`translateY(${y.value}px)`:"",zIndex:r.zIndex}}),w=()=>{if(!o.value)return;v.value=o.value instanceof Window?document.documentElement.scrollTop:o.value.scrollTop||0;const{position:_,target:E,offset:C}=r,A=C+c.value;if(_==="top")if(E){const M=p.bottom.value-A;m.value=C>d.value&&p.bottom.value>0,y.value=M<0?M:0}else m.value=C>d.value;else if(E){const M=l.value-p.top.value-A;m.value=l.value-C<h.value&&l.value>p.top.value,y.value=M<0?-M:0}else m.value=l.value-C<h.value},S=()=>{f(),i("scroll",{scrollTop:v.value,fixed:m.value})};return Ne(m,_=>i("change",_)),Lt(()=>{var _;r.target?(a.value=(_=document.querySelector(r.target))!=null?_:void 0,a.value||bn(oX,`Target does not exist: ${r.target}`)):a.value=document.documentElement,o.value=BI(s.value,!0),f()}),Oi(o,"scroll",S),Ca(w),t({update:w,updateRoot:f}),(_,E)=>(F(),K("div",{ref_key:"root",ref:s,class:U(g(n).b()),style:mt(g(x))},[ie("div",{class:U({[g(n).m("fixed")]:m.value}),style:mt(g(b))},[Ee(_.$slots,"default")],6)],6))}});var a$e=Ze(n$e,[["__file","affix.vue"]]);const s$e=Rt(a$e),o$e=je({size:{type:be([Number,String])},color:{type:String}}),l$e=ce({name:"ElIcon",inheritAttrs:!1}),c$e=ce({...l$e,props:o$e,setup(e){const t=e,i=Ve("icon"),r=O(()=>{const{size:n,color:a}=t;return!n&&!a?{}:{fontSize:Qi(n)?void 0:zr(n),"--color":a}});return(n,a)=>(F(),K("i",$t({class:g(i).b(),style:g(r)},n.$attrs),[Ee(n.$slots,"default")],16))}});var u$e=Ze(c$e,[["__file","icon.vue"]]);const ut=Rt(u$e),d$e=["light","dark"],h$e=je({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:Ev(gh),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:d$e,default:"light"}}),f$e={close:e=>e instanceof MouseEvent},p$e=ce({name:"ElAlert"}),m$e=ce({...p$e,props:h$e,emits:f$e,setup(e,{emit:t}){const i=e,{Close:r}=jI,n=In(),a=Ve("alert"),s=j(!0),o=O(()=>gh[i.type]),l=O(()=>[a.e("icon"),{[a.is("big")]:!!i.description||!!n.default}]),c=O(()=>({"with-description":i.description||n.default})),u=d=>{s.value=!1,t("close",d)};return(d,h)=>(F(),De(Pn,{name:g(a).b("fade"),persisted:""},{default:ve(()=>[Nt(ie("div",{class:U([g(a).b(),g(a).m(d.type),g(a).is("center",d.center),g(a).is(d.effect)]),role:"alert"},[d.showIcon&&g(o)?(F(),De(g(ut),{key:0,class:U(g(l))},{default:ve(()=>[(F(),De(jt(g(o))))]),_:1},8,["class"])):Ae("v-if",!0),ie("div",{class:U(g(a).e("content"))},[d.title||d.$slots.title?(F(),K("span",{key:0,class:U([g(a).e("title"),g(c)])},[Ee(d.$slots,"title",{},()=>[Xt(Ye(d.title),1)])],2)):Ae("v-if",!0),d.$slots.default||d.description?(F(),K("p",{key:1,class:U(g(a).e("description"))},[Ee(d.$slots,"default",{},()=>[Xt(Ye(d.description),1)])],2)):Ae("v-if",!0),d.closable?(F(),K(ht,{key:2},[d.closeText?(F(),K("div",{key:0,class:U([g(a).e("close-btn"),g(a).is("customed")]),onClick:u},Ye(d.closeText),3)):(F(),De(g(ut),{key:1,class:U(g(a).e("close-btn")),onClick:u},{default:ve(()=>[ne(g(r))]),_:1},8,["class"]))],64)):Ae("v-if",!0)],2)],2),[[_i,s.value]])]),_:3},8,["name"]))}});var v$e=Ze(m$e,[["__file","alert.vue"]]);const g$e=Rt(v$e),vp=Symbol("formContextKey"),Ac=Symbol("formItemContextKey"),on=(e,t={})=>{const i=j(void 0),r=t.prop?i:DK("size"),n=t.global?i:nX(),a=t.form?{size:void 0}:rt(vp,void 0),s=t.formItem?{size:void 0}:rt(Ac,void 0);return O(()=>r.value||g(e)||(s==null?void 0:s.size)||(a==null?void 0:a.size)||n.value||"")},qa=e=>{const t=DK("disabled"),i=rt(vp,void 0);return O(()=>t.value||g(e)||(i==null?void 0:i.disabled)||!1)},Ya=()=>{const e=rt(vp,void 0),t=rt(Ac,void 0);return{form:e,formItem:t}},kl=(e,{formItemContext:t,disableIdGeneration:i,disableIdManagement:r})=>{i||(i=j(!1)),r||(r=j(!1));const n=j();let a;const s=O(()=>{var o;return!!(!(e.label||e.ariaLabel)&&t&&t.inputIds&&((o=t.inputIds)==null?void 0:o.length)<=1)});return Lt(()=>{a=Ne([Di(e,"id"),i],([o,l])=>{const c=o??(l?void 0:ua().value);c!==n.value&&(t!=null&&t.removeInputId&&(n.value&&t.removeInputId(n.value),!(r!=null&&r.value)&&!l&&c&&t.addInputId(c)),n.value=c)},{immediate:!0})}),zu(()=>{a&&a(),t!=null&&t.removeInputId&&n.value&&t.removeInputId(n.value)}),{isLabeledByFormItem:s,inputId:n}},y$e=je({size:{type:String,values:Lc},disabled:Boolean}),b$e=je({...y$e,model:Object,rules:{type:be(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),w$e={validate:(e,t,i)=>(ct(e)||Et(e))&&Gi(t)&&Et(i)};function x$e(){const e=j([]),t=O(()=>{if(!e.value.length)return"0";const a=Math.max(...e.value);return a?`${a}px`:""});function i(a){const s=e.value.indexOf(a);return s===-1&&t.value,s}function r(a,s){if(a&&s){const o=i(s);e.value.splice(o,1,a)}else a&&e.value.push(a)}function n(a){const s=i(a);s>-1&&e.value.splice(s,1)}return{autoLabelWidth:t,registerLabelWidth:r,deregisterLabelWidth:n}}const Mw=(e,t)=>{const i=wa(t);return i.length>0?e.filter(r=>r.prop&&i.includes(r.prop)):e},_$e="ElForm",S$e=ce({name:_$e}),C$e=ce({...S$e,props:b$e,emits:w$e,setup(e,{expose:t,emit:i}){const r=e,n=[],a=on(),s=Ve("form"),o=O(()=>{const{labelPosition:b,inline:w}=r;return[s.b(),s.m(a.value||"default"),{[s.m(`label-${b}`)]:b,[s.m("inline")]:w}]}),l=b=>n.find(w=>w.prop===b),c=b=>{n.push(b)},u=b=>{b.prop&&n.splice(n.indexOf(b),1)},d=(b=[])=>{r.model&&Mw(n,b).forEach(w=>w.resetField())},h=(b=[])=>{Mw(n,b).forEach(w=>w.clearValidate())},f=O(()=>!!r.model),p=b=>{if(n.length===0)return[];const w=Mw(n,b);return w.length?w:[]},m=async b=>y(void 0,b),v=async(b=[])=>{if(!f.value)return!1;const w=p(b);if(w.length===0)return!0;let S={};for(const _ of w)try{await _.validate("")}catch(E){S={...S,...E}}return Object.keys(S).length===0?!0:Promise.reject(S)},y=async(b=[],w)=>{const S=!Wt(w);try{const _=await v(b);return _===!0&&await(w==null?void 0:w(_)),_}catch(_){if(_ instanceof Error)throw _;const E=_;return r.scrollToError&&x(Object.keys(E)[0]),await(w==null?void 0:w(!1,E)),S&&Promise.reject(E)}},x=b=>{var w;const S=Mw(n,b)[0];S&&((w=S.$el)==null||w.scrollIntoView(r.scrollIntoViewOptions))};return Ne(()=>r.rules,()=>{r.validateOnRuleChange&&m().catch(b=>void 0)},{deep:!0}),Yt(vp,bi({...Gn(r),emit:i,resetFields:d,clearValidate:h,validateField:y,getField:l,addField:c,removeField:u,...x$e()})),t({validate:m,validateField:y,resetFields:d,clearValidate:h,scrollToField:x,fields:n}),(b,w)=>(F(),K("form",{class:U(g(o))},[Ee(b.$slots,"default")],2))}});var E$e=Ze(C$e,[["__file","form.vue"]]);function _f(){return _f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},_f.apply(this,arguments)}function A$e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,B1(e,t)}function CT(e){return CT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},CT(e)}function B1(e,t){return B1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},B1(e,t)}function M$e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function v2(e,t,i){return M$e()?v2=Reflect.construct.bind():v2=function(n,a,s){var o=[null];o.push.apply(o,a);var l=Function.bind.apply(n,o),c=new l;return s&&B1(c,s.prototype),c},v2.apply(null,arguments)}function T$e(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function ET(e){var t=typeof Map=="function"?new Map:void 0;return ET=function(r){if(r===null||!T$e(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(r))return t.get(r);t.set(r,n)}function n(){return v2(r,arguments,CT(this).constructor)}return n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),B1(n,r)},ET(e)}var P$e=/%[sdj%]/g,D$e=function(){};function AT(e){if(!e||!e.length)return null;var t={};return e.forEach(function(i){var r=i.field;t[r]=t[r]||[],t[r].push(i)}),t}function Ys(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];var n=0,a=i.length;if(typeof e=="function")return e.apply(null,i);if(typeof e=="string"){var s=e.replace(P$e,function(o){if(o==="%%")return"%";if(n>=a)return o;switch(o){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch{return"[Circular]"}break;default:return o}});return s}return e}function I$e(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function Yn(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||I$e(t)&&typeof e=="string"&&!e)}function O$e(e,t,i){var r=[],n=0,a=e.length;function s(o){r.push.apply(r,o||[]),n++,n===a&&i(r)}e.forEach(function(o){t(o,s)})}function kF(e,t,i){var r=0,n=e.length;function a(s){if(s&&s.length){i(s);return}var o=r;r=r+1,o<n?t(e[o],a):i([])}a([])}function R$e(e){var t=[];return Object.keys(e).forEach(function(i){t.push.apply(t,e[i]||[])}),t}var LF=function(e){A$e(t,e);function t(i,r){var n;return n=e.call(this,"Async Validation Error")||this,n.errors=i,n.fields=r,n}return t}(ET(Error));function k$e(e,t,i,r,n){if(t.first){var a=new Promise(function(h,f){var p=function(y){return r(y),y.length?f(new LF(y,AT(y))):h(n)},m=R$e(e);kF(m,i,p)});return a.catch(function(h){return h}),a}var s=t.firstFields===!0?Object.keys(e):t.firstFields||[],o=Object.keys(e),l=o.length,c=0,u=[],d=new Promise(function(h,f){var p=function(v){if(u.push.apply(u,v),c++,c===l)return r(u),u.length?f(new LF(u,AT(u))):h(n)};o.length||(r(u),h(n)),o.forEach(function(m){var v=e[m];s.indexOf(m)!==-1?kF(v,i,p):O$e(v,i,p)})});return d.catch(function(h){return h}),d}function L$e(e){return!!(e&&e.message!==void 0)}function B$e(e,t){for(var i=e,r=0;r<t.length;r++){if(i==null)return i;i=i[t[r]]}return i}function BF(e,t){return function(i){var r;return e.fullFields?r=B$e(t,e.fullFields):r=t[i.field||e.fullField],L$e(i)?(i.field=i.field||e.fullField,i.fieldValue=r,i):{message:typeof i=="function"?i():i,fieldValue:r,field:i.field||e.fullField}}}function NF(e,t){if(t){for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];typeof r=="object"&&typeof e[i]=="object"?e[i]=_f({},e[i],r):e[i]=r}}return e}var lX=function(t,i,r,n,a,s){t.required&&(!r.hasOwnProperty(t.field)||Yn(i,s||t.type))&&n.push(Ys(a.messages.required,t.fullField))},N$e=function(t,i,r,n,a){(/^\s+$/.test(i)||i==="")&&n.push(Ys(a.messages.whitespace,t.fullField))},Tw,F$e=function(){if(Tw)return Tw;var e="[a-fA-F\\d:]",t=function(w){return w&&w.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},i="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",n=(`
(?:
(?:`+r+":){7}(?:"+r+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+r+":){6}(?:"+i+"|:"+r+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+r+":){5}(?::"+i+"|(?::"+r+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+r+":){4}(?:(?::"+r+"){0,1}:"+i+"|(?::"+r+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+r+":){3}(?:(?::"+r+"){0,2}:"+i+"|(?::"+r+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+r+":){2}(?:(?::"+r+"){0,3}:"+i+"|(?::"+r+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+r+":){1}(?:(?::"+r+"){0,4}:"+i+"|(?::"+r+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+r+"){0,5}:"+i+"|(?::"+r+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),a=new RegExp("(?:^"+i+"$)|(?:^"+n+"$)"),s=new RegExp("^"+i+"$"),o=new RegExp("^"+n+"$"),l=function(w){return w&&w.exact?a:new RegExp("(?:"+t(w)+i+t(w)+")|(?:"+t(w)+n+t(w)+")","g")};l.v4=function(b){return b&&b.exact?s:new RegExp(""+t(b)+i+t(b),"g")},l.v6=function(b){return b&&b.exact?o:new RegExp(""+t(b)+n+t(b),"g")};var c="(?:(?:[a-z]+:)?//)",u="(?:\\S+(?::\\S*)?@)?",d=l.v4().source,h=l.v6().source,f="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",p="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",m="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",v="(?::\\d{2,5})?",y='(?:[/?#][^\\s"]*)?',x="(?:"+c+"|www\\.)"+u+"(?:localhost|"+d+"|"+h+"|"+f+p+m+")"+v+y;return Tw=new RegExp("(?:^"+x+"$)","i"),Tw},FF={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},pg={integer:function(t){return pg.number(t)&&parseInt(t,10)===t},float:function(t){return pg.number(t)&&!pg.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return typeof t=="object"&&!pg.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(FF.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(F$e())},hex:function(t){return typeof t=="string"&&!!t.match(FF.hex)}},z$e=function(t,i,r,n,a){if(t.required&&i===void 0){lX(t,i,r,n,a);return}var s=["integer","float","array","regexp","object","method","email","number","date","url","hex"],o=t.type;s.indexOf(o)>-1?pg[o](i)||n.push(Ys(a.messages.types[o],t.fullField,t.type)):o&&typeof i!==t.type&&n.push(Ys(a.messages.types[o],t.fullField,t.type))},V$e=function(t,i,r,n,a){var s=typeof t.len=="number",o=typeof t.min=="number",l=typeof t.max=="number",c=i,u=null,d=typeof i=="number",h=typeof i=="string",f=Array.isArray(i);if(d?u="number":h?u="string":f&&(u="array"),!u)return!1;f&&(c=i.length),h&&(c=i.length),s?c!==t.len&&n.push(Ys(a.messages[u].len,t.fullField,t.len)):o&&!l&&c<t.min?n.push(Ys(a.messages[u].min,t.fullField,t.min)):l&&!o&&c>t.max?n.push(Ys(a.messages[u].max,t.fullField,t.max)):o&&l&&(c<t.min||c>t.max)&&n.push(Ys(a.messages[u].range,t.fullField,t.min,t.max))},Xp="enum",U$e=function(t,i,r,n,a){t[Xp]=Array.isArray(t[Xp])?t[Xp]:[],t[Xp].indexOf(i)===-1&&n.push(Ys(a.messages[Xp],t.fullField,t[Xp].join(", ")))},H$e=function(t,i,r,n,a){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(i)||n.push(Ys(a.messages.pattern.mismatch,t.fullField,i,t.pattern));else if(typeof t.pattern=="string"){var s=new RegExp(t.pattern);s.test(i)||n.push(Ys(a.messages.pattern.mismatch,t.fullField,i,t.pattern))}}},$i={required:lX,whitespace:N$e,type:z$e,range:V$e,enum:U$e,pattern:H$e},j$e=function(t,i,r,n,a){var s=[],o=t.required||!t.required&&n.hasOwnProperty(t.field);if(o){if(Yn(i,"string")&&!t.required)return r();$i.required(t,i,n,s,a,"string"),Yn(i,"string")||($i.type(t,i,n,s,a),$i.range(t,i,n,s,a),$i.pattern(t,i,n,s,a),t.whitespace===!0&&$i.whitespace(t,i,n,s,a))}r(s)},W$e=function(t,i,r,n,a){var s=[],o=t.required||!t.required&&n.hasOwnProperty(t.field);if(o){if(Yn(i)&&!t.required)return r();$i.required(t,i,n,s,a),i!==void 0&&$i.type(t,i,n,s,a)}r(s)},G$e=function(t,i,r,n,a){var s=[],o=t.required||!t.required&&n.hasOwnProperty(t.field);if(o){if(i===""&&(i=void 0),Yn(i)&&!t.required)return r();$i.required(t,i,n,s,a),i!==void 0&&($i.type(t,i,n,s,a),$i.range(t,i,n,s,a))}r(s)},$$e=function(t,i,r,n,a){var s=[],o=t.required||!t.required&&n.hasOwnProperty(t.field);if(o){if(Yn(i)&&!t.required)return r();$i.required(t,i,n,s,a),i!==void 0&&$i.type(t,i,n,s,a)}r(s)},Z$e=function(t,i,r,n,a){var s=[],o=t.required||!t.required&&n.hasOwnProperty(t.field);if(o){if(Yn(i)&&!t.required)return r();$i.required(t,i,n,s,a),Yn(i)||$i.type(t,i,n,s,a)}r(s)},q$e=function(t,i,r,n,a){var s=[],o=t.required||!t.required&&n.hasOwnProperty(t.field);if(o){if(Yn(i)&&!t.required)return r();$i.required(t,i,n,s,a),i!==void 0&&($i.type(t,i,n,s,a),$i.range(t,i,n,s,a))}r(s)},Y$e=function(t,i,r,n,a){var s=[],o=t.required||!t.required&&n.hasOwnProperty(t.field);if(o){if(Yn(i)&&!t.required)return r();$i.required(t,i,n,s,a),i!==void 0&&($i.type(t,i,n,s,a),$i.range(t,i,n,s,a))}r(s)},K$e=function(t,i,r,n,a){var s=[],o=t.required||!t.required&&n.hasOwnProperty(t.field);if(o){if(i==null&&!t.required)return r();$i.required(t,i,n,s,a,"array"),i!=null&&($i.type(t,i,n,s,a),$i.range(t,i,n,s,a))}r(s)},X$e=function(t,i,r,n,a){var s=[],o=t.required||!t.required&&n.hasOwnProperty(t.field);if(o){if(Yn(i)&&!t.required)return r();$i.required(t,i,n,s,a),i!==void 0&&$i.type(t,i,n,s,a)}r(s)},Q$e="enum",J$e=function(t,i,r,n,a){var s=[],o=t.required||!t.required&&n.hasOwnProperty(t.field);if(o){if(Yn(i)&&!t.required)return r();$i.required(t,i,n,s,a),i!==void 0&&$i[Q$e](t,i,n,s,a)}r(s)},eZe=function(t,i,r,n,a){var s=[],o=t.required||!t.required&&n.hasOwnProperty(t.field);if(o){if(Yn(i,"string")&&!t.required)return r();$i.required(t,i,n,s,a),Yn(i,"string")||$i.pattern(t,i,n,s,a)}r(s)},tZe=function(t,i,r,n,a){var s=[],o=t.required||!t.required&&n.hasOwnProperty(t.field);if(o){if(Yn(i,"date")&&!t.required)return r();if($i.required(t,i,n,s,a),!Yn(i,"date")){var l;i instanceof Date?l=i:l=new Date(i),$i.type(t,l,n,s,a),l&&$i.range(t,l.getTime(),n,s,a)}}r(s)},iZe=function(t,i,r,n,a){var s=[],o=Array.isArray(i)?"array":typeof i;$i.required(t,i,n,s,a,o),r(s)},q4=function(t,i,r,n,a){var s=t.type,o=[],l=t.required||!t.required&&n.hasOwnProperty(t.field);if(l){if(Yn(i,s)&&!t.required)return r();$i.required(t,i,n,o,a,s),Yn(i,s)||$i.type(t,i,n,o,a)}r(o)},rZe=function(t,i,r,n,a){var s=[],o=t.required||!t.required&&n.hasOwnProperty(t.field);if(o){if(Yn(i)&&!t.required)return r();$i.required(t,i,n,s,a)}r(s)},$g={string:j$e,method:W$e,number:G$e,boolean:$$e,regexp:Z$e,integer:q$e,float:Y$e,array:K$e,object:X$e,enum:J$e,pattern:eZe,date:tZe,url:q4,hex:q4,email:q4,required:iZe,any:rZe};function MT(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var TT=MT(),ky=function(){function e(i){this.rules=null,this._messages=TT,this.define(i)}var t=e.prototype;return t.define=function(r){var n=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(typeof r!="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(a){var s=r[a];n.rules[a]=Array.isArray(s)?s:[s]})},t.messages=function(r){return r&&(this._messages=NF(MT(),r)),this._messages},t.validate=function(r,n,a){var s=this;n===void 0&&(n={}),a===void 0&&(a=function(){});var o=r,l=n,c=a;if(typeof l=="function"&&(c=l,l={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,o),Promise.resolve(o);function u(m){var v=[],y={};function x(w){if(Array.isArray(w)){var S;v=(S=v).concat.apply(S,w)}else v.push(w)}for(var b=0;b<m.length;b++)x(m[b]);v.length?(y=AT(v),c(v,y)):c(null,o)}if(l.messages){var d=this.messages();d===TT&&(d=MT()),NF(d,l.messages),l.messages=d}else l.messages=this.messages();var h={},f=l.keys||Object.keys(this.rules);f.forEach(function(m){var v=s.rules[m],y=o[m];v.forEach(function(x){var b=x;typeof b.transform=="function"&&(o===r&&(o=_f({},o)),y=o[m]=b.transform(y)),typeof b=="function"?b={validator:b}:b=_f({},b),b.validator=s.getValidationMethod(b),b.validator&&(b.field=m,b.fullField=b.fullField||m,b.type=s.getType(b),h[m]=h[m]||[],h[m].push({rule:b,value:y,source:o,field:m}))})});var p={};return k$e(h,l,function(m,v){var y=m.rule,x=(y.type==="object"||y.type==="array")&&(typeof y.fields=="object"||typeof y.defaultField=="object");x=x&&(y.required||!y.required&&m.value),y.field=m.field;function b(_,E){return _f({},E,{fullField:y.fullField+"."+_,fullFields:y.fullFields?[].concat(y.fullFields,[_]):[_]})}function w(_){_===void 0&&(_=[]);var E=Array.isArray(_)?_:[_];!l.suppressWarning&&E.length&&e.warning("async-validator:",E),E.length&&y.message!==void 0&&(E=[].concat(y.message));var C=E.map(BF(y,o));if(l.first&&C.length)return p[y.field]=1,v(C);if(!x)v(C);else{if(y.required&&!m.value)return y.message!==void 0?C=[].concat(y.message).map(BF(y,o)):l.error&&(C=[l.error(y,Ys(l.messages.required,y.field))]),v(C);var A={};y.defaultField&&Object.keys(m.value).map(function(P){A[P]=y.defaultField}),A=_f({},A,m.rule.fields);var M={};Object.keys(A).forEach(function(P){var D=A[P],k=Array.isArray(D)?D:[D];M[P]=k.map(b.bind(null,P))});var T=new e(M);T.messages(l.messages),m.rule.options&&(m.rule.options.messages=l.messages,m.rule.options.error=l.error),T.validate(m.value,m.rule.options||l,function(P){var D=[];C&&C.length&&D.push.apply(D,C),P&&P.length&&D.push.apply(D,P),v(D.length?D:null)})}}var S;if(y.asyncValidator)S=y.asyncValidator(y,m.value,w,m.source,l);else if(y.validator){try{S=y.validator(y,m.value,w,m.source,l)}catch(_){console.error==null||console.error(_),l.suppressValidatorError||setTimeout(function(){throw _},0),w(_.message)}S===!0?w():S===!1?w(typeof y.message=="function"?y.message(y.fullField||y.field):y.message||(y.fullField||y.field)+" fails"):S instanceof Array?w(S):S instanceof Error&&w(S.message)}S&&S.then&&S.then(function(){return w()},function(_){return w(_)})},function(m){u(m)},o)},t.getType=function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!$g.hasOwnProperty(r.type))throw new Error(Ys("Unknown rule type %s",r.type));return r.type||"string"},t.getValidationMethod=function(r){if(typeof r.validator=="function")return r.validator;var n=Object.keys(r),a=n.indexOf("message");return a!==-1&&n.splice(a,1),n.length===1&&n[0]==="required"?$g.required:$g[this.getType(r)]||void 0},e}();ky.register=function(t,i){if(typeof i!="function")throw new Error("Cannot register a validator by type, validator is not a function");$g[t]=i};ky.warning=D$e;ky.messages=TT;ky.validators=$g;const nZe=["","error","validating","success"],aZe=je({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:be([String,Array])},required:{type:Boolean,default:void 0},rules:{type:be([Object,Array])},error:String,validateStatus:{type:String,values:nZe},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:Lc}}),zF="ElLabelWrap";var sZe=ce({name:zF,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(e,{slots:t}){const i=rt(vp,void 0),r=rt(Ac);r||bn(zF,"usage: <el-form-item><label-wrap /></el-form-item>");const n=Ve("form"),a=j(),s=j(0),o=()=>{var u;if((u=a.value)!=null&&u.firstElementChild){const d=window.getComputedStyle(a.value.firstElementChild).width;return Math.ceil(Number.parseFloat(d))}else return 0},l=(u="update")=>{ft(()=>{t.default&&e.isAutoWidth&&(u==="update"?s.value=o():u==="remove"&&(i==null||i.deregisterLabelWidth(s.value)))})},c=()=>l("update");return Lt(()=>{c()}),Bi(()=>{l("remove")}),Tl(()=>c()),Ne(s,(u,d)=>{e.updateAll&&(i==null||i.registerLabelWidth(u,d))}),gr(O(()=>{var u,d;return(d=(u=a.value)==null?void 0:u.firstElementChild)!=null?d:null}),c),()=>{var u,d;if(!t)return null;const{isAutoWidth:h}=e;if(h){const f=i==null?void 0:i.autoLabelWidth,p=r==null?void 0:r.hasLabel,m={};if(p&&f&&f!=="auto"){const v=Math.max(0,Number.parseInt(f,10)-s.value),x=(r.labelPosition||i.labelPosition)==="left"?"marginRight":"marginLeft";v&&(m[x]=`${v}px`)}return ne("div",{ref:a,class:[n.be("item","label-wrap")],style:m},[(u=t.default)==null?void 0:u.call(t)])}else return ne(ht,{ref:a},[(d=t.default)==null?void 0:d.call(t)])}}});const oZe=ce({name:"ElFormItem"}),lZe=ce({...oZe,props:aZe,setup(e,{expose:t}){const i=e,r=In(),n=rt(vp,void 0),a=rt(Ac,void 0),s=on(void 0,{formItem:!1}),o=Ve("form-item"),l=ua().value,c=j([]),u=j(""),d=FIe(u,100),h=j(""),f=j();let p,m=!1;const v=O(()=>i.labelPosition||(n==null?void 0:n.labelPosition)),y=O(()=>{if(v.value==="top")return{};const te=zr(i.labelWidth||(n==null?void 0:n.labelWidth)||"");return te?{width:te}:{}}),x=O(()=>{if(v.value==="top"||n!=null&&n.inline)return{};if(!i.label&&!i.labelWidth&&M)return{};const te=zr(i.labelWidth||(n==null?void 0:n.labelWidth)||"");return!i.label&&!r.label?{marginLeft:te}:{}}),b=O(()=>[o.b(),o.m(s.value),o.is("error",u.value==="error"),o.is("validating",u.value==="validating"),o.is("success",u.value==="success"),o.is("required",L.value||i.required),o.is("no-asterisk",n==null?void 0:n.hideRequiredAsterisk),(n==null?void 0:n.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[o.m("feedback")]:n==null?void 0:n.statusIcon,[o.m(`label-${v.value}`)]:v.value}]),w=O(()=>Gi(i.inlineMessage)?i.inlineMessage:(n==null?void 0:n.inlineMessage)||!1),S=O(()=>[o.e("error"),{[o.em("error","inline")]:w.value}]),_=O(()=>i.prop?Et(i.prop)?i.prop:i.prop.join("."):""),E=O(()=>!!(i.label||r.label)),C=O(()=>i.for||(c.value.length===1?c.value[0]:void 0)),A=O(()=>!C.value&&E.value),M=!!a,T=O(()=>{const te=n==null?void 0:n.model;if(!(!te||!i.prop))return p2(te,i.prop).value}),P=O(()=>{const{required:te}=i,Q=[];i.rules&&Q.push(...wa(i.rules));const pe=n==null?void 0:n.rules;if(pe&&i.prop){const me=p2(pe,i.prop).value;me&&Q.push(...wa(me))}if(te!==void 0){const me=Q.map((le,Z)=>[le,Z]).filter(([le])=>Object.keys(le).includes("required"));if(me.length>0)for(const[le,Z]of me)le.required!==te&&(Q[Z]={...le,required:te});else Q.push({required:te})}return Q}),D=O(()=>P.value.length>0),k=te=>P.value.filter(pe=>!pe.trigger||!te?!0:ct(pe.trigger)?pe.trigger.includes(te):pe.trigger===te).map(({trigger:pe,...me})=>me),L=O(()=>P.value.some(te=>te.required)),R=O(()=>{var te;return d.value==="error"&&i.showMessage&&((te=n==null?void 0:n.showMessage)!=null?te:!0)}),N=O(()=>`${i.label||""}${(n==null?void 0:n.labelSuffix)||""}`),I=te=>{u.value=te},B=te=>{var Q,pe;const{errors:me,fields:le}=te;(!me||!le)&&console.error(te),I("error"),h.value=me?(pe=(Q=me==null?void 0:me[0])==null?void 0:Q.message)!=null?pe:`${i.prop} is required`:"",n==null||n.emit("validate",i.prop,!1,h.value)},z=()=>{I("success"),n==null||n.emit("validate",i.prop,!0,"")},V=async te=>{const Q=_.value;return new ky({[Q]:te}).validate({[Q]:T.value},{firstFields:!0}).then(()=>(z(),!0)).catch(me=>(B(me),Promise.reject(me)))},W=async(te,Q)=>{if(m||!i.prop)return!1;const pe=Wt(Q);if(!D.value)return Q==null||Q(!1),!1;const me=k(te);return me.length===0?(Q==null||Q(!0),!0):(I("validating"),V(me).then(()=>(Q==null||Q(!0),!0)).catch(le=>{const{fields:Z}=le;return Q==null||Q(!1,Z),pe?!1:Promise.reject(Z)}))},G=()=>{I(""),h.value="",m=!1},q=async()=>{const te=n==null?void 0:n.model;if(!te||!i.prop)return;const Q=p2(te,i.prop);m=!0,Q.value=hT(p),await ft(),G(),m=!1},ae=te=>{c.value.includes(te)||c.value.push(te)},J=te=>{c.value=c.value.filter(Q=>Q!==te)};Ne(()=>i.error,te=>{h.value=te||"",I(te?"error":"")},{immediate:!0}),Ne(()=>i.validateStatus,te=>I(te||""));const $=bi({...Gn(i),$el:f,size:s,validateState:u,labelId:l,inputIds:c,isGroup:A,hasLabel:E,fieldValue:T,addInputId:ae,removeInputId:J,resetField:q,clearValidate:G,validate:W});return Yt(Ac,$),Lt(()=>{i.prop&&(n==null||n.addField($),p=hT(T.value))}),Bi(()=>{n==null||n.removeField($)}),t({size:s,validateMessage:h,validateState:u,validate:W,clearValidate:G,resetField:q}),(te,Q)=>{var pe;return F(),K("div",{ref_key:"formItemRef",ref:f,class:U(g(b)),role:g(A)?"group":void 0,"aria-labelledby":g(A)?g(l):void 0},[ne(g(sZe),{"is-auto-width":g(y).width==="auto","update-all":((pe=g(n))==null?void 0:pe.labelWidth)==="auto"},{default:ve(()=>[g(E)?(F(),De(jt(g(C)?"label":"div"),{key:0,id:g(l),for:g(C),class:U(g(o).e("label")),style:mt(g(y))},{default:ve(()=>[Ee(te.$slots,"label",{label:g(N)},()=>[Xt(Ye(g(N)),1)])]),_:3},8,["id","for","class","style"])):Ae("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),ie("div",{class:U(g(o).e("content")),style:mt(g(x))},[Ee(te.$slots,"default"),ne(NU,{name:`${g(o).namespace.value}-zoom-in-top`},{default:ve(()=>[g(R)?Ee(te.$slots,"error",{key:0,error:h.value},()=>[ie("div",{class:U(g(S))},Ye(h.value),3)]):Ae("v-if",!0)]),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}});var cX=Ze(lZe,[["__file","form-item.vue"]]);const cZe=Rt(E$e,{FormItem:cX}),uZe=Tr(cX);let rl;const dZe=`
  height:0 !important;
  visibility:hidden !important;
  ${BD()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,hZe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function fZe(e){const t=window.getComputedStyle(e),i=t.getPropertyValue("box-sizing"),r=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),n=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:hZe.map(s=>`${s}:${t.getPropertyValue(s)}`).join(";"),paddingSize:r,borderSize:n,boxSizing:i}}function VF(e,t=1,i){var r;rl||(rl=document.createElement("textarea"),document.body.appendChild(rl));const{paddingSize:n,borderSize:a,boxSizing:s,contextStyle:o}=fZe(e);rl.setAttribute("style",`${o};${dZe}`),rl.value=e.value||e.placeholder||"";let l=rl.scrollHeight;const c={};s==="border-box"?l=l+a:s==="content-box"&&(l=l-n),rl.value="";const u=rl.scrollHeight-n;if(gt(t)){let d=u*t;s==="border-box"&&(d=d+n+a),l=Math.max(d,l),c.minHeight=`${d}px`}if(gt(i)){let d=u*i;s==="border-box"&&(d=d+n+a),l=Math.min(d,l)}return c.height=`${l}px`,(r=rl.parentNode)==null||r.removeChild(rl),rl=void 0,c}const o8=je({id:{type:String,default:void 0},size:wn,disabled:Boolean,modelValue:{type:be([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:be([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:zi},prefixIcon:{type:zi},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:be([Object,Array,String]),default:()=>Er({})},autofocus:Boolean,rows:{type:Number,default:2},...ha(["ariaLabel"])}),pZe={[Vt]:e=>Et(e),input:e=>Et(e),change:e=>Et(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},mZe=ce({name:"ElInput",inheritAttrs:!1}),vZe=ce({...mZe,props:o8,emits:pZe,setup(e,{expose:t,emit:i}){const r=e,n=rp(),a=jS(),s=In(),o=O(()=>[r.type==="textarea"?m.b():p.b(),p.m(h.value),p.is("disabled",f.value),p.is("exceed",W.value),{[p.b("group")]:s.prepend||s.append,[p.m("prefix")]:s.prefix||r.prefixIcon,[p.m("suffix")]:s.suffix||r.suffixIcon||r.clearable||r.showPassword,[p.bm("suffix","password-clear")]:I.value&&B.value,[p.b("hidden")]:r.type==="hidden"},n.class]),l=O(()=>[p.e("wrapper"),p.is("focus",C.value)]),{form:c,formItem:u}=Ya(),{inputId:d}=kl(r,{formItemContext:u}),h=on(),f=qa(),p=Ve("input"),m=Ve("textarea"),v=Wi(),y=Wi(),x=j(!1),b=j(!1),w=j(),S=Wi(r.inputStyle),_=O(()=>v.value||y.value),{wrapperRef:E,isFocused:C,handleFocus:A,handleBlur:M}=mp(_,{beforeFocus(){return f.value},afterBlur(){var ue;r.validateEvent&&((ue=u==null?void 0:u.validate)==null||ue.call(u,"blur").catch(Oe=>void 0))}}),T=O(()=>{var ue;return(ue=c==null?void 0:c.statusIcon)!=null?ue:!1}),P=O(()=>(u==null?void 0:u.validateState)||""),D=O(()=>P.value&&WI[P.value]),k=O(()=>b.value?Dje:eje),L=O(()=>[n.style]),R=O(()=>[r.inputStyle,S.value,{resize:r.resize}]),N=O(()=>mn(r.modelValue)?"":String(r.modelValue)),I=O(()=>r.clearable&&!f.value&&!r.readonly&&!!N.value&&(C.value||x.value)),B=O(()=>r.showPassword&&!f.value&&!!N.value&&(!!N.value||C.value)),z=O(()=>r.showWordLimit&&!!r.maxlength&&(r.type==="text"||r.type==="textarea")&&!f.value&&!r.readonly&&!r.showPassword),V=O(()=>N.value.length),W=O(()=>!!z.value&&V.value>Number(r.maxlength)),G=O(()=>!!s.suffix||!!r.suffixIcon||I.value||r.showPassword||z.value||!!P.value&&T.value),[q,ae]=WGe(v);gr(y,ue=>{if(te(),!z.value||r.resize!=="both")return;const Oe=ue[0],{width:Y}=Oe.contentRect;w.value={right:`calc(100% - ${Y+15+6}px)`}});const J=()=>{const{type:ue,autosize:Oe}=r;if(!(!si||ue!=="textarea"||!y.value))if(Oe){const Y=Ri(Oe)?Oe.minRows:void 0,qe=Ri(Oe)?Oe.maxRows:void 0,et=VF(y.value,Y,qe);S.value={overflowY:"hidden",...et},ft(()=>{y.value.offsetHeight,S.value=et})}else S.value={minHeight:VF(y.value).minHeight}},te=(ue=>{let Oe=!1;return()=>{var Y;if(Oe||!r.autosize)return;((Y=y.value)==null?void 0:Y.offsetParent)===null||(ue(),Oe=!0)}})(J),Q=()=>{const ue=_.value,Oe=r.formatter?r.formatter(N.value):N.value;!ue||ue.value===Oe||(ue.value=Oe)},pe=async ue=>{q();let{value:Oe}=ue.target;if(r.formatter&&(Oe=r.parser?r.parser(Oe):Oe),!le.value){if(Oe===N.value){Q();return}i(Vt,Oe),i("input",Oe),await ft(),Q(),ae()}},me=ue=>{i("change",ue.target.value)},{isComposing:le,handleCompositionStart:Z,handleCompositionUpdate:oe,handleCompositionEnd:ge}=qS({emit:i,afterComposition:pe}),Ie=()=>{b.value=!b.value,we()},we=async()=>{var ue;await ft(),(ue=_.value)==null||ue.focus()},xe=()=>{var ue;return(ue=_.value)==null?void 0:ue.blur()},Se=ue=>{x.value=!1,i("mouseleave",ue)},Le=ue=>{x.value=!0,i("mouseenter",ue)},Be=ue=>{i("keydown",ue)},ee=()=>{var ue;(ue=_.value)==null||ue.select()},X=()=>{i(Vt,""),i("change",""),i("clear"),i("input","")};return Ne(()=>r.modelValue,()=>{var ue;ft(()=>J()),r.validateEvent&&((ue=u==null?void 0:u.validate)==null||ue.call(u,"change").catch(Oe=>void 0))}),Ne(N,()=>Q()),Ne(()=>r.type,async()=>{await ft(),Q(),J()}),Lt(()=>{!r.formatter&&r.parser,Q(),ft(J)}),t({input:v,textarea:y,ref:_,textareaStyle:R,autosize:Di(r,"autosize"),isComposing:le,focus:we,blur:xe,select:ee,clear:X,resizeTextarea:J}),(ue,Oe)=>(F(),K("div",{class:U([g(o),{[g(p).bm("group","append")]:ue.$slots.append,[g(p).bm("group","prepend")]:ue.$slots.prepend}]),style:mt(g(L)),onMouseenter:Le,onMouseleave:Se},[Ae(" input "),ue.type!=="textarea"?(F(),K(ht,{key:0},[Ae(" prepend slot "),ue.$slots.prepend?(F(),K("div",{key:0,class:U(g(p).be("group","prepend"))},[Ee(ue.$slots,"prepend")],2)):Ae("v-if",!0),ie("div",{ref_key:"wrapperRef",ref:E,class:U(g(l))},[Ae(" prefix slot "),ue.$slots.prefix||ue.prefixIcon?(F(),K("span",{key:0,class:U(g(p).e("prefix"))},[ie("span",{class:U(g(p).e("prefix-inner"))},[Ee(ue.$slots,"prefix"),ue.prefixIcon?(F(),De(g(ut),{key:0,class:U(g(p).e("icon"))},{default:ve(()=>[(F(),De(jt(ue.prefixIcon)))]),_:1},8,["class"])):Ae("v-if",!0)],2)],2)):Ae("v-if",!0),ie("input",$t({id:g(d),ref_key:"input",ref:v,class:g(p).e("inner")},g(a),{minlength:ue.minlength,maxlength:ue.maxlength,type:ue.showPassword?b.value?"text":"password":ue.type,disabled:g(f),readonly:ue.readonly,autocomplete:ue.autocomplete,tabindex:ue.tabindex,"aria-label":ue.ariaLabel,placeholder:ue.placeholder,style:ue.inputStyle,form:ue.form,autofocus:ue.autofocus,role:ue.containerRole,onCompositionstart:g(Z),onCompositionupdate:g(oe),onCompositionend:g(ge),onInput:pe,onChange:me,onKeydown:Be}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","onCompositionstart","onCompositionupdate","onCompositionend"]),Ae(" suffix slot "),g(G)?(F(),K("span",{key:1,class:U(g(p).e("suffix"))},[ie("span",{class:U(g(p).e("suffix-inner"))},[!g(I)||!g(B)||!g(z)?(F(),K(ht,{key:0},[Ee(ue.$slots,"suffix"),ue.suffixIcon?(F(),De(g(ut),{key:0,class:U(g(p).e("icon"))},{default:ve(()=>[(F(),De(jt(ue.suffixIcon)))]),_:1},8,["class"])):Ae("v-if",!0)],64)):Ae("v-if",!0),g(I)?(F(),De(g(ut),{key:1,class:U([g(p).e("icon"),g(p).e("clear")]),onMousedown:xt(g(Sr),["prevent"]),onClick:X},{default:ve(()=>[ne(g(Ih))]),_:1},8,["class","onMousedown"])):Ae("v-if",!0),g(B)?(F(),De(g(ut),{key:2,class:U([g(p).e("icon"),g(p).e("password")]),onClick:Ie},{default:ve(()=>[(F(),De(jt(g(k))))]),_:1},8,["class"])):Ae("v-if",!0),g(z)?(F(),K("span",{key:3,class:U(g(p).e("count"))},[ie("span",{class:U(g(p).e("count-inner"))},Ye(g(V))+" / "+Ye(ue.maxlength),3)],2)):Ae("v-if",!0),g(P)&&g(D)&&g(T)?(F(),De(g(ut),{key:4,class:U([g(p).e("icon"),g(p).e("validateIcon"),g(p).is("loading",g(P)==="validating")])},{default:ve(()=>[(F(),De(jt(g(D))))]),_:1},8,["class"])):Ae("v-if",!0)],2)],2)):Ae("v-if",!0)],2),Ae(" append slot "),ue.$slots.append?(F(),K("div",{key:1,class:U(g(p).be("group","append"))},[Ee(ue.$slots,"append")],2)):Ae("v-if",!0)],64)):(F(),K(ht,{key:1},[Ae(" textarea "),ie("textarea",$t({id:g(d),ref_key:"textarea",ref:y,class:[g(m).e("inner"),g(p).is("focus",g(C))]},g(a),{minlength:ue.minlength,maxlength:ue.maxlength,tabindex:ue.tabindex,disabled:g(f),readonly:ue.readonly,autocomplete:ue.autocomplete,style:g(R),"aria-label":ue.ariaLabel,placeholder:ue.placeholder,form:ue.form,autofocus:ue.autofocus,rows:ue.rows,role:ue.containerRole,onCompositionstart:g(Z),onCompositionupdate:g(oe),onCompositionend:g(ge),onInput:pe,onFocus:g(A),onBlur:g(M),onChange:me,onKeydown:Be}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),g(z)?(F(),K("span",{key:0,style:mt(w.value),class:U(g(p).e("count"))},Ye(g(V))+" / "+Ye(ue.maxlength),7)):Ae("v-if",!0)],64))],38))}});var gZe=Ze(vZe,[["__file","input.vue"]]);const Ha=Rt(gZe),Qp=4,uX={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},yZe=({move:e,size:t,bar:i})=>({[i.size]:t,transform:`translate${i.axis}(${e}%)`}),l8=Symbol("scrollbarContextKey"),bZe=je({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),wZe="Thumb",xZe=ce({__name:"thumb",props:bZe,setup(e){const t=e,i=rt(l8),r=Ve("scrollbar");i||bn(wZe,"can not inject scrollbar context");const n=j(),a=j(),s=j({}),o=j(!1);let l=!1,c=!1,u=si?document.onselectstart:null;const d=O(()=>uX[t.vertical?"vertical":"horizontal"]),h=O(()=>yZe({size:t.size,move:t.move,bar:d.value})),f=O(()=>n.value[d.value.offset]**2/i.wrapElement[d.value.scrollSize]/t.ratio/a.value[d.value.offset]),p=_=>{var E;if(_.stopPropagation(),_.ctrlKey||[1,2].includes(_.button))return;(E=window.getSelection())==null||E.removeAllRanges(),v(_);const C=_.currentTarget;C&&(s.value[d.value.axis]=C[d.value.offset]-(_[d.value.client]-C.getBoundingClientRect()[d.value.direction]))},m=_=>{if(!a.value||!n.value||!i.wrapElement)return;const E=Math.abs(_.target.getBoundingClientRect()[d.value.direction]-_[d.value.client]),C=a.value[d.value.offset]/2,A=(E-C)*100*f.value/n.value[d.value.offset];i.wrapElement[d.value.scroll]=A*i.wrapElement[d.value.scrollSize]/100},v=_=>{_.stopImmediatePropagation(),l=!0,document.addEventListener("mousemove",y),document.addEventListener("mouseup",x),u=document.onselectstart,document.onselectstart=()=>!1},y=_=>{if(!n.value||!a.value||l===!1)return;const E=s.value[d.value.axis];if(!E)return;const C=(n.value.getBoundingClientRect()[d.value.direction]-_[d.value.client])*-1,A=a.value[d.value.offset]-E,M=(C-A)*100*f.value/n.value[d.value.offset];i.wrapElement[d.value.scroll]=M*i.wrapElement[d.value.scrollSize]/100},x=()=>{l=!1,s.value[d.value.axis]=0,document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",x),S(),c&&(o.value=!1)},b=()=>{c=!1,o.value=!!t.size},w=()=>{c=!0,o.value=l};Bi(()=>{S(),document.removeEventListener("mouseup",x)});const S=()=>{document.onselectstart!==u&&(document.onselectstart=u)};return Oi(Di(i,"scrollbarElement"),"mousemove",b),Oi(Di(i,"scrollbarElement"),"mouseleave",w),(_,E)=>(F(),De(Pn,{name:g(r).b("fade"),persisted:""},{default:ve(()=>[Nt(ie("div",{ref_key:"instance",ref:n,class:U([g(r).e("bar"),g(r).is(g(d).key)]),onMousedown:m},[ie("div",{ref_key:"thumb",ref:a,class:U(g(r).e("thumb")),style:mt(g(h)),onMousedown:p},null,38)],34),[[_i,_.always||o.value]])]),_:1},8,["name"]))}});var UF=Ze(xZe,[["__file","thumb.vue"]]);const _Ze=je({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),SZe=ce({__name:"bar",props:_Ze,setup(e,{expose:t}){const i=e,r=rt(l8),n=j(0),a=j(0),s=j(""),o=j(""),l=j(1),c=j(1);return t({handleScroll:h=>{if(h){const f=h.offsetHeight-Qp,p=h.offsetWidth-Qp;a.value=h.scrollTop*100/f*l.value,n.value=h.scrollLeft*100/p*c.value}},update:()=>{const h=r==null?void 0:r.wrapElement;if(!h)return;const f=h.offsetHeight-Qp,p=h.offsetWidth-Qp,m=f**2/h.scrollHeight,v=p**2/h.scrollWidth,y=Math.max(m,i.minSize),x=Math.max(v,i.minSize);l.value=m/(f-m)/(y/(f-y)),c.value=v/(p-v)/(x/(p-x)),o.value=y+Qp<f?`${y}px`:"",s.value=x+Qp<p?`${x}px`:""}}),(h,f)=>(F(),K(ht,null,[ne(UF,{move:n.value,ratio:c.value,size:s.value,always:h.always},null,8,["move","ratio","size","always"]),ne(UF,{move:a.value,ratio:l.value,size:o.value,vertical:"",always:h.always},null,8,["move","ratio","size","always"])],64))}});var CZe=Ze(SZe,[["__file","bar.vue"]]);const EZe=je({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:be([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...ha(["ariaLabel","ariaOrientation"])}),AZe={scroll:({scrollTop:e,scrollLeft:t})=>[e,t].every(gt)},MZe="ElScrollbar",TZe=ce({name:MZe}),PZe=ce({...TZe,props:EZe,emits:AZe,setup(e,{expose:t,emit:i}){const r=e,n=Ve("scrollbar");let a,s,o=0,l=0;const c=j(),u=j(),d=j(),h=j(),f=O(()=>{const S={};return r.height&&(S.height=zr(r.height)),r.maxHeight&&(S.maxHeight=zr(r.maxHeight)),[r.wrapStyle,S]}),p=O(()=>[r.wrapClass,n.e("wrap"),{[n.em("wrap","hidden-default")]:!r.native}]),m=O(()=>[n.e("view"),r.viewClass]),v=()=>{var S;u.value&&((S=h.value)==null||S.handleScroll(u.value),o=u.value.scrollTop,l=u.value.scrollLeft,i("scroll",{scrollTop:u.value.scrollTop,scrollLeft:u.value.scrollLeft}))};function y(S,_){Ri(S)?u.value.scrollTo(S):gt(S)&&gt(_)&&u.value.scrollTo(S,_)}const x=S=>{gt(S)&&(u.value.scrollTop=S)},b=S=>{gt(S)&&(u.value.scrollLeft=S)},w=()=>{var S;(S=h.value)==null||S.update()};return Ne(()=>r.noresize,S=>{S?(a==null||a(),s==null||s()):({stop:a}=gr(d,w),s=Oi("resize",w))},{immediate:!0}),Ne(()=>[r.maxHeight,r.height],()=>{r.native||ft(()=>{var S;w(),u.value&&((S=h.value)==null||S.handleScroll(u.value))})}),Yt(l8,bi({scrollbarElement:c,wrapElement:u})),L5(()=>{u.value&&(u.value.scrollTop=o,u.value.scrollLeft=l)}),Lt(()=>{r.native||ft(()=>{w()})}),Tl(()=>w()),t({wrapRef:u,update:w,scrollTo:y,setScrollTop:x,setScrollLeft:b,handleScroll:v}),(S,_)=>(F(),K("div",{ref_key:"scrollbarRef",ref:c,class:U(g(n).b())},[ie("div",{ref_key:"wrapRef",ref:u,class:U(g(p)),style:mt(g(f)),tabindex:S.tabindex,onScroll:v},[(F(),De(jt(S.tag),{id:S.id,ref_key:"resizeRef",ref:d,class:U(g(m)),style:mt(S.viewStyle),role:S.role,"aria-label":S.ariaLabel,"aria-orientation":S.ariaOrientation},{default:ve(()=>[Ee(S.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),S.native?Ae("v-if",!0):(F(),De(CZe,{key:0,ref_key:"barRef",ref:h,always:S.always,"min-size":S.minSize},null,8,["always","min-size"]))],2))}});var DZe=Ze(PZe,[["__file","scrollbar.vue"]]);const Bc=Rt(DZe),c8=Symbol("popper"),dX=Symbol("popperContent"),IZe=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],hX=je({role:{type:String,values:IZe,default:"tooltip"}}),OZe=ce({name:"ElPopper",inheritAttrs:!1}),RZe=ce({...OZe,props:hX,setup(e,{expose:t}){const i=e,r=j(),n=j(),a=j(),s=j(),o=O(()=>i.role),l={triggerRef:r,popperInstanceRef:n,contentRef:a,referenceRef:s,role:o};return t(l),Yt(c8,l),(c,u)=>Ee(c.$slots,"default")}});var kZe=Ze(RZe,[["__file","popper.vue"]]);const fX=je({arrowOffset:{type:Number,default:5}}),LZe=ce({name:"ElPopperArrow",inheritAttrs:!1}),BZe=ce({...LZe,props:fX,setup(e,{expose:t}){const i=e,r=Ve("popper"),{arrowOffset:n,arrowRef:a,arrowStyle:s}=rt(dX,void 0);return Ne(()=>i.arrowOffset,o=>{n.value=o}),Bi(()=>{a.value=void 0}),t({arrowRef:a}),(o,l)=>(F(),K("span",{ref_key:"arrowRef",ref:a,class:U(g(r).e("arrow")),style:mt(g(s)),"data-popper-arrow":""},null,6))}});var NZe=Ze(BZe,[["__file","arrow.vue"]]);const FZe="ElOnlyChild",pX=ce({name:FZe,setup(e,{slots:t,attrs:i}){var r;const n=rt(jK),a=fGe((r=n==null?void 0:n.setForwardRef)!=null?r:Sr);return()=>{var s;const o=(s=t.default)==null?void 0:s.call(t,i);if(!o||o.length>1)return null;const l=mX(o);return l?Nt(gc(l,i),[[a]]):null}}});function mX(e){if(!e)return null;const t=e;for(const i of t){if(Ri(i))switch(i.type){case Zr:continue;case xu:case"svg":return HF(i);case ht:return mX(i.children);default:return i}return HF(i)}return null}function HF(e){const t=Ve("only-child");return ne("span",{class:t.e("content")},[e])}const vX=je({virtualRef:{type:be(Object)},virtualTriggering:Boolean,onMouseenter:{type:be(Function)},onMouseleave:{type:be(Function)},onClick:{type:be(Function)},onKeydown:{type:be(Function)},onFocus:{type:be(Function)},onBlur:{type:be(Function)},onContextmenu:{type:be(Function)},id:String,open:Boolean}),zZe=ce({name:"ElPopperTrigger",inheritAttrs:!1}),VZe=ce({...zZe,props:vX,setup(e,{expose:t}){const i=e,{role:r,triggerRef:n}=rt(c8,void 0);hGe(n);const a=O(()=>o.value?i.id:void 0),s=O(()=>{if(r&&r.value==="tooltip")return i.open&&i.id?i.id:void 0}),o=O(()=>{if(r&&r.value!=="tooltip")return r.value}),l=O(()=>o.value?`${i.open}`:void 0);let c;const u=["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"];return Lt(()=>{Ne(()=>i.virtualRef,d=>{d&&(n.value=ds(d))},{immediate:!0}),Ne(n,(d,h)=>{c==null||c(),c=void 0,Xs(d)&&(u.forEach(f=>{var p;const m=i[f];m&&(d.addEventListener(f.slice(2).toLowerCase(),m),(p=h==null?void 0:h.removeEventListener)==null||p.call(h,f.slice(2).toLowerCase(),m))}),tT(d)&&(c=Ne([a,s,o,l],f=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((p,m)=>{mn(f[m])?d.removeAttribute(p):d.setAttribute(p,f[m])})},{immediate:!0}))),Xs(h)&&tT(h)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(f=>h.removeAttribute(f))},{immediate:!0})}),Bi(()=>{if(c==null||c(),c=void 0,n.value&&Xs(n.value)){const d=n.value;u.forEach(h=>{const f=i[h];f&&d.removeEventListener(h.slice(2).toLowerCase(),f)}),n.value=void 0}}),t({triggerRef:n}),(d,h)=>d.virtualTriggering?Ae("v-if",!0):(F(),De(g(pX),$t({key:0},d.$attrs,{"aria-controls":g(a),"aria-describedby":g(s),"aria-expanded":g(l),"aria-haspopup":g(o)}),{default:ve(()=>[Ee(d.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var UZe=Ze(VZe,[["__file","trigger.vue"]]);const Y4="focus-trap.focus-after-trapped",K4="focus-trap.focus-after-released",HZe="focus-trap.focusout-prevented",jF={cancelable:!0,bubbles:!1},jZe={cancelable:!0,bubbles:!1},WF="focusAfterTrapped",GF="focusAfterReleased",u8=Symbol("elFocusTrap"),d8=j(),QS=j(0),h8=j(0);let Pw=0;const gX=e=>{const t=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const n=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||n?NodeFilter.FILTER_SKIP:r.tabIndex>=0||r===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)t.push(i.currentNode);return t},$F=(e,t)=>{for(const i of e)if(!WZe(i,t))return i},WZe=(e,t)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},GZe=e=>{const t=gX(e),i=$F(t,e),r=$F(t.reverse(),e);return[i,r]},$Ze=e=>e instanceof HTMLInputElement&&"select"in e,yd=(e,t)=>{if(e&&e.focus){const i=document.activeElement;e.focus({preventScroll:!0}),h8.value=window.performance.now(),e!==i&&$Ze(e)&&t&&e.select()}};function ZF(e,t){const i=[...e],r=e.indexOf(t);return r!==-1&&i.splice(r,1),i}const ZZe=()=>{let e=[];return{push:r=>{const n=e[0];n&&r!==n&&n.pause(),e=ZF(e,r),e.unshift(r)},remove:r=>{var n,a;e=ZF(e,r),(a=(n=e[0])==null?void 0:n.resume)==null||a.call(n)}}},qZe=(e,t=!1)=>{const i=document.activeElement;for(const r of e)if(yd(r,t),document.activeElement!==i)return},qF=ZZe(),YZe=()=>QS.value>h8.value,Dw=()=>{d8.value="pointer",QS.value=window.performance.now()},YF=()=>{d8.value="keyboard",QS.value=window.performance.now()},KZe=()=>(Lt(()=>{Pw===0&&(document.addEventListener("mousedown",Dw),document.addEventListener("touchstart",Dw),document.addEventListener("keydown",YF)),Pw++}),Bi(()=>{Pw--,Pw<=0&&(document.removeEventListener("mousedown",Dw),document.removeEventListener("touchstart",Dw),document.removeEventListener("keydown",YF))}),{focusReason:d8,lastUserFocusTimestamp:QS,lastAutomatedFocusTimestamp:h8}),Iw=e=>new CustomEvent(HZe,{...jZe,detail:e}),XZe=ce({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[WF,GF,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:t}){const i=j();let r,n;const{focusReason:a}=KZe();oGe(p=>{e.trapped&&!s.paused&&t("release-requested",p)});const s={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},o=p=>{if(!e.loop&&!e.trapped||s.paused)return;const{code:m,altKey:v,ctrlKey:y,metaKey:x,currentTarget:b,shiftKey:w}=p,{loop:S}=e,_=m===at.tab&&!v&&!y&&!x,E=document.activeElement;if(_&&E){const C=b,[A,M]=GZe(C);if(A&&M){if(!w&&E===M){const P=Iw({focusReason:a.value});t("focusout-prevented",P),P.defaultPrevented||(p.preventDefault(),S&&yd(A,!0))}else if(w&&[A,C].includes(E)){const P=Iw({focusReason:a.value});t("focusout-prevented",P),P.defaultPrevented||(p.preventDefault(),S&&yd(M,!0))}}else if(E===C){const P=Iw({focusReason:a.value});t("focusout-prevented",P),P.defaultPrevented||p.preventDefault()}}};Yt(u8,{focusTrapRef:i,onKeydown:o}),Ne(()=>e.focusTrapEl,p=>{p&&(i.value=p)},{immediate:!0}),Ne([i],([p],[m])=>{p&&(p.addEventListener("keydown",o),p.addEventListener("focusin",u),p.addEventListener("focusout",d)),m&&(m.removeEventListener("keydown",o),m.removeEventListener("focusin",u),m.removeEventListener("focusout",d))});const l=p=>{t(WF,p)},c=p=>t(GF,p),u=p=>{const m=g(i);if(!m)return;const v=p.target,y=p.relatedTarget,x=v&&m.contains(v);e.trapped||y&&m.contains(y)||(r=y),x&&t("focusin",p),!s.paused&&e.trapped&&(x?n=v:yd(n,!0))},d=p=>{const m=g(i);if(!(s.paused||!m))if(e.trapped){const v=p.relatedTarget;!mn(v)&&!m.contains(v)&&setTimeout(()=>{if(!s.paused&&e.trapped){const y=Iw({focusReason:a.value});t("focusout-prevented",y),y.defaultPrevented||yd(n,!0)}},0)}else{const v=p.target;v&&m.contains(v)||t("focusout",p)}};async function h(){await ft();const p=g(i);if(p){qF.push(s);const m=p.contains(document.activeElement)?r:document.activeElement;if(r=m,!p.contains(m)){const y=new Event(Y4,jF);p.addEventListener(Y4,l),p.dispatchEvent(y),y.defaultPrevented||ft(()=>{let x=e.focusStartEl;Et(x)||(yd(x),document.activeElement!==x&&(x="first")),x==="first"&&qZe(gX(p),!0),(document.activeElement===m||x==="container")&&yd(p)})}}}function f(){const p=g(i);if(p){p.removeEventListener(Y4,l);const m=new CustomEvent(K4,{...jF,detail:{focusReason:a.value}});p.addEventListener(K4,c),p.dispatchEvent(m),!m.defaultPrevented&&(a.value=="keyboard"||!YZe()||p.contains(document.activeElement))&&yd(r??document.body),p.removeEventListener(K4,c),qF.remove(s)}}return Lt(()=>{e.trapped&&h(),Ne(()=>e.trapped,p=>{p?h():f()})}),Bi(()=>{e.trapped&&f(),i.value&&(i.value.removeEventListener("keydown",o),i.value.removeEventListener("focusin",u),i.value.removeEventListener("focusout",d),i.value=void 0)}),{onKeydown:o}}});function QZe(e,t,i,r,n,a){return Ee(e.$slots,"default",{handleKeydown:e.onKeydown})}var Ly=Ze(XZe,[["render",QZe],["__file","focus-trap.vue"]]);const JZe=["fixed","absolute"],eqe=je({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:be(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:Xu,default:"bottom"},popperOptions:{type:be(Object),default:()=>({})},strategy:{type:String,values:JZe,default:"absolute"}}),yX=je({...eqe,id:String,style:{type:be([String,Array,Object])},className:{type:be([String,Array,Object])},effect:{type:be(String),default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:be([String,Array,Object])},popperStyle:{type:be([String,Array,Object])},referenceEl:{type:be(Object)},triggerTargetEl:{type:be(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...ha(["ariaLabel"])}),tqe={mouseenter:e=>e instanceof MouseEvent,mouseleave:e=>e instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},iqe=(e,t=[])=>{const{placement:i,strategy:r,popperOptions:n}=e,a={placement:i,strategy:r,...n,modifiers:[...nqe(e),...t]};return aqe(a,n==null?void 0:n.modifiers),a},rqe=e=>{if(si)return ds(e)};function nqe(e){const{offset:t,gpuAcceleration:i,fallbackPlacements:r}=e;return[{name:"offset",options:{offset:[0,t??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:r}},{name:"computeStyles",options:{gpuAcceleration:i}}]}function aqe(e,t){t&&(e.modifiers=[...e.modifiers,...t??[]])}const sqe=0,oqe=e=>{const{popperInstanceRef:t,contentRef:i,triggerRef:r,role:n}=rt(c8,void 0),a=j(),s=j(),o=O(()=>({name:"eventListeners",enabled:!!e.visible})),l=O(()=>{var y;const x=g(a),b=(y=g(s))!=null?y:sqe;return{name:"arrow",enabled:!xI(x),options:{element:x,padding:b}}}),c=O(()=>({onFirstUpdate:()=>{p()},...iqe(e,[g(l),g(o)])})),u=O(()=>rqe(e.referenceEl)||g(r)),{attributes:d,state:h,styles:f,update:p,forceUpdate:m,instanceRef:v}=rGe(u,i,c);return Ne(v,y=>t.value=y),Lt(()=>{Ne(()=>{var y;return(y=g(u))==null?void 0:y.getBoundingClientRect()},()=>{p()})}),{attributes:d,arrowRef:a,contentRef:i,instanceRef:v,state:h,styles:f,role:n,forceUpdate:m,update:p}},lqe=(e,{attributes:t,styles:i,role:r})=>{const{nextZIndex:n}=d0(),a=Ve("popper"),s=O(()=>g(t).popper),o=j(gt(e.zIndex)?e.zIndex:n()),l=O(()=>[a.b(),a.is("pure",e.pure),a.is(e.effect),e.popperClass]),c=O(()=>[{zIndex:g(o)},g(i).popper,e.popperStyle||{}]),u=O(()=>r.value==="dialog"?"false":void 0),d=O(()=>g(i).arrow||{});return{ariaModal:u,arrowStyle:d,contentAttrs:s,contentClass:l,contentStyle:c,contentZIndex:o,updateZIndex:()=>{o.value=gt(e.zIndex)?e.zIndex:n()}}},cqe=(e,t)=>{const i=j(!1),r=j();return{focusStartRef:r,trapped:i,onFocusAfterReleased:c=>{var u;((u=c.detail)==null?void 0:u.focusReason)!=="pointer"&&(r.value="first",t("blur"))},onFocusAfterTrapped:()=>{t("focus")},onFocusInTrap:c=>{e.visible&&!i.value&&(c.target&&(r.value=c.target),i.value=!0)},onFocusoutPrevented:c=>{e.trapping||(c.detail.focusReason==="pointer"&&c.preventDefault(),i.value=!1)},onReleaseRequested:()=>{i.value=!1,t("close")}}},uqe=ce({name:"ElPopperContent"}),dqe=ce({...uqe,props:yX,emits:tqe,setup(e,{expose:t,emit:i}){const r=e,{focusStartRef:n,trapped:a,onFocusAfterReleased:s,onFocusAfterTrapped:o,onFocusInTrap:l,onFocusoutPrevented:c,onReleaseRequested:u}=cqe(r,i),{attributes:d,arrowRef:h,contentRef:f,styles:p,instanceRef:m,role:v,update:y}=oqe(r),{ariaModal:x,arrowStyle:b,contentAttrs:w,contentClass:S,contentStyle:_,updateZIndex:E}=lqe(r,{styles:p,attributes:d,role:v}),C=rt(Ac,void 0),A=j();Yt(dX,{arrowStyle:b,arrowRef:h,arrowOffset:A}),C&&Yt(Ac,{...C,addInputId:Sr,removeInputId:Sr});let M;const T=(D=!0)=>{y(),D&&E()},P=()=>{T(!1),r.visible&&r.focusOnShow?a.value=!0:r.visible===!1&&(a.value=!1)};return Lt(()=>{Ne(()=>r.triggerTargetEl,(D,k)=>{M==null||M(),M=void 0;const L=g(D||f.value),R=g(k||f.value);Xs(L)&&(M=Ne([v,()=>r.ariaLabel,x,()=>r.id],N=>{["role","aria-label","aria-modal","id"].forEach((I,B)=>{mn(N[B])?L.removeAttribute(I):L.setAttribute(I,N[B])})},{immediate:!0})),R!==L&&Xs(R)&&["role","aria-label","aria-modal","id"].forEach(N=>{R.removeAttribute(N)})},{immediate:!0}),Ne(()=>r.visible,P,{immediate:!0})}),Bi(()=>{M==null||M(),M=void 0}),t({popperContentRef:f,popperInstanceRef:m,updatePopper:T,contentStyle:_}),(D,k)=>(F(),K("div",$t({ref_key:"contentRef",ref:f},g(w),{style:g(_),class:g(S),tabindex:"-1",onMouseenter:L=>D.$emit("mouseenter",L),onMouseleave:L=>D.$emit("mouseleave",L)}),[ne(g(Ly),{trapped:g(a),"trap-on-focus-in":!0,"focus-trap-el":g(f),"focus-start-el":g(n),onFocusAfterTrapped:g(o),onFocusAfterReleased:g(s),onFocusin:g(l),onFocusoutPrevented:g(c),onReleaseRequested:g(u)},{default:ve(()=>[Ee(D.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16,["onMouseenter","onMouseleave"]))}});var hqe=Ze(dqe,[["__file","content.vue"]]);const bX=Rt(kZe),JS=Symbol("elTooltip"),Nn=je({...uGe,...yX,appendTo:{type:be([String,Object])},content:{type:String,default:""},rawContent:Boolean,persistent:Boolean,visible:{type:be(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...ha(["ariaLabel"])}),N1=je({...vX,disabled:Boolean,trigger:{type:be([String,Array]),default:"hover"},triggerKeys:{type:be(Array),default:()=>[at.enter,at.numpadEnter,at.space]}}),{useModelToggleProps:fqe,useModelToggleEmits:pqe,useModelToggle:mqe}=eWe("visible"),vqe=je({...hX,...fqe,...Nn,...N1,...fX,showArrow:{type:Boolean,default:!0}}),gqe=[...pqe,"before-show","before-hide","show","hide","open","close"],yqe=(e,t)=>ct(e)?e.includes(t):e===t,Jp=(e,t,i)=>r=>{yqe(g(e),t)&&i(r)},bqe=ce({name:"ElTooltipTrigger"}),wqe=ce({...bqe,props:N1,setup(e,{expose:t}){const i=e,r=Ve("tooltip"),{controlled:n,id:a,open:s,onOpen:o,onClose:l,onToggle:c}=rt(JS,void 0),u=j(null),d=()=>{if(g(n)||i.disabled)return!0},h=Di(i,"trigger"),f=Br(d,Jp(h,"hover",o)),p=Br(d,Jp(h,"hover",l)),m=Br(d,Jp(h,"click",w=>{w.button===0&&c(w)})),v=Br(d,Jp(h,"focus",o)),y=Br(d,Jp(h,"focus",l)),x=Br(d,Jp(h,"contextmenu",w=>{w.preventDefault(),c(w)})),b=Br(d,w=>{const{code:S}=w;i.triggerKeys.includes(S)&&(w.preventDefault(),c(w))});return t({triggerRef:u}),(w,S)=>(F(),De(g(UZe),{id:g(a),"virtual-ref":w.virtualRef,open:g(s),"virtual-triggering":w.virtualTriggering,class:U(g(r).e("trigger")),onBlur:g(y),onClick:g(m),onContextmenu:g(x),onFocus:g(v),onMouseenter:g(f),onMouseleave:g(p),onKeydown:g(b)},{default:ve(()=>[Ee(w.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var xqe=Ze(wqe,[["__file","trigger.vue"]]);const _qe=je({to:{type:be([String,Object]),required:!0},disabled:Boolean}),Sqe=ce({__name:"teleport",props:_qe,setup(e){return(t,i)=>t.disabled?Ee(t.$slots,"default",{key:0}):(F(),De(ute,{key:1,to:t.to},[Ee(t.$slots,"default")],8,["to"]))}});var Cqe=Ze(Sqe,[["__file","teleport.vue"]]);const Eqe=Rt(Cqe);var f0=Eqe;const Aqe=ce({name:"ElTooltipContent",inheritAttrs:!1}),Mqe=ce({...Aqe,props:Nn,setup(e,{expose:t}){const i=e,{selector:r}=HK(),n=Ve("tooltip"),a=j(null);let s;const{controlled:o,id:l,open:c,trigger:u,onClose:d,onOpen:h,onShow:f,onHide:p,onBeforeShow:m,onBeforeHide:v}=rt(JS,void 0),y=O(()=>i.transition||`${n.namespace.value}-fade-in-linear`),x=O(()=>i.persistent);Bi(()=>{s==null||s()});const b=O(()=>g(x)?!0:g(c)),w=O(()=>i.disabled?!1:g(c)),S=O(()=>i.appendTo||r.value),_=O(()=>{var R;return(R=i.style)!=null?R:{}}),E=j(!0),C=()=>{p(),E.value=!0},A=()=>{if(g(o))return!0},M=Br(A,()=>{i.enterable&&g(u)==="hover"&&h()}),T=Br(A,()=>{g(u)==="hover"&&d()}),P=()=>{var R,N;(N=(R=a.value)==null?void 0:R.updatePopper)==null||N.call(R),m==null||m()},D=()=>{v==null||v()},k=()=>{f(),s=LD(O(()=>{var R;return(R=a.value)==null?void 0:R.popperContentRef}),()=>{if(g(o))return;g(u)!=="hover"&&d()})},L=()=>{i.virtualTriggering||d()};return Ne(()=>g(c),R=>{R?E.value=!1:s==null||s()},{flush:"post"}),Ne(()=>i.content,()=>{var R,N;(N=(R=a.value)==null?void 0:R.updatePopper)==null||N.call(R)}),t({contentRef:a}),(R,N)=>(F(),De(g(f0),{disabled:!R.teleported,to:g(S)},{default:ve(()=>[ne(Pn,{name:g(y),onAfterLeave:C,onBeforeEnter:P,onAfterEnter:k,onBeforeLeave:D},{default:ve(()=>[g(b)?Nt((F(),De(g(hqe),$t({key:0,id:g(l),ref_key:"contentRef",ref:a},R.$attrs,{"aria-label":R.ariaLabel,"aria-hidden":E.value,"boundaries-padding":R.boundariesPadding,"fallback-placements":R.fallbackPlacements,"gpu-acceleration":R.gpuAcceleration,offset:R.offset,placement:R.placement,"popper-options":R.popperOptions,strategy:R.strategy,effect:R.effect,enterable:R.enterable,pure:R.pure,"popper-class":R.popperClass,"popper-style":[R.popperStyle,g(_)],"reference-el":R.referenceEl,"trigger-target-el":R.triggerTargetEl,visible:g(w),"z-index":R.zIndex,onMouseenter:g(M),onMouseleave:g(T),onBlur:L,onClose:g(d)}),{default:ve(()=>[Ee(R.$slots,"default")]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[_i,g(w)]]):Ae("v-if",!0)]),_:3},8,["name"])]),_:3},8,["disabled","to"]))}});var Tqe=Ze(Mqe,[["__file","content.vue"]]);const Pqe=ce({name:"ElTooltip"}),Dqe=ce({...Pqe,props:vqe,emits:gqe,setup(e,{expose:t,emit:i}){const r=e;cGe();const n=ua(),a=j(),s=j(),o=()=>{var y;const x=g(a);x&&((y=x.popperInstanceRef)==null||y.update())},l=j(!1),c=j(),{show:u,hide:d,hasUpdateHandler:h}=mqe({indicator:l,toggleReason:c}),{onOpen:f,onClose:p}=dGe({showAfter:Di(r,"showAfter"),hideAfter:Di(r,"hideAfter"),autoClose:Di(r,"autoClose"),open:u,close:d}),m=O(()=>Gi(r.visible)&&!h.value);Yt(JS,{controlled:m,id:n,open:K1(l),trigger:Di(r,"trigger"),onOpen:y=>{f(y)},onClose:y=>{p(y)},onToggle:y=>{g(l)?p(y):f(y)},onShow:()=>{i("show",c.value)},onHide:()=>{i("hide",c.value)},onBeforeShow:()=>{i("before-show",c.value)},onBeforeHide:()=>{i("before-hide",c.value)},updatePopper:o}),Ne(()=>r.disabled,y=>{y&&l.value&&(l.value=!1)});const v=y=>{var x,b;const w=(b=(x=s.value)==null?void 0:x.contentRef)==null?void 0:b.popperContentRef,S=(y==null?void 0:y.relatedTarget)||document.activeElement;return w&&w.contains(S)};return YV(()=>l.value&&d()),t({popperRef:a,contentRef:s,isFocusInsideContent:v,updatePopper:o,onOpen:f,onClose:p,hide:d}),(y,x)=>(F(),De(g(bX),{ref_key:"popperRef",ref:a,role:y.role},{default:ve(()=>[ne(xqe,{disabled:y.disabled,trigger:y.trigger,"trigger-keys":y.triggerKeys,"virtual-ref":y.virtualRef,"virtual-triggering":y.virtualTriggering},{default:ve(()=>[y.$slots.default?Ee(y.$slots,"default",{key:0}):Ae("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),ne(Tqe,{ref_key:"contentRef",ref:s,"aria-label":y.ariaLabel,"boundaries-padding":y.boundariesPadding,content:y.content,disabled:y.disabled,effect:y.effect,enterable:y.enterable,"fallback-placements":y.fallbackPlacements,"hide-after":y.hideAfter,"gpu-acceleration":y.gpuAcceleration,offset:y.offset,persistent:y.persistent,"popper-class":y.popperClass,"popper-style":y.popperStyle,placement:y.placement,"popper-options":y.popperOptions,pure:y.pure,"raw-content":y.rawContent,"reference-el":y.referenceEl,"trigger-target-el":y.triggerTargetEl,"show-after":y.showAfter,strategy:y.strategy,teleported:y.teleported,transition:y.transition,"virtual-triggering":y.virtualTriggering,"z-index":y.zIndex,"append-to":y.appendTo},{default:ve(()=>[Ee(y.$slots,"content",{},()=>[y.rawContent?(F(),K("span",{key:0,innerHTML:y.content},null,8,["innerHTML"])):(F(),K("span",{key:1},Ye(y.content),1))]),y.showArrow?(F(),De(g(NZe),{key:0,"arrow-offset":y.arrowOffset},null,8,["arrow-offset"])):Ae("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Iqe=Ze(Dqe,[["__file","tooltip.vue"]]);const Ta=Rt(Iqe),Oqe=je({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:be(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:be([Function,Array]),default:Sr},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},teleported:Nn.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:String,...ha(["ariaLabel"])}),Rqe={[Vt]:e=>Et(e),[fs]:e=>Et(e),[nr]:e=>Et(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,select:e=>Ri(e)},wX="ElAutocomplete",kqe=ce({name:wX,inheritAttrs:!1}),Lqe=ce({...kqe,props:Oqe,emits:Rqe,setup(e,{expose:t,emit:i}){const r=e,n=jS(),a=rp(),s=qa(),o=Ve("autocomplete"),l=j(),c=j(),u=j(),d=j();let h=!1,f=!1;const p=j([]),m=j(-1),v=j(""),y=j(!1),x=j(!1),b=j(!1),w=ua(),S=O(()=>a.style),_=O(()=>(p.value.length>0||b.value)&&y.value),E=O(()=>!r.hideLoading&&b.value),C=O(()=>l.value?Array.from(l.value.$el.querySelectorAll("input")):[]),A=()=>{_.value&&(v.value=`${l.value.$el.offsetWidth}px`)},M=()=>{m.value=-1},T=async $=>{if(x.value)return;const te=Q=>{b.value=!1,!x.value&&(ct(Q)?(p.value=Q,m.value=r.highlightFirstItem?0:-1):bn(wX,"autocomplete suggestions must be an array"))};if(b.value=!0,ct(r.fetchSuggestions))te(r.fetchSuggestions);else{const Q=await r.fetchSuggestions($,te);ct(Q)&&te(Q)}},P=gs(T,r.debounce),D=$=>{const te=!!$;if(i(fs,$),i(Vt,$),x.value=!1,y.value||(y.value=te),!r.triggerOnFocus&&!$){x.value=!0,p.value=[];return}P($)},k=$=>{var te;s.value||(((te=$.target)==null?void 0:te.tagName)!=="INPUT"||C.value.includes(document.activeElement))&&(y.value=!0)},L=$=>{i(nr,$)},R=$=>{f?f=!1:(y.value=!0,i("focus",$),r.triggerOnFocus&&!h&&P(String(r.modelValue)))},N=$=>{setTimeout(()=>{var te;if((te=u.value)!=null&&te.isFocusInsideContent()){f=!0;return}y.value&&V(),i("blur",$)})},I=()=>{y.value=!1,i(Vt,""),i("clear")},B=async()=>{_.value&&m.value>=0&&m.value<p.value.length?q(p.value[m.value]):r.selectWhenUnmatched&&(i("select",{value:r.modelValue}),p.value=[],m.value=-1)},z=$=>{_.value&&($.preventDefault(),$.stopPropagation(),V())},V=()=>{y.value=!1},W=()=>{var $;($=l.value)==null||$.focus()},G=()=>{var $;($=l.value)==null||$.blur()},q=async $=>{i(fs,$[r.valueKey]),i(Vt,$[r.valueKey]),i("select",$),p.value=[],m.value=-1},ae=$=>{if(!_.value||b.value)return;if($<0){m.value=-1;return}$>=p.value.length&&($=p.value.length-1);const te=c.value.querySelector(`.${o.be("suggestion","wrap")}`),pe=te.querySelectorAll(`.${o.be("suggestion","list")} li`)[$],me=te.scrollTop,{offsetTop:le,scrollHeight:Z}=pe;le+Z>me+te.clientHeight&&(te.scrollTop+=Z),le<me&&(te.scrollTop-=Z),m.value=$,l.value.ref.setAttribute("aria-activedescendant",`${w.value}-item-${m.value}`)},J=LD(d,()=>{_.value&&V()});return Bi(()=>{J==null||J()}),Lt(()=>{l.value.ref.setAttribute("role","textbox"),l.value.ref.setAttribute("aria-autocomplete","list"),l.value.ref.setAttribute("aria-controls","id"),l.value.ref.setAttribute("aria-activedescendant",`${w.value}-item-${m.value}`),h=l.value.ref.hasAttribute("readonly")}),t({highlightedIndex:m,activated:y,loading:b,inputRef:l,popperRef:u,suggestions:p,handleSelect:q,handleKeyEnter:B,focus:W,blur:G,close:V,highlight:ae,getData:T}),($,te)=>(F(),De(g(Ta),{ref_key:"popperRef",ref:u,visible:g(_),placement:$.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[g(o).e("popper"),$.popperClass],teleported:$.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${g(o).namespace.value}-zoom-in-top`,persistent:"",role:"listbox",onBeforeShow:A,onHide:M},{content:ve(()=>[ie("div",{ref_key:"regionRef",ref:c,class:U([g(o).b("suggestion"),g(o).is("loading",g(E))]),style:mt({[$.fitInputWidth?"width":"minWidth"]:v.value,outline:"none"}),role:"region"},[ne(g(Bc),{id:g(w),tag:"ul","wrap-class":g(o).be("suggestion","wrap"),"view-class":g(o).be("suggestion","list"),role:"listbox"},{default:ve(()=>[g(E)?(F(),K("li",{key:0},[Ee($.$slots,"loading",{},()=>[ne(g(ut),{class:U(g(o).is("loading"))},{default:ve(()=>[ne(g(_c))]),_:1},8,["class"])])])):(F(!0),K(ht,{key:1},Qt(p.value,(Q,pe)=>(F(),K("li",{id:`${g(w)}-item-${pe}`,key:pe,class:U({highlighted:m.value===pe}),role:"option","aria-selected":m.value===pe,onClick:me=>q(Q)},[Ee($.$slots,"default",{item:Q},()=>[Xt(Ye(Q[$.valueKey]),1)])],10,["id","aria-selected","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:ve(()=>[ie("div",{ref_key:"listboxRef",ref:d,class:U([g(o).b(),$.$attrs.class]),style:mt(g(S)),role:"combobox","aria-haspopup":"listbox","aria-expanded":g(_),"aria-owns":g(w)},[ne(g(Ha),$t({ref_key:"inputRef",ref:l},g(n),{clearable:$.clearable,disabled:g(s),name:$.name,"model-value":$.modelValue,"aria-label":$.ariaLabel,onInput:D,onChange:L,onFocus:R,onBlur:N,onClear:I,onKeydown:[Hi(xt(Q=>ae(m.value-1),["prevent"]),["up"]),Hi(xt(Q=>ae(m.value+1),["prevent"]),["down"]),Hi(B,["enter"]),Hi(V,["tab"]),Hi(z,["esc"])],onMousedown:k}),Lo({_:2},[$.$slots.prepend?{name:"prepend",fn:ve(()=>[Ee($.$slots,"prepend")])}:void 0,$.$slots.append?{name:"append",fn:ve(()=>[Ee($.$slots,"append")])}:void 0,$.$slots.prefix?{name:"prefix",fn:ve(()=>[Ee($.$slots,"prefix")])}:void 0,$.$slots.suffix?{name:"suffix",fn:ve(()=>[Ee($.$slots,"suffix")])}:void 0]),1040,["clearable","disabled","name","model-value","aria-label","onKeydown"])],14,["aria-expanded","aria-owns"])]),_:3},8,["visible","placement","popper-class","teleported","transition"]))}});var Bqe=Ze(Lqe,[["__file","autocomplete.vue"]]);const Nqe=Rt(Bqe),Fqe=je({size:{type:[Number,String],values:Lc,default:"",validator:e=>gt(e)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:zi},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:be(String),default:"cover"}}),zqe={error:e=>e instanceof Event},Vqe=ce({name:"ElAvatar"}),Uqe=ce({...Vqe,props:Fqe,emits:zqe,setup(e,{emit:t}){const i=e,r=Ve("avatar"),n=j(!1),a=O(()=>{const{size:c,icon:u,shape:d}=i,h=[r.b()];return Et(c)&&h.push(r.m(c)),u&&h.push(r.m("icon")),d&&h.push(r.m(d)),h}),s=O(()=>{const{size:c}=i;return gt(c)?r.cssVarBlock({size:zr(c)||""}):void 0}),o=O(()=>({objectFit:i.fit}));Ne(()=>i.src,()=>n.value=!1);function l(c){n.value=!0,t("error",c)}return(c,u)=>(F(),K("span",{class:U(g(a)),style:mt(g(s))},[(c.src||c.srcSet)&&!n.value?(F(),K("img",{key:0,src:c.src,alt:c.alt,srcset:c.srcSet,style:mt(g(o)),onError:l},null,44,["src","alt","srcset"])):c.icon?(F(),De(g(ut),{key:1},{default:ve(()=>[(F(),De(jt(c.icon)))]),_:1})):Ee(c.$slots,"default",{key:2})],6))}});var Hqe=Ze(Uqe,[["__file","avatar.vue"]]);const jqe=Rt(Hqe),Wqe={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},Gqe={click:e=>e instanceof MouseEvent},$qe=(e,t,i)=>{const r=Wi(),n=Wi(),a=j(!1),s=()=>{r.value&&(a.value=r.value.scrollTop>=e.visibilityHeight)},o=c=>{var u;(u=r.value)==null||u.scrollTo({top:0,behavior:"smooth"}),t("click",c)},l=jZ(s,300,!0);return Oi(n,"scroll",l),Lt(()=>{var c;n.value=document,r.value=document.documentElement,e.target&&(r.value=(c=document.querySelector(e.target))!=null?c:void 0,r.value||bn(i,`target does not exist: ${e.target}`),n.value=r.value),s()}),{visible:a,handleClick:o}},xX="ElBacktop",Zqe=ce({name:xX}),qqe=ce({...Zqe,props:Wqe,emits:Gqe,setup(e,{emit:t}){const i=e,r=Ve("backtop"),{handleClick:n,visible:a}=$qe(i,t,xX),s=O(()=>({right:`${i.right}px`,bottom:`${i.bottom}px`}));return(o,l)=>(F(),De(Pn,{name:`${g(r).namespace.value}-fade-in`},{default:ve(()=>[g(a)?(F(),K("div",{key:0,style:mt(g(s)),class:U(g(r).b()),onClick:xt(g(n),["stop"])},[Ee(o.$slots,"default",{},()=>[ne(g(ut),{class:U(g(r).e("icon"))},{default:ve(()=>[ne(g(BHe))]),_:1},8,["class"])])],14,["onClick"])):Ae("v-if",!0)]),_:3},8,["name"]))}});var Yqe=Ze(qqe,[["__file","backtop.vue"]]);const Kqe=Rt(Yqe),Xqe=je({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:be([String,Object,Array])},offset:{type:be(Array),default:[0,0]},badgeClass:{type:String}}),Qqe=ce({name:"ElBadge"}),Jqe=ce({...Qqe,props:Xqe,setup(e,{expose:t}){const i=e,r=Ve("badge"),n=O(()=>i.isDot?"":gt(i.value)&&gt(i.max)?i.max<i.value?`${i.max}+`:`${i.value}`:`${i.value}`),a=O(()=>{var s,o,l,c,u;return[{backgroundColor:i.color,marginRight:zr(-((o=(s=i.offset)==null?void 0:s[0])!=null?o:0)),marginTop:zr((c=(l=i.offset)==null?void 0:l[1])!=null?c:0)},(u=i.badgeStyle)!=null?u:{}]});return t({content:n}),(s,o)=>(F(),K("div",{class:U(g(r).b())},[Ee(s.$slots,"default"),ne(Pn,{name:`${g(r).namespace.value}-zoom-in-center`,persisted:""},{default:ve(()=>[Nt(ie("sup",{class:U([g(r).e("content"),g(r).em("content",s.type),g(r).is("fixed",!!s.$slots.default),g(r).is("dot",s.isDot),g(r).is("hide-zero",!s.showZero&&i.value===0),s.badgeClass]),style:mt(g(a)),textContent:Ye(g(n))},null,14,["textContent"]),[[_i,!s.hidden&&(g(n)||s.isDot)]])]),_:1},8,["name"])],2))}});var eYe=Ze(Jqe,[["__file","badge.vue"]]);const _X=Rt(eYe),SX=Symbol("breadcrumbKey"),tYe=je({separator:{type:String,default:"/"},separatorIcon:{type:zi}}),iYe=ce({name:"ElBreadcrumb"}),rYe=ce({...iYe,props:tYe,setup(e){const t=e,{t:i}=di(),r=Ve("breadcrumb"),n=j();return Yt(SX,t),Lt(()=>{const a=n.value.querySelectorAll(`.${r.e("item")}`);a.length&&a[a.length-1].setAttribute("aria-current","page")}),(a,s)=>(F(),K("div",{ref_key:"breadcrumb",ref:n,class:U(g(r).b()),"aria-label":g(i)("el.breadcrumb.label"),role:"navigation"},[Ee(a.$slots,"default")],10,["aria-label"]))}});var nYe=Ze(rYe,[["__file","breadcrumb.vue"]]);const aYe=je({to:{type:be([String,Object]),default:""},replace:Boolean}),sYe=ce({name:"ElBreadcrumbItem"}),oYe=ce({...sYe,props:aYe,setup(e){const t=e,i=Ut(),r=rt(SX,void 0),n=Ve("breadcrumb"),a=i.appContext.config.globalProperties.$router,s=j(),o=()=>{!t.to||!a||(t.replace?a.replace(t.to):a.push(t.to))};return(l,c)=>{var u,d;return F(),K("span",{class:U(g(n).e("item"))},[ie("span",{ref_key:"link",ref:s,class:U([g(n).e("inner"),g(n).is("link",!!l.to)]),role:"link",onClick:o},[Ee(l.$slots,"default")],2),(u=g(r))!=null&&u.separatorIcon?(F(),De(g(ut),{key:0,class:U(g(n).e("separator"))},{default:ve(()=>[(F(),De(jt(g(r).separatorIcon)))]),_:1},8,["class"])):(F(),K("span",{key:1,class:U(g(n).e("separator")),role:"presentation"},Ye((d=g(r))==null?void 0:d.separator),3))],2)}}});var CX=Ze(oYe,[["__file","breadcrumb-item.vue"]]);const lYe=Rt(nYe,{BreadcrumbItem:CX}),cYe=Tr(CX),EX=Symbol("buttonGroupContextKey"),uYe=(e,t)=>{th({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},O(()=>e.type==="text"));const i=rt(EX,void 0),r=KS("button"),{form:n}=Ya(),a=on(O(()=>i==null?void 0:i.size)),s=qa(),o=j(),l=In(),c=O(()=>e.type||(i==null?void 0:i.type)||""),u=O(()=>{var p,m,v;return(v=(m=e.autoInsertSpace)!=null?m:(p=r.value)==null?void 0:p.autoInsertSpace)!=null?v:!1}),d=O(()=>e.tag==="button"?{ariaDisabled:s.value||e.loading,disabled:s.value||e.loading,autofocus:e.autofocus,type:e.nativeType}:{}),h=O(()=>{var p;const m=(p=l.default)==null?void 0:p.call(l);if(u.value&&(m==null?void 0:m.length)===1){const v=m[0];if((v==null?void 0:v.type)===xu){const y=v.children;return new RegExp("^\\p{Unified_Ideograph}{2}$","u").test(y.trim())}}return!1});return{_disabled:s,_size:a,_type:c,_ref:o,_props:d,shouldAddSpace:h,handleClick:p=>{if(s.value||e.loading){p.stopPropagation();return}e.nativeType==="reset"&&(n==null||n.resetFields()),t("click",p)}}},PT=["default","primary","success","warning","info","danger","text",""],dYe=["button","submit","reset"],DT=je({size:wn,disabled:Boolean,type:{type:String,values:PT,default:""},icon:{type:zi},nativeType:{type:String,values:dYe,default:"button"},loading:Boolean,loadingIcon:{type:zi,default:()=>_c},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:be([String,Object]),default:"button"}}),hYe={click:e=>e instanceof MouseEvent};function Aa(e,t){fYe(e)&&(e="100%");var i=pYe(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),i&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function Ow(e){return Math.min(1,Math.max(0,e))}function fYe(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function pYe(e){return typeof e=="string"&&e.indexOf("%")!==-1}function AX(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Rw(e){return e<=1?"".concat(Number(e)*100,"%"):e}function Sf(e){return e.length===1?"0"+e:String(e)}function mYe(e,t,i){return{r:Aa(e,255)*255,g:Aa(t,255)*255,b:Aa(i,255)*255}}function KF(e,t,i){e=Aa(e,255),t=Aa(t,255),i=Aa(i,255);var r=Math.max(e,t,i),n=Math.min(e,t,i),a=0,s=0,o=(r+n)/2;if(r===n)s=0,a=0;else{var l=r-n;switch(s=o>.5?l/(2-r-n):l/(r+n),r){case e:a=(t-i)/l+(t<i?6:0);break;case t:a=(i-e)/l+2;break;case i:a=(e-t)/l+4;break}a/=6}return{h:a,s,l:o}}function X4(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*(6*i):i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function vYe(e,t,i){var r,n,a;if(e=Aa(e,360),t=Aa(t,100),i=Aa(i,100),t===0)n=i,a=i,r=i;else{var s=i<.5?i*(1+t):i+t-i*t,o=2*i-s;r=X4(o,s,e+1/3),n=X4(o,s,e),a=X4(o,s,e-1/3)}return{r:r*255,g:n*255,b:a*255}}function XF(e,t,i){e=Aa(e,255),t=Aa(t,255),i=Aa(i,255);var r=Math.max(e,t,i),n=Math.min(e,t,i),a=0,s=r,o=r-n,l=r===0?0:o/r;if(r===n)a=0;else{switch(r){case e:a=(t-i)/o+(t<i?6:0);break;case t:a=(i-e)/o+2;break;case i:a=(e-t)/o+4;break}a/=6}return{h:a,s:l,v:s}}function gYe(e,t,i){e=Aa(e,360)*6,t=Aa(t,100),i=Aa(i,100);var r=Math.floor(e),n=e-r,a=i*(1-t),s=i*(1-n*t),o=i*(1-(1-n)*t),l=r%6,c=[i,s,a,a,o,i][l],u=[o,i,i,s,a,a][l],d=[a,a,o,i,i,s][l];return{r:c*255,g:u*255,b:d*255}}function QF(e,t,i,r){var n=[Sf(Math.round(e).toString(16)),Sf(Math.round(t).toString(16)),Sf(Math.round(i).toString(16))];return r&&n[0].startsWith(n[0].charAt(1))&&n[1].startsWith(n[1].charAt(1))&&n[2].startsWith(n[2].charAt(1))?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function yYe(e,t,i,r,n){var a=[Sf(Math.round(e).toString(16)),Sf(Math.round(t).toString(16)),Sf(Math.round(i).toString(16)),Sf(bYe(r))];return n&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function bYe(e){return Math.round(parseFloat(e)*255).toString(16)}function JF(e){return Ws(e)/255}function Ws(e){return parseInt(e,16)}function wYe(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var IT={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function xYe(e){var t={r:0,g:0,b:0},i=1,r=null,n=null,a=null,s=!1,o=!1;return typeof e=="string"&&(e=CYe(e)),typeof e=="object"&&(Qc(e.r)&&Qc(e.g)&&Qc(e.b)?(t=mYe(e.r,e.g,e.b),s=!0,o=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Qc(e.h)&&Qc(e.s)&&Qc(e.v)?(r=Rw(e.s),n=Rw(e.v),t=gYe(e.h,r,n),s=!0,o="hsv"):Qc(e.h)&&Qc(e.s)&&Qc(e.l)&&(r=Rw(e.s),a=Rw(e.l),t=vYe(e.h,r,a),s=!0,o="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(i=e.a)),i=AX(i),{ok:s,format:e.format||o,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:i}}var _Ye="[-\\+]?\\d+%?",SYe="[-\\+]?\\d*\\.\\d+%?",jd="(?:".concat(SYe,")|(?:").concat(_Ye,")"),Q4="[\\s|\\(]+(".concat(jd,")[,|\\s]+(").concat(jd,")[,|\\s]+(").concat(jd,")\\s*\\)?"),J4="[\\s|\\(]+(".concat(jd,")[,|\\s]+(").concat(jd,")[,|\\s]+(").concat(jd,")[,|\\s]+(").concat(jd,")\\s*\\)?"),nl={CSS_UNIT:new RegExp(jd),rgb:new RegExp("rgb"+Q4),rgba:new RegExp("rgba"+J4),hsl:new RegExp("hsl"+Q4),hsla:new RegExp("hsla"+J4),hsv:new RegExp("hsv"+Q4),hsva:new RegExp("hsva"+J4),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function CYe(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(IT[e])e=IT[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var i=nl.rgb.exec(e);return i?{r:i[1],g:i[2],b:i[3]}:(i=nl.rgba.exec(e),i?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=nl.hsl.exec(e),i?{h:i[1],s:i[2],l:i[3]}:(i=nl.hsla.exec(e),i?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=nl.hsv.exec(e),i?{h:i[1],s:i[2],v:i[3]}:(i=nl.hsva.exec(e),i?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=nl.hex8.exec(e),i?{r:Ws(i[1]),g:Ws(i[2]),b:Ws(i[3]),a:JF(i[4]),format:t?"name":"hex8"}:(i=nl.hex6.exec(e),i?{r:Ws(i[1]),g:Ws(i[2]),b:Ws(i[3]),format:t?"name":"hex"}:(i=nl.hex4.exec(e),i?{r:Ws(i[1]+i[1]),g:Ws(i[2]+i[2]),b:Ws(i[3]+i[3]),a:JF(i[4]+i[4]),format:t?"name":"hex8"}:(i=nl.hex3.exec(e),i?{r:Ws(i[1]+i[1]),g:Ws(i[2]+i[2]),b:Ws(i[3]+i[3]),format:t?"name":"hex"}:!1)))))))))}function Qc(e){return!!nl.CSS_UNIT.exec(String(e))}var MX=function(){function e(t,i){t===void 0&&(t=""),i===void 0&&(i={});var r;if(t instanceof e)return t;typeof t=="number"&&(t=wYe(t)),this.originalInput=t;var n=xYe(t);this.originalInput=t,this.r=n.r,this.g=n.g,this.b=n.b,this.a=n.a,this.roundA=Math.round(100*this.a)/100,this.format=(r=i.format)!==null&&r!==void 0?r:n.format,this.gradientType=i.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=n.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),i,r,n,a=t.r/255,s=t.g/255,o=t.b/255;return a<=.03928?i=a/12.92:i=Math.pow((a+.055)/1.055,2.4),s<=.03928?r=s/12.92:r=Math.pow((s+.055)/1.055,2.4),o<=.03928?n=o/12.92:n=Math.pow((o+.055)/1.055,2.4),.2126*i+.7152*r+.0722*n},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=AX(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.toHsv=function(){var t=XF(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=XF(this.r,this.g,this.b),i=Math.round(t.h*360),r=Math.round(t.s*100),n=Math.round(t.v*100);return this.a===1?"hsv(".concat(i,", ").concat(r,"%, ").concat(n,"%)"):"hsva(".concat(i,", ").concat(r,"%, ").concat(n,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var t=KF(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=KF(this.r,this.g,this.b),i=Math.round(t.h*360),r=Math.round(t.s*100),n=Math.round(t.l*100);return this.a===1?"hsl(".concat(i,", ").concat(r,"%, ").concat(n,"%)"):"hsla(".concat(i,", ").concat(r,"%, ").concat(n,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(t){return t===void 0&&(t=!1),QF(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),yYe(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),i=Math.round(this.g),r=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(i,", ").concat(r,")"):"rgba(".concat(t,", ").concat(i,", ").concat(r,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var t=function(i){return"".concat(Math.round(Aa(i,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(i){return Math.round(Aa(i,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+QF(this.r,this.g,this.b,!1),i=0,r=Object.entries(IT);i<r.length;i++){var n=r[i],a=n[0],s=n[1];if(t===s)return a}return!1},e.prototype.toString=function(t){var i=!!t;t=t??this.format;var r=!1,n=this.a<1&&this.a>=0,a=!i&&n&&(t.startsWith("hex")||t==="name");return a?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(r=this.toRgbString()),t==="prgb"&&(r=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(r=this.toHexString()),t==="hex3"&&(r=this.toHexString(!0)),t==="hex4"&&(r=this.toHex8String(!0)),t==="hex8"&&(r=this.toHex8String()),t==="name"&&(r=this.toName()),t==="hsl"&&(r=this.toHslString()),t==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var i=this.toHsl();return i.l+=t/100,i.l=Ow(i.l),new e(i)},e.prototype.brighten=function(t){t===void 0&&(t=10);var i=this.toRgb();return i.r=Math.max(0,Math.min(255,i.r-Math.round(255*-(t/100)))),i.g=Math.max(0,Math.min(255,i.g-Math.round(255*-(t/100)))),i.b=Math.max(0,Math.min(255,i.b-Math.round(255*-(t/100)))),new e(i)},e.prototype.darken=function(t){t===void 0&&(t=10);var i=this.toHsl();return i.l-=t/100,i.l=Ow(i.l),new e(i)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var i=this.toHsl();return i.s-=t/100,i.s=Ow(i.s),new e(i)},e.prototype.saturate=function(t){t===void 0&&(t=10);var i=this.toHsl();return i.s+=t/100,i.s=Ow(i.s),new e(i)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var i=this.toHsl(),r=(i.h+t)%360;return i.h=r<0?360+r:r,new e(i)},e.prototype.mix=function(t,i){i===void 0&&(i=50);var r=this.toRgb(),n=new e(t).toRgb(),a=i/100,s={r:(n.r-r.r)*a+r.r,g:(n.g-r.g)*a+r.g,b:(n.b-r.b)*a+r.b,a:(n.a-r.a)*a+r.a};return new e(s)},e.prototype.analogous=function(t,i){t===void 0&&(t=6),i===void 0&&(i=30);var r=this.toHsl(),n=360/i,a=[this];for(r.h=(r.h-(n*t>>1)+720)%360;--t;)r.h=(r.h+n)%360,a.push(new e(r));return a},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var i=this.toHsv(),r=i.h,n=i.s,a=i.v,s=[],o=1/t;t--;)s.push(new e({h:r,s:n,v:a})),a=(a+o)%1;return s},e.prototype.splitcomplement=function(){var t=this.toHsl(),i=t.h;return[this,new e({h:(i+72)%360,s:t.s,l:t.l}),new e({h:(i+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var i=this.toRgb(),r=new e(t).toRgb();return new e({r:r.r+(i.r-r.r)*i.a,g:r.g+(i.g-r.g)*i.a,b:r.b+(i.b-r.b)*i.a})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var i=this.toHsl(),r=i.h,n=[this],a=360/t,s=1;s<t;s++)n.push(new e({h:(r+s*a)%360,s:i.s,l:i.l}));return n},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();function vd(e,t=20){return e.mix("#141414",t).toString()}function EYe(e){const t=qa(),i=Ve("button");return O(()=>{let r={},n=e.color;if(n){const a=n.match(/var\((.*?)\)/);a&&(n=window.getComputedStyle(window.document.documentElement).getPropertyValue(a[1]));const s=new MX(n),o=e.dark?s.tint(20).toString():vd(s,20);if(e.plain)r=i.cssVarBlock({"bg-color":e.dark?vd(s,90):s.tint(90).toString(),"text-color":n,"border-color":e.dark?vd(s,50):s.tint(50).toString(),"hover-text-color":`var(${i.cssVarName("color-white")})`,"hover-bg-color":n,"hover-border-color":n,"active-bg-color":o,"active-text-color":`var(${i.cssVarName("color-white")})`,"active-border-color":o}),t.value&&(r[i.cssVarBlockName("disabled-bg-color")]=e.dark?vd(s,90):s.tint(90).toString(),r[i.cssVarBlockName("disabled-text-color")]=e.dark?vd(s,50):s.tint(50).toString(),r[i.cssVarBlockName("disabled-border-color")]=e.dark?vd(s,80):s.tint(80).toString());else{const l=e.dark?vd(s,30):s.tint(30).toString(),c=s.isDark()?`var(${i.cssVarName("color-white")})`:`var(${i.cssVarName("color-black")})`;if(r=i.cssVarBlock({"bg-color":n,"text-color":c,"border-color":n,"hover-bg-color":l,"hover-text-color":c,"hover-border-color":l,"active-bg-color":o,"active-border-color":o}),t.value){const u=e.dark?vd(s,50):s.tint(50).toString();r[i.cssVarBlockName("disabled-bg-color")]=u,r[i.cssVarBlockName("disabled-text-color")]=e.dark?"rgba(255, 255, 255, 0.5)":`var(${i.cssVarName("color-white")})`,r[i.cssVarBlockName("disabled-border-color")]=u}}}return r})}const AYe=ce({name:"ElButton"}),MYe=ce({...AYe,props:DT,emits:hYe,setup(e,{expose:t,emit:i}){const r=e,n=EYe(r),a=Ve("button"),{_ref:s,_size:o,_type:l,_disabled:c,_props:u,shouldAddSpace:d,handleClick:h}=uYe(r,i),f=O(()=>[a.b(),a.m(l.value),a.m(o.value),a.is("disabled",c.value),a.is("loading",r.loading),a.is("plain",r.plain),a.is("round",r.round),a.is("circle",r.circle),a.is("text",r.text),a.is("link",r.link),a.is("has-bg",r.bg)]);return t({ref:s,size:o,type:l,disabled:c,shouldAddSpace:d}),(p,m)=>(F(),De(jt(p.tag),$t({ref_key:"_ref",ref:s},g(u),{class:g(f),style:g(n),onClick:g(h)}),{default:ve(()=>[p.loading?(F(),K(ht,{key:0},[p.$slots.loading?Ee(p.$slots,"loading",{key:0}):(F(),De(g(ut),{key:1,class:U(g(a).is("loading"))},{default:ve(()=>[(F(),De(jt(p.loadingIcon)))]),_:1},8,["class"]))],64)):p.icon||p.$slots.icon?(F(),De(g(ut),{key:1},{default:ve(()=>[p.icon?(F(),De(jt(p.icon),{key:0})):Ee(p.$slots,"icon",{key:1})]),_:3})):Ae("v-if",!0),p.$slots.default?(F(),K("span",{key:2,class:U({[g(a).em("text","expand")]:g(d)})},[Ee(p.$slots,"default")],2)):Ae("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var TYe=Ze(MYe,[["__file","button.vue"]]);const PYe={size:DT.size,type:DT.type},DYe=ce({name:"ElButtonGroup"}),IYe=ce({...DYe,props:PYe,setup(e){const t=e;Yt(EX,bi({size:Di(t,"size"),type:Di(t,"type")}));const i=Ve("button");return(r,n)=>(F(),K("div",{class:U(g(i).b("group"))},[Ee(r.$slots,"default")],2))}});var TX=Ze(IYe,[["__file","button-group.vue"]]);const Wn=Rt(TYe,{ButtonGroup:TX}),PX=Tr(TX);var Ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},DX={exports:{}};(function(e,t){(function(i,r){e.exports=r()})(Ju,function(){var i=1e3,r=6e4,n=36e5,a="millisecond",s="second",o="minute",l="hour",c="day",u="week",d="month",h="quarter",f="year",p="date",m="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,x={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(k){var L=["th","st","nd","rd"],R=k%100;return"["+k+(L[(R-20)%10]||L[R]||L[0])+"]"}},b=function(k,L,R){var N=String(k);return!N||N.length>=L?k:""+Array(L+1-N.length).join(R)+k},w={s:b,z:function(k){var L=-k.utcOffset(),R=Math.abs(L),N=Math.floor(R/60),I=R%60;return(L<=0?"+":"-")+b(N,2,"0")+":"+b(I,2,"0")},m:function k(L,R){if(L.date()<R.date())return-k(R,L);var N=12*(R.year()-L.year())+(R.month()-L.month()),I=L.clone().add(N,d),B=R-I<0,z=L.clone().add(N+(B?-1:1),d);return+(-(N+(R-I)/(B?I-z:z-I))||0)},a:function(k){return k<0?Math.ceil(k)||0:Math.floor(k)},p:function(k){return{M:d,y:f,w:u,d:c,D:p,h:l,m:o,s,ms:a,Q:h}[k]||String(k||"").toLowerCase().replace(/s$/,"")},u:function(k){return k===void 0}},S="en",_={};_[S]=x;var E="$isDayjsObject",C=function(k){return k instanceof P||!(!k||!k[E])},A=function k(L,R,N){var I;if(!L)return S;if(typeof L=="string"){var B=L.toLowerCase();_[B]&&(I=B),R&&(_[B]=R,I=B);var z=L.split("-");if(!I&&z.length>1)return k(z[0])}else{var V=L.name;_[V]=L,I=V}return!N&&I&&(S=I),I||!N&&S},M=function(k,L){if(C(k))return k.clone();var R=typeof L=="object"?L:{};return R.date=k,R.args=arguments,new P(R)},T=w;T.l=A,T.i=C,T.w=function(k,L){return M(k,{locale:L.$L,utc:L.$u,x:L.$x,$offset:L.$offset})};var P=function(){function k(R){this.$L=A(R.locale,null,!0),this.parse(R),this.$x=this.$x||R.x||{},this[E]=!0}var L=k.prototype;return L.parse=function(R){this.$d=function(N){var I=N.date,B=N.utc;if(I===null)return new Date(NaN);if(T.u(I))return new Date;if(I instanceof Date)return new Date(I);if(typeof I=="string"&&!/Z$/i.test(I)){var z=I.match(v);if(z){var V=z[2]-1||0,W=(z[7]||"0").substring(0,3);return B?new Date(Date.UTC(z[1],V,z[3]||1,z[4]||0,z[5]||0,z[6]||0,W)):new Date(z[1],V,z[3]||1,z[4]||0,z[5]||0,z[6]||0,W)}}return new Date(I)}(R),this.init()},L.init=function(){var R=this.$d;this.$y=R.getFullYear(),this.$M=R.getMonth(),this.$D=R.getDate(),this.$W=R.getDay(),this.$H=R.getHours(),this.$m=R.getMinutes(),this.$s=R.getSeconds(),this.$ms=R.getMilliseconds()},L.$utils=function(){return T},L.isValid=function(){return this.$d.toString()!==m},L.isSame=function(R,N){var I=M(R);return this.startOf(N)<=I&&I<=this.endOf(N)},L.isAfter=function(R,N){return M(R)<this.startOf(N)},L.isBefore=function(R,N){return this.endOf(N)<M(R)},L.$g=function(R,N,I){return T.u(R)?this[N]:this.set(I,R)},L.unix=function(){return Math.floor(this.valueOf()/1e3)},L.valueOf=function(){return this.$d.getTime()},L.startOf=function(R,N){var I=this,B=!!T.u(N)||N,z=T.p(R),V=function(Q,pe){var me=T.w(I.$u?Date.UTC(I.$y,pe,Q):new Date(I.$y,pe,Q),I);return B?me:me.endOf(c)},W=function(Q,pe){return T.w(I.toDate()[Q].apply(I.toDate("s"),(B?[0,0,0,0]:[23,59,59,999]).slice(pe)),I)},G=this.$W,q=this.$M,ae=this.$D,J="set"+(this.$u?"UTC":"");switch(z){case f:return B?V(1,0):V(31,11);case d:return B?V(1,q):V(0,q+1);case u:var $=this.$locale().weekStart||0,te=(G<$?G+7:G)-$;return V(B?ae-te:ae+(6-te),q);case c:case p:return W(J+"Hours",0);case l:return W(J+"Minutes",1);case o:return W(J+"Seconds",2);case s:return W(J+"Milliseconds",3);default:return this.clone()}},L.endOf=function(R){return this.startOf(R,!1)},L.$set=function(R,N){var I,B=T.p(R),z="set"+(this.$u?"UTC":""),V=(I={},I[c]=z+"Date",I[p]=z+"Date",I[d]=z+"Month",I[f]=z+"FullYear",I[l]=z+"Hours",I[o]=z+"Minutes",I[s]=z+"Seconds",I[a]=z+"Milliseconds",I)[B],W=B===c?this.$D+(N-this.$W):N;if(B===d||B===f){var G=this.clone().set(p,1);G.$d[V](W),G.init(),this.$d=G.set(p,Math.min(this.$D,G.daysInMonth())).$d}else V&&this.$d[V](W);return this.init(),this},L.set=function(R,N){return this.clone().$set(R,N)},L.get=function(R){return this[T.p(R)]()},L.add=function(R,N){var I,B=this;R=Number(R);var z=T.p(N),V=function(q){var ae=M(B);return T.w(ae.date(ae.date()+Math.round(q*R)),B)};if(z===d)return this.set(d,this.$M+R);if(z===f)return this.set(f,this.$y+R);if(z===c)return V(1);if(z===u)return V(7);var W=(I={},I[o]=r,I[l]=n,I[s]=i,I)[z]||1,G=this.$d.getTime()+R*W;return T.w(G,this)},L.subtract=function(R,N){return this.add(-1*R,N)},L.format=function(R){var N=this,I=this.$locale();if(!this.isValid())return I.invalidDate||m;var B=R||"YYYY-MM-DDTHH:mm:ssZ",z=T.z(this),V=this.$H,W=this.$m,G=this.$M,q=I.weekdays,ae=I.months,J=I.meridiem,$=function(pe,me,le,Z){return pe&&(pe[me]||pe(N,B))||le[me].slice(0,Z)},te=function(pe){return T.s(V%12||12,pe,"0")},Q=J||function(pe,me,le){var Z=pe<12?"AM":"PM";return le?Z.toLowerCase():Z};return B.replace(y,function(pe,me){return me||function(le){switch(le){case"YY":return String(N.$y).slice(-2);case"YYYY":return T.s(N.$y,4,"0");case"M":return G+1;case"MM":return T.s(G+1,2,"0");case"MMM":return $(I.monthsShort,G,ae,3);case"MMMM":return $(ae,G);case"D":return N.$D;case"DD":return T.s(N.$D,2,"0");case"d":return String(N.$W);case"dd":return $(I.weekdaysMin,N.$W,q,2);case"ddd":return $(I.weekdaysShort,N.$W,q,3);case"dddd":return q[N.$W];case"H":return String(V);case"HH":return T.s(V,2,"0");case"h":return te(1);case"hh":return te(2);case"a":return Q(V,W,!0);case"A":return Q(V,W,!1);case"m":return String(W);case"mm":return T.s(W,2,"0");case"s":return String(N.$s);case"ss":return T.s(N.$s,2,"0");case"SSS":return T.s(N.$ms,3,"0");case"Z":return z}return null}(pe)||z.replace(":","")})},L.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},L.diff=function(R,N,I){var B,z=this,V=T.p(N),W=M(R),G=(W.utcOffset()-this.utcOffset())*r,q=this-W,ae=function(){return T.m(z,W)};switch(V){case f:B=ae()/12;break;case d:B=ae();break;case h:B=ae()/3;break;case u:B=(q-G)/6048e5;break;case c:B=(q-G)/864e5;break;case l:B=q/n;break;case o:B=q/r;break;case s:B=q/i;break;default:B=q}return I?B:T.a(B)},L.daysInMonth=function(){return this.endOf(d).$D},L.$locale=function(){return _[this.$L]},L.locale=function(R,N){if(!R)return this.$L;var I=this.clone(),B=A(R,N,!0);return B&&(I.$L=B),I},L.clone=function(){return T.w(this.$d,this)},L.toDate=function(){return new Date(this.valueOf())},L.toJSON=function(){return this.isValid()?this.toISOString():null},L.toISOString=function(){return this.$d.toISOString()},L.toString=function(){return this.$d.toUTCString()},k}(),D=P.prototype;return M.prototype=D,[["$ms",a],["$s",s],["$m",o],["$H",l],["$W",c],["$M",d],["$y",f],["$D",p]].forEach(function(k){D[k[1]]=function(L){return this.$g(L,k[0],k[1])}}),M.extend=function(k,L){return k.$i||(k(L,P,M),k.$i=!0),M},M.locale=A,M.isDayjs=C,M.unix=function(k){return M(1e3*k)},M.en=_[S],M.Ls=_,M.p={},M})})(DX);var Dt=DX.exports,IX={exports:{}};(function(e,t){(function(i,r){e.exports=r()})(Ju,function(){var i={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d/,a=/\d\d/,s=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,l={},c=function(v){return(v=+v)+(v>68?1900:2e3)},u=function(v){return function(y){this[v]=+y}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(v){(this.zone||(this.zone={})).offset=function(y){if(!y||y==="Z")return 0;var x=y.match(/([+-]|\d\d)/g),b=60*x[1]+(+x[2]||0);return b===0?0:x[0]==="+"?-b:b}(v)}],h=function(v){var y=l[v];return y&&(y.indexOf?y:y.s.concat(y.f))},f=function(v,y){var x,b=l.meridiem;if(b){for(var w=1;w<=24;w+=1)if(v.indexOf(b(w,0,y))>-1){x=w>12;break}}else x=v===(y?"pm":"PM");return x},p={A:[o,function(v){this.afternoon=f(v,!1)}],a:[o,function(v){this.afternoon=f(v,!0)}],Q:[n,function(v){this.month=3*(v-1)+1}],S:[n,function(v){this.milliseconds=100*+v}],SS:[a,function(v){this.milliseconds=10*+v}],SSS:[/\d{3}/,function(v){this.milliseconds=+v}],s:[s,u("seconds")],ss:[s,u("seconds")],m:[s,u("minutes")],mm:[s,u("minutes")],H:[s,u("hours")],h:[s,u("hours")],HH:[s,u("hours")],hh:[s,u("hours")],D:[s,u("day")],DD:[a,u("day")],Do:[o,function(v){var y=l.ordinal,x=v.match(/\d+/);if(this.day=x[0],y)for(var b=1;b<=31;b+=1)y(b).replace(/\[|\]/g,"")===v&&(this.day=b)}],w:[s,u("week")],ww:[a,u("week")],M:[s,u("month")],MM:[a,u("month")],MMM:[o,function(v){var y=h("months"),x=(h("monthsShort")||y.map(function(b){return b.slice(0,3)})).indexOf(v)+1;if(x<1)throw new Error;this.month=x%12||x}],MMMM:[o,function(v){var y=h("months").indexOf(v)+1;if(y<1)throw new Error;this.month=y%12||y}],Y:[/[+-]?\d+/,u("year")],YY:[a,function(v){this.year=c(v)}],YYYY:[/\d{4}/,u("year")],Z:d,ZZ:d};function m(v){var y,x;y=v,x=l&&l.formats;for(var b=(v=y.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(M,T,P){var D=P&&P.toUpperCase();return T||x[P]||i[P]||x[D].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(k,L,R){return L||R.slice(1)})})).match(r),w=b.length,S=0;S<w;S+=1){var _=b[S],E=p[_],C=E&&E[0],A=E&&E[1];b[S]=A?{regex:C,parser:A}:_.replace(/^\[|\]$/g,"")}return function(M){for(var T={},P=0,D=0;P<w;P+=1){var k=b[P];if(typeof k=="string")D+=k.length;else{var L=k.regex,R=k.parser,N=M.slice(D),I=L.exec(N)[0];R.call(T,I),M=M.replace(I,"")}}return function(B){var z=B.afternoon;if(z!==void 0){var V=B.hours;z?V<12&&(B.hours+=12):V===12&&(B.hours=0),delete B.afternoon}}(T),T}}return function(v,y,x){x.p.customParseFormat=!0,v&&v.parseTwoDigitYear&&(c=v.parseTwoDigitYear);var b=y.prototype,w=b.parse;b.parse=function(S){var _=S.date,E=S.utc,C=S.args;this.$u=E;var A=C[1];if(typeof A=="string"){var M=C[2]===!0,T=C[3]===!0,P=M||T,D=C[2];T&&(D=C[2]),l=this.$locale(),!M&&D&&(l=x.Ls[D]),this.$d=function(N,I,B,z){try{if(["x","X"].indexOf(I)>-1)return new Date((I==="X"?1e3:1)*N);var V=m(I)(N),W=V.year,G=V.month,q=V.day,ae=V.hours,J=V.minutes,$=V.seconds,te=V.milliseconds,Q=V.zone,pe=V.week,me=new Date,le=q||(W||G?1:me.getDate()),Z=W||me.getFullYear(),oe=0;W&&!G||(oe=G>0?G-1:me.getMonth());var ge,Ie=ae||0,we=J||0,xe=$||0,Se=te||0;return Q?new Date(Date.UTC(Z,oe,le,Ie,we,xe,Se+60*Q.offset*1e3)):B?new Date(Date.UTC(Z,oe,le,Ie,we,xe,Se)):(ge=new Date(Z,oe,le,Ie,we,xe,Se),pe&&(ge=z(ge).week(pe).toDate()),ge)}catch{return new Date("")}}(_,A,E,x),this.init(),D&&D!==!0&&(this.$L=this.locale(D).$L),P&&_!=this.format(A)&&(this.$d=new Date("")),l={}}else if(A instanceof Array)for(var k=A.length,L=1;L<=k;L+=1){C[1]=A[L-1];var R=x.apply(this,C);if(R.isValid()){this.$d=R.$d,this.$L=R.$L,this.init();break}L===k&&(this.$d=new Date(""))}else w.call(this,S)}}})})(IX);var f8=IX.exports;const ez=["hours","minutes","seconds"],OT="HH:mm:ss",pm="YYYY-MM-DD",OYe={date:pm,dates:pm,week:"gggg[w]ww",year:"YYYY",years:"YYYY",month:"YYYY-MM",months:"YYYY-MM",datetime:`${pm} ${OT}`,monthrange:"YYYY-MM",yearrange:"YYYY",daterange:pm,datetimerange:`${pm} ${OT}`},eE=(e,t)=>[e>0?e-1:void 0,e,e<t?e+1:void 0],ih=e=>Array.from(Array.from({length:e}).keys()),OX=e=>e.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),RX=e=>e.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),tz=function(e,t){const i=Sv(e),r=Sv(t);return i&&r?e.getTime()===t.getTime():!i&&!r?e===t:!1},iz=function(e,t){const i=ct(e),r=ct(t);return i&&r?e.length!==t.length?!1:e.every((n,a)=>tz(n,t[a])):!i&&!r?tz(e,t):!1},rz=function(e,t,i){const r=Zs(t)||t==="x"?Dt(e).locale(i):Dt(e,t).locale(i);return r.isValid()?r:void 0},nz=function(e,t,i){return Zs(t)?e:t==="x"?+e:Dt(e).locale(i).format(t)},tE=(e,t)=>{var i;const r=[],n=t==null?void 0:t();for(let a=0;a<e;a++)r.push((i=n==null?void 0:n.includes(a))!=null?i:!1);return r},kX=je({disabledHours:{type:be(Function)},disabledMinutes:{type:be(Function)},disabledSeconds:{type:be(Function)}}),LX=je({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),p8=je({id:{type:be([Array,String])},name:{type:be([Array,String])},popperClass:{type:String,default:""},format:String,valueFormat:String,dateFormat:String,timeFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:be([String,Object]),default:Ih},editable:{type:Boolean,default:!0},prefixIcon:{type:be([String,Object]),default:""},size:wn,readonly:Boolean,disabled:Boolean,placeholder:{type:String,default:""},popperOptions:{type:be(Object),default:()=>({})},modelValue:{type:be([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:be([Date,Array])},defaultTime:{type:be([Date,Array])},isRange:Boolean,...kX,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:Boolean,tabindex:{type:be([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean,placement:{type:be(String),values:Xu,default:"bottom"},fallbackPlacements:{type:be(Array),default:["bottom","top","right","left"]},...h0,...ha(["ariaLabel"]),showNow:{type:Boolean,default:!0}}),RYe=je({id:{type:be(Array)},name:{type:be(Array)},modelValue:{type:be([Array,String])},startPlaceholder:String,endPlaceholder:String}),kYe=ce({name:"PickerRangeTrigger",inheritAttrs:!1}),LYe=ce({...kYe,props:RYe,emits:["mouseenter","mouseleave","click","touchstart","focus","blur","startInput","endInput","startChange","endChange"],setup(e,{expose:t,emit:i}){const r=jS(),n=Ve("date"),a=Ve("range"),s=j(),o=j(),{wrapperRef:l,isFocused:c}=mp(s),u=w=>{i("click",w)},d=w=>{i("mouseenter",w)},h=w=>{i("mouseleave",w)},f=w=>{i("mouseenter",w)},p=w=>{i("startInput",w)},m=w=>{i("endInput",w)},v=w=>{i("startChange",w)},y=w=>{i("endChange",w)};return t({focus:()=>{var w;(w=s.value)==null||w.focus()},blur:()=>{var w,S;(w=s.value)==null||w.blur(),(S=o.value)==null||S.blur()}}),(w,S)=>(F(),K("div",{ref_key:"wrapperRef",ref:l,class:U([g(n).is("active",g(c)),w.$attrs.class]),style:mt(w.$attrs.style),onClick:u,onMouseenter:d,onMouseleave:h,onTouchstart:f},[Ee(w.$slots,"prefix"),ie("input",$t(g(r),{id:w.id&&w.id[0],ref_key:"inputRef",ref:s,name:w.name&&w.name[0],placeholder:w.startPlaceholder,value:w.modelValue&&w.modelValue[0],class:g(a).b("input"),onInput:p,onChange:v}),null,16,["id","name","placeholder","value"]),Ee(w.$slots,"range-separator"),ie("input",$t(g(r),{id:w.id&&w.id[1],ref_key:"endInputRef",ref:o,name:w.name&&w.name[1],placeholder:w.endPlaceholder,value:w.modelValue&&w.modelValue[1],class:g(a).b("input"),onInput:m,onChange:y}),null,16,["id","name","placeholder","value"]),Ee(w.$slots,"suffix")],38))}});var BYe=Ze(LYe,[["__file","picker-range-trigger.vue"]]);const NYe=ce({name:"Picker"}),FYe=ce({...NYe,props:p8,emits:["update:modelValue","change","focus","blur","clear","calendar-change","panel-change","visible-change","keydown"],setup(e,{expose:t,emit:i}){const r=e,n=rp(),{lang:a}=di(),s=Ve("date"),o=Ve("input"),l=Ve("range"),{form:c,formItem:u}=Ya(),d=rt("ElPopperOptions",{}),{valueOnClear:h}=YS(r,null),f=j(),p=j(),m=j(!1),v=j(!1),y=j(null);let x=!1;const{isFocused:b,handleFocus:w,handleBlur:S}=mp(p,{beforeFocus(){return r.readonly||B.value},afterFocus(){m.value=!0},beforeBlur(se){var He;return!x&&((He=f.value)==null?void 0:He.isFocusInsideContent(se))},afterBlur(){Le(),m.value=!1,x=!1,r.validateEvent&&(u==null||u.validate("blur").catch(se=>void 0))}}),_=O(()=>[s.b("editor"),s.bm("editor",r.type),o.e("wrapper"),s.is("disabled",B.value),s.is("active",m.value),l.b("editor"),Ie?l.bm("editor",Ie.value):"",n.class]),E=O(()=>[o.e("icon"),l.e("close-icon"),te.value?"":l.e("close-icon--hidden")]);Ne(m,se=>{se?ft(()=>{se&&(y.value=r.modelValue)}):(Se.value=null,ft(()=>{C(r.modelValue)}))});const C=(se,He)=>{(He||!iz(se,y.value))&&(i("change",se),r.validateEvent&&(u==null||u.validate("change").catch(yt=>void 0)))},A=se=>{if(!iz(r.modelValue,se)){let He;ct(se)?He=se.map(yt=>nz(yt,r.valueFormat,a.value)):se&&(He=nz(se,r.valueFormat,a.value)),i("update:modelValue",se&&He,a.value)}},M=se=>{i("keydown",se)},T=O(()=>p.value?Array.from(p.value.$el.querySelectorAll("input")):[]),P=(se,He,yt)=>{const Te=T.value;Te.length&&(!yt||yt==="min"?(Te[0].setSelectionRange(se,He),Te[0].focus()):yt==="max"&&(Te[1].setSelectionRange(se,He),Te[1].focus()))},D=(se="",He=!1)=>{m.value=He;let yt;ct(se)?yt=se.map(Te=>Te.toDate()):yt=se&&se.toDate(),Se.value=null,A(yt)},k=()=>{v.value=!0},L=()=>{i("visible-change",!0)},R=()=>{v.value=!1,m.value=!1,i("visible-change",!1)},N=()=>{m.value=!0},I=()=>{m.value=!1},B=O(()=>r.disabled||(c==null?void 0:c.disabled)),z=O(()=>{let se;if(pe.value?ze.value.getDefaultValue&&(se=ze.value.getDefaultValue()):ct(r.modelValue)?se=r.modelValue.map(He=>rz(He,r.valueFormat,a.value)):se=rz(r.modelValue,r.valueFormat,a.value),ze.value.getRangeAvailableTime){const He=ze.value.getRangeAvailableTime(se);jn(He,se)||(se=He,pe.value||A(ct(se)?se.map(yt=>yt.toDate()):se.toDate()))}return ct(se)&&se.some(He=>!He)&&(se=[]),se}),V=O(()=>{if(!ze.value.panelReady)return"";const se=ee(z.value);return ct(Se.value)?[Se.value[0]||se&&se[0]||"",Se.value[1]||se&&se[1]||""]:Se.value!==null?Se.value:!G.value&&pe.value||!m.value&&pe.value?"":se?q.value||ae.value||J.value?se.join(", "):se:""}),W=O(()=>r.type.includes("time")),G=O(()=>r.type.startsWith("time")),q=O(()=>r.type==="dates"),ae=O(()=>r.type==="months"),J=O(()=>r.type==="years"),$=O(()=>r.prefixIcon||(W.value?wK:RHe)),te=j(!1),Q=se=>{r.readonly||B.value||(te.value&&(se.stopPropagation(),ze.value.handleClear?ze.value.handleClear():A(h.value),C(h.value,!0),te.value=!1,R()),i("clear"))},pe=O(()=>{const{modelValue:se}=r;return!se||ct(se)&&!se.filter(Boolean).length}),me=async se=>{var He;r.readonly||B.value||(((He=se.target)==null?void 0:He.tagName)!=="INPUT"||b.value)&&(m.value=!0)},le=()=>{r.readonly||B.value||!pe.value&&r.clearable&&(te.value=!0)},Z=()=>{te.value=!1},oe=se=>{var He;r.readonly||B.value||(((He=se.touches[0].target)==null?void 0:He.tagName)!=="INPUT"||b.value)&&(m.value=!0)},ge=O(()=>r.type.includes("range")),Ie=on(),we=O(()=>{var se,He;return(He=(se=g(f))==null?void 0:se.popperRef)==null?void 0:He.contentRef}),xe=LD(p,se=>{const He=g(we),yt=ds(p);He&&(se.target===He||se.composedPath().includes(He))||se.target===yt||yt&&se.composedPath().includes(yt)||(m.value=!1)});Bi(()=>{xe==null||xe()});const Se=j(null),Le=()=>{if(Se.value){const se=Be(V.value);se&&X(se)&&(A(ct(se)?se.map(He=>He.toDate()):se.toDate()),Se.value=null)}Se.value===""&&(A(h.value),C(h.value),Se.value=null)},Be=se=>se?ze.value.parseUserInput(se):null,ee=se=>se?ze.value.formatToString(se):null,X=se=>ze.value.isValidValue(se),ue=async se=>{if(r.readonly||B.value)return;const{code:He}=se;if(M(se),He===at.esc){m.value===!0&&(m.value=!1,se.preventDefault(),se.stopPropagation());return}if(He===at.down&&(ze.value.handleFocusPicker&&(se.preventDefault(),se.stopPropagation()),m.value===!1&&(m.value=!0,await ft()),ze.value.handleFocusPicker)){ze.value.handleFocusPicker();return}if(He===at.tab){x=!0;return}if(He===at.enter||He===at.numpadEnter){(Se.value===null||Se.value===""||X(Be(V.value)))&&(Le(),m.value=!1),se.stopPropagation();return}if(Se.value){se.stopPropagation();return}ze.value.handleKeydownInput&&ze.value.handleKeydownInput(se)},Oe=se=>{Se.value=se,m.value||(m.value=!0)},Y=se=>{const He=se.target;Se.value?Se.value=[He.value,Se.value[1]]:Se.value=[He.value,null]},qe=se=>{const He=se.target;Se.value?Se.value=[Se.value[0],He.value]:Se.value=[null,He.value]},et=()=>{var se;const He=Se.value,yt=Be(He&&He[0]),Te=g(z);if(yt&&yt.isValid()){Se.value=[ee(yt),((se=V.value)==null?void 0:se[1])||null];const $e=[yt,Te&&(Te[1]||null)];X($e)&&(A($e),Se.value=null)}},tt=()=>{var se;const He=g(Se),yt=Be(He&&He[1]),Te=g(z);if(yt&&yt.isValid()){Se.value=[((se=g(V))==null?void 0:se[0])||null,ee(yt)];const $e=[Te&&Te[0],yt];X($e)&&(A($e),Se.value=null)}},ze=j({}),vt=se=>{ze.value[se[0]]=se[1],ze.value.panelReady=!0},_e=se=>{i("calendar-change",se)},Fe=(se,He,yt)=>{i("panel-change",se,He,yt)},he=()=>{var se;(se=p.value)==null||se.focus()},ke=()=>{var se;(se=p.value)==null||se.blur()};return Yt("EP_PICKER_BASE",{props:r}),t({focus:he,blur:ke,handleOpen:N,handleClose:I,onPick:D}),(se,He)=>(F(),De(g(Ta),$t({ref_key:"refPopper",ref:f,visible:m.value,effect:"light",pure:"",trigger:"click"},se.$attrs,{role:"dialog",teleported:"",transition:`${g(s).namespace.value}-zoom-in-top`,"popper-class":[`${g(s).namespace.value}-picker__popper`,se.popperClass],"popper-options":g(d),"fallback-placements":se.fallbackPlacements,"gpu-acceleration":!1,placement:se.placement,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:k,onShow:L,onHide:R}),{default:ve(()=>[g(ge)?(F(),De(BYe,{key:1,id:se.id,ref_key:"inputRef",ref:p,"model-value":g(V),name:se.name,disabled:g(B),readonly:!se.editable||se.readonly,"start-placeholder":se.startPlaceholder,"end-placeholder":se.endPlaceholder,class:U(g(_)),style:mt(se.$attrs.style),"aria-label":se.ariaLabel,tabindex:se.tabindex,autocomplete:"off",role:"combobox",onClick:me,onFocus:g(w),onBlur:g(S),onStartInput:Y,onStartChange:et,onEndInput:qe,onEndChange:tt,onMousedown:me,onMouseenter:le,onMouseleave:Z,onTouchstartPassive:oe,onKeydown:ue},{prefix:ve(()=>[g($)?(F(),De(g(ut),{key:0,class:U([g(o).e("icon"),g(l).e("icon")])},{default:ve(()=>[(F(),De(jt(g($))))]),_:1},8,["class"])):Ae("v-if",!0)]),"range-separator":ve(()=>[Ee(se.$slots,"range-separator",{},()=>[ie("span",{class:U(g(l).b("separator"))},Ye(se.rangeSeparator),3)])]),suffix:ve(()=>[se.clearIcon?(F(),De(g(ut),{key:0,class:U(g(E)),onMousedown:xt(g(Sr),["prevent"]),onClick:Q},{default:ve(()=>[(F(),De(jt(se.clearIcon)))]),_:1},8,["class","onMousedown"])):Ae("v-if",!0)]),_:3},8,["id","model-value","name","disabled","readonly","start-placeholder","end-placeholder","class","style","aria-label","tabindex","onFocus","onBlur"])):(F(),De(g(Ha),{key:0,id:se.id,ref_key:"inputRef",ref:p,"container-role":"combobox","model-value":g(V),name:se.name,size:g(Ie),disabled:g(B),placeholder:se.placeholder,class:U([g(s).b("editor"),g(s).bm("editor",se.type),se.$attrs.class]),style:mt(se.$attrs.style),readonly:!se.editable||se.readonly||g(q)||g(ae)||g(J)||se.type==="week","aria-label":se.ariaLabel,tabindex:se.tabindex,"validate-event":!1,onInput:Oe,onFocus:g(w),onBlur:g(S),onKeydown:ue,onChange:Le,onMousedown:me,onMouseenter:le,onMouseleave:Z,onTouchstartPassive:oe,onClick:xt(()=>{},["stop"])},{prefix:ve(()=>[g($)?(F(),De(g(ut),{key:0,class:U(g(o).e("icon")),onMousedown:xt(me,["prevent"]),onTouchstartPassive:oe},{default:ve(()=>[(F(),De(jt(g($))))]),_:1},8,["class","onMousedown"])):Ae("v-if",!0)]),suffix:ve(()=>[te.value&&se.clearIcon?(F(),De(g(ut),{key:0,class:U(`${g(o).e("icon")} clear-icon`),onMousedown:xt(g(Sr),["prevent"]),onClick:Q},{default:ve(()=>[(F(),De(jt(se.clearIcon)))]),_:1},8,["class","onMousedown"])):Ae("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","aria-label","tabindex","onFocus","onBlur","onClick"]))]),content:ve(()=>[Ee(se.$slots,"default",{visible:m.value,actualVisible:v.value,parsedValue:g(z),format:se.format,dateFormat:se.dateFormat,timeFormat:se.timeFormat,unlinkPanels:se.unlinkPanels,type:se.type,defaultValue:se.defaultValue,showNow:se.showNow,onPick:D,onSelectRange:P,onSetPickerOption:vt,onCalendarChange:_e,onPanelChange:Fe,onMousedown:xt(()=>{},["stop"])})]),_:3},16,["visible","transition","popper-class","popper-options","fallback-placements","placement"]))}});var BX=Ze(FYe,[["__file","picker.vue"]]);const zYe=je({...LX,datetimeRole:String,parsedValue:{type:be(Object)}}),NX=({getAvailableHours:e,getAvailableMinutes:t,getAvailableSeconds:i})=>{const r=(s,o,l,c)=>{const u={hour:e,minute:t,second:i};let d=s;return["hour","minute","second"].forEach(h=>{if(u[h]){let f;const p=u[h];switch(h){case"minute":{f=p(d.hour(),o,c);break}case"second":{f=p(d.hour(),d.minute(),o,c);break}default:{f=p(o,c);break}}if(f!=null&&f.length&&!f.includes(d[h]())){const m=l?0:f.length-1;d=d[h](f[m])}}}),d},n={};return{timePickerOptions:n,getAvailableTime:r,onSetOption:([s,o])=>{n[s]=o}}},iE=e=>{const t=(r,n)=>r||n,i=r=>r!==!0;return e.map(t).filter(i)},FX=(e,t,i)=>({getHoursList:(s,o)=>tE(24,e&&(()=>e==null?void 0:e(s,o))),getMinutesList:(s,o,l)=>tE(60,t&&(()=>t==null?void 0:t(s,o,l))),getSecondsList:(s,o,l,c)=>tE(60,i&&(()=>i==null?void 0:i(s,o,l,c)))}),zX=(e,t,i)=>{const{getHoursList:r,getMinutesList:n,getSecondsList:a}=FX(e,t,i);return{getAvailableHours:(c,u)=>iE(r(c,u)),getAvailableMinutes:(c,u,d)=>iE(n(c,u,d)),getAvailableSeconds:(c,u,d,h)=>iE(a(c,u,d,h))}},VX=e=>{const t=j(e.parsedValue);return Ne(()=>e.visible,i=>{i||(t.value=e.parsedValue)}),t},bd=new Map;if(si){let e;document.addEventListener("mousedown",t=>e=t),document.addEventListener("mouseup",t=>{if(e){for(const i of bd.values())for(const{documentHandler:r}of i)r(t,e);e=void 0}})}function az(e,t){let i=[];return ct(t.arg)?i=t.arg:Xs(t.arg)&&i.push(t.arg),function(r,n){const a=t.instance.popperRef,s=r.target,o=n==null?void 0:n.target,l=!t||!t.instance,c=!s||!o,u=e.contains(s)||e.contains(o),d=e===s,h=i.length&&i.some(p=>p==null?void 0:p.contains(s))||i.length&&i.includes(o),f=a&&(a.contains(s)||a.contains(o));l||c||u||d||h||f||t.value(r,n)}}const Nu={beforeMount(e,t){bd.has(e)||bd.set(e,[]),bd.get(e).push({documentHandler:az(e,t),bindingFn:t.value})},updated(e,t){bd.has(e)||bd.set(e,[]);const i=bd.get(e),r=i.findIndex(a=>a.bindingFn===t.oldValue),n={documentHandler:az(e,t),bindingFn:t.value};r>=0?i.splice(r,1,n):i.push(n)},unmounted(e){bd.delete(e)}},VYe=100,UYe=600,u_={beforeMount(e,t){const i=t.value,{interval:r=VYe,delay:n=UYe}=Wt(i)?{}:i;let a,s;const o=()=>Wt(i)?i():i.handler(),l=()=>{s&&(clearTimeout(s),s=void 0),a&&(clearInterval(a),a=void 0)};e.addEventListener("mousedown",c=>{c.button===0&&(l(),o(),document.addEventListener("mouseup",()=>l(),{once:!0}),s=setTimeout(()=>{a=setInterval(()=>{o()},r)},n))})}},RT="_trap-focus-children",Cf=[],sz=e=>{if(Cf.length===0)return;const t=Cf[Cf.length-1][RT];if(t.length>0&&e.code===at.tab){if(t.length===1){e.preventDefault(),document.activeElement!==t[0]&&t[0].focus();return}const i=e.shiftKey,r=e.target===t[0],n=e.target===t[t.length-1];r&&i&&(e.preventDefault(),t[t.length-1].focus()),n&&!i&&(e.preventDefault(),t[0].focus())}},HYe={beforeMount(e){e[RT]=V9(e),Cf.push(e),Cf.length<=1&&document.addEventListener("keydown",sz)},updated(e){ft(()=>{e[RT]=V9(e)})},unmounted(){Cf.shift(),Cf.length===0&&document.removeEventListener("keydown",sz)}};var oz=!1,cf,kT,LT,g2,y2,UX,b2,BT,NT,FT,HX,zT,VT,jX,WX;function Ss(){if(!oz){oz=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),i=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(zT=/\b(iPhone|iP[ao]d)/.exec(e),VT=/\b(iP[ao]d)/.exec(e),FT=/Android/i.exec(e),jX=/FBAN\/\w+;/i.exec(e),WX=/Mobile/i.exec(e),HX=!!/Win64/.exec(e),t){cf=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,cf&&document&&document.documentMode&&(cf=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(e);UX=r?parseFloat(r[1])+4:cf,kT=t[2]?parseFloat(t[2]):NaN,LT=t[3]?parseFloat(t[3]):NaN,g2=t[4]?parseFloat(t[4]):NaN,g2?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),y2=t&&t[1]?parseFloat(t[1]):NaN):y2=NaN}else cf=kT=LT=y2=g2=NaN;if(i){if(i[1]){var n=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);b2=n?parseFloat(n[1].replace("_",".")):!0}else b2=!1;BT=!!i[2],NT=!!i[3]}else b2=BT=NT=!1}}var UT={ie:function(){return Ss()||cf},ieCompatibilityMode:function(){return Ss()||UX>cf},ie64:function(){return UT.ie()&&HX},firefox:function(){return Ss()||kT},opera:function(){return Ss()||LT},webkit:function(){return Ss()||g2},safari:function(){return UT.webkit()},chrome:function(){return Ss()||y2},windows:function(){return Ss()||BT},osx:function(){return Ss()||b2},linux:function(){return Ss()||NT},iphone:function(){return Ss()||zT},mobile:function(){return Ss()||zT||VT||FT||WX},nativeApp:function(){return Ss()||jX},android:function(){return Ss()||FT},ipad:function(){return Ss()||VT}},jYe=UT,kw=!!(typeof window<"u"&&window.document&&window.document.createElement),WYe={canUseDOM:kw,canUseWorkers:typeof Worker<"u",canUseEventListeners:kw&&!!(window.addEventListener||window.attachEvent),canUseViewport:kw&&!!window.screen,isInWorker:!kw},GX=WYe,$X;GX.canUseDOM&&($X=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function GYe(e,t){if(!GX.canUseDOM||t&&!("addEventListener"in document))return!1;var i="on"+e,r=i in document;if(!r){var n=document.createElement("div");n.setAttribute(i,"return;"),r=typeof n[i]=="function"}return!r&&$X&&e==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var $Ye=GYe,lz=10,cz=40,uz=800;function ZX(e){var t=0,i=0,r=0,n=0;return"detail"in e&&(i=e.detail),"wheelDelta"in e&&(i=-e.wheelDelta/120),"wheelDeltaY"in e&&(i=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=i,i=0),r=t*lz,n=i*lz,"deltaY"in e&&(n=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||n)&&e.deltaMode&&(e.deltaMode==1?(r*=cz,n*=cz):(r*=uz,n*=uz)),r&&!t&&(t=r<1?-1:1),n&&!i&&(i=n<1?-1:1),{spinX:t,spinY:i,pixelX:r,pixelY:n}}ZX.getEventType=function(){return jYe.firefox()?"DOMMouseScroll":$Ye("wheel")?"wheel":"mousewheel"};var ZYe=ZX;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const qYe=function(e,t){if(e&&e.addEventListener){const i=function(r){const n=ZYe(r);t&&Reflect.apply(t,this,[r,n])};e.addEventListener("wheel",i,{passive:!0})}},YYe={beforeMount(e,t){qYe(e,t.value)}},KYe=je({role:{type:String,required:!0},spinnerDate:{type:be(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:be(String),default:""},...kX}),XYe=ce({__name:"basic-time-spinner",props:KYe,emits:["change","select-range","set-option"],setup(e,{emit:t}){const i=e,r=rt("EP_PICKER_BASE"),{isRange:n}=r.props,a=Ve("time"),{getHoursList:s,getMinutesList:o,getSecondsList:l}=FX(i.disabledHours,i.disabledMinutes,i.disabledSeconds);let c=!1;const u=j(),d=j(),h=j(),f=j(),p={hours:d,minutes:h,seconds:f},m=O(()=>i.showSeconds?ez:ez.slice(0,2)),v=O(()=>{const{spinnerDate:V}=i,W=V.hour(),G=V.minute(),q=V.second();return{hours:W,minutes:G,seconds:q}}),y=O(()=>{const{hours:V,minutes:W}=g(v),{role:G,spinnerDate:q}=i,ae=n?void 0:q;return{hours:s(G,ae),minutes:o(V,G,ae),seconds:l(V,W,G,ae)}}),x=O(()=>{const{hours:V,minutes:W,seconds:G}=g(v);return{hours:eE(V,23),minutes:eE(W,59),seconds:eE(G,59)}}),b=gs(V=>{c=!1,_(V)},200),w=V=>{if(!!!i.amPmMode)return"";const G=i.amPmMode==="A";let q=V<12?" am":" pm";return G&&(q=q.toUpperCase()),q},S=V=>{let W;switch(V){case"hours":W=[0,2];break;case"minutes":W=[3,5];break;case"seconds":W=[6,8];break}const[G,q]=W;t("select-range",G,q),u.value=V},_=V=>{A(V,g(v)[V])},E=()=>{_("hours"),_("minutes"),_("seconds")},C=V=>V.querySelector(`.${a.namespace.value}-scrollbar__wrap`),A=(V,W)=>{if(i.arrowControl)return;const G=g(p[V]);G&&G.$el&&(C(G.$el).scrollTop=Math.max(0,W*M(V)))},M=V=>{const W=g(p[V]),G=W==null?void 0:W.$el.querySelector("li");return G&&Number.parseFloat(Rd(G,"height"))||0},T=()=>{D(1)},P=()=>{D(-1)},D=V=>{u.value||S("hours");const W=u.value,G=g(v)[W],q=u.value==="hours"?24:60,ae=k(W,G,V,q);L(W,ae),A(W,ae),ft(()=>S(W))},k=(V,W,G,q)=>{let ae=(W+G+q)%q;const J=g(y)[V];for(;J[ae]&&ae!==W;)ae=(ae+G+q)%q;return ae},L=(V,W)=>{if(g(y)[V][W])return;const{hours:ae,minutes:J,seconds:$}=g(v);let te;switch(V){case"hours":te=i.spinnerDate.hour(W).minute(J).second($);break;case"minutes":te=i.spinnerDate.hour(ae).minute(W).second($);break;case"seconds":te=i.spinnerDate.hour(ae).minute(J).second(W);break}t("change",te)},R=(V,{value:W,disabled:G})=>{G||(L(V,W),S(V),A(V,W))},N=V=>{const W=g(p[V]);if(!W)return;c=!0,b(V);const G=Math.min(Math.round((C(W.$el).scrollTop-(I(V)*.5-10)/M(V)+3)/M(V)),V==="hours"?23:59);L(V,G)},I=V=>g(p[V]).$el.offsetHeight,B=()=>{const V=W=>{const G=g(p[W]);G&&G.$el&&(C(G.$el).onscroll=()=>{N(W)})};V("hours"),V("minutes"),V("seconds")};Lt(()=>{ft(()=>{!i.arrowControl&&B(),E(),i.role==="start"&&S("hours")})});const z=(V,W)=>{p[W].value=V??void 0};return t("set-option",[`${i.role}_scrollDown`,D]),t("set-option",[`${i.role}_emitSelectRange`,S]),Ne(()=>i.spinnerDate,()=>{c||E()}),(V,W)=>(F(),K("div",{class:U([g(a).b("spinner"),{"has-seconds":V.showSeconds}])},[V.arrowControl?Ae("v-if",!0):(F(!0),K(ht,{key:0},Qt(g(m),G=>(F(),De(g(Bc),{key:G,ref_for:!0,ref:q=>z(q,G),class:U(g(a).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":g(a).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:q=>S(G),onMousemove:q=>_(G)},{default:ve(()=>[(F(!0),K(ht,null,Qt(g(y)[G],(q,ae)=>(F(),K("li",{key:ae,class:U([g(a).be("spinner","item"),g(a).is("active",ae===g(v)[G]),g(a).is("disabled",q)]),onClick:J=>R(G,{value:ae,disabled:q})},[G==="hours"?(F(),K(ht,{key:0},[Xt(Ye(("0"+(V.amPmMode?ae%12||12:ae)).slice(-2))+Ye(w(ae)),1)],64)):(F(),K(ht,{key:1},[Xt(Ye(("0"+ae).slice(-2)),1)],64))],10,["onClick"]))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),V.arrowControl?(F(!0),K(ht,{key:1},Qt(g(m),G=>(F(),K("div",{key:G,class:U([g(a).be("spinner","wrapper"),g(a).is("arrow")]),onMouseenter:q=>S(G)},[Nt((F(),De(g(ut),{class:U(["arrow-up",g(a).be("spinner","arrow")])},{default:ve(()=>[ne(g(FI))]),_:1},8,["class"])),[[g(u_),P]]),Nt((F(),De(g(ut),{class:U(["arrow-down",g(a).be("spinner","arrow")])},{default:ve(()=>[ne(g(Ku))]),_:1},8,["class"])),[[g(u_),T]]),ie("ul",{class:U(g(a).be("spinner","list"))},[(F(!0),K(ht,null,Qt(g(x)[G],(q,ae)=>(F(),K("li",{key:ae,class:U([g(a).be("spinner","item"),g(a).is("active",q===g(v)[G]),g(a).is("disabled",g(y)[G][q])])},[g(gt)(q)?(F(),K(ht,{key:0},[G==="hours"?(F(),K(ht,{key:0},[Xt(Ye(("0"+(V.amPmMode?q%12||12:q)).slice(-2))+Ye(w(q)),1)],64)):(F(),K(ht,{key:1},[Xt(Ye(("0"+q).slice(-2)),1)],64))],64)):Ae("v-if",!0)],2))),128))],2)],42,["onMouseenter"]))),128)):Ae("v-if",!0)],2))}});var HT=Ze(XYe,[["__file","basic-time-spinner.vue"]]);const QYe=ce({__name:"panel-time-pick",props:zYe,emits:["pick","select-range","set-picker-option"],setup(e,{emit:t}){const i=e,r=rt("EP_PICKER_BASE"),{arrowControl:n,disabledHours:a,disabledMinutes:s,disabledSeconds:o,defaultValue:l}=r.props,{getAvailableHours:c,getAvailableMinutes:u,getAvailableSeconds:d}=zX(a,s,o),h=Ve("time"),{t:f,lang:p}=di(),m=j([0,2]),v=VX(i),y=O(()=>Qi(i.actualVisible)?`${h.namespace.value}-zoom-in-top`:""),x=O(()=>i.format.includes("ss")),b=O(()=>i.format.includes("A")?"A":i.format.includes("a")?"a":""),w=I=>{const B=Dt(I).locale(p.value),z=k(B);return B.isSame(z)},S=()=>{t("pick",v.value,!1)},_=(I=!1,B=!1)=>{B||t("pick",i.parsedValue,I)},E=I=>{if(!i.visible)return;const B=k(I).millisecond(0);t("pick",B,!0)},C=(I,B)=>{t("select-range",I,B),m.value=[I,B]},A=I=>{const B=[0,3].concat(x.value?[6]:[]),z=["hours","minutes"].concat(x.value?["seconds"]:[]),W=(B.indexOf(m.value[0])+I+B.length)%B.length;T.start_emitSelectRange(z[W])},M=I=>{const B=I.code,{left:z,right:V,up:W,down:G}=at;if([z,V].includes(B)){A(B===z?-1:1),I.preventDefault();return}if([W,G].includes(B)){const q=B===W?-1:1;T.start_scrollDown(q),I.preventDefault();return}},{timePickerOptions:T,onSetOption:P,getAvailableTime:D}=NX({getAvailableHours:c,getAvailableMinutes:u,getAvailableSeconds:d}),k=I=>D(I,i.datetimeRole||"",!0),L=I=>I?Dt(I,i.format).locale(p.value):null,R=I=>I?I.format(i.format):null,N=()=>Dt(l).locale(p.value);return t("set-picker-option",["isValidValue",w]),t("set-picker-option",["formatToString",R]),t("set-picker-option",["parseUserInput",L]),t("set-picker-option",["handleKeydownInput",M]),t("set-picker-option",["getRangeAvailableTime",k]),t("set-picker-option",["getDefaultValue",N]),(I,B)=>(F(),De(Pn,{name:g(y)},{default:ve(()=>[I.actualVisible||I.visible?(F(),K("div",{key:0,class:U(g(h).b("panel"))},[ie("div",{class:U([g(h).be("panel","content"),{"has-seconds":g(x)}])},[ne(HT,{ref:"spinner",role:I.datetimeRole||"start","arrow-control":g(n),"show-seconds":g(x),"am-pm-mode":g(b),"spinner-date":I.parsedValue,"disabled-hours":g(a),"disabled-minutes":g(s),"disabled-seconds":g(o),onChange:E,onSetOption:g(P),onSelectRange:C},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),ie("div",{class:U(g(h).be("panel","footer"))},[ie("button",{type:"button",class:U([g(h).be("panel","btn"),"cancel"]),onClick:S},Ye(g(f)("el.datepicker.cancel")),3),ie("button",{type:"button",class:U([g(h).be("panel","btn"),"confirm"]),onClick:z=>_()},Ye(g(f)("el.datepicker.confirm")),11,["onClick"])],2)],2)):Ae("v-if",!0)]),_:1},8,["name"]))}});var d_=Ze(QYe,[["__file","panel-time-pick.vue"]]);const JYe=je({...LX,parsedValue:{type:be(Array)}}),eKe=ce({__name:"panel-time-range",props:JYe,emits:["pick","select-range","set-picker-option"],setup(e,{emit:t}){const i=e,r=(me,le)=>{const Z=[];for(let oe=me;oe<=le;oe++)Z.push(oe);return Z},{t:n,lang:a}=di(),s=Ve("time"),o=Ve("picker"),l=rt("EP_PICKER_BASE"),{arrowControl:c,disabledHours:u,disabledMinutes:d,disabledSeconds:h,defaultValue:f}=l.props,p=O(()=>[s.be("range-picker","body"),s.be("panel","content"),s.is("arrow",c),w.value?"has-seconds":""]),m=O(()=>[s.be("range-picker","body"),s.be("panel","content"),s.is("arrow",c),w.value?"has-seconds":""]),v=O(()=>i.parsedValue[0]),y=O(()=>i.parsedValue[1]),x=VX(i),b=()=>{t("pick",x.value,!1)},w=O(()=>i.format.includes("ss")),S=O(()=>i.format.includes("A")?"A":i.format.includes("a")?"a":""),_=(me=!1)=>{t("pick",[v.value,y.value],me)},E=me=>{M(me.millisecond(0),y.value)},C=me=>{M(v.value,me.millisecond(0))},A=me=>{const le=me.map(oe=>Dt(oe).locale(a.value)),Z=V(le);return le[0].isSame(Z[0])&&le[1].isSame(Z[1])},M=(me,le)=>{t("pick",[me,le],!0)},T=O(()=>v.value>y.value),P=j([0,2]),D=(me,le)=>{t("select-range",me,le,"min"),P.value=[me,le]},k=O(()=>w.value?11:8),L=(me,le)=>{t("select-range",me,le,"max");const Z=g(k);P.value=[me+Z,le+Z]},R=me=>{const le=w.value?[0,3,6,11,14,17]:[0,3,8,11],Z=["hours","minutes"].concat(w.value?["seconds"]:[]),ge=(le.indexOf(P.value[0])+me+le.length)%le.length,Ie=le.length/2;ge<Ie?ae.start_emitSelectRange(Z[ge]):ae.end_emitSelectRange(Z[ge-Ie])},N=me=>{const le=me.code,{left:Z,right:oe,up:ge,down:Ie}=at;if([Z,oe].includes(le)){R(le===Z?-1:1),me.preventDefault();return}if([ge,Ie].includes(le)){const we=le===ge?-1:1,xe=P.value[0]<k.value?"start":"end";ae[`${xe}_scrollDown`](we),me.preventDefault();return}},I=(me,le)=>{const Z=u?u(me):[],oe=me==="start",Ie=(le||(oe?y.value:v.value)).hour(),we=oe?r(Ie+1,23):r(0,Ie-1);return f2(Z,we)},B=(me,le,Z)=>{const oe=d?d(me,le):[],ge=le==="start",Ie=Z||(ge?y.value:v.value),we=Ie.hour();if(me!==we)return oe;const xe=Ie.minute(),Se=ge?r(xe+1,59):r(0,xe-1);return f2(oe,Se)},z=(me,le,Z,oe)=>{const ge=h?h(me,le,Z):[],Ie=Z==="start",we=oe||(Ie?y.value:v.value),xe=we.hour(),Se=we.minute();if(me!==xe||le!==Se)return ge;const Le=we.second(),Be=Ie?r(Le+1,59):r(0,Le-1);return f2(ge,Be)},V=([me,le])=>[J(me,"start",!0,le),J(le,"end",!1,me)],{getAvailableHours:W,getAvailableMinutes:G,getAvailableSeconds:q}=zX(I,B,z),{timePickerOptions:ae,getAvailableTime:J,onSetOption:$}=NX({getAvailableHours:W,getAvailableMinutes:G,getAvailableSeconds:q}),te=me=>me?ct(me)?me.map(le=>Dt(le,i.format).locale(a.value)):Dt(me,i.format).locale(a.value):null,Q=me=>me?ct(me)?me.map(le=>le.format(i.format)):me.format(i.format):null,pe=()=>{if(ct(f))return f.map(le=>Dt(le).locale(a.value));const me=Dt(f).locale(a.value);return[me,me.add(60,"m")]};return t("set-picker-option",["formatToString",Q]),t("set-picker-option",["parseUserInput",te]),t("set-picker-option",["isValidValue",A]),t("set-picker-option",["handleKeydownInput",N]),t("set-picker-option",["getDefaultValue",pe]),t("set-picker-option",["getRangeAvailableTime",V]),(me,le)=>me.actualVisible?(F(),K("div",{key:0,class:U([g(s).b("range-picker"),g(o).b("panel")])},[ie("div",{class:U(g(s).be("range-picker","content"))},[ie("div",{class:U(g(s).be("range-picker","cell"))},[ie("div",{class:U(g(s).be("range-picker","header"))},Ye(g(n)("el.datepicker.startTime")),3),ie("div",{class:U(g(p))},[ne(HT,{ref:"minSpinner",role:"start","show-seconds":g(w),"am-pm-mode":g(S),"arrow-control":g(c),"spinner-date":g(v),"disabled-hours":I,"disabled-minutes":B,"disabled-seconds":z,onChange:E,onSetOption:g($),onSelectRange:D},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),ie("div",{class:U(g(s).be("range-picker","cell"))},[ie("div",{class:U(g(s).be("range-picker","header"))},Ye(g(n)("el.datepicker.endTime")),3),ie("div",{class:U(g(m))},[ne(HT,{ref:"maxSpinner",role:"end","show-seconds":g(w),"am-pm-mode":g(S),"arrow-control":g(c),"spinner-date":g(y),"disabled-hours":I,"disabled-minutes":B,"disabled-seconds":z,onChange:C,onSetOption:g($),onSelectRange:L},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),ie("div",{class:U(g(s).be("panel","footer"))},[ie("button",{type:"button",class:U([g(s).be("panel","btn"),"cancel"]),onClick:Z=>b()},Ye(g(n)("el.datepicker.cancel")),11,["onClick"]),ie("button",{type:"button",class:U([g(s).be("panel","btn"),"confirm"]),disabled:g(T),onClick:Z=>_()},Ye(g(n)("el.datepicker.confirm")),11,["disabled","onClick"])],2)],2)):Ae("v-if",!0)}});var tKe=Ze(eKe,[["__file","panel-time-range.vue"]]);Dt.extend(f8);var iKe=ce({name:"ElTimePicker",install:null,props:{...p8,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,t){const i=j(),[r,n]=e.isRange?["timerange",tKe]:["time",d_],a=s=>t.emit("update:modelValue",s);return Yt("ElPopperOptions",e.popperOptions),t.expose({focus:()=>{var s;(s=i.value)==null||s.focus()},blur:()=>{var s;(s=i.value)==null||s.blur()},handleOpen:()=>{var s;(s=i.value)==null||s.handleOpen()},handleClose:()=>{var s;(s=i.value)==null||s.handleClose()}}),()=>{var s;const o=(s=e.format)!=null?s:OT;return ne(BX,$t(e,{ref:i,type:r,format:o,"onUpdate:modelValue":a}),{default:l=>ne(n,l,null)})}}});const rKe=Rt(iKe),nKe=(e,t)=>{const i=e.subtract(1,"month").endOf("month").date();return ih(t).map((r,n)=>i-(t-n-1))},aKe=e=>{const t=e.daysInMonth();return ih(t).map((i,r)=>r+1)},sKe=e=>ih(e.length/7).map(t=>{const i=t*7;return e.slice(i,i+7)}),oKe=je({selectedDay:{type:be(Object)},range:{type:be(Array)},date:{type:be(Object),required:!0},hideHeader:{type:Boolean}}),lKe={pick:e=>Ri(e)};var qX={exports:{}};(function(e,t){(function(i,r){e.exports=r()})(Ju,function(){return function(i,r,n){var a=r.prototype,s=function(d){return d&&(d.indexOf?d:d.s)},o=function(d,h,f,p,m){var v=d.name?d:d.$locale(),y=s(v[h]),x=s(v[f]),b=y||x.map(function(S){return S.slice(0,p)});if(!m)return b;var w=v.weekStart;return b.map(function(S,_){return b[(_+(w||0))%7]})},l=function(){return n.Ls[n.locale()]},c=function(d,h){return d.formats[h]||function(f){return f.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(p,m,v){return m||v.slice(1)})}(d.formats[h.toUpperCase()])},u=function(){var d=this;return{months:function(h){return h?h.format("MMMM"):o(d,"months")},monthsShort:function(h){return h?h.format("MMM"):o(d,"monthsShort","months",3)},firstDayOfWeek:function(){return d.$locale().weekStart||0},weekdays:function(h){return h?h.format("dddd"):o(d,"weekdays")},weekdaysMin:function(h){return h?h.format("dd"):o(d,"weekdaysMin","weekdays",2)},weekdaysShort:function(h){return h?h.format("ddd"):o(d,"weekdaysShort","weekdays",3)},longDateFormat:function(h){return c(d.$locale(),h)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};a.localeData=function(){return u.bind(this)()},n.localeData=function(){var d=l();return{firstDayOfWeek:function(){return d.weekStart||0},weekdays:function(){return n.weekdays()},weekdaysShort:function(){return n.weekdaysShort()},weekdaysMin:function(){return n.weekdaysMin()},months:function(){return n.months()},monthsShort:function(){return n.monthsShort()},longDateFormat:function(h){return c(d,h)},meridiem:d.meridiem,ordinal:d.ordinal}},n.months=function(){return o(l(),"months")},n.monthsShort=function(){return o(l(),"monthsShort","months",3)},n.weekdays=function(d){return o(l(),"weekdays",null,null,d)},n.weekdaysShort=function(d){return o(l(),"weekdaysShort","weekdays",3,d)},n.weekdaysMin=function(d){return o(l(),"weekdaysMin","weekdays",2,d)}}})})(qX);var YX=qX.exports;const cKe=(e,t)=>{Dt.extend(YX);const i=Dt.localeData().firstDayOfWeek(),{t:r,lang:n}=di(),a=Dt().locale(n.value),s=O(()=>!!e.range&&!!e.range.length),o=O(()=>{let h=[];if(s.value){const[f,p]=e.range,m=ih(p.date()-f.date()+1).map(x=>({text:f.date()+x,type:"current"}));let v=m.length%7;v=v===0?0:7-v;const y=ih(v).map((x,b)=>({text:b+1,type:"next"}));h=m.concat(y)}else{const f=e.date.startOf("month").day(),p=nKe(e.date,(f-i+7)%7).map(x=>({text:x,type:"prev"})),m=aKe(e.date).map(x=>({text:x,type:"current"}));h=[...p,...m];const v=7-(h.length%7||7),y=ih(v).map((x,b)=>({text:b+1,type:"next"}));h=h.concat(y)}return sKe(h)}),l=O(()=>{const h=i;return h===0?$4.map(f=>r(`el.datepicker.weeks.${f}`)):$4.slice(h).concat($4.slice(0,h)).map(f=>r(`el.datepicker.weeks.${f}`))}),c=(h,f)=>{switch(f){case"prev":return e.date.startOf("month").subtract(1,"month").date(h);case"next":return e.date.startOf("month").add(1,"month").date(h);case"current":return e.date.date(h)}};return{now:a,isInRange:s,rows:o,weekDays:l,getFormattedDate:c,handlePickDay:({text:h,type:f})=>{const p=c(h,f);t("pick",p)},getSlotData:({text:h,type:f})=>{const p=c(h,f);return{isSelected:p.isSame(e.selectedDay),type:`${f}-month`,day:p.format("YYYY-MM-DD"),date:p.toDate()}}}},uKe=ce({name:"DateTable"}),dKe=ce({...uKe,props:oKe,emits:lKe,setup(e,{expose:t,emit:i}){const r=e,{isInRange:n,now:a,rows:s,weekDays:o,getFormattedDate:l,handlePickDay:c,getSlotData:u}=cKe(r,i),d=Ve("calendar-table"),h=Ve("calendar-day"),f=({text:p,type:m})=>{const v=[m];if(m==="current"){const y=l(p,m);y.isSame(r.selectedDay,"day")&&v.push(h.is("selected")),y.isSame(a,"day")&&v.push(h.is("today"))}return v};return t({getFormattedDate:l}),(p,m)=>(F(),K("table",{class:U([g(d).b(),g(d).is("range",g(n))]),cellspacing:"0",cellpadding:"0"},[p.hideHeader?Ae("v-if",!0):(F(),K("thead",{key:0},[(F(!0),K(ht,null,Qt(g(o),v=>(F(),K("th",{key:v},Ye(v),1))),128))])),ie("tbody",null,[(F(!0),K(ht,null,Qt(g(s),(v,y)=>(F(),K("tr",{key:y,class:U({[g(d).e("row")]:!0,[g(d).em("row","hide-border")]:y===0&&p.hideHeader})},[(F(!0),K(ht,null,Qt(v,(x,b)=>(F(),K("td",{key:b,class:U(f(x)),onClick:w=>g(c)(x)},[ie("div",{class:U(g(h).b())},[Ee(p.$slots,"date-cell",{data:g(u)(x)},()=>[ie("span",null,Ye(x.text),1)])],2)],10,["onClick"]))),128))],2))),128))])],2))}});var dz=Ze(dKe,[["__file","date-table.vue"]]);const hKe=(e,t)=>{const i=e.endOf("month"),r=t.startOf("month"),a=i.isSame(r,"week")?r.add(1,"week"):r;return[[e,i],[a.startOf("week"),t]]},fKe=(e,t)=>{const i=e.endOf("month"),r=e.add(1,"month").startOf("month"),n=i.isSame(r,"week")?r.add(1,"week"):r,a=n.endOf("month"),s=t.startOf("month"),o=a.isSame(s,"week")?s.add(1,"week"):s;return[[e,i],[n.startOf("week"),a],[o.startOf("week"),t]]},pKe=(e,t,i)=>{const{lang:r}=di(),n=j(),a=Dt().locale(r.value),s=O({get(){return e.modelValue?l.value:n.value},set(v){if(!v)return;n.value=v;const y=v.toDate();t(fs,y),t(Vt,y)}}),o=O(()=>{if(!e.range||!ct(e.range)||e.range.length!==2||e.range.some(b=>!Sv(b)))return[];const v=e.range.map(b=>Dt(b).locale(r.value)),[y,x]=v;return y.isAfter(x)?[]:y.isSame(x,"month")?f(y,x):y.add(1,"month").month()!==x.month()?[]:f(y,x)}),l=O(()=>e.modelValue?Dt(e.modelValue).locale(r.value):s.value||(o.value.length?o.value[0][0]:a)),c=O(()=>l.value.subtract(1,"month").date(1)),u=O(()=>l.value.add(1,"month").date(1)),d=O(()=>l.value.subtract(1,"year").date(1)),h=O(()=>l.value.add(1,"year").date(1)),f=(v,y)=>{const x=v.startOf("week"),b=y.endOf("week"),w=x.get("month"),S=b.get("month");return w===S?[[x,b]]:(w+1)%12===S?hKe(x,b):w+2===S||(w+1)%11===S?fKe(x,b):[]},p=v=>{s.value=v};return{calculateValidatedDateRange:f,date:l,realSelectedDay:s,pickDay:p,selectDate:v=>{const x={"prev-month":c.value,"next-month":u.value,"prev-year":d.value,"next-year":h.value,today:a}[v];x.isSame(l.value,"day")||p(x)},validatedRange:o}},mKe=e=>ct(e)&&e.length===2&&e.every(t=>Sv(t)),vKe=je({modelValue:{type:Date},range:{type:be(Array),validator:mKe}}),gKe={[Vt]:e=>Sv(e),[fs]:e=>Sv(e)},yKe="ElCalendar",bKe=ce({name:yKe}),wKe=ce({...bKe,props:vKe,emits:gKe,setup(e,{expose:t,emit:i}){const r=e,n=Ve("calendar"),{calculateValidatedDateRange:a,date:s,pickDay:o,realSelectedDay:l,selectDate:c,validatedRange:u}=pKe(r,i),{t:d}=di(),h=O(()=>{const f=`el.datepicker.month${s.value.format("M")}`;return`${s.value.year()} ${d("el.datepicker.year")} ${d(f)}`});return t({selectedDay:l,pickDay:o,selectDate:c,calculateValidatedDateRange:a}),(f,p)=>(F(),K("div",{class:U(g(n).b())},[ie("div",{class:U(g(n).e("header"))},[Ee(f.$slots,"header",{date:g(h)},()=>[ie("div",{class:U(g(n).e("title"))},Ye(g(h)),3),g(u).length===0?(F(),K("div",{key:0,class:U(g(n).e("button-group"))},[ne(g(PX),null,{default:ve(()=>[ne(g(Wn),{size:"small",onClick:m=>g(c)("prev-month")},{default:ve(()=>[Xt(Ye(g(d)("el.datepicker.prevMonth")),1)]),_:1},8,["onClick"]),ne(g(Wn),{size:"small",onClick:m=>g(c)("today")},{default:ve(()=>[Xt(Ye(g(d)("el.datepicker.today")),1)]),_:1},8,["onClick"]),ne(g(Wn),{size:"small",onClick:m=>g(c)("next-month")},{default:ve(()=>[Xt(Ye(g(d)("el.datepicker.nextMonth")),1)]),_:1},8,["onClick"])]),_:1})],2)):Ae("v-if",!0)])],2),g(u).length===0?(F(),K("div",{key:0,class:U(g(n).e("body"))},[ne(dz,{date:g(s),"selected-day":g(l),onPick:g(o)},Lo({_:2},[f.$slots["date-cell"]?{name:"date-cell",fn:ve(m=>[Ee(f.$slots,"date-cell",_o(Au(m)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(F(),K("div",{key:1,class:U(g(n).e("body"))},[(F(!0),K(ht,null,Qt(g(u),(m,v)=>(F(),De(dz,{key:v,date:m[0],"selected-day":g(l),range:m,"hide-header":v!==0,onPick:g(o)},Lo({_:2},[f.$slots["date-cell"]?{name:"date-cell",fn:ve(y=>[Ee(f.$slots,"date-cell",_o(Au(y)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var xKe=Ze(wKe,[["__file","calendar.vue"]]);const _Ke=Rt(xKe),SKe=je({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:be([String,Object,Array]),default:""},bodyClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),CKe=ce({name:"ElCard"}),EKe=ce({...CKe,props:SKe,setup(e){const t=Ve("card");return(i,r)=>(F(),K("div",{class:U([g(t).b(),g(t).is(`${i.shadow}-shadow`)])},[i.$slots.header||i.header?(F(),K("div",{key:0,class:U(g(t).e("header"))},[Ee(i.$slots,"header",{},()=>[Xt(Ye(i.header),1)])],2)):Ae("v-if",!0),ie("div",{class:U([g(t).e("body"),i.bodyClass]),style:mt(i.bodyStyle)},[Ee(i.$slots,"default")],6),i.$slots.footer||i.footer?(F(),K("div",{key:1,class:U(g(t).e("footer"))},[Ee(i.$slots,"footer",{},()=>[Xt(Ye(i.footer),1)])],2)):Ae("v-if",!0)],2))}});var AKe=Ze(EKe,[["__file","card.vue"]]);const MKe=Rt(AKe),TKe=je({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},cardScale:{type:Number,default:.83},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0},motionBlur:Boolean}),PKe={change:(e,t)=>[e,t].every(gt)},KX=Symbol("carouselContextKey"),jT="ElCarouselItem",hz=300,DKe=(e,t,i)=>{const{children:r,addChild:n,removeChild:a}=a8(Ut(),jT),s=In(),o=j(-1),l=j(null),c=j(!1),u=j(),d=j(0),h=j(!0),f=j(!0),p=j(!1),m=O(()=>e.arrow!=="never"&&!g(x)),v=O(()=>r.value.some(J=>J.props.label.toString().length>0)),y=O(()=>e.type==="card"),x=O(()=>e.direction==="vertical"),b=O(()=>e.height!=="auto"?{height:e.height}:{height:`${d.value}px`,overflow:"hidden"}),w=Jd(J=>{M(J)},hz,{trailing:!0}),S=Jd(J=>{B(J)},hz),_=J=>h.value?o.value<=1?J<=1:J>1:!0;function E(){l.value&&(clearInterval(l.value),l.value=null)}function C(){e.interval<=0||!e.autoplay||l.value||(l.value=setInterval(()=>A(),e.interval))}const A=()=>{f.value||(p.value=!0),f.value=!1,o.value<r.value.length-1?o.value=o.value+1:e.loop?o.value=0:p.value=!1};function M(J){if(f.value||(p.value=!0),f.value=!1,Et(J)){const Q=r.value.filter(pe=>pe.props.name===J);Q.length>0&&(J=r.value.indexOf(Q[0]))}if(J=Number(J),Number.isNaN(J)||J!==Math.floor(J))return;const $=r.value.length,te=o.value;J<0?o.value=e.loop?$-1:0:J>=$?o.value=e.loop?0:$-1:o.value=J,te===o.value&&T(te),W()}function T(J){r.value.forEach(($,te)=>{$.translateItem(te,o.value,J)})}function P(J,$){var te,Q,pe,me;const le=g(r),Z=le.length;if(Z===0||!J.states.inStage)return!1;const oe=$+1,ge=$-1,Ie=Z-1,we=le[Ie].states.active,xe=le[0].states.active,Se=(Q=(te=le[oe])==null?void 0:te.states)==null?void 0:Q.active,Le=(me=(pe=le[ge])==null?void 0:pe.states)==null?void 0:me.active;return $===Ie&&xe||Se?"left":$===0&&we||Le?"right":!1}function D(){c.value=!0,e.pauseOnHover&&E()}function k(){c.value=!1,C()}function L(){p.value=!1}function R(J){g(x)||r.value.forEach(($,te)=>{J===P($,te)&&($.states.hover=!0)})}function N(){g(x)||r.value.forEach(J=>{J.states.hover=!1})}function I(J){J!==o.value&&(f.value||(p.value=!0)),o.value=J}function B(J){e.trigger==="hover"&&J!==o.value&&(o.value=J,f.value||(p.value=!0))}function z(){M(o.value-1)}function V(){M(o.value+1)}function W(){E(),e.pauseOnHover||C()}function G(J){e.height==="auto"&&(d.value=J)}function q(){var J;const $=(J=s.default)==null?void 0:J.call(s);if(!$)return null;const Q=eh($).filter(pe=>rr(pe)&&pe.type.name===jT);return(Q==null?void 0:Q.length)===2&&e.loop&&!y.value?(h.value=!0,Q):(h.value=!1,null)}Ne(()=>o.value,(J,$)=>{T($),h.value&&(J=J%2,$=$%2),$>-1&&t("change",J,$)}),Ne(()=>e.autoplay,J=>{J?C():E()}),Ne(()=>e.loop,()=>{M(o.value)}),Ne(()=>e.interval,()=>{W()});const ae=Wi();return Lt(()=>{Ne(()=>r.value,()=>{r.value.length>0&&M(e.initialIndex)},{immediate:!0}),ae.value=gr(u.value,()=>{T()}),C()}),Bi(()=>{E(),u.value&&ae.value&&ae.value.stop()}),Yt(KX,{root:u,isCardType:y,isVertical:x,items:r,loop:e.loop,cardScale:e.cardScale,addItem:n,removeItem:a,setActiveItem:M,setContainerHeight:G}),{root:u,activeIndex:o,arrowDisplay:m,hasLabel:v,hover:c,isCardType:y,isTransitioning:p,items:r,isVertical:x,containerStyle:b,isItemsTwoLength:h,handleButtonEnter:R,handleTransitionEnd:L,handleButtonLeave:N,handleIndicatorClick:I,handleMouseEnter:D,handleMouseLeave:k,setActiveItem:M,prev:z,next:V,PlaceholderItem:q,isTwoLengthShow:_,throttledArrowClick:w,throttledIndicatorHover:S}},IKe="ElCarousel",OKe=ce({name:IKe}),RKe=ce({...OKe,props:TKe,emits:PKe,setup(e,{expose:t,emit:i}){const r=e,{root:n,activeIndex:a,arrowDisplay:s,hasLabel:o,hover:l,isCardType:c,items:u,isVertical:d,containerStyle:h,handleButtonEnter:f,handleButtonLeave:p,isTransitioning:m,handleIndicatorClick:v,handleMouseEnter:y,handleMouseLeave:x,handleTransitionEnd:b,setActiveItem:w,prev:S,next:_,PlaceholderItem:E,isTwoLengthShow:C,throttledArrowClick:A,throttledIndicatorHover:M}=DKe(r,i),T=Ve("carousel"),{t:P}=di(),D=O(()=>{const R=[T.b(),T.m(r.direction)];return g(c)&&R.push(T.m("card")),R}),k=O(()=>{const R=[T.e("container")];return r.motionBlur&&g(m)&&u.value.length>1&&R.push(g(d)?`${T.namespace.value}-transitioning-vertical`:`${T.namespace.value}-transitioning`),R}),L=O(()=>{const R=[T.e("indicators"),T.em("indicators",r.direction)];return g(o)&&R.push(T.em("indicators","labels")),r.indicatorPosition==="outside"&&R.push(T.em("indicators","outside")),g(d)&&R.push(T.em("indicators","right")),R});return t({activeIndex:a,setActiveItem:w,prev:S,next:_}),(R,N)=>(F(),K("div",{ref_key:"root",ref:n,class:U(g(D)),onMouseenter:xt(g(y),["stop"]),onMouseleave:xt(g(x),["stop"])},[g(s)?(F(),De(Pn,{key:0,name:"carousel-arrow-left",persisted:""},{default:ve(()=>[Nt(ie("button",{type:"button",class:U([g(T).e("arrow"),g(T).em("arrow","left")]),"aria-label":g(P)("el.carousel.leftArrow"),onMouseenter:I=>g(f)("left"),onMouseleave:g(p),onClick:xt(I=>g(A)(g(a)-1),["stop"])},[ne(g(ut),null,{default:ve(()=>[ne(g(ph))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[_i,(R.arrow==="always"||g(l))&&(r.loop||g(a)>0)]])]),_:1})):Ae("v-if",!0),g(s)?(F(),De(Pn,{key:1,name:"carousel-arrow-right",persisted:""},{default:ve(()=>[Nt(ie("button",{type:"button",class:U([g(T).e("arrow"),g(T).em("arrow","right")]),"aria-label":g(P)("el.carousel.rightArrow"),onMouseenter:I=>g(f)("right"),onMouseleave:g(p),onClick:xt(I=>g(A)(g(a)+1),["stop"])},[ne(g(ut),null,{default:ve(()=>[ne(g(hs))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[_i,(R.arrow==="always"||g(l))&&(r.loop||g(a)<g(u).length-1)]])]),_:1})):Ae("v-if",!0),ie("div",{class:U(g(k)),style:mt(g(h)),onTransitionend:g(b)},[ne(g(E)),Ee(R.$slots,"default")],46,["onTransitionend"]),R.indicatorPosition!=="none"?(F(),K("ul",{key:2,class:U(g(L))},[(F(!0),K(ht,null,Qt(g(u),(I,B)=>Nt((F(),K("li",{key:B,class:U([g(T).e("indicator"),g(T).em("indicator",R.direction),g(T).is("active",B===g(a))]),onMouseenter:z=>g(M)(B),onClick:xt(z=>g(v)(B),["stop"])},[ie("button",{class:U(g(T).e("button")),"aria-label":g(P)("el.carousel.indicator",{index:B+1})},[g(o)?(F(),K("span",{key:0},Ye(I.props.label),1)):Ae("v-if",!0)],10,["aria-label"])],42,["onMouseenter","onClick"])),[[_i,g(C)(B)]])),128))],2)):Ae("v-if",!0),r.motionBlur?(F(),K("svg",{key:3,xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{display:"none"}},[ie("defs",null,[ie("filter",{id:"elCarouselHorizontal"},[ie("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12,0"})]),ie("filter",{id:"elCarouselVertical"},[ie("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0,10"})])])])):Ae("v-if",!0)],42,["onMouseenter","onMouseleave"]))}});var kKe=Ze(RKe,[["__file","carousel.vue"]]);const LKe=je({name:{type:String,default:""},label:{type:[String,Number],default:""}}),BKe=e=>{const t=rt(KX),i=Ut(),r=j(),n=j(!1),a=j(0),s=j(1),o=j(!1),l=j(!1),c=j(!1),u=j(!1),{isCardType:d,isVertical:h,cardScale:f}=t;function p(b,w,S){const _=S-1,E=w-1,C=w+1,A=S/2;return w===0&&b===_?-1:w===_&&b===0?S:b<E&&w-b>=A?S+1:b>C&&b-w>=A?-2:b}function m(b,w){var S,_;const E=g(h)?((S=t.root.value)==null?void 0:S.offsetHeight)||0:((_=t.root.value)==null?void 0:_.offsetWidth)||0;return c.value?E*((2-f)*(b-w)+1)/4:b<w?-(1+f)*E/4:(3+f)*E/4}function v(b,w,S){const _=t.root.value;return _?((S?_.offsetHeight:_.offsetWidth)||0)*(b-w):0}const y=(b,w,S)=>{var _;const E=g(d),C=(_=t.items.value.length)!=null?_:Number.NaN,A=b===w;!E&&!Qi(S)&&(u.value=A||b===S),!A&&C>2&&t.loop&&(b=p(b,w,C));const M=g(h);o.value=A,E?(c.value=Math.round(Math.abs(b-w))<=1,a.value=m(b,w),s.value=g(o)?1:f):a.value=v(b,w,M),l.value=!0,A&&r.value&&t.setContainerHeight(r.value.offsetHeight)};function x(){if(t&&g(d)){const b=t.items.value.findIndex(({uid:w})=>w===i.uid);t.setActiveItem(b)}}return Lt(()=>{t.addItem({props:e,states:bi({hover:n,translate:a,scale:s,active:o,ready:l,inStage:c,animating:u}),uid:i.uid,translateItem:y})}),zu(()=>{t.removeItem(i.uid)}),{carouselItemRef:r,active:o,animating:u,hover:n,inStage:c,isVertical:h,translate:a,isCardType:d,scale:s,ready:l,handleItemClick:x}},NKe=ce({name:jT}),FKe=ce({...NKe,props:LKe,setup(e){const t=e,i=Ve("carousel"),{carouselItemRef:r,active:n,animating:a,hover:s,inStage:o,isVertical:l,translate:c,isCardType:u,scale:d,ready:h,handleItemClick:f}=BKe(t),p=O(()=>[i.e("item"),i.is("active",n.value),i.is("in-stage",o.value),i.is("hover",s.value),i.is("animating",a.value),{[i.em("item","card")]:u.value,[i.em("item","card-vertical")]:u.value&&l.value}]),m=O(()=>{const y=`${`translate${g(l)?"Y":"X"}`}(${g(c)}px)`,x=`scale(${g(d)})`;return{transform:[y,x].join(" ")}});return(v,y)=>Nt((F(),K("div",{ref_key:"carouselItemRef",ref:r,class:U(g(p)),style:mt(g(m)),onClick:g(f)},[g(u)?Nt((F(),K("div",{key:0,class:U(g(i).e("mask"))},null,2)),[[_i,!g(n)]]):Ae("v-if",!0),Ee(v.$slots,"default")],14,["onClick"])),[[_i,g(h)]])}});var XX=Ze(FKe,[["__file","carousel-item.vue"]]);const zKe=Rt(kKe,{CarouselItem:XX}),VKe=Tr(XX),QX={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},border:Boolean,size:wn,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0},...ha(["ariaControls"])},JX={[Vt]:e=>Et(e)||gt(e)||Gi(e),change:e=>Et(e)||gt(e)||Gi(e)},p0=Symbol("checkboxGroupContextKey"),UKe=({model:e,isChecked:t})=>{const i=rt(p0,void 0),r=O(()=>{var a,s;const o=(a=i==null?void 0:i.max)==null?void 0:a.value,l=(s=i==null?void 0:i.min)==null?void 0:s.value;return!Qi(o)&&e.value.length>=o&&!t.value||!Qi(l)&&e.value.length<=l&&t.value});return{isDisabled:qa(O(()=>(i==null?void 0:i.disabled.value)||r.value)),isLimitDisabled:r}},HKe=(e,{model:t,isLimitExceeded:i,hasOwnLabel:r,isDisabled:n,isLabeledByFormItem:a})=>{const s=rt(p0,void 0),{formItem:o}=Ya(),{emit:l}=Ut();function c(p){var m,v,y,x;return[!0,e.trueValue,e.trueLabel].includes(p)?(v=(m=e.trueValue)!=null?m:e.trueLabel)!=null?v:!0:(x=(y=e.falseValue)!=null?y:e.falseLabel)!=null?x:!1}function u(p,m){l("change",c(p),m)}function d(p){if(i.value)return;const m=p.target;l("change",c(m.checked),p)}async function h(p){i.value||!r.value&&!n.value&&a.value&&(p.composedPath().some(y=>y.tagName==="LABEL")||(t.value=c([!1,e.falseValue,e.falseLabel].includes(t.value)),await ft(),u(t.value,p)))}const f=O(()=>(s==null?void 0:s.validateEvent)||e.validateEvent);return Ne(()=>e.modelValue,()=>{f.value&&(o==null||o.validate("change").catch(p=>void 0))}),{handleChange:d,onClickRoot:h}},jKe=e=>{const t=j(!1),{emit:i}=Ut(),r=rt(p0,void 0),n=O(()=>Qi(r)===!1),a=j(!1),s=O({get(){var o,l;return n.value?(o=r==null?void 0:r.modelValue)==null?void 0:o.value:(l=e.modelValue)!=null?l:t.value},set(o){var l,c;n.value&&ct(o)?(a.value=((l=r==null?void 0:r.max)==null?void 0:l.value)!==void 0&&o.length>(r==null?void 0:r.max.value)&&o.length>s.value.length,a.value===!1&&((c=r==null?void 0:r.changeEvent)==null||c.call(r,o))):(i(Vt,o),t.value=o)}});return{model:s,isGroup:n,isLimitExceeded:a}},WKe=(e,t,{model:i})=>{const r=rt(p0,void 0),n=j(!1),a=O(()=>Qf(e.value)?e.label:e.value),s=O(()=>{const u=i.value;return Gi(u)?u:ct(u)?Ri(a.value)?u.map(Ui).some(d=>jn(d,a.value)):u.map(Ui).includes(a.value):u!=null?u===e.trueValue||u===e.trueLabel:!!u}),o=on(O(()=>{var u;return(u=r==null?void 0:r.size)==null?void 0:u.value}),{prop:!0}),l=on(O(()=>{var u;return(u=r==null?void 0:r.size)==null?void 0:u.value})),c=O(()=>!!t.default||!Qf(a.value));return{checkboxButtonSize:o,isChecked:s,isFocused:n,checkboxSize:l,hasOwnLabel:c,actualValue:a}},eQ=(e,t)=>{const{formItem:i}=Ya(),{model:r,isGroup:n,isLimitExceeded:a}=jKe(e),{isFocused:s,isChecked:o,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u,actualValue:d}=WKe(e,t,{model:r}),{isDisabled:h}=UKe({model:r,isChecked:o}),{inputId:f,isLabeledByFormItem:p}=kl(e,{formItemContext:i,disableIdGeneration:u,disableIdManagement:n}),{handleChange:m,onClickRoot:v}=HKe(e,{model:r,isLimitExceeded:a,hasOwnLabel:u,isDisabled:h,isLabeledByFormItem:p});return(()=>{function x(){var b,w;ct(r.value)&&!r.value.includes(d.value)?r.value.push(d.value):r.value=(w=(b=e.trueValue)!=null?b:e.trueLabel)!=null?w:!0}e.checked&&x()})(),th({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},O(()=>n.value&&Qf(e.value))),th({from:"true-label",replacement:"true-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},O(()=>!!e.trueLabel)),th({from:"false-label",replacement:"false-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},O(()=>!!e.falseLabel)),{inputId:f,isLabeledByFormItem:p,isChecked:o,isDisabled:h,isFocused:s,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u,model:r,actualValue:d,handleChange:m,onClickRoot:v}},GKe=ce({name:"ElCheckbox"}),$Ke=ce({...GKe,props:QX,emits:JX,setup(e){const t=e,i=In(),{inputId:r,isLabeledByFormItem:n,isChecked:a,isDisabled:s,isFocused:o,checkboxSize:l,hasOwnLabel:c,model:u,actualValue:d,handleChange:h,onClickRoot:f}=eQ(t,i),p=Ve("checkbox"),m=O(()=>[p.b(),p.m(l.value),p.is("disabled",s.value),p.is("bordered",t.border),p.is("checked",a.value)]),v=O(()=>[p.e("input"),p.is("disabled",s.value),p.is("checked",a.value),p.is("indeterminate",t.indeterminate),p.is("focus",o.value)]);return(y,x)=>(F(),De(jt(!g(c)&&g(n)?"span":"label"),{class:U(g(m)),"aria-controls":y.indeterminate?y.ariaControls:null,onClick:g(f)},{default:ve(()=>{var b,w,S,_;return[ie("span",{class:U(g(v))},[y.trueValue||y.falseValue||y.trueLabel||y.falseLabel?Nt((F(),K("input",{key:0,id:g(r),"onUpdate:modelValue":E=>Ji(u)?u.value=E:null,class:U(g(p).e("original")),type:"checkbox",indeterminate:y.indeterminate,name:y.name,tabindex:y.tabindex,disabled:g(s),"true-value":(w=(b=y.trueValue)!=null?b:y.trueLabel)!=null?w:!0,"false-value":(_=(S=y.falseValue)!=null?S:y.falseLabel)!=null?_:!1,onChange:g(h),onFocus:E=>o.value=!0,onBlur:E=>o.value=!1,onClick:xt(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[z2,g(u)]]):Nt((F(),K("input",{key:1,id:g(r),"onUpdate:modelValue":E=>Ji(u)?u.value=E:null,class:U(g(p).e("original")),type:"checkbox",indeterminate:y.indeterminate,disabled:g(s),value:g(d),name:y.name,tabindex:y.tabindex,onChange:g(h),onFocus:E=>o.value=!0,onBlur:E=>o.value=!1,onClick:xt(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","disabled","value","name","tabindex","onChange","onFocus","onBlur","onClick"])),[[z2,g(u)]]),ie("span",{class:U(g(p).e("inner"))},null,2)],2),g(c)?(F(),K("span",{key:0,class:U(g(p).e("label"))},[Ee(y.$slots,"default"),y.$slots.default?Ae("v-if",!0):(F(),K(ht,{key:0},[Xt(Ye(y.label),1)],64))],2)):Ae("v-if",!0)]}),_:3},8,["class","aria-controls","onClick"]))}});var ZKe=Ze($Ke,[["__file","checkbox.vue"]]);const qKe=ce({name:"ElCheckboxButton"}),YKe=ce({...qKe,props:QX,emits:JX,setup(e){const t=e,i=In(),{isFocused:r,isChecked:n,isDisabled:a,checkboxButtonSize:s,model:o,actualValue:l,handleChange:c}=eQ(t,i),u=rt(p0,void 0),d=Ve("checkbox"),h=O(()=>{var p,m,v,y;const x=(m=(p=u==null?void 0:u.fill)==null?void 0:p.value)!=null?m:"";return{backgroundColor:x,borderColor:x,color:(y=(v=u==null?void 0:u.textColor)==null?void 0:v.value)!=null?y:"",boxShadow:x?`-1px 0 0 0 ${x}`:void 0}}),f=O(()=>[d.b("button"),d.bm("button",s.value),d.is("disabled",a.value),d.is("checked",n.value),d.is("focus",r.value)]);return(p,m)=>{var v,y,x,b;return F(),K("label",{class:U(g(f))},[p.trueValue||p.falseValue||p.trueLabel||p.falseLabel?Nt((F(),K("input",{key:0,"onUpdate:modelValue":w=>Ji(o)?o.value=w:null,class:U(g(d).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:g(a),"true-value":(y=(v=p.trueValue)!=null?v:p.trueLabel)!=null?y:!0,"false-value":(b=(x=p.falseValue)!=null?x:p.falseLabel)!=null?b:!1,onChange:g(c),onFocus:w=>r.value=!0,onBlur:w=>r.value=!1,onClick:xt(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[z2,g(o)]]):Nt((F(),K("input",{key:1,"onUpdate:modelValue":w=>Ji(o)?o.value=w:null,class:U(g(d).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:g(a),value:g(l),onChange:g(c),onFocus:w=>r.value=!0,onBlur:w=>r.value=!1,onClick:xt(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","value","onChange","onFocus","onBlur","onClick"])),[[z2,g(o)]]),p.$slots.default||p.label?(F(),K("span",{key:2,class:U(g(d).be("button","inner")),style:mt(g(n)?g(h):void 0)},[Ee(p.$slots,"default",{},()=>[Xt(Ye(p.label),1)])],6)):Ae("v-if",!0)],2)}}});var tQ=Ze(YKe,[["__file","checkbox-button.vue"]]);const KKe=je({modelValue:{type:be(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:wn,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0},...ha(["ariaLabel"])}),XKe={[Vt]:e=>ct(e),change:e=>ct(e)},QKe=ce({name:"ElCheckboxGroup"}),JKe=ce({...QKe,props:KKe,emits:XKe,setup(e,{emit:t}){const i=e,r=Ve("checkbox"),{formItem:n}=Ya(),{inputId:a,isLabeledByFormItem:s}=kl(i,{formItemContext:n}),o=async c=>{t(Vt,c),await ft(),t("change",c)},l=O({get(){return i.modelValue},set(c){o(c)}});return Yt(p0,{...Co(Gn(i),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:l,changeEvent:o}),Ne(()=>i.modelValue,()=>{i.validateEvent&&(n==null||n.validate("change").catch(c=>void 0))}),(c,u)=>{var d;return F(),De(jt(c.tag),{id:g(a),class:U(g(r).b("group")),role:"group","aria-label":g(s)?void 0:c.ariaLabel||"checkbox-group","aria-labelledby":g(s)?(d=g(n))==null?void 0:d.labelId:void 0},{default:ve(()=>[Ee(c.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var iQ=Ze(JKe,[["__file","checkbox-group.vue"]]);const jo=Rt(ZKe,{CheckboxButton:tQ,CheckboxGroup:iQ}),eXe=Tr(tQ),rQ=Tr(iQ),nQ=je({modelValue:{type:[String,Number,Boolean],default:void 0},size:wn,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),tXe=je({...nQ,border:Boolean}),aQ={[Vt]:e=>Et(e)||gt(e)||Gi(e),[nr]:e=>Et(e)||gt(e)||Gi(e)},sQ=Symbol("radioGroupKey"),oQ=(e,t)=>{const i=j(),r=rt(sQ,void 0),n=O(()=>!!r),a=O(()=>Qf(e.value)?e.label:e.value),s=O({get(){return n.value?r.modelValue:e.modelValue},set(d){n.value?r.changeEvent(d):t&&t(Vt,d),i.value.checked=e.modelValue===a.value}}),o=on(O(()=>r==null?void 0:r.size)),l=qa(O(()=>r==null?void 0:r.disabled)),c=j(!1),u=O(()=>l.value||n.value&&s.value!==a.value?-1:0);return th({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},O(()=>n.value&&Qf(e.value))),{radioRef:i,isGroup:n,radioGroup:r,focus:c,size:o,disabled:l,tabIndex:u,modelValue:s,actualValue:a}},iXe=ce({name:"ElRadio"}),rXe=ce({...iXe,props:tXe,emits:aQ,setup(e,{emit:t}){const i=e,r=Ve("radio"),{radioRef:n,radioGroup:a,focus:s,size:o,disabled:l,modelValue:c,actualValue:u}=oQ(i,t);function d(){ft(()=>t("change",c.value))}return(h,f)=>{var p;return F(),K("label",{class:U([g(r).b(),g(r).is("disabled",g(l)),g(r).is("focus",g(s)),g(r).is("bordered",h.border),g(r).is("checked",g(c)===g(u)),g(r).m(g(o))])},[ie("span",{class:U([g(r).e("input"),g(r).is("disabled",g(l)),g(r).is("checked",g(c)===g(u))])},[Nt(ie("input",{ref_key:"radioRef",ref:n,"onUpdate:modelValue":m=>Ji(c)?c.value=m:null,class:U(g(r).e("original")),value:g(u),name:h.name||((p=g(a))==null?void 0:p.name),disabled:g(l),checked:g(c)===g(u),type:"radio",onFocus:m=>s.value=!0,onBlur:m=>s.value=!1,onChange:d,onClick:xt(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","checked","onFocus","onBlur","onClick"]),[[FU,g(c)]]),ie("span",{class:U(g(r).e("inner"))},null,2)],2),ie("span",{class:U(g(r).e("label")),onKeydown:xt(()=>{},["stop"])},[Ee(h.$slots,"default",{},()=>[Xt(Ye(h.label),1)])],42,["onKeydown"])],2)}}});var nXe=Ze(rXe,[["__file","radio.vue"]]);const aXe=je({...nQ}),sXe=ce({name:"ElRadioButton"}),oXe=ce({...sXe,props:aXe,setup(e){const t=e,i=Ve("radio"),{radioRef:r,focus:n,size:a,disabled:s,modelValue:o,radioGroup:l,actualValue:c}=oQ(t),u=O(()=>({backgroundColor:(l==null?void 0:l.fill)||"",borderColor:(l==null?void 0:l.fill)||"",boxShadow:l!=null&&l.fill?`-1px 0 0 0 ${l.fill}`:"",color:(l==null?void 0:l.textColor)||""}));return(d,h)=>{var f;return F(),K("label",{class:U([g(i).b("button"),g(i).is("active",g(o)===g(c)),g(i).is("disabled",g(s)),g(i).is("focus",g(n)),g(i).bm("button",g(a))])},[Nt(ie("input",{ref_key:"radioRef",ref:r,"onUpdate:modelValue":p=>Ji(o)?o.value=p:null,class:U(g(i).be("button","original-radio")),value:g(c),type:"radio",name:d.name||((f=g(l))==null?void 0:f.name),disabled:g(s),onFocus:p=>n.value=!0,onBlur:p=>n.value=!1,onClick:xt(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","onFocus","onBlur","onClick"]),[[FU,g(o)]]),ie("span",{class:U(g(i).be("button","inner")),style:mt(g(o)===g(c)?g(u):{}),onKeydown:xt(()=>{},["stop"])},[Ee(d.$slots,"default",{},()=>[Xt(Ye(d.label),1)])],46,["onKeydown"])],2)}}});var lQ=Ze(oXe,[["__file","radio-button.vue"]]);const lXe=je({id:{type:String,default:void 0},size:wn,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...ha(["ariaLabel"])}),cXe=aQ,uXe=ce({name:"ElRadioGroup"}),dXe=ce({...uXe,props:lXe,emits:cXe,setup(e,{emit:t}){const i=e,r=Ve("radio"),n=ua(),a=j(),{formItem:s}=Ya(),{inputId:o,isLabeledByFormItem:l}=kl(i,{formItemContext:s}),c=d=>{t(Vt,d),ft(()=>t("change",d))};Lt(()=>{const d=a.value.querySelectorAll("[type=radio]"),h=d[0];!Array.from(d).some(f=>f.checked)&&h&&(h.tabIndex=0)});const u=O(()=>i.name||n.value);return Yt(sQ,bi({...Gn(i),changeEvent:c,name:u})),Ne(()=>i.modelValue,()=>{i.validateEvent&&(s==null||s.validate("change").catch(d=>void 0))}),(d,h)=>(F(),K("div",{id:g(o),ref_key:"radioGroupRef",ref:a,class:U(g(r).b("group")),role:"radiogroup","aria-label":g(l)?void 0:d.ariaLabel||"radio-group","aria-labelledby":g(l)?g(s).labelId:void 0},[Ee(d.$slots,"default")],10,["id","aria-label","aria-labelledby"]))}});var cQ=Ze(dXe,[["__file","radio-group.vue"]]);const uQ=Rt(nXe,{RadioButton:lQ,RadioGroup:cQ}),hXe=Tr(cQ),fXe=Tr(lQ);var pXe=ce({name:"NodeContent",setup(){return{ns:Ve("cascader-node")}},render(){const{ns:e}=this,{node:t,panel:i}=this.$parent,{data:r,label:n}=t,{renderLabelFn:a}=i;return dt("span",{class:e.e("label")},a?a({node:t,data:r}):n)}});const m8=Symbol(),mXe=ce({name:"ElCascaderNode",components:{ElCheckbox:jo,ElRadio:uQ,NodeContent:pXe,ElIcon:ut,Check:Py,Loading:_c,ArrowRight:hs},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:t}){const i=rt(m8),r=Ve("cascader-node"),n=O(()=>i.isHoverMenu),a=O(()=>i.config.multiple),s=O(()=>i.config.checkStrictly),o=O(()=>{var _;return(_=i.checkedNodes[0])==null?void 0:_.uid}),l=O(()=>e.node.isDisabled),c=O(()=>e.node.isLeaf),u=O(()=>s.value&&!c.value||!l.value),d=O(()=>f(i.expandingNode)),h=O(()=>s.value&&i.checkedNodes.some(f)),f=_=>{var E;const{level:C,uid:A}=e.node;return((E=_==null?void 0:_.pathNodes[C-1])==null?void 0:E.uid)===A},p=()=>{d.value||i.expandNode(e.node)},m=_=>{const{node:E}=e;_!==E.checked&&i.handleCheckChange(E,_)},v=()=>{i.lazyLoad(e.node,()=>{c.value||p()})},y=_=>{n.value&&(x(),!c.value&&t("expand",_))},x=()=>{const{node:_}=e;!u.value||_.loading||(_.loaded?p():v())},b=()=>{n.value&&!c.value||(c.value&&!l.value&&!s.value&&!a.value?S(!0):x())},w=_=>{s.value?(m(_),e.node.loaded&&p()):S(_)},S=_=>{e.node.loaded?(m(_),!s.value&&p()):v()};return{panel:i,isHoverMenu:n,multiple:a,checkStrictly:s,checkedNodeId:o,isDisabled:l,isLeaf:c,expandable:u,inExpandingPath:d,inCheckedPath:h,ns:r,handleHoverExpand:y,handleExpand:x,handleClick:b,handleCheck:S,handleSelectCheck:w}}});function vXe(e,t,i,r,n,a){const s=Ht("el-checkbox"),o=Ht("el-radio"),l=Ht("check"),c=Ht("el-icon"),u=Ht("node-content"),d=Ht("loading"),h=Ht("arrow-right");return F(),K("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:U([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:e.handleHoverExpand,onFocus:e.handleHoverExpand,onClick:e.handleClick},[Ae(" prefix "),e.multiple?(F(),De(s,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:xt(()=>{},["stop"]),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onClick","onUpdate:modelValue"])):e.checkStrictly?(F(),De(o,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:xt(()=>{},["stop"])},{default:ve(()=>[Ae(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),ie("span")]),_:1},8,["model-value","label","disabled","onUpdate:modelValue","onClick"])):e.isLeaf&&e.node.checked?(F(),De(c,{key:2,class:U(e.ns.e("prefix"))},{default:ve(()=>[ne(l)]),_:1},8,["class"])):Ae("v-if",!0),Ae(" content "),ne(u),Ae(" postfix "),e.isLeaf?Ae("v-if",!0):(F(),K(ht,{key:3},[e.node.loading?(F(),De(c,{key:0,class:U([e.ns.is("loading"),e.ns.e("postfix")])},{default:ve(()=>[ne(d)]),_:1},8,["class"])):(F(),De(c,{key:1,class:U(["arrow-right",e.ns.e("postfix")])},{default:ve(()=>[ne(h)]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex","onMouseenter","onFocus","onClick"])}var gXe=Ze(mXe,[["render",vXe],["__file","node.vue"]]);const yXe=ce({name:"ElCascaderMenu",components:{Loading:_c,ElIcon:ut,ElScrollbar:Bc,ElCascaderNode:gXe},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const t=Ut(),i=Ve("cascader-menu"),{t:r}=di(),n=ua();let a=null,s=null;const o=rt(m8),l=j(null),c=O(()=>!e.nodes.length),u=O(()=>!o.initialLoaded),d=O(()=>`${n.value}-${e.index}`),h=v=>{a=v.target},f=v=>{if(!(!o.isHoverMenu||!a||!l.value))if(a.contains(v.target)){p();const y=t.vnode.el,{left:x}=y.getBoundingClientRect(),{offsetWidth:b,offsetHeight:w}=y,S=v.clientX-x,_=a.offsetTop,E=_+a.offsetHeight;l.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${S} ${_} L${b} 0 V${_} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${S} ${E} L${b} ${w} V${E} Z" />
        `}else s||(s=window.setTimeout(m,o.config.hoverThreshold))},p=()=>{s&&(clearTimeout(s),s=null)},m=()=>{l.value&&(l.value.innerHTML="",p())};return{ns:i,panel:o,hoverZone:l,isEmpty:c,isLoading:u,menuId:d,t:r,handleExpand:h,handleMouseMove:f,clearHoverZone:m}}});function bXe(e,t,i,r,n,a){const s=Ht("el-cascader-node"),o=Ht("loading"),l=Ht("el-icon"),c=Ht("el-scrollbar");return F(),De(c,{key:e.menuId,tag:"ul",role:"menu",class:U(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:ve(()=>{var u;return[(F(!0),K(ht,null,Qt(e.nodes,d=>(F(),De(s,{key:d.uid,node:d,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(F(),K("div",{key:0,class:U(e.ns.e("empty-text"))},[ne(l,{size:"14",class:U(e.ns.is("loading"))},{default:ve(()=>[ne(o)]),_:1},8,["class"]),Xt(" "+Ye(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(F(),K("div",{key:1,class:U(e.ns.e("empty-text"))},[Ee(e.$slots,"empty",{},()=>[Xt(Ye(e.t("el.cascader.noData")),1)])],2)):(u=e.panel)!=null&&u.isHoverMenu?(F(),K("svg",{key:2,ref:"hoverZone",class:U(e.ns.e("hover-zone"))},null,2)):Ae("v-if",!0)]}),_:3},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var wXe=Ze(yXe,[["render",bXe],["__file","menu.vue"]]);let xXe=0;const _Xe=e=>{const t=[e];let{parent:i}=e;for(;i;)t.unshift(i),i=i.parent;return t};class h_{constructor(t,i,r,n=!1){this.data=t,this.config=i,this.parent=r,this.root=n,this.uid=xXe++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:a,label:s,children:o}=i,l=t[o],c=_Xe(this);this.level=n?0:r?r.level+1:1,this.value=t[a],this.label=t[s],this.pathNodes=c,this.pathValues=c.map(u=>u.value),this.pathLabels=c.map(u=>u.label),this.childrenData=l,this.children=(l||[]).map(u=>new h_(u,i,this)),this.loaded=!i.lazy||this.isLeaf||!Zs(l)}get isDisabled(){const{data:t,parent:i,config:r}=this,{disabled:n,checkStrictly:a}=r;return(Wt(n)?n(t,this):!!t[n])||!a&&(i==null?void 0:i.isDisabled)}get isLeaf(){const{data:t,config:i,childrenData:r,loaded:n}=this,{lazy:a,leaf:s}=i,o=Wt(s)?s(t,this):t[s];return Qi(o)?a&&!n?!1:!(ct(r)&&r.length):!!o}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(t){const{childrenData:i,children:r}=this,n=new h_(t,this.config,this);return ct(i)?i.push(t):this.childrenData=[t],r.push(n),n}calcText(t,i){const r=t?this.pathLabels.join(i):this.label;return this.text=r,r}broadcast(t,...i){const r=`onParent${sc(t)}`;this.children.forEach(n=>{n&&(n.broadcast(t,...i),n[r]&&n[r](...i))})}emit(t,...i){const{parent:r}=this,n=`onChild${sc(t)}`;r&&(r[n]&&r[n](...i),r.emit(t,...i))}onParentCheck(t){this.isDisabled||this.setCheckState(t)}onChildCheck(){const{children:t}=this,i=t.filter(n=>!n.isDisabled),r=i.length?i.every(n=>n.checked):!1;this.setCheckState(r)}setCheckState(t){const i=this.children.length,r=this.children.reduce((n,a)=>{const s=a.checked?1:a.indeterminate?.5:0;return n+s},0);this.checked=this.loaded&&this.children.filter(n=>!n.isDisabled).every(n=>n.loaded&&n.checked)&&t,this.indeterminate=this.loaded&&r!==i&&r>0}doCheck(t){if(this.checked===t)return;const{checkStrictly:i,multiple:r}=this.config;i||!r?this.checked=t:(this.broadcast("check",t),this.setCheckState(t),this.emit("check"))}}var WT=h_;const GT=(e,t)=>e.reduce((i,r)=>(r.isLeaf?i.push(r):(!t&&i.push(r),i=i.concat(GT(r.children,t))),i),[]);class fz{constructor(t,i){this.config=i;const r=(t||[]).map(n=>new WT(n,this.config));this.nodes=r,this.allNodes=GT(r,!1),this.leafNodes=GT(r,!0)}getNodes(){return this.nodes}getFlattedNodes(t){return t?this.leafNodes:this.allNodes}appendNode(t,i){const r=i?i.appendChild(t):new WT(t,this.config);i||this.nodes.push(r),this.allNodes.push(r),r.isLeaf&&this.leafNodes.push(r)}appendNodes(t,i){t.forEach(r=>this.appendNode(r,i))}getNodeByValue(t,i=!1){return!t&&t!==0?null:this.getFlattedNodes(i).find(n=>jn(n.value,t)||jn(n.pathValues,t))||null}getSameNode(t){return t&&this.getFlattedNodes(!1).find(({value:r,level:n})=>jn(t.value,r)&&t.level===n)||null}}const dQ=je({modelValue:{type:be([Number,String,Array])},options:{type:be(Array),default:()=>[]},props:{type:be(Object),default:()=>({})}}),SXe={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Sr,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},CXe=e=>O(()=>({...SXe,...e.props})),pz=e=>{if(!e)return 0;const t=e.id.split("-");return Number(t[t.length-2])},EXe=e=>{if(!e)return;const t=e.querySelector("input");t?t.click():VZ(e)&&e.click()},AXe=(e,t)=>{const i=t.slice(0),r=i.map(a=>a.uid),n=e.reduce((a,s)=>{const o=r.indexOf(s.uid);return o>-1&&(a.push(s),i.splice(o,1),r.splice(o,1)),a},[]);return n.push(...i),n},MXe=ce({name:"ElCascaderPanel",components:{ElCascaderMenu:wXe},props:{...dQ,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Vt,nr,"close","expand-change"],setup(e,{emit:t,slots:i}){let r=!1;const n=Ve("cascader"),a=CXe(e);let s=null;const o=j(!0),l=j([]),c=j(null),u=j([]),d=j(null),h=j([]),f=O(()=>a.value.expandTrigger==="hover"),p=O(()=>e.renderLabel||i.default),m=()=>{const{options:P}=e,D=a.value;r=!1,s=new fz(P,D),u.value=[s.getNodes()],D.lazy&&Zs(e.options)?(o.value=!1,v(void 0,k=>{k&&(s=new fz(k,D),u.value=[s.getNodes()]),o.value=!0,C(!1,!0)})):C(!1,!0)},v=(P,D)=>{const k=a.value;P=P||new WT({},k,void 0,!0),P.loading=!0;const L=R=>{const N=P,I=N.root?null:N;R&&(s==null||s.appendNodes(R,I)),N.loading=!1,N.loaded=!0,N.childrenData=N.childrenData||[],D&&D(R)};k.lazyLoad(P,L)},y=(P,D)=>{var k;const{level:L}=P,R=u.value.slice(0,L);let N;P.isLeaf?N=P.pathNodes[L-2]:(N=P,R.push(P.children)),((k=d.value)==null?void 0:k.uid)!==(N==null?void 0:N.uid)&&(d.value=P,u.value=R,!D&&t("expand-change",(P==null?void 0:P.pathValues)||[]))},x=(P,D,k=!0)=>{const{checkStrictly:L,multiple:R}=a.value,N=h.value[0];r=!0,!R&&(N==null||N.doCheck(!1)),P.doCheck(D),E(),k&&!R&&!L&&t("close"),!k&&!R&&!L&&b(P)},b=P=>{P&&(P=P.parent,b(P),P&&y(P))},w=P=>s==null?void 0:s.getFlattedNodes(P),S=P=>{var D;return(D=w(P))==null?void 0:D.filter(k=>k.checked!==!1)},_=()=>{h.value.forEach(P=>P.doCheck(!1)),E(),u.value=u.value.slice(0,1),d.value=null,t("expand-change",[])},E=()=>{var P;const{checkStrictly:D,multiple:k}=a.value,L=h.value,R=S(!D),N=AXe(L,R),I=N.map(B=>B.valueByOption);h.value=N,c.value=k?I:(P=I[0])!=null?P:null},C=(P=!1,D=!1)=>{const{modelValue:k}=e,{lazy:L,multiple:R,checkStrictly:N}=a.value,I=!N;if(!(!o.value||r||!D&&jn(k,c.value)))if(L&&!P){const z=hF(IY(cs(k))).map(V=>s==null?void 0:s.getNodeByValue(V)).filter(V=>!!V&&!V.loaded&&!V.loading);z.length?z.forEach(V=>{v(V,()=>C(!1,D))}):C(!0,D)}else{const B=R?cs(k):[k],z=hF(B.map(V=>s==null?void 0:s.getNodeByValue(V,I)));A(z,D),c.value=O1(k)}},A=(P,D=!0)=>{const{checkStrictly:k}=a.value,L=h.value,R=P.filter(B=>!!B&&(k||B.isLeaf)),N=s==null?void 0:s.getSameNode(d.value),I=D&&N||R[0];I?I.pathNodes.forEach(B=>y(B,!0)):d.value=null,L.forEach(B=>B.doCheck(!1)),bi(R).forEach(B=>B.doCheck(!0)),h.value=R,ft(M)},M=()=>{si&&l.value.forEach(P=>{const D=P==null?void 0:P.$el;if(D){const k=D.querySelector(`.${n.namespace.value}-scrollbar__wrap`),L=D.querySelector(`.${n.b("node")}.${n.is("active")}`)||D.querySelector(`.${n.b("node")}.in-active-path`);NI(k,L)}})},T=P=>{const D=P.target,{code:k}=P;switch(k){case at.up:case at.down:{P.preventDefault();const L=k===at.up?-1:1;c2(UZ(D,L,`.${n.b("node")}[tabindex="-1"]`));break}case at.left:{P.preventDefault();const L=l.value[pz(D)-1],R=L==null?void 0:L.$el.querySelector(`.${n.b("node")}[aria-expanded="true"]`);c2(R);break}case at.right:{P.preventDefault();const L=l.value[pz(D)+1],R=L==null?void 0:L.$el.querySelector(`.${n.b("node")}[tabindex="-1"]`);c2(R);break}case at.enter:case at.numpadEnter:EXe(D);break}};return Yt(m8,bi({config:a,expandingNode:d,checkedNodes:h,isHoverMenu:f,initialLoaded:o,renderLabelFn:p,lazyLoad:v,expandNode:y,handleCheckChange:x})),Ne([a,()=>e.options],m,{deep:!0,immediate:!0}),Ne(()=>e.modelValue,()=>{r=!1,C()},{deep:!0}),Ne(()=>c.value,P=>{jn(P,e.modelValue)||(t(Vt,P),t(nr,P))}),XV(()=>l.value=[]),Lt(()=>!Zs(e.modelValue)&&C()),{ns:n,menuList:l,menus:u,checkedNodes:h,handleKeyDown:T,handleCheckChange:x,getFlattedNodes:w,getCheckedNodes:S,clearCheckedNodes:_,calculateCheckedValue:E,scrollToExpandingNode:M}}});function TXe(e,t,i,r,n,a){const s=Ht("el-cascader-menu");return F(),K("div",{class:U([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:e.handleKeyDown},[(F(!0),K(ht,null,Qt(e.menus,(o,l)=>(F(),De(s,{key:l,ref_for:!0,ref:c=>e.menuList[l]=c,index:l,nodes:[...o]},{empty:ve(()=>[Ee(e.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],42,["onKeydown"])}var PXe=Ze(MXe,[["render",TXe],["__file","index.vue"]]);const hQ=Rt(PXe),ep=je({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:Lc},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),DXe={close:e=>e instanceof MouseEvent,click:e=>e instanceof MouseEvent},IXe=ce({name:"ElTag"}),OXe=ce({...IXe,props:ep,emits:DXe,setup(e,{emit:t}){const i=e,r=on(),n=Ve("tag"),a=O(()=>{const{type:c,hit:u,effect:d,closable:h,round:f}=i;return[n.b(),n.is("closable",h),n.m(c||"primary"),n.m(r.value),n.m(d),n.is("hit",u),n.is("round",f)]}),s=c=>{t("close",c)},o=c=>{t("click",c)},l=c=>{c.component.subTree.component.bum=null};return(c,u)=>c.disableTransitions?(F(),K("span",{key:0,class:U(g(a)),style:mt({backgroundColor:c.color}),onClick:o},[ie("span",{class:U(g(n).e("content"))},[Ee(c.$slots,"default")],2),c.closable?(F(),De(g(ut),{key:0,class:U(g(n).e("close")),onClick:xt(s,["stop"])},{default:ve(()=>[ne(g(Ml))]),_:1},8,["class","onClick"])):Ae("v-if",!0)],6)):(F(),De(Pn,{key:1,name:`${g(n).namespace.value}-zoom-in-center`,appear:"",onVnodeMounted:l},{default:ve(()=>[ie("span",{class:U(g(a)),style:mt({backgroundColor:c.color}),onClick:o},[ie("span",{class:U(g(n).e("content"))},[Ee(c.$slots,"default")],2),c.closable?(F(),De(g(ut),{key:0,class:U(g(n).e("close")),onClick:xt(s,["stop"])},{default:ve(()=>[ne(g(Ml))]),_:1},8,["class","onClick"])):Ae("v-if",!0)],6)]),_:3},8,["name"]))}});var RXe=Ze(OXe,[["__file","tag.vue"]]);const F1=Rt(RXe),kXe=je({...dQ,size:wn,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:be(Function),default:(e,t)=>e.text.includes(t)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:be(Function),default:()=>!0},placement:{type:be(String),values:Xu,default:"bottom-start"},fallbackPlacements:{type:be(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:Nn.teleported,tagType:{...ep.type,default:"info"},tagEffect:{...ep.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...h0}),LXe={[Vt]:e=>!0,[nr]:e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,visibleChange:e=>Gi(e),expandChange:e=>!!e,removeTag:e=>!!e},BXe="ElCascader",NXe=ce({name:BXe}),FXe=ce({...NXe,props:kXe,emits:LXe,setup(e,{expose:t,emit:i}){const r=e,n={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:he})=>{const{modifiersData:ke,placement:se}=he;["right","left","bottom","top"].includes(se)||(ke.arrow.x=35)},requires:["arrow"]}]},a=rp();let s=0,o=0;const l=Ve("cascader"),c=Ve("input"),{t:u}=di(),{form:d,formItem:h}=Ya(),{valueOnClear:f}=YS(r),{isComposing:p,handleComposition:m}=qS({afterComposition(he){var ke;const se=(ke=he.target)==null?void 0:ke.value;_e(se)}}),v=j(null),y=j(null),x=j(null),b=j(null),w=j(null),S=j(!1),_=j(!1),E=j(!1),C=j(!1),A=j(""),M=j(""),T=j([]),P=j([]),D=j([]),k=O(()=>a.style),L=O(()=>r.disabled||(d==null?void 0:d.disabled)),R=O(()=>r.placeholder||u("el.cascader.placeholder")),N=O(()=>M.value||T.value.length>0||p.value?"":R.value),I=on(),B=O(()=>["small"].includes(I.value)?"small":"default"),z=O(()=>!!r.props.multiple),V=O(()=>!r.filterable||z.value),W=O(()=>z.value?M.value:A.value),G=O(()=>{var he;return((he=b.value)==null?void 0:he.checkedNodes)||[]}),q=O(()=>!r.clearable||L.value||E.value||!_.value?!1:!!G.value.length),ae=O(()=>{const{showAllLevels:he,separator:ke}=r,se=G.value;return se.length?z.value?"":se[0].calcText(he,ke):""}),J=O(()=>(h==null?void 0:h.validateState)||""),$=O({get(){return O1(r.modelValue)},set(he){const ke=he??f.value;i(Vt,ke),i(nr,ke),r.validateEvent&&(h==null||h.validate("change").catch(se=>void 0))}}),te=O(()=>[l.b(),l.m(I.value),l.is("disabled",L.value),a.class]),Q=O(()=>[c.e("icon"),"icon-arrow-down",l.is("reverse",S.value)]),pe=O(()=>l.is("focus",S.value||C.value)),me=O(()=>{var he,ke;return(ke=(he=v.value)==null?void 0:he.popperRef)==null?void 0:ke.contentRef}),le=he=>{var ke,se,He;L.value||(he=he??!S.value,he!==S.value&&(S.value=he,(se=(ke=y.value)==null?void 0:ke.input)==null||se.setAttribute("aria-expanded",`${he}`),he?(Z(),ft((He=b.value)==null?void 0:He.scrollToExpandingNode)):r.filterable&&Oe(),i("visibleChange",he)))},Z=()=>{ft(()=>{var he;(he=v.value)==null||he.updatePopper()})},oe=()=>{E.value=!1},ge=he=>{const{showAllLevels:ke,separator:se}=r;return{node:he,key:he.uid,text:he.calcText(ke,se),hitState:!1,closable:!L.value&&!he.isDisabled,isCollapseTag:!1}},Ie=he=>{var ke;const se=he.node;se.doCheck(!1),(ke=b.value)==null||ke.calculateCheckedValue(),i("removeTag",se.valueByOption)},we=()=>{if(!z.value)return;const he=G.value,ke=[],se=[];if(he.forEach(He=>se.push(ge(He))),P.value=se,he.length){he.slice(0,r.maxCollapseTags).forEach(Te=>ke.push(ge(Te)));const He=he.slice(r.maxCollapseTags),yt=He.length;yt&&(r.collapseTags?ke.push({key:-1,text:`+ ${yt}`,closable:!1,isCollapseTag:!0}):He.forEach(Te=>ke.push(ge(Te))))}T.value=ke},xe=()=>{var he,ke;const{filterMethod:se,showAllLevels:He,separator:yt}=r,Te=(ke=(he=b.value)==null?void 0:he.getFlattedNodes(!r.props.checkStrictly))==null?void 0:ke.filter($e=>$e.isDisabled?!1:($e.calcText(He,yt),se($e,W.value)));z.value&&(T.value.forEach($e=>{$e.hitState=!1}),P.value.forEach($e=>{$e.hitState=!1})),E.value=!0,D.value=Te,Z()},Se=()=>{var he;let ke;E.value&&w.value?ke=w.value.$el.querySelector(`.${l.e("suggestion-item")}`):ke=(he=b.value)==null?void 0:he.$el.querySelector(`.${l.b("node")}[tabindex="-1"]`),ke&&(ke.focus(),!E.value&&ke.click())},Le=()=>{var he,ke;const se=(he=y.value)==null?void 0:he.input,He=x.value,yt=(ke=w.value)==null?void 0:ke.$el;if(!(!si||!se)){if(yt){const Te=yt.querySelector(`.${l.e("suggestion-list")}`);Te.style.minWidth=`${se.offsetWidth}px`}if(He){const{offsetHeight:Te}=He,$e=T.value.length>0?`${Math.max(Te+6,s)}px`:`${s}px`;se.style.height=$e,Z()}}},Be=he=>{var ke;return(ke=b.value)==null?void 0:ke.getCheckedNodes(he)},ee=he=>{Z(),i("expandChange",he)},X=he=>{if(!p.value)switch(he.code){case at.enter:case at.numpadEnter:le();break;case at.down:le(!0),ft(Se),he.preventDefault();break;case at.esc:S.value===!0&&(he.preventDefault(),he.stopPropagation(),le(!1));break;case at.tab:le(!1);break}},ue=()=>{var he;(he=b.value)==null||he.clearCheckedNodes(),!S.value&&r.filterable&&Oe(),le(!1),i("clear")},Oe=()=>{const{value:he}=ae;A.value=he,M.value=he},Y=he=>{var ke,se;const{checked:He}=he;z.value?(ke=b.value)==null||ke.handleCheckChange(he,!He,!1):(!He&&((se=b.value)==null||se.handleCheckChange(he,!0,!1)),le(!1))},qe=he=>{const ke=he.target,{code:se}=he;switch(se){case at.up:case at.down:{const He=se===at.up?-1:1;c2(UZ(ke,He,`.${l.e("suggestion-item")}[tabindex="-1"]`));break}case at.enter:case at.numpadEnter:ke.click();break}},et=()=>{const he=T.value,ke=he[he.length-1];o=M.value?0:o+1,!(!ke||!o||r.collapseTags&&he.length>1)&&(ke.hitState?Ie(ke):ke.hitState=!0)},tt=he=>{const ke=he.target,se=l.e("search-input");ke.className===se&&(C.value=!0),i("focus",he)},ze=he=>{C.value=!1,i("blur",he)},vt=gs(()=>{const{value:he}=W;if(!he)return;const ke=r.beforeFilter(he);nT(ke)?ke.then(xe).catch(()=>{}):ke!==!1?xe():oe()},r.debounce),_e=(he,ke)=>{!S.value&&le(!0),!(ke!=null&&ke.isComposing)&&(he?vt():oe())},Fe=he=>Number.parseFloat(UIe(c.cssVarName("input-height"),he).value)-2;return Ne(E,Z),Ne([G,L,()=>r.collapseTags],we),Ne(T,()=>{ft(()=>Le())}),Ne(I,async()=>{await ft();const he=y.value.input;s=Fe(he)||s,Le()}),Ne(ae,Oe,{immediate:!0}),Lt(()=>{const he=y.value.input,ke=Fe(he);s=he.offsetHeight||ke,gr(he,Le)}),t({getCheckedNodes:Be,cascaderPanelRef:b,togglePopperVisible:le,contentRef:me,presentText:ae}),(he,ke)=>(F(),De(g(Ta),{ref_key:"tooltipRef",ref:v,visible:S.value,teleported:he.teleported,"popper-class":[g(l).e("dropdown"),he.popperClass],"popper-options":n,"fallback-placements":he.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:he.placement,transition:`${g(l).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:he.persistent,onHide:oe},{default:ve(()=>[Nt((F(),K("div",{class:U(g(te)),style:mt(g(k)),onClick:()=>le(g(V)?void 0:!0),onKeydown:X,onMouseenter:se=>_.value=!0,onMouseleave:se=>_.value=!1},[ne(g(Ha),{ref_key:"input",ref:y,modelValue:A.value,"onUpdate:modelValue":se=>A.value=se,placeholder:g(N),readonly:g(V),disabled:g(L),"validate-event":!1,size:g(I),class:U(g(pe)),tabindex:g(z)&&he.filterable&&!g(L)?-1:void 0,onCompositionstart:g(m),onCompositionupdate:g(m),onCompositionend:g(m),onFocus:tt,onBlur:ze,onInput:_e},{suffix:ve(()=>[g(q)?(F(),De(g(ut),{key:"clear",class:U([g(c).e("icon"),"icon-circle-close"]),onClick:xt(ue,["stop"])},{default:ve(()=>[ne(g(Ih))]),_:1},8,["class","onClick"])):(F(),De(g(ut),{key:"arrow-down",class:U(g(Q)),onClick:xt(se=>le(),["stop"])},{default:ve(()=>[ne(g(Ku))]),_:1},8,["class","onClick"]))]),_:1},8,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),g(z)?(F(),K("div",{key:0,ref_key:"tagWrapper",ref:x,class:U([g(l).e("tags"),g(l).is("validate",!!g(J))])},[(F(!0),K(ht,null,Qt(T.value,se=>(F(),De(g(F1),{key:se.key,type:he.tagType,size:g(B),effect:he.tagEffect,hit:se.hitState,closable:se.closable,"disable-transitions":"",onClose:He=>Ie(se)},{default:ve(()=>[se.isCollapseTag===!1?(F(),K("span",{key:0},Ye(se.text),1)):(F(),De(g(Ta),{key:1,disabled:S.value||!he.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:ve(()=>[ie("span",null,Ye(se.text),1)]),content:ve(()=>[ie("div",{class:U(g(l).e("collapse-tags"))},[(F(!0),K(ht,null,Qt(P.value.slice(he.maxCollapseTags),(He,yt)=>(F(),K("div",{key:yt,class:U(g(l).e("collapse-tag"))},[(F(),De(g(F1),{key:He.key,class:"in-tooltip",type:he.tagType,size:g(B),effect:he.tagEffect,hit:He.hitState,closable:He.closable,"disable-transitions":"",onClose:Te=>Ie(He)},{default:ve(()=>[ie("span",null,Ye(He.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),he.filterable&&!g(L)?Nt((F(),K("input",{key:0,"onUpdate:modelValue":se=>M.value=se,type:"text",class:U(g(l).e("search-input")),placeholder:g(ae)?"":g(R),onInput:se=>_e(M.value,se),onClick:xt(se=>le(!0),["stop"]),onKeydown:Hi(et,["delete"]),onCompositionstart:g(m),onCompositionupdate:g(m),onCompositionend:g(m),onFocus:tt,onBlur:ze},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[j5,M.value]]):Ae("v-if",!0)],2)):Ae("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[g(Nu),()=>le(!1),g(me)]])]),content:ve(()=>[Nt(ne(g(hQ),{ref_key:"cascaderPanelRef",ref:b,modelValue:g($),"onUpdate:modelValue":se=>Ji($)?$.value=se:null,options:he.options,props:r.props,border:!1,"render-label":he.$slots.default,onExpandChange:ee,onClose:se=>he.$nextTick(()=>le(!1))},{empty:ve(()=>[Ee(he.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[_i,!E.value]]),he.filterable?Nt((F(),De(g(Bc),{key:0,ref_key:"suggestionPanel",ref:w,tag:"ul",class:U(g(l).e("suggestion-panel")),"view-class":g(l).e("suggestion-list"),onKeydown:qe},{default:ve(()=>[D.value.length?(F(!0),K(ht,{key:0},Qt(D.value,se=>(F(),K("li",{key:se.uid,class:U([g(l).e("suggestion-item"),g(l).is("checked",se.checked)]),tabindex:-1,onClick:He=>Y(se)},[ie("span",null,Ye(se.text),1),se.checked?(F(),De(g(ut),{key:0},{default:ve(()=>[ne(g(Py))]),_:1})):Ae("v-if",!0)],10,["onClick"]))),128)):Ee(he.$slots,"empty",{key:1},()=>[ie("li",{class:U(g(l).e("empty-text"))},Ye(g(u)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[_i,E.value]]):Ae("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var zXe=Ze(FXe,[["__file","cascader.vue"]]);const VXe=Rt(zXe),UXe=je({checked:Boolean,disabled:Boolean,type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"}}),HXe={"update:checked":e=>Gi(e),[nr]:e=>Gi(e)},jXe=ce({name:"ElCheckTag"}),WXe=ce({...jXe,props:UXe,emits:HXe,setup(e,{emit:t}){const i=e,r=Ve("check-tag"),n=O(()=>i.disabled),a=O(()=>[r.b(),r.is("checked",i.checked),r.is("disabled",n.value),r.m(i.type||"primary")]),s=()=>{if(n.value)return;const o=!i.checked;t(nr,o),t("update:checked",o)};return(o,l)=>(F(),K("span",{class:U(g(a)),onClick:s},[Ee(o.$slots,"default")],2))}});var GXe=Ze(WXe,[["__file","check-tag.vue"]]);const $Xe=Rt(GXe),fQ=Symbol("rowContextKey"),ZXe=["start","center","end","space-around","space-between","space-evenly"],qXe=["top","middle","bottom"],YXe=je({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:ZXe,default:"start"},align:{type:String,values:qXe}}),KXe=ce({name:"ElRow"}),XXe=ce({...KXe,props:YXe,setup(e){const t=e,i=Ve("row"),r=O(()=>t.gutter);Yt(fQ,{gutter:r});const n=O(()=>{const s={};return t.gutter&&(s.marginRight=s.marginLeft=`-${t.gutter/2}px`),s}),a=O(()=>[i.b(),i.is(`justify-${t.justify}`,t.justify!=="start"),i.is(`align-${t.align}`,!!t.align)]);return(s,o)=>(F(),De(jt(s.tag),{class:U(g(a)),style:mt(g(n))},{default:ve(()=>[Ee(s.$slots,"default")]),_:3},8,["class","style"]))}});var QXe=Ze(XXe,[["__file","row.vue"]]);const JXe=Rt(QXe),eQe=je({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:be([Number,Object]),default:()=>Er({})},sm:{type:be([Number,Object]),default:()=>Er({})},md:{type:be([Number,Object]),default:()=>Er({})},lg:{type:be([Number,Object]),default:()=>Er({})},xl:{type:be([Number,Object]),default:()=>Er({})}}),tQe=ce({name:"ElCol"}),iQe=ce({...tQe,props:eQe,setup(e){const t=e,{gutter:i}=rt(fQ,{gutter:O(()=>0)}),r=Ve("col"),n=O(()=>{const s={};return i.value&&(s.paddingLeft=s.paddingRight=`${i.value/2}px`),s}),a=O(()=>{const s=[];return["span","offset","pull","push"].forEach(c=>{const u=t[c];gt(u)&&(c==="span"?s.push(r.b(`${t[c]}`)):u>0&&s.push(r.b(`${c}-${t[c]}`)))}),["xs","sm","md","lg","xl"].forEach(c=>{gt(t[c])?s.push(r.b(`${c}-${t[c]}`)):Ri(t[c])&&Object.entries(t[c]).forEach(([u,d])=>{s.push(u!=="span"?r.b(`${c}-${u}-${d}`):r.b(`${c}-${d}`))})}),i.value&&s.push(r.is("guttered")),[r.b(),s]});return(s,o)=>(F(),De(jt(s.tag),{class:U(g(a)),style:mt(g(n))},{default:ve(()=>[Ee(s.$slots,"default")]),_:3},8,["class","style"]))}});var rQe=Ze(iQe,[["__file","col.vue"]]);const nQe=Rt(rQe),mz=e=>gt(e)||Et(e)||ct(e),aQe=je({accordion:Boolean,modelValue:{type:be([Array,String,Number]),default:()=>Er([])}}),sQe={[Vt]:mz,[nr]:mz},pQ=Symbol("collapseContextKey"),oQe=(e,t)=>{const i=j(wa(e.modelValue)),r=a=>{i.value=a;const s=e.accordion?i.value[0]:i.value;t(Vt,s),t(nr,s)},n=a=>{if(e.accordion)r([i.value[0]===a?"":a]);else{const s=[...i.value],o=s.indexOf(a);o>-1?s.splice(o,1):s.push(a),r(s)}};return Ne(()=>e.modelValue,()=>i.value=wa(e.modelValue),{deep:!0}),Yt(pQ,{activeNames:i,handleItemClick:n}),{activeNames:i,setActiveNames:r}},lQe=()=>{const e=Ve("collapse");return{rootKls:O(()=>e.b())}},cQe=ce({name:"ElCollapse"}),uQe=ce({...cQe,props:aQe,emits:sQe,setup(e,{expose:t,emit:i}){const r=e,{activeNames:n,setActiveNames:a}=oQe(r,i),{rootKls:s}=lQe();return t({activeNames:n,setActiveNames:a}),(o,l)=>(F(),K("div",{class:U(g(s))},[Ee(o.$slots,"default")],2))}});var dQe=Ze(uQe,[["__file","collapse.vue"]]);const hQe=ce({name:"ElCollapseTransition"}),fQe=ce({...hQe,setup(e){const t=Ve("collapse-transition"),i=n=>{n.style.maxHeight="",n.style.overflow=n.dataset.oldOverflow,n.style.paddingTop=n.dataset.oldPaddingTop,n.style.paddingBottom=n.dataset.oldPaddingBottom},r={beforeEnter(n){n.dataset||(n.dataset={}),n.dataset.oldPaddingTop=n.style.paddingTop,n.dataset.oldPaddingBottom=n.style.paddingBottom,n.style.height&&(n.dataset.elExistsHeight=n.style.height),n.style.maxHeight=0,n.style.paddingTop=0,n.style.paddingBottom=0},enter(n){requestAnimationFrame(()=>{n.dataset.oldOverflow=n.style.overflow,n.dataset.elExistsHeight?n.style.maxHeight=n.dataset.elExistsHeight:n.scrollHeight!==0?n.style.maxHeight=`${n.scrollHeight}px`:n.style.maxHeight=0,n.style.paddingTop=n.dataset.oldPaddingTop,n.style.paddingBottom=n.dataset.oldPaddingBottom,n.style.overflow="hidden"})},afterEnter(n){n.style.maxHeight="",n.style.overflow=n.dataset.oldOverflow},enterCancelled(n){i(n)},beforeLeave(n){n.dataset||(n.dataset={}),n.dataset.oldPaddingTop=n.style.paddingTop,n.dataset.oldPaddingBottom=n.style.paddingBottom,n.dataset.oldOverflow=n.style.overflow,n.style.maxHeight=`${n.scrollHeight}px`,n.style.overflow="hidden"},leave(n){n.scrollHeight!==0&&(n.style.maxHeight=0,n.style.paddingTop=0,n.style.paddingBottom=0)},afterLeave(n){i(n)},leaveCancelled(n){i(n)}};return(n,a)=>(F(),De(Pn,$t({name:g(t).b()},Ete(r)),{default:ve(()=>[Ee(n.$slots,"default")]),_:3},16,["name"]))}});var pQe=Ze(fQe,[["__file","collapse-transition.vue"]]);const e3=Rt(pQe),mQe=je({title:{type:String,default:""},name:{type:be([String,Number]),default:void 0},icon:{type:zi,default:hs},disabled:Boolean}),vQe=e=>{const t=rt(pQ),{namespace:i}=Ve("collapse"),r=j(!1),n=j(!1),a=i8(),s=O(()=>a.current++),o=O(()=>{var h;return(h=e.name)!=null?h:`${i.value}-id-${a.prefix}-${g(s)}`}),l=O(()=>t==null?void 0:t.activeNames.value.includes(g(o)));return{focusing:r,id:s,isActive:l,handleFocus:()=>{setTimeout(()=>{n.value?n.value=!1:r.value=!0},50)},handleHeaderClick:()=>{e.disabled||(t==null||t.handleItemClick(g(o)),r.value=!1,n.value=!0)},handleEnterClick:()=>{t==null||t.handleItemClick(g(o))}}},gQe=(e,{focusing:t,isActive:i,id:r})=>{const n=Ve("collapse"),a=O(()=>[n.b("item"),n.is("active",g(i)),n.is("disabled",e.disabled)]),s=O(()=>[n.be("item","header"),n.is("active",g(i)),{focusing:g(t)&&!e.disabled}]),o=O(()=>[n.be("item","arrow"),n.is("active",g(i))]),l=O(()=>n.be("item","wrap")),c=O(()=>n.be("item","content")),u=O(()=>n.b(`content-${g(r)}`)),d=O(()=>n.b(`head-${g(r)}`));return{arrowKls:o,headKls:s,rootKls:a,itemWrapperKls:l,itemContentKls:c,scopedContentId:u,scopedHeadId:d}},yQe=ce({name:"ElCollapseItem"}),bQe=ce({...yQe,props:mQe,setup(e,{expose:t}){const i=e,{focusing:r,id:n,isActive:a,handleFocus:s,handleHeaderClick:o,handleEnterClick:l}=vQe(i),{arrowKls:c,headKls:u,rootKls:d,itemWrapperKls:h,itemContentKls:f,scopedContentId:p,scopedHeadId:m}=gQe(i,{focusing:r,isActive:a,id:n});return t({isActive:a}),(v,y)=>(F(),K("div",{class:U(g(d))},[ie("button",{id:g(m),class:U(g(u)),"aria-expanded":g(a),"aria-controls":g(p),"aria-describedby":g(p),tabindex:v.disabled?-1:0,type:"button",onClick:g(o),onKeydown:Hi(xt(g(l),["stop","prevent"]),["space","enter"]),onFocus:g(s),onBlur:x=>r.value=!1},[Ee(v.$slots,"title",{},()=>[Xt(Ye(v.title),1)]),Ee(v.$slots,"icon",{isActive:g(a)},()=>[ne(g(ut),{class:U(g(c))},{default:ve(()=>[(F(),De(jt(v.icon)))]),_:1},8,["class"])])],42,["id","aria-expanded","aria-controls","aria-describedby","tabindex","onClick","onKeydown","onFocus","onBlur"]),ne(g(e3),null,{default:ve(()=>[Nt(ie("div",{id:g(p),role:"region",class:U(g(h)),"aria-hidden":!g(a),"aria-labelledby":g(m)},[ie("div",{class:U(g(f))},[Ee(v.$slots,"default")],2)],10,["id","aria-hidden","aria-labelledby"]),[[_i,g(a)]])]),_:3})],2))}});var mQ=Ze(bQe,[["__file","collapse-item.vue"]]);const wQe=Rt(dQe,{CollapseItem:mQ}),xQe=Tr(mQ),_Qe=je({color:{type:be(Object),required:!0},vertical:{type:Boolean,default:!1}});let rE=!1;function z1(e,t){if(!si)return;const i=function(a){var s;(s=t.drag)==null||s.call(t,a)},r=function(a){var s;document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",r),document.removeEventListener("touchmove",i),document.removeEventListener("touchend",r),document.onselectstart=null,document.ondragstart=null,rE=!1,(s=t.end)==null||s.call(t,a)},n=function(a){var s;rE||(a.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",i),document.addEventListener("mouseup",r),document.addEventListener("touchmove",i),document.addEventListener("touchend",r),rE=!0,(s=t.start)==null||s.call(t,a))};e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!1})}const SQe=e=>{const t=Ut(),{t:i}=di(),r=Wi(),n=Wi(),a=O(()=>e.color.get("alpha")),s=O(()=>i("el.colorpicker.alphaLabel"));function o(d){var h;d.target!==r.value&&l(d),(h=r.value)==null||h.focus()}function l(d){if(!n.value||!r.value)return;const f=t.vnode.el.getBoundingClientRect(),{clientX:p,clientY:m}=ND(d);if(e.vertical){let v=m-f.top;v=Math.max(r.value.offsetHeight/2,v),v=Math.min(v,f.height-r.value.offsetHeight/2),e.color.set("alpha",Math.round((v-r.value.offsetHeight/2)/(f.height-r.value.offsetHeight)*100))}else{let v=p-f.left;v=Math.max(r.value.offsetWidth/2,v),v=Math.min(v,f.width-r.value.offsetWidth/2),e.color.set("alpha",Math.round((v-r.value.offsetWidth/2)/(f.width-r.value.offsetWidth)*100))}}function c(d){const{code:h,shiftKey:f}=d,p=f?10:1;switch(h){case at.left:case at.down:d.preventDefault(),d.stopPropagation(),u(-p);break;case at.right:case at.up:d.preventDefault(),d.stopPropagation(),u(p);break}}function u(d){let h=a.value+d;h=h<0?0:h>100?100:h,e.color.set("alpha",h)}return{thumb:r,bar:n,alpha:a,alphaLabel:s,handleDrag:l,handleClick:o,handleKeydown:c}},CQe=(e,{bar:t,thumb:i,handleDrag:r})=>{const n=Ut(),a=Ve("color-alpha-slider"),s=j(0),o=j(0),l=j();function c(){if(!i.value||e.vertical)return 0;const x=n.vnode.el,b=e.color.get("alpha");return x?Math.round(b*(x.offsetWidth-i.value.offsetWidth/2)/100):0}function u(){if(!i.value)return 0;const x=n.vnode.el;if(!e.vertical)return 0;const b=e.color.get("alpha");return x?Math.round(b*(x.offsetHeight-i.value.offsetHeight/2)/100):0}function d(){if(e.color&&e.color.value){const{r:x,g:b,b:w}=e.color.toRgb();return`linear-gradient(to right, rgba(${x}, ${b}, ${w}, 0) 0%, rgba(${x}, ${b}, ${w}, 1) 100%)`}return""}function h(){s.value=c(),o.value=u(),l.value=d()}Lt(()=>{if(!t.value||!i.value)return;const x={drag:b=>{r(b)},end:b=>{r(b)}};z1(t.value,x),z1(i.value,x),h()}),Ne(()=>e.color.get("alpha"),()=>h()),Ne(()=>e.color.value,()=>h());const f=O(()=>[a.b(),a.is("vertical",e.vertical)]),p=O(()=>a.e("bar")),m=O(()=>a.e("thumb")),v=O(()=>({background:l.value})),y=O(()=>({left:zr(s.value),top:zr(o.value)}));return{rootKls:f,barKls:p,barStyle:v,thumbKls:m,thumbStyle:y,update:h}},EQe="ElColorAlphaSlider",AQe=ce({name:EQe}),MQe=ce({...AQe,props:_Qe,setup(e,{expose:t}){const i=e,{alpha:r,alphaLabel:n,bar:a,thumb:s,handleDrag:o,handleClick:l,handleKeydown:c}=SQe(i),{rootKls:u,barKls:d,barStyle:h,thumbKls:f,thumbStyle:p,update:m}=CQe(i,{bar:a,thumb:s,handleDrag:o});return t({update:m,bar:a,thumb:s}),(v,y)=>(F(),K("div",{class:U(g(u))},[ie("div",{ref_key:"bar",ref:a,class:U(g(d)),style:mt(g(h)),onClick:g(l)},null,14,["onClick"]),ie("div",{ref_key:"thumb",ref:s,class:U(g(f)),style:mt(g(p)),"aria-label":g(n),"aria-valuenow":g(r),"aria-orientation":v.vertical?"vertical":"horizontal","aria-valuemin":"0","aria-valuemax":"100",role:"slider",tabindex:"0",onKeydown:g(c)},null,46,["aria-label","aria-valuenow","aria-orientation","onKeydown"])],2))}});var TQe=Ze(MQe,[["__file","alpha-slider.vue"]]);const PQe=ce({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const t=Ve("color-hue-slider"),i=Ut(),r=j(),n=j(),a=j(0),s=j(0),o=O(()=>e.color.get("hue"));Ne(()=>o.value,()=>{h()});function l(f){f.target!==r.value&&c(f)}function c(f){if(!n.value||!r.value)return;const m=i.vnode.el.getBoundingClientRect(),{clientX:v,clientY:y}=ND(f);let x;if(e.vertical){let b=y-m.top;b=Math.min(b,m.height-r.value.offsetHeight/2),b=Math.max(r.value.offsetHeight/2,b),x=Math.round((b-r.value.offsetHeight/2)/(m.height-r.value.offsetHeight)*360)}else{let b=v-m.left;b=Math.min(b,m.width-r.value.offsetWidth/2),b=Math.max(r.value.offsetWidth/2,b),x=Math.round((b-r.value.offsetWidth/2)/(m.width-r.value.offsetWidth)*360)}e.color.set("hue",x)}function u(){if(!r.value)return 0;const f=i.vnode.el;if(e.vertical)return 0;const p=e.color.get("hue");return f?Math.round(p*(f.offsetWidth-r.value.offsetWidth/2)/360):0}function d(){if(!r.value)return 0;const f=i.vnode.el;if(!e.vertical)return 0;const p=e.color.get("hue");return f?Math.round(p*(f.offsetHeight-r.value.offsetHeight/2)/360):0}function h(){a.value=u(),s.value=d()}return Lt(()=>{if(!n.value||!r.value)return;const f={drag:p=>{c(p)},end:p=>{c(p)}};z1(n.value,f),z1(r.value,f),h()}),{bar:n,thumb:r,thumbLeft:a,thumbTop:s,hueValue:o,handleClick:l,update:h,ns:t}}});function DQe(e,t,i,r,n,a){return F(),K("div",{class:U([e.ns.b(),e.ns.is("vertical",e.vertical)])},[ie("div",{ref:"bar",class:U(e.ns.e("bar")),onClick:e.handleClick},null,10,["onClick"]),ie("div",{ref:"thumb",class:U(e.ns.e("thumb")),style:mt({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}var IQe=Ze(PQe,[["render",DQe],["__file","hue-slider.vue"]]);const OQe=je({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:wn,popperClass:{type:String,default:""},tabindex:{type:[String,Number],default:0},teleported:Nn.teleported,predefine:{type:be(Array)},validateEvent:{type:Boolean,default:!0},...ha(["ariaLabel"])}),RQe={[Vt]:e=>Et(e)||mn(e),[nr]:e=>Et(e)||mn(e),activeChange:e=>Et(e)||mn(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent},vQ=Symbol("colorPickerContextKey"),vz=function(e,t,i){return[e,t*i/((e=(2-t)*i)<1?e:2-e)||0,e/2]},kQe=function(e){return Et(e)&&e.includes(".")&&Number.parseFloat(e)===1},LQe=function(e){return Et(e)&&e.includes("%")},Qm=function(e,t){kQe(e)&&(e="100%");const i=LQe(e);return e=Math.min(t,Math.max(0,Number.parseFloat(`${e}`))),i&&(e=Number.parseInt(`${e*t}`,10)/100),Math.abs(e-t)<1e-6?1:e%t/Number.parseFloat(t)},gz={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},w2=e=>{e=Math.min(Math.round(e),255);const t=Math.floor(e/16),i=e%16;return`${gz[t]||t}${gz[i]||i}`},yz=function({r:e,g:t,b:i}){return Number.isNaN(+e)||Number.isNaN(+t)||Number.isNaN(+i)?"":`#${w2(e)}${w2(t)}${w2(i)}`},nE={A:10,B:11,C:12,D:13,E:14,F:15},Yh=function(e){return e.length===2?(nE[e[0].toUpperCase()]||+e[0])*16+(nE[e[1].toUpperCase()]||+e[1]):nE[e[1].toUpperCase()]||+e[1]},BQe=function(e,t,i){t=t/100,i=i/100;let r=t;const n=Math.max(i,.01);i*=2,t*=i<=1?i:2-i,r*=n<=1?n:2-n;const a=(i+t)/2,s=i===0?2*r/(n+r):2*t/(i+t);return{h:e,s:s*100,v:a*100}},bz=(e,t,i)=>{e=Qm(e,255),t=Qm(t,255),i=Qm(i,255);const r=Math.max(e,t,i),n=Math.min(e,t,i);let a;const s=r,o=r-n,l=r===0?0:o/r;if(r===n)a=0;else{switch(r){case e:{a=(t-i)/o+(t<i?6:0);break}case t:{a=(i-e)/o+2;break}case i:{a=(e-t)/o+4;break}}a/=6}return{h:a*360,s:l*100,v:s*100}},J0=function(e,t,i){e=Qm(e,360)*6,t=Qm(t,100),i=Qm(i,100);const r=Math.floor(e),n=e-r,a=i*(1-t),s=i*(1-n*t),o=i*(1-(1-n)*t),l=r%6,c=[i,s,a,a,o,i][l],u=[o,i,i,s,a,a][l],d=[a,a,o,i,i,s][l];return{r:Math.round(c*255),g:Math.round(u*255),b:Math.round(d*255)}};class Zg{constructor(t={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const i in t)Ma(t,i)&&(this[i]=t[i]);t.value?this.fromString(t.value):this.doOnChange()}set(t,i){if(arguments.length===1&&typeof t=="object"){for(const r in t)Ma(t,r)&&this.set(r,t[r]);return}this[`_${t}`]=i,this.doOnChange()}get(t){return t==="alpha"?Math.floor(this[`_${t}`]):this[`_${t}`]}toRgb(){return J0(this._hue,this._saturation,this._value)}fromString(t){if(!t){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const i=(r,n,a)=>{this._hue=Math.max(0,Math.min(360,r)),this._saturation=Math.max(0,Math.min(100,n)),this._value=Math.max(0,Math.min(100,a)),this.doOnChange()};if(t.includes("hsl")){const r=t.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(n=>n!=="").map((n,a)=>a>2?Number.parseFloat(n):Number.parseInt(n,10));if(r.length===4?this._alpha=Number.parseFloat(r[3])*100:r.length===3&&(this._alpha=100),r.length>=3){const{h:n,s:a,v:s}=BQe(r[0],r[1],r[2]);i(n,a,s)}}else if(t.includes("hsv")){const r=t.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(n=>n!=="").map((n,a)=>a>2?Number.parseFloat(n):Number.parseInt(n,10));r.length===4?this._alpha=Number.parseFloat(r[3])*100:r.length===3&&(this._alpha=100),r.length>=3&&i(r[0],r[1],r[2])}else if(t.includes("rgb")){const r=t.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(n=>n!=="").map((n,a)=>a>2?Number.parseFloat(n):Number.parseInt(n,10));if(r.length===4?this._alpha=Number.parseFloat(r[3])*100:r.length===3&&(this._alpha=100),r.length>=3){const{h:n,s:a,v:s}=bz(r[0],r[1],r[2]);i(n,a,s)}}else if(t.includes("#")){const r=t.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(r))return;let n,a,s;r.length===3?(n=Yh(r[0]+r[0]),a=Yh(r[1]+r[1]),s=Yh(r[2]+r[2])):(r.length===6||r.length===8)&&(n=Yh(r.slice(0,2)),a=Yh(r.slice(2,4)),s=Yh(r.slice(4,6))),r.length===8?this._alpha=Yh(r.slice(6))/255*100:(r.length===3||r.length===6)&&(this._alpha=100);const{h:o,s:l,v:c}=bz(n,a,s);i(o,l,c)}}compare(t){return Math.abs(t._hue-this._hue)<2&&Math.abs(t._saturation-this._saturation)<1&&Math.abs(t._value-this._value)<1&&Math.abs(t._alpha-this._alpha)<1}doOnChange(){const{_hue:t,_saturation:i,_value:r,_alpha:n,format:a}=this;if(this.enableAlpha)switch(a){case"hsl":{const s=vz(t,i/100,r/100);this.value=`hsla(${t}, ${Math.round(s[1]*100)}%, ${Math.round(s[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${t}, ${Math.round(i)}%, ${Math.round(r)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${yz(J0(t,i,r))}${w2(n*255/100)}`;break}default:{const{r:s,g:o,b:l}=J0(t,i,r);this.value=`rgba(${s}, ${o}, ${l}, ${this.get("alpha")/100})`}}else switch(a){case"hsl":{const s=vz(t,i/100,r/100);this.value=`hsl(${t}, ${Math.round(s[1]*100)}%, ${Math.round(s[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${t}, ${Math.round(i)}%, ${Math.round(r)}%)`;break}case"rgb":{const{r:s,g:o,b:l}=J0(t,i,r);this.value=`rgb(${s}, ${o}, ${l})`;break}default:this.value=yz(J0(t,i,r))}}}const NQe=ce({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(e){const t=Ve("color-predefine"),{currentColor:i}=rt(vQ),r=j(a(e.colors,e.color));Ne(()=>i.value,s=>{const o=new Zg;o.fromString(s),r.value.forEach(l=>{l.selected=o.compare(l)})}),Ca(()=>{r.value=a(e.colors,e.color)});function n(s){e.color.fromString(e.colors[s])}function a(s,o){return s.map(l=>{const c=new Zg;return c.enableAlpha=e.enableAlpha,c.format="rgba",c.fromString(l),c.selected=c.value===o.value,c})}return{rgbaColors:r,handleSelect:n,ns:t}}});function FQe(e,t,i,r,n,a){return F(),K("div",{class:U(e.ns.b())},[ie("div",{class:U(e.ns.e("colors"))},[(F(!0),K(ht,null,Qt(e.rgbaColors,(s,o)=>(F(),K("div",{key:e.colors[o],class:U([e.ns.e("color-selector"),e.ns.is("alpha",s._alpha<100),{selected:s.selected}]),onClick:l=>e.handleSelect(o)},[ie("div",{style:mt({backgroundColor:s.value})},null,4)],10,["onClick"]))),128))],2)],2)}var zQe=Ze(NQe,[["render",FQe],["__file","predefine.vue"]]);const VQe=ce({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const t=Ve("color-svpanel"),i=Ut(),r=j(0),n=j(0),a=j("hsl(0, 100%, 50%)"),s=O(()=>{const c=e.color.get("hue"),u=e.color.get("value");return{hue:c,value:u}});function o(){const c=e.color.get("saturation"),u=e.color.get("value"),d=i.vnode.el,{clientWidth:h,clientHeight:f}=d;n.value=c*h/100,r.value=(100-u)*f/100,a.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function l(c){const d=i.vnode.el.getBoundingClientRect(),{clientX:h,clientY:f}=ND(c);let p=h-d.left,m=f-d.top;p=Math.max(0,p),p=Math.min(p,d.width),m=Math.max(0,m),m=Math.min(m,d.height),n.value=p,r.value=m,e.color.set({saturation:p/d.width*100,value:100-m/d.height*100})}return Ne(()=>s.value,()=>{o()}),Lt(()=>{z1(i.vnode.el,{drag:c=>{l(c)},end:c=>{l(c)}}),o()}),{cursorTop:r,cursorLeft:n,background:a,colorValue:s,handleDrag:l,update:o,ns:t}}});function UQe(e,t,i,r,n,a){return F(),K("div",{class:U(e.ns.b()),style:mt({backgroundColor:e.background})},[ie("div",{class:U(e.ns.e("white"))},null,2),ie("div",{class:U(e.ns.e("black"))},null,2),ie("div",{class:U(e.ns.e("cursor")),style:mt({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},[ie("div")],6)],6)}var HQe=Ze(VQe,[["render",UQe],["__file","sv-panel.vue"]]);const jQe=ce({name:"ElColorPicker"}),WQe=ce({...jQe,props:OQe,emits:RQe,setup(e,{expose:t,emit:i}){const r=e,{t:n}=di(),a=Ve("color"),{formItem:s}=Ya(),o=on(),l=qa(),{inputId:c,isLabeledByFormItem:u}=kl(r,{formItemContext:s}),d=j(),h=j(),f=j(),p=j(),m=j(),v=j(),{isFocused:y,handleFocus:x,handleBlur:b}=mp(m,{beforeFocus(){return l.value},beforeBlur(Q){var pe;return(pe=p.value)==null?void 0:pe.isFocusInsideContent(Q)},afterBlur(){L(!1),B()}});let w=!0;const S=bi(new Zg({enableAlpha:r.showAlpha,format:r.colorFormat||"",value:r.modelValue})),_=j(!1),E=j(!1),C=j(""),A=O(()=>!r.modelValue&&!E.value?"transparent":k(S,r.showAlpha)),M=O(()=>!r.modelValue&&!E.value?"":S.value),T=O(()=>u.value?void 0:r.ariaLabel||n("el.colorpicker.defaultLabel")),P=O(()=>u.value?s==null?void 0:s.labelId:void 0),D=O(()=>[a.b("picker"),a.is("disabled",l.value),a.bm("picker",o.value),a.is("focused",y.value)]);function k(Q,pe){if(!(Q instanceof Zg))throw new TypeError("color should be instance of _color Class");const{r:me,g:le,b:Z}=Q.toRgb();return pe?`rgba(${me}, ${le}, ${Z}, ${Q.get("alpha")/100})`:`rgb(${me}, ${le}, ${Z})`}function L(Q){_.value=Q}const R=gs(L,100,{leading:!0});function N(){l.value||L(!0)}function I(){R(!1),B()}function B(){ft(()=>{r.modelValue?S.fromString(r.modelValue):(S.value="",ft(()=>{E.value=!1}))})}function z(){l.value||R(!_.value)}function V(){S.fromString(C.value)}function W(){const Q=S.value;i(Vt,Q),i("change",Q),r.validateEvent&&(s==null||s.validate("change").catch(pe=>void 0)),R(!1),ft(()=>{const pe=new Zg({enableAlpha:r.showAlpha,format:r.colorFormat||"",value:r.modelValue});S.compare(pe)||B()})}function G(){R(!1),i(Vt,null),i("change",null),r.modelValue!==null&&r.validateEvent&&(s==null||s.validate("change").catch(Q=>void 0)),B()}function q(){_.value&&(I(),y.value&&$())}function ae(Q){Q.preventDefault(),Q.stopPropagation(),L(!1),B()}function J(Q){switch(Q.code){case at.enter:case at.numpadEnter:case at.space:Q.preventDefault(),Q.stopPropagation(),N(),v.value.focus();break;case at.esc:ae(Q);break}}function $(){m.value.focus()}function te(){m.value.blur()}return Lt(()=>{r.modelValue&&(C.value=M.value)}),Ne(()=>r.modelValue,Q=>{Q?Q&&Q!==S.value&&(w=!1,S.fromString(Q)):E.value=!1}),Ne(()=>[r.colorFormat,r.showAlpha],()=>{S.enableAlpha=r.showAlpha,S.format=r.colorFormat||S.format,S.doOnChange(),i(Vt,S.value)}),Ne(()=>M.value,Q=>{C.value=Q,w&&i("activeChange",Q),w=!0}),Ne(()=>S.value,()=>{!r.modelValue&&!E.value&&(E.value=!0)}),Ne(()=>_.value,()=>{ft(()=>{var Q,pe,me;(Q=d.value)==null||Q.update(),(pe=h.value)==null||pe.update(),(me=f.value)==null||me.update()})}),Yt(vQ,{currentColor:M}),t({color:S,show:N,hide:I,focus:$,blur:te}),(Q,pe)=>(F(),De(g(Ta),{ref_key:"popper",ref:p,visible:_.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[g(a).be("picker","panel"),g(a).b("dropdown"),Q.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:Q.teleported,transition:`${g(a).namespace.value}-zoom-in-top`,persistent:"",onHide:me=>L(!1)},{content:ve(()=>[Nt((F(),K("div",{onKeydown:Hi(ae,["esc"])},[ie("div",{class:U(g(a).be("dropdown","main-wrapper"))},[ne(IQe,{ref_key:"hue",ref:d,class:"hue-slider",color:g(S),vertical:""},null,8,["color"]),ne(HQe,{ref_key:"sv",ref:h,color:g(S)},null,8,["color"])],2),Q.showAlpha?(F(),De(TQe,{key:0,ref_key:"alpha",ref:f,color:g(S)},null,8,["color"])):Ae("v-if",!0),Q.predefine?(F(),De(zQe,{key:1,ref:"predefine","enable-alpha":Q.showAlpha,color:g(S),colors:Q.predefine},null,8,["enable-alpha","color","colors"])):Ae("v-if",!0),ie("div",{class:U(g(a).be("dropdown","btns"))},[ie("span",{class:U(g(a).be("dropdown","value"))},[ne(g(Ha),{ref_key:"inputRef",ref:v,modelValue:C.value,"onUpdate:modelValue":me=>C.value=me,"validate-event":!1,size:"small",onKeyup:Hi(V,["enter"]),onBlur:V},null,8,["modelValue","onUpdate:modelValue","onKeyup"])],2),ne(g(Wn),{class:U(g(a).be("dropdown","link-btn")),text:"",size:"small",onClick:G},{default:ve(()=>[Xt(Ye(g(n)("el.colorpicker.clear")),1)]),_:1},8,["class"]),ne(g(Wn),{plain:"",size:"small",class:U(g(a).be("dropdown","btn")),onClick:W},{default:ve(()=>[Xt(Ye(g(n)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,["onKeydown"])),[[g(Nu),q]])]),default:ve(()=>[ie("div",$t({id:g(c),ref_key:"triggerRef",ref:m},Q.$attrs,{class:g(D),role:"button","aria-label":g(T),"aria-labelledby":g(P),"aria-description":g(n)("el.colorpicker.description",{color:Q.modelValue||""}),"aria-disabled":g(l),tabindex:g(l)?-1:Q.tabindex,onKeydown:J,onFocus:g(x),onBlur:g(b)}),[g(l)?(F(),K("div",{key:0,class:U(g(a).be("picker","mask"))},null,2)):Ae("v-if",!0),ie("div",{class:U(g(a).be("picker","trigger")),onClick:z},[ie("span",{class:U([g(a).be("picker","color"),g(a).is("alpha",Q.showAlpha)])},[ie("span",{class:U(g(a).be("picker","color-inner")),style:mt({backgroundColor:g(A)})},[Nt(ne(g(ut),{class:U([g(a).be("picker","icon"),g(a).is("icon-arrow-down")])},{default:ve(()=>[ne(g(Ku))]),_:1},8,["class"]),[[_i,Q.modelValue||E.value]]),Nt(ne(g(ut),{class:U([g(a).be("picker","empty"),g(a).is("icon-close")])},{default:ve(()=>[ne(g(Ml))]),_:1},8,["class"]),[[_i,!Q.modelValue&&!E.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","teleported","transition","onHide"]))}});var GQe=Ze(WQe,[["__file","color-picker.vue"]]);const $Qe=Rt(GQe),ZQe=ce({name:"ElContainer"}),qQe=ce({...ZQe,props:{direction:{type:String}},setup(e){const t=e,i=In(),r=Ve("container"),n=O(()=>t.direction==="vertical"?!0:t.direction==="horizontal"?!1:i&&i.default?i.default().some(s=>{const o=s.type.name;return o==="ElHeader"||o==="ElFooter"}):!1);return(a,s)=>(F(),K("section",{class:U([g(r).b(),g(r).is("vertical",g(n))])},[Ee(a.$slots,"default")],2))}});var YQe=Ze(qQe,[["__file","container.vue"]]);const KQe=ce({name:"ElAside"}),XQe=ce({...KQe,props:{width:{type:String,default:null}},setup(e){const t=e,i=Ve("aside"),r=O(()=>t.width?i.cssVarBlock({width:t.width}):{});return(n,a)=>(F(),K("aside",{class:U(g(i).b()),style:mt(g(r))},[Ee(n.$slots,"default")],6))}});var gQ=Ze(XQe,[["__file","aside.vue"]]);const QQe=ce({name:"ElFooter"}),JQe=ce({...QQe,props:{height:{type:String,default:null}},setup(e){const t=e,i=Ve("footer"),r=O(()=>t.height?i.cssVarBlock({height:t.height}):{});return(n,a)=>(F(),K("footer",{class:U(g(i).b()),style:mt(g(r))},[Ee(n.$slots,"default")],6))}});var yQ=Ze(JQe,[["__file","footer.vue"]]);const eJe=ce({name:"ElHeader"}),tJe=ce({...eJe,props:{height:{type:String,default:null}},setup(e){const t=e,i=Ve("header"),r=O(()=>t.height?i.cssVarBlock({height:t.height}):{});return(n,a)=>(F(),K("header",{class:U(g(i).b()),style:mt(g(r))},[Ee(n.$slots,"default")],6))}});var bQ=Ze(tJe,[["__file","header.vue"]]);const iJe=ce({name:"ElMain"}),rJe=ce({...iJe,setup(e){const t=Ve("main");return(i,r)=>(F(),K("main",{class:U(g(t).b())},[Ee(i.$slots,"default")],2))}});var wQ=Ze(rJe,[["__file","main.vue"]]);const nJe=Rt(YQe,{Aside:gQ,Footer:yQ,Header:bQ,Main:wQ}),aJe=Tr(gQ),sJe=Tr(yQ),oJe=Tr(bQ),lJe=Tr(wQ);var xQ={exports:{}};(function(e,t){(function(i,r){e.exports=r()})(Ju,function(){return function(i,r){var n=r.prototype,a=n.format;n.format=function(s){var o=this,l=this.$locale();if(!this.isValid())return a.bind(this)(s);var c=this.$utils(),u=(s||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(d){switch(d){case"Q":return Math.ceil((o.$M+1)/3);case"Do":return l.ordinal(o.$D);case"gggg":return o.weekYear();case"GGGG":return o.isoWeekYear();case"wo":return l.ordinal(o.week(),"W");case"w":case"ww":return c.s(o.week(),d==="w"?1:2,"0");case"W":case"WW":return c.s(o.isoWeek(),d==="W"?1:2,"0");case"k":case"kk":return c.s(String(o.$H===0?24:o.$H),d==="k"?1:2,"0");case"X":return Math.floor(o.$d.getTime()/1e3);case"x":return o.$d.getTime();case"z":return"["+o.offsetName()+"]";case"zzz":return"["+o.offsetName("long")+"]";default:return d}});return a.bind(this)(u)}}})})(xQ);var cJe=xQ.exports,_Q={exports:{}};(function(e,t){(function(i,r){e.exports=r()})(Ju,function(){var i="week",r="year";return function(n,a,s){var o=a.prototype;o.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var c=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var u=s(this).startOf(r).add(1,r).date(c),d=s(this).endOf(i);if(u.isBefore(d))return 1}var h=s(this).startOf(r).date(c).startOf(i).subtract(1,"millisecond"),f=this.diff(h,i,!0);return f<0?s(this).startOf("week").week():Math.ceil(f)},o.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})})(_Q);var uJe=_Q.exports,SQ={exports:{}};(function(e,t){(function(i,r){e.exports=r()})(Ju,function(){return function(i,r){r.prototype.weekYear=function(){var n=this.month(),a=this.week(),s=this.year();return a===1&&n===11?s+1:n===0&&a>=52?s-1:s}}})})(SQ);var dJe=SQ.exports,CQ={exports:{}};(function(e,t){(function(i,r){e.exports=r()})(Ju,function(){return function(i,r,n){r.prototype.dayOfYear=function(a){var s=Math.round((n(this).startOf("day")-n(this).startOf("year"))/864e5)+1;return a==null?s:this.add(a-s,"day")}}})})(CQ);var hJe=CQ.exports,EQ={exports:{}};(function(e,t){(function(i,r){e.exports=r()})(Ju,function(){return function(i,r){r.prototype.isSameOrAfter=function(n,a){return this.isSame(n,a)||this.isAfter(n,a)}}})})(EQ);var fJe=EQ.exports,AQ={exports:{}};(function(e,t){(function(i,r){e.exports=r()})(Ju,function(){return function(i,r){r.prototype.isSameOrBefore=function(n,a){return this.isSame(n,a)||this.isBefore(n,a)}}})})(AQ);var pJe=AQ.exports;const t3=Symbol(),mJe=je({...p8,type:{type:be(String),default:"date"}}),vJe=["date","dates","year","years","month","months","week","range"],v8=je({disabledDate:{type:be(Function)},date:{type:be(Object),required:!0},minDate:{type:be(Object)},maxDate:{type:be(Object)},parsedValue:{type:be([Object,Array])},rangeState:{type:be(Object),default:()=>({endDate:null,selecting:!1})}}),MQ=je({type:{type:be(String),required:!0,values:Nje},dateFormat:String,timeFormat:String,showNow:{type:Boolean,default:!0}}),g8=je({unlinkPanels:Boolean,parsedValue:{type:be(Array)}}),y8=e=>({type:String,values:vJe,default:e}),gJe=je({...MQ,parsedValue:{type:be([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),Ov=e=>{if(!ct(e))return!1;const[t,i]=e;return Dt.isDayjs(t)&&Dt.isDayjs(i)&&t.isSameOrBefore(i)},b8=(e,{lang:t,unit:i,unlinkPanels:r})=>{let n;if(ct(e)){let[a,s]=e.map(o=>Dt(o).locale(t));return r||(s=a.add(1,i)),[a,s]}else e?n=Dt(e):n=Dt();return n=n.locale(t),[n,n.add(1,i)]},yJe=(e,t,{columnIndexOffset:i,startDate:r,nextEndDate:n,now:a,unit:s,relativeDateGetter:o,setCellMetadata:l,setRowMetadata:c})=>{for(let u=0;u<e.row;u++){const d=t[u];for(let h=0;h<e.column;h++){let f=d[h+i];f||(f={row:u,column:h,type:"normal",inRange:!1,start:!1,end:!1});const p=u*e.column+h,m=o(p);f.dayjs=m,f.date=m.toDate(),f.timestamp=m.valueOf(),f.type="normal",f.inRange=!!(r&&m.isSameOrAfter(r,s)&&n&&m.isSameOrBefore(n,s))||!!(r&&m.isSameOrBefore(r,s)&&n&&m.isSameOrAfter(n,s)),r!=null&&r.isSameOrAfter(n)?(f.start=!!n&&m.isSame(n,s),f.end=r&&m.isSame(r,s)):(f.start=!!r&&m.isSame(r,s),f.end=!!n&&m.isSame(n,s)),m.isSame(a,s)&&(f.type="today"),l==null||l(f,{rowIndex:u,columnIndex:h}),d[h+i]=f}c==null||c(d)}},f_=(e,t,i)=>{const r=Dt().locale(i).startOf("month").month(t).year(e),n=r.daysInMonth();return ih(n).map(a=>r.add(a,"day").toDate())},V1=(e,t,i,r)=>{const n=Dt().year(e).month(t).startOf("month"),a=f_(e,t,i).find(s=>!(r!=null&&r(s)));return a?Dt(a).locale(i):n.locale(i)},$T=(e,t,i)=>{const r=e.year();if(!(i!=null&&i(e.toDate())))return e.locale(t);const n=e.month();if(!f_(r,n,t).every(i))return V1(r,n,t,i);for(let a=0;a<12;a++)if(!f_(r,a,t).every(i))return V1(r,a,t,i);return e},bJe=je({...v8,cellClassName:{type:be(Function)},showWeekNumber:Boolean,selectionMode:y8("date")}),wJe=["changerange","pick","select"],ZT=(e="")=>["normal","today"].includes(e),xJe=(e,t)=>{const{lang:i}=di(),r=j(),n=j(),a=j(),s=j(),o=j([[],[],[],[],[],[]]);let l=!1;const c=e.date.$locale().weekStart||7,u=e.date.locale("en").localeData().weekdaysShort().map(B=>B.toLowerCase()),d=O(()=>c>3?7-c:-c),h=O(()=>{const B=e.date.startOf("month");return B.subtract(B.day()||7,"day")}),f=O(()=>u.concat(u).slice(c,c+7)),p=O(()=>qD(g(w)).some(B=>B.isCurrent)),m=O(()=>{const B=e.date.startOf("month"),z=B.day()||7,V=B.daysInMonth(),W=B.subtract(1,"month").daysInMonth();return{startOfMonthDay:z,dateCountOfMonth:V,dateCountOfLastMonth:W}}),v=O(()=>e.selectionMode==="dates"?cs(e.parsedValue):[]),y=(B,{count:z,rowIndex:V,columnIndex:W})=>{const{startOfMonthDay:G,dateCountOfMonth:q,dateCountOfLastMonth:ae}=g(m),J=g(d);if(V>=0&&V<=1){const $=G+J<0?7+G+J:G+J;if(W+V*7>=$)return B.text=z,!0;B.text=ae-($-W%7)+1+V*7,B.type="prev-month"}else return z<=q?B.text=z:(B.text=z-q,B.type="next-month"),!0;return!1},x=(B,{columnIndex:z,rowIndex:V},W)=>{const{disabledDate:G,cellClassName:q}=e,ae=g(v),J=y(B,{count:W,rowIndex:V,columnIndex:z}),$=B.dayjs.toDate();return B.selected=ae.find(te=>te.isSame(B.dayjs,"day")),B.isSelected=!!B.selected,B.isCurrent=_(B),B.disabled=G==null?void 0:G($),B.customClass=q==null?void 0:q($),J},b=B=>{if(e.selectionMode==="week"){const[z,V]=e.showWeekNumber?[1,7]:[0,6],W=I(B[z+1]);B[z].inRange=W,B[z].start=W,B[V].inRange=W,B[V].end=W}},w=O(()=>{const{minDate:B,maxDate:z,rangeState:V,showWeekNumber:W}=e,G=g(d),q=g(o),ae="day";let J=1;if(W)for(let $=0;$<6;$++)q[$][0]||(q[$][0]={type:"week",text:g(h).add($*7+1,ae).week()});return yJe({row:6,column:7},q,{startDate:B,columnIndexOffset:W?1:0,nextEndDate:V.endDate||z||V.selecting&&B||null,now:Dt().locale(g(i)).startOf(ae),unit:ae,relativeDateGetter:$=>g(h).add($-G,ae),setCellMetadata:(...$)=>{x(...$,J)&&(J+=1)},setRowMetadata:b}),q});Ne(()=>e.date,async()=>{var B;(B=g(r))!=null&&B.contains(document.activeElement)&&(await ft(),await S())});const S=async()=>{var B;return(B=g(n))==null?void 0:B.focus()},_=B=>e.selectionMode==="date"&&ZT(B.type)&&E(B,e.parsedValue),E=(B,z)=>z?Dt(z).locale(g(i)).isSame(e.date.date(Number(B.text)),"day"):!1,C=(B,z)=>{const V=B*7+(z-(e.showWeekNumber?1:0))-g(d);return g(h).add(V,"day")},A=B=>{var z;if(!e.rangeState.selecting)return;let V=B.target;if(V.tagName==="SPAN"&&(V=(z=V.parentNode)==null?void 0:z.parentNode),V.tagName==="DIV"&&(V=V.parentNode),V.tagName!=="TD")return;const W=V.parentNode.rowIndex-1,G=V.cellIndex;g(w)[W][G].disabled||(W!==g(a)||G!==g(s))&&(a.value=W,s.value=G,t("changerange",{selecting:!0,endDate:C(W,G)}))},M=B=>!g(p)&&(B==null?void 0:B.text)===1&&B.type==="normal"||B.isCurrent,T=B=>{l||g(p)||e.selectionMode!=="date"||N(B,!0)},P=B=>{B.target.closest("td")&&(l=!0)},D=B=>{B.target.closest("td")&&(l=!1)},k=B=>{!e.rangeState.selecting||!e.minDate?(t("pick",{minDate:B,maxDate:null}),t("select",!0)):(B>=e.minDate?t("pick",{minDate:e.minDate,maxDate:B}):t("pick",{minDate:B,maxDate:e.minDate}),t("select",!1))},L=B=>{const z=B.week(),V=`${B.year()}w${z}`;t("pick",{year:B.year(),week:z,value:V,date:B.startOf("week")})},R=(B,z)=>{const V=z?cs(e.parsedValue).filter(W=>(W==null?void 0:W.valueOf())!==B.valueOf()):cs(e.parsedValue).concat([B]);t("pick",V)},N=(B,z=!1)=>{const V=B.target.closest("td");if(!V)return;const W=V.parentNode.rowIndex-1,G=V.cellIndex,q=g(w)[W][G];if(q.disabled||q.type==="week")return;const ae=C(W,G);switch(e.selectionMode){case"range":{k(ae);break}case"date":{t("pick",ae,z);break}case"week":{L(ae);break}case"dates":{R(ae,!!q.selected);break}}},I=B=>{if(e.selectionMode!=="week")return!1;let z=e.date.startOf("day");if(B.type==="prev-month"&&(z=z.subtract(1,"month")),B.type==="next-month"&&(z=z.add(1,"month")),z=z.date(Number.parseInt(B.text,10)),e.parsedValue&&!ct(e.parsedValue)){const V=(e.parsedValue.day()-c+7)%7-1;return e.parsedValue.subtract(V,"day").isSame(z,"day")}return!1};return{WEEKS:f,rows:w,tbodyRef:r,currentCellRef:n,focus:S,isCurrent:_,isWeekActive:I,isSelectedCell:M,handlePickDate:N,handleMouseUp:D,handleMouseDown:P,handleMouseMove:A,handleFocus:T}},_Je=(e,{isCurrent:t,isWeekActive:i})=>{const r=Ve("date-table"),{t:n}=di(),a=O(()=>[r.b(),{"is-week-mode":e.selectionMode==="week"}]),s=O(()=>n("el.datepicker.dateTablePrompt")),o=O(()=>n("el.datepicker.week"));return{tableKls:a,tableLabel:s,weekLabel:o,getCellClasses:u=>{const d=[];return ZT(u.type)&&!u.disabled?(d.push("available"),u.type==="today"&&d.push("today")):d.push(u.type),t(u)&&d.push("current"),u.inRange&&(ZT(u.type)||e.selectionMode==="week")&&(d.push("in-range"),u.start&&d.push("start-date"),u.end&&d.push("end-date")),u.disabled&&d.push("disabled"),u.selected&&d.push("selected"),u.customClass&&d.push(u.customClass),d.join(" ")},getRowKls:u=>[r.e("row"),{current:i(u)}],t:n}},SJe=je({cell:{type:be(Object)}});var w8=ce({name:"ElDatePickerCell",props:SJe,setup(e){const t=Ve("date-table-cell"),{slots:i}=rt(t3);return()=>{const{cell:r}=e;return Ee(i,"default",{...r},()=>{var n;return[ne("div",{class:t.b()},[ne("span",{class:t.e("text")},[(n=r==null?void 0:r.renderText)!=null?n:r==null?void 0:r.text])])]})}}});const CJe=ce({__name:"basic-date-table",props:bJe,emits:wJe,setup(e,{expose:t,emit:i}){const r=e,{WEEKS:n,rows:a,tbodyRef:s,currentCellRef:o,focus:l,isCurrent:c,isWeekActive:u,isSelectedCell:d,handlePickDate:h,handleMouseUp:f,handleMouseDown:p,handleMouseMove:m,handleFocus:v}=xJe(r,i),{tableLabel:y,tableKls:x,weekLabel:b,getCellClasses:w,getRowKls:S,t:_}=_Je(r,{isCurrent:c,isWeekActive:u});return t({focus:l}),(E,C)=>(F(),K("table",{"aria-label":g(y),class:U(g(x)),cellspacing:"0",cellpadding:"0",role:"grid",onClick:g(h),onMousemove:g(m),onMousedown:xt(g(p),["prevent"]),onMouseup:g(f)},[ie("tbody",{ref_key:"tbodyRef",ref:s},[ie("tr",null,[E.showWeekNumber?(F(),K("th",{key:0,scope:"col"},Ye(g(b)),1)):Ae("v-if",!0),(F(!0),K(ht,null,Qt(g(n),(A,M)=>(F(),K("th",{key:M,"aria-label":g(_)("el.datepicker.weeksFull."+A),scope:"col"},Ye(g(_)("el.datepicker.weeks."+A)),9,["aria-label"]))),128))]),(F(!0),K(ht,null,Qt(g(a),(A,M)=>(F(),K("tr",{key:M,class:U(g(S)(A[1]))},[(F(!0),K(ht,null,Qt(A,(T,P)=>(F(),K("td",{key:`${M}.${P}`,ref_for:!0,ref:D=>g(d)(T)&&(o.value=D),class:U(g(w)(T)),"aria-current":T.isCurrent?"date":void 0,"aria-selected":T.isCurrent,tabindex:g(d)(T)?0:-1,onFocus:g(v)},[ne(g(w8),{cell:T},null,8,["cell"])],42,["aria-current","aria-selected","tabindex","onFocus"]))),128))],2))),128))],512)],42,["aria-label","onClick","onMousemove","onMousedown","onMouseup"]))}});var qT=Ze(CJe,[["__file","basic-date-table.vue"]]);const EJe=je({...v8,selectionMode:y8("month")}),AJe=ce({__name:"basic-month-table",props:EJe,emits:["changerange","pick","select"],setup(e,{expose:t,emit:i}){const r=e,n=Ve("month-table"),{t:a,lang:s}=di(),o=j(),l=j(),c=j(r.date.locale("en").localeData().monthsShort().map(b=>b.toLowerCase())),u=j([[],[],[]]),d=j(),h=j(),f=O(()=>{var b,w;const S=u.value,_=Dt().locale(s.value).startOf("month");for(let E=0;E<3;E++){const C=S[E];for(let A=0;A<4;A++){const M=C[A]||(C[A]={row:E,column:A,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});M.type="normal";const T=E*4+A,P=r.date.startOf("year").month(T),D=r.rangeState.endDate||r.maxDate||r.rangeState.selecting&&r.minDate||null;M.inRange=!!(r.minDate&&P.isSameOrAfter(r.minDate,"month")&&D&&P.isSameOrBefore(D,"month"))||!!(r.minDate&&P.isSameOrBefore(r.minDate,"month")&&D&&P.isSameOrAfter(D,"month")),(b=r.minDate)!=null&&b.isSameOrAfter(D)?(M.start=!!(D&&P.isSame(D,"month")),M.end=r.minDate&&P.isSame(r.minDate,"month")):(M.start=!!(r.minDate&&P.isSame(r.minDate,"month")),M.end=!!(D&&P.isSame(D,"month"))),_.isSame(P)&&(M.type="today"),M.text=T,M.disabled=((w=r.disabledDate)==null?void 0:w.call(r,P.toDate()))||!1}}return S}),p=()=>{var b;(b=l.value)==null||b.focus()},m=b=>{const w={},S=r.date.year(),_=new Date,E=b.text;return w.disabled=r.disabledDate?f_(S,E,s.value).every(r.disabledDate):!1,w.current=cs(r.parsedValue).findIndex(C=>Dt.isDayjs(C)&&C.year()===S&&C.month()===E)>=0,w.today=_.getFullYear()===S&&_.getMonth()===E,b.inRange&&(w["in-range"]=!0,b.start&&(w["start-date"]=!0),b.end&&(w["end-date"]=!0)),w},v=b=>{const w=r.date.year(),S=b.text;return cs(r.date).findIndex(_=>_.year()===w&&_.month()===S)>=0},y=b=>{var w;if(!r.rangeState.selecting)return;let S=b.target;if(S.tagName==="SPAN"&&(S=(w=S.parentNode)==null?void 0:w.parentNode),S.tagName==="DIV"&&(S=S.parentNode),S.tagName!=="TD")return;const _=S.parentNode.rowIndex,E=S.cellIndex;f.value[_][E].disabled||(_!==d.value||E!==h.value)&&(d.value=_,h.value=E,i("changerange",{selecting:!0,endDate:r.date.startOf("year").month(_*4+E)}))},x=b=>{var w;const S=(w=b.target)==null?void 0:w.closest("td");if((S==null?void 0:S.tagName)!=="TD"||Rs(S,"disabled"))return;const _=S.cellIndex,C=S.parentNode.rowIndex*4+_,A=r.date.startOf("year").month(C);if(r.selectionMode==="months"){if(b.type==="keydown"){i("pick",cs(r.parsedValue),!1);return}const M=V1(r.date.year(),C,s.value,r.disabledDate),T=Rs(S,"current")?cs(r.parsedValue).filter(P=>(P==null?void 0:P.month())!==M.month()):cs(r.parsedValue).concat([Dt(M)]);i("pick",T)}else r.selectionMode==="range"?r.rangeState.selecting?(r.minDate&&A>=r.minDate?i("pick",{minDate:r.minDate,maxDate:A}):i("pick",{minDate:A,maxDate:r.minDate}),i("select",!1)):(i("pick",{minDate:A,maxDate:null}),i("select",!0)):i("pick",C)};return Ne(()=>r.date,async()=>{var b,w;(b=o.value)!=null&&b.contains(document.activeElement)&&(await ft(),(w=l.value)==null||w.focus())}),t({focus:p}),(b,w)=>(F(),K("table",{role:"grid","aria-label":g(a)("el.datepicker.monthTablePrompt"),class:U(g(n).b()),onClick:x,onMousemove:y},[ie("tbody",{ref_key:"tbodyRef",ref:o},[(F(!0),K(ht,null,Qt(g(f),(S,_)=>(F(),K("tr",{key:_},[(F(!0),K(ht,null,Qt(S,(E,C)=>(F(),K("td",{key:C,ref_for:!0,ref:A=>v(E)&&(l.value=A),class:U(m(E)),"aria-selected":`${v(E)}`,"aria-label":g(a)(`el.datepicker.month${+E.text+1}`),tabindex:v(E)?0:-1,onKeydown:[Hi(xt(x,["prevent","stop"]),["space"]),Hi(xt(x,["prevent","stop"]),["enter"])]},[ne(g(w8),{cell:{...E,renderText:g(a)("el.datepicker.months."+c.value[E.text])}},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var YT=Ze(AJe,[["__file","basic-month-table.vue"]]);const MJe=je({...v8,selectionMode:y8("year")}),TJe=ce({__name:"basic-year-table",props:MJe,emits:["changerange","pick","select"],setup(e,{expose:t,emit:i}){const r=e,n=(w,S)=>{const _=Dt(String(w)).locale(S).startOf("year"),C=_.endOf("year").dayOfYear();return ih(C).map(A=>_.add(A,"day").toDate())},a=Ve("year-table"),{t:s,lang:o}=di(),l=j(),c=j(),u=O(()=>Math.floor(r.date.year()/10)*10),d=j([[],[],[]]),h=j(),f=j(),p=O(()=>{var w;const S=d.value,_=Dt().locale(o.value).startOf("year");for(let E=0;E<3;E++){const C=S[E];for(let A=0;A<4&&!(E*4+A>=10);A++){let M=C[A];M||(M={row:E,column:A,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1}),M.type="normal";const T=E*4+A+u.value,P=Dt().year(T),D=r.rangeState.endDate||r.maxDate||r.rangeState.selecting&&r.minDate||null;M.inRange=!!(r.minDate&&P.isSameOrAfter(r.minDate,"year")&&D&&P.isSameOrBefore(D,"year"))||!!(r.minDate&&P.isSameOrBefore(r.minDate,"year")&&D&&P.isSameOrAfter(D,"year")),(w=r.minDate)!=null&&w.isSameOrAfter(D)?(M.start=!!(D&&P.isSame(D,"year")),M.end=!!(r.minDate&&P.isSame(r.minDate,"year"))):(M.start=!!(r.minDate&&P.isSame(r.minDate,"year")),M.end=!!(D&&P.isSame(D,"year"))),_.isSame(P)&&(M.type="today"),M.text=T;const L=P.toDate();M.disabled=r.disabledDate&&r.disabledDate(L)||!1,C[A]=M}}return S}),m=()=>{var w;(w=c.value)==null||w.focus()},v=w=>{const S={},_=Dt().locale(o.value),E=w.text;return S.disabled=r.disabledDate?n(E,o.value).every(r.disabledDate):!1,S.today=_.year()===E,S.current=cs(r.parsedValue).findIndex(C=>C.year()===E)>=0,w.inRange&&(S["in-range"]=!0,w.start&&(S["start-date"]=!0),w.end&&(S["end-date"]=!0)),S},y=w=>{const S=w.text;return cs(r.date).findIndex(_=>_.year()===S)>=0},x=w=>{var S;const _=(S=w.target)==null?void 0:S.closest("td");if(!_||!_.textContent||Rs(_,"disabled"))return;const E=_.cellIndex,A=_.parentNode.rowIndex*4+E+u.value,M=Dt().year(A);if(r.selectionMode==="range")r.rangeState.selecting?(r.minDate&&M>=r.minDate?i("pick",{minDate:r.minDate,maxDate:M}):i("pick",{minDate:M,maxDate:r.minDate}),i("select",!1)):(i("pick",{minDate:M,maxDate:null}),i("select",!0));else if(r.selectionMode==="years"){if(w.type==="keydown"){i("pick",cs(r.parsedValue),!1);return}const T=$T(M.startOf("year"),o.value,r.disabledDate),P=Rs(_,"current")?cs(r.parsedValue).filter(D=>(D==null?void 0:D.year())!==A):cs(r.parsedValue).concat([T]);i("pick",P)}else i("pick",A)},b=w=>{var S;if(!r.rangeState.selecting)return;const _=(S=w.target)==null?void 0:S.closest("td");if(!_)return;const E=_.parentNode.rowIndex,C=_.cellIndex;p.value[E][C].disabled||(E!==h.value||C!==f.value)&&(h.value=E,f.value=C,i("changerange",{selecting:!0,endDate:Dt().year(u.value).add(E*4+C,"year")}))};return Ne(()=>r.date,async()=>{var w,S;(w=l.value)!=null&&w.contains(document.activeElement)&&(await ft(),(S=c.value)==null||S.focus())}),t({focus:m}),(w,S)=>(F(),K("table",{role:"grid","aria-label":g(s)("el.datepicker.yearTablePrompt"),class:U(g(a).b()),onClick:x,onMousemove:b},[ie("tbody",{ref_key:"tbodyRef",ref:l},[(F(!0),K(ht,null,Qt(g(p),(_,E)=>(F(),K("tr",{key:E},[(F(!0),K(ht,null,Qt(_,(C,A)=>(F(),K("td",{key:`${E}_${A}`,ref_for:!0,ref:M=>y(C)&&(c.value=M),class:U(["available",v(C)]),"aria-selected":y(C),"aria-label":String(C.text),tabindex:y(C)?0:-1,onKeydown:[Hi(xt(x,["prevent","stop"]),["space"]),Hi(xt(x,["prevent","stop"]),["enter"])]},[ne(g(w8),{cell:C},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var KT=Ze(TJe,[["__file","basic-year-table.vue"]]);const PJe=ce({__name:"panel-date-pick",props:gJe,emits:["pick","set-picker-option","panel-change"],setup(e,{emit:t}){const i=e,r=(_e,Fe,he)=>!0,n=Ve("picker-panel"),a=Ve("date-picker"),s=rp(),o=In(),{t:l,lang:c}=di(),u=rt("EP_PICKER_BASE"),d=rt(JS),{shortcuts:h,disabledDate:f,cellClassName:p,defaultTime:m}=u.props,v=Di(u.props,"defaultValue"),y=j(),x=j(Dt().locale(c.value)),b=j(!1);let w=!1;const S=O(()=>Dt(m).locale(c.value)),_=O(()=>x.value.month()),E=O(()=>x.value.year()),C=j([]),A=j(null),M=j(null),T=_e=>C.value.length>0?r(_e,C.value,i.format||"HH:mm:ss"):!0,P=_e=>m&&!ge.value&&!b.value&&!w?S.value.year(_e.year()).month(_e.month()).date(_e.date()):$.value?_e.millisecond(0):_e.startOf("day"),D=(_e,...Fe)=>{if(!_e)t("pick",_e,...Fe);else if(ct(_e)){const he=_e.map(P);t("pick",he,...Fe)}else t("pick",P(_e),...Fe);A.value=null,M.value=null,b.value=!1,w=!1},k=async(_e,Fe)=>{if(z.value==="date"){_e=_e;let he=i.parsedValue?i.parsedValue.year(_e.year()).month(_e.month()).date(_e.date()):_e;T(he)||(he=C.value[0][0].year(_e.year()).month(_e.month()).date(_e.date())),x.value=he,D(he,$.value||Fe),i.type==="datetime"&&(await ft(),et())}else z.value==="week"?D(_e.date):z.value==="dates"&&D(_e,!0)},L=_e=>{const Fe=_e?"add":"subtract";x.value=x.value[Fe](1,"month"),vt("month")},R=_e=>{const Fe=x.value,he=_e?"add":"subtract";x.value=N.value==="year"?Fe[he](10,"year"):Fe[he](1,"year"),vt("year")},N=j("date"),I=O(()=>{const _e=l("el.datepicker.year");if(N.value==="year"){const Fe=Math.floor(E.value/10)*10;return _e?`${Fe} ${_e} - ${Fe+9} ${_e}`:`${Fe} - ${Fe+9}`}return`${E.value} ${_e}`}),B=_e=>{const Fe=Wt(_e.value)?_e.value():_e.value;if(Fe){w=!0,D(Dt(Fe).locale(c.value));return}_e.onClick&&_e.onClick({attrs:s,slots:o,emit:t})},z=O(()=>{const{type:_e}=i;return["week","month","months","year","years","dates"].includes(_e)?_e:"date"}),V=O(()=>z.value==="dates"||z.value==="months"||z.value==="years"),W=O(()=>z.value==="date"?N.value:z.value),G=O(()=>!!h.length),q=async(_e,Fe)=>{z.value==="month"?(x.value=V1(x.value.year(),_e,c.value,f),D(x.value,!1)):z.value==="months"?D(_e,Fe??!0):(x.value=V1(x.value.year(),_e,c.value,f),N.value="date",["month","year","date","week"].includes(z.value)&&(D(x.value,!0),await ft(),et())),vt("month")},ae=async(_e,Fe)=>{if(z.value==="year"){const he=x.value.startOf("year").year(_e);x.value=$T(he,c.value,f),D(x.value,!1)}else if(z.value==="years")D(_e,Fe??!0);else{const he=x.value.year(_e);x.value=$T(he,c.value,f),N.value="month",["month","year","date","week"].includes(z.value)&&(D(x.value,!0),await ft(),et())}vt("year")},J=async _e=>{N.value=_e,await ft(),et()},$=O(()=>i.type==="datetime"||i.type==="datetimerange"),te=O(()=>{const _e=$.value||z.value==="dates",Fe=z.value==="years",he=z.value==="months",ke=N.value==="date",se=N.value==="year",He=N.value==="month";return _e&&ke||Fe&&se||he&&He}),Q=O(()=>f?i.parsedValue?ct(i.parsedValue)?f(i.parsedValue[0].toDate()):f(i.parsedValue.toDate()):!0:!1),pe=()=>{if(V.value)D(i.parsedValue);else{let _e=i.parsedValue;if(!_e){const Fe=Dt(m).locale(c.value),he=qe();_e=Fe.year(he.year()).month(he.month()).date(he.date())}x.value=_e,D(_e)}},me=O(()=>f?f(Dt().locale(c.value).toDate()):!1),le=()=>{const Fe=Dt().locale(c.value).toDate();b.value=!0,(!f||!f(Fe))&&T(Fe)&&(x.value=Dt().locale(c.value),D(x.value))},Z=O(()=>i.timeFormat||RX(i.format)),oe=O(()=>i.dateFormat||OX(i.format)),ge=O(()=>{if(M.value)return M.value;if(!(!i.parsedValue&&!v.value))return(i.parsedValue||x.value).format(Z.value)}),Ie=O(()=>{if(A.value)return A.value;if(!(!i.parsedValue&&!v.value))return(i.parsedValue||x.value).format(oe.value)}),we=j(!1),xe=()=>{we.value=!0},Se=()=>{we.value=!1},Le=_e=>({hour:_e.hour(),minute:_e.minute(),second:_e.second(),year:_e.year(),month:_e.month(),date:_e.date()}),Be=(_e,Fe,he)=>{const{hour:ke,minute:se,second:He}=Le(_e),yt=i.parsedValue?i.parsedValue.hour(ke).minute(se).second(He):_e;x.value=yt,D(x.value,!0),he||(we.value=Fe)},ee=_e=>{const Fe=Dt(_e,Z.value).locale(c.value);if(Fe.isValid()&&T(Fe)){const{year:he,month:ke,date:se}=Le(x.value);x.value=Fe.year(he).month(ke).date(se),M.value=null,we.value=!1,D(x.value,!0)}},X=_e=>{const Fe=Dt(_e,oe.value).locale(c.value);if(Fe.isValid()){if(f&&f(Fe.toDate()))return;const{hour:he,minute:ke,second:se}=Le(x.value);x.value=Fe.hour(he).minute(ke).second(se),A.value=null,D(x.value,!0)}},ue=_e=>Dt.isDayjs(_e)&&_e.isValid()&&(f?!f(_e.toDate()):!0),Oe=_e=>ct(_e)?_e.map(Fe=>Fe.format(i.format)):_e.format(i.format),Y=_e=>Dt(_e,i.format).locale(c.value),qe=()=>{const _e=Dt(v.value).locale(c.value);if(!v.value){const Fe=S.value;return Dt().hour(Fe.hour()).minute(Fe.minute()).second(Fe.second()).locale(c.value)}return _e},et=async()=>{var _e;["week","month","year","date"].includes(z.value)&&((_e=y.value)==null||_e.focus(),z.value==="week"&&ze(at.down))},tt=_e=>{const{code:Fe}=_e;[at.up,at.down,at.left,at.right,at.home,at.end,at.pageUp,at.pageDown].includes(Fe)&&(ze(Fe),_e.stopPropagation(),_e.preventDefault()),[at.enter,at.space,at.numpadEnter].includes(Fe)&&A.value===null&&M.value===null&&(_e.preventDefault(),D(x.value,!1))},ze=_e=>{var Fe;const{up:he,down:ke,left:se,right:He,home:yt,end:Te,pageUp:$e,pageDown:st}=at,wt={year:{[he]:-4,[ke]:4,[se]:-1,[He]:1,offset:(_t,Vi)=>_t.setFullYear(_t.getFullYear()+Vi)},month:{[he]:-4,[ke]:4,[se]:-1,[He]:1,offset:(_t,Vi)=>_t.setMonth(_t.getMonth()+Vi)},week:{[he]:-1,[ke]:1,[se]:-1,[He]:1,offset:(_t,Vi)=>_t.setDate(_t.getDate()+Vi*7)},date:{[he]:-7,[ke]:7,[se]:-1,[He]:1,[yt]:_t=>-_t.getDay(),[Te]:_t=>-_t.getDay()+6,[$e]:_t=>-new Date(_t.getFullYear(),_t.getMonth(),0).getDate(),[st]:_t=>new Date(_t.getFullYear(),_t.getMonth()+1,0).getDate(),offset:(_t,Vi)=>_t.setDate(_t.getDate()+Vi)}},Pt=x.value.toDate();for(;Math.abs(x.value.diff(Pt,"year",!0))<1;){const _t=wt[W.value];if(!_t)return;if(_t.offset(Pt,Wt(_t[_e])?_t[_e](Pt):(Fe=_t[_e])!=null?Fe:0),f&&f(Pt))break;const Vi=Dt(Pt).locale(c.value);x.value=Vi,t("pick",Vi,!0);break}},vt=_e=>{t("panel-change",x.value.toDate(),_e,N.value)};return Ne(()=>z.value,_e=>{if(["month","year"].includes(_e)){N.value=_e;return}else if(_e==="years"){N.value="year";return}else if(_e==="months"){N.value="month";return}N.value="date"},{immediate:!0}),Ne(()=>N.value,()=>{d==null||d.updatePopper()}),Ne(()=>v.value,_e=>{_e&&(x.value=qe())},{immediate:!0}),Ne(()=>i.parsedValue,_e=>{if(_e){if(V.value||ct(_e))return;x.value=_e}else x.value=qe()},{immediate:!0}),t("set-picker-option",["isValidValue",ue]),t("set-picker-option",["formatToString",Oe]),t("set-picker-option",["parseUserInput",Y]),t("set-picker-option",["handleFocusPicker",et]),(_e,Fe)=>(F(),K("div",{class:U([g(n).b(),g(a).b(),{"has-sidebar":_e.$slots.sidebar||g(G),"has-time":g($)}])},[ie("div",{class:U(g(n).e("body-wrapper"))},[Ee(_e.$slots,"sidebar",{class:U(g(n).e("sidebar"))}),g(G)?(F(),K("div",{key:0,class:U(g(n).e("sidebar"))},[(F(!0),K(ht,null,Qt(g(h),(he,ke)=>(F(),K("button",{key:ke,type:"button",class:U(g(n).e("shortcut")),onClick:se=>B(he)},Ye(he.text),11,["onClick"]))),128))],2)):Ae("v-if",!0),ie("div",{class:U(g(n).e("body"))},[g($)?(F(),K("div",{key:0,class:U(g(a).e("time-header"))},[ie("span",{class:U(g(a).e("editor-wrap"))},[ne(g(Ha),{placeholder:g(l)("el.datepicker.selectDate"),"model-value":g(Ie),size:"small","validate-event":!1,onInput:he=>A.value=he,onChange:X},null,8,["placeholder","model-value","onInput"])],2),Nt((F(),K("span",{class:U(g(a).e("editor-wrap"))},[ne(g(Ha),{placeholder:g(l)("el.datepicker.selectTime"),"model-value":g(ge),size:"small","validate-event":!1,onFocus:xe,onInput:he=>M.value=he,onChange:ee},null,8,["placeholder","model-value","onInput"]),ne(g(d_),{visible:we.value,format:g(Z),"parsed-value":x.value,onPick:Be},null,8,["visible","format","parsed-value"])],2)),[[g(Nu),Se]])],2)):Ae("v-if",!0),Nt(ie("div",{class:U([g(a).e("header"),(N.value==="year"||N.value==="month")&&g(a).e("header--bordered")])},[ie("span",{class:U(g(a).e("prev-btn"))},[ie("button",{type:"button","aria-label":g(l)("el.datepicker.prevYear"),class:U(["d-arrow-left",g(n).e("icon-btn")]),onClick:he=>R(!1)},[Ee(_e.$slots,"prev-year",{},()=>[ne(g(ut),null,{default:ve(()=>[ne(g(mh))]),_:1})])],10,["aria-label","onClick"]),Nt(ie("button",{type:"button","aria-label":g(l)("el.datepicker.prevMonth"),class:U([g(n).e("icon-btn"),"arrow-left"]),onClick:he=>L(!1)},[Ee(_e.$slots,"prev-month",{},()=>[ne(g(ut),null,{default:ve(()=>[ne(g(ph))]),_:1})])],10,["aria-label","onClick"]),[[_i,N.value==="date"]])],2),ie("span",{role:"button",class:U(g(a).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:Hi(he=>J("year"),["enter"]),onClick:he=>J("year")},Ye(g(I)),43,["onKeydown","onClick"]),Nt(ie("span",{role:"button","aria-live":"polite",tabindex:"0",class:U([g(a).e("header-label"),{active:N.value==="month"}]),onKeydown:Hi(he=>J("month"),["enter"]),onClick:he=>J("month")},Ye(g(l)(`el.datepicker.month${g(_)+1}`)),43,["onKeydown","onClick"]),[[_i,N.value==="date"]]),ie("span",{class:U(g(a).e("next-btn"))},[Nt(ie("button",{type:"button","aria-label":g(l)("el.datepicker.nextMonth"),class:U([g(n).e("icon-btn"),"arrow-right"]),onClick:he=>L(!0)},[Ee(_e.$slots,"next-month",{},()=>[ne(g(ut),null,{default:ve(()=>[ne(g(hs))]),_:1})])],10,["aria-label","onClick"]),[[_i,N.value==="date"]]),ie("button",{type:"button","aria-label":g(l)("el.datepicker.nextYear"),class:U([g(n).e("icon-btn"),"d-arrow-right"]),onClick:he=>R(!0)},[Ee(_e.$slots,"next-year",{},()=>[ne(g(ut),null,{default:ve(()=>[ne(g(vh))]),_:1})])],10,["aria-label","onClick"])],2)],2),[[_i,N.value!=="time"]]),ie("div",{class:U(g(n).e("content")),onKeydown:tt},[N.value==="date"?(F(),De(qT,{key:0,ref_key:"currentViewRef",ref:y,"selection-mode":g(z),date:x.value,"parsed-value":_e.parsedValue,"disabled-date":g(f),"cell-class-name":g(p),onPick:k},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name"])):Ae("v-if",!0),N.value==="year"?(F(),De(KT,{key:1,ref_key:"currentViewRef",ref:y,"selection-mode":g(z),date:x.value,"disabled-date":g(f),"parsed-value":_e.parsedValue,onPick:ae},null,8,["selection-mode","date","disabled-date","parsed-value"])):Ae("v-if",!0),N.value==="month"?(F(),De(YT,{key:2,ref_key:"currentViewRef",ref:y,"selection-mode":g(z),date:x.value,"parsed-value":_e.parsedValue,"disabled-date":g(f),onPick:q},null,8,["selection-mode","date","parsed-value","disabled-date"])):Ae("v-if",!0)],34)],2)],2),Nt(ie("div",{class:U(g(n).e("footer"))},[Nt(ne(g(Wn),{text:"",size:"small",class:U(g(n).e("link-btn")),disabled:g(me),onClick:le},{default:ve(()=>[Xt(Ye(g(l)("el.datepicker.now")),1)]),_:1},8,["class","disabled"]),[[_i,!g(V)&&_e.showNow]]),ne(g(Wn),{plain:"",size:"small",class:U(g(n).e("link-btn")),disabled:g(Q),onClick:pe},{default:ve(()=>[Xt(Ye(g(l)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2),[[_i,g(te)]])],2))}});var DJe=Ze(PJe,[["__file","panel-date-pick.vue"]]);const IJe=je({...MQ,...g8,visible:Boolean}),TQ=e=>{const{emit:t}=Ut(),i=rp(),r=In();return a=>{const s=Wt(a.value)?a.value():a.value;if(s){t("pick",[Dt(s[0]).locale(e.value),Dt(s[1]).locale(e.value)]);return}a.onClick&&a.onClick({attrs:i,slots:r,emit:t})}},PQ=(e,{defaultValue:t,leftDate:i,rightDate:r,unit:n,onParsedValueChanged:a})=>{const{emit:s}=Ut(),{pickerNs:o}=rt(t3),l=Ve("date-range-picker"),{t:c,lang:u}=di(),d=TQ(u),h=j(),f=j(),p=j({endDate:null,selecting:!1}),m=w=>{p.value=w},v=(w=!1)=>{const S=g(h),_=g(f);Ov([S,_])&&s("pick",[S,_],w)},y=w=>{p.value.selecting=w,w||(p.value.endDate=null)},x=w=>{if(ct(w)&&w.length===2){const[S,_]=w;h.value=S,i.value=S,f.value=_,a(g(h),g(f))}else b()},b=()=>{const[w,S]=b8(g(t),{lang:g(u),unit:n,unlinkPanels:e.unlinkPanels});h.value=void 0,f.value=void 0,i.value=w,r.value=S};return Ne(t,w=>{w&&b()},{immediate:!0}),Ne(()=>e.parsedValue,x,{immediate:!0}),{minDate:h,maxDate:f,rangeState:p,lang:u,ppNs:o,drpNs:l,handleChangeRange:m,handleRangeConfirm:v,handleShortcutClick:d,onSelect:y,onReset:x,t:c}},Lw="month",OJe=ce({__name:"panel-date-range",props:IJe,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(e,{emit:t}){const i=e,r=rt("EP_PICKER_BASE"),{disabledDate:n,cellClassName:a,defaultTime:s,clearable:o}=r.props,l=Di(r.props,"format"),c=Di(r.props,"shortcuts"),u=Di(r.props,"defaultValue"),{lang:d}=di(),h=j(Dt().locale(d.value)),f=j(Dt().locale(d.value).add(1,Lw)),{minDate:p,maxDate:m,rangeState:v,ppNs:y,drpNs:x,handleChangeRange:b,handleRangeConfirm:w,handleShortcutClick:S,onSelect:_,onReset:E,t:C}=PQ(i,{defaultValue:u,leftDate:h,rightDate:f,unit:Lw,onParsedValueChanged:Fe});Ne(()=>i.visible,he=>{!he&&v.value.selecting&&(E(i.parsedValue),_(!1))});const A=j({min:null,max:null}),M=j({min:null,max:null}),T=O(()=>`${h.value.year()} ${C("el.datepicker.year")} ${C(`el.datepicker.month${h.value.month()+1}`)}`),P=O(()=>`${f.value.year()} ${C("el.datepicker.year")} ${C(`el.datepicker.month${f.value.month()+1}`)}`),D=O(()=>h.value.year()),k=O(()=>h.value.month()),L=O(()=>f.value.year()),R=O(()=>f.value.month()),N=O(()=>!!c.value.length),I=O(()=>A.value.min!==null?A.value.min:p.value?p.value.format(G.value):""),B=O(()=>A.value.max!==null?A.value.max:m.value||p.value?(m.value||p.value).format(G.value):""),z=O(()=>M.value.min!==null?M.value.min:p.value?p.value.format(W.value):""),V=O(()=>M.value.max!==null?M.value.max:m.value||p.value?(m.value||p.value).format(W.value):""),W=O(()=>i.timeFormat||RX(l.value)),G=O(()=>i.dateFormat||OX(l.value)),q=he=>Ov(he)&&(n?!n(he[0].toDate())&&!n(he[1].toDate()):!0),ae=()=>{h.value=h.value.subtract(1,"year"),i.unlinkPanels||(f.value=h.value.add(1,"month")),Z("year")},J=()=>{h.value=h.value.subtract(1,"month"),i.unlinkPanels||(f.value=h.value.add(1,"month")),Z("month")},$=()=>{i.unlinkPanels?f.value=f.value.add(1,"year"):(h.value=h.value.add(1,"year"),f.value=h.value.add(1,"month")),Z("year")},te=()=>{i.unlinkPanels?f.value=f.value.add(1,"month"):(h.value=h.value.add(1,"month"),f.value=h.value.add(1,"month")),Z("month")},Q=()=>{h.value=h.value.add(1,"year"),Z("year")},pe=()=>{h.value=h.value.add(1,"month"),Z("month")},me=()=>{f.value=f.value.subtract(1,"year"),Z("year")},le=()=>{f.value=f.value.subtract(1,"month"),Z("month")},Z=he=>{t("panel-change",[h.value.toDate(),f.value.toDate()],he)},oe=O(()=>{const he=(k.value+1)%12,ke=k.value+1>=12?1:0;return i.unlinkPanels&&new Date(D.value+ke,he)<new Date(L.value,R.value)}),ge=O(()=>i.unlinkPanels&&L.value*12+R.value-(D.value*12+k.value+1)>=12),Ie=O(()=>!(p.value&&m.value&&!v.value.selecting&&Ov([p.value,m.value]))),we=O(()=>i.type==="datetime"||i.type==="datetimerange"),xe=(he,ke)=>{if(he)return s?Dt(s[ke]||s).locale(d.value).year(he.year()).month(he.month()).date(he.date()):he},Se=(he,ke=!0)=>{const se=he.minDate,He=he.maxDate,yt=xe(se,0),Te=xe(He,1);m.value===Te&&p.value===yt||(t("calendar-change",[se.toDate(),He&&He.toDate()]),m.value=Te,p.value=yt,!(!ke||we.value)&&w())},Le=j(!1),Be=j(!1),ee=()=>{Le.value=!1},X=()=>{Be.value=!1},ue=(he,ke)=>{A.value[ke]=he;const se=Dt(he,G.value).locale(d.value);if(se.isValid()){if(n&&n(se.toDate()))return;ke==="min"?(h.value=se,p.value=(p.value||h.value).year(se.year()).month(se.month()).date(se.date()),!i.unlinkPanels&&(!m.value||m.value.isBefore(p.value))&&(f.value=se.add(1,"month"),m.value=p.value.add(1,"month"))):(f.value=se,m.value=(m.value||f.value).year(se.year()).month(se.month()).date(se.date()),!i.unlinkPanels&&(!p.value||p.value.isAfter(m.value))&&(h.value=se.subtract(1,"month"),p.value=m.value.subtract(1,"month")))}},Oe=(he,ke)=>{A.value[ke]=null},Y=(he,ke)=>{M.value[ke]=he;const se=Dt(he,W.value).locale(d.value);se.isValid()&&(ke==="min"?(Le.value=!0,p.value=(p.value||h.value).hour(se.hour()).minute(se.minute()).second(se.second())):(Be.value=!0,m.value=(m.value||f.value).hour(se.hour()).minute(se.minute()).second(se.second()),f.value=m.value))},qe=(he,ke)=>{M.value[ke]=null,ke==="min"?(h.value=p.value,Le.value=!1,(!m.value||m.value.isBefore(p.value))&&(m.value=p.value)):(f.value=m.value,Be.value=!1,m.value&&m.value.isBefore(p.value)&&(p.value=m.value))},et=(he,ke,se)=>{M.value.min||(he&&(h.value=he,p.value=(p.value||h.value).hour(he.hour()).minute(he.minute()).second(he.second())),se||(Le.value=ke),(!m.value||m.value.isBefore(p.value))&&(m.value=p.value,f.value=he))},tt=(he,ke,se)=>{M.value.max||(he&&(f.value=he,m.value=(m.value||f.value).hour(he.hour()).minute(he.minute()).second(he.second())),se||(Be.value=ke),m.value&&m.value.isBefore(p.value)&&(p.value=m.value))},ze=()=>{h.value=b8(g(u),{lang:g(d),unit:"month",unlinkPanels:i.unlinkPanels})[0],f.value=h.value.add(1,"month"),m.value=void 0,p.value=void 0,t("pick",null)},vt=he=>ct(he)?he.map(ke=>ke.format(l.value)):he.format(l.value),_e=he=>ct(he)?he.map(ke=>Dt(ke,l.value).locale(d.value)):Dt(he,l.value).locale(d.value);function Fe(he,ke){if(i.unlinkPanels&&ke){const se=(he==null?void 0:he.year())||0,He=(he==null?void 0:he.month())||0,yt=ke.year(),Te=ke.month();f.value=se===yt&&He===Te?ke.add(1,Lw):ke}else f.value=h.value.add(1,Lw),ke&&(f.value=f.value.hour(ke.hour()).minute(ke.minute()).second(ke.second()))}return t("set-picker-option",["isValidValue",q]),t("set-picker-option",["parseUserInput",_e]),t("set-picker-option",["formatToString",vt]),t("set-picker-option",["handleClear",ze]),(he,ke)=>(F(),K("div",{class:U([g(y).b(),g(x).b(),{"has-sidebar":he.$slots.sidebar||g(N),"has-time":g(we)}])},[ie("div",{class:U(g(y).e("body-wrapper"))},[Ee(he.$slots,"sidebar",{class:U(g(y).e("sidebar"))}),g(N)?(F(),K("div",{key:0,class:U(g(y).e("sidebar"))},[(F(!0),K(ht,null,Qt(g(c),(se,He)=>(F(),K("button",{key:He,type:"button",class:U(g(y).e("shortcut")),onClick:yt=>g(S)(se)},Ye(se.text),11,["onClick"]))),128))],2)):Ae("v-if",!0),ie("div",{class:U(g(y).e("body"))},[g(we)?(F(),K("div",{key:0,class:U(g(x).e("time-header"))},[ie("span",{class:U(g(x).e("editors-wrap"))},[ie("span",{class:U(g(x).e("time-picker-wrap"))},[ne(g(Ha),{size:"small",disabled:g(v).selecting,placeholder:g(C)("el.datepicker.startDate"),class:U(g(x).e("editor")),"model-value":g(I),"validate-event":!1,onInput:se=>ue(se,"min"),onChange:se=>Oe(se,"min")},null,8,["disabled","placeholder","class","model-value","onInput","onChange"])],2),Nt((F(),K("span",{class:U(g(x).e("time-picker-wrap"))},[ne(g(Ha),{size:"small",class:U(g(x).e("editor")),disabled:g(v).selecting,placeholder:g(C)("el.datepicker.startTime"),"model-value":g(z),"validate-event":!1,onFocus:se=>Le.value=!0,onInput:se=>Y(se,"min"),onChange:se=>qe(se,"min")},null,8,["class","disabled","placeholder","model-value","onFocus","onInput","onChange"]),ne(g(d_),{visible:Le.value,format:g(W),"datetime-role":"start","parsed-value":h.value,onPick:et},null,8,["visible","format","parsed-value"])],2)),[[g(Nu),ee]])],2),ie("span",null,[ne(g(ut),null,{default:ve(()=>[ne(g(hs))]),_:1})]),ie("span",{class:U([g(x).e("editors-wrap"),"is-right"])},[ie("span",{class:U(g(x).e("time-picker-wrap"))},[ne(g(Ha),{size:"small",class:U(g(x).e("editor")),disabled:g(v).selecting,placeholder:g(C)("el.datepicker.endDate"),"model-value":g(B),readonly:!g(p),"validate-event":!1,onInput:se=>ue(se,"max"),onChange:se=>Oe(se,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onInput","onChange"])],2),Nt((F(),K("span",{class:U(g(x).e("time-picker-wrap"))},[ne(g(Ha),{size:"small",class:U(g(x).e("editor")),disabled:g(v).selecting,placeholder:g(C)("el.datepicker.endTime"),"model-value":g(V),readonly:!g(p),"validate-event":!1,onFocus:se=>g(p)&&(Be.value=!0),onInput:se=>Y(se,"max"),onChange:se=>qe(se,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onFocus","onInput","onChange"]),ne(g(d_),{"datetime-role":"end",visible:Be.value,format:g(W),"parsed-value":f.value,onPick:tt},null,8,["visible","format","parsed-value"])],2)),[[g(Nu),X]])],2)],2)):Ae("v-if",!0),ie("div",{class:U([[g(y).e("content"),g(x).e("content")],"is-left"])},[ie("div",{class:U(g(x).e("header"))},[ie("button",{type:"button",class:U([g(y).e("icon-btn"),"d-arrow-left"]),"aria-label":g(C)("el.datepicker.prevYear"),onClick:ae},[Ee(he.$slots,"prev-year",{},()=>[ne(g(ut),null,{default:ve(()=>[ne(g(mh))]),_:1})])],10,["aria-label"]),ie("button",{type:"button",class:U([g(y).e("icon-btn"),"arrow-left"]),"aria-label":g(C)("el.datepicker.prevMonth"),onClick:J},[Ee(he.$slots,"prev-month",{},()=>[ne(g(ut),null,{default:ve(()=>[ne(g(ph))]),_:1})])],10,["aria-label"]),he.unlinkPanels?(F(),K("button",{key:0,type:"button",disabled:!g(ge),class:U([[g(y).e("icon-btn"),{"is-disabled":!g(ge)}],"d-arrow-right"]),"aria-label":g(C)("el.datepicker.nextYear"),onClick:Q},[Ee(he.$slots,"next-year",{},()=>[ne(g(ut),null,{default:ve(()=>[ne(g(vh))]),_:1})])],10,["disabled","aria-label"])):Ae("v-if",!0),he.unlinkPanels?(F(),K("button",{key:1,type:"button",disabled:!g(oe),class:U([[g(y).e("icon-btn"),{"is-disabled":!g(oe)}],"arrow-right"]),"aria-label":g(C)("el.datepicker.nextMonth"),onClick:pe},[Ee(he.$slots,"next-month",{},()=>[ne(g(ut),null,{default:ve(()=>[ne(g(hs))]),_:1})])],10,["disabled","aria-label"])):Ae("v-if",!0),ie("div",null,Ye(g(T)),1)],2),ne(qT,{"selection-mode":"range",date:h.value,"min-date":g(p),"max-date":g(m),"range-state":g(v),"disabled-date":g(n),"cell-class-name":g(a),onChangerange:g(b),onPick:Se,onSelect:g(_)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2),ie("div",{class:U([[g(y).e("content"),g(x).e("content")],"is-right"])},[ie("div",{class:U(g(x).e("header"))},[he.unlinkPanels?(F(),K("button",{key:0,type:"button",disabled:!g(ge),class:U([[g(y).e("icon-btn"),{"is-disabled":!g(ge)}],"d-arrow-left"]),"aria-label":g(C)("el.datepicker.prevYear"),onClick:me},[Ee(he.$slots,"prev-year",{},()=>[ne(g(ut),null,{default:ve(()=>[ne(g(mh))]),_:1})])],10,["disabled","aria-label"])):Ae("v-if",!0),he.unlinkPanels?(F(),K("button",{key:1,type:"button",disabled:!g(oe),class:U([[g(y).e("icon-btn"),{"is-disabled":!g(oe)}],"arrow-left"]),"aria-label":g(C)("el.datepicker.prevMonth"),onClick:le},[Ee(he.$slots,"prev-month",{},()=>[ne(g(ut),null,{default:ve(()=>[ne(g(ph))]),_:1})])],10,["disabled","aria-label"])):Ae("v-if",!0),ie("button",{type:"button","aria-label":g(C)("el.datepicker.nextYear"),class:U([g(y).e("icon-btn"),"d-arrow-right"]),onClick:$},[Ee(he.$slots,"next-year",{},()=>[ne(g(ut),null,{default:ve(()=>[ne(g(vh))]),_:1})])],10,["aria-label"]),ie("button",{type:"button",class:U([g(y).e("icon-btn"),"arrow-right"]),"aria-label":g(C)("el.datepicker.nextMonth"),onClick:te},[Ee(he.$slots,"next-month",{},()=>[ne(g(ut),null,{default:ve(()=>[ne(g(hs))]),_:1})])],10,["aria-label"]),ie("div",null,Ye(g(P)),1)],2),ne(qT,{"selection-mode":"range",date:f.value,"min-date":g(p),"max-date":g(m),"range-state":g(v),"disabled-date":g(n),"cell-class-name":g(a),onChangerange:g(b),onPick:Se,onSelect:g(_)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2)],2)],2),g(we)?(F(),K("div",{key:0,class:U(g(y).e("footer"))},[g(o)?(F(),De(g(Wn),{key:0,text:"",size:"small",class:U(g(y).e("link-btn")),onClick:ze},{default:ve(()=>[Xt(Ye(g(C)("el.datepicker.clear")),1)]),_:1},8,["class"])):Ae("v-if",!0),ne(g(Wn),{plain:"",size:"small",class:U(g(y).e("link-btn")),disabled:g(Ie),onClick:se=>g(w)(!1)},{default:ve(()=>[Xt(Ye(g(C)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled","onClick"])],2)):Ae("v-if",!0)],2))}});var RJe=Ze(OJe,[["__file","panel-date-range.vue"]]);const kJe=je({...g8}),LJe=["pick","set-picker-option","calendar-change"],BJe=({unlinkPanels:e,leftDate:t,rightDate:i})=>{const{t:r}=di(),n=()=>{t.value=t.value.subtract(1,"year"),e.value||(i.value=i.value.subtract(1,"year"))},a=()=>{e.value||(t.value=t.value.add(1,"year")),i.value=i.value.add(1,"year")},s=()=>{t.value=t.value.add(1,"year")},o=()=>{i.value=i.value.subtract(1,"year")},l=O(()=>`${t.value.year()} ${r("el.datepicker.year")}`),c=O(()=>`${i.value.year()} ${r("el.datepicker.year")}`),u=O(()=>t.value.year()),d=O(()=>i.value.year()===t.value.year()?t.value.year()+1:i.value.year());return{leftPrevYear:n,rightNextYear:a,leftNextYear:s,rightPrevYear:o,leftLabel:l,rightLabel:c,leftYear:u,rightYear:d}},Bw="year",NJe=ce({name:"DatePickerMonthRange"}),FJe=ce({...NJe,props:kJe,emits:LJe,setup(e,{emit:t}){const i=e,{lang:r}=di(),n=rt("EP_PICKER_BASE"),{shortcuts:a,disabledDate:s}=n.props,o=Di(n.props,"format"),l=Di(n.props,"defaultValue"),c=j(Dt().locale(r.value)),u=j(Dt().locale(r.value).add(1,Bw)),{minDate:d,maxDate:h,rangeState:f,ppNs:p,drpNs:m,handleChangeRange:v,handleRangeConfirm:y,handleShortcutClick:x,onSelect:b}=PQ(i,{defaultValue:l,leftDate:c,rightDate:u,unit:Bw,onParsedValueChanged:I}),w=O(()=>!!a.length),{leftPrevYear:S,rightNextYear:_,leftNextYear:E,rightPrevYear:C,leftLabel:A,rightLabel:M,leftYear:T,rightYear:P}=BJe({unlinkPanels:Di(i,"unlinkPanels"),leftDate:c,rightDate:u}),D=O(()=>i.unlinkPanels&&P.value>T.value+1),k=(B,z=!0)=>{const V=B.minDate,W=B.maxDate;h.value===W&&d.value===V||(t("calendar-change",[V.toDate(),W&&W.toDate()]),h.value=W,d.value=V,z&&y())},L=()=>{c.value=b8(g(l),{lang:g(r),unit:"year",unlinkPanels:i.unlinkPanels})[0],u.value=c.value.add(1,"year"),t("pick",null)},R=B=>ct(B)?B.map(z=>z.format(o.value)):B.format(o.value),N=B=>ct(B)?B.map(z=>Dt(z,o.value).locale(r.value)):Dt(B,o.value).locale(r.value);function I(B,z){if(i.unlinkPanels&&z){const V=(B==null?void 0:B.year())||0,W=z.year();u.value=V===W?z.add(1,Bw):z}else u.value=c.value.add(1,Bw)}return t("set-picker-option",["isValidValue",Ov]),t("set-picker-option",["formatToString",R]),t("set-picker-option",["parseUserInput",N]),t("set-picker-option",["handleClear",L]),(B,z)=>(F(),K("div",{class:U([g(p).b(),g(m).b(),{"has-sidebar":!!B.$slots.sidebar||g(w)}])},[ie("div",{class:U(g(p).e("body-wrapper"))},[Ee(B.$slots,"sidebar",{class:U(g(p).e("sidebar"))}),g(w)?(F(),K("div",{key:0,class:U(g(p).e("sidebar"))},[(F(!0),K(ht,null,Qt(g(a),(V,W)=>(F(),K("button",{key:W,type:"button",class:U(g(p).e("shortcut")),onClick:G=>g(x)(V)},Ye(V.text),11,["onClick"]))),128))],2)):Ae("v-if",!0),ie("div",{class:U(g(p).e("body"))},[ie("div",{class:U([[g(p).e("content"),g(m).e("content")],"is-left"])},[ie("div",{class:U(g(m).e("header"))},[ie("button",{type:"button",class:U([g(p).e("icon-btn"),"d-arrow-left"]),onClick:g(S)},[Ee(B.$slots,"prev-year",{},()=>[ne(g(ut),null,{default:ve(()=>[ne(g(mh))]),_:1})])],10,["onClick"]),B.unlinkPanels?(F(),K("button",{key:0,type:"button",disabled:!g(D),class:U([[g(p).e("icon-btn"),{[g(p).is("disabled")]:!g(D)}],"d-arrow-right"]),onClick:g(E)},[Ee(B.$slots,"next-year",{},()=>[ne(g(ut),null,{default:ve(()=>[ne(g(vh))]),_:1})])],10,["disabled","onClick"])):Ae("v-if",!0),ie("div",null,Ye(g(A)),1)],2),ne(YT,{"selection-mode":"range",date:c.value,"min-date":g(d),"max-date":g(h),"range-state":g(f),"disabled-date":g(s),onChangerange:g(v),onPick:k,onSelect:g(b)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),ie("div",{class:U([[g(p).e("content"),g(m).e("content")],"is-right"])},[ie("div",{class:U(g(m).e("header"))},[B.unlinkPanels?(F(),K("button",{key:0,type:"button",disabled:!g(D),class:U([[g(p).e("icon-btn"),{"is-disabled":!g(D)}],"d-arrow-left"]),onClick:g(C)},[Ee(B.$slots,"prev-year",{},()=>[ne(g(ut),null,{default:ve(()=>[ne(g(mh))]),_:1})])],10,["disabled","onClick"])):Ae("v-if",!0),ie("button",{type:"button",class:U([g(p).e("icon-btn"),"d-arrow-right"]),onClick:g(_)},[Ee(B.$slots,"next-year",{},()=>[ne(g(ut),null,{default:ve(()=>[ne(g(vh))]),_:1})])],10,["onClick"]),ie("div",null,Ye(g(M)),1)],2),ne(YT,{"selection-mode":"range",date:u.value,"min-date":g(d),"max-date":g(h),"range-state":g(f),"disabled-date":g(s),onChangerange:g(v),onPick:k,onSelect:g(b)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var zJe=Ze(FJe,[["__file","panel-month-range.vue"]]);const VJe=je({...g8}),UJe=["pick","set-picker-option","calendar-change"],HJe=({unlinkPanels:e,leftDate:t,rightDate:i})=>{const r=()=>{t.value=t.value.subtract(10,"year"),e.value||(i.value=i.value.subtract(10,"year"))},n=()=>{e.value||(t.value=t.value.add(10,"year")),i.value=i.value.add(10,"year")},a=()=>{t.value=t.value.add(10,"year")},s=()=>{i.value=i.value.subtract(10,"year")},o=O(()=>{const d=Math.floor(t.value.year()/10)*10;return`${d}-${d+9}`}),l=O(()=>{const d=Math.floor(i.value.year()/10)*10;return`${d}-${d+9}`}),c=O(()=>Math.floor(t.value.year()/10)*10+9),u=O(()=>Math.floor(i.value.year()/10)*10);return{leftPrevYear:r,rightNextYear:n,leftNextYear:a,rightPrevYear:s,leftLabel:o,rightLabel:l,leftYear:c,rightYear:u}},wz="year",jJe=ce({name:"DatePickerYearRange"}),WJe=ce({...jJe,props:VJe,emits:UJe,setup(e,{emit:t}){const i=e,{lang:r}=di(),n=j(Dt().locale(r.value)),a=j(n.value.add(10,"year")),{pickerNs:s}=rt(t3),o=Ve("date-range-picker"),l=O(()=>!!k.length),c=O(()=>[s.b(),o.b(),{"has-sidebar":!!In().sidebar||l.value}]),u=O(()=>({content:[s.e("content"),o.e("content"),"is-left"],arrowLeftBtn:[s.e("icon-btn"),"d-arrow-left"],arrowRightBtn:[s.e("icon-btn"),{[s.is("disabled")]:!S.value},"d-arrow-right"]})),d=O(()=>({content:[s.e("content"),o.e("content"),"is-right"],arrowLeftBtn:[s.e("icon-btn"),{"is-disabled":!S.value},"d-arrow-left"],arrowRightBtn:[s.e("icon-btn"),"d-arrow-right"]})),h=TQ(r),{leftPrevYear:f,rightNextYear:p,leftNextYear:m,rightPrevYear:v,leftLabel:y,rightLabel:x,leftYear:b,rightYear:w}=HJe({unlinkPanels:Di(i,"unlinkPanels"),leftDate:n,rightDate:a}),S=O(()=>i.unlinkPanels&&w.value>b.value+1),_=j(),E=j(),C=j({endDate:null,selecting:!1}),A=G=>{C.value=G},M=(G,q=!0)=>{const ae=G.minDate,J=G.maxDate;E.value===J&&_.value===ae||(t("calendar-change",[ae.toDate(),J&&J.toDate()]),E.value=J,_.value=ae,q&&T())},T=(G=!1)=>{Ov([_.value,E.value])&&t("pick",[_.value,E.value],G)},P=G=>{C.value.selecting=G,G||(C.value.endDate=null)},D=rt("EP_PICKER_BASE"),{shortcuts:k,disabledDate:L}=D.props,R=Di(D.props,"format"),N=Di(D.props,"defaultValue"),I=()=>{let G;if(ct(N.value)){const q=Dt(N.value[0]);let ae=Dt(N.value[1]);return i.unlinkPanels||(ae=q.add(10,wz)),[q,ae]}else N.value?G=Dt(N.value):G=Dt();return G=G.locale(r.value),[G,G.add(10,wz)]};Ne(()=>N.value,G=>{if(G){const q=I();n.value=q[0],a.value=q[1]}},{immediate:!0}),Ne(()=>i.parsedValue,G=>{if(G&&G.length===2)if(_.value=G[0],E.value=G[1],n.value=_.value,i.unlinkPanels&&E.value){const q=_.value.year(),ae=E.value.year();a.value=q===ae?E.value.add(10,"year"):E.value}else a.value=n.value.add(10,"year");else{const q=I();_.value=void 0,E.value=void 0,n.value=q[0],a.value=q[1]}},{immediate:!0});const B=G=>ct(G)?G.map(q=>Dt(q,R.value).locale(r.value)):Dt(G,R.value).locale(r.value),z=G=>ct(G)?G.map(q=>q.format(R.value)):G.format(R.value),V=G=>Ov(G)&&(L?!L(G[0].toDate())&&!L(G[1].toDate()):!0),W=()=>{const G=I();n.value=G[0],a.value=G[1],E.value=void 0,_.value=void 0,t("pick",null)};return t("set-picker-option",["isValidValue",V]),t("set-picker-option",["parseUserInput",B]),t("set-picker-option",["formatToString",z]),t("set-picker-option",["handleClear",W]),(G,q)=>(F(),K("div",{class:U(g(c))},[ie("div",{class:U(g(s).e("body-wrapper"))},[Ee(G.$slots,"sidebar",{class:U(g(s).e("sidebar"))}),g(l)?(F(),K("div",{key:0,class:U(g(s).e("sidebar"))},[(F(!0),K(ht,null,Qt(g(k),(ae,J)=>(F(),K("button",{key:J,type:"button",class:U(g(s).e("shortcut")),onClick:$=>g(h)(ae)},Ye(ae.text),11,["onClick"]))),128))],2)):Ae("v-if",!0),ie("div",{class:U(g(s).e("body"))},[ie("div",{class:U(g(u).content)},[ie("div",{class:U(g(o).e("header"))},[ie("button",{type:"button",class:U(g(u).arrowLeftBtn),onClick:g(f)},[Ee(G.$slots,"prev-year",{},()=>[ne(g(ut),null,{default:ve(()=>[ne(g(mh))]),_:1})])],10,["onClick"]),G.unlinkPanels?(F(),K("button",{key:0,type:"button",disabled:!g(S),class:U(g(u).arrowRightBtn),onClick:g(m)},[Ee(G.$slots,"next-year",{},()=>[ne(g(ut),null,{default:ve(()=>[ne(g(vh))]),_:1})])],10,["disabled","onClick"])):Ae("v-if",!0),ie("div",null,Ye(g(y)),1)],2),ne(KT,{"selection-mode":"range",date:n.value,"min-date":_.value,"max-date":E.value,"range-state":C.value,"disabled-date":g(L),onChangerange:A,onPick:M,onSelect:P},null,8,["date","min-date","max-date","range-state","disabled-date"])],2),ie("div",{class:U(g(d).content)},[ie("div",{class:U(g(o).e("header"))},[G.unlinkPanels?(F(),K("button",{key:0,type:"button",disabled:!g(S),class:U(g(d).arrowLeftBtn),onClick:g(v)},[Ee(G.$slots,"prev-year",{},()=>[ne(g(ut),null,{default:ve(()=>[ne(g(mh))]),_:1})])],10,["disabled","onClick"])):Ae("v-if",!0),ie("button",{type:"button",class:U(g(d).arrowRightBtn),onClick:g(p)},[Ee(G.$slots,"next-year",{},()=>[ne(g(ut),null,{default:ve(()=>[ne(g(vh))]),_:1})])],10,["onClick"]),ie("div",null,Ye(g(x)),1)],2),ne(KT,{"selection-mode":"range",date:a.value,"min-date":_.value,"max-date":E.value,"range-state":C.value,"disabled-date":g(L),onChangerange:A,onPick:M,onSelect:P},null,8,["date","min-date","max-date","range-state","disabled-date"])],2)],2)],2)],2))}});var GJe=Ze(WJe,[["__file","panel-year-range.vue"]]);const $Je=function(e){switch(e){case"daterange":case"datetimerange":return RJe;case"monthrange":return zJe;case"yearrange":return GJe;default:return DJe}};Dt.extend(YX);Dt.extend(cJe);Dt.extend(f8);Dt.extend(uJe);Dt.extend(dJe);Dt.extend(hJe);Dt.extend(fJe);Dt.extend(pJe);var ZJe=ce({name:"ElDatePicker",install:null,props:mJe,emits:["update:modelValue"],setup(e,{expose:t,emit:i,slots:r}){const n=Ve("picker-panel");Yt("ElPopperOptions",bi(Di(e,"popperOptions"))),Yt(t3,{slots:r,pickerNs:n});const a=j();t({focus:()=>{var l;(l=a.value)==null||l.focus()},blur:()=>{var l;(l=a.value)==null||l.blur()},handleOpen:()=>{var l;(l=a.value)==null||l.handleOpen()},handleClose:()=>{var l;(l=a.value)==null||l.handleClose()}});const o=l=>{i("update:modelValue",l)};return()=>{var l;const c=(l=e.format)!=null?l:OYe[e.type]||pm,u=$Je(e.type);return ne(BX,$t(e,{format:c,type:e.type,ref:a,"onUpdate:modelValue":o}),{default:d=>ne(u,d,{"prev-month":r["prev-month"],"next-month":r["next-month"],"prev-year":r["prev-year"],"next-year":r["next-year"]}),"range-separator":r["range-separator"]})}}});const qJe=Rt(ZJe),x8=Symbol("elDescriptions");var eg=ce({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String,default:"td"},type:{type:String}},setup(){return{descriptions:rt(x8,{})}},render(){var e;const t=Vje(this.cell),i=(((e=this.cell)==null?void 0:e.dirs)||[]).map(y=>{const{dir:x,arg:b,modifiers:w,value:S}=y;return[x,S,b,w]}),{border:r,direction:n}=this.descriptions,a=n==="vertical",s=()=>{var y,x,b;return((b=(x=(y=this.cell)==null?void 0:y.children)==null?void 0:x.label)==null?void 0:b.call(x))||t.label},o=()=>{var y,x,b;return(b=(x=(y=this.cell)==null?void 0:y.children)==null?void 0:x.default)==null?void 0:b.call(x)},l=t.span,c=t.rowspan,u=t.align?`is-${t.align}`:"",d=t.labelAlign?`is-${t.labelAlign}`:u,h=t.className,f=t.labelClassName,p=this.type==="label"&&(t.labelWidth||this.descriptions.labelWidth)||t.width,m={width:zr(p),minWidth:zr(t.minWidth)},v=Ve("descriptions");switch(this.type){case"label":return Nt(dt(this.tag,{style:m,class:[v.e("cell"),v.e("label"),v.is("bordered-label",r),v.is("vertical-label",a),d,f],colSpan:a?l:1,rowspan:a?1:c},s()),i);case"content":return Nt(dt(this.tag,{style:m,class:[v.e("cell"),v.e("content"),v.is("bordered-content",r),v.is("vertical-content",a),u,h],colSpan:a?l:l*2-1,rowspan:a?c*2-1:c},o()),i);default:{const y=s();return Nt(dt("td",{style:m,class:[v.e("cell"),u],colSpan:l,rowspan:c},[mn(y)?void 0:dt("span",{class:[v.e("label"),f]},y),dt("span",{class:[v.e("content"),h]},o())]),i)}}}});const YJe=je({row:{type:be(Array),default:()=>[]}}),KJe=ce({name:"ElDescriptionsRow"}),XJe=ce({...KJe,props:YJe,setup(e){const t=rt(x8,{});return(i,r)=>g(t).direction==="vertical"?(F(),K(ht,{key:0},[ie("tr",null,[(F(!0),K(ht,null,Qt(i.row,(n,a)=>(F(),De(g(eg),{key:`tr1-${a}`,cell:n,tag:"th",type:"label"},null,8,["cell"]))),128))]),ie("tr",null,[(F(!0),K(ht,null,Qt(i.row,(n,a)=>(F(),De(g(eg),{key:`tr2-${a}`,cell:n,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(F(),K("tr",{key:1},[(F(!0),K(ht,null,Qt(i.row,(n,a)=>(F(),K(ht,{key:`tr3-${a}`},[g(t).border?(F(),K(ht,{key:0},[ne(g(eg),{cell:n,tag:"td",type:"label"},null,8,["cell"]),ne(g(eg),{cell:n,tag:"td",type:"content"},null,8,["cell"])],64)):(F(),De(g(eg),{key:1,cell:n,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var QJe=Ze(XJe,[["__file","descriptions-row.vue"]]);const JJe=je({border:Boolean,column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:wn,title:{type:String,default:""},extra:{type:String,default:""},labelWidth:{type:[String,Number],default:""}}),eet=ce({name:"ElDescriptions"}),tet=ce({...eet,props:JJe,setup(e){const t=e,i=Ve("descriptions"),r=on(),n=In();Yt(x8,t);const a=O(()=>[i.b(),i.m(r.value)]),s=(l,c,u,d=!1)=>(l.props||(l.props={}),c>u&&(l.props.span=u),d&&(l.props.span=c),l),o=()=>{if(!n.default)return[];const l=eh(n.default()).filter(p=>{var m;return((m=p==null?void 0:p.type)==null?void 0:m.name)==="ElDescriptionsItem"}),c=[];let u=[],d=t.column,h=0;const f=[];return l.forEach((p,m)=>{var v,y,x;const b=((v=p.props)==null?void 0:v.span)||1,w=((y=p.props)==null?void 0:y.rowspan)||1,S=c.length;if(f[S]||(f[S]=0),w>1)for(let _=1;_<w;_++)f[x=S+_]||(f[x]=0),f[S+_]++,h++;if(f[S]>0&&(d-=f[S],f[S]=0),m<l.length-1&&(h+=b>d?d:b),m===l.length-1){const _=t.column-h%t.column;u.push(s(p,_,d,!0)),c.push(u);return}b<d?(d-=b,u.push(p)):(u.push(s(p,b,d)),c.push(u),d=t.column,u=[])}),c};return(l,c)=>(F(),K("div",{class:U(g(a))},[l.title||l.extra||l.$slots.title||l.$slots.extra?(F(),K("div",{key:0,class:U(g(i).e("header"))},[ie("div",{class:U(g(i).e("title"))},[Ee(l.$slots,"title",{},()=>[Xt(Ye(l.title),1)])],2),ie("div",{class:U(g(i).e("extra"))},[Ee(l.$slots,"extra",{},()=>[Xt(Ye(l.extra),1)])],2)],2)):Ae("v-if",!0),ie("div",{class:U(g(i).e("body"))},[ie("table",{class:U([g(i).e("table"),g(i).is("bordered",l.border)])},[ie("tbody",null,[(F(!0),K(ht,null,Qt(o(),(u,d)=>(F(),De(QJe,{key:d,row:u},null,8,["row"]))),128))])],2)],2)],2))}});var iet=Ze(tet,[["__file","description.vue"]]);const ret=je({label:{type:String,default:""},span:{type:Number,default:1},rowspan:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},labelWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}),DQ=ce({name:"ElDescriptionsItem",props:ret}),net=Rt(iet,{DescriptionsItem:DQ}),aet=Tr(DQ),set=je({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:be([String,Array,Object])},zIndex:{type:be([String,Number])}}),oet={click:e=>e instanceof MouseEvent},cet="overlay";var uet=ce({name:"ElOverlay",props:set,emits:oet,setup(e,{slots:t,emit:i}){const r=Ve(cet),n=l=>{i("click",l)},{onClick:a,onMousedown:s,onMouseup:o}=t8(e.customMaskEvent?void 0:n);return()=>e.mask?ne("div",{class:[r.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:s,onMouseup:o},[Ee(t,"default")],go.STYLE|go.CLASS|go.PROPS,["onClick","onMouseup","onMousedown"]):dt("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[Ee(t,"default")])}});const _8=uet,IQ=Symbol("dialogInjectionKey"),OQ=je({center:Boolean,alignCenter:Boolean,closeIcon:{type:zi},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),det={close:()=>!0},het=ce({name:"ElDialogContent"}),fet=ce({...het,props:OQ,emits:det,setup(e,{expose:t}){const i=e,{t:r}=di(),{Close:n}=HI,{dialogRef:a,headerRef:s,bodyId:o,ns:l,style:c}=rt(IQ),{focusTrapRef:u}=rt(u8),d=O(()=>[l.b(),l.is("fullscreen",i.fullscreen),l.is("draggable",i.draggable),l.is("align-center",i.alignCenter),{[l.m("center")]:i.center}]),h=HS(u,a),f=O(()=>i.draggable),p=O(()=>i.overflow),{resetPosition:m}=MK(a,s,f,p);return t({resetPosition:m}),(v,y)=>(F(),K("div",{ref:g(h),class:U(g(d)),style:mt(g(c)),tabindex:"-1"},[ie("header",{ref_key:"headerRef",ref:s,class:U([g(l).e("header"),{"show-close":v.showClose}])},[Ee(v.$slots,"header",{},()=>[ie("span",{role:"heading","aria-level":v.ariaLevel,class:U(g(l).e("title"))},Ye(v.title),11,["aria-level"])]),v.showClose?(F(),K("button",{key:0,"aria-label":g(r)("el.dialog.close"),class:U(g(l).e("headerbtn")),type:"button",onClick:x=>v.$emit("close")},[ne(g(ut),{class:U(g(l).e("close"))},{default:ve(()=>[(F(),De(jt(v.closeIcon||g(n))))]),_:1},8,["class"])],10,["aria-label","onClick"])):Ae("v-if",!0)],2),ie("div",{id:g(o),class:U(g(l).e("body"))},[Ee(v.$slots,"default")],10,["id"]),v.$slots.footer?(F(),K("footer",{key:0,class:U(g(l).e("footer"))},[Ee(v.$slots,"footer")],2)):Ae("v-if",!0)],6))}});var pet=Ze(fet,[["__file","dialog-content.vue"]]);const RQ=je({...OQ,appendToBody:Boolean,appendTo:{type:be([String,Object]),default:"body"},beforeClose:{type:be(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),kQ={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Vt]:e=>Gi(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},LQ=(e,t)=>{var i;const n=Ut().emit,{nextZIndex:a}=d0();let s="";const o=ua(),l=ua(),c=j(!1),u=j(!1),d=j(!1),h=j((i=e.zIndex)!=null?i:a());let f,p;const m=KS("namespace",Hg),v=O(()=>{const L={},R=`--${m.value}-dialog`;return e.fullscreen||(e.top&&(L[`${R}-margin-top`]=e.top),e.width&&(L[`${R}-width`]=zr(e.width))),L}),y=O(()=>e.alignCenter?{display:"flex"}:{});function x(){n("opened")}function b(){n("closed"),n(Vt,!1),e.destroyOnClose&&(d.value=!1)}function w(){n("close")}function S(){p==null||p(),f==null||f(),e.openDelay&&e.openDelay>0?{stop:f}=qf(()=>A(),e.openDelay):A()}function _(){f==null||f(),p==null||p(),e.closeDelay&&e.closeDelay>0?{stop:p}=qf(()=>M(),e.closeDelay):M()}function E(){function L(R){R||(u.value=!0,c.value=!1)}e.beforeClose?e.beforeClose(L):_()}function C(){e.closeOnClickModal&&E()}function A(){si&&(c.value=!0)}function M(){c.value=!1}function T(){n("openAutoFocus")}function P(){n("closeAutoFocus")}function D(L){var R;((R=L.detail)==null?void 0:R.focusReason)==="pointer"&&L.preventDefault()}e.lockScroll&&$I(c);function k(){e.closeOnPressEscape&&E()}return Ne(()=>e.modelValue,L=>{L?(u.value=!1,S(),d.value=!0,h.value=xI(e.zIndex)?a():h.value++,ft(()=>{n("open"),t.value&&(t.value.scrollTop=0)})):c.value&&_()}),Ne(()=>e.fullscreen,L=>{t.value&&(L?(s=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=s)}),Lt(()=>{e.modelValue&&(c.value=!0,d.value=!0,S())}),{afterEnter:x,afterLeave:b,beforeLeave:w,handleClose:E,onModalClick:C,close:_,doClose:M,onOpenAutoFocus:T,onCloseAutoFocus:P,onCloseRequested:k,onFocusoutPrevented:D,titleId:o,bodyId:l,closed:u,style:v,overlayDialogStyle:y,rendered:d,visible:c,zIndex:h}},met=ce({name:"ElDialog",inheritAttrs:!1}),vet=ce({...met,props:RQ,emits:kQ,setup(e,{expose:t}){const i=e,r=In();th({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},O(()=>!!r.title));const n=Ve("dialog"),a=j(),s=j(),o=j(),{visible:l,titleId:c,bodyId:u,style:d,overlayDialogStyle:h,rendered:f,zIndex:p,afterEnter:m,afterLeave:v,beforeLeave:y,handleClose:x,onModalClick:b,onOpenAutoFocus:w,onCloseAutoFocus:S,onCloseRequested:_,onFocusoutPrevented:E}=LQ(i,a);Yt(IQ,{dialogRef:a,headerRef:s,bodyId:u,ns:n,rendered:f,style:d});const C=t8(b),A=O(()=>i.draggable&&!i.fullscreen);return t({visible:l,dialogContentRef:o,resetPosition:()=>{var T;(T=o.value)==null||T.resetPosition()}}),(T,P)=>(F(),De(g(f0),{to:T.appendTo,disabled:T.appendTo!=="body"?!1:!T.appendToBody},{default:ve(()=>[ne(Pn,{name:"dialog-fade",onAfterEnter:g(m),onAfterLeave:g(v),onBeforeLeave:g(y),persisted:""},{default:ve(()=>[Nt(ne(g(_8),{"custom-mask-event":"",mask:T.modal,"overlay-class":T.modalClass,"z-index":g(p)},{default:ve(()=>[ie("div",{role:"dialog","aria-modal":"true","aria-label":T.title||void 0,"aria-labelledby":T.title?void 0:g(c),"aria-describedby":g(u),class:U(`${g(n).namespace.value}-overlay-dialog`),style:mt(g(h)),onClick:g(C).onClick,onMousedown:g(C).onMousedown,onMouseup:g(C).onMouseup},[ne(g(Ly),{loop:"",trapped:g(l),"focus-start-el":"container",onFocusAfterTrapped:g(w),onFocusAfterReleased:g(S),onFocusoutPrevented:g(E),onReleaseRequested:g(_)},{default:ve(()=>[g(f)?(F(),De(pet,$t({key:0,ref_key:"dialogContentRef",ref:o},T.$attrs,{center:T.center,"align-center":T.alignCenter,"close-icon":T.closeIcon,draggable:g(A),overflow:T.overflow,fullscreen:T.fullscreen,"show-close":T.showClose,title:T.title,"aria-level":T.headerAriaLevel,onClose:g(x)}),Lo({header:ve(()=>[T.$slots.title?Ee(T.$slots,"title",{key:1}):Ee(T.$slots,"header",{key:0,close:g(x),titleId:g(c),titleClass:g(n).e("title")})]),default:ve(()=>[Ee(T.$slots,"default")]),_:2},[T.$slots.footer?{name:"footer",fn:ve(()=>[Ee(T.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):Ae("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[_i,g(l)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var get=Ze(vet,[["__file","dialog.vue"]]);const yet=Rt(get),bet=je({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:be(String),default:"solid"}}),wet=ce({name:"ElDivider"}),xet=ce({...wet,props:bet,setup(e){const t=e,i=Ve("divider"),r=O(()=>i.cssVar({"border-style":t.borderStyle}));return(n,a)=>(F(),K("div",{class:U([g(i).b(),g(i).m(n.direction)]),style:mt(g(r)),role:"separator"},[n.$slots.default&&n.direction!=="vertical"?(F(),K("div",{key:0,class:U([g(i).e("text"),g(i).is(n.contentPosition)])},[Ee(n.$slots,"default")],2)):Ae("v-if",!0)],6))}});var _et=Ze(xet,[["__file","divider.vue"]]);const BQ=Rt(_et),Cet=je({...RQ,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),Eet=kQ,Aet=ce({name:"ElDrawer",inheritAttrs:!1}),Met=ce({...Aet,props:Cet,emits:Eet,setup(e,{expose:t}){const i=e,r=In();th({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},O(()=>!!r.title));const n=j(),a=j(),s=Ve("drawer"),{t:o}=di(),{afterEnter:l,afterLeave:c,beforeLeave:u,visible:d,rendered:h,titleId:f,bodyId:p,zIndex:m,onModalClick:v,onOpenAutoFocus:y,onCloseAutoFocus:x,onFocusoutPrevented:b,onCloseRequested:w,handleClose:S}=LQ(i,n),_=O(()=>i.direction==="rtl"||i.direction==="ltr"),E=O(()=>zr(i.size));return t({handleClose:S,afterEnter:l,afterLeave:c}),(C,A)=>(F(),De(g(f0),{to:C.appendTo,disabled:C.appendTo!=="body"?!1:!C.appendToBody},{default:ve(()=>[ne(Pn,{name:g(s).b("fade"),onAfterEnter:g(l),onAfterLeave:g(c),onBeforeLeave:g(u),persisted:""},{default:ve(()=>[Nt(ne(g(_8),{mask:C.modal,"overlay-class":C.modalClass,"z-index":g(m),onClick:g(v)},{default:ve(()=>[ne(g(Ly),{loop:"",trapped:g(d),"focus-trap-el":n.value,"focus-start-el":a.value,onFocusAfterTrapped:g(y),onFocusAfterReleased:g(x),onFocusoutPrevented:g(b),onReleaseRequested:g(w)},{default:ve(()=>[ie("div",$t({ref_key:"drawerRef",ref:n,"aria-modal":"true","aria-label":C.title||void 0,"aria-labelledby":C.title?void 0:g(f),"aria-describedby":g(p)},C.$attrs,{class:[g(s).b(),C.direction,g(d)&&"open"],style:g(_)?"width: "+g(E):"height: "+g(E),role:"dialog",onClick:xt(()=>{},["stop"])}),[ie("span",{ref_key:"focusStartRef",ref:a,class:U(g(s).e("sr-focus")),tabindex:"-1"},null,2),C.withHeader?(F(),K("header",{key:0,class:U(g(s).e("header"))},[C.$slots.title?Ee(C.$slots,"title",{key:1},()=>[Ae(" DEPRECATED SLOT ")]):Ee(C.$slots,"header",{key:0,close:g(S),titleId:g(f),titleClass:g(s).e("title")},()=>[C.$slots.title?Ae("v-if",!0):(F(),K("span",{key:0,id:g(f),role:"heading","aria-level":C.headerAriaLevel,class:U(g(s).e("title"))},Ye(C.title),11,["id","aria-level"]))]),C.showClose?(F(),K("button",{key:2,"aria-label":g(o)("el.drawer.close"),class:U(g(s).e("close-btn")),type:"button",onClick:g(S)},[ne(g(ut),{class:U(g(s).e("close"))},{default:ve(()=>[ne(g(Ml))]),_:1},8,["class"])],10,["aria-label","onClick"])):Ae("v-if",!0)],2)):Ae("v-if",!0),g(h)?(F(),K("div",{key:1,id:g(p),class:U(g(s).e("body"))},[Ee(C.$slots,"default")],10,["id"])):Ae("v-if",!0),C.$slots.footer?(F(),K("div",{key:2,class:U(g(s).e("footer"))},[Ee(C.$slots,"footer")],2)):Ae("v-if",!0)],16,["aria-label","aria-labelledby","aria-describedby","onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[_i,g(d)]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var Tet=Ze(Met,[["__file","drawer.vue"]]);const Pet=Rt(Tet),Det=ce({inheritAttrs:!1});function Iet(e,t,i,r,n,a){return Ee(e.$slots,"default")}var Oet=Ze(Det,[["render",Iet],["__file","collection.vue"]]);const Ret=ce({name:"ElCollectionItem",inheritAttrs:!1});function ket(e,t,i,r,n,a){return Ee(e.$slots,"default")}var Let=Ze(Ret,[["render",ket],["__file","collection-item.vue"]]);const NQ="data-el-collection-item",FQ=e=>{const t=`El${e}Collection`,i=`${t}Item`,r=Symbol(t),n=Symbol(i),a={...Oet,name:t,setup(){const o=j(null),l=new Map;Yt(r,{itemMap:l,getItems:()=>{const u=g(o);if(!u)return[];const d=Array.from(u.querySelectorAll(`[${NQ}]`));return[...l.values()].sort((f,p)=>d.indexOf(f.ref)-d.indexOf(p.ref))},collectionRef:o})}},s={...Let,name:i,setup(o,{attrs:l}){const c=j(null),u=rt(r,void 0);Yt(n,{collectionItemRef:c}),Lt(()=>{const d=g(c);d&&u.itemMap.set(d,{ref:d,...l})}),Bi(()=>{const d=g(c);u.itemMap.delete(d)})}};return{COLLECTION_INJECTION_KEY:r,COLLECTION_ITEM_INJECTION_KEY:n,ElCollection:a,ElCollectionItem:s}},Bet=je({style:{type:be([String,Array,Object])},currentTabId:{type:be(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:be(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:Net,ElCollectionItem:Fet,COLLECTION_INJECTION_KEY:S8,COLLECTION_ITEM_INJECTION_KEY:zet}=FQ("RovingFocusGroup"),C8=Symbol("elRovingFocusGroup"),zQ=Symbol("elRovingFocusGroupItem"),Vet={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},Uet=(e,t)=>e,Het=(e,t,i)=>{const r=Uet(e.code);return Vet[r]},jet=(e,t)=>e.map((i,r)=>e[(r+t)%e.length]),E8=e=>{const{activeElement:t}=document;for(const i of e)if(i===t||(i.focus(),t!==document.activeElement))return},xz="currentTabIdChange",_z="rovingFocusGroup.entryFocus",Wet={bubbles:!1,cancelable:!0},Get=ce({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:Bet,emits:[xz,"entryFocus"],setup(e,{emit:t}){var i;const r=j((i=e.currentTabId||e.defaultCurrentTabId)!=null?i:null),n=j(!1),a=j(!1),s=j(null),{getItems:o}=rt(S8,void 0),l=O(()=>[{outline:"none"},e.style]),c=m=>{t(xz,m)},u=()=>{n.value=!0},d=Br(m=>{var v;(v=e.onMousedown)==null||v.call(e,m)},()=>{a.value=!0}),h=Br(m=>{var v;(v=e.onFocus)==null||v.call(e,m)},m=>{const v=!g(a),{target:y,currentTarget:x}=m;if(y===x&&v&&!g(n)){const b=new Event(_z,Wet);if(x==null||x.dispatchEvent(b),!b.defaultPrevented){const w=o().filter(A=>A.focusable),S=w.find(A=>A.active),_=w.find(A=>A.id===g(r)),C=[S,_,...w].filter(Boolean).map(A=>A.ref);E8(C)}}a.value=!1}),f=Br(m=>{var v;(v=e.onBlur)==null||v.call(e,m)},()=>{n.value=!1}),p=(...m)=>{t("entryFocus",...m)};Yt(C8,{currentTabbedId:K1(r),loop:Di(e,"loop"),tabIndex:O(()=>g(n)?-1:0),rovingFocusGroupRef:s,rovingFocusGroupRootStyle:l,orientation:Di(e,"orientation"),dir:Di(e,"dir"),onItemFocus:c,onItemShiftTab:u,onBlur:f,onFocus:h,onMousedown:d}),Ne(()=>e.currentTabId,m=>{r.value=m??null}),Oi(s,_z,p)}});function $et(e,t,i,r,n,a){return Ee(e.$slots,"default")}var Zet=Ze(Get,[["render",$et],["__file","roving-focus-group-impl.vue"]]);const qet=ce({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:Net,ElRovingFocusGroupImpl:Zet}});function Yet(e,t,i,r,n,a){const s=Ht("el-roving-focus-group-impl"),o=Ht("el-focus-group-collection");return F(),De(o,null,{default:ve(()=>[ne(s,_o(Au(e.$attrs)),{default:ve(()=>[Ee(e.$slots,"default")]),_:3},16)]),_:3})}var Ket=Ze(qet,[["render",Yet],["__file","roving-focus-group.vue"]]);const Xet=ce({components:{ElRovingFocusCollectionItem:Fet},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:t}){const{currentTabbedId:i,loop:r,onItemFocus:n,onItemShiftTab:a}=rt(C8,void 0),{getItems:s}=rt(S8,void 0),o=ua(),l=j(null),c=Br(f=>{t("mousedown",f)},f=>{e.focusable?n(g(o)):f.preventDefault()}),u=Br(f=>{t("focus",f)},()=>{n(g(o))}),d=Br(f=>{t("keydown",f)},f=>{const{code:p,shiftKey:m,target:v,currentTarget:y}=f;if(p===at.tab&&m){a();return}if(v!==y)return;const x=Het(f);if(x){f.preventDefault();let w=s().filter(S=>S.focusable).map(S=>S.ref);switch(x){case"last":{w.reverse();break}case"prev":case"next":{x==="prev"&&w.reverse();const S=w.indexOf(y);w=r.value?jet(w,S+1):w.slice(S+1);break}}ft(()=>{E8(w)})}}),h=O(()=>i.value===g(o));return Yt(zQ,{rovingFocusGroupItemRef:l,tabIndex:O(()=>g(h)?0:-1),handleMousedown:c,handleFocus:u,handleKeydown:d}),{id:o,handleKeydown:d,handleFocus:u,handleMousedown:c}}});function Qet(e,t,i,r,n,a){const s=Ht("el-roving-focus-collection-item");return F(),De(s,{id:e.id,focusable:e.focusable,active:e.active},{default:ve(()=>[Ee(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var Jet=Ze(Xet,[["render",Qet],["__file","roving-focus-item.vue"]]);const x2=je({trigger:N1.trigger,effect:{...Nn.effect,default:"light"},type:{type:be(String)},placement:{type:be(String),default:"bottom"},popperOptions:{type:be(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:be([Number,String]),default:0},maxHeight:{type:be([Number,String]),default:""},popperClass:{type:String,default:""},disabled:Boolean,role:{type:String,default:"menu"},buttonProps:{type:be(Object)},teleported:Nn.teleported}),VQ=je({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:zi}}),ett=je({onKeydown:{type:be(Function)}}),ttt=[at.down,at.pageDown,at.home],UQ=[at.up,at.pageUp,at.end],itt=[...ttt,...UQ],{ElCollection:rtt,ElCollectionItem:ntt,COLLECTION_INJECTION_KEY:att,COLLECTION_ITEM_INJECTION_KEY:stt}=FQ("Dropdown"),i3=Symbol("elDropdown"),{ButtonGroup:ott}=Wn,ltt=ce({name:"ElDropdown",components:{ElButton:Wn,ElButtonGroup:ott,ElScrollbar:Bc,ElDropdownCollection:rtt,ElTooltip:Ta,ElRovingFocusGroup:Ket,ElOnlyChild:pX,ElIcon:ut,ArrowDown:Ku},props:x2,emits:["visible-change","click","command"],setup(e,{emit:t}){const i=Ut(),r=Ve("dropdown"),{t:n}=di(),a=j(),s=j(),o=j(null),l=j(null),c=j(null),u=j(null),d=j(!1),h=[at.enter,at.numpadEnter,at.space,at.down],f=O(()=>({maxHeight:zr(e.maxHeight)})),p=O(()=>[r.m(S.value)]),m=O(()=>wa(e.trigger)),v=ua().value,y=O(()=>e.id||v);Ne([a,m],([N,I],[B])=>{var z,V,W;(z=B==null?void 0:B.$el)!=null&&z.removeEventListener&&B.$el.removeEventListener("pointerenter",E),(V=N==null?void 0:N.$el)!=null&&V.removeEventListener&&N.$el.removeEventListener("pointerenter",E),(W=N==null?void 0:N.$el)!=null&&W.addEventListener&&I.includes("hover")&&N.$el.addEventListener("pointerenter",E)},{immediate:!0}),Bi(()=>{var N,I;(I=(N=a.value)==null?void 0:N.$el)!=null&&I.removeEventListener&&a.value.$el.removeEventListener("pointerenter",E)});function x(){b()}function b(){var N;(N=o.value)==null||N.onClose()}function w(){var N;(N=o.value)==null||N.onOpen()}const S=on();function _(...N){t("command",...N)}function E(){var N,I;(I=(N=a.value)==null?void 0:N.$el)==null||I.focus()}function C(){}function A(){const N=g(l);m.value.includes("hover")&&(N==null||N.focus()),u.value=null}function M(N){u.value=N}function T(N){d.value||(N.preventDefault(),N.stopImmediatePropagation())}function P(){t("visible-change",!0)}function D(N){(N==null?void 0:N.type)==="keydown"&&l.value.focus()}function k(){t("visible-change",!1)}return Yt(i3,{contentRef:l,role:O(()=>e.role),triggerId:y,isUsingKeyboard:d,onItemEnter:C,onItemLeave:A}),Yt("elDropdown",{instance:i,dropdownSize:S,handleClick:x,commandHandler:_,trigger:Di(e,"trigger"),hideOnClick:Di(e,"hideOnClick")}),{t:n,ns:r,scrollbar:c,wrapStyle:f,dropdownTriggerKls:p,dropdownSize:S,triggerId:y,triggerKeys:h,currentTabId:u,handleCurrentTabIdChange:M,handlerMainButtonClick:N=>{t("click",N)},handleEntryFocus:T,handleClose:b,handleOpen:w,handleBeforeShowTooltip:P,handleShowTooltip:D,handleBeforeHideTooltip:k,onFocusAfterTrapped:N=>{var I,B;N.preventDefault(),(B=(I=l.value)==null?void 0:I.focus)==null||B.call(I,{preventScroll:!0})},popperRef:o,contentRef:l,triggeringElementRef:a,referenceElementRef:s}}});function ctt(e,t,i,r,n,a){var s;const o=Ht("el-dropdown-collection"),l=Ht("el-roving-focus-group"),c=Ht("el-scrollbar"),u=Ht("el-only-child"),d=Ht("el-tooltip"),h=Ht("el-button"),f=Ht("arrow-down"),p=Ht("el-icon"),m=Ht("el-button-group");return F(),K("div",{class:U([e.ns.b(),e.ns.is("disabled",e.disabled)])},[ne(d,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(s=e.referenceElementRef)==null?void 0:s.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:"",onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},Lo({content:ve(()=>[ne(c,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:ve(()=>[ne(l,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:ve(()=>[ne(o,null,{default:ve(()=>[Ee(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:ve(()=>[ne(u,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:ve(()=>[Ee(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(F(),De(m,{key:0},{default:ve(()=>[ne(h,$t({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:ve(()=>[Ee(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),ne(h,$t({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:ve(()=>[ne(p,{class:U(e.ns.e("icon"))},{default:ve(()=>[ne(f)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):Ae("v-if",!0)],2)}var utt=Ze(ltt,[["render",ctt],["__file","dropdown.vue"]]);const dtt=ce({name:"DropdownItemImpl",components:{ElIcon:ut},props:VQ,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:t}){const i=Ve("dropdown"),{role:r}=rt(i3,void 0),{collectionItemRef:n}=rt(stt,void 0),{collectionItemRef:a}=rt(zet,void 0),{rovingFocusGroupItemRef:s,tabIndex:o,handleFocus:l,handleKeydown:c,handleMousedown:u}=rt(zQ,void 0),d=HS(n,a,s),h=O(()=>r.value==="menu"?"menuitem":r.value==="navigation"?"link":"button"),f=Br(p=>{if([at.enter,at.numpadEnter,at.space].includes(p.code))return p.preventDefault(),p.stopImmediatePropagation(),t("clickimpl",p),!0},c);return{ns:i,itemRef:d,dataset:{[NQ]:""},role:h,tabIndex:o,handleFocus:l,handleKeydown:f,handleMousedown:u}}});function htt(e,t,i,r,n,a){const s=Ht("el-icon");return F(),K(ht,null,[e.divided?(F(),K("li",{key:0,role:"separator",class:U(e.ns.bem("menu","item","divided"))},null,2)):Ae("v-if",!0),ie("li",$t({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:o=>e.$emit("clickimpl",o),onFocus:e.handleFocus,onKeydown:xt(e.handleKeydown,["self"]),onMousedown:e.handleMousedown,onPointermove:o=>e.$emit("pointermove",o),onPointerleave:o=>e.$emit("pointerleave",o)}),[e.icon?(F(),De(s,{key:0},{default:ve(()=>[(F(),De(jt(e.icon)))]),_:1})):Ae("v-if",!0),Ee(e.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}var ftt=Ze(dtt,[["render",htt],["__file","dropdown-item-impl.vue"]]);const HQ=()=>{const e=rt("elDropdown",{}),t=O(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:t}},ptt=ce({name:"ElDropdownItem",components:{ElDropdownCollectionItem:ntt,ElRovingFocusItem:Jet,ElDropdownItemImpl:ftt},inheritAttrs:!1,props:VQ,emits:["pointermove","pointerleave","click"],setup(e,{emit:t,attrs:i}){const{elDropdown:r}=HQ(),n=Ut(),a=j(null),s=O(()=>{var f,p;return(p=(f=g(a))==null?void 0:f.textContent)!=null?p:""}),{onItemEnter:o,onItemLeave:l}=rt(i3,void 0),c=Br(f=>(t("pointermove",f),f.defaultPrevented),U9(f=>{if(e.disabled){l(f);return}const p=f.currentTarget;p===document.activeElement||p.contains(document.activeElement)||(o(f),f.defaultPrevented||p==null||p.focus())})),u=Br(f=>(t("pointerleave",f),f.defaultPrevented),U9(l)),d=Br(f=>{if(!e.disabled)return t("click",f),f.type!=="keydown"&&f.defaultPrevented},f=>{var p,m,v;if(e.disabled){f.stopImmediatePropagation();return}(p=r==null?void 0:r.hideOnClick)!=null&&p.value&&((m=r.handleClick)==null||m.call(r)),(v=r.commandHandler)==null||v.call(r,e.command,n,f)}),h=O(()=>({...e,...i}));return{handleClick:d,handlePointerMove:c,handlePointerLeave:u,textContent:s,propsAndAttrs:h}}});function mtt(e,t,i,r,n,a){var s;const o=Ht("el-dropdown-item-impl"),l=Ht("el-roving-focus-item"),c=Ht("el-dropdown-collection-item");return F(),De(c,{disabled:e.disabled,"text-value":(s=e.textValue)!=null?s:e.textContent},{default:ve(()=>[ne(l,{focusable:!e.disabled},{default:ve(()=>[ne(o,$t(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:ve(()=>[Ee(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var jQ=Ze(ptt,[["render",mtt],["__file","dropdown-item.vue"]]);const vtt=ce({name:"ElDropdownMenu",props:ett,setup(e){const t=Ve("dropdown"),{_elDropdownSize:i}=HQ(),r=i.value,{focusTrapRef:n,onKeydown:a}=rt(u8,void 0),{contentRef:s,role:o,triggerId:l}=rt(i3,void 0),{collectionRef:c,getItems:u}=rt(att,void 0),{rovingFocusGroupRef:d,rovingFocusGroupRootStyle:h,tabIndex:f,onBlur:p,onFocus:m,onMousedown:v}=rt(C8,void 0),{collectionRef:y}=rt(S8,void 0),x=O(()=>[t.b("menu"),t.bm("menu",r==null?void 0:r.value)]),b=HS(s,c,n,d,y),w=Br(_=>{var E;(E=e.onKeydown)==null||E.call(e,_)},_=>{const{currentTarget:E,code:C,target:A}=_;if(E.contains(A),at.tab===C&&_.stopImmediatePropagation(),_.preventDefault(),A!==g(s)||!itt.includes(C))return;const T=u().filter(P=>!P.disabled).map(P=>P.ref);UQ.includes(C)&&T.reverse(),E8(T)});return{size:r,rovingFocusGroupRootStyle:h,tabIndex:f,dropdownKls:x,role:o,triggerId:l,dropdownListWrapperRef:b,handleKeydown:_=>{w(_),a(_)},onBlur:p,onFocus:m,onMousedown:v}}});function gtt(e,t,i,r,n,a){return F(),K("ul",{ref:e.dropdownListWrapperRef,class:U(e.dropdownKls),style:mt(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:e.onBlur,onFocus:e.onFocus,onKeydown:xt(e.handleKeydown,["self"]),onMousedown:xt(e.onMousedown,["self"])},[Ee(e.$slots,"default")],46,["role","aria-labelledby","onBlur","onFocus","onKeydown","onMousedown"])}var WQ=Ze(vtt,[["render",gtt],["__file","dropdown-menu.vue"]]);const ytt=Rt(utt,{DropdownItem:jQ,DropdownMenu:WQ}),btt=Tr(jQ),wtt=Tr(WQ),xtt=ce({name:"ImgEmpty"}),_tt=ce({...xtt,setup(e){const t=Ve("empty"),i=ua();return(r,n)=>(F(),K("svg",{viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[ie("defs",null,[ie("linearGradient",{id:`linearGradient-1-${g(i)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[ie("stop",{"stop-color":`var(${g(t).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),ie("stop",{"stop-color":`var(${g(t).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),ie("linearGradient",{id:`linearGradient-2-${g(i)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[ie("stop",{"stop-color":`var(${g(t).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),ie("stop",{"stop-color":`var(${g(t).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),ie("rect",{id:`path-3-${g(i)}`,x:"0",y:"0",width:"17",height:"36"},null,8,["id"])]),ie("g",{id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[ie("g",{id:"B-type",transform:"translate(-1268.000000, -535.000000)"},[ie("g",{id:"Group-2",transform:"translate(1268.000000, 535.000000)"},[ie("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${g(t).cssVarBlockName("fill-color-3")})`},null,8,["fill"]),ie("polygon",{id:"Rectangle-Copy-14",fill:`var(${g(t).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,["fill"]),ie("g",{id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},[ie("polygon",{id:"Rectangle-Copy-10",fill:`var(${g(t).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,["fill"]),ie("polygon",{id:"Rectangle-Copy-11",fill:`var(${g(t).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,["fill"]),ie("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${g(i)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,["fill"]),ie("polygon",{id:"Rectangle-Copy-13",fill:`var(${g(t).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,["fill"])]),ie("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${g(i)})`,x:"13",y:"45",width:"40",height:"36"},null,8,["fill"]),ie("g",{id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},[ie("use",{id:"Mask",fill:`var(${g(t).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${g(i)}`},null,8,["fill","xlink:href"]),ie("polygon",{id:"Rectangle-Copy",fill:`var(${g(t).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${g(i)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,["fill","mask"])]),ie("polygon",{id:"Rectangle-Copy-18",fill:`var(${g(t).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,["fill"])])])])]))}});var Stt=Ze(_tt,[["__file","img-empty.vue"]]);const Ctt=je({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),Ett=ce({name:"ElEmpty"}),Att=ce({...Ett,props:Ctt,setup(e){const t=e,{t:i}=di(),r=Ve("empty"),n=O(()=>t.description||i("el.table.emptyText")),a=O(()=>({width:zr(t.imageSize)}));return(s,o)=>(F(),K("div",{class:U(g(r).b())},[ie("div",{class:U(g(r).e("image")),style:mt(g(a))},[s.image?(F(),K("img",{key:0,src:s.image,ondragstart:"return false"},null,8,["src"])):Ee(s.$slots,"image",{key:1},()=>[ne(Stt)])],6),ie("div",{class:U(g(r).e("description"))},[s.$slots.description?Ee(s.$slots,"description",{key:0}):(F(),K("p",{key:1},Ye(g(n)),1))],2),s.$slots.default?(F(),K("div",{key:0,class:U(g(r).e("bottom"))},[Ee(s.$slots,"default")],2)):Ae("v-if",!0)],2))}});var Mtt=Ze(Att,[["__file","empty.vue"]]);const GQ=Rt(Mtt),Ttt=je({urlList:{type:be(Array),default:()=>Er([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:be(String)}}),Ptt={close:()=>!0,switch:e=>gt(e),rotate:e=>gt(e)},Dtt=ce({name:"ElImageViewer"}),Itt=ce({...Dtt,props:Ttt,emits:Ptt,setup(e,{expose:t,emit:i}){var r;const n=e,a={CONTAIN:{name:"contain",icon:$d(QHe)},ORIGINAL:{name:"original",icon:$d(yje)}},{t:s}=di(),o=Ve("image-viewer"),{nextZIndex:l}=d0(),c=j(),u=j([]),d=gV(),h=j(!0),f=j(n.initialIndex),p=Wi(a.CONTAIN),m=j({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),v=j((r=n.zIndex)!=null?r:l()),y=O(()=>{const{urlList:z}=n;return z.length<=1}),x=O(()=>f.value===0),b=O(()=>f.value===n.urlList.length-1),w=O(()=>n.urlList[f.value]),S=O(()=>[o.e("btn"),o.e("prev"),o.is("disabled",!n.infinite&&x.value)]),_=O(()=>[o.e("btn"),o.e("next"),o.is("disabled",!n.infinite&&b.value)]),E=O(()=>{const{scale:z,deg:V,offsetX:W,offsetY:G,enableTransition:q}=m.value;let ae=W/z,J=G/z;const $=V*Math.PI/180,te=Math.cos($),Q=Math.sin($);ae=ae*te+J*Q,J=J*te-W/z*Q;const pe={transform:`scale(${z}) rotate(${V}deg) translate(${ae}px, ${J}px)`,transition:q?"transform .3s":""};return p.value.name===a.CONTAIN.name&&(pe.maxWidth=pe.maxHeight="100%"),pe});function C(){M(),i("close")}function A(){const z=Jd(W=>{switch(W.code){case at.esc:n.closeOnPressEscape&&C();break;case at.space:L();break;case at.left:N();break;case at.up:B("zoomIn");break;case at.right:I();break;case at.down:B("zoomOut");break}}),V=Jd(W=>{const G=W.deltaY||W.deltaX;B(G<0?"zoomIn":"zoomOut",{zoomRate:n.zoomRate,enableTransition:!1})});d.run(()=>{Oi(document,"keydown",z),Oi(document,"wheel",V)})}function M(){d.stop()}function T(){h.value=!1}function P(z){h.value=!1,z.target.alt=s("el.image.error")}function D(z){if(h.value||z.button!==0||!c.value)return;m.value.enableTransition=!1;const{offsetX:V,offsetY:W}=m.value,G=z.pageX,q=z.pageY,ae=Jd($=>{m.value={...m.value,offsetX:V+$.pageX-G,offsetY:W+$.pageY-q}}),J=Oi(document,"mousemove",ae);Oi(document,"mouseup",()=>{J()}),z.preventDefault()}function k(){m.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function L(){if(h.value)return;const z=Ev(a),V=Object.values(a),W=p.value.name,q=(V.findIndex(ae=>ae.name===W)+1)%z.length;p.value=a[z[q]],k()}function R(z){const V=n.urlList.length;f.value=(z+V)%V}function N(){x.value&&!n.infinite||R(f.value-1)}function I(){b.value&&!n.infinite||R(f.value+1)}function B(z,V={}){if(h.value)return;const{minScale:W,maxScale:G}=n,{zoomRate:q,rotateDeg:ae,enableTransition:J}={zoomRate:n.zoomRate,rotateDeg:90,enableTransition:!0,...V};switch(z){case"zoomOut":m.value.scale>W&&(m.value.scale=Number.parseFloat((m.value.scale/q).toFixed(3)));break;case"zoomIn":m.value.scale<G&&(m.value.scale=Number.parseFloat((m.value.scale*q).toFixed(3)));break;case"clockwise":m.value.deg+=ae,i("rotate",m.value.deg);break;case"anticlockwise":m.value.deg-=ae,i("rotate",m.value.deg);break}m.value.enableTransition=J}return Ne(w,()=>{ft(()=>{const z=u.value[0];z!=null&&z.complete||(h.value=!0)})}),Ne(f,z=>{k(),i("switch",z)}),Lt(()=>{var z,V;A(),(V=(z=c.value)==null?void 0:z.focus)==null||V.call(z)}),t({setActiveItem:R}),(z,V)=>(F(),De(g(f0),{to:"body",disabled:!z.teleported},{default:ve(()=>[ne(Pn,{name:"viewer-fade",appear:""},{default:ve(()=>[ie("div",{ref_key:"wrapper",ref:c,tabindex:-1,class:U(g(o).e("wrapper")),style:mt({zIndex:v.value})},[ie("div",{class:U(g(o).e("mask")),onClick:xt(W=>z.hideOnClickModal&&C(),["self"])},null,10,["onClick"]),Ae(" CLOSE "),ie("span",{class:U([g(o).e("btn"),g(o).e("close")]),onClick:C},[ne(g(ut),null,{default:ve(()=>[ne(g(Ml))]),_:1})],2),Ae(" ARROW "),g(y)?Ae("v-if",!0):(F(),K(ht,{key:0},[ie("span",{class:U(g(S)),onClick:N},[ne(g(ut),null,{default:ve(()=>[ne(g(ph))]),_:1})],2),ie("span",{class:U(g(_)),onClick:I},[ne(g(ut),null,{default:ve(()=>[ne(g(hs))]),_:1})],2)],64)),Ae(" ACTIONS "),ie("div",{class:U([g(o).e("btn"),g(o).e("actions")])},[ie("div",{class:U(g(o).e("actions__inner"))},[ne(g(ut),{onClick:W=>B("zoomOut")},{default:ve(()=>[ne(g(kje))]),_:1},8,["onClick"]),ne(g(ut),{onClick:W=>B("zoomIn")},{default:ve(()=>[ne(g(SK))]),_:1},8,["onClick"]),ie("i",{class:U(g(o).e("actions__divider"))},null,2),ne(g(ut),{onClick:L},{default:ve(()=>[(F(),De(jt(g(p).icon)))]),_:1}),ie("i",{class:U(g(o).e("actions__divider"))},null,2),ne(g(ut),{onClick:W=>B("anticlockwise")},{default:ve(()=>[ne(g(pje))]),_:1},8,["onClick"]),ne(g(ut),{onClick:W=>B("clockwise")},{default:ve(()=>[ne(g(vje))]),_:1},8,["onClick"])],2)],2),Ae(" CANVAS "),ie("div",{class:U(g(o).e("canvas"))},[(F(!0),K(ht,null,Qt(z.urlList,(W,G)=>Nt((F(),K("img",{ref_for:!0,ref:q=>u.value[G]=q,key:W,src:W,style:mt(g(E)),class:U(g(o).e("img")),crossorigin:z.crossorigin,onLoad:T,onError:P,onMousedown:D},null,46,["src","crossorigin"])),[[_i,G===f.value]])),128))],2),Ee(z.$slots,"default")],6)]),_:3})]),_:3},8,["disabled"]))}});var Ott=Ze(Itt,[["__file","image-viewer.vue"]]);const $Q=Rt(Ott),Rtt=je({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:be([String,Object])},previewSrcList:{type:be(Array),default:()=>Er([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:be(String)}}),ktt={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>gt(e),close:()=>!0,show:()=>!0},Ltt=ce({name:"ElImage",inheritAttrs:!1}),Btt=ce({...Ltt,props:Rtt,emits:ktt,setup(e,{emit:t}){const i=e;let r="";const{t:n}=di(),a=Ve("image"),s=rp(),o=O(()=>Cv(Object.entries(s).filter(([I])=>/^(data-|on[A-Z])/i.test(I)||["id","style"].includes(I)))),l=jS({excludeListeners:!0,excludeKeys:O(()=>Object.keys(o.value))}),c=j(),u=j(!1),d=j(!0),h=j(!1),f=j(),p=j(),m=si&&"loading"in HTMLImageElement.prototype;let v,y;const x=O(()=>[a.e("inner"),w.value&&a.e("preview"),d.value&&a.is("loading")]),b=O(()=>{const{fit:I}=i;return si&&I?{objectFit:I}:{}}),w=O(()=>{const{previewSrcList:I}=i;return ct(I)&&I.length>0}),S=O(()=>{const{previewSrcList:I,initialIndex:B}=i;let z=B;return B>I.length-1&&(z=0),z}),_=O(()=>i.loading==="eager"?!1:!m&&i.loading==="lazy"||i.lazy),E=()=>{si&&(d.value=!0,u.value=!1,c.value=i.src)};function C(I){d.value=!1,u.value=!1,t("load",I)}function A(I){d.value=!1,u.value=!0,t("error",I)}function M(){i8e(f.value,p.value)&&(E(),D())}const T=jZ(M,200,!0);async function P(){var I;if(!si)return;await ft();const{scrollContainer:B}=i;Xs(B)?p.value=B:Et(B)&&B!==""?p.value=(I=document.querySelector(B))!=null?I:void 0:f.value&&(p.value=BI(f.value)),p.value&&(v=Oi(p,"scroll",T),setTimeout(()=>M(),100))}function D(){!si||!p.value||!T||(v==null||v(),p.value=void 0)}function k(I){if(I.ctrlKey){if(I.deltaY<0)return I.preventDefault(),!1;if(I.deltaY>0)return I.preventDefault(),!1}}function L(){w.value&&(y=Oi("wheel",k,{passive:!1}),r=document.body.style.overflow,document.body.style.overflow="hidden",h.value=!0,t("show"))}function R(){y==null||y(),document.body.style.overflow=r,h.value=!1,t("close")}function N(I){t("switch",I)}return Ne(()=>i.src,()=>{_.value?(d.value=!0,u.value=!1,D(),P()):E()}),Lt(()=>{_.value?P():E()}),(I,B)=>(F(),K("div",$t({ref_key:"container",ref:f},g(o),{class:[g(a).b(),I.$attrs.class]}),[u.value?Ee(I.$slots,"error",{key:0},()=>[ie("div",{class:U(g(a).e("error"))},Ye(g(n)("el.image.error")),3)]):(F(),K(ht,{key:1},[c.value!==void 0?(F(),K("img",$t({key:0},g(l),{src:c.value,loading:I.loading,style:g(b),class:g(x),crossorigin:I.crossorigin,onClick:L,onLoad:C,onError:A}),null,16,["src","loading","crossorigin"])):Ae("v-if",!0),d.value?(F(),K("div",{key:1,class:U(g(a).e("wrapper"))},[Ee(I.$slots,"placeholder",{},()=>[ie("div",{class:U(g(a).e("placeholder"))},null,2)])],2)):Ae("v-if",!0)],64)),g(w)?(F(),K(ht,{key:2},[h.value?(F(),De(g($Q),{key:0,"z-index":I.zIndex,"initial-index":g(S),infinite:I.infinite,"zoom-rate":I.zoomRate,"min-scale":I.minScale,"max-scale":I.maxScale,"url-list":I.previewSrcList,crossorigin:I.crossorigin,"hide-on-click-modal":I.hideOnClickModal,teleported:I.previewTeleported,"close-on-press-escape":I.closeOnPressEscape,onClose:R,onSwitch:N},{default:ve(()=>[I.$slots.viewer?(F(),K("div",{key:0},[Ee(I.$slots,"viewer")])):Ae("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):Ae("v-if",!0)],64)):Ae("v-if",!0)],16))}});var Ntt=Ze(Btt,[["__file","image.vue"]]);const Ftt=Rt(Ntt),ztt=je({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:wn,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:e=>e===null||gt(e)||["min","max"].includes(e),default:null},name:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0},...ha(["ariaLabel"])}),Vtt={[nr]:(e,t)=>t!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[fs]:e=>gt(e)||mn(e),[Vt]:e=>gt(e)||mn(e)},Utt=ce({name:"ElInputNumber"}),Htt=ce({...Utt,props:ztt,emits:Vtt,setup(e,{expose:t,emit:i}){const r=e,{t:n}=di(),a=Ve("input-number"),s=j(),o=bi({currentValue:r.modelValue,userInput:null}),{formItem:l}=Ya(),c=O(()=>gt(r.modelValue)&&r.modelValue<=r.min),u=O(()=>gt(r.modelValue)&&r.modelValue>=r.max),d=O(()=>{const L=y(r.step);return Qi(r.precision)?Math.max(y(r.modelValue),L):(L>r.precision,r.precision)}),h=O(()=>r.controls&&r.controlsPosition==="right"),f=on(),p=qa(),m=O(()=>{if(o.userInput!==null)return o.userInput;let L=o.currentValue;if(mn(L))return"";if(gt(L)){if(Number.isNaN(L))return"";Qi(r.precision)||(L=L.toFixed(r.precision))}return L}),v=(L,R)=>{if(Qi(R)&&(R=d.value),R===0)return Math.round(L);let N=String(L);const I=N.indexOf(".");if(I===-1||!N.replace(".","").split("")[I+R])return L;const V=N.length;return N.charAt(V-1)==="5"&&(N=`${N.slice(0,Math.max(0,V-1))}6`),Number.parseFloat(Number(N).toFixed(R))},y=L=>{if(mn(L))return 0;const R=L.toString(),N=R.indexOf(".");let I=0;return N!==-1&&(I=R.length-N-1),I},x=(L,R=1)=>gt(L)?v(L+r.step*R):o.currentValue,b=()=>{if(r.readonly||p.value||u.value)return;const L=Number(m.value)||0,R=x(L);_(R),i(fs,o.currentValue),D()},w=()=>{if(r.readonly||p.value||c.value)return;const L=Number(m.value)||0,R=x(L,-1);_(R),i(fs,o.currentValue),D()},S=(L,R)=>{const{max:N,min:I,step:B,precision:z,stepStrictly:V,valueOnClear:W}=r;N<I&&bn("InputNumber","min should not be greater than max.");let G=Number(L);if(mn(L)||Number.isNaN(G))return null;if(L===""){if(W===null)return null;G=Et(W)?{min:I,max:N}[W]:W}return V&&(G=v(Math.round(G/B)*B,z),G!==L&&R&&i(Vt,G)),Qi(z)||(G=v(G,z)),(G>N||G<I)&&(G=G>N?N:I,R&&i(Vt,G)),G},_=(L,R=!0)=>{var N;const I=o.currentValue,B=S(L);if(!R){i(Vt,B);return}I===B&&L||(o.userInput=null,i(Vt,B),I!==B&&i(nr,B,I),r.validateEvent&&((N=l==null?void 0:l.validate)==null||N.call(l,"change").catch(z=>void 0)),o.currentValue=B)},E=L=>{o.userInput=L;const R=L===""?null:Number(L);i(fs,R),_(R,!1)},C=L=>{const R=L!==""?Number(L):"";(gt(R)&&!Number.isNaN(R)||L==="")&&_(R),D(),o.userInput=null},A=()=>{var L,R;(R=(L=s.value)==null?void 0:L.focus)==null||R.call(L)},M=()=>{var L,R;(R=(L=s.value)==null?void 0:L.blur)==null||R.call(L)},T=L=>{i("focus",L)},P=L=>{var R;o.userInput=null,i("blur",L),r.validateEvent&&((R=l==null?void 0:l.validate)==null||R.call(l,"blur").catch(N=>void 0))},D=()=>{o.currentValue!==r.modelValue&&(o.currentValue=r.modelValue)},k=L=>{document.activeElement===L.target&&L.preventDefault()};return Ne(()=>r.modelValue,(L,R)=>{const N=S(L,!0);o.userInput===null&&N!==R&&(o.currentValue=N)},{immediate:!0}),Lt(()=>{var L;const{min:R,max:N,modelValue:I}=r,B=(L=s.value)==null?void 0:L.input;if(B.setAttribute("role","spinbutton"),Number.isFinite(N)?B.setAttribute("aria-valuemax",String(N)):B.removeAttribute("aria-valuemax"),Number.isFinite(R)?B.setAttribute("aria-valuemin",String(R)):B.removeAttribute("aria-valuemin"),B.setAttribute("aria-valuenow",o.currentValue||o.currentValue===0?String(o.currentValue):""),B.setAttribute("aria-disabled",String(p.value)),!gt(I)&&I!=null){let z=Number(I);Number.isNaN(z)&&(z=null),i(Vt,z)}B.addEventListener("wheel",k,{passive:!1})}),Tl(()=>{var L,R;const N=(L=s.value)==null?void 0:L.input;N==null||N.setAttribute("aria-valuenow",`${(R=o.currentValue)!=null?R:""}`)}),t({focus:A,blur:M}),(L,R)=>(F(),K("div",{class:U([g(a).b(),g(a).m(g(f)),g(a).is("disabled",g(p)),g(a).is("without-controls",!L.controls),g(a).is("controls-right",g(h))]),onDragstart:xt(()=>{},["prevent"])},[L.controls?Nt((F(),K("span",{key:0,role:"button","aria-label":g(n)("el.inputNumber.decrease"),class:U([g(a).e("decrease"),g(a).is("disabled",g(c))]),onKeydown:Hi(w,["enter"])},[Ee(L.$slots,"decrease-icon",{},()=>[ne(g(ut),null,{default:ve(()=>[g(h)?(F(),De(g(Ku),{key:0})):(F(),De(g(nje),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[g(u_),w]]):Ae("v-if",!0),L.controls?Nt((F(),K("span",{key:1,role:"button","aria-label":g(n)("el.inputNumber.increase"),class:U([g(a).e("increase"),g(a).is("disabled",g(u))]),onKeydown:Hi(b,["enter"])},[Ee(L.$slots,"increase-icon",{},()=>[ne(g(ut),null,{default:ve(()=>[g(h)?(F(),De(g(FI),{key:0})):(F(),De(g(xK),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[g(u_),b]]):Ae("v-if",!0),ne(g(Ha),{id:L.id,ref_key:"input",ref:s,type:"number",step:L.step,"model-value":g(m),placeholder:L.placeholder,readonly:L.readonly,disabled:g(p),size:g(f),max:L.max,min:L.min,name:L.name,"aria-label":L.ariaLabel,"validate-event":!1,onKeydown:[Hi(xt(b,["prevent"]),["up"]),Hi(xt(w,["prevent"]),["down"])],onBlur:P,onFocus:T,onInput:E,onChange:C},Lo({_:2},[L.$slots.prefix?{name:"prefix",fn:ve(()=>[Ee(L.$slots,"prefix")])}:void 0,L.$slots.suffix?{name:"suffix",fn:ve(()=>[Ee(L.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var jtt=Ze(Htt,[["__file","input-number.vue"]]);const ZQ=Rt(jtt),Wtt=je({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:Boolean,href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:zi}}),Gtt={click:e=>e instanceof MouseEvent},$tt=ce({name:"ElLink"}),Ztt=ce({...$tt,props:Wtt,emits:Gtt,setup(e,{emit:t}){const i=e,r=Ve("link"),n=O(()=>[r.b(),r.m(i.type),r.is("disabled",i.disabled),r.is("underline",i.underline&&!i.disabled)]);function a(s){i.disabled||t("click",s)}return(s,o)=>(F(),K("a",{class:U(g(n)),href:s.disabled||!s.href?void 0:s.href,target:s.disabled||!s.href?void 0:s.target,onClick:a},[s.icon?(F(),De(g(ut),{key:0},{default:ve(()=>[(F(),De(jt(s.icon)))]),_:1})):Ae("v-if",!0),s.$slots.default?(F(),K("span",{key:1,class:U(g(r).e("inner"))},[Ee(s.$slots,"default")],2)):Ae("v-if",!0),s.$slots.icon?Ee(s.$slots,"icon",{key:2}):Ae("v-if",!0)],10,["href","target"]))}});var qtt=Ze(Ztt,[["__file","link.vue"]]);const Ytt=Rt(qtt);class Ktt{constructor(t,i){this.parent=t,this.domNode=i,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(t){t===this.subMenuItems.length?t=0:t<0&&(t=this.subMenuItems.length-1),this.subMenuItems[t].focus(),this.subIndex=t}addListeners(){const t=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,i=>{i.addEventListener("keydown",r=>{let n=!1;switch(r.code){case at.down:{this.gotoSubIndex(this.subIndex+1),n=!0;break}case at.up:{this.gotoSubIndex(this.subIndex-1),n=!0;break}case at.tab:{l2(t,"mouseleave");break}case at.enter:case at.numpadEnter:case at.space:{n=!0,r.currentTarget.click();break}}return n&&(r.preventDefault(),r.stopPropagation()),!1})})}}var Xtt=Ktt;class Qtt{constructor(t,i){this.domNode=t,this.submenu=null,this.submenu=null,this.init(i)}init(t){this.domNode.setAttribute("tabindex","0");const i=this.domNode.querySelector(`.${t}-menu`);i&&(this.submenu=new Xtt(this,i)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",t=>{let i=!1;switch(t.code){case at.down:{l2(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),i=!0;break}case at.up:{l2(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),i=!0;break}case at.tab:{l2(t.currentTarget,"mouseleave");break}case at.enter:case at.numpadEnter:case at.space:{i=!0,t.currentTarget.click();break}}i&&t.preventDefault()})}}var Jtt=Qtt;class eit{constructor(t,i){this.domNode=t,this.init(i)}init(t){const i=this.domNode.childNodes;Array.from(i).forEach(r=>{r.nodeType===1&&new Jtt(r,t)})}}var tit=eit;const iit=ce({name:"ElMenuCollapseTransition",setup(){const e=Ve("menu");return{listeners:{onBeforeEnter:i=>i.style.opacity="0.2",onEnter(i,r){Eo(i,`${e.namespace.value}-opacity-transition`),i.style.opacity="1",r()},onAfterEnter(i){Wa(i,`${e.namespace.value}-opacity-transition`),i.style.opacity=""},onBeforeLeave(i){i.dataset||(i.dataset={}),Rs(i,e.m("collapse"))?(Wa(i,e.m("collapse")),i.dataset.oldOverflow=i.style.overflow,i.dataset.scrollWidth=i.clientWidth.toString(),Eo(i,e.m("collapse"))):(Eo(i,e.m("collapse")),i.dataset.oldOverflow=i.style.overflow,i.dataset.scrollWidth=i.clientWidth.toString(),Wa(i,e.m("collapse"))),i.style.width=`${i.scrollWidth}px`,i.style.overflow="hidden"},onLeave(i){Eo(i,"horizontal-collapse-transition"),i.style.width=`${i.dataset.scrollWidth}px`}}}}});function rit(e,t,i,r,n,a){return F(),De(Pn,$t({mode:"out-in"},e.listeners),{default:ve(()=>[Ee(e.$slots,"default")]),_:3},16)}var nit=Ze(iit,[["render",rit],["__file","menu-collapse-transition.vue"]]);function qQ(e,t){const i=O(()=>{let n=e.parent;const a=[t.value];for(;n.type.name!=="ElMenu";)n.props.index&&a.unshift(n.props.index),n=n.parent;return a});return{parentMenu:O(()=>{let n=e.parent;for(;n&&!["ElMenu","ElSubMenu"].includes(n.type.name);)n=n.parent;return n}),indexPath:i}}function ait(e){return O(()=>{const i=e.backgroundColor;return i?new MX(i).shade(20).toString():""})}const YQ=(e,t)=>{const i=Ve("menu");return O(()=>i.cssVarBlock({"text-color":e.textColor||"","hover-text-color":e.textColor||"","bg-color":e.backgroundColor||"","hover-bg-color":ait(e).value||"","active-color":e.activeTextColor||"",level:`${t}`}))},sit=je({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:zi},expandOpenIcon:{type:zi},collapseCloseIcon:{type:zi},collapseOpenIcon:{type:zi}}),aE="ElSubMenu";var A8=ce({name:aE,props:sit,setup(e,{slots:t,expose:i}){const r=Ut(),{indexPath:n,parentMenu:a}=qQ(r,O(()=>e.index)),s=Ve("menu"),o=Ve("sub-menu"),l=rt("rootMenu");l||bn(aE,"can not inject root menu");const c=rt(`subMenu:${a.value.uid}`);c||bn(aE,"can not inject sub menu");const u=j({}),d=j({});let h;const f=j(!1),p=j(),m=j(null),v=O(()=>C.value==="horizontal"&&x.value?"bottom-start":"right-start"),y=O(()=>C.value==="horizontal"&&x.value||C.value==="vertical"&&!l.props.collapse?e.expandCloseIcon&&e.expandOpenIcon?_.value?e.expandOpenIcon:e.expandCloseIcon:Ku:e.collapseCloseIcon&&e.collapseOpenIcon?_.value?e.collapseOpenIcon:e.collapseCloseIcon:hs),x=O(()=>c.level===0),b=O(()=>{const z=e.teleported;return z===void 0?x.value:z}),w=O(()=>l.props.collapse?`${s.namespace.value}-zoom-in-left`:`${s.namespace.value}-zoom-in-top`),S=O(()=>C.value==="horizontal"&&x.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),_=O(()=>l.openedMenus.includes(e.index)),E=O(()=>{let z=!1;return Object.values(u.value).forEach(V=>{V.active&&(z=!0)}),Object.values(d.value).forEach(V=>{V.active&&(z=!0)}),z}),C=O(()=>l.props.mode),A=bi({index:e.index,indexPath:n,active:E}),M=YQ(l.props,c.level+1),T=O(()=>{var z;return(z=e.popperOffset)!=null?z:l.props.popperOffset}),P=O(()=>{var z;return(z=e.popperClass)!=null?z:l.props.popperClass}),D=O(()=>{var z;return(z=e.showTimeout)!=null?z:l.props.showTimeout}),k=O(()=>{var z;return(z=e.hideTimeout)!=null?z:l.props.hideTimeout}),L=()=>{var z,V,W;return(W=(V=(z=m.value)==null?void 0:z.popperRef)==null?void 0:V.popperInstanceRef)==null?void 0:W.destroy()},R=z=>{z||L()},N=()=>{l.props.menuTrigger==="hover"&&l.props.mode==="horizontal"||l.props.collapse&&l.props.mode==="vertical"||e.disabled||l.handleSubMenuClick({index:e.index,indexPath:n.value,active:E.value})},I=(z,V=D.value)=>{var W;if(z.type!=="focus"){if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"||e.disabled){c.mouseInChild.value=!0;return}c.mouseInChild.value=!0,h==null||h(),{stop:h}=qf(()=>{l.openMenu(e.index,n.value)},V),b.value&&((W=a.value.vnode.el)==null||W.dispatchEvent(new MouseEvent("mouseenter")))}},B=(z=!1)=>{var V;if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"){c.mouseInChild.value=!1;return}h==null||h(),c.mouseInChild.value=!1,{stop:h}=qf(()=>!f.value&&l.closeMenu(e.index,n.value),k.value),b.value&&z&&((V=c.handleMouseleave)==null||V.call(c,!0))};Ne(()=>l.props.collapse,z=>R(!!z));{const z=W=>{d.value[W.index]=W},V=W=>{delete d.value[W.index]};Yt(`subMenu:${r.uid}`,{addSubMenu:z,removeSubMenu:V,handleMouseleave:B,mouseInChild:f,level:c.level+1})}return i({opened:_}),Lt(()=>{l.addSubMenu(A),c.addSubMenu(A)}),Bi(()=>{c.removeSubMenu(A),l.removeSubMenu(A)}),()=>{var z;const V=[(z=t.title)==null?void 0:z.call(t),dt(ut,{class:o.e("icon-arrow"),style:{transform:_.value?e.expandCloseIcon&&e.expandOpenIcon||e.collapseCloseIcon&&e.collapseOpenIcon&&l.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>Et(y.value)?dt(r.appContext.components[y.value]):dt(y.value)})],W=l.isMenuPopup?dt(Ta,{ref:m,visible:_.value,effect:"light",pure:!0,offset:T.value,showArrow:!1,persistent:!0,popperClass:P.value,placement:v.value,teleported:b.value,fallbackPlacements:S.value,transition:w.value,gpuAcceleration:!1},{content:()=>{var G;return dt("div",{class:[s.m(C.value),s.m("popup-container"),P.value],onMouseenter:q=>I(q,100),onMouseleave:()=>B(!0),onFocus:q=>I(q,100)},[dt("ul",{class:[s.b(),s.m("popup"),s.m(`popup-${v.value}`)],style:M.value},[(G=t.default)==null?void 0:G.call(t)])])},default:()=>dt("div",{class:o.e("title"),onClick:N},V)}):dt(ht,{},[dt("div",{class:o.e("title"),ref:p,onClick:N},V),dt(e3,{},{default:()=>{var G;return Nt(dt("ul",{role:"menu",class:[s.b(),s.m("inline")],style:M.value},[(G=t.default)==null?void 0:G.call(t)]),[[_i,_.value]])}})]);return dt("li",{class:[o.b(),o.is("active",E.value),o.is("opened",_.value),o.is("disabled",e.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:_.value,onMouseenter:I,onMouseleave:()=>B(),onFocus:I},[W])}}});const oit=je({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:be(Array),default:()=>Er([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:zi,default:()=>oje},popperEffect:{type:be(String),default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300}}),sE=e=>ct(e)&&e.every(t=>Et(t)),lit={close:(e,t)=>Et(e)&&sE(t),open:(e,t)=>Et(e)&&sE(t),select:(e,t,i,r)=>Et(e)&&sE(t)&&Ri(i)&&(r===void 0||r instanceof Promise)};var cit=ce({name:"ElMenu",props:oit,emits:lit,setup(e,{emit:t,slots:i,expose:r}){const n=Ut(),a=n.appContext.config.globalProperties.$router,s=j(),o=Ve("menu"),l=Ve("sub-menu"),c=j(-1),u=j(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),d=j(e.defaultActive),h=j({}),f=j({}),p=O(()=>e.mode==="horizontal"||e.mode==="vertical"&&e.collapse),m=()=>{const L=d.value&&h.value[d.value];if(!L||e.mode==="horizontal"||e.collapse)return;L.indexPath.forEach(N=>{const I=f.value[N];I&&v(N,I.indexPath)})},v=(L,R)=>{u.value.includes(L)||(e.uniqueOpened&&(u.value=u.value.filter(N=>R.includes(N))),u.value.push(L),t("open",L,R))},y=L=>{const R=u.value.indexOf(L);R!==-1&&u.value.splice(R,1)},x=(L,R)=>{y(L),t("close",L,R)},b=({index:L,indexPath:R})=>{u.value.includes(L)?x(L,R):v(L,R)},w=L=>{(e.mode==="horizontal"||e.collapse)&&(u.value=[]);const{index:R,indexPath:N}=L;if(!(mn(R)||mn(N)))if(e.router&&a){const I=L.route||R,B=a.push(I).then(z=>(z||(d.value=R),z));t("select",R,N,{index:R,indexPath:N,route:I},B)}else d.value=R,t("select",R,N,{index:R,indexPath:N})},S=L=>{const R=h.value,N=R[L]||d.value&&R[d.value]||R[e.defaultActive];N?d.value=N.index:d.value=L},_=L=>{const R=getComputedStyle(L),N=Number.parseInt(R.marginLeft,10),I=Number.parseInt(R.marginRight,10);return L.offsetWidth+N+I||0},E=()=>{var L,R;if(!s.value)return-1;const N=Array.from((R=(L=s.value)==null?void 0:L.childNodes)!=null?R:[]).filter(ae=>ae.nodeName!=="#comment"&&(ae.nodeName!=="#text"||ae.nodeValue)),I=64,B=getComputedStyle(s.value),z=Number.parseInt(B.paddingLeft,10),V=Number.parseInt(B.paddingRight,10),W=s.value.clientWidth-z-V;let G=0,q=0;return N.forEach((ae,J)=>{G+=_(ae),G<=W-I&&(q=J+1)}),q===N.length?-1:q},C=L=>f.value[L].indexPath,A=(L,R=33.34)=>{let N;return()=>{N&&clearTimeout(N),N=setTimeout(()=>{L()},R)}};let M=!0;const T=()=>{if(c.value===E())return;const L=()=>{c.value=-1,ft(()=>{c.value=E()})};M?L():A(L)(),M=!1};Ne(()=>e.defaultActive,L=>{h.value[L]||(d.value=""),S(L)}),Ne(()=>e.collapse,L=>{L&&(u.value=[])}),Ne(h.value,m);let P;Ca(()=>{e.mode==="horizontal"&&e.ellipsis?P=gr(s,T).stop:P==null||P()});const D=j(!1);{const L=B=>{f.value[B.index]=B},R=B=>{delete f.value[B.index]};Yt("rootMenu",bi({props:e,openedMenus:u,items:h,subMenus:f,activeIndex:d,isMenuPopup:p,addMenuItem:B=>{h.value[B.index]=B},removeMenuItem:B=>{delete h.value[B.index]},addSubMenu:L,removeSubMenu:R,openMenu:v,closeMenu:x,handleMenuItemClick:w,handleSubMenuClick:b})),Yt(`subMenu:${n.uid}`,{addSubMenu:L,removeSubMenu:R,mouseInChild:D,level:0})}Lt(()=>{e.mode==="horizontal"&&new tit(n.vnode.el,o.namespace.value)}),r({open:R=>{const{indexPath:N}=f.value[R];N.forEach(I=>v(I,N))},close:y,handleResize:T});const k=YQ(e,0);return()=>{var L,R;let N=(R=(L=i.default)==null?void 0:L.call(i))!=null?R:[];const I=[];if(e.mode==="horizontal"&&s.value){const V=eh(N),W=c.value===-1?V:V.slice(0,c.value),G=c.value===-1?[]:V.slice(c.value);G!=null&&G.length&&e.ellipsis&&(N=W,I.push(dt(A8,{index:"sub-menu-more",class:l.e("hide-arrow"),popperOffset:e.popperOffset},{title:()=>dt(ut,{class:l.e("icon-more")},{default:()=>dt(e.ellipsisIcon)}),default:()=>G})))}const B=e.closeOnClickOutside?[[Nu,()=>{u.value.length&&(D.value||(u.value.forEach(V=>t("close",V,C(V))),u.value=[]))}]]:[],z=Nt(dt("ul",{key:String(e.collapse),role:"menubar",ref:s,style:k.value,class:{[o.b()]:!0,[o.m(e.mode)]:!0,[o.m("collapse")]:e.collapse}},[...N,...I]),B);return e.collapseTransition&&e.mode==="vertical"?dt(nit,()=>z):z}}});const uit=je({index:{type:be([String,null]),default:null},route:{type:be([String,Object])},disabled:Boolean}),dit={click:e=>Et(e.index)&&ct(e.indexPath)},oE="ElMenuItem",hit=ce({name:oE,components:{ElTooltip:Ta},props:uit,emits:dit,setup(e,{emit:t}){const i=Ut(),r=rt("rootMenu"),n=Ve("menu"),a=Ve("menu-item");r||bn(oE,"can not inject root menu");const{parentMenu:s,indexPath:o}=qQ(i,Di(e,"index")),l=rt(`subMenu:${s.value.uid}`);l||bn(oE,"can not inject sub menu");const c=O(()=>e.index===r.activeIndex),u=bi({index:e.index,indexPath:o,active:c}),d=()=>{e.disabled||(r.handleMenuItemClick({index:e.index,indexPath:o.value,route:e.route}),t("click",u))};return Lt(()=>{l.addSubMenu(u),r.addMenuItem(u)}),Bi(()=>{l.removeSubMenu(u),r.removeMenuItem(u)}),{parentMenu:s,rootMenu:r,active:c,nsMenu:n,nsMenuItem:a,handleClick:d}}});function fit(e,t,i,r,n,a){const s=Ht("el-tooltip");return F(),K("li",{class:U([e.nsMenuItem.b(),e.nsMenuItem.is("active",e.active),e.nsMenuItem.is("disabled",e.disabled)]),role:"menuitem",tabindex:"-1",onClick:e.handleClick},[e.parentMenu.type.name==="ElMenu"&&e.rootMenu.props.collapse&&e.$slots.title?(F(),De(s,{key:0,effect:e.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:ve(()=>[Ee(e.$slots,"title")]),default:ve(()=>[ie("div",{class:U(e.nsMenu.be("tooltip","trigger"))},[Ee(e.$slots,"default")],2)]),_:3},8,["effect"])):(F(),K(ht,{key:1},[Ee(e.$slots,"default"),Ee(e.$slots,"title")],64))],10,["onClick"])}var KQ=Ze(hit,[["render",fit],["__file","menu-item.vue"]]);const pit={title:String},mit="ElMenuItemGroup",vit=ce({name:mit,props:pit,setup(){return{ns:Ve("menu-item-group")}}});function git(e,t,i,r,n,a){return F(),K("li",{class:U(e.ns.b())},[ie("div",{class:U(e.ns.e("title"))},[e.$slots.title?Ee(e.$slots,"title",{key:1}):(F(),K(ht,{key:0},[Xt(Ye(e.title),1)],64))],2),ie("ul",null,[Ee(e.$slots,"default")])],2)}var XQ=Ze(vit,[["render",git],["__file","menu-item-group.vue"]]);const yit=Rt(cit,{MenuItem:KQ,MenuItemGroup:XQ,SubMenu:A8}),bit=Tr(KQ),wit=Tr(XQ),xit=Tr(A8),_it=je({icon:{type:zi,default:()=>IHe},title:String,content:{type:String,default:""}}),Sit={back:()=>!0},Cit=ce({name:"ElPageHeader"}),Eit=ce({...Cit,props:_it,emits:Sit,setup(e,{emit:t}){const i=In(),{t:r}=di(),n=Ve("page-header"),a=O(()=>[n.b(),{[n.m("has-breadcrumb")]:!!i.breadcrumb,[n.m("has-extra")]:!!i.extra,[n.is("contentful")]:!!i.default}]);function s(){t("back")}return(o,l)=>(F(),K("div",{class:U(g(a))},[o.$slots.breadcrumb?(F(),K("div",{key:0,class:U(g(n).e("breadcrumb"))},[Ee(o.$slots,"breadcrumb")],2)):Ae("v-if",!0),ie("div",{class:U(g(n).e("header"))},[ie("div",{class:U(g(n).e("left"))},[ie("div",{class:U(g(n).e("back")),role:"button",tabindex:"0",onClick:s},[o.icon||o.$slots.icon?(F(),K("div",{key:0,"aria-label":o.title||g(r)("el.pageHeader.title"),class:U(g(n).e("icon"))},[Ee(o.$slots,"icon",{},()=>[o.icon?(F(),De(g(ut),{key:0},{default:ve(()=>[(F(),De(jt(o.icon)))]),_:1})):Ae("v-if",!0)])],10,["aria-label"])):Ae("v-if",!0),ie("div",{class:U(g(n).e("title"))},[Ee(o.$slots,"title",{},()=>[Xt(Ye(o.title||g(r)("el.pageHeader.title")),1)])],2)],2),ne(g(BQ),{direction:"vertical"}),ie("div",{class:U(g(n).e("content"))},[Ee(o.$slots,"content",{},()=>[Xt(Ye(o.content),1)])],2)],2),o.$slots.extra?(F(),K("div",{key:0,class:U(g(n).e("extra"))},[Ee(o.$slots,"extra")],2)):Ae("v-if",!0)],2),o.$slots.default?(F(),K("div",{key:1,class:U(g(n).e("main"))},[Ee(o.$slots,"default")],2)):Ae("v-if",!0)],2))}});var Ait=Ze(Eit,[["__file","page-header.vue"]]);const Mit=Rt(Ait),QQ=Symbol("elPaginationKey"),Tit=je({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:zi}}),Pit={click:e=>e instanceof MouseEvent},Dit=ce({name:"ElPaginationPrev"}),Iit=ce({...Dit,props:Tit,emits:Pit,setup(e){const t=e,{t:i}=di(),r=O(()=>t.disabled||t.currentPage<=1);return(n,a)=>(F(),K("button",{type:"button",class:"btn-prev",disabled:g(r),"aria-label":n.prevText||g(i)("el.pagination.prev"),"aria-disabled":g(r),onClick:s=>n.$emit("click",s)},[n.prevText?(F(),K("span",{key:0},Ye(n.prevText),1)):(F(),De(g(ut),{key:1},{default:ve(()=>[(F(),De(jt(n.prevIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var Oit=Ze(Iit,[["__file","prev.vue"]]);const Rit=je({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:zi}}),kit=ce({name:"ElPaginationNext"}),Lit=ce({...kit,props:Rit,emits:["click"],setup(e){const t=e,{t:i}=di(),r=O(()=>t.disabled||t.currentPage===t.pageCount||t.pageCount===0);return(n,a)=>(F(),K("button",{type:"button",class:"btn-next",disabled:g(r),"aria-label":n.nextText||g(i)("el.pagination.next"),"aria-disabled":g(r),onClick:s=>n.$emit("click",s)},[n.nextText?(F(),K("span",{key:0},Ye(n.nextText),1)):(F(),De(g(ut),{key:1},{default:ve(()=>[(F(),De(jt(n.nextIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var Bit=Ze(Lit,[["__file","next.vue"]]);const JQ=Symbol("ElSelectGroup"),m0=Symbol("ElSelect");function Nit(e,t){const i=rt(m0),r=rt(JQ,{disabled:!1}),n=O(()=>u(wa(i.props.modelValue),e.value)),a=O(()=>{var f;if(i.props.multiple){const p=wa((f=i.props.modelValue)!=null?f:[]);return!n.value&&p.length>=i.props.multipleLimit&&i.props.multipleLimit>0}else return!1}),s=O(()=>e.label||(Ri(e.value)?"":e.value)),o=O(()=>e.value||e.label||""),l=O(()=>e.disabled||t.groupDisabled||a.value),c=Ut(),u=(f=[],p)=>{if(Ri(e.value)){const m=i.props.valueKey;return f&&f.some(v=>Ui(Nr(v,m))===Nr(p,m))}else return f&&f.includes(p)},d=()=>{!e.disabled&&!r.disabled&&(i.states.hoveringIndex=i.optionsArray.indexOf(c.proxy))},h=f=>{const p=new RegExp(LI(f),"i");t.visible=p.test(s.value)||e.created};return Ne(()=>s.value,()=>{!e.created&&!i.props.remote&&i.setSelected()}),Ne(()=>e.value,(f,p)=>{const{remote:m,valueKey:v}=i.props;if(f!==p&&(i.onOptionDestroy(p,c.proxy),i.onOptionCreate(c.proxy)),!e.created&&!m){if(v&&Ri(f)&&Ri(p)&&f[v]===p[v])return;i.setSelected()}}),Ne(()=>r.disabled,()=>{t.groupDisabled=r.disabled},{immediate:!0}),{select:i,currentLabel:s,currentValue:o,itemSelected:n,isDisabled:l,hoverItem:d,updateOption:h}}const Fit=ce({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(e){const t=Ve("select"),i=ua(),r=O(()=>[t.be("dropdown","item"),t.is("disabled",g(o)),t.is("selected",g(s)),t.is("hovering",g(h))]),n=bi({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:a,itemSelected:s,isDisabled:o,select:l,hoverItem:c,updateOption:u}=Nit(e,n),{visible:d,hover:h}=Gn(n),f=Ut().proxy;l.onOptionCreate(f),Bi(()=>{const m=f.value,{selected:v}=l.states,x=(l.props.multiple?v:[v]).some(b=>b.value===f.value);ft(()=>{l.states.cachedOptions.get(m)===f&&!x&&l.states.cachedOptions.delete(m)}),l.onOptionDestroy(m,f)});function p(){o.value||l.handleOptionSelect(f)}return{ns:t,id:i,containerKls:r,currentLabel:a,itemSelected:s,isDisabled:o,select:l,hoverItem:c,updateOption:u,visible:d,hover:h,selectOptionClick:p,states:n}}});function zit(e,t,i,r,n,a){return Nt((F(),K("li",{id:e.id,class:U(e.containerKls),role:"option","aria-disabled":e.isDisabled||void 0,"aria-selected":e.itemSelected,onMousemove:e.hoverItem,onClick:xt(e.selectOptionClick,["stop"])},[Ee(e.$slots,"default",{},()=>[ie("span",null,Ye(e.currentLabel),1)])],42,["id","aria-disabled","aria-selected","onMousemove","onClick"])),[[_i,e.visible]])}var M8=Ze(Fit,[["render",zit],["__file","option.vue"]]);const Vit=ce({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const e=rt(m0),t=Ve("select"),i=O(()=>e.props.popperClass),r=O(()=>e.props.multiple),n=O(()=>e.props.fitInputWidth),a=j("");function s(){var o;a.value=`${(o=e.selectRef)==null?void 0:o.offsetWidth}px`}return Lt(()=>{s(),gr(e.selectRef,s)}),{ns:t,minWidth:a,popperClass:i,isMultiple:r,isFitInputWidth:n}}});function Uit(e,t,i,r,n,a){return F(),K("div",{class:U([e.ns.b("dropdown"),e.ns.is("multiple",e.isMultiple),e.popperClass]),style:mt({[e.isFitInputWidth?"width":"minWidth"]:e.minWidth})},[e.$slots.header?(F(),K("div",{key:0,class:U(e.ns.be("dropdown","header"))},[Ee(e.$slots,"header")],2)):Ae("v-if",!0),Ee(e.$slots,"default"),e.$slots.footer?(F(),K("div",{key:1,class:U(e.ns.be("dropdown","footer"))},[Ee(e.$slots,"footer")],2)):Ae("v-if",!0)],6)}var Hit=Ze(Vit,[["render",Uit],["__file","select-dropdown.vue"]]);const jit=11,Wit=(e,t)=>{const{t:i}=di(),r=ua(),n=Ve("select"),a=Ve("input"),s=bi({inputValue:"",options:new Map,cachedOptions:new Map,optionValues:[],selected:[],selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),o=j(null),l=j(null),c=j(null),u=j(null),d=j(null),h=j(null),f=j(null),p=j(null),m=j(null),v=j(null),y=j(null),x=j(null),{isComposing:b,handleCompositionStart:w,handleCompositionUpdate:S,handleCompositionEnd:_}=qS({afterComposition:Me=>tt(Me)}),{wrapperRef:E,isFocused:C,handleBlur:A}=mp(d,{beforeFocus(){return N.value},afterFocus(){e.automaticDropdown&&!M.value&&(M.value=!0,s.menuVisibleOnFocus=!0)},beforeBlur(Me){var Je,St;return((Je=c.value)==null?void 0:Je.isFocusInsideContent(Me))||((St=u.value)==null?void 0:St.isFocusInsideContent(Me))},afterBlur(){M.value=!1,s.menuVisibleOnFocus=!1}}),M=j(!1),T=j(),{form:P,formItem:D}=Ya(),{inputId:k}=kl(e,{formItemContext:D}),{valueOnClear:L,isEmptyValue:R}=YS(e),N=O(()=>e.disabled||(P==null?void 0:P.disabled)),I=O(()=>ct(e.modelValue)?e.modelValue.length>0:!R(e.modelValue)),B=O(()=>{var Me;return(Me=P==null?void 0:P.statusIcon)!=null?Me:!1}),z=O(()=>e.clearable&&!N.value&&s.inputHovering&&I.value),V=O(()=>e.remote&&e.filterable&&!e.remoteShowSuffix?"":e.suffixIcon),W=O(()=>n.is("reverse",V.value&&M.value)),G=O(()=>(D==null?void 0:D.validateState)||""),q=O(()=>WI[G.value]),ae=O(()=>e.remote?300:0),J=O(()=>e.loading?e.loadingText||i("el.select.loading"):e.remote&&!s.inputValue&&s.options.size===0?!1:e.filterable&&s.inputValue&&s.options.size>0&&$.value===0?e.noMatchText||i("el.select.noMatch"):s.options.size===0?e.noDataText||i("el.select.noData"):null),$=O(()=>te.value.filter(Me=>Me.visible).length),te=O(()=>{const Me=Array.from(s.options.values()),Je=[];return s.optionValues.forEach(St=>{const Gt=Me.findIndex(zt=>zt.value===St);Gt>-1&&Je.push(Me[Gt])}),Je.length>=Me.length?Je:Me}),Q=O(()=>Array.from(s.cachedOptions.values())),pe=O(()=>{const Me=te.value.filter(Je=>!Je.created).some(Je=>Je.currentLabel===s.inputValue);return e.filterable&&e.allowCreate&&s.inputValue!==""&&!Me}),me=()=>{e.filterable&&Wt(e.filterMethod)||e.filterable&&e.remote&&Wt(e.remoteMethod)||te.value.forEach(Me=>{var Je;(Je=Me.updateOption)==null||Je.call(Me,s.inputValue)})},le=on(),Z=O(()=>["small"].includes(le.value)?"small":"default"),oe=O({get(){return M.value&&J.value!==!1},set(Me){M.value=Me}}),ge=O(()=>{if(e.multiple&&!Qi(e.modelValue))return wa(e.modelValue).length===0&&!s.inputValue;const Me=ct(e.modelValue)?e.modelValue[0]:e.modelValue;return e.filterable||Qi(Me)?!s.inputValue:!0}),Ie=O(()=>{var Me;const Je=(Me=e.placeholder)!=null?Me:i("el.select.placeholder");return e.multiple||!I.value?Je:s.selectedLabel}),we=O(()=>G9?null:"mouseenter");Ne(()=>e.modelValue,(Me,Je)=>{e.multiple&&e.filterable&&!e.reserveKeyword&&(s.inputValue="",xe("")),Le(),!jn(Me,Je)&&e.validateEvent&&(D==null||D.validate("change").catch(St=>void 0))},{flush:"post",deep:!0}),Ne(()=>M.value,Me=>{Me?xe(s.inputValue):(s.inputValue="",s.previousQuery=null,s.isBeforeHide=!0),t("visible-change",Me)}),Ne(()=>s.options.entries(),()=>{var Me;if(!si)return;const Je=((Me=o.value)==null?void 0:Me.querySelectorAll("input"))||[];(!e.filterable&&!e.defaultFirstOption&&!Qi(e.modelValue)||!Array.from(Je).includes(document.activeElement))&&Le(),e.defaultFirstOption&&(e.filterable||e.remote)&&$.value&&Se()},{flush:"post"}),Ne(()=>s.hoveringIndex,Me=>{gt(Me)&&Me>-1?T.value=te.value[Me]||{}:T.value={},te.value.forEach(Je=>{Je.hover=T.value===Je})}),Ca(()=>{s.isBeforeHide||me()});const xe=Me=>{s.previousQuery===Me||b.value||(s.previousQuery=Me,e.filterable&&Wt(e.filterMethod)?e.filterMethod(Me):e.filterable&&e.remote&&Wt(e.remoteMethod)&&e.remoteMethod(Me),e.defaultFirstOption&&(e.filterable||e.remote)&&$.value?ft(Se):ft(ee))},Se=()=>{const Me=te.value.filter(zt=>zt.visible&&!zt.disabled&&!zt.states.groupDisabled),Je=Me.find(zt=>zt.created),St=Me[0],Gt=te.value.map(zt=>zt.value);s.hoveringIndex=He(Gt,Je||St)},Le=()=>{if(e.multiple)s.selectedLabel="";else{const Je=ct(e.modelValue)?e.modelValue[0]:e.modelValue,St=Be(Je);s.selectedLabel=St.currentLabel,s.selected=[St];return}const Me=[];Qi(e.modelValue)||wa(e.modelValue).forEach(Je=>{Me.push(Be(Je))}),s.selected=Me},Be=Me=>{let Je;const St=aT(Me);for(let Li=s.cachedOptions.size-1;Li>=0;Li--){const hi=Q.value[Li];if(St?Nr(hi.value,e.valueKey)===Nr(Me,e.valueKey):hi.value===Me){Je={value:Me,currentLabel:hi.currentLabel,get isDisabled(){return hi.isDisabled}};break}}if(Je)return Je;const Gt=St?Me.label:Me??"";return{value:Me,currentLabel:Gt}},ee=()=>{s.hoveringIndex=te.value.findIndex(Me=>s.selected.some(Je=>Qr(Je)===Qr(Me)))},X=()=>{s.selectionWidth=l.value.getBoundingClientRect().width},ue=()=>{s.calculatorWidth=h.value.getBoundingClientRect().width},Oe=()=>{s.collapseItemWidth=y.value.getBoundingClientRect().width},Y=()=>{var Me,Je;(Je=(Me=c.value)==null?void 0:Me.updatePopper)==null||Je.call(Me)},qe=()=>{var Me,Je;(Je=(Me=u.value)==null?void 0:Me.updatePopper)==null||Je.call(Me)},et=()=>{s.inputValue.length>0&&!M.value&&(M.value=!0),xe(s.inputValue)},tt=Me=>{if(s.inputValue=Me.target.value,e.remote)ze();else return et()},ze=gs(()=>{et()},ae.value),vt=Me=>{jn(e.modelValue,Me)||t(nr,Me)},_e=Me=>IS(Me,Je=>{const St=s.cachedOptions.get(Je);return St&&!St.disabled&&!St.states.groupDisabled}),Fe=Me=>{if(e.multiple&&Me.code!==at.delete&&Me.target.value.length<=0){const Je=wa(e.modelValue).slice(),St=_e(Je);if(St<0)return;const Gt=Je[St];Je.splice(St,1),t(Vt,Je),vt(Je),t("remove-tag",Gt)}},he=(Me,Je)=>{const St=s.selected.indexOf(Je);if(St>-1&&!N.value){const Gt=wa(e.modelValue).slice();Gt.splice(St,1),t(Vt,Gt),vt(Gt),t("remove-tag",Je.value)}Me.stopPropagation(),Pt()},ke=Me=>{Me.stopPropagation();const Je=e.multiple?[]:L.value;if(e.multiple)for(const St of s.selected)St.isDisabled&&Je.push(St.value);t(Vt,Je),vt(Je),s.hoveringIndex=-1,M.value=!1,t("clear"),Pt()},se=Me=>{var Je;if(e.multiple){const St=wa((Je=e.modelValue)!=null?Je:[]).slice(),Gt=He(St,Me);Gt>-1?St.splice(Gt,1):(e.multipleLimit<=0||St.length<e.multipleLimit)&&St.push(Me.value),t(Vt,St),vt(St),Me.created&&xe(""),e.filterable&&!e.reserveKeyword&&(s.inputValue="")}else t(Vt,Me.value),vt(Me.value),M.value=!1;Pt(),!M.value&&ft(()=>{yt(Me)})},He=(Me=[],Je)=>Qi(Je)?-1:Ri(Je.value)?Me.findIndex(St=>jn(Nr(St,e.valueKey),Qr(Je))):Me.indexOf(Je.value),yt=Me=>{var Je,St,Gt,zt,Li;const hi=ct(Me)?Me[0]:Me;let wi=null;if(hi!=null&&hi.value){const fi=te.value.filter(Jr=>Jr.value===hi.value);fi.length>0&&(wi=fi[0].$el)}if(c.value&&wi){const fi=(zt=(Gt=(St=(Je=c.value)==null?void 0:Je.popperRef)==null?void 0:St.contentRef)==null?void 0:Gt.querySelector)==null?void 0:zt.call(Gt,`.${n.be("dropdown","wrap")}`);fi&&NI(fi,wi)}(Li=x.value)==null||Li.handleScroll()},Te=Me=>{s.options.set(Me.value,Me),s.cachedOptions.set(Me.value,Me)},$e=(Me,Je)=>{s.options.get(Me)===Je&&s.options.delete(Me)},st=O(()=>{var Me,Je;return(Je=(Me=c.value)==null?void 0:Me.popperRef)==null?void 0:Je.contentRef}),wt=()=>{s.isBeforeHide=!1,ft(()=>yt(s.selected))},Pt=()=>{var Me;(Me=d.value)==null||Me.focus()},_t=()=>{var Me;if(M.value){M.value=!1,ft(()=>{var Je;return(Je=d.value)==null?void 0:Je.blur()});return}(Me=d.value)==null||Me.blur()},Vi=Me=>{ke(Me)},$r=Me=>{if(M.value=!1,C.value){const Je=new FocusEvent("focus",Me);ft(()=>A(Je))}},Ka=()=>{s.inputValue.length>0?s.inputValue="":M.value=!1},ar=()=>{N.value||(G9&&(s.inputHovering=!0),s.menuVisibleOnFocus?s.menuVisibleOnFocus=!1:M.value=!M.value)},fa=()=>{if(!M.value)ar();else{const Me=te.value[s.hoveringIndex];Me&&!Me.disabled&&!Me.states.groupDisabled&&se(Me)}},Qr=Me=>Ri(Me.value)?Nr(Me.value,e.valueKey):Me.value,$o=O(()=>te.value.filter(Me=>Me.visible).every(Me=>Me.disabled)),kh=O(()=>e.multiple?e.collapseTags?s.selected.slice(0,e.maxCollapseTags):s.selected:[]),Ll=O(()=>e.multiple?e.collapseTags?s.selected.slice(e.maxCollapseTags):[]:[]),Bl=Me=>{if(!M.value){M.value=!0;return}if(!(s.options.size===0||s.filteredOptionsCount===0||b.value)&&!$o.value){Me==="next"?(s.hoveringIndex++,s.hoveringIndex===s.options.size&&(s.hoveringIndex=0)):Me==="prev"&&(s.hoveringIndex--,s.hoveringIndex<0&&(s.hoveringIndex=s.options.size-1));const Je=te.value[s.hoveringIndex];(Je.disabled===!0||Je.states.groupDisabled===!0||!Je.visible)&&Bl(Me),ft(()=>yt(T.value))}},Ce=()=>{if(!l.value)return 0;const Me=window.getComputedStyle(l.value);return Number.parseFloat(Me.gap||"6px")},Ke=O(()=>{const Me=Ce();return{maxWidth:`${y.value&&e.maxCollapseTags===1?s.selectionWidth-s.collapseItemWidth-Me:s.selectionWidth}px`}}),nt=O(()=>({maxWidth:`${s.selectionWidth}px`})),We=O(()=>({width:`${Math.max(s.calculatorWidth,jit)}px`}));return gr(l,X),gr(h,ue),gr(m,Y),gr(E,Y),gr(v,qe),gr(y,Oe),Lt(()=>{Le()}),{inputId:k,contentId:r,nsSelect:n,nsInput:a,states:s,isFocused:C,expanded:M,optionsArray:te,hoverOption:T,selectSize:le,filteredOptionsCount:$,resetCalculatorWidth:ue,updateTooltip:Y,updateTagTooltip:qe,debouncedOnInputChange:ze,onInput:tt,deletePrevTag:Fe,deleteTag:he,deleteSelected:ke,handleOptionSelect:se,scrollToOption:yt,hasModelValue:I,shouldShowPlaceholder:ge,currentPlaceholder:Ie,mouseEnterEventName:we,needStatusIcon:B,showClose:z,iconComponent:V,iconReverse:W,validateState:G,validateIcon:q,showNewOption:pe,updateOptions:me,collapseTagSize:Z,setSelected:Le,selectDisabled:N,emptyText:J,handleCompositionStart:w,handleCompositionUpdate:S,handleCompositionEnd:_,onOptionCreate:Te,onOptionDestroy:$e,handleMenuEnter:wt,focus:Pt,blur:_t,handleClearClick:Vi,handleClickOutside:$r,handleEsc:Ka,toggleMenu:ar,selectOption:fa,getValueKey:Qr,navigateOptions:Bl,dropdownMenuVisible:oe,showTagList:kh,collapseTagList:Ll,tagStyle:Ke,collapseTagStyle:nt,inputStyle:We,popperRef:st,inputRef:d,tooltipRef:c,tagTooltipRef:u,calculatorRef:h,prefixRef:f,suffixRef:p,selectRef:o,wrapperRef:E,selectionRef:l,scrollbarRef:x,menuRef:m,tagMenuRef:v,collapseItemRef:y}};var Git=ce({name:"ElOptions",setup(e,{slots:t}){const i=rt(m0);let r=[];return()=>{var n,a;const s=(n=t.default)==null?void 0:n.call(t),o=[];function l(c){ct(c)&&c.forEach(u=>{var d,h,f,p;const m=(d=(u==null?void 0:u.type)||{})==null?void 0:d.name;m==="ElOptionGroup"?l(!Et(u.children)&&!ct(u.children)&&Wt((h=u.children)==null?void 0:h.default)?(f=u.children)==null?void 0:f.default():u.children):m==="ElOption"?o.push((p=u.props)==null?void 0:p.value):ct(u.children)&&l(u.children)})}return s.length&&l((a=s[0])==null?void 0:a.children),jn(o,r)||(r=o,i&&(i.states.optionValues=o)),s}}});const $it=je({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:wn,effect:{type:be(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:be(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:Nn.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:zi,default:Ih},fitInputWidth:Boolean,suffixIcon:{type:zi,default:Ku},tagType:{...ep.type,default:"info"},tagEffect:{...ep.effect,default:"light"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,showArrow:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:be(String),values:Xu,default:"bottom-start"},fallbackPlacements:{type:be(Array),default:["bottom-start","top-start","right","left"]},appendTo:String,...h0,...ha(["ariaLabel"])}),Sz="ElSelect",Zit=ce({name:Sz,componentName:Sz,components:{ElSelectMenu:Hit,ElOption:M8,ElOptions:Git,ElTag:F1,ElScrollbar:Bc,ElTooltip:Ta,ElIcon:ut},directives:{ClickOutside:Nu},props:$it,emits:[Vt,nr,"remove-tag","clear","visible-change","focus","blur"],setup(e,{emit:t}){const i=O(()=>{const{modelValue:s,multiple:o}=e,l=o?[]:void 0;return ct(s)?o?s:l:o?l:s}),r=bi({...Gn(e),modelValue:i}),n=Wit(r,t);Yt(m0,bi({props:r,states:n.states,optionsArray:n.optionsArray,handleOptionSelect:n.handleOptionSelect,onOptionCreate:n.onOptionCreate,onOptionDestroy:n.onOptionDestroy,selectRef:n.selectRef,setSelected:n.setSelected}));const a=O(()=>e.multiple?n.states.selected.map(s=>s.currentLabel):n.states.selectedLabel);return{...n,modelValue:i,selectedLabel:a}}});function qit(e,t,i,r,n,a){const s=Ht("el-tag"),o=Ht("el-tooltip"),l=Ht("el-icon"),c=Ht("el-option"),u=Ht("el-options"),d=Ht("el-scrollbar"),h=Ht("el-select-menu"),f=O_("click-outside");return Nt((F(),K("div",{ref:"selectRef",class:U([e.nsSelect.b(),e.nsSelect.m(e.selectSize)]),[gg(e.mouseEnterEventName)]:p=>e.states.inputHovering=!0,onMouseleave:p=>e.states.inputHovering=!1},[ne(o,{ref:"tooltipRef",visible:e.dropdownMenuVisible,placement:e.placement,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,pure:"",trigger:"click",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:e.persistent,"append-to":e.appendTo,"show-arrow":e.showArrow,offset:e.offset,onBeforeShow:e.handleMenuEnter,onHide:p=>e.states.isBeforeHide=!1},{default:ve(()=>{var p;return[ie("div",{ref:"wrapperRef",class:U([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled)]),onClick:xt(e.toggleMenu,["prevent"])},[e.$slots.prefix?(F(),K("div",{key:0,ref:"prefixRef",class:U(e.nsSelect.e("prefix"))},[Ee(e.$slots,"prefix")],2)):Ae("v-if",!0),ie("div",{ref:"selectionRef",class:U([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.$slots.prefix&&!!e.states.selected.length)])},[e.multiple?Ee(e.$slots,"tag",{key:0},()=>[(F(!0),K(ht,null,Qt(e.showTagList,m=>(F(),K("div",{key:e.getValueKey(m),class:U(e.nsSelect.e("selected-item"))},[ne(s,{closable:!e.selectDisabled&&!m.isDisabled,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:mt(e.tagStyle),onClose:v=>e.deleteTag(v,m)},{default:ve(()=>[ie("span",{class:U(e.nsSelect.e("tags-text"))},[Ee(e.$slots,"label",{label:m.currentLabel,value:m.value},()=>[Xt(Ye(m.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),e.collapseTags&&e.states.selected.length>e.maxCollapseTags?(F(),De(o,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:ve(()=>[ie("div",{ref:"collapseItemRef",class:U(e.nsSelect.e("selected-item"))},[ne(s,{closable:!1,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:mt(e.collapseTagStyle)},{default:ve(()=>[ie("span",{class:U(e.nsSelect.e("tags-text"))}," + "+Ye(e.states.selected.length-e.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:ve(()=>[ie("div",{ref:"tagMenuRef",class:U(e.nsSelect.e("selection"))},[(F(!0),K(ht,null,Qt(e.collapseTagList,m=>(F(),K("div",{key:e.getValueKey(m),class:U(e.nsSelect.e("selected-item"))},[ne(s,{class:"in-tooltip",closable:!e.selectDisabled&&!m.isDisabled,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",onClose:v=>e.deleteTag(v,m)},{default:ve(()=>[ie("span",{class:U(e.nsSelect.e("tags-text"))},[Ee(e.$slots,"label",{label:m.currentLabel,value:m.value},()=>[Xt(Ye(m.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):Ae("v-if",!0)]):Ae("v-if",!0),e.selectDisabled?Ae("v-if",!0):(F(),K("div",{key:1,class:U([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable)])},[Nt(ie("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":m=>e.states.inputValue=m,type:"text",name:e.name,class:U([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,autocomplete:e.autocomplete,style:mt(e.inputStyle),role:"combobox",readonly:!e.filterable,spellcheck:"false","aria-activedescendant":((p=e.hoverOption)==null?void 0:p.id)||"","aria-controls":e.contentId,"aria-expanded":e.dropdownMenuVisible,"aria-label":e.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onKeydown:[Hi(xt(m=>e.navigateOptions("next"),["stop","prevent"]),["down"]),Hi(xt(m=>e.navigateOptions("prev"),["stop","prevent"]),["up"]),Hi(xt(e.handleEsc,["stop","prevent"]),["esc"]),Hi(xt(e.selectOption,["stop","prevent"]),["enter"]),Hi(xt(e.deletePrevTag,["stop"]),["delete"])],onCompositionstart:e.handleCompositionStart,onCompositionupdate:e.handleCompositionUpdate,onCompositionend:e.handleCompositionEnd,onInput:e.onInput,onClick:xt(e.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","name","disabled","autocomplete","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onClick"]),[[j5,e.states.inputValue]]),e.filterable?(F(),K("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:U(e.nsSelect.e("input-calculator")),textContent:Ye(e.states.inputValue)},null,10,["textContent"])):Ae("v-if",!0)],2)),e.shouldShowPlaceholder?(F(),K("div",{key:2,class:U([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue)])},[e.hasModelValue?Ee(e.$slots,"label",{key:0,label:e.currentPlaceholder,value:e.modelValue},()=>[ie("span",null,Ye(e.currentPlaceholder),1)]):(F(),K("span",{key:1},Ye(e.currentPlaceholder),1))],2)):Ae("v-if",!0)],2),ie("div",{ref:"suffixRef",class:U(e.nsSelect.e("suffix"))},[e.iconComponent&&!e.showClose?(F(),De(l,{key:0,class:U([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.iconReverse])},{default:ve(()=>[(F(),De(jt(e.iconComponent)))]),_:1},8,["class"])):Ae("v-if",!0),e.showClose&&e.clearIcon?(F(),De(l,{key:1,class:U([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.nsSelect.e("clear")]),onClick:e.handleClearClick},{default:ve(()=>[(F(),De(jt(e.clearIcon)))]),_:1},8,["class","onClick"])):Ae("v-if",!0),e.validateState&&e.validateIcon&&e.needStatusIcon?(F(),De(l,{key:2,class:U([e.nsInput.e("icon"),e.nsInput.e("validateIcon")])},{default:ve(()=>[(F(),De(jt(e.validateIcon)))]),_:1},8,["class"])):Ae("v-if",!0)],2)],10,["onClick"])]}),content:ve(()=>[ne(h,{ref:"menuRef"},{default:ve(()=>[e.$slots.header?(F(),K("div",{key:0,class:U(e.nsSelect.be("dropdown","header")),onClick:xt(()=>{},["stop"])},[Ee(e.$slots,"header")],10,["onClick"])):Ae("v-if",!0),Nt(ne(d,{id:e.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":e.nsSelect.be("dropdown","wrap"),"view-class":e.nsSelect.be("dropdown","list"),class:U([e.nsSelect.is("empty",e.filteredOptionsCount===0)]),role:"listbox","aria-label":e.ariaLabel,"aria-orientation":"vertical"},{default:ve(()=>[e.showNewOption?(F(),De(c,{key:0,value:e.states.inputValue,created:!0},null,8,["value"])):Ae("v-if",!0),ne(u,null,{default:ve(()=>[Ee(e.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[_i,e.states.options.size>0&&!e.loading]]),e.$slots.loading&&e.loading?(F(),K("div",{key:1,class:U(e.nsSelect.be("dropdown","loading"))},[Ee(e.$slots,"loading")],2)):e.loading||e.filteredOptionsCount===0?(F(),K("div",{key:2,class:U(e.nsSelect.be("dropdown","empty"))},[Ee(e.$slots,"empty",{},()=>[ie("span",null,Ye(e.emptyText),1)])],2)):Ae("v-if",!0),e.$slots.footer?(F(),K("div",{key:3,class:U(e.nsSelect.be("dropdown","footer")),onClick:xt(()=>{},["stop"])},[Ee(e.$slots,"footer")],10,["onClick"])):Ae("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],16,["onMouseleave"])),[[f,e.handleClickOutside,e.popperRef]])}var Yit=Ze(Zit,[["render",qit],["__file","select.vue"]]);const Kit=ce({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(e){const t=Ve("select"),i=j(null),r=Ut(),n=j([]);Yt(JQ,bi({...Gn(e)}));const a=O(()=>n.value.some(c=>c.visible===!0)),s=c=>{var u,d;return((u=c.type)==null?void 0:u.name)==="ElOption"&&!!((d=c.component)!=null&&d.proxy)},o=c=>{const u=wa(c),d=[];return u.forEach(h=>{var f,p;s(h)?d.push(h.component.proxy):(f=h.children)!=null&&f.length?d.push(...o(h.children)):(p=h.component)!=null&&p.subTree&&d.push(...o(h.component.subTree))}),d},l=()=>{n.value=o(r.subTree)};return Lt(()=>{l()}),GZ(i,l,{attributes:!0,subtree:!0,childList:!0}),{groupRef:i,visible:a,ns:t}}});function Xit(e,t,i,r,n,a){return Nt((F(),K("ul",{ref:"groupRef",class:U(e.ns.be("group","wrap"))},[ie("li",{class:U(e.ns.be("group","title"))},Ye(e.label),3),ie("li",null,[ie("ul",{class:U(e.ns.b("group"))},[Ee(e.$slots,"default")],2)])],2)),[[_i,e.visible]])}var eJ=Ze(Kit,[["render",Xit],["__file","option-group.vue"]]);const tp=Rt(Yit,{Option:M8,OptionGroup:eJ}),p_=Tr(M8),Qit=Tr(eJ),T8=()=>rt(QQ,{}),Jit=je({pageSize:{type:Number,required:!0},pageSizes:{type:be(Array),default:()=>Er([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,teleported:Boolean,size:{type:String,values:Lc},appendSizeTo:String}),ert=ce({name:"ElPaginationSizes"}),trt=ce({...ert,props:Jit,emits:["page-size-change"],setup(e,{emit:t}){const i=e,{t:r}=di(),n=Ve("pagination"),a=T8(),s=j(i.pageSize);Ne(()=>i.pageSizes,(c,u)=>{if(!jn(c,u)&&ct(c)){const d=c.includes(i.pageSize)?i.pageSize:i.pageSizes[0];t("page-size-change",d)}}),Ne(()=>i.pageSize,c=>{s.value=c});const o=O(()=>i.pageSizes);function l(c){var u;c!==s.value&&(s.value=c,(u=a.handleSizeChange)==null||u.call(a,Number(c)))}return(c,u)=>(F(),K("span",{class:U(g(n).e("sizes"))},[ne(g(tp),{"model-value":s.value,disabled:c.disabled,"popper-class":c.popperClass,size:c.size,teleported:c.teleported,"validate-event":!1,"append-to":c.appendSizeTo,onChange:l},{default:ve(()=>[(F(!0),K(ht,null,Qt(g(o),d=>(F(),De(g(p_),{key:d,value:d,label:d+g(r)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","teleported","append-to"])],2))}});var irt=Ze(trt,[["__file","sizes.vue"]]);const rrt=je({size:{type:String,values:Lc}}),nrt=ce({name:"ElPaginationJumper"}),art=ce({...nrt,props:rrt,setup(e){const{t}=di(),i=Ve("pagination"),{pageCount:r,disabled:n,currentPage:a,changeEvent:s}=T8(),o=j(),l=O(()=>{var d;return(d=o.value)!=null?d:a==null?void 0:a.value});function c(d){o.value=d?+d:""}function u(d){d=Math.trunc(+d),s==null||s(d),o.value=void 0}return(d,h)=>(F(),K("span",{class:U(g(i).e("jump")),disabled:g(n)},[ie("span",{class:U([g(i).e("goto")])},Ye(g(t)("el.pagination.goto")),3),ne(g(Ha),{size:d.size,class:U([g(i).e("editor"),g(i).is("in-pagination")]),min:1,max:g(r),disabled:g(n),"model-value":g(l),"validate-event":!1,"aria-label":g(t)("el.pagination.page"),type:"number","onUpdate:modelValue":c,onChange:u},null,8,["size","class","max","disabled","model-value","aria-label"]),ie("span",{class:U([g(i).e("classifier")])},Ye(g(t)("el.pagination.pageClassifier")),3)],10,["disabled"]))}});var srt=Ze(art,[["__file","jumper.vue"]]);const ort=je({total:{type:Number,default:1e3}}),lrt=ce({name:"ElPaginationTotal"}),crt=ce({...lrt,props:ort,setup(e){const{t}=di(),i=Ve("pagination"),{disabled:r}=T8();return(n,a)=>(F(),K("span",{class:U(g(i).e("total")),disabled:g(r)},Ye(g(t)("el.pagination.total",{total:n.total})),11,["disabled"]))}});var urt=Ze(crt,[["__file","total.vue"]]);const drt=je({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),hrt=ce({name:"ElPaginationPager"}),frt=ce({...hrt,props:drt,emits:["change"],setup(e,{emit:t}){const i=e,r=Ve("pager"),n=Ve("icon"),{t:a}=di(),s=j(!1),o=j(!1),l=j(!1),c=j(!1),u=j(!1),d=j(!1),h=O(()=>{const w=i.pagerCount,S=(w-1)/2,_=Number(i.currentPage),E=Number(i.pageCount);let C=!1,A=!1;E>w&&(_>w-S&&(C=!0),_<E-S&&(A=!0));const M=[];if(C&&!A){const T=E-(w-2);for(let P=T;P<E;P++)M.push(P)}else if(!C&&A)for(let T=2;T<w;T++)M.push(T);else if(C&&A){const T=Math.floor(w/2)-1;for(let P=_-T;P<=_+T;P++)M.push(P)}else for(let T=2;T<E;T++)M.push(T);return M}),f=O(()=>["more","btn-quickprev",n.b(),r.is("disabled",i.disabled)]),p=O(()=>["more","btn-quicknext",n.b(),r.is("disabled",i.disabled)]),m=O(()=>i.disabled?-1:0);Ca(()=>{const w=(i.pagerCount-1)/2;s.value=!1,o.value=!1,i.pageCount>i.pagerCount&&(i.currentPage>i.pagerCount-w&&(s.value=!0),i.currentPage<i.pageCount-w&&(o.value=!0))});function v(w=!1){i.disabled||(w?l.value=!0:c.value=!0)}function y(w=!1){w?u.value=!0:d.value=!0}function x(w){const S=w.target;if(S.tagName.toLowerCase()==="li"&&Array.from(S.classList).includes("number")){const _=Number(S.textContent);_!==i.currentPage&&t("change",_)}else S.tagName.toLowerCase()==="li"&&Array.from(S.classList).includes("more")&&b(w)}function b(w){const S=w.target;if(S.tagName.toLowerCase()==="ul"||i.disabled)return;let _=Number(S.textContent);const E=i.pageCount,C=i.currentPage,A=i.pagerCount-2;S.className.includes("more")&&(S.className.includes("quickprev")?_=C-A:S.className.includes("quicknext")&&(_=C+A)),Number.isNaN(+_)||(_<1&&(_=1),_>E&&(_=E)),_!==C&&t("change",_)}return(w,S)=>(F(),K("ul",{class:U(g(r).b()),onClick:b,onKeyup:Hi(x,["enter"])},[w.pageCount>0?(F(),K("li",{key:0,class:U([[g(r).is("active",w.currentPage===1),g(r).is("disabled",w.disabled)],"number"]),"aria-current":w.currentPage===1,"aria-label":g(a)("el.pagination.currentPage",{pager:1}),tabindex:g(m)}," 1 ",10,["aria-current","aria-label","tabindex"])):Ae("v-if",!0),s.value?(F(),K("li",{key:1,class:U(g(f)),tabindex:g(m),"aria-label":g(a)("el.pagination.prevPages",{pager:w.pagerCount-2}),onMouseenter:_=>v(!0),onMouseleave:_=>l.value=!1,onFocus:_=>y(!0),onBlur:_=>u.value=!1},[(l.value||u.value)&&!w.disabled?(F(),De(g(mh),{key:0})):(F(),De(g(uF),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):Ae("v-if",!0),(F(!0),K(ht,null,Qt(g(h),_=>(F(),K("li",{key:_,class:U([[g(r).is("active",w.currentPage===_),g(r).is("disabled",w.disabled)],"number"]),"aria-current":w.currentPage===_,"aria-label":g(a)("el.pagination.currentPage",{pager:_}),tabindex:g(m)},Ye(_),11,["aria-current","aria-label","tabindex"]))),128)),o.value?(F(),K("li",{key:2,class:U(g(p)),tabindex:g(m),"aria-label":g(a)("el.pagination.nextPages",{pager:w.pagerCount-2}),onMouseenter:_=>v(),onMouseleave:_=>c.value=!1,onFocus:_=>y(),onBlur:_=>d.value=!1},[(c.value||d.value)&&!w.disabled?(F(),De(g(vh),{key:0})):(F(),De(g(uF),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):Ae("v-if",!0),w.pageCount>1?(F(),K("li",{key:3,class:U([[g(r).is("active",w.currentPage===w.pageCount),g(r).is("disabled",w.disabled)],"number"]),"aria-current":w.currentPage===w.pageCount,"aria-label":g(a)("el.pagination.currentPage",{pager:w.pageCount}),tabindex:g(m)},Ye(w.pageCount),11,["aria-current","aria-label","tabindex"])):Ae("v-if",!0)],42,["onKeyup"]))}});var prt=Ze(frt,[["__file","pager.vue"]]);const ts=e=>typeof e!="number",mrt=je({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:e=>gt(e)&&Math.trunc(e)===e&&e>4&&e<22&&e%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:be(Array),default:()=>Er([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:zi,default:()=>ph},nextText:{type:String,default:""},nextIcon:{type:zi,default:()=>hs},teleported:{type:Boolean,default:!0},small:Boolean,size:wn,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean,appendSizeTo:String}),vrt={"update:current-page":e=>gt(e),"update:page-size":e=>gt(e),"size-change":e=>gt(e),change:(e,t)=>gt(e)&&gt(t),"current-change":e=>gt(e),"prev-click":e=>gt(e),"next-click":e=>gt(e)},Cz="ElPagination";var grt=ce({name:Cz,props:mrt,emits:vrt,setup(e,{emit:t,slots:i}){const{t:r}=di(),n=Ve("pagination"),a=Ut().vnode.props||{},s=nX(),o=O(()=>{var S;return e.small?"small":(S=e.size)!=null?S:s.value});th({from:"small",replacement:"size",version:"3.0.0",scope:"el-pagination",ref:"https://element-plus.org/zh-CN/component/pagination.html"},O(()=>!!e.small));const l="onUpdate:currentPage"in a||"onUpdate:current-page"in a||"onCurrentChange"in a,c="onUpdate:pageSize"in a||"onUpdate:page-size"in a||"onSizeChange"in a,u=O(()=>{if(ts(e.total)&&ts(e.pageCount)||!ts(e.currentPage)&&!l)return!1;if(e.layout.includes("sizes")){if(ts(e.pageCount)){if(!ts(e.total)&&!ts(e.pageSize)&&!c)return!1}else if(!c)return!1}return!0}),d=j(ts(e.defaultPageSize)?10:e.defaultPageSize),h=j(ts(e.defaultCurrentPage)?1:e.defaultCurrentPage),f=O({get(){return ts(e.pageSize)?d.value:e.pageSize},set(S){ts(e.pageSize)&&(d.value=S),c&&(t("update:page-size",S),t("size-change",S))}}),p=O(()=>{let S=0;return ts(e.pageCount)?ts(e.total)||(S=Math.max(1,Math.ceil(e.total/f.value))):S=e.pageCount,S}),m=O({get(){return ts(e.currentPage)?h.value:e.currentPage},set(S){let _=S;S<1?_=1:S>p.value&&(_=p.value),ts(e.currentPage)&&(h.value=_),l&&(t("update:current-page",_),t("current-change",_))}});Ne(p,S=>{m.value>S&&(m.value=S)}),Ne([m,f],S=>{t("change",...S)},{flush:"post"});function v(S){m.value=S}function y(S){f.value=S;const _=p.value;m.value>_&&(m.value=_)}function x(){e.disabled||(m.value-=1,t("prev-click",m.value))}function b(){e.disabled||(m.value+=1,t("next-click",m.value))}function w(S,_){S&&(S.props||(S.props={}),S.props.class=[S.props.class,_].join(" "))}return Yt(QQ,{pageCount:p,disabled:O(()=>e.disabled),currentPage:m,changeEvent:v,handleSizeChange:y}),()=>{var S,_;if(!u.value)return r("el.pagination.deprecationWarning"),null;if(!e.layout||e.hideOnSinglePage&&p.value<=1)return null;const E=[],C=[],A=dt("div",{class:n.e("rightwrapper")},C),M={prev:dt(Oit,{disabled:e.disabled,currentPage:m.value,prevText:e.prevText,prevIcon:e.prevIcon,onClick:x}),jumper:dt(srt,{size:o.value}),pager:dt(prt,{currentPage:m.value,pageCount:p.value,pagerCount:e.pagerCount,onChange:v,disabled:e.disabled}),next:dt(Bit,{disabled:e.disabled,currentPage:m.value,pageCount:p.value,nextText:e.nextText,nextIcon:e.nextIcon,onClick:b}),sizes:dt(irt,{pageSize:f.value,pageSizes:e.pageSizes,popperClass:e.popperClass,disabled:e.disabled,teleported:e.teleported,size:o.value,appendSizeTo:e.appendSizeTo}),slot:(_=(S=i==null?void 0:i.default)==null?void 0:S.call(i))!=null?_:null,total:dt(urt,{total:ts(e.total)?0:e.total})},T=e.layout.split(",").map(D=>D.trim());let P=!1;return T.forEach(D=>{if(D==="->"){P=!0;return}P?C.push(M[D]):E.push(M[D])}),w(E[0],n.is("first")),w(E[E.length-1],n.is("last")),P&&C.length>0&&(w(C[0],n.is("first")),w(C[C.length-1],n.is("last")),E.push(A)),dt("div",{class:[n.b(),n.is("background",e.background),n.m(o.value)]},E)}}});const yrt=Rt(grt),brt=je({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:PT,default:"primary"},cancelButtonType:{type:String,values:PT,default:"text"},icon:{type:zi,default:()=>hje},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},teleported:Nn.teleported,persistent:Nn.persistent,width:{type:[String,Number],default:150}}),wrt={confirm:e=>e instanceof MouseEvent,cancel:e=>e instanceof MouseEvent},xrt=ce({name:"ElPopconfirm"}),_rt=ce({...xrt,props:brt,emits:wrt,setup(e,{emit:t}){const i=e,{t:r}=di(),n=Ve("popconfirm"),a=j(),s=()=>{var h,f;(f=(h=a.value)==null?void 0:h.onClose)==null||f.call(h)},o=O(()=>({width:zr(i.width)})),l=h=>{t("confirm",h),s()},c=h=>{t("cancel",h),s()},u=O(()=>i.confirmButtonText||r("el.popconfirm.confirmButtonText")),d=O(()=>i.cancelButtonText||r("el.popconfirm.cancelButtonText"));return(h,f)=>(F(),De(g(Ta),$t({ref_key:"tooltipRef",ref:a,trigger:"click",effect:"light"},h.$attrs,{"popper-class":`${g(n).namespace.value}-popover`,"popper-style":g(o),teleported:h.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":h.hideAfter,persistent:h.persistent}),{content:ve(()=>[ie("div",{class:U(g(n).b())},[ie("div",{class:U(g(n).e("main"))},[!h.hideIcon&&h.icon?(F(),De(g(ut),{key:0,class:U(g(n).e("icon")),style:mt({color:h.iconColor})},{default:ve(()=>[(F(),De(jt(h.icon)))]),_:1},8,["class","style"])):Ae("v-if",!0),Xt(" "+Ye(h.title),1)],2),ie("div",{class:U(g(n).e("action"))},[Ee(h.$slots,"actions",{confirm:l,cancel:c},()=>[ne(g(Wn),{size:"small",type:h.cancelButtonType==="text"?"":h.cancelButtonType,text:h.cancelButtonType==="text",onClick:c},{default:ve(()=>[Xt(Ye(g(d)),1)]),_:1},8,["type","text"]),ne(g(Wn),{size:"small",type:h.confirmButtonType==="text"?"":h.confirmButtonType,text:h.confirmButtonType==="text",onClick:l},{default:ve(()=>[Xt(Ye(g(u)),1)]),_:1},8,["type","text"])])],2)],2)]),default:ve(()=>[h.$slots.reference?Ee(h.$slots,"reference",{key:0}):Ae("v-if",!0)]),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var Srt=Ze(_rt,[["__file","popconfirm.vue"]]);const Crt=Rt(Srt),Ert=je({trigger:N1.trigger,placement:x2.placement,disabled:N1.disabled,visible:Nn.visible,transition:Nn.transition,popperOptions:x2.popperOptions,tabindex:x2.tabindex,content:Nn.content,popperStyle:Nn.popperStyle,popperClass:Nn.popperClass,enterable:{...Nn.enterable,default:!0},effect:{...Nn.effect,default:"light"},teleported:Nn.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),Art={"update:visible":e=>Gi(e),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},Mrt="onUpdate:visible",Trt=ce({name:"ElPopover"}),Prt=ce({...Trt,props:Ert,emits:Art,setup(e,{expose:t,emit:i}){const r=e,n=O(()=>r[Mrt]),a=Ve("popover"),s=j(),o=O(()=>{var v;return(v=g(s))==null?void 0:v.popperRef}),l=O(()=>[{width:zr(r.width)},r.popperStyle]),c=O(()=>[a.b(),r.popperClass,{[a.m("plain")]:!!r.content}]),u=O(()=>r.transition===`${a.namespace.value}-fade-in-linear`),d=()=>{var v;(v=s.value)==null||v.hide()},h=()=>{i("before-enter")},f=()=>{i("before-leave")},p=()=>{i("after-enter")},m=()=>{i("update:visible",!1),i("after-leave")};return t({popperRef:o,hide:d}),(v,y)=>(F(),De(g(Ta),$t({ref_key:"tooltipRef",ref:s},v.$attrs,{trigger:v.trigger,placement:v.placement,disabled:v.disabled,visible:v.visible,transition:v.transition,"popper-options":v.popperOptions,tabindex:v.tabindex,content:v.content,offset:v.offset,"show-after":v.showAfter,"hide-after":v.hideAfter,"auto-close":v.autoClose,"show-arrow":v.showArrow,"aria-label":v.title,effect:v.effect,enterable:v.enterable,"popper-class":g(c),"popper-style":g(l),teleported:v.teleported,persistent:v.persistent,"gpu-acceleration":g(u),"onUpdate:visible":g(n),onBeforeShow:h,onBeforeHide:f,onShow:p,onHide:m}),{content:ve(()=>[v.title?(F(),K("div",{key:0,class:U(g(a).e("title")),role:"title"},Ye(v.title),3)):Ae("v-if",!0),Ee(v.$slots,"default",{},()=>[Xt(Ye(v.content),1)])]),default:ve(()=>[v.$slots.reference?Ee(v.$slots,"reference",{key:0}):Ae("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var Drt=Ze(Prt,[["__file","popover.vue"]]);const Ez=(e,t)=>{const i=t.arg||t.value,r=i==null?void 0:i.popperRef;r&&(r.triggerRef=e)};var Irt={mounted(e,t){Ez(e,t)},updated(e,t){Ez(e,t)}};const Ort="popover",tJ=Bje(Irt,Ort),Rrt=Rt(Drt,{directive:tJ}),krt=je({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:be(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:be([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:be(Function),default:e=>`${e}%`}}),Lrt=ce({name:"ElProgress"}),Brt=ce({...Lrt,props:krt,setup(e){const t=e,i={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},r=Ve("progress"),n=O(()=>{const b={width:`${t.percentage}%`,animationDuration:`${t.duration}s`},w=x(t.percentage);return w.includes("gradient")?b.background=w:b.backgroundColor=w,b}),a=O(()=>(t.strokeWidth/t.width*100).toFixed(1)),s=O(()=>["circle","dashboard"].includes(t.type)?Number.parseInt(`${50-Number.parseFloat(a.value)/2}`,10):0),o=O(()=>{const b=s.value,w=t.type==="dashboard";return`
          M 50 50
          m 0 ${w?"":"-"}${b}
          a ${b} ${b} 0 1 1 0 ${w?"-":""}${b*2}
          a ${b} ${b} 0 1 1 0 ${w?"":"-"}${b*2}
          `}),l=O(()=>2*Math.PI*s.value),c=O(()=>t.type==="dashboard"?.75:1),u=O(()=>`${-1*l.value*(1-c.value)/2}px`),d=O(()=>({strokeDasharray:`${l.value*c.value}px, ${l.value}px`,strokeDashoffset:u.value})),h=O(()=>({strokeDasharray:`${l.value*c.value*(t.percentage/100)}px, ${l.value}px`,strokeDashoffset:u.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),f=O(()=>{let b;return t.color?b=x(t.percentage):b=i[t.status]||i.default,b}),p=O(()=>t.status==="warning"?US:t.type==="line"?t.status==="success"?zI:Ih:t.status==="success"?Py:Ml),m=O(()=>t.type==="line"?12+t.strokeWidth*.4:t.width*.111111+2),v=O(()=>t.format(t.percentage));function y(b){const w=100/b.length;return b.map((_,E)=>Et(_)?{color:_,percentage:(E+1)*w}:_).sort((_,E)=>_.percentage-E.percentage)}const x=b=>{var w;const{color:S}=t;if(Wt(S))return S(b);if(Et(S))return S;{const _=y(S);for(const E of _)if(E.percentage>b)return E.color;return(w=_[_.length-1])==null?void 0:w.color}};return(b,w)=>(F(),K("div",{class:U([g(r).b(),g(r).m(b.type),g(r).is(b.status),{[g(r).m("without-text")]:!b.showText,[g(r).m("text-inside")]:b.textInside}]),role:"progressbar","aria-valuenow":b.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[b.type==="line"?(F(),K("div",{key:0,class:U(g(r).b("bar"))},[ie("div",{class:U(g(r).be("bar","outer")),style:mt({height:`${b.strokeWidth}px`})},[ie("div",{class:U([g(r).be("bar","inner"),{[g(r).bem("bar","inner","indeterminate")]:b.indeterminate},{[g(r).bem("bar","inner","striped")]:b.striped},{[g(r).bem("bar","inner","striped-flow")]:b.stripedFlow}]),style:mt(g(n))},[(b.showText||b.$slots.default)&&b.textInside?(F(),K("div",{key:0,class:U(g(r).be("bar","innerText"))},[Ee(b.$slots,"default",{percentage:b.percentage},()=>[ie("span",null,Ye(g(v)),1)])],2)):Ae("v-if",!0)],6)],6)],2)):(F(),K("div",{key:1,class:U(g(r).b("circle")),style:mt({height:`${b.width}px`,width:`${b.width}px`})},[(F(),K("svg",{viewBox:"0 0 100 100"},[ie("path",{class:U(g(r).be("circle","track")),d:g(o),stroke:`var(${g(r).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":b.strokeLinecap,"stroke-width":g(a),fill:"none",style:mt(g(d))},null,14,["d","stroke","stroke-linecap","stroke-width"]),ie("path",{class:U(g(r).be("circle","path")),d:g(o),stroke:g(f),fill:"none",opacity:b.percentage?1:0,"stroke-linecap":b.strokeLinecap,"stroke-width":g(a),style:mt(g(h))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(b.showText||b.$slots.default)&&!b.textInside?(F(),K("div",{key:2,class:U(g(r).e("text")),style:mt({fontSize:`${g(m)}px`})},[Ee(b.$slots,"default",{percentage:b.percentage},()=>[b.status?(F(),De(g(ut),{key:1},{default:ve(()=>[(F(),De(jt(g(p))))]),_:1})):(F(),K("span",{key:0},Ye(g(v)),1))])],6)):Ae("v-if",!0)],10,["aria-valuenow"]))}});var Nrt=Ze(Brt,[["__file","progress.vue"]]);const iJ=Rt(Nrt),Frt=je({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:be([Array,Object]),default:()=>Er(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:be([Array,Object]),default:()=>[Ew,Ew,Ew]},voidIcon:{type:zi,default:()=>Mje},disabledVoidIcon:{type:zi,default:()=>Ew},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:be(Array),default:()=>Er(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:wn,clearable:Boolean,...ha(["ariaLabel"])}),zrt={[nr]:e=>gt(e),[Vt]:e=>gt(e)},Vrt=ce({name:"ElRate"}),Urt=ce({...Vrt,props:Frt,emits:zrt,setup(e,{expose:t,emit:i}){const r=e;function n(R,N){const I=V=>Ri(V),B=Object.keys(N).map(V=>+V).filter(V=>{const W=N[V];return(I(W)?W.excluded:!1)?R<V:R<=V}).sort((V,W)=>V-W),z=N[B[0]];return I(z)&&z.value||z}const a=rt(vp,void 0),s=rt(Ac,void 0),o=on(),l=Ve("rate"),{inputId:c,isLabeledByFormItem:u}=kl(r,{formItemContext:s}),d=j(r.modelValue),h=j(-1),f=j(!0),p=O(()=>[l.b(),l.m(o.value)]),m=O(()=>r.disabled||(a==null?void 0:a.disabled)),v=O(()=>l.cssVarBlock({"void-color":r.voidColor,"disabled-void-color":r.disabledVoidColor,"fill-color":w.value})),y=O(()=>{let R="";return r.showScore?R=r.scoreTemplate.replace(/\{\s*value\s*\}/,m.value?`${r.modelValue}`:`${d.value}`):r.showText&&(R=r.texts[Math.ceil(d.value)-1]),R}),x=O(()=>r.modelValue*100-Math.floor(r.modelValue)*100),b=O(()=>ct(r.colors)?{[r.lowThreshold]:r.colors[0],[r.highThreshold]:{value:r.colors[1],excluded:!0},[r.max]:r.colors[2]}:r.colors),w=O(()=>{const R=n(d.value,b.value);return Ri(R)?"":R}),S=O(()=>{let R="";return m.value?R=`${x.value}%`:r.allowHalf&&(R="50%"),{color:w.value,width:R}}),_=O(()=>{let R=ct(r.icons)?[...r.icons]:{...r.icons};return R=$d(R),ct(R)?{[r.lowThreshold]:R[0],[r.highThreshold]:{value:R[1],excluded:!0},[r.max]:R[2]}:R}),E=O(()=>n(r.modelValue,_.value)),C=O(()=>m.value?Et(r.disabledVoidIcon)?r.disabledVoidIcon:$d(r.disabledVoidIcon):Et(r.voidIcon)?r.voidIcon:$d(r.voidIcon)),A=O(()=>n(d.value,_.value));function M(R){const N=m.value&&x.value>0&&R-1<r.modelValue&&R>r.modelValue,I=r.allowHalf&&f.value&&R-.5<=d.value&&R>d.value;return N||I}function T(R){r.clearable&&R===r.modelValue&&(R=0),i(Vt,R),r.modelValue!==R&&i("change",R)}function P(R){m.value||(r.allowHalf&&f.value?T(d.value):T(R))}function D(R){if(m.value)return;let N=d.value;const I=R.code;return I===at.up||I===at.right?(r.allowHalf?N+=.5:N+=1,R.stopPropagation(),R.preventDefault()):(I===at.left||I===at.down)&&(r.allowHalf?N-=.5:N-=1,R.stopPropagation(),R.preventDefault()),N=N<0?0:N,N=N>r.max?r.max:N,i(Vt,N),i("change",N),N}function k(R,N){if(!m.value){if(r.allowHalf&&N){let I=N.target;Rs(I,l.e("item"))&&(I=I.querySelector(`.${l.e("icon")}`)),(I.clientWidth===0||Rs(I,l.e("decimal")))&&(I=I.parentNode),f.value=N.offsetX*2<=I.clientWidth,d.value=f.value?R-.5:R}else d.value=R;h.value=R}}function L(){m.value||(r.allowHalf&&(f.value=r.modelValue!==Math.floor(r.modelValue)),d.value=r.modelValue,h.value=-1)}return Ne(()=>r.modelValue,R=>{d.value=R,f.value=r.modelValue!==Math.floor(r.modelValue)}),r.modelValue||i(Vt,0),t({setCurrentValue:k,resetCurrentValue:L}),(R,N)=>{var I;return F(),K("div",{id:g(c),class:U([g(p),g(l).is("disabled",g(m))]),role:"slider","aria-label":g(u)?void 0:R.ariaLabel||"rating","aria-labelledby":g(u)?(I=g(s))==null?void 0:I.labelId:void 0,"aria-valuenow":d.value,"aria-valuetext":g(y)||void 0,"aria-valuemin":"0","aria-valuemax":R.max,tabindex:"0",style:mt(g(v)),onKeydown:D},[(F(!0),K(ht,null,Qt(R.max,(B,z)=>(F(),K("span",{key:z,class:U(g(l).e("item")),onMousemove:V=>k(B,V),onMouseleave:L,onClick:V=>P(B)},[ne(g(ut),{class:U([g(l).e("icon"),{hover:h.value===B},g(l).is("active",B<=d.value)])},{default:ve(()=>[M(B)?Ae("v-if",!0):(F(),K(ht,{key:0},[Nt((F(),De(jt(g(A)),null,null,512)),[[_i,B<=d.value]]),Nt((F(),De(jt(g(C)),null,null,512)),[[_i,!(B<=d.value)]])],64)),M(B)?(F(),K(ht,{key:1},[(F(),De(jt(g(C)),{class:U([g(l).em("decimal","box")])},null,8,["class"])),ne(g(ut),{style:mt(g(S)),class:U([g(l).e("icon"),g(l).e("decimal")])},{default:ve(()=>[(F(),De(jt(g(E))))]),_:1},8,["style","class"])],64)):Ae("v-if",!0)]),_:2},1032,["class"])],42,["onMousemove","onClick"]))),128)),R.showText||R.showScore?(F(),K("span",{key:0,class:U(g(l).e("text")),style:mt({color:R.textColor})},Ye(g(y)),7)):Ae("v-if",!0)],46,["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"])}}});var Hrt=Ze(Urt,[["__file","rate.vue"]]);const jrt=Rt(Hrt),Am={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},Az={[Am.success]:zHe,[Am.warning]:US,[Am.error]:VI,[Am.info]:UI},Wrt=je({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["success","warning","info","error"],default:"info"}}),Grt=ce({name:"ElResult"}),$rt=ce({...Grt,props:Wrt,setup(e){const t=e,i=Ve("result"),r=O(()=>{const n=t.icon,a=n&&Am[n]?Am[n]:"icon-info",s=Az[a]||Az["icon-info"];return{class:a,component:s}});return(n,a)=>(F(),K("div",{class:U(g(i).b())},[ie("div",{class:U(g(i).e("icon"))},[Ee(n.$slots,"icon",{},()=>[g(r).component?(F(),De(jt(g(r).component),{key:0,class:U(g(r).class)},null,8,["class"])):Ae("v-if",!0)])],2),n.title||n.$slots.title?(F(),K("div",{key:0,class:U(g(i).e("title"))},[Ee(n.$slots,"title",{},()=>[ie("p",null,Ye(n.title),1)])],2)):Ae("v-if",!0),n.subTitle||n.$slots["sub-title"]?(F(),K("div",{key:1,class:U(g(i).e("subtitle"))},[Ee(n.$slots,"sub-title",{},()=>[ie("p",null,Ye(n.subTitle),1)])],2)):Ae("v-if",!0),n.$slots.extra?(F(),K("div",{key:2,class:U(g(i).e("extra"))},[Ee(n.$slots,"extra")],2)):Ae("v-if",!0)],2))}});var Zrt=Ze($rt,[["__file","result.vue"]]);const qrt=Rt(Zrt);var Mz=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Yrt(e,t){return!!(e===t||Mz(e)&&Mz(t))}function Krt(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!Yrt(e[i],t[i]))return!1;return!0}function Xrt(e,t){t===void 0&&(t=Krt);var i=null;function r(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(i&&i.lastThis===this&&t(n,i.lastArgs))return i.lastResult;var s=e.apply(this,n);return i={lastResult:s,lastArgs:n,lastThis:this},s}return r.clear=function(){i=null},r}const rJ=()=>{const t=Ut().proxy.$props;return O(()=>{const i=(r,n,a)=>({});return t.perfMode?xy(i):Xrt(i)})},XT=50,m_="itemRendered",v_="scroll",Mm="forward",g_="backward",Ao="auto",r3="smart",U1="start",uc="center",H1="end",Rv="horizontal",P8="vertical",Qrt="ltr",Jm="rtl",j1="negative",D8="positive-ascending",I8="positive-descending",Jrt={[Rv]:"left",[P8]:"top"},ent=20,tnt={[Rv]:"deltaX",[P8]:"deltaY"},int=({atEndEdge:e,atStartEdge:t,layout:i},r)=>{let n,a=0;const s=l=>l<0&&t.value||l>0&&e.value;return{hasReachedEdge:s,onWheel:l=>{Jf(n);const c=l[tnt[i.value]];s(a)&&s(a+c)||(a+=c,BD()||l.preventDefault(),n=fh(()=>{r(a),a=0}))}}};var rnt=int;const QT=Ol({type:be([Number,Function]),required:!0}),JT=Ol({type:Number}),e5=Ol({type:Number,default:2}),nnt=Ol({type:String,values:["ltr","rtl"],default:"ltr"}),t5=Ol({type:Number,default:0}),y_=Ol({type:Number,required:!0}),nJ=Ol({type:String,values:["horizontal","vertical"],default:P8}),aJ=je({className:{type:String,default:""},containerElement:{type:be([String,Object]),default:"div"},data:{type:be(Array),default:()=>Er([])},direction:nnt,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:be([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),sJ=je({cache:e5,estimatedItemSize:JT,layout:nJ,initScrollOffset:t5,total:y_,itemSize:QT,...aJ}),i5={type:Number,default:6},oJ={type:Number,default:0},lJ={type:Number,default:2},zf=je({columnCache:e5,columnWidth:QT,estimatedColumnWidth:JT,estimatedRowHeight:JT,initScrollLeft:t5,initScrollTop:t5,itemKey:{type:be(Function),default:({columnIndex:e,rowIndex:t})=>`${t}:${e}`},rowCache:e5,rowHeight:QT,totalColumn:y_,totalRow:y_,hScrollbarSize:i5,vScrollbarSize:i5,scrollbarStartGap:oJ,scrollbarEndGap:lJ,role:String,...aJ}),cJ=je({alwaysOn:Boolean,class:String,layout:nJ,total:y_,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:i5,startGap:oJ,endGap:lJ,visible:Boolean}),Ef=(e,t)=>e<t?Mm:g_,W1=e=>e===Qrt||e===Jm||e===Rv,Tz=e=>e===Jm;let em=null;function b_(e=!1){if(em===null||e){const t=document.createElement("div"),i=t.style;i.width="50px",i.height="50px",i.overflow="scroll",i.direction="rtl";const r=document.createElement("div"),n=r.style;return n.width="100px",n.height="100px",t.appendChild(r),document.body.appendChild(t),t.scrollLeft>0?em=I8:(t.scrollLeft=1,t.scrollLeft===0?em=j1:em=D8),document.body.removeChild(t),em}return em}function ant({move:e,size:t,bar:i},r){const n={},a=`translate${i.axis}(${e}px)`;return n[i.size]=t,n.transform=a,n.msTransform=a,n.webkitTransform=a,r==="horizontal"?n.height="100%":n.width="100%",n}const snt=ce({name:"ElVirtualScrollBar",props:cJ,emits:["scroll","start-move","stop-move"],setup(e,{emit:t}){const i=O(()=>e.startGap+e.endGap),r=Ve("virtual-scrollbar"),n=Ve("scrollbar"),a=j(),s=j();let o=null,l=null;const c=bi({isDragging:!1,traveled:0}),u=O(()=>uX[e.layout]),d=O(()=>e.clientSize-g(i)),h=O(()=>({position:"absolute",width:`${Rv===e.layout?d.value:e.scrollbarSize}px`,height:`${Rv===e.layout?e.scrollbarSize:d.value}px`,[Jrt[e.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),f=O(()=>{const _=e.ratio,E=e.clientSize;if(_>=100)return Number.POSITIVE_INFINITY;if(_>=50)return _*E/100;const C=E/3;return Math.floor(Math.min(Math.max(_*E,ent),C))}),p=O(()=>{if(!Number.isFinite(f.value))return{display:"none"};const _=`${f.value}px`;return ant({bar:u.value,size:_,move:c.traveled},e.layout)}),m=O(()=>Math.floor(e.clientSize-f.value-g(i))),v=()=>{window.addEventListener("mousemove",w),window.addEventListener("mouseup",b);const _=g(s);_&&(l=document.onselectstart,document.onselectstart=()=>!1,_.addEventListener("touchmove",w,{passive:!0}),_.addEventListener("touchend",b))},y=()=>{window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",b),document.onselectstart=l,l=null;const _=g(s);_&&(_.removeEventListener("touchmove",w),_.removeEventListener("touchend",b))},x=_=>{_.stopImmediatePropagation(),!(_.ctrlKey||[1,2].includes(_.button))&&(c.isDragging=!0,c[u.value.axis]=_.currentTarget[u.value.offset]-(_[u.value.client]-_.currentTarget.getBoundingClientRect()[u.value.direction]),t("start-move"),v())},b=()=>{c.isDragging=!1,c[u.value.axis]=0,t("stop-move"),y()},w=_=>{const{isDragging:E}=c;if(!E||!s.value||!a.value)return;const C=c[u.value.axis];if(!C)return;Jf(o);const A=(a.value.getBoundingClientRect()[u.value.direction]-_[u.value.client])*-1,M=s.value[u.value.offset]-C,T=A-M;o=fh(()=>{c.traveled=Math.max(e.startGap,Math.min(T,m.value)),t("scroll",T,m.value)})},S=_=>{const E=Math.abs(_.target.getBoundingClientRect()[u.value.direction]-_[u.value.client]),C=s.value[u.value.offset]/2,A=E-C;c.traveled=Math.max(0,Math.min(A,m.value)),t("scroll",A,m.value)};return Ne(()=>e.scrollFrom,_=>{c.isDragging||(c.traveled=Math.ceil(_*m.value))}),Bi(()=>{y()}),()=>dt("div",{role:"presentation",ref:a,class:[r.b(),e.class,(e.alwaysOn||c.isDragging)&&"always-on"],style:h.value,onMousedown:xt(S,["stop","prevent"]),onTouchstartPrevent:x},dt("div",{ref:s,class:n.e("thumb"),style:p.value,onMousedown:x},[]))}});var r5=snt;const ont=({name:e,getOffset:t,getItemSize:i,getItemOffset:r,getEstimatedTotalSize:n,getStartIndexForOffset:a,getStopIndexForStartIndex:s,initCache:o,clearCache:l,validateProps:c})=>ce({name:e??"ElVirtualList",props:sJ,emits:[m_,v_],setup(u,{emit:d,expose:h}){c(u);const f=Ut(),p=Ve("vl"),m=j(o(u,f)),v=rJ(),y=j(),x=j(),b=j(),w=j({isScrolling:!1,scrollDir:"forward",scrollOffset:gt(u.initScrollOffset)?u.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:u.scrollbarAlwaysOn}),S=O(()=>{const{total:G,cache:q}=u,{isScrolling:ae,scrollDir:J,scrollOffset:$}=g(w);if(G===0)return[0,0,0,0];const te=a(u,$,g(m)),Q=s(u,te,$,g(m)),pe=!ae||J===g_?Math.max(1,q):1,me=!ae||J===Mm?Math.max(1,q):1;return[Math.max(0,te-pe),Math.max(0,Math.min(G-1,Q+me)),te,Q]}),_=O(()=>n(u,g(m))),E=O(()=>W1(u.layout)),C=O(()=>[{position:"relative",[`overflow-${E.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:u.direction,height:gt(u.height)?`${u.height}px`:u.height,width:gt(u.width)?`${u.width}px`:u.width},u.style]),A=O(()=>{const G=g(_),q=g(E);return{height:q?"100%":`${G}px`,pointerEvents:g(w).isScrolling?"none":void 0,width:q?`${G}px`:"100%"}}),M=O(()=>E.value?u.width:u.height),{onWheel:T}=rnt({atStartEdge:O(()=>w.value.scrollOffset<=0),atEndEdge:O(()=>w.value.scrollOffset>=_.value),layout:O(()=>u.layout)},G=>{var q,ae;(ae=(q=b.value).onMouseUp)==null||ae.call(q),N(Math.min(w.value.scrollOffset+G,_.value-M.value))});Oi(y,"wheel",T,{passive:!1});const P=()=>{const{total:G}=u;if(G>0){const[$,te,Q,pe]=g(S);d(m_,$,te,Q,pe)}const{scrollDir:q,scrollOffset:ae,updateRequested:J}=g(w);d(v_,q,ae,J)},D=G=>{const{clientHeight:q,scrollHeight:ae,scrollTop:J}=G.currentTarget,$=g(w);if($.scrollOffset===J)return;const te=Math.max(0,Math.min(J,ae-q));w.value={...$,isScrolling:!0,scrollDir:Ef($.scrollOffset,te),scrollOffset:te,updateRequested:!1},ft(z)},k=G=>{const{clientWidth:q,scrollLeft:ae,scrollWidth:J}=G.currentTarget,$=g(w);if($.scrollOffset===ae)return;const{direction:te}=u;let Q=ae;if(te===Jm)switch(b_()){case j1:{Q=-ae;break}case I8:{Q=J-q-ae;break}}Q=Math.max(0,Math.min(Q,J-q)),w.value={...$,isScrolling:!0,scrollDir:Ef($.scrollOffset,Q),scrollOffset:Q,updateRequested:!1},ft(z)},L=G=>{g(E)?k(G):D(G),P()},R=(G,q)=>{const ae=(_.value-M.value)/q*G;N(Math.min(_.value-M.value,ae))},N=G=>{G=Math.max(G,0),G!==g(w).scrollOffset&&(w.value={...g(w),scrollOffset:G,scrollDir:Ef(g(w).scrollOffset,G),updateRequested:!0},ft(z))},I=(G,q=Ao)=>{const{scrollOffset:ae}=g(w);G=Math.max(0,Math.min(G,u.total-1)),N(t(u,G,q,ae,g(m)))},B=G=>{const{direction:q,itemSize:ae,layout:J}=u,$=v.value(l&&ae,l&&J,l&&q);let te;if(Ma($,String(G)))te=$[G];else{const Q=r(u,G,g(m)),pe=i(u,G,g(m)),me=g(E),le=q===Jm,Z=me?Q:0;$[G]=te={position:"absolute",left:le?void 0:`${Z}px`,right:le?`${Z}px`:void 0,top:me?0:`${Q}px`,height:me?"100%":`${pe}px`,width:me?`${pe}px`:"100%"}}return te},z=()=>{w.value.isScrolling=!1,ft(()=>{v.value(-1,null,null)})},V=()=>{const G=y.value;G&&(G.scrollTop=0)};Lt(()=>{if(!si)return;const{initScrollOffset:G}=u,q=g(y);gt(G)&&q&&(g(E)?q.scrollLeft=G:q.scrollTop=G),P()}),Tl(()=>{const{direction:G,layout:q}=u,{scrollOffset:ae,updateRequested:J}=g(w),$=g(y);if(J&&$)if(q===Rv)if(G===Jm)switch(b_()){case j1:{$.scrollLeft=-ae;break}case D8:{$.scrollLeft=ae;break}default:{const{clientWidth:te,scrollWidth:Q}=$;$.scrollLeft=Q-te-ae;break}}else $.scrollLeft=ae;else $.scrollTop=ae}),L5(()=>{g(y).scrollTop=g(w).scrollOffset});const W={ns:p,clientSize:M,estimatedTotalSize:_,windowStyle:C,windowRef:y,innerRef:x,innerStyle:A,itemsToRender:S,scrollbarRef:b,states:w,getItemStyle:B,onScroll:L,onScrollbarScroll:R,onWheel:T,scrollTo:N,scrollToItem:I,resetScrollTop:V};return h({windowRef:y,innerRef:x,getItemStyleCache:v,scrollTo:N,scrollToItem:I,resetScrollTop:V,states:w}),W},render(u){var d;const{$slots:h,className:f,clientSize:p,containerElement:m,data:v,getItemStyle:y,innerElement:x,itemsToRender:b,innerStyle:w,layout:S,total:_,onScroll:E,onScrollbarScroll:C,states:A,useIsScrolling:M,windowStyle:T,ns:P}=u,[D,k]=b,L=jt(m),R=jt(x),N=[];if(_>0)for(let V=D;V<=k;V++)N.push(dt(ht,{key:V},(d=h.default)==null?void 0:d.call(h,{data:v,index:V,isScrolling:M?A.isScrolling:void 0,style:y(V)})));const I=[dt(R,{style:w,ref:"innerRef"},Et(R)?N:{default:()=>N})],B=dt(r5,{ref:"scrollbarRef",clientSize:p,layout:S,onScroll:C,ratio:p*100/this.estimatedTotalSize,scrollFrom:A.scrollOffset/(this.estimatedTotalSize-p),total:_}),z=dt(L,{class:[P.e("window"),f],style:T,onScroll:E,ref:"windowRef",key:0},Et(L)?[I]:{default:()=>[I]});return dt("div",{key:0,class:[P.e("wrapper"),A.scrollbarAlwaysOn?"always-on":""]},[z,B])}});var uJ=ont;const lnt=uJ({name:"ElFixedSizeList",getItemOffset:({itemSize:e},t)=>t*e,getItemSize:({itemSize:e})=>e,getEstimatedTotalSize:({total:e,itemSize:t})=>t*e,getOffset:({height:e,total:t,itemSize:i,layout:r,width:n},a,s,o)=>{const l=W1(r)?n:e,c=Math.max(0,t*i-l),u=Math.min(c,a*i),d=Math.max(0,(a+1)*i-l);switch(s===r3&&(o>=d-l&&o<=u+l?s=Ao:s=uc),s){case U1:return u;case H1:return d;case uc:{const h=Math.round(d+(u-d)/2);return h<Math.ceil(l/2)?0:h>c+Math.floor(l/2)?c:h}case Ao:default:return o>=d&&o<=u?o:o<d?d:u}},getStartIndexForOffset:({total:e,itemSize:t},i)=>Math.max(0,Math.min(e-1,Math.floor(i/t))),getStopIndexForStartIndex:({height:e,total:t,itemSize:i,layout:r,width:n},a,s)=>{const o=a*i,l=W1(r)?n:e,c=Math.ceil((l+s-o)/i);return Math.max(0,Math.min(t-1,a+c-1))},initCache(){},clearCache:!0,validateProps(){}});var dJ=lnt;const Tm=(e,t,i)=>{const{itemSize:r}=e,{items:n,lastVisitedIndex:a}=i;if(t>a){let s=0;if(a>=0){const o=n[a];s=o.offset+o.size}for(let o=a+1;o<=t;o++){const l=r(o);n[o]={offset:s,size:l},s+=l}i.lastVisitedIndex=t}return n[t]},cnt=(e,t,i)=>{const{items:r,lastVisitedIndex:n}=t;return(n>0?r[n].offset:0)>=i?hJ(e,t,0,n,i):unt(e,t,Math.max(0,n),i)},hJ=(e,t,i,r,n)=>{for(;i<=r;){const a=i+Math.floor((r-i)/2),s=Tm(e,a,t).offset;if(s===n)return a;s<n?i=a+1:s>n&&(r=a-1)}return Math.max(0,i-1)},unt=(e,t,i,r)=>{const{total:n}=e;let a=1;for(;i<n&&Tm(e,i,t).offset<r;)i+=a,a*=2;return hJ(e,t,Math.floor(i/2),Math.min(i,n-1),r)},Pz=({total:e},{items:t,estimatedItemSize:i,lastVisitedIndex:r})=>{let n=0;if(r>=e&&(r=e-1),r>=0){const o=t[r];n=o.offset+o.size}const s=(e-r-1)*i;return n+s},dnt=uJ({name:"ElDynamicSizeList",getItemOffset:(e,t,i)=>Tm(e,t,i).offset,getItemSize:(e,t,{items:i})=>i[t].size,getEstimatedTotalSize:Pz,getOffset:(e,t,i,r,n)=>{const{height:a,layout:s,width:o}=e,l=W1(s)?o:a,c=Tm(e,t,n),u=Pz(e,n),d=Math.max(0,Math.min(u-l,c.offset)),h=Math.max(0,c.offset-l+c.size);switch(i===r3&&(r>=h-l&&r<=d+l?i=Ao:i=uc),i){case U1:return d;case H1:return h;case uc:return Math.round(h+(d-h)/2);case Ao:default:return r>=h&&r<=d?r:r<h?h:d}},getStartIndexForOffset:(e,t,i)=>cnt(e,i,t),getStopIndexForStartIndex:(e,t,i,r)=>{const{height:n,total:a,layout:s,width:o}=e,l=W1(s)?o:n,c=Tm(e,t,r),u=i+l;let d=c.offset+c.size,h=t;for(;h<a-1&&d<u;)h++,d+=Tm(e,h,r).size;return h},initCache({estimatedItemSize:e=XT},t){const i={items:{},estimatedItemSize:e,lastVisitedIndex:-1};return i.clearCacheAfterIndex=(r,n=!0)=>{var a,s;i.lastVisitedIndex=Math.min(i.lastVisitedIndex,r-1),(a=t.exposed)==null||a.getItemStyleCache(-1),n&&((s=t.proxy)==null||s.$forceUpdate())},i},clearCache:!1,validateProps:({itemSize:e})=>{}});var hnt=dnt;const fnt=({atXEndEdge:e,atXStartEdge:t,atYEndEdge:i,atYStartEdge:r},n)=>{let a=null,s=0,o=0;const l=(u,d)=>{const h=u<=0&&t.value||u>=0&&e.value,f=d<=0&&r.value||d>=0&&i.value;return h&&f};return{hasReachedEdge:l,onWheel:u=>{Jf(a);let d=u.deltaX,h=u.deltaY;Math.abs(d)>Math.abs(h)?h=0:d=0,u.shiftKey&&h!==0&&(d=h,h=0),!(l(s,o)&&l(s+d,o+h))&&(s+=d,o+=h,u.preventDefault(),a=fh(()=>{n(s,o),s=0,o=0}))}}},pnt=({name:e,clearCache:t,getColumnPosition:i,getColumnStartIndexForOffset:r,getColumnStopIndexForStartIndex:n,getEstimatedTotalHeight:a,getEstimatedTotalWidth:s,getColumnOffset:o,getRowOffset:l,getRowPosition:c,getRowStartIndexForOffset:u,getRowStopIndexForStartIndex:d,initCache:h,injectToInstance:f,validateProps:p})=>ce({name:e??"ElVirtualList",props:zf,emits:[m_,v_],setup(m,{emit:v,expose:y,slots:x}){const b=Ve("vl");p(m);const w=Ut(),S=j(h(m,w));f==null||f(w,S);const _=j(),E=j(),C=j(),A=j(null),M=j({isScrolling:!1,scrollLeft:gt(m.initScrollLeft)?m.initScrollLeft:0,scrollTop:gt(m.initScrollTop)?m.initScrollTop:0,updateRequested:!1,xAxisScrollDir:Mm,yAxisScrollDir:Mm}),T=rJ(),P=O(()=>Number.parseInt(`${m.height}`,10)),D=O(()=>Number.parseInt(`${m.width}`,10)),k=O(()=>{const{totalColumn:we,totalRow:xe,columnCache:Se}=m,{isScrolling:Le,xAxisScrollDir:Be,scrollLeft:ee}=g(M);if(we===0||xe===0)return[0,0,0,0];const X=r(m,ee,g(S)),ue=n(m,X,ee,g(S)),Oe=!Le||Be===g_?Math.max(1,Se):1,Y=!Le||Be===Mm?Math.max(1,Se):1;return[Math.max(0,X-Oe),Math.max(0,Math.min(we-1,ue+Y)),X,ue]}),L=O(()=>{const{totalColumn:we,totalRow:xe,rowCache:Se}=m,{isScrolling:Le,yAxisScrollDir:Be,scrollTop:ee}=g(M);if(we===0||xe===0)return[0,0,0,0];const X=u(m,ee,g(S)),ue=d(m,X,ee,g(S)),Oe=!Le||Be===g_?Math.max(1,Se):1,Y=!Le||Be===Mm?Math.max(1,Se):1;return[Math.max(0,X-Oe),Math.max(0,Math.min(xe-1,ue+Y)),X,ue]}),R=O(()=>a(m,g(S))),N=O(()=>s(m,g(S))),I=O(()=>{var we;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:m.direction,height:gt(m.height)?`${m.height}px`:m.height,width:gt(m.width)?`${m.width}px`:m.width},(we=m.style)!=null?we:{}]}),B=O(()=>{const we=`${g(N)}px`;return{height:`${g(R)}px`,pointerEvents:g(M).isScrolling?"none":void 0,width:we}}),z=()=>{const{totalColumn:we,totalRow:xe}=m;if(we>0&&xe>0){const[ue,Oe,Y,qe]=g(k),[et,tt,ze,vt]=g(L);v(m_,{columnCacheStart:ue,columnCacheEnd:Oe,rowCacheStart:et,rowCacheEnd:tt,columnVisibleStart:Y,columnVisibleEnd:qe,rowVisibleStart:ze,rowVisibleEnd:vt})}const{scrollLeft:Se,scrollTop:Le,updateRequested:Be,xAxisScrollDir:ee,yAxisScrollDir:X}=g(M);v(v_,{xAxisScrollDir:ee,scrollLeft:Se,yAxisScrollDir:X,scrollTop:Le,updateRequested:Be})},V=we=>{const{clientHeight:xe,clientWidth:Se,scrollHeight:Le,scrollLeft:Be,scrollTop:ee,scrollWidth:X}=we.currentTarget,ue=g(M);if(ue.scrollTop===ee&&ue.scrollLeft===Be)return;let Oe=Be;if(Tz(m.direction))switch(b_()){case j1:Oe=-Be;break;case I8:Oe=X-Se-Be;break}M.value={...ue,isScrolling:!0,scrollLeft:Oe,scrollTop:Math.max(0,Math.min(ee,Le-xe)),updateRequested:!0,xAxisScrollDir:Ef(ue.scrollLeft,Oe),yAxisScrollDir:Ef(ue.scrollTop,ee)},ft(()=>te()),Q(),z()},W=(we,xe)=>{const Se=g(P),Le=(R.value-Se)/xe*we;ae({scrollTop:Math.min(R.value-Se,Le)})},G=(we,xe)=>{const Se=g(D),Le=(N.value-Se)/xe*we;ae({scrollLeft:Math.min(N.value-Se,Le)})},{onWheel:q}=fnt({atXStartEdge:O(()=>M.value.scrollLeft<=0),atXEndEdge:O(()=>M.value.scrollLeft>=N.value-g(D)),atYStartEdge:O(()=>M.value.scrollTop<=0),atYEndEdge:O(()=>M.value.scrollTop>=R.value-g(P))},(we,xe)=>{var Se,Le,Be,ee;(Le=(Se=E.value)==null?void 0:Se.onMouseUp)==null||Le.call(Se),(ee=(Be=C.value)==null?void 0:Be.onMouseUp)==null||ee.call(Be);const X=g(D),ue=g(P);ae({scrollLeft:Math.min(M.value.scrollLeft+we,N.value-X),scrollTop:Math.min(M.value.scrollTop+xe,R.value-ue)})});Oi(_,"wheel",q,{passive:!1});const ae=({scrollLeft:we=M.value.scrollLeft,scrollTop:xe=M.value.scrollTop})=>{we=Math.max(we,0),xe=Math.max(xe,0);const Se=g(M);xe===Se.scrollTop&&we===Se.scrollLeft||(M.value={...Se,xAxisScrollDir:Ef(Se.scrollLeft,we),yAxisScrollDir:Ef(Se.scrollTop,xe),scrollLeft:we,scrollTop:xe,updateRequested:!0},ft(()=>te()),Q(),z())},J=(we=0,xe=0,Se=Ao)=>{const Le=g(M);xe=Math.max(0,Math.min(xe,m.totalColumn-1)),we=Math.max(0,Math.min(we,m.totalRow-1));const Be=yK(b.namespace.value),ee=g(S),X=a(m,ee),ue=s(m,ee);ae({scrollLeft:o(m,xe,Se,Le.scrollLeft,ee,ue>m.width?Be:0),scrollTop:l(m,we,Se,Le.scrollTop,ee,X>m.height?Be:0)})},$=(we,xe)=>{const{columnWidth:Se,direction:Le,rowHeight:Be}=m,ee=T.value(t&&Se,t&&Be,t&&Le),X=`${we},${xe}`;if(Ma(ee,X))return ee[X];{const[,ue]=i(m,xe,g(S)),Oe=g(S),Y=Tz(Le),[qe,et]=c(m,we,Oe),[tt]=i(m,xe,Oe);return ee[X]={position:"absolute",left:Y?void 0:`${ue}px`,right:Y?`${ue}px`:void 0,top:`${et}px`,height:`${qe}px`,width:`${tt}px`},ee[X]}},te=()=>{M.value.isScrolling=!1,ft(()=>{T.value(-1,null,null)})};Lt(()=>{if(!si)return;const{initScrollLeft:we,initScrollTop:xe}=m,Se=g(_);Se&&(gt(we)&&(Se.scrollLeft=we),gt(xe)&&(Se.scrollTop=xe)),z()});const Q=()=>{const{direction:we}=m,{scrollLeft:xe,scrollTop:Se,updateRequested:Le}=g(M),Be=g(_);if(Le&&Be){if(we===Jm)switch(b_()){case j1:{Be.scrollLeft=-xe;break}case D8:{Be.scrollLeft=xe;break}default:{const{clientWidth:ee,scrollWidth:X}=Be;Be.scrollLeft=X-ee-xe;break}}else Be.scrollLeft=Math.max(0,xe);Be.scrollTop=Math.max(0,Se)}},{resetAfterColumnIndex:pe,resetAfterRowIndex:me,resetAfter:le}=w.proxy;y({windowRef:_,innerRef:A,getItemStyleCache:T,scrollTo:ae,scrollToItem:J,states:M,resetAfterColumnIndex:pe,resetAfterRowIndex:me,resetAfter:le});const Z=()=>{const{scrollbarAlwaysOn:we,scrollbarStartGap:xe,scrollbarEndGap:Se,totalColumn:Le,totalRow:Be}=m,ee=g(D),X=g(P),ue=g(N),Oe=g(R),{scrollLeft:Y,scrollTop:qe}=g(M),et=dt(r5,{ref:E,alwaysOn:we,startGap:xe,endGap:Se,class:b.e("horizontal"),clientSize:ee,layout:"horizontal",onScroll:G,ratio:ee*100/ue,scrollFrom:Y/(ue-ee),total:Be,visible:!0}),tt=dt(r5,{ref:C,alwaysOn:we,startGap:xe,endGap:Se,class:b.e("vertical"),clientSize:X,layout:"vertical",onScroll:W,ratio:X*100/Oe,scrollFrom:qe/(Oe-X),total:Le,visible:!0});return{horizontalScrollbar:et,verticalScrollbar:tt}},oe=()=>{var we;const[xe,Se]=g(k),[Le,Be]=g(L),{data:ee,totalColumn:X,totalRow:ue,useIsScrolling:Oe,itemKey:Y}=m,qe=[];if(ue>0&&X>0)for(let et=Le;et<=Be;et++)for(let tt=xe;tt<=Se;tt++){const ze=Y({columnIndex:tt,data:ee,rowIndex:et});qe.push(dt(ht,{key:ze},(we=x.default)==null?void 0:we.call(x,{columnIndex:tt,data:ee,isScrolling:Oe?g(M).isScrolling:void 0,style:$(et,tt),rowIndex:et})))}return qe},ge=()=>{const we=jt(m.innerElement),xe=oe();return[dt(we,{style:g(B),ref:A},Et(we)?xe:{default:()=>xe})]};return()=>{const we=jt(m.containerElement),{horizontalScrollbar:xe,verticalScrollbar:Se}=Z(),Le=ge();return dt("div",{key:0,class:b.e("wrapper"),role:m.role},[dt(we,{class:m.className,style:g(I),onScroll:V,ref:_},Et(we)?Le:{default:()=>Le}),xe,Se])}}});var fJ=pnt;const mnt=fJ({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:e},t)=>[e,t*e],getRowPosition:({rowHeight:e},t)=>[e,t*e],getEstimatedTotalHeight:({totalRow:e,rowHeight:t})=>t*e,getEstimatedTotalWidth:({totalColumn:e,columnWidth:t})=>t*e,getColumnOffset:({totalColumn:e,columnWidth:t,width:i},r,n,a,s,o)=>{i=Number(i);const l=Math.max(0,e*t-i),c=Math.min(l,r*t),u=Math.max(0,r*t-i+o+t);switch(n==="smart"&&(a>=u-i&&a<=c+i?n=Ao:n=uc),n){case U1:return c;case H1:return u;case uc:{const d=Math.round(u+(c-u)/2);return d<Math.ceil(i/2)?0:d>l+Math.floor(i/2)?l:d}case Ao:default:return a>=u&&a<=c?a:u>c||a<u?u:c}},getRowOffset:({rowHeight:e,height:t,totalRow:i},r,n,a,s,o)=>{t=Number(t);const l=Math.max(0,i*e-t),c=Math.min(l,r*e),u=Math.max(0,r*e-t+o+e);switch(n===r3&&(a>=u-t&&a<=c+t?n=Ao:n=uc),n){case U1:return c;case H1:return u;case uc:{const d=Math.round(u+(c-u)/2);return d<Math.ceil(t/2)?0:d>l+Math.floor(t/2)?l:d}case Ao:default:return a>=u&&a<=c?a:u>c||a<u?u:c}},getColumnStartIndexForOffset:({columnWidth:e,totalColumn:t},i)=>Math.max(0,Math.min(t-1,Math.floor(i/e))),getColumnStopIndexForStartIndex:({columnWidth:e,totalColumn:t,width:i},r,n)=>{const a=r*e,s=Math.ceil((i+n-a)/e);return Math.max(0,Math.min(t-1,r+s-1))},getRowStartIndexForOffset:({rowHeight:e,totalRow:t},i)=>Math.max(0,Math.min(t-1,Math.floor(i/e))),getRowStopIndexForStartIndex:({rowHeight:e,totalRow:t,height:i},r,n)=>{const a=r*e,s=Math.ceil((i+n-a)/e);return Math.max(0,Math.min(t-1,r+s-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:e,rowHeight:t})=>{}});var vnt=mnt;const{max:w_,min:pJ,floor:mJ}=Math,gnt={column:"columnWidth",row:"rowHeight"},n5={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},cu=(e,t,i,r)=>{const[n,a,s]=[i[r],e[gnt[r]],i[n5[r]]];if(t>s){let o=0;if(s>=0){const l=n[s];o=l.offset+l.size}for(let l=s+1;l<=t;l++){const c=a(l);n[l]={offset:o,size:c},o+=c}i[n5[r]]=t}return n[t]},vJ=(e,t,i,r,n,a)=>{for(;i<=r;){const s=i+mJ((r-i)/2),o=cu(e,s,t,a).offset;if(o===n)return s;o<n?i=s+1:r=s-1}return w_(0,i-1)},ynt=(e,t,i,r,n)=>{const a=n==="column"?e.totalColumn:e.totalRow;let s=1;for(;i<a&&cu(e,i,t,n).offset<r;)i+=s,s*=2;return vJ(e,t,mJ(i/2),pJ(i,a-1),r,n)},Dz=(e,t,i,r)=>{const[n,a]=[t[r],t[n5[r]]];return(a>0?n[a].offset:0)>=i?vJ(e,t,0,a,i,r):ynt(e,t,w_(0,a),i,r)},gJ=({totalRow:e},{estimatedRowHeight:t,lastVisitedRowIndex:i,row:r})=>{let n=0;if(i>=e&&(i=e-1),i>=0){const o=r[i];n=o.offset+o.size}const s=(e-i-1)*t;return n+s},yJ=({totalColumn:e},{column:t,estimatedColumnWidth:i,lastVisitedColumnIndex:r})=>{let n=0;if(r>e&&(r=e-1),r>=0){const o=t[r];n=o.offset+o.size}const s=(e-r-1)*i;return n+s},bnt={column:yJ,row:gJ},Iz=(e,t,i,r,n,a,s)=>{const[o,l]=[a==="row"?e.height:e.width,bnt[a]],c=cu(e,t,n,a),u=l(e,n),d=w_(0,pJ(u-o,c.offset)),h=w_(0,c.offset-o+s+c.size);switch(i===r3&&(r>=h-o&&r<=d+o?i=Ao:i=uc),i){case U1:return d;case H1:return h;case uc:return Math.round(h+(d-h)/2);case Ao:default:return r>=h&&r<=d?r:h>d||r<h?h:d}},wnt=fJ({name:"ElDynamicSizeGrid",getColumnPosition:(e,t,i)=>{const r=cu(e,t,i,"column");return[r.size,r.offset]},getRowPosition:(e,t,i)=>{const r=cu(e,t,i,"row");return[r.size,r.offset]},getColumnOffset:(e,t,i,r,n,a)=>Iz(e,t,i,r,n,"column",a),getRowOffset:(e,t,i,r,n,a)=>Iz(e,t,i,r,n,"row",a),getColumnStartIndexForOffset:(e,t,i)=>Dz(e,i,t,"column"),getColumnStopIndexForStartIndex:(e,t,i,r)=>{const n=cu(e,t,r,"column"),a=i+e.width;let s=n.offset+n.size,o=t;for(;o<e.totalColumn-1&&s<a;)o++,s+=cu(e,t,r,"column").size;return o},getEstimatedTotalHeight:gJ,getEstimatedTotalWidth:yJ,getRowStartIndexForOffset:(e,t,i)=>Dz(e,i,t,"row"),getRowStopIndexForStartIndex:(e,t,i,r)=>{const{totalRow:n,height:a}=e,s=cu(e,t,r,"row"),o=i+a;let l=s.size+s.offset,c=t;for(;c<n-1&&l<o;)c++,l+=cu(e,c,r,"row").size;return c},injectToInstance:(e,t)=>{const i=({columnIndex:a,rowIndex:s},o)=>{var l,c;o=Qi(o)?!0:o,gt(a)&&(t.value.lastVisitedColumnIndex=Math.min(t.value.lastVisitedColumnIndex,a-1)),gt(s)&&(t.value.lastVisitedRowIndex=Math.min(t.value.lastVisitedRowIndex,s-1)),(l=e.exposed)==null||l.getItemStyleCache.value(-1,null,null),o&&((c=e.proxy)==null||c.$forceUpdate())},r=(a,s)=>{i({columnIndex:a},s)},n=(a,s)=>{i({rowIndex:a},s)};Object.assign(e.proxy,{resetAfterColumnIndex:r,resetAfterRowIndex:n,resetAfter:i})},initCache:({estimatedColumnWidth:e=XT,estimatedRowHeight:t=XT})=>({column:{},estimatedColumnWidth:e,estimatedRowHeight:t,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:e,rowHeight:t})=>{}});var xnt=wnt;const _nt=ce({props:{item:{type:Object,required:!0},style:{type:Object},height:Number},setup(){return{ns:Ve("select")}}});function Snt(e,t,i,r,n,a){return F(),K("div",{class:U(e.ns.be("group","title")),style:mt({...e.style,lineHeight:`${e.height}px`})},Ye(e.item.label),7)}var Cnt=Ze(_nt,[["render",Snt],["__file","group-item.vue"]]);function Ent(e,{emit:t}){return{hoverItem:()=>{e.disabled||t("hover",e.index)},selectOptionClick:()=>{e.disabled||t("select",e.item,e.index)}}}const bJ={label:"label",value:"value",disabled:"disabled",options:"options"};function n3(e){const t=O(()=>({...bJ,...e.props}));return{aliasProps:t,getLabel:s=>Nr(s,t.value.label),getValue:s=>Nr(s,t.value.value),getDisabled:s=>Nr(s,t.value.disabled),getOptions:s=>Nr(s,t.value.options)}}const Ant=je({allowCreate:Boolean,autocomplete:{type:be(String),default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:zi,default:Ih},effect:{type:be(String),default:"light"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:274},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,modelValue:{type:be([Array,String,Number,Boolean,Object])},multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:be(Array),required:!0},placeholder:{type:String},teleported:Nn.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:be(Object),default:()=>({})},remote:Boolean,size:wn,props:{type:be(Object),default:()=>bJ},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:Boolean,validateEvent:{type:Boolean,default:!0},offset:{type:Number,default:12},showArrow:{type:Boolean,default:!0},placement:{type:be(String),values:Xu,default:"bottom-start"},fallbackPlacements:{type:be(Array),default:["bottom-start","top-start","right","left"]},tagType:{...ep.type,default:"info"},tagEffect:{...ep.effect,default:"light"},appendTo:String,...h0,...ha(["ariaLabel"])}),Mnt=je({data:Array,disabled:Boolean,hovering:Boolean,item:{type:be(Object),required:!0},index:Number,style:Object,selected:Boolean,created:Boolean}),Tnt={[Vt]:e=>!0,[nr]:e=>!0,"remove-tag":e=>!0,"visible-change":e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0},Pnt={hover:e=>gt(e),select:(e,t)=>!0},O8=Symbol("ElSelectV2Injection"),Dnt=ce({props:Mnt,emits:Pnt,setup(e,{emit:t}){const i=rt(O8),r=Ve("select"),{hoverItem:n,selectOptionClick:a}=Ent(e,{emit:t}),{getLabel:s}=n3(i.props);return{ns:r,hoverItem:n,selectOptionClick:a,getLabel:s}}});function Int(e,t,i,r,n,a){return F(),K("li",{"aria-selected":e.selected,style:mt(e.style),class:U([e.ns.be("dropdown","item"),e.ns.is("selected",e.selected),e.ns.is("disabled",e.disabled),e.ns.is("created",e.created),e.ns.is("hovering",e.hovering)]),onMousemove:e.hoverItem,onClick:xt(e.selectOptionClick,["stop"])},[Ee(e.$slots,"default",{item:e.item,index:e.index,disabled:e.disabled},()=>[ie("span",null,Ye(e.getLabel(e.item)),1)])],46,["aria-selected","onMousemove","onClick"])}var Ont=Ze(Dnt,[["render",Int],["__file","option-item.vue"]]);const Rnt={loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number};var knt=ce({name:"ElSelectDropdown",props:Rnt,setup(e,{slots:t,expose:i}){const r=rt(O8),n=Ve("select"),{getLabel:a,getValue:s,getDisabled:o}=n3(r.props),l=j([]),c=j(),u=O(()=>e.data.length);Ne(()=>u.value,()=>{var T,P;(P=(T=r.tooltipRef.value).updatePopper)==null||P.call(T)});const d=O(()=>Qi(r.props.estimatedOptionHeight)),h=O(()=>d.value?{itemSize:r.props.itemHeight}:{estimatedSize:r.props.estimatedOptionHeight,itemSize:T=>l.value[T]}),f=(T=[],P)=>{const{props:{valueKey:D}}=r;return Ri(P)?T&&T.some(k=>Ui(Nr(k,D))===Nr(P,D)):T.includes(P)},p=(T,P)=>{if(Ri(P)){const{valueKey:D}=r.props;return Nr(T,D)===Nr(P,D)}else return T===P},m=(T,P)=>r.props.multiple?f(T,s(P)):p(T,s(P)),v=(T,P)=>{const{disabled:D,multiple:k,multipleLimit:L}=r.props;return D||!P&&(k?L>0&&T.length>=L:!1)},y=T=>e.hoveringIndex===T;i({listRef:c,isSized:d,isItemDisabled:v,isItemHovering:y,isItemSelected:m,scrollToItem:T=>{const P=c.value;P&&P.scrollToItem(T)},resetScrollTop:()=>{const T=c.value;T&&T.resetScrollTop()}});const S=T=>{const{index:P,data:D,style:k}=T,L=g(d),{itemSize:R,estimatedSize:N}=g(h),{modelValue:I}=r.props,{onSelect:B,onHover:z}=r,V=D[P];if(V.type==="Group")return ne(Cnt,{item:V,style:k,height:L?R:N},null);const W=m(I,V),G=v(I,W),q=y(P);return ne(Ont,$t(T,{selected:W,disabled:o(V)||G,created:!!V.created,hovering:q,item:V,onSelect:B,onHover:z}),{default:ae=>{var J;return((J=t.default)==null?void 0:J.call(t,ae))||ne("span",null,[a(V)])}})},{onKeyboardNavigate:_,onKeyboardSelect:E}=r,C=()=>{_("forward")},A=()=>{_("backward")},M=T=>{const{code:P}=T,{tab:D,esc:k,down:L,up:R,enter:N,numpadEnter:I}=at;switch(P!==D&&(T.preventDefault(),T.stopPropagation()),P){case D:case k:break;case L:C();break;case R:A();break;case N:case I:E();break}};return()=>{var T,P,D,k;const{data:L,width:R}=e,{height:N,multiple:I,scrollbarAlwaysOn:B}=r.props,z=g(d)?dJ:hnt;return ne("div",{class:[n.b("dropdown"),n.is("multiple",I)],style:{width:`${R}px`}},[(T=t.header)==null?void 0:T.call(t),((P=t.loading)==null?void 0:P.call(t))||((D=t.empty)==null?void 0:D.call(t))||ne(z,$t({ref:c},g(h),{className:n.be("dropdown","list"),scrollbarAlwaysOn:B,data:L,height:N,width:R,total:L.length,onKeydown:M}),{default:V=>ne(S,V,null)}),(k=t.footer)==null?void 0:k.call(t)])}}});function Lnt(e,t){const{aliasProps:i,getLabel:r,getValue:n}=n3(e),a=j(0),s=j(),o=O(()=>e.allowCreate&&e.filterable);function l(f){const p=m=>r(m)===f;return e.options&&e.options.some(p)||t.createdOptions.some(p)}function c(f){o.value&&(e.multiple&&f.created?a.value++:s.value=f)}function u(f){if(o.value)if(f&&f.length>0){if(l(f))return;const p={[i.value.value]:f,[i.value.label]:f,created:!0,[i.value.disabled]:!1};t.createdOptions.length>=a.value?t.createdOptions[a.value]=p:t.createdOptions.push(p)}else if(e.multiple)t.createdOptions.length=a.value;else{const p=s.value;t.createdOptions.length=0,p&&p.created&&t.createdOptions.push(p)}}function d(f){if(!o.value||!f||!f.created||f.created&&e.reserveKeyword&&t.inputValue===r(f))return;const p=t.createdOptions.findIndex(m=>n(m)===n(f));~p&&(t.createdOptions.splice(p,1),a.value--)}function h(){o.value&&(t.createdOptions.length=0,a.value=0)}return{createNewOption:u,removeNewOption:d,selectNewOption:c,clearAllNewOption:h}}const Bnt=11,Nnt=(e,t)=>{const{t:i}=di(),r=Ve("select"),n=Ve("input"),{form:a,formItem:s}=Ya(),{inputId:o}=kl(e,{formItemContext:s}),{aliasProps:l,getLabel:c,getValue:u,getDisabled:d,getOptions:h}=n3(e),{valueOnClear:f,isEmptyValue:p}=YS(e),m=bi({inputValue:"",cachedOptions:[],createdOptions:[],hoveringIndex:-1,inputHovering:!1,selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,previousQuery:null,previousValue:void 0,selectedLabel:"",menuVisibleOnFocus:!1,isBeforeHide:!1}),v=j(-1),y=j(),x=j(),b=j(),w=j(),S=j(),_=j(),E=j(),C=j(),A=j(),M=j(),T=j(),{isComposing:P,handleCompositionStart:D,handleCompositionEnd:k,handleCompositionUpdate:L}=qS({afterComposition:Xe=>zt(Xe)}),{wrapperRef:R,isFocused:N,handleBlur:I}=mp(S,{beforeFocus(){return W.value},afterFocus(){e.automaticDropdown&&!V.value&&(V.value=!0,m.menuVisibleOnFocus=!0)},beforeBlur(Xe){var Ct,Ot;return((Ct=b.value)==null?void 0:Ct.isFocusInsideContent(Xe))||((Ot=w.value)==null?void 0:Ot.isFocusInsideContent(Xe))},afterBlur(){V.value=!1,m.menuVisibleOnFocus=!1}}),B=j([]),z=j([]),V=j(!1),W=O(()=>e.disabled||(a==null?void 0:a.disabled)),G=O(()=>{var Xe;return(Xe=a==null?void 0:a.statusIcon)!=null?Xe:!1}),q=O(()=>{const Xe=z.value.length*e.itemHeight;return Xe>e.height?e.height:Xe}),ae=O(()=>e.multiple?ct(e.modelValue)&&e.modelValue.length>0:!p(e.modelValue)),J=O(()=>e.clearable&&!W.value&&m.inputHovering&&ae.value),$=O(()=>e.remote&&e.filterable?"":Ku),te=O(()=>$.value&&r.is("reverse",V.value)),Q=O(()=>(s==null?void 0:s.validateState)||""),pe=O(()=>{if(Q.value)return WI[Q.value]}),me=O(()=>e.remote?300:0),le=O(()=>e.loading?e.loadingText||i("el.select.loading"):e.remote&&!m.inputValue&&B.value.length===0?!1:e.filterable&&m.inputValue&&B.value.length>0&&z.value.length===0?e.noMatchText||i("el.select.noMatch"):B.value.length===0?e.noDataText||i("el.select.noData"):null),Z=Xe=>{const Ct=Ot=>{if(e.filterable&&Wt(e.filterMethod)||e.filterable&&e.remote&&Wt(e.remoteMethod))return!0;const Mt=new RegExp(LI(Xe),"i");return Xe?Mt.test(c(Ot)||""):!0};return e.loading?[]:[...m.createdOptions,...e.options].reduce((Ot,Mt)=>{const Pr=h(Mt);if(ct(Pr)){const pi=Pr.filter(Ct);pi.length>0&&Ot.push({label:c(Mt),type:"Group"},...pi)}else(e.remote||Ct(Mt))&&Ot.push(Mt);return Ot},[])},oe=()=>{B.value=Z(""),z.value=Z(m.inputValue)},ge=O(()=>{const Xe=new Map;return B.value.forEach((Ct,Ot)=>{Xe.set(_t(u(Ct)),{option:Ct,index:Ot})}),Xe}),Ie=O(()=>{const Xe=new Map;return z.value.forEach((Ct,Ot)=>{Xe.set(_t(u(Ct)),{option:Ct,index:Ot})}),Xe}),we=O(()=>z.value.every(Xe=>d(Xe))),xe=on(),Se=O(()=>xe.value==="small"?"small":"default"),Le=()=>{var Xe;v.value=((Xe=y.value)==null?void 0:Xe.offsetWidth)||200},Be=()=>{if(!x.value)return 0;const Xe=window.getComputedStyle(x.value);return Number.parseFloat(Xe.gap||"6px")},ee=O(()=>{const Xe=Be();return{maxWidth:`${T.value&&e.maxCollapseTags===1?m.selectionWidth-m.collapseItemWidth-Xe:m.selectionWidth}px`}}),X=O(()=>({maxWidth:`${m.selectionWidth}px`})),ue=O(()=>({width:`${Math.max(m.calculatorWidth,Bnt)}px`})),Oe=O(()=>ct(e.modelValue)?e.modelValue.length===0&&!m.inputValue:e.filterable?!m.inputValue:!0),Y=O(()=>{var Xe;const Ct=(Xe=e.placeholder)!=null?Xe:i("el.select.placeholder");return e.multiple||!ae.value?Ct:m.selectedLabel}),qe=O(()=>{var Xe,Ct;return(Ct=(Xe=b.value)==null?void 0:Xe.popperRef)==null?void 0:Ct.contentRef}),et=O(()=>{if(e.multiple){const Xe=e.modelValue.length;if(e.modelValue.length>0&&Ie.value.has(e.modelValue[Xe-1])){const{index:Ct}=Ie.value.get(e.modelValue[Xe-1]);return Ct}}else if(e.modelValue&&Ie.value.has(e.modelValue)){const{index:Xe}=Ie.value.get(e.modelValue);return Xe}return-1}),tt=O({get(){return V.value&&le.value!==!1},set(Xe){V.value=Xe}}),ze=O(()=>e.multiple?e.collapseTags?m.cachedOptions.slice(0,e.maxCollapseTags):m.cachedOptions:[]),vt=O(()=>e.multiple?e.collapseTags?m.cachedOptions.slice(e.maxCollapseTags):[]:[]),{createNewOption:_e,removeNewOption:Fe,selectNewOption:he,clearAllNewOption:ke}=Lnt(e,m),se=()=>{W.value||(m.menuVisibleOnFocus?m.menuVisibleOnFocus=!1:V.value=!V.value)},He=()=>{m.inputValue.length>0&&!V.value&&(V.value=!0),_e(m.inputValue),Te(m.inputValue)},yt=gs(He,me.value),Te=Xe=>{m.previousQuery===Xe||P.value||(m.previousQuery=Xe,e.filterable&&Wt(e.filterMethod)?e.filterMethod(Xe):e.filterable&&e.remote&&Wt(e.remoteMethod)&&e.remoteMethod(Xe),e.defaultFirstOption&&(e.filterable||e.remote)&&z.value.length?ft($e):ft(Gt))},$e=()=>{const Xe=z.value.filter(Mt=>!Mt.disabled&&Mt.type!=="Group"),Ct=Xe.find(Mt=>Mt.created),Ot=Xe[0];m.hoveringIndex=Pt(z.value,Ct||Ot)},st=Xe=>{jn(e.modelValue,Xe)||t(nr,Xe)},wt=Xe=>{t(Vt,Xe),st(Xe),m.previousValue=e.multiple?String(Xe):Xe},Pt=(Xe=[],Ct)=>{if(!Ri(Ct))return Xe.indexOf(Ct);const Ot=e.valueKey;let Mt=-1;return Xe.some((Pr,pi)=>Nr(Pr,Ot)===Nr(Ct,Ot)?(Mt=pi,!0):!1),Mt},_t=Xe=>Ri(Xe)?Nr(Xe,e.valueKey):Xe,Vi=()=>{Le()},$r=()=>{m.selectionWidth=x.value.getBoundingClientRect().width},Ka=()=>{m.calculatorWidth=_.value.getBoundingClientRect().width},ar=()=>{m.collapseItemWidth=T.value.getBoundingClientRect().width},fa=()=>{var Xe,Ct;(Ct=(Xe=b.value)==null?void 0:Xe.updatePopper)==null||Ct.call(Xe)},Qr=()=>{var Xe,Ct;(Ct=(Xe=w.value)==null?void 0:Xe.updatePopper)==null||Ct.call(Xe)},$o=Xe=>{if(e.multiple){let Ct=e.modelValue.slice();const Ot=Pt(Ct,u(Xe));Ot>-1?(Ct=[...Ct.slice(0,Ot),...Ct.slice(Ot+1)],m.cachedOptions.splice(Ot,1),Fe(Xe)):(e.multipleLimit<=0||Ct.length<e.multipleLimit)&&(Ct=[...Ct,u(Xe)],m.cachedOptions.push(Xe),he(Xe)),wt(Ct),Xe.created&&Te(""),e.filterable&&!e.reserveKeyword&&(m.inputValue="")}else m.selectedLabel=c(Xe),wt(u(Xe)),V.value=!1,he(Xe),Xe.created||ke();Ll()},kh=(Xe,Ct)=>{let Ot=e.modelValue.slice();const Mt=Pt(Ot,u(Ct));Mt>-1&&!W.value&&(Ot=[...e.modelValue.slice(0,Mt),...e.modelValue.slice(Mt+1)],m.cachedOptions.splice(Mt,1),wt(Ot),t("remove-tag",u(Ct)),Fe(Ct)),Xe.stopPropagation(),Ll()},Ll=()=>{var Xe;(Xe=S.value)==null||Xe.focus()},Bl=()=>{var Xe;if(V.value){V.value=!1,ft(()=>{var Ct;return(Ct=S.value)==null?void 0:Ct.blur()});return}(Xe=S.value)==null||Xe.blur()},Ce=()=>{m.inputValue.length>0?m.inputValue="":V.value=!1},Ke=Xe=>IS(Xe,Ct=>!m.cachedOptions.some(Ot=>u(Ot)===Ct&&d(Ot))),nt=Xe=>{if(e.multiple&&Xe.code!==at.delete&&m.inputValue.length===0){Xe.preventDefault();const Ct=e.modelValue.slice(),Ot=Ke(Ct);if(Ot<0)return;const Mt=Ct[Ot];Ct.splice(Ot,1);const Pr=m.cachedOptions[Ot];m.cachedOptions.splice(Ot,1),Fe(Pr),wt(Ct),t("remove-tag",Mt)}},We=()=>{let Xe;ct(e.modelValue)?Xe=[]:Xe=f.value,e.multiple?m.cachedOptions=[]:m.selectedLabel="",V.value=!1,wt(Xe),t("clear"),ke(),Ll()},Me=(Xe,Ct=void 0)=>{const Ot=z.value;if(!["forward","backward"].includes(Xe)||W.value||Ot.length<=0||we.value||P.value)return;if(!V.value)return se();Ct===void 0&&(Ct=m.hoveringIndex);let Mt=-1;Xe==="forward"?(Mt=Ct+1,Mt>=Ot.length&&(Mt=0)):Xe==="backward"&&(Mt=Ct-1,(Mt<0||Mt>=Ot.length)&&(Mt=Ot.length-1));const Pr=Ot[Mt];if(d(Pr)||Pr.type==="Group")return Me(Xe,Mt);m.hoveringIndex=Mt,wi(Mt)},Je=()=>{if(V.value)~m.hoveringIndex&&z.value[m.hoveringIndex]&&$o(z.value[m.hoveringIndex]);else return se()},St=Xe=>{m.hoveringIndex=Xe??-1},Gt=()=>{e.multiple?m.hoveringIndex=z.value.findIndex(Xe=>e.modelValue.some(Ct=>_t(Ct)===_t(Xe))):m.hoveringIndex=z.value.findIndex(Xe=>_t(Xe)===_t(e.modelValue))},zt=Xe=>{if(m.inputValue=Xe.target.value,e.remote)yt();else return He()},Li=Xe=>{if(V.value=!1,N.value){const Ct=new FocusEvent("focus",Xe);I(Ct)}},hi=()=>(m.isBeforeHide=!1,ft(()=>{~et.value&&wi(m.hoveringIndex)})),wi=Xe=>{A.value.scrollToItem(Xe)},fi=(Xe,Ct)=>{const Ot=_t(Xe);if(ge.value.has(Ot)){const{option:Mt}=ge.value.get(Ot);return Mt}if(Ct&&Ct.length){const Mt=Ct.find(Pr=>_t(u(Pr))===Ot);if(Mt)return Mt}return{[l.value.value]:Xe,[l.value.label]:Xe}},Jr=(Xe=!1)=>{if(e.multiple)if(e.modelValue.length>0){const Ct=m.cachedOptions.slice();m.cachedOptions.length=0,m.previousValue=e.modelValue.toString();for(const Ot of e.modelValue){const Mt=fi(Ot,Ct);m.cachedOptions.push(Mt)}}else m.cachedOptions=[],m.previousValue=void 0;else if(ae.value){m.previousValue=e.modelValue;const Ct=z.value,Ot=Ct.findIndex(Mt=>_t(u(Mt))===_t(e.modelValue));~Ot?m.selectedLabel=c(Ct[Ot]):(!m.selectedLabel||Xe)&&(m.selectedLabel=_t(e.modelValue))}else m.selectedLabel="",m.previousValue=void 0;ke(),Le()};return Ne(V,Xe=>{Xe?Te(""):(m.inputValue="",m.previousQuery=null,m.isBeforeHide=!0,_e("")),t("visible-change",Xe)}),Ne(()=>e.modelValue,(Xe,Ct)=>{var Ot;(!Xe||ct(Xe)&&Xe.length===0||e.multiple&&!jn(Xe.toString(),m.previousValue)||!e.multiple&&_t(Xe)!==_t(m.previousValue))&&Jr(!0),!jn(Xe,Ct)&&e.validateEvent&&((Ot=s==null?void 0:s.validate)==null||Ot.call(s,"change").catch(Pr=>void 0))},{deep:!0}),Ne(()=>e.options,()=>{const Xe=S.value;(!Xe||Xe&&document.activeElement!==Xe)&&Jr()},{deep:!0,flush:"post"}),Ne(()=>z.value,()=>A.value&&ft(A.value.resetScrollTop)),Ca(()=>{m.isBeforeHide||oe()}),Ca(()=>{const{valueKey:Xe,options:Ct}=e,Ot=new Map;for(const Mt of Ct){const Pr=u(Mt);let pi=Pr;if(Ri(pi)&&(pi=Nr(Pr,Xe)),Ot.get(pi))break;Ot.set(pi,!0)}}),Lt(()=>{Jr()}),gr(y,Vi),gr(x,$r),gr(_,Ka),gr(A,fa),gr(R,fa),gr(M,Qr),gr(T,ar),{inputId:o,collapseTagSize:Se,currentPlaceholder:Y,expanded:V,emptyText:le,popupHeight:q,debounce:me,allOptions:B,filteredOptions:z,iconComponent:$,iconReverse:te,tagStyle:ee,collapseTagStyle:X,inputStyle:ue,popperSize:v,dropdownMenuVisible:tt,hasModelValue:ae,shouldShowPlaceholder:Oe,selectDisabled:W,selectSize:xe,needStatusIcon:G,showClearBtn:J,states:m,isFocused:N,nsSelect:r,nsInput:n,calculatorRef:_,inputRef:S,menuRef:A,tagMenuRef:M,tooltipRef:b,tagTooltipRef:w,selectRef:y,wrapperRef:R,selectionRef:x,prefixRef:E,suffixRef:C,collapseItemRef:T,popperRef:qe,validateState:Q,validateIcon:pe,showTagList:ze,collapseTagList:vt,debouncedOnInputChange:yt,deleteTag:kh,getLabel:c,getValue:u,getDisabled:d,getValueKey:_t,handleClear:We,handleClickOutside:Li,handleDel:nt,handleEsc:Ce,focus:Ll,blur:Bl,handleMenuEnter:hi,handleResize:Vi,resetSelectionWidth:$r,resetCalculatorWidth:Ka,updateTooltip:fa,updateTagTooltip:Qr,updateOptions:oe,toggleMenu:se,scrollTo:wi,onInput:zt,onKeyboardNavigate:Me,onKeyboardSelect:Je,onSelect:$o,onHover:St,handleCompositionStart:D,handleCompositionEnd:k,handleCompositionUpdate:L}};var Fnt=Nnt;const znt=ce({name:"ElSelectV2",components:{ElSelectMenu:knt,ElTag:F1,ElTooltip:Ta,ElIcon:ut},directives:{ClickOutside:Nu},props:Ant,emits:Tnt,setup(e,{emit:t}){const i=O(()=>{const{modelValue:a,multiple:s}=e,o=s?[]:void 0;return ct(a)?s?a:o:s?o:a}),r=Fnt(bi({...Gn(e),modelValue:i}),t);Yt(O8,{props:bi({...Gn(e),height:r.popupHeight,modelValue:i}),expanded:r.expanded,tooltipRef:r.tooltipRef,onSelect:r.onSelect,onHover:r.onHover,onKeyboardNavigate:r.onKeyboardNavigate,onKeyboardSelect:r.onKeyboardSelect});const n=O(()=>e.multiple?r.states.cachedOptions.map(a=>a.label):r.states.selectedLabel);return{...r,modelValue:i,selectedLabel:n}}});function Vnt(e,t,i,r,n,a){const s=Ht("el-tag"),o=Ht("el-tooltip"),l=Ht("el-icon"),c=Ht("el-select-menu"),u=O_("click-outside");return Nt((F(),K("div",{ref:"selectRef",class:U([e.nsSelect.b(),e.nsSelect.m(e.selectSize)]),onMouseenter:d=>e.states.inputHovering=!0,onMouseleave:d=>e.states.inputHovering=!1},[ne(o,{ref:"tooltipRef",visible:e.dropdownMenuVisible,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,placement:e.placement,pure:"",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:e.persistent,"append-to":e.appendTo,"show-arrow":e.showArrow,offset:e.offset,onBeforeShow:e.handleMenuEnter,onHide:d=>e.states.isBeforeHide=!1},{default:ve(()=>[ie("div",{ref:"wrapperRef",class:U([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled)]),onClick:xt(e.toggleMenu,["prevent"])},[e.$slots.prefix?(F(),K("div",{key:0,ref:"prefixRef",class:U(e.nsSelect.e("prefix"))},[Ee(e.$slots,"prefix")],2)):Ae("v-if",!0),ie("div",{ref:"selectionRef",class:U([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.$slots.prefix&&!!e.modelValue.length)])},[e.multiple?Ee(e.$slots,"tag",{key:0},()=>[(F(!0),K(ht,null,Qt(e.showTagList,d=>(F(),K("div",{key:e.getValueKey(e.getValue(d)),class:U(e.nsSelect.e("selected-item"))},[ne(s,{closable:!e.selectDisabled&&!e.getDisabled(d),size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:mt(e.tagStyle),onClose:h=>e.deleteTag(h,d)},{default:ve(()=>[ie("span",{class:U(e.nsSelect.e("tags-text"))},[Ee(e.$slots,"label",{label:e.getLabel(d),value:e.getValue(d)},()=>[Xt(Ye(e.getLabel(d)),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),e.collapseTags&&e.modelValue.length>e.maxCollapseTags?(F(),De(o,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:ve(()=>[ie("div",{ref:"collapseItemRef",class:U(e.nsSelect.e("selected-item"))},[ne(s,{closable:!1,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,style:mt(e.collapseTagStyle),"disable-transitions":""},{default:ve(()=>[ie("span",{class:U(e.nsSelect.e("tags-text"))}," + "+Ye(e.modelValue.length-e.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:ve(()=>[ie("div",{ref:"tagMenuRef",class:U(e.nsSelect.e("selection"))},[(F(!0),K(ht,null,Qt(e.collapseTagList,d=>(F(),K("div",{key:e.getValueKey(e.getValue(d)),class:U(e.nsSelect.e("selected-item"))},[ne(s,{class:"in-tooltip",closable:!e.selectDisabled&&!e.getDisabled(d),size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",onClose:h=>e.deleteTag(h,d)},{default:ve(()=>[ie("span",{class:U(e.nsSelect.e("tags-text"))},[Ee(e.$slots,"label",{label:e.getLabel(d),value:e.getValue(d)},()=>[Xt(Ye(e.getLabel(d)),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):Ae("v-if",!0)]):Ae("v-if",!0),e.selectDisabled?Ae("v-if",!0):(F(),K("div",{key:1,class:U([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable)])},[Nt(ie("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":d=>e.states.inputValue=d,style:mt(e.inputStyle),autocomplete:e.autocomplete,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":e.expanded,"aria-label":e.ariaLabel,class:U([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",name:e.name,onInput:e.onInput,onCompositionstart:e.handleCompositionStart,onCompositionupdate:e.handleCompositionUpdate,onCompositionend:e.handleCompositionEnd,onKeydown:[Hi(xt(d=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"]),Hi(xt(d=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"]),Hi(xt(e.onKeyboardSelect,["stop","prevent"]),["enter"]),Hi(xt(e.handleEsc,["stop","prevent"]),["esc"]),Hi(xt(e.handleDel,["stop"]),["delete"])],onClick:xt(e.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","autocomplete","aria-expanded","aria-label","disabled","readonly","name","onInput","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown","onClick"]),[[j5,e.states.inputValue]]),e.filterable?(F(),K("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:U(e.nsSelect.e("input-calculator")),textContent:Ye(e.states.inputValue)},null,10,["textContent"])):Ae("v-if",!0)],2)),e.shouldShowPlaceholder?(F(),K("div",{key:2,class:U([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue)])},[e.hasModelValue?Ee(e.$slots,"label",{key:0,label:e.currentPlaceholder,value:e.modelValue},()=>[ie("span",null,Ye(e.currentPlaceholder),1)]):(F(),K("span",{key:1},Ye(e.currentPlaceholder),1))],2)):Ae("v-if",!0)],2),ie("div",{ref:"suffixRef",class:U(e.nsSelect.e("suffix"))},[e.iconComponent?Nt((F(),De(l,{key:0,class:U([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.iconReverse])},{default:ve(()=>[(F(),De(jt(e.iconComponent)))]),_:1},8,["class"])),[[_i,!e.showClearBtn]]):Ae("v-if",!0),e.showClearBtn&&e.clearIcon?(F(),De(l,{key:1,class:U([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.nsSelect.e("clear")]),onClick:xt(e.handleClear,["prevent","stop"])},{default:ve(()=>[(F(),De(jt(e.clearIcon)))]),_:1},8,["class","onClick"])):Ae("v-if",!0),e.validateState&&e.validateIcon&&e.needStatusIcon?(F(),De(l,{key:2,class:U([e.nsInput.e("icon"),e.nsInput.e("validateIcon")])},{default:ve(()=>[(F(),De(jt(e.validateIcon)))]),_:1},8,["class"])):Ae("v-if",!0)],2)],10,["onClick"])]),content:ve(()=>[ne(c,{ref:"menuRef",data:e.filteredOptions,width:e.popperSize,"hovering-index":e.states.hoveringIndex,"scrollbar-always-on":e.scrollbarAlwaysOn},Lo({default:ve(d=>[Ee(e.$slots,"default",_o(Au(d)))]),_:2},[e.$slots.header?{name:"header",fn:ve(()=>[ie("div",{class:U(e.nsSelect.be("dropdown","header"))},[Ee(e.$slots,"header")],2)])}:void 0,e.$slots.loading&&e.loading?{name:"loading",fn:ve(()=>[ie("div",{class:U(e.nsSelect.be("dropdown","loading"))},[Ee(e.$slots,"loading")],2)])}:e.loading||e.filteredOptions.length===0?{name:"empty",fn:ve(()=>[ie("div",{class:U(e.nsSelect.be("dropdown","empty"))},[Ee(e.$slots,"empty",{},()=>[ie("span",null,Ye(e.emptyText),1)])],2)])}:void 0,e.$slots.footer?{name:"footer",fn:ve(()=>[ie("div",{class:U(e.nsSelect.be("dropdown","footer"))},[Ee(e.$slots,"footer")],2)])}:void 0]),1032,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],42,["onMouseenter","onMouseleave"])),[[u,e.handleClickOutside,e.popperRef]])}var Unt=Ze(znt,[["render",Vnt],["__file","select.vue"]]);const Hnt=Rt(Unt),jnt=je({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:be([Number,Object])}}),Wnt=je({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),Gnt=ce({name:"ElSkeletonItem"}),$nt=ce({...Gnt,props:Wnt,setup(e){const t=Ve("skeleton");return(i,r)=>(F(),K("div",{class:U([g(t).e("item"),g(t).e(i.variant)])},[i.variant==="image"?(F(),De(g(cje),{key:0})):Ae("v-if",!0)],2))}});var x_=Ze($nt,[["__file","skeleton-item.vue"]]);const Znt=ce({name:"ElSkeleton"}),qnt=ce({...Znt,props:jnt,setup(e,{expose:t}){const i=e,r=Ve("skeleton"),n=aGe(Di(i,"loading"),i.throttle);return t({uiLoading:n}),(a,s)=>g(n)?(F(),K("div",$t({key:0,class:[g(r).b(),g(r).is("animated",a.animated)]},a.$attrs),[(F(!0),K(ht,null,Qt(a.count,o=>(F(),K(ht,{key:o},[g(n)?Ee(a.$slots,"template",{key:o},()=>[ne(x_,{class:U(g(r).is("first")),variant:"p"},null,8,["class"]),(F(!0),K(ht,null,Qt(a.rows,l=>(F(),De(x_,{key:l,class:U([g(r).e("paragraph"),g(r).is("last",l===a.rows&&a.rows>1)]),variant:"p"},null,8,["class"]))),128))]):Ae("v-if",!0)],64))),128))],16)):Ee(a.$slots,"default",_o($t({key:1},a.$attrs)))}});var Ynt=Ze(qnt,[["__file","skeleton.vue"]]);const Knt=Rt(Ynt,{SkeletonItem:x_}),Xnt=Tr(x_),wJ=Symbol("sliderContextKey"),Qnt=je({modelValue:{type:be([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:wn,inputSize:wn,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:be(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:be(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Xu,default:"top"},marks:{type:be(Object)},validateEvent:{type:Boolean,default:!0},...ha(["ariaLabel"])}),lE=e=>gt(e)||ct(e)&&e.every(gt),Jnt={[Vt]:lE,[fs]:lE,[nr]:lE},eat=(e,t,i)=>{const r=j();return Lt(async()=>{e.range?(ct(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue]):(!gt(e.modelValue)||Number.isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue),Oi(window,"resize",i),await ft(),i()}),{sliderWrapper:r}},tat=e=>O(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((i,r)=>i-r).filter(i=>i<=e.max&&i>=e.min).map(i=>({point:i,position:(i-e.min)*100/(e.max-e.min),mark:e.marks[i]})):[]),iat=(e,t,i)=>{const{form:r,formItem:n}=Ya(),a=Wi(),s=j(),o=j(),l={firstButton:s,secondButton:o},c=O(()=>e.disabled||(r==null?void 0:r.disabled)||!1),u=O(()=>Math.min(t.firstValue,t.secondValue)),d=O(()=>Math.max(t.firstValue,t.secondValue)),h=O(()=>e.range?`${100*(d.value-u.value)/(e.max-e.min)}%`:`${100*(t.firstValue-e.min)/(e.max-e.min)}%`),f=O(()=>e.range?`${100*(u.value-e.min)/(e.max-e.min)}%`:"0%"),p=O(()=>e.vertical?{height:e.height}:{}),m=O(()=>e.vertical?{height:h.value,bottom:f.value}:{width:h.value,left:f.value}),v=()=>{a.value&&(t.sliderSize=a.value[`client${e.vertical?"Height":"Width"}`])},y=P=>{const D=e.min+P*(e.max-e.min)/100;if(!e.range)return s;let k;return Math.abs(u.value-D)<Math.abs(d.value-D)?k=t.firstValue<t.secondValue?"firstButton":"secondButton":k=t.firstValue>t.secondValue?"firstButton":"secondButton",l[k]},x=P=>{const D=y(P);return D.value.setPosition(P),D},b=P=>{t.firstValue=P??e.min,S(e.range?[u.value,d.value]:P??e.min)},w=P=>{t.secondValue=P,e.range&&S([u.value,d.value])},S=P=>{i(Vt,P),i(fs,P)},_=async()=>{await ft(),i(nr,e.range?[u.value,d.value]:e.modelValue)},E=P=>{var D,k,L,R,N,I;if(c.value||t.dragging)return;v();let B=0;if(e.vertical){const z=(L=(k=(D=P.touches)==null?void 0:D.item(0))==null?void 0:k.clientY)!=null?L:P.clientY;B=(a.value.getBoundingClientRect().bottom-z)/t.sliderSize*100}else{const z=(I=(N=(R=P.touches)==null?void 0:R.item(0))==null?void 0:N.clientX)!=null?I:P.clientX,V=a.value.getBoundingClientRect().left;B=(z-V)/t.sliderSize*100}if(!(B<0||B>100))return x(B)};return{elFormItem:n,slider:a,firstButton:s,secondButton:o,sliderDisabled:c,minValue:u,maxValue:d,runwayStyle:p,barStyle:m,resetSize:v,setPosition:x,emitChange:_,onSliderWrapperPrevent:P=>{var D,k;((D=l.firstButton.value)!=null&&D.dragging||(k=l.secondButton.value)!=null&&k.dragging)&&P.preventDefault()},onSliderClick:P=>{E(P)&&_()},onSliderDown:async P=>{const D=E(P);D&&(await ft(),D.value.onButtonDown(P))},onSliderMarkerDown:P=>{c.value||t.dragging||x(P)},setFirstValue:b,setSecondValue:w}},rat=(e,t,i)=>{const r=j(),n=j(!1),a=O(()=>t.value instanceof Function),s=O(()=>a.value&&t.value(e.modelValue)||e.modelValue),o=gs(()=>{i.value&&(n.value=!0)},50),l=gs(()=>{i.value&&(n.value=!1)},50);return{tooltip:r,tooltipVisible:n,formatValue:s,displayTooltip:o,hideTooltip:l}},nat=(e,t,i)=>{const{disabled:r,min:n,max:a,step:s,showTooltip:o,precision:l,sliderSize:c,formatTooltip:u,emitChange:d,resetSize:h,updateDragging:f}=rt(wJ),{tooltip:p,tooltipVisible:m,formatValue:v,displayTooltip:y,hideTooltip:x}=rat(e,u,o),b=j(),w=O(()=>`${(e.modelValue-n.value)/(a.value-n.value)*100}%`),S=O(()=>e.vertical?{bottom:w.value}:{left:w.value}),_=()=>{t.hovering=!0,y()},E=()=>{t.hovering=!1,t.dragging||x()},C=W=>{r.value||(W.preventDefault(),I(W),window.addEventListener("mousemove",B),window.addEventListener("touchmove",B),window.addEventListener("mouseup",z),window.addEventListener("touchend",z),window.addEventListener("contextmenu",z),b.value.focus())},A=W=>{r.value||(t.newPosition=Number.parseFloat(w.value)+W/(a.value-n.value)*100,V(t.newPosition),d())},M=()=>{A(-s.value)},T=()=>{A(s.value)},P=()=>{A(-s.value*4)},D=()=>{A(s.value*4)},k=()=>{r.value||(V(0),d())},L=()=>{r.value||(V(100),d())},R=W=>{let G=!0;switch(W.code){case at.left:case at.down:M();break;case at.right:case at.up:T();break;case at.home:k();break;case at.end:L();break;case at.pageDown:P();break;case at.pageUp:D();break;default:G=!1;break}G&&W.preventDefault()},N=W=>{let G,q;return W.type.startsWith("touch")?(q=W.touches[0].clientY,G=W.touches[0].clientX):(q=W.clientY,G=W.clientX),{clientX:G,clientY:q}},I=W=>{t.dragging=!0,t.isClick=!0;const{clientX:G,clientY:q}=N(W);e.vertical?t.startY=q:t.startX=G,t.startPosition=Number.parseFloat(w.value),t.newPosition=t.startPosition},B=W=>{if(t.dragging){t.isClick=!1,y(),h();let G;const{clientX:q,clientY:ae}=N(W);e.vertical?(t.currentY=ae,G=(t.startY-t.currentY)/c.value*100):(t.currentX=q,G=(t.currentX-t.startX)/c.value*100),t.newPosition=t.startPosition+G,V(t.newPosition)}},z=()=>{t.dragging&&(setTimeout(()=>{t.dragging=!1,t.hovering||x(),t.isClick||V(t.newPosition),d()},0),window.removeEventListener("mousemove",B),window.removeEventListener("touchmove",B),window.removeEventListener("mouseup",z),window.removeEventListener("touchend",z),window.removeEventListener("contextmenu",z))},V=async W=>{if(W===null||Number.isNaN(+W))return;W<0?W=0:W>100&&(W=100);const G=100/((a.value-n.value)/s.value);let ae=Math.round(W/G)*G*(a.value-n.value)*.01+n.value;ae=Number.parseFloat(ae.toFixed(l.value)),ae!==e.modelValue&&i(Vt,ae),!t.dragging&&e.modelValue!==t.oldValue&&(t.oldValue=e.modelValue),await ft(),t.dragging&&y(),p.value.updatePopper()};return Ne(()=>t.dragging,W=>{f(W)}),Oi(b,"touchstart",C,{passive:!1}),{disabled:r,button:b,tooltip:p,tooltipVisible:m,showTooltip:o,wrapperStyle:S,formatValue:v,handleMouseEnter:_,handleMouseLeave:E,onButtonDown:C,onKeyDown:R,setPosition:V}},aat=(e,t,i,r)=>({stops:O(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const s=(e.max-e.min)/e.step,o=100*e.step/(e.max-e.min),l=Array.from({length:s-1}).map((c,u)=>(u+1)*o);return e.range?l.filter(c=>c<100*(i.value-e.min)/(e.max-e.min)||c>100*(r.value-e.min)/(e.max-e.min)):l.filter(c=>c>100*(t.firstValue-e.min)/(e.max-e.min))}),getStopStyle:s=>e.vertical?{bottom:`${s}%`}:{left:`${s}%`}}),sat=(e,t,i,r,n,a)=>{const s=c=>{n(Vt,c),n(fs,c)},o=()=>e.range?![i.value,r.value].every((c,u)=>c===t.oldValue[u]):e.modelValue!==t.oldValue,l=()=>{var c,u;e.min>e.max&&bn("Slider","min should not be greater than max.");const d=e.modelValue;e.range&&ct(d)?d[1]<e.min?s([e.min,e.min]):d[0]>e.max?s([e.max,e.max]):d[0]<e.min?s([e.min,d[1]]):d[1]>e.max?s([d[0],e.max]):(t.firstValue=d[0],t.secondValue=d[1],o()&&(e.validateEvent&&((c=a==null?void 0:a.validate)==null||c.call(a,"change").catch(h=>void 0)),t.oldValue=d.slice())):!e.range&&gt(d)&&!Number.isNaN(d)&&(d<e.min?s(e.min):d>e.max?s(e.max):(t.firstValue=d,o()&&(e.validateEvent&&((u=a==null?void 0:a.validate)==null||u.call(a,"change").catch(h=>void 0)),t.oldValue=d)))};l(),Ne(()=>t.dragging,c=>{c||l()}),Ne(()=>e.modelValue,(c,u)=>{t.dragging||ct(c)&&ct(u)&&c.every((d,h)=>d===u[h])&&t.firstValue===c[0]&&t.secondValue===c[1]||l()},{deep:!0}),Ne(()=>[e.min,e.max],()=>{l()})},oat=je({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Xu,default:"top"}}),lat={[Vt]:e=>gt(e)},cat=ce({name:"ElSliderButton"}),uat=ce({...cat,props:oat,emits:lat,setup(e,{expose:t,emit:i}){const r=e,n=Ve("slider"),a=bi({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:r.modelValue}),{disabled:s,button:o,tooltip:l,showTooltip:c,tooltipVisible:u,wrapperStyle:d,formatValue:h,handleMouseEnter:f,handleMouseLeave:p,onButtonDown:m,onKeyDown:v,setPosition:y}=nat(r,a,i),{hovering:x,dragging:b}=Gn(a);return t({onButtonDown:m,onKeyDown:v,setPosition:y,hovering:x,dragging:b}),(w,S)=>(F(),K("div",{ref_key:"button",ref:o,class:U([g(n).e("button-wrapper"),{hover:g(x),dragging:g(b)}]),style:mt(g(d)),tabindex:g(s)?-1:0,onMouseenter:g(f),onMouseleave:g(p),onMousedown:g(m),onFocus:g(f),onBlur:g(p),onKeydown:g(v)},[ne(g(Ta),{ref_key:"tooltip",ref:l,visible:g(u),placement:w.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":w.tooltipClass,disabled:!g(c),persistent:g(c)},{content:ve(()=>[ie("span",null,Ye(g(h)),1)]),default:ve(()=>[ie("div",{class:U([g(n).e("button"),{hover:g(x),dragging:g(b)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var Oz=Ze(uat,[["__file","button.vue"]]);const dat=je({mark:{type:be([String,Object]),default:void 0}});var hat=ce({name:"ElSliderMarker",props:dat,setup(e){const t=Ve("slider"),i=O(()=>Et(e.mark)?e.mark:e.mark.label),r=O(()=>Et(e.mark)?void 0:e.mark.style);return()=>dt("div",{class:t.e("marks-text"),style:r.value},i.value)}});const fat=ce({name:"ElSlider"}),pat=ce({...fat,props:Qnt,emits:Jnt,setup(e,{expose:t,emit:i}){const r=e,n=Ve("slider"),{t:a}=di(),s=bi({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:o,slider:l,firstButton:c,secondButton:u,sliderDisabled:d,minValue:h,maxValue:f,runwayStyle:p,barStyle:m,resetSize:v,emitChange:y,onSliderWrapperPrevent:x,onSliderClick:b,onSliderDown:w,onSliderMarkerDown:S,setFirstValue:_,setSecondValue:E}=iat(r,s,i),{stops:C,getStopStyle:A}=aat(r,s,h,f),{inputId:M,isLabeledByFormItem:T}=kl(r,{formItemContext:o}),P=on(),D=O(()=>r.inputSize||P.value),k=O(()=>r.ariaLabel||a("el.slider.defaultLabel",{min:r.min,max:r.max})),L=O(()=>r.range?r.rangeStartLabel||a("el.slider.defaultRangeStartLabel"):k.value),R=O(()=>r.formatValueText?r.formatValueText(G.value):`${G.value}`),N=O(()=>r.rangeEndLabel||a("el.slider.defaultRangeEndLabel")),I=O(()=>r.formatValueText?r.formatValueText(q.value):`${q.value}`),B=O(()=>[n.b(),n.m(P.value),n.is("vertical",r.vertical),{[n.m("with-input")]:r.showInput}]),z=tat(r);sat(r,s,h,f,i,o);const V=O(()=>{const $=[r.min,r.max,r.step].map(te=>{const Q=`${te}`.split(".")[1];return Q?Q.length:0});return Math.max.apply(null,$)}),{sliderWrapper:W}=eat(r,s,v),{firstValue:G,secondValue:q,sliderSize:ae}=Gn(s),J=$=>{s.dragging=$};return Oi(W,"touchstart",x,{passive:!1}),Oi(W,"touchmove",x,{passive:!1}),Yt(wJ,{...Gn(r),sliderSize:ae,disabled:d,precision:V,emitChange:y,resetSize:v,updateDragging:J}),t({onSliderClick:b}),($,te)=>{var Q,pe;return F(),K("div",{id:$.range?g(M):void 0,ref_key:"sliderWrapper",ref:W,class:U(g(B)),role:$.range?"group":void 0,"aria-label":$.range&&!g(T)?g(k):void 0,"aria-labelledby":$.range&&g(T)?(Q=g(o))==null?void 0:Q.labelId:void 0},[ie("div",{ref_key:"slider",ref:l,class:U([g(n).e("runway"),{"show-input":$.showInput&&!$.range},g(n).is("disabled",g(d))]),style:mt(g(p)),onMousedown:g(w),onTouchstartPassive:g(w)},[ie("div",{class:U(g(n).e("bar")),style:mt(g(m))},null,6),ne(Oz,{id:$.range?void 0:g(M),ref_key:"firstButton",ref:c,"model-value":g(G),vertical:$.vertical,"tooltip-class":$.tooltipClass,placement:$.placement,role:"slider","aria-label":$.range||!g(T)?g(L):void 0,"aria-labelledby":!$.range&&g(T)?(pe=g(o))==null?void 0:pe.labelId:void 0,"aria-valuemin":$.min,"aria-valuemax":$.range?g(q):$.max,"aria-valuenow":g(G),"aria-valuetext":g(R),"aria-orientation":$.vertical?"vertical":"horizontal","aria-disabled":g(d),"onUpdate:modelValue":g(_)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),$.range?(F(),De(Oz,{key:0,ref_key:"secondButton",ref:u,"model-value":g(q),vertical:$.vertical,"tooltip-class":$.tooltipClass,placement:$.placement,role:"slider","aria-label":g(N),"aria-valuemin":g(G),"aria-valuemax":$.max,"aria-valuenow":g(q),"aria-valuetext":g(I),"aria-orientation":$.vertical?"vertical":"horizontal","aria-disabled":g(d),"onUpdate:modelValue":g(E)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):Ae("v-if",!0),$.showStops?(F(),K("div",{key:1},[(F(!0),K(ht,null,Qt(g(C),(me,le)=>(F(),K("div",{key:le,class:U(g(n).e("stop")),style:mt(g(A)(me))},null,6))),128))])):Ae("v-if",!0),g(z).length>0?(F(),K(ht,{key:2},[ie("div",null,[(F(!0),K(ht,null,Qt(g(z),(me,le)=>(F(),K("div",{key:le,style:mt(g(A)(me.position)),class:U([g(n).e("stop"),g(n).e("marks-stop")])},null,6))),128))]),ie("div",{class:U(g(n).e("marks"))},[(F(!0),K(ht,null,Qt(g(z),(me,le)=>(F(),De(g(hat),{key:le,mark:me.mark,style:mt(g(A)(me.position)),onMousedown:xt(Z=>g(S)(me.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):Ae("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),$.showInput&&!$.range?(F(),De(g(ZQ),{key:0,ref:"input","model-value":g(G),class:U(g(n).e("input")),step:$.step,disabled:g(d),controls:$.showInputControls,min:$.min,max:$.max,precision:g(V),debounce:$.debounce,size:g(D),"onUpdate:modelValue":g(_),onChange:g(y)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):Ae("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var mat=Ze(pat,[["__file","slider.vue"]]);const vat=Rt(mat),gat=je({prefixCls:{type:String}}),Rz=ce({name:"ElSpaceItem",props:gat,setup(e,{slots:t}){const i=Ve("space"),r=O(()=>`${e.prefixCls||i.b()}__item`);return()=>dt("div",{class:r.value},Ee(t,"default"))}}),kz={small:8,default:12,large:16};function yat(e){const t=Ve("space"),i=O(()=>[t.b(),t.m(e.direction),e.class]),r=j(0),n=j(0),a=O(()=>{const o=e.wrap||e.fill?{flexWrap:"wrap"}:{},l={alignItems:e.alignment},c={rowGap:`${n.value}px`,columnGap:`${r.value}px`};return[o,l,c,e.style]}),s=O(()=>e.fill?{flexGrow:1,minWidth:`${e.fillRatio}%`}:{});return Ca(()=>{const{size:o="small",wrap:l,direction:c,fill:u}=e;if(ct(o)){const[d=0,h=0]=o;r.value=d,n.value=h}else{let d;gt(o)?d=o:d=kz[o||"small"]||kz.small,(l||u)&&c==="horizontal"?r.value=n.value=d:c==="horizontal"?(r.value=d,n.value=0):(n.value=d,r.value=0)}}),{classes:i,containerStyle:a,itemStyle:s}}const bat=je({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:be([String,Object,Array]),default:""},style:{type:be([String,Array,Object]),default:""},alignment:{type:be(String),default:"center"},prefixCls:{type:String},spacer:{type:be([Object,String,Number,Array]),default:null,validator:e=>rr(e)||gt(e)||Et(e)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:Lc,validator:e=>gt(e)||ct(e)&&e.length===2&&e.every(gt)}}),wat=ce({name:"ElSpace",props:bat,setup(e,{slots:t}){const{classes:i,containerStyle:r,itemStyle:n}=yat(e);function a(s,o="",l=[]){const{prefixCls:c}=e;return s.forEach((u,d)=>{wT(u)?ct(u.children)&&u.children.forEach((h,f)=>{wT(h)&&ct(h.children)?a(h.children,`${o+f}-`,l):l.push(ne(Rz,{style:n.value,prefixCls:c,key:`nested-${o+f}`},{default:()=>[h]},go.PROPS|go.STYLE,["style","prefixCls"]))}):zje(u)&&l.push(ne(Rz,{style:n.value,prefixCls:c,key:`LoopKey${o+d}`},{default:()=>[u]},go.PROPS|go.STYLE,["style","prefixCls"]))}),l}return()=>{var s;const{spacer:o,direction:l}=e,c=Ee(t,"default",{key:0},()=>[]);if(((s=c.children)!=null?s:[]).length===0)return null;if(ct(c.children)){let u=a(c.children);if(o){const d=u.length-1;u=u.reduce((h,f,p)=>{const m=[...h,f];return p!==d&&m.push(ne("span",{style:[n.value,l==="vertical"?"width: 100%":null],key:p},[rr(o)?o:Xt(o,go.TEXT)],go.STYLE)),m},[])}return ne("div",{class:i.value,style:r.value},u,go.STYLE|go.CLASS)}return c.children}}}),xat=Rt(wat),_at=je({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:be([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:be([String,Object,Array])}}),Sat=ce({name:"ElStatistic"}),Cat=ce({...Sat,props:_at,setup(e,{expose:t}){const i=e,r=Ve("statistic"),n=O(()=>{const{value:a,formatter:s,precision:o,decimalSeparator:l,groupSeparator:c}=i;if(Wt(s))return s(a);if(!gt(a)||Number.isNaN(a))return a;let[u,d=""]=String(a).split(".");return d=d.padEnd(o,"0").slice(0,o>0?o:0),u=u.replace(/\B(?=(\d{3})+(?!\d))/g,c),[u,d].join(d?l:"")});return t({displayValue:n}),(a,s)=>(F(),K("div",{class:U(g(r).b())},[a.$slots.title||a.title?(F(),K("div",{key:0,class:U(g(r).e("head"))},[Ee(a.$slots,"title",{},()=>[Xt(Ye(a.title),1)])],2)):Ae("v-if",!0),ie("div",{class:U(g(r).e("content"))},[a.$slots.prefix||a.prefix?(F(),K("div",{key:0,class:U(g(r).e("prefix"))},[Ee(a.$slots,"prefix",{},()=>[ie("span",null,Ye(a.prefix),1)])],2)):Ae("v-if",!0),ie("span",{class:U(g(r).e("number")),style:mt(a.valueStyle)},Ye(g(n)),7),a.$slots.suffix||a.suffix?(F(),K("div",{key:1,class:U(g(r).e("suffix"))},[Ee(a.$slots,"suffix",{},()=>[ie("span",null,Ye(a.suffix),1)])],2)):Ae("v-if",!0)],2)],2))}});var Eat=Ze(Cat,[["__file","statistic.vue"]]);const xJ=Rt(Eat),Aat=je({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:be([Number,Object]),default:0},valueStyle:{type:be([String,Object,Array])}}),Mat={finish:()=>!0,[nr]:e=>gt(e)},Tat=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],Lz=e=>gt(e)?new Date(e).getTime():e.valueOf(),Bz=(e,t)=>{let i=e;const r=/\[([^\]]*)]/g;return Tat.reduce((a,[s,o])=>{const l=new RegExp(`${s}+(?![^\\[\\]]*\\])`,"g");if(l.test(a)){const c=Math.floor(i/o);return i-=c*o,a.replace(l,u=>String(c).padStart(u.length,"0"))}return a},t).replace(r,"$1")},Pat=ce({name:"ElCountdown"}),Dat=ce({...Pat,props:Aat,emits:Mat,setup(e,{expose:t,emit:i}){const r=e;let n;const a=j(0),s=O(()=>Bz(a.value,r.format)),o=u=>Bz(u,r.format),l=()=>{n&&(Jf(n),n=void 0)},c=()=>{const u=Lz(r.value),d=()=>{let h=u-Date.now();i("change",h),h<=0?(h=0,l(),i("finish")):n=fh(d),a.value=h};n=fh(d)};return Lt(()=>{a.value=Lz(r.value)-Date.now(),Ne(()=>[r.value,r.format],()=>{l(),c()},{immediate:!0})}),Bi(()=>{l()}),t({displayValue:s}),(u,d)=>(F(),De(g(xJ),{value:a.value,title:u.title,prefix:u.prefix,suffix:u.suffix,"value-style":u.valueStyle,formatter:o},Lo({_:2},[Qt(u.$slots,(h,f)=>({name:f,fn:ve(()=>[Ee(u.$slots,f)])}))]),1032,["value","title","prefix","suffix","value-style"]))}});var Iat=Ze(Dat,[["__file","countdown.vue"]]);const Oat=Rt(Iat),Rat=je({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),kat={[nr]:(e,t)=>[e,t].every(gt)},Lat=ce({name:"ElSteps"}),Bat=ce({...Lat,props:Rat,emits:kat,setup(e,{emit:t}){const i=e,r=Ve("steps"),{children:n,addChild:a,removeChild:s}=a8(Ut(),"ElStep");return Ne(n,()=>{n.value.forEach((o,l)=>{o.setIndex(l)})}),Yt("ElSteps",{props:i,steps:n,addStep:a,removeStep:s}),Ne(()=>i.active,(o,l)=>{t(nr,o,l)}),(o,l)=>(F(),K("div",{class:U([g(r).b(),g(r).m(o.simple?"simple":o.direction)])},[Ee(o.$slots,"default")],2))}});var Nat=Ze(Bat,[["__file","steps.vue"]]);const Fat=je({title:{type:String,default:""},icon:{type:zi},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),zat=ce({name:"ElStep"}),Vat=ce({...zat,props:Fat,setup(e){const t=e,i=Ve("step"),r=j(-1),n=j({}),a=j(""),s=rt("ElSteps"),o=Ut();Lt(()=>{Ne([()=>s.props.active,()=>s.props.processStatus,()=>s.props.finishStatus],([_])=>{w(_)},{immediate:!0})}),Bi(()=>{s.removeStep(S.uid)});const l=O(()=>t.status||a.value),c=O(()=>{const _=s.steps.value[r.value-1];return _?_.currentStatus:"wait"}),u=O(()=>s.props.alignCenter),d=O(()=>s.props.direction==="vertical"),h=O(()=>s.props.simple),f=O(()=>s.steps.value.length),p=O(()=>{var _;return((_=s.steps.value[f.value-1])==null?void 0:_.uid)===(o==null?void 0:o.uid)}),m=O(()=>h.value?"":s.props.space),v=O(()=>[i.b(),i.is(h.value?"simple":s.props.direction),i.is("flex",p.value&&!m.value&&!u.value),i.is("center",u.value&&!d.value&&!h.value)]),y=O(()=>{const _={flexBasis:gt(m.value)?`${m.value}px`:m.value?m.value:`${100/(f.value-(u.value?0:1))}%`};return d.value||p.value&&(_.maxWidth=`${100/f.value}%`),_}),x=_=>{r.value=_},b=_=>{const E=_==="wait",C={transitionDelay:`${E?"-":""}${150*r.value}ms`},A=_===s.props.processStatus||E?0:100;C.borderWidth=A&&!h.value?"1px":0,C[s.props.direction==="vertical"?"height":"width"]=`${A}%`,n.value=C},w=_=>{_>r.value?a.value=s.props.finishStatus:_===r.value&&c.value!=="error"?a.value=s.props.processStatus:a.value="wait";const E=s.steps.value[r.value-1];E&&E.calcProgress(a.value)},S=bi({uid:o.uid,currentStatus:l,setIndex:x,calcProgress:b});return s.addStep(S),(_,E)=>(F(),K("div",{style:mt(g(y)),class:U(g(v))},[Ae(" icon & line "),ie("div",{class:U([g(i).e("head"),g(i).is(g(l))])},[g(h)?Ae("v-if",!0):(F(),K("div",{key:0,class:U(g(i).e("line"))},[ie("i",{class:U(g(i).e("line-inner")),style:mt(n.value)},null,6)],2)),ie("div",{class:U([g(i).e("icon"),g(i).is(_.icon||_.$slots.icon?"icon":"text")])},[Ee(_.$slots,"icon",{},()=>[_.icon?(F(),De(g(ut),{key:0,class:U(g(i).e("icon-inner"))},{default:ve(()=>[(F(),De(jt(_.icon)))]),_:1},8,["class"])):g(l)==="success"?(F(),De(g(ut),{key:1,class:U([g(i).e("icon-inner"),g(i).is("status")])},{default:ve(()=>[ne(g(Py))]),_:1},8,["class"])):g(l)==="error"?(F(),De(g(ut),{key:2,class:U([g(i).e("icon-inner"),g(i).is("status")])},{default:ve(()=>[ne(g(Ml))]),_:1},8,["class"])):g(h)?Ae("v-if",!0):(F(),K("div",{key:3,class:U(g(i).e("icon-inner"))},Ye(r.value+1),3))])],2)],2),Ae(" title & description "),ie("div",{class:U(g(i).e("main"))},[ie("div",{class:U([g(i).e("title"),g(i).is(g(l))])},[Ee(_.$slots,"title",{},()=>[Xt(Ye(_.title),1)])],2),g(h)?(F(),K("div",{key:0,class:U(g(i).e("arrow"))},null,2)):(F(),K("div",{key:1,class:U([g(i).e("description"),g(i).is(g(l))])},[Ee(_.$slots,"description",{},()=>[Xt(Ye(_.description),1)])],2))],2)],6))}});var _J=Ze(Vat,[["__file","item.vue"]]);const Uat=Rt(Nat,{Step:_J}),Hat=Tr(_J),jat=je({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:AK},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:zi},activeActionIcon:{type:zi},activeIcon:{type:zi},inactiveIcon:{type:zi},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:be(Function)},id:String,tabindex:{type:[String,Number]},...ha(["ariaLabel"])}),Wat={[Vt]:e=>Gi(e)||Et(e)||gt(e),[nr]:e=>Gi(e)||Et(e)||gt(e),[fs]:e=>Gi(e)||Et(e)||gt(e)},SJ="ElSwitch",Gat=ce({name:SJ}),$at=ce({...Gat,props:jat,emits:Wat,setup(e,{expose:t,emit:i}){const r=e,{formItem:n}=Ya(),a=on(),s=Ve("switch"),{inputId:o}=kl(r,{formItemContext:n}),l=qa(O(()=>r.loading)),c=j(r.modelValue!==!1),u=j(),d=j(),h=O(()=>[s.b(),s.m(a.value),s.is("disabled",l.value),s.is("checked",y.value)]),f=O(()=>[s.e("label"),s.em("label","left"),s.is("active",!y.value)]),p=O(()=>[s.e("label"),s.em("label","right"),s.is("active",y.value)]),m=O(()=>({width:zr(r.width)}));Ne(()=>r.modelValue,()=>{c.value=!0});const v=O(()=>c.value?r.modelValue:!1),y=O(()=>v.value===r.activeValue);[r.activeValue,r.inactiveValue].includes(v.value)||(i(Vt,r.inactiveValue),i(nr,r.inactiveValue),i(fs,r.inactiveValue)),Ne(y,S=>{var _;u.value.checked=S,r.validateEvent&&((_=n==null?void 0:n.validate)==null||_.call(n,"change").catch(E=>void 0))});const x=()=>{const S=y.value?r.inactiveValue:r.activeValue;i(Vt,S),i(nr,S),i(fs,S),ft(()=>{u.value.checked=y.value})},b=()=>{if(l.value)return;const{beforeChange:S}=r;if(!S){x();return}const _=S();[nT(_),Gi(_)].includes(!0)||bn(SJ,"beforeChange must return type `Promise<boolean>` or `boolean`"),nT(_)?_.then(C=>{C&&x()}).catch(C=>{}):_&&x()},w=()=>{var S,_;(_=(S=u.value)==null?void 0:S.focus)==null||_.call(S)};return Lt(()=>{u.value.checked=y.value}),t({focus:w,checked:y}),(S,_)=>(F(),K("div",{class:U(g(h)),onClick:xt(b,["prevent"])},[ie("input",{id:g(o),ref_key:"input",ref:u,class:U(g(s).e("input")),type:"checkbox",role:"switch","aria-checked":g(y),"aria-disabled":g(l),"aria-label":S.ariaLabel,name:S.name,"true-value":S.activeValue,"false-value":S.inactiveValue,disabled:g(l),tabindex:S.tabindex,onChange:x,onKeydown:Hi(b,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),!S.inlinePrompt&&(S.inactiveIcon||S.inactiveText)?(F(),K("span",{key:0,class:U(g(f))},[S.inactiveIcon?(F(),De(g(ut),{key:0},{default:ve(()=>[(F(),De(jt(S.inactiveIcon)))]),_:1})):Ae("v-if",!0),!S.inactiveIcon&&S.inactiveText?(F(),K("span",{key:1,"aria-hidden":g(y)},Ye(S.inactiveText),9,["aria-hidden"])):Ae("v-if",!0)],2)):Ae("v-if",!0),ie("span",{ref_key:"core",ref:d,class:U(g(s).e("core")),style:mt(g(m))},[S.inlinePrompt?(F(),K("div",{key:0,class:U(g(s).e("inner"))},[S.activeIcon||S.inactiveIcon?(F(),De(g(ut),{key:0,class:U(g(s).is("icon"))},{default:ve(()=>[(F(),De(jt(g(y)?S.activeIcon:S.inactiveIcon)))]),_:1},8,["class"])):S.activeText||S.inactiveText?(F(),K("span",{key:1,class:U(g(s).is("text")),"aria-hidden":!g(y)},Ye(g(y)?S.activeText:S.inactiveText),11,["aria-hidden"])):Ae("v-if",!0)],2)):Ae("v-if",!0),ie("div",{class:U(g(s).e("action"))},[S.loading?(F(),De(g(ut),{key:0,class:U(g(s).is("loading"))},{default:ve(()=>[ne(g(_c))]),_:1},8,["class"])):g(y)?Ee(S.$slots,"active-action",{key:1},()=>[S.activeActionIcon?(F(),De(g(ut),{key:0},{default:ve(()=>[(F(),De(jt(S.activeActionIcon)))]),_:1})):Ae("v-if",!0)]):g(y)?Ae("v-if",!0):Ee(S.$slots,"inactive-action",{key:2},()=>[S.inactiveActionIcon?(F(),De(g(ut),{key:0},{default:ve(()=>[(F(),De(jt(S.inactiveActionIcon)))]),_:1})):Ae("v-if",!0)])],2)],6),!S.inlinePrompt&&(S.activeIcon||S.activeText)?(F(),K("span",{key:1,class:U(g(p))},[S.activeIcon?(F(),De(g(ut),{key:0},{default:ve(()=>[(F(),De(jt(S.activeIcon)))]),_:1})):Ae("v-if",!0),!S.activeIcon&&S.activeText?(F(),K("span",{key:1,"aria-hidden":!g(y)},Ye(S.activeText),9,["aria-hidden"])):Ae("v-if",!0)],2)):Ae("v-if",!0)],10,["onClick"]))}});var Zat=Ze($at,[["__file","switch.vue"]]);const qat=Rt(Zat),cE=function(e){var t;return(t=e.target)==null?void 0:t.closest("td")},Yat=function(e,t,i,r,n){if(!t&&!r&&(!n||ct(n)&&!n.length))return e;Et(i)?i=i==="descending"?-1:1:i=i&&i<0?-1:1;const a=r?null:function(o,l){return n?(ct(n)||(n=[n]),n.map(c=>Et(c)?Nr(o,c):c(o,l,e))):(t!=="$key"&&Ri(o)&&"$value"in o&&(o=o.$value),[Ri(o)?Nr(o,t):o])},s=function(o,l){if(r)return r(o.value,l.value);for(let c=0,u=o.key.length;c<u;c++){if(o.key[c]<l.key[c])return-1;if(o.key[c]>l.key[c])return 1}return 0};return e.map((o,l)=>({value:o,index:l,key:a?a(o,l):null})).sort((o,l)=>{let c=s(o,l);return c||(c=o.index-l.index),c*+i}).map(o=>o.value)},CJ=function(e,t){let i=null;return e.columns.forEach(r=>{r.id===t&&(i=r)}),i},Kat=function(e,t){let i=null;for(let r=0;r<e.columns.length;r++){const n=e.columns[r];if(n.columnKey===t){i=n;break}}return i||bn("ElTable",`No column matching with column-key: ${t}`),i},Nz=function(e,t,i){const r=(t.className||"").match(new RegExp(`${i}-table_[^\\s]+`,"gm"));return r?CJ(e,r[0]):null},Fa=(e,t)=>{if(!e)throw new Error("Row is required when get row identity");if(Et(t)){if(!t.includes("."))return`${e[t]}`;const i=t.split(".");let r=e;for(const n of i)r=r[n];return`${r}`}else if(Wt(t))return t.call(null,e)},Af=function(e,t){const i={};return(e||[]).forEach((r,n)=>{i[Fa(r,t)]={row:r,index:n}}),i};function Xat(e,t){const i={};let r;for(r in e)i[r]=e[r];for(r in t)if(Ma(t,r)){const n=t[r];typeof n<"u"&&(i[r]=n)}return i}function R8(e){return e===""||e!==void 0&&(e=Number.parseInt(e,10),Number.isNaN(e)&&(e="")),e}function EJ(e){return e===""||e!==void 0&&(e=R8(e),Number.isNaN(e)&&(e=80)),e}function Qat(e){return gt(e)?e:Et(e)?/^\d+(?:px)?$/.test(e)?Number.parseInt(e,10):e:null}function Jat(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,i)=>(...r)=>t(i(...r)))}function __(e,t,i,r,n,a){let s=a??0,o=!1;const l=e.indexOf(t),c=l!==-1,u=n==null?void 0:n.call(null,t,a),d=f=>{f==="add"?e.push(t):e.splice(l,1),o=!0},h=f=>{let p=0;const m=(r==null?void 0:r.children)&&f[r.children];return m&&ct(m)&&(p+=m.length,m.forEach(v=>{p+=h(v)})),p};return(!n||u)&&(Gi(i)?i&&!c?d("add"):!i&&c&&d("remove"):d(c?"remove":"add")),!(r!=null&&r.checkStrictly)&&(r!=null&&r.children)&&ct(t[r.children])&&t[r.children].forEach(f=>{__(e,f,i??!c,r,n,s+1),s+=h(f)+1}),o}function est(e,t,i="children",r="hasChildren"){const n=s=>!(ct(s)&&s.length);function a(s,o,l){t(s,o,l),o.forEach(c=>{if(c[r]){t(c,null,l+1);return}const u=c[i];n(u)||a(c,u,l+1)})}e.forEach(s=>{if(s[r]){t(s,null,0);return}const o=s[i];n(o)||a(s,o,0)})}const Fz=(e,t)=>({content:t,...e,popperOptions:{strategy:"fixed",...e.popperOptions}});let fo=null;function tst(e,t,i,r){if((fo==null?void 0:fo.trigger)===i){CI(fo.vm.component.props,Fz(e,t));return}fo==null||fo();const n=r==null?void 0:r.refs.tableWrapper,a=n==null?void 0:n.dataset.prefix,s=ne(Ta,{virtualTriggering:!0,virtualRef:i,appendTo:n,placement:"top",transition:"none",offset:0,hideAfter:0,...Fz(e,t)});s.appContext={...r.appContext,...r};const o=document.createElement("div");ah(s,o),s.component.exposed.onOpen();const l=n==null?void 0:n.querySelector(`.${a}-scrollbar__wrap`);fo=()=>{ah(null,o),l==null||l.removeEventListener("scroll",fo),fo=null},fo.trigger=i,fo.vm=s,l==null||l.addEventListener("scroll",fo)}function AJ(e){return e.children?DY(e.children,AJ):[e]}function zz(e,t){return e+t.colSpan}const MJ=(e,t,i,r)=>{let n=0,a=e;const s=i.states.columns.value;if(r){const l=AJ(r[e]);n=s.slice(0,s.indexOf(l[0])).reduce(zz,0),a=n+l.reduce(zz,0)-1}else n=e;let o;switch(t){case"left":a<i.states.fixedLeafColumnsLength.value&&(o="left");break;case"right":n>=s.length-i.states.rightFixedLeafColumnsLength.value&&(o="right");break;default:a<i.states.fixedLeafColumnsLength.value?o="left":n>=s.length-i.states.rightFixedLeafColumnsLength.value&&(o="right")}return o?{direction:o,start:n,after:a}:{}},k8=(e,t,i,r,n,a=0)=>{const s=[],{direction:o,start:l,after:c}=MJ(t,i,r,n);if(o){const u=o==="left";s.push(`${e}-fixed-column--${o}`),u&&c+a===r.states.fixedLeafColumnsLength.value-1?s.push("is-last-column"):!u&&l-a===r.states.columns.value.length-r.states.rightFixedLeafColumnsLength.value&&s.push("is-first-column")}return s};function Vz(e,t){return e+(t.realWidth===null||Number.isNaN(t.realWidth)?Number(t.width):t.realWidth)}const L8=(e,t,i,r)=>{const{direction:n,start:a=0,after:s=0}=MJ(e,t,i,r);if(!n)return;const o={},l=n==="left",c=i.states.columns.value;return l?o.left=c.slice(0,a).reduce(Vz,0):o.right=c.slice(s+1).reverse().reduce(Vz,0),o},kv=(e,t)=>{e&&(Number.isNaN(e[t])||(e[t]=`${e[t]}px`))};function ist(e){const t=Ut(),i=j(!1),r=j([]);return{updateExpandRows:()=>{const l=e.data.value||[],c=e.rowKey.value;if(i.value)r.value=l.slice();else if(c){const u=Af(r.value,c);r.value=l.reduce((d,h)=>{const f=Fa(h,c);return u[f]&&d.push(h),d},[])}else r.value=[]},toggleRowExpansion:(l,c)=>{__(r.value,l,c)&&t.emit("expand-change",l,r.value.slice())},setExpandRowKeys:l=>{t.store.assertRowKey();const c=e.data.value||[],u=e.rowKey.value,d=Af(c,u);r.value=l.reduce((h,f)=>{const p=d[f];return p&&h.push(p.row),h},[])},isRowExpanded:l=>{const c=e.rowKey.value;return c?!!Af(r.value,c)[Fa(l,c)]:r.value.includes(l)},states:{expandRows:r,defaultExpandAll:i}}}function rst(e){const t=Ut(),i=j(null),r=j(null),n=c=>{t.store.assertRowKey(),i.value=c,s(c)},a=()=>{i.value=null},s=c=>{const{data:u,rowKey:d}=e;let h=null;d.value&&(h=(g(u)||[]).find(f=>Fa(f,d.value)===c)),r.value=h,t.emit("current-change",r.value,null)};return{setCurrentRowKey:n,restoreCurrentRowKey:a,setCurrentRowByKey:s,updateCurrentRow:c=>{const u=r.value;if(c&&c!==u){r.value=c,t.emit("current-change",r.value,u);return}!c&&u&&(r.value=null,t.emit("current-change",null,u))},updateCurrentRowData:()=>{const c=e.rowKey.value,u=e.data.value||[],d=r.value;if(!u.includes(d)&&d){if(c){const h=Fa(d,c);s(h)}else r.value=null;r.value===null&&t.emit("current-change",null,d)}else i.value&&(s(i.value),a())},states:{_currentRowKey:i,currentRow:r}}}function nst(e){const t=j([]),i=j({}),r=j(16),n=j(!1),a=j({}),s=j("hasChildren"),o=j("children"),l=j(!1),c=Ut(),u=O(()=>{if(!e.rowKey.value)return{};const b=e.data.value||[];return h(b)}),d=O(()=>{const b=e.rowKey.value,w=Object.keys(a.value),S={};return w.length&&w.forEach(_=>{if(a.value[_].length){const E={children:[]};a.value[_].forEach(C=>{const A=Fa(C,b);E.children.push(A),C[s.value]&&!S[A]&&(S[A]={children:[]})}),S[_]=E}}),S}),h=b=>{const w=e.rowKey.value,S={};return est(b,(_,E,C)=>{const A=Fa(_,w);ct(E)?S[A]={children:E.map(M=>Fa(M,w)),level:C}:n.value&&(S[A]={children:[],lazy:!0,level:C})},o.value,s.value),S},f=(b=!1,w=(S=>(S=c.store)==null?void 0:S.states.defaultExpandAll.value)())=>{var S;const _=u.value,E=d.value,C=Object.keys(_),A={};if(C.length){const M=g(i),T=[],P=(k,L)=>{if(b)return t.value?w||t.value.includes(L):!!(w||k!=null&&k.expanded);{const R=w||t.value&&t.value.includes(L);return!!(k!=null&&k.expanded||R)}};C.forEach(k=>{const L=M[k],R={..._[k]};if(R.expanded=P(L,k),R.lazy){const{loaded:N=!1,loading:I=!1}=L||{};R.loaded=!!N,R.loading=!!I,T.push(k)}A[k]=R});const D=Object.keys(E);n.value&&D.length&&T.length&&D.forEach(k=>{const L=M[k],R=E[k].children;if(T.includes(k)){if(A[k].children.length!==0)throw new Error("[ElTable]children must be an empty array.");A[k].children=R}else{const{loaded:N=!1,loading:I=!1}=L||{};A[k]={lazy:!0,loaded:!!N,loading:!!I,expanded:P(L,k),children:R,level:""}}})}i.value=A,(S=c.store)==null||S.updateTableScrollY()};Ne(()=>t.value,()=>{f(!0)}),Ne(()=>u.value,()=>{f()}),Ne(()=>d.value,()=>{f()});const p=b=>{t.value=b,f()},m=(b,w)=>{c.store.assertRowKey();const S=e.rowKey.value,_=Fa(b,S),E=_&&i.value[_];if(_&&E&&"expanded"in E){const C=E.expanded;w=Qi(w)?!E.expanded:w,i.value[_].expanded=w,C!==w&&c.emit("expand-change",b,w),c.store.updateTableScrollY()}},v=b=>{c.store.assertRowKey();const w=e.rowKey.value,S=Fa(b,w),_=i.value[S];n.value&&_&&"loaded"in _&&!_.loaded?y(b,S,_):m(b,void 0)},y=(b,w,S)=>{const{load:_}=c.props;_&&!i.value[w].loaded&&(i.value[w].loading=!0,_(b,S,E=>{if(!ct(E))throw new TypeError("[ElTable] data must be an array");i.value[w].loading=!1,i.value[w].loaded=!0,i.value[w].expanded=!0,E.length&&(a.value[w]=E),c.emit("expand-change",b,!0)}))};return{loadData:y,loadOrToggle:v,toggleTreeExpansion:m,updateTreeExpandKeys:p,updateTreeData:f,updateKeyChildren:(b,w)=>{const{lazy:S,rowKey:_}=c.props;if(S){if(!_)throw new Error("[Table] rowKey is required in updateKeyChild");a.value[b]&&(a.value[b]=w)}},normalize:h,states:{expandRowKeys:t,treeData:i,indent:r,lazy:n,lazyTreeNodeMap:a,lazyColumnIdentifier:s,childrenColumnName:o,checkStrictly:l}}}const ast=(e,t)=>{const i=t.sortingColumn;return!i||Et(i.sortable)?e:Yat(e,t.sortProp,t.sortOrder,i.sortMethod,i.sortBy)},_2=e=>{const t=[];return e.forEach(i=>{i.children&&i.children.length>0?t.push.apply(t,_2(i.children)):t.push(i)}),t};function sst(){var e;const t=Ut(),{size:i}=Gn((e=t.proxy)==null?void 0:e.$props),r=j(null),n=j([]),a=j([]),s=j(!1),o=j([]),l=j([]),c=j([]),u=j([]),d=j([]),h=j([]),f=j([]),p=j([]),m=[],v=j(0),y=j(0),x=j(0),b=j(!1),w=j([]),S=j(!1),_=j(!1),E=j(null),C=j({}),A=j(null),M=j(null),T=j(null),P=j(null),D=j(null);Ne(n,()=>{var _e;t.state&&(I(!1),t.props.tableLayout==="auto"&&((_e=t.refs.tableHeaderRef)==null||_e.updateFixedColumnStyle()))},{deep:!0});const k=()=>{if(!r.value)throw new Error("[ElTable] prop row-key is required")},L=_e=>{var Fe;(Fe=_e.children)==null||Fe.forEach(he=>{he.fixed=_e.fixed,L(he)})};let R;const N=()=>{o.value.forEach(se=>{L(se)}),u.value=o.value.filter(se=>se.fixed===!0||se.fixed==="left"),d.value=o.value.filter(se=>se.fixed==="right"),Qi(R)&&o.value[0]&&o.value[0].type==="selection"&&(R=!!o.value[0].fixed),u.value.length>0&&o.value[0]&&o.value[0].type==="selection"&&(o.value[0].fixed?u.value.some(He=>He.type!=="selection")?R=void 0:(o.value[0].fixed=R,R||u.value.shift()):(o.value[0].fixed=!0,u.value.unshift(o.value[0])));const _e=o.value.filter(se=>!se.fixed);l.value=[].concat(u.value).concat(_e).concat(d.value);const Fe=_2(_e),he=_2(u.value),ke=_2(d.value);v.value=Fe.length,y.value=he.length,x.value=ke.length,c.value=[].concat(he).concat(Fe).concat(ke),s.value=u.value.length>0||d.value.length>0},I=(_e,Fe=!1)=>{_e&&N(),Fe?t.state.doLayout():t.state.debouncedUpdateLayout()},B=_e=>w.value.some(Fe=>jn(Fe,_e)),z=()=>{b.value=!1;const _e=w.value;w.value=[],_e.length&&t.emit("selection-change",[])},V=()=>{let _e;if(r.value){_e=[];const Fe=Af(w.value,r.value),he=Af(n.value,r.value);for(const ke in Fe)Ma(Fe,ke)&&!he[ke]&&_e.push(Fe[ke].row)}else _e=w.value.filter(Fe=>!n.value.includes(Fe));if(_e.length){const Fe=w.value.filter(he=>!_e.includes(he));w.value=Fe,t.emit("selection-change",Fe.slice())}},W=()=>(w.value||[]).slice(),G=(_e,Fe,he=!0,ke=!1)=>{var se,He,yt,Te;const $e={children:(He=(se=t==null?void 0:t.store)==null?void 0:se.states)==null?void 0:He.childrenColumnName.value,checkStrictly:(Te=(yt=t==null?void 0:t.store)==null?void 0:yt.states)==null?void 0:Te.checkStrictly.value};if(__(w.value,_e,Fe,$e,ke?void 0:E.value)){const wt=(w.value||[]).slice();he&&t.emit("select",wt,_e),t.emit("selection-change",wt)}},q=()=>{var _e,Fe;const he=_.value?!b.value:!(b.value||w.value.length);b.value=he;let ke=!1,se=0;const He=(Fe=(_e=t==null?void 0:t.store)==null?void 0:_e.states)==null?void 0:Fe.rowKey.value,{childrenColumnName:yt}=t.store.states,Te={children:yt.value,checkStrictly:!1};n.value.forEach(($e,st)=>{const wt=st+se;__(w.value,$e,he,Te,E.value,wt)&&(ke=!0),se+=$(Fa($e,He))}),ke&&t.emit("selection-change",w.value?w.value.slice():[]),t.emit("select-all",(w.value||[]).slice())},ae=()=>{const _e=Af(w.value,r.value);n.value.forEach(Fe=>{const he=Fa(Fe,r.value),ke=_e[he];ke&&(w.value[ke.index]=Fe)})},J=()=>{var _e;if(((_e=n.value)==null?void 0:_e.length)===0){b.value=!1;return}const{childrenColumnName:Fe}=t.store.states,he=r.value?Af(w.value,r.value):void 0;let ke=0,se=0;const He=$e=>he?!!he[Fa($e,r.value)]:w.value.includes($e),yt=$e=>{var st;for(const wt of $e){const Pt=E.value&&E.value.call(null,wt,ke);if(He(wt))se++;else if(!E.value||Pt)return!1;if(ke++,(st=wt[Fe.value])!=null&&st.length&&!yt(wt[Fe.value]))return!1}return!0},Te=yt(n.value||[]);b.value=se===0?!1:Te},$=_e=>{var Fe;if(!t||!t.store)return 0;const{treeData:he}=t.store.states;let ke=0;const se=(Fe=he.value[_e])==null?void 0:Fe.children;return se&&(ke+=se.length,se.forEach(He=>{ke+=$(He)})),ke},te=(_e,Fe)=>{ct(_e)||(_e=[_e]);const he={};return _e.forEach(ke=>{C.value[ke.id]=Fe,he[ke.columnKey||ke.id]=Fe}),he},Q=(_e,Fe,he)=>{M.value&&M.value!==_e&&(M.value.order=null),M.value=_e,T.value=Fe,P.value=he},pe=()=>{let _e=g(a);Object.keys(C.value).forEach(Fe=>{const he=C.value[Fe];if(!he||he.length===0)return;const ke=CJ({columns:c.value},Fe);ke&&ke.filterMethod&&(_e=_e.filter(se=>he.some(He=>ke.filterMethod.call(null,He,se,ke))))}),A.value=_e},me=()=>{n.value=ast(A.value,{sortingColumn:M.value,sortProp:T.value,sortOrder:P.value})},le=(_e=void 0)=>{_e&&_e.filter||pe(),me()},Z=_e=>{const{tableHeaderRef:Fe}=t.refs;if(!Fe)return;const he=Object.assign({},Fe.filterPanels),ke=Object.keys(he);if(ke.length)if(Et(_e)&&(_e=[_e]),ct(_e)){const se=_e.map(He=>Kat({columns:c.value},He));ke.forEach(He=>{const yt=se.find(Te=>Te.id===He);yt&&(yt.filteredValue=[])}),t.store.commit("filterChange",{column:se,values:[],silent:!0,multi:!0})}else ke.forEach(se=>{const He=c.value.find(yt=>yt.id===se);He&&(He.filteredValue=[])}),C.value={},t.store.commit("filterChange",{column:{},values:[],silent:!0})},oe=()=>{M.value&&(Q(null,null,null),t.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:ge,toggleRowExpansion:Ie,updateExpandRows:we,states:xe,isRowExpanded:Se}=ist({data:n,rowKey:r}),{updateTreeExpandKeys:Le,toggleTreeExpansion:Be,updateTreeData:ee,updateKeyChildren:X,loadOrToggle:ue,states:Oe}=nst({data:n,rowKey:r}),{updateCurrentRowData:Y,updateCurrentRow:qe,setCurrentRowKey:et,states:tt}=rst({data:n,rowKey:r});return{assertRowKey:k,updateColumns:N,scheduleLayout:I,isSelected:B,clearSelection:z,cleanSelection:V,getSelectionRows:W,toggleRowSelection:G,_toggleAllSelection:q,toggleAllSelection:null,updateSelectionByRowKey:ae,updateAllSelected:J,updateFilters:te,updateCurrentRow:qe,updateSort:Q,execFilter:pe,execSort:me,execQuery:le,clearFilter:Z,clearSort:oe,toggleRowExpansion:Ie,setExpandRowKeysAdapter:_e=>{ge(_e),Le(_e)},setCurrentRowKey:et,toggleRowExpansionAdapter:(_e,Fe)=>{c.value.some(({type:ke})=>ke==="expand")?Ie(_e,Fe):Be(_e,Fe)},isRowExpanded:Se,updateExpandRows:we,updateCurrentRowData:Y,loadOrToggle:ue,updateTreeData:ee,updateKeyChildren:X,states:{tableSize:i,rowKey:r,data:n,_data:a,isComplex:s,_columns:o,originColumns:l,columns:c,fixedColumns:u,rightFixedColumns:d,leafColumns:h,fixedLeafColumns:f,rightFixedLeafColumns:p,updateOrderFns:m,leafColumnsLength:v,fixedLeafColumnsLength:y,rightFixedLeafColumnsLength:x,isAllSelected:b,selection:w,reserveSelection:S,selectOnIndeterminate:_,selectable:E,filters:C,filteredData:A,sortingColumn:M,sortProp:T,sortOrder:P,hoverRow:D,...xe,...Oe,...tt}}}function a5(e,t){return e.map(i=>{var r;return i.id===t.id?t:((r=i.children)!=null&&r.length&&(i.children=a5(i.children,t)),i)})}function s5(e){e.forEach(t=>{var i,r;t.no=(i=t.getColumnIndex)==null?void 0:i.call(t),(r=t.children)!=null&&r.length&&s5(t.children)}),e.sort((t,i)=>t.no-i.no)}function ost(){const e=Ut(),t=sst();return{ns:Ve("table"),...t,mutations:{setData(s,o){const l=g(s._data)!==o;s.data.value=o,s._data.value=o,e.store.execQuery(),e.store.updateCurrentRowData(),e.store.updateExpandRows(),e.store.updateTreeData(e.store.states.defaultExpandAll.value),g(s.reserveSelection)?(e.store.assertRowKey(),e.store.updateSelectionByRowKey()):l?e.store.clearSelection():e.store.cleanSelection(),e.store.updateAllSelected(),e.$ready&&e.store.scheduleLayout()},insertColumn(s,o,l,c){const u=g(s._columns);let d=[];l?(l&&!l.children&&(l.children=[]),l.children.push(o),d=a5(u,l)):(u.push(o),d=u),s5(d),s._columns.value=d,s.updateOrderFns.push(c),o.type==="selection"&&(s.selectable.value=o.selectable,s.reserveSelection.value=o.reserveSelection),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},updateColumnOrder(s,o){var l;((l=o.getColumnIndex)==null?void 0:l.call(o))!==o.no&&(s5(s._columns.value),e.$ready&&e.store.updateColumns())},removeColumn(s,o,l,c){const u=g(s._columns)||[];if(l)l.children.splice(l.children.findIndex(h=>h.id===o.id),1),ft(()=>{var h;((h=l.children)==null?void 0:h.length)===0&&delete l.children}),s._columns.value=a5(u,l);else{const h=u.indexOf(o);h>-1&&(u.splice(h,1),s._columns.value=u)}const d=s.updateOrderFns.indexOf(c);d>-1&&s.updateOrderFns.splice(d,1),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},sort(s,o){const{prop:l,order:c,init:u}=o;if(l){const d=g(s.columns).find(h=>h.property===l);d&&(d.order=c,e.store.updateSort(d,l,c),e.store.commit("changeSortCondition",{init:u}))}},changeSortCondition(s,o){const{sortingColumn:l,sortProp:c,sortOrder:u}=s,d=g(l),h=g(c),f=g(u);f===null&&(s.sortingColumn.value=null,s.sortProp.value=null);const p={filter:!0};e.store.execQuery(p),(!o||!(o.silent||o.init))&&e.emit("sort-change",{column:d,prop:h,order:f}),e.store.updateTableScrollY()},filterChange(s,o){const{column:l,values:c,silent:u}=o,d=e.store.updateFilters(l,c);e.store.execQuery(),u||e.emit("filter-change",d),e.store.updateTableScrollY()},toggleAllSelection(){e.store.toggleAllSelection()},rowSelectedChanged(s,o){e.store.toggleRowSelection(o),e.store.updateAllSelected()},setHoverRow(s,o){s.hoverRow.value=o},setCurrentRow(s,o){e.store.updateCurrentRow(o)}},commit:function(s,...o){const l=e.store.mutations;if(l[s])l[s].apply(e,[e.store.states].concat(o));else throw new Error(`Action not found: ${s}`)},updateTableScrollY:function(){ft(()=>e.layout.updateScrollY.apply(e.layout))}}}const qg={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"},"treeProps.checkStrictly":{key:"checkStrictly",default:!1}};function lst(e,t){if(!e)throw new Error("Table is required.");const i=ost();return i.toggleAllSelection=gs(i._toggleAllSelection,10),Object.keys(qg).forEach(r=>{TJ(PJ(t,r),r,i)}),cst(i,t),i}function cst(e,t){Object.keys(qg).forEach(i=>{Ne(()=>PJ(t,i),r=>{TJ(r,i,e)})})}function TJ(e,t,i){let r=e,n=qg[t];typeof qg[t]=="object"&&(n=n.key,r=r||qg[t].default),i.states[n].value=r}function PJ(e,t){if(t.includes(".")){const i=t.split(".");let r=e;return i.forEach(n=>{r=r[n]}),r}else return e[t]}class ust{constructor(t){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=j(null),this.scrollX=j(!1),this.scrollY=j(!1),this.bodyWidth=j(null),this.fixedWidth=j(null),this.rightFixedWidth=j(null),this.gutterWidth=0;for(const i in t)Ma(t,i)&&(Ji(this[i])?this[i].value=t[i]:this[i]=t[i]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const i=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(i!=null&&i.wrapRef)){let r=!0;const n=this.scrollY.value;return r=i.wrapRef.scrollHeight>i.wrapRef.clientHeight,this.scrollY.value=r,n!==r}return!1}setHeight(t,i="height"){if(!si)return;const r=this.table.vnode.el;if(t=Qat(t),this.height.value=Number(t),!r&&(t||t===0))return ft(()=>this.setHeight(t,i));gt(t)?(r.style[i]=`${t}px`,this.updateElsHeight()):Et(t)&&(r.style[i]=t,this.updateElsHeight())}setMaxHeight(t){this.setHeight(t,"max-height")}getFlattenColumns(){const t=[];return this.table.store.states.columns.value.forEach(r=>{r.isColumnGroup?t.push.apply(t,r.columns):t.push(r)}),t}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(t){if(!t)return!0;let i=t;for(;i.tagName!=="DIV";){if(getComputedStyle(i).display==="none")return!0;i=i.parentElement}return!1}updateColumnsWidth(){if(!si)return;const t=this.fit,i=this.table.vnode.el.clientWidth;let r=0;const n=this.getFlattenColumns(),a=n.filter(l=>!gt(l.width));if(n.forEach(l=>{gt(l.width)&&l.realWidth&&(l.realWidth=null)}),a.length>0&&t){if(n.forEach(l=>{r+=Number(l.width||l.minWidth||80)}),r<=i){this.scrollX.value=!1;const l=i-r;if(a.length===1)a[0].realWidth=Number(a[0].minWidth||80)+l;else{const c=a.reduce((h,f)=>h+Number(f.minWidth||80),0),u=l/c;let d=0;a.forEach((h,f)=>{if(f===0)return;const p=Math.floor(Number(h.minWidth||80)*u);d+=p,h.realWidth=Number(h.minWidth||80)+p}),a[0].realWidth=Number(a[0].minWidth||80)+l-d}}else this.scrollX.value=!0,a.forEach(l=>{l.realWidth=Number(l.minWidth)});this.bodyWidth.value=Math.max(r,i),this.table.state.resizeState.value.width=this.bodyWidth.value}else n.forEach(l=>{!l.width&&!l.minWidth?l.realWidth=80:l.realWidth=Number(l.width||l.minWidth),r+=l.realWidth}),this.scrollX.value=r>i,this.bodyWidth.value=r;const s=this.store.states.fixedColumns.value;if(s.length>0){let l=0;s.forEach(c=>{l+=Number(c.realWidth||c.width)}),this.fixedWidth.value=l}const o=this.store.states.rightFixedColumns.value;if(o.length>0){let l=0;o.forEach(c=>{l+=Number(c.realWidth||c.width)}),this.rightFixedWidth.value=l}this.notifyObservers("columns")}addObserver(t){this.observers.push(t)}removeObserver(t){const i=this.observers.indexOf(t);i!==-1&&this.observers.splice(i,1)}notifyObservers(t){this.observers.forEach(r=>{var n,a;switch(t){case"columns":(n=r.state)==null||n.onColumnsChange(this);break;case"scrollable":(a=r.state)==null||a.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${t}.`)}})}}var dst=ust;const{CheckboxGroup:hst}=jo,fst=ce({name:"ElTableFilterPanel",components:{ElCheckbox:jo,ElCheckboxGroup:hst,ElScrollbar:Bc,ElTooltip:Ta,ElIcon:ut,ArrowDown:Ku,ArrowUp:FI},directives:{ClickOutside:Nu},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function},appendTo:{type:String}},setup(e){const t=Ut(),{t:i}=di(),r=Ve("table-filter"),n=t==null?void 0:t.parent;n.filterPanels.value[e.column.id]||(n.filterPanels.value[e.column.id]=t);const a=j(!1),s=j(null),o=O(()=>e.column&&e.column.filters),l=O(()=>e.column.filterClassName?`${r.b()} ${e.column.filterClassName}`:r.b()),c=O({get:()=>{var S;return(((S=e.column)==null?void 0:S.filteredValue)||[])[0]},set:S=>{u.value&&(typeof S<"u"&&S!==null?u.value.splice(0,1,S):u.value.splice(0,1))}}),u=O({get(){return e.column?e.column.filteredValue||[]:[]},set(S){e.column&&e.upDataColumn("filteredValue",S)}}),d=O(()=>e.column?e.column.filterMultiple:!0),h=S=>S.value===c.value,f=()=>{a.value=!1},p=S=>{S.stopPropagation(),a.value=!a.value},m=()=>{a.value=!1},v=()=>{b(u.value),f()},y=()=>{u.value=[],b(u.value),f()},x=S=>{c.value=S,b(typeof S<"u"&&S!==null?u.value:[]),f()},b=S=>{e.store.commit("filterChange",{column:e.column,values:S}),e.store.updateAllSelected()};Ne(a,S=>{e.column&&e.upDataColumn("filterOpened",S)},{immediate:!0});const w=O(()=>{var S,_;return(_=(S=s.value)==null?void 0:S.popperRef)==null?void 0:_.contentRef});return{tooltipVisible:a,multiple:d,filterClassName:l,filteredValue:u,filterValue:c,filters:o,handleConfirm:v,handleReset:y,handleSelect:x,isActive:h,t:i,ns:r,showFilterPanel:p,hideFilterPanel:m,popperPaneRef:w,tooltip:s}}});function pst(e,t,i,r,n,a){const s=Ht("el-checkbox"),o=Ht("el-checkbox-group"),l=Ht("el-scrollbar"),c=Ht("arrow-up"),u=Ht("arrow-down"),d=Ht("el-icon"),h=Ht("el-tooltip"),f=O_("click-outside");return F(),De(h,{ref:"tooltip",visible:e.tooltipVisible,offset:0,placement:e.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":e.filterClassName,persistent:"","append-to":e.appendTo},{content:ve(()=>[e.multiple?(F(),K("div",{key:0},[ie("div",{class:U(e.ns.e("content"))},[ne(l,{"wrap-class":e.ns.e("wrap")},{default:ve(()=>[ne(o,{modelValue:e.filteredValue,"onUpdate:modelValue":p=>e.filteredValue=p,class:U(e.ns.e("checkbox-group"))},{default:ve(()=>[(F(!0),K(ht,null,Qt(e.filters,p=>(F(),De(s,{key:p.value,value:p.value},{default:ve(()=>[Xt(Ye(p.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"])]),_:1},8,["wrap-class"])],2),ie("div",{class:U(e.ns.e("bottom"))},[ie("button",{class:U({[e.ns.is("disabled")]:e.filteredValue.length===0}),disabled:e.filteredValue.length===0,type:"button",onClick:e.handleConfirm},Ye(e.t("el.table.confirmFilter")),11,["disabled","onClick"]),ie("button",{type:"button",onClick:e.handleReset},Ye(e.t("el.table.resetFilter")),9,["onClick"])],2)])):(F(),K("ul",{key:1,class:U(e.ns.e("list"))},[ie("li",{class:U([e.ns.e("list-item"),{[e.ns.is("active")]:e.filterValue===void 0||e.filterValue===null}]),onClick:p=>e.handleSelect(null)},Ye(e.t("el.table.clearFilter")),11,["onClick"]),(F(!0),K(ht,null,Qt(e.filters,p=>(F(),K("li",{key:p.value,class:U([e.ns.e("list-item"),e.ns.is("active",e.isActive(p))]),label:p.value,onClick:m=>e.handleSelect(p.value)},Ye(p.text),11,["label","onClick"]))),128))],2))]),default:ve(()=>[Nt((F(),K("span",{class:U([`${e.ns.namespace.value}-table__column-filter-trigger`,`${e.ns.namespace.value}-none-outline`]),onClick:e.showFilterPanel},[ne(d,null,{default:ve(()=>[Ee(e.$slots,"filter-icon",{},()=>[e.column.filterOpened?(F(),De(c,{key:0})):(F(),De(u,{key:1}))])]),_:3})],10,["onClick"])),[[f,e.hideFilterPanel,e.popperPaneRef]])]),_:3},8,["visible","placement","popper-class","append-to"])}var mst=Ze(fst,[["render",pst],["__file","filter-panel.vue"]]);function DJ(e){const t=Ut();I_(()=>{i.value.addObserver(t)}),Lt(()=>{r(i.value),n(i.value)}),Tl(()=>{r(i.value),n(i.value)}),zu(()=>{i.value.removeObserver(t)});const i=O(()=>{const a=e.layout;if(!a)throw new Error("Can not find table layout.");return a}),r=a=>{var s;const o=((s=e.vnode.el)==null?void 0:s.querySelectorAll("colgroup > col"))||[];if(!o.length)return;const l=a.getFlattenColumns(),c={};l.forEach(u=>{c[u.id]=u});for(let u=0,d=o.length;u<d;u++){const h=o[u],f=h.getAttribute("name"),p=c[f];p&&h.setAttribute("width",p.realWidth||p.width)}},n=a=>{var s,o;const l=((s=e.vnode.el)==null?void 0:s.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let u=0,d=l.length;u<d;u++)l[u].setAttribute("width",a.scrollY.value?a.gutterWidth:"0");const c=((o=e.vnode.el)==null?void 0:o.querySelectorAll("th.gutter"))||[];for(let u=0,d=c.length;u<d;u++){const h=c[u];h.style.width=a.scrollY.value?`${a.gutterWidth}px`:"0",h.style.display=a.scrollY.value?"":"none"}};return{tableLayout:i.value,onColumnsChange:r,onScrollableChange:n}}const Nc=Symbol("ElTable");function vst(e,t){const i=Ut(),r=rt(Nc),n=m=>{m.stopPropagation()},a=(m,v)=>{!v.filters&&v.sortable?p(m,v,!1):v.filterable&&!v.sortable&&n(m),r==null||r.emit("header-click",v,m)},s=(m,v)=>{r==null||r.emit("header-contextmenu",v,m)},o=j(null),l=j(!1),c=j({}),u=(m,v)=>{if(si&&!(v.children&&v.children.length>0)&&o.value&&e.border){l.value=!0;const y=r;t("set-drag-visible",!0);const b=(y==null?void 0:y.vnode.el).getBoundingClientRect().left,w=i.vnode.el.querySelector(`th.${v.id}`),S=w.getBoundingClientRect(),_=S.left-b+30;Eo(w,"noclick"),c.value={startMouseLeft:m.clientX,startLeft:S.right-b,startColumnLeft:S.left-b,tableLeft:b};const E=y==null?void 0:y.refs.resizeProxy;E.style.left=`${c.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const C=M=>{const T=M.clientX-c.value.startMouseLeft,P=c.value.startLeft+T;E.style.left=`${Math.max(_,P)}px`},A=()=>{if(l.value){const{startColumnLeft:M,startLeft:T}=c.value,D=Number.parseInt(E.style.left,10)-M;v.width=v.realWidth=D,y==null||y.emit("header-dragend",v.width,T-M,v,m),requestAnimationFrame(()=>{e.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",l.value=!1,o.value=null,c.value={},t("set-drag-visible",!1)}document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",A),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{Wa(w,"noclick")},0)};document.addEventListener("mousemove",C),document.addEventListener("mouseup",A)}},d=(m,v)=>{var y;if(v.children&&v.children.length>0)return;const x=m.target;if(!Xs(x))return;const b=x==null?void 0:x.closest("th");if(!(!v||!v.resizable||!b)&&!l.value&&e.border){const w=b.getBoundingClientRect(),S=document.body.style,_=((y=b.parentNode)==null?void 0:y.lastElementChild)===b;w.width>12&&w.right-m.pageX<8&&!_?(S.cursor="col-resize",Rs(b,"is-sortable")&&(b.style.cursor="col-resize"),o.value=v):l.value||(S.cursor="",Rs(b,"is-sortable")&&(b.style.cursor="pointer"),o.value=null)}},h=()=>{si&&(document.body.style.cursor="")},f=({order:m,sortOrders:v})=>{if(m==="")return v[0];const y=v.indexOf(m||null);return v[y>v.length-2?0:y+1]},p=(m,v,y)=>{var x;m.stopPropagation();const b=v.order===y?null:y||f(v),w=(x=m.target)==null?void 0:x.closest("th");if(w&&Rs(w,"noclick")){Wa(w,"noclick");return}if(!v.sortable)return;const S=m.currentTarget;if(["ascending","descending"].some(M=>Rs(S,M)&&!v.sortOrders.includes(M)))return;const _=e.store.states;let E=_.sortProp.value,C;const A=_.sortingColumn.value;(A!==v||A===v&&A.order===null)&&(A&&(A.order=null),_.sortingColumn.value=v,E=v.property),b?C=v.order=b:C=v.order=null,_.sortProp.value=E,_.sortOrder.value=C,r==null||r.store.commit("changeSortCondition")};return{handleHeaderClick:a,handleHeaderContextMenu:s,handleMouseDown:u,handleMouseMove:d,handleMouseOut:h,handleSortClick:p,handleFilterClick:n}}function gst(e){const t=rt(Nc),i=Ve("table");return{getHeaderRowStyle:o=>{const l=t==null?void 0:t.props.headerRowStyle;return Wt(l)?l.call(null,{rowIndex:o}):l},getHeaderRowClass:o=>{const l=[],c=t==null?void 0:t.props.headerRowClassName;return Et(c)?l.push(c):Wt(c)&&l.push(c.call(null,{rowIndex:o})),l.join(" ")},getHeaderCellStyle:(o,l,c,u)=>{var d;let h=(d=t==null?void 0:t.props.headerCellStyle)!=null?d:{};Wt(h)&&(h=h.call(null,{rowIndex:o,columnIndex:l,row:c,column:u}));const f=L8(l,u.fixed,e.store,c);return kv(f,"left"),kv(f,"right"),Object.assign({},h,f)},getHeaderCellClass:(o,l,c,u)=>{const d=k8(i.b(),l,u.fixed,e.store,c),h=[u.id,u.order,u.headerAlign,u.className,u.labelClassName,...d];u.children||h.push("is-leaf"),u.sortable&&h.push("is-sortable");const f=t==null?void 0:t.props.headerCellClassName;return Et(f)?h.push(f):Wt(f)&&h.push(f.call(null,{rowIndex:o,columnIndex:l,row:c,column:u})),h.push(i.e("cell")),h.filter(p=>!!p).join(" ")}}}const IJ=e=>{const t=[];return e.forEach(i=>{i.children?(t.push(i),t.push.apply(t,IJ(i.children))):t.push(i)}),t},OJ=e=>{let t=1;const i=(a,s)=>{if(s&&(a.level=s.level+1,t<a.level&&(t=a.level)),a.children){let o=0;a.children.forEach(l=>{i(l,a),o+=l.colSpan}),a.colSpan=o}else a.colSpan=1};e.forEach(a=>{a.level=1,i(a,void 0)});const r=[];for(let a=0;a<t;a++)r.push([]);return IJ(e).forEach(a=>{a.children?(a.rowSpan=1,a.children.forEach(s=>s.isSubColumn=!0)):a.rowSpan=t-a.level+1,r[a.level-1].push(a)}),r};function yst(e){const t=rt(Nc),i=O(()=>OJ(e.store.states.originColumns.value));return{isGroup:O(()=>{const a=i.value.length>1;return a&&t&&(t.state.isGroup.value=!0),a}),toggleAllSelection:a=>{a.stopPropagation(),t==null||t.store.commit("toggleAllSelection")},columnRows:i}}var bst=ce({name:"ElTableHeader",components:{ElCheckbox:jo},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})},appendFilterPanelTo:{type:String}},setup(e,{emit:t}){const i=Ut(),r=rt(Nc),n=Ve("table"),a=j({}),{onColumnsChange:s,onScrollableChange:o}=DJ(r),l=(r==null?void 0:r.props.tableLayout)==="auto",c=new Map,u=j(),d=()=>{setTimeout(()=>{c.size>0&&(c.forEach((M,T)=>{const P=u.value.querySelector(`.${T.replace(/\s/g,".")}`);if(P){const D=P.getBoundingClientRect().width;M.width=D}}),c.clear())})};Lt(async()=>{await ft(),await ft();const{prop:M,order:T}=e.defaultSort;r==null||r.store.commit("sort",{prop:M,order:T,init:!0}),d()});const{handleHeaderClick:h,handleHeaderContextMenu:f,handleMouseDown:p,handleMouseMove:m,handleMouseOut:v,handleSortClick:y,handleFilterClick:x}=vst(e,t),{getHeaderRowStyle:b,getHeaderRowClass:w,getHeaderCellStyle:S,getHeaderCellClass:_}=gst(e),{isGroup:E,toggleAllSelection:C,columnRows:A}=yst(e);return i.state={onColumnsChange:s,onScrollableChange:o},i.filterPanels=a,{ns:n,filterPanels:a,onColumnsChange:s,onScrollableChange:o,columnRows:A,getHeaderRowClass:w,getHeaderRowStyle:b,getHeaderCellClass:_,getHeaderCellStyle:S,handleHeaderClick:h,handleHeaderContextMenu:f,handleMouseDown:p,handleMouseMove:m,handleMouseOut:v,handleSortClick:y,handleFilterClick:x,isGroup:E,toggleAllSelection:C,saveIndexSelection:c,isTableLayoutAuto:l,theadRef:u,updateFixedColumnStyle:d}},render(){const{ns:e,isGroup:t,columnRows:i,getHeaderCellStyle:r,getHeaderCellClass:n,getHeaderRowClass:a,getHeaderRowStyle:s,handleHeaderClick:o,handleHeaderContextMenu:l,handleMouseDown:c,handleMouseMove:u,handleSortClick:d,handleMouseOut:h,store:f,$parent:p,saveIndexSelection:m,isTableLayoutAuto:v}=this;let y=1;return dt("thead",{ref:"theadRef",class:{[e.is("group")]:t}},i.map((x,b)=>dt("tr",{class:a(b),key:b,style:s(b)},x.map((w,S)=>{w.rowSpan>y&&(y=w.rowSpan);const _=n(b,S,x,w);return v&&w.fixed&&m.set(_,w),dt("th",{class:_,colspan:w.colSpan,key:`${w.id}-thead`,rowspan:w.rowSpan,style:r(b,S,x,w),onClick:E=>{E.currentTarget.classList.contains("noclick")||o(E,w)},onContextmenu:E=>l(E,w),onMousedown:E=>c(E,w),onMousemove:E=>u(E,w),onMouseout:h},[dt("div",{class:["cell",w.filteredValue&&w.filteredValue.length>0?"highlight":""]},[w.renderHeader?w.renderHeader({column:w,$index:S,store:f,_self:p}):w.label,w.sortable&&dt("span",{onClick:E=>d(E,w),class:"caret-wrapper"},[dt("i",{onClick:E=>d(E,w,"ascending"),class:"sort-caret ascending"}),dt("i",{onClick:E=>d(E,w,"descending"),class:"sort-caret descending"})]),w.filterable&&dt(mst,{store:f,placement:w.filterPlacement||"bottom-start",appendTo:p.appendFilterPanelTo,column:w,upDataColumn:(E,C)=>{w[E]=C}},{"filter-icon":()=>w.renderFilterIcon?w.renderFilterIcon({filterOpened:w.filterOpened}):null})])])}))))}});function uE(e,t,i=.03){return e-t>i}function wst(e){const t=rt(Nc),i=j(""),r=j(dt("div")),n=(p,m,v)=>{var y;const x=t,b=cE(p);let w;const S=(y=x==null?void 0:x.vnode.el)==null?void 0:y.dataset.prefix;b&&(w=Nz({columns:e.store.states.columns.value},b,S),w&&(x==null||x.emit(`cell-${v}`,m,w,b,p))),x==null||x.emit(`row-${v}`,m,w,p)},a=(p,m)=>{n(p,m,"dblclick")},s=(p,m)=>{e.store.commit("setCurrentRow",m),n(p,m,"click")},o=(p,m)=>{n(p,m,"contextmenu")},l=gs(p=>{e.store.commit("setHoverRow",p)},30),c=gs(()=>{e.store.commit("setHoverRow",null)},30),u=p=>{const m=window.getComputedStyle(p,null),v=Number.parseInt(m.paddingLeft,10)||0,y=Number.parseInt(m.paddingRight,10)||0,x=Number.parseInt(m.paddingTop,10)||0,b=Number.parseInt(m.paddingBottom,10)||0;return{left:v,right:y,top:x,bottom:b}},d=(p,m,v)=>{let y=m.target.parentNode;for(;p>1&&(y=y==null?void 0:y.nextSibling,!(!y||y.nodeName!=="TR"));)v(y,"hover-row hover-fixed-row"),p--};return{handleDoubleClick:a,handleClick:s,handleContextMenu:o,handleMouseEnter:l,handleMouseLeave:c,handleCellMouseEnter:(p,m,v)=>{var y;const x=t,b=cE(p),w=(y=x==null?void 0:x.vnode.el)==null?void 0:y.dataset.prefix;if(b){const N=Nz({columns:e.store.states.columns.value},b,w);b.rowSpan>1&&d(b.rowSpan,p,Eo);const I=x.hoverState={cell:b,column:N,row:m};x==null||x.emit("cell-mouse-enter",I.row,I.column,I.cell,p)}if(!v)return;const S=p.target.querySelector(".cell");if(!(Rs(S,`${w}-tooltip`)&&S.childNodes.length))return;const _=document.createRange();_.setStart(S,0),_.setEnd(S,S.childNodes.length);const{width:E,height:C}=_.getBoundingClientRect(),{width:A,height:M}=S.getBoundingClientRect(),{top:T,left:P,right:D,bottom:k}=u(S),L=P+D,R=T+k;(uE(E+L,A)||uE(C+R,M)||uE(S.scrollWidth,A))&&tst(v,b.innerText||b.textContent,b,x)},handleCellMouseLeave:p=>{const m=cE(p);if(!m)return;m.rowSpan>1&&d(m.rowSpan,p,Wa);const v=t==null?void 0:t.hoverState;t==null||t.emit("cell-mouse-leave",v==null?void 0:v.row,v==null?void 0:v.column,v==null?void 0:v.cell,p)},tooltipContent:i,tooltipTrigger:r}}function xst(e){const t=rt(Nc),i=Ve("table");return{getRowStyle:(c,u)=>{const d=t==null?void 0:t.props.rowStyle;return Wt(d)?d.call(null,{row:c,rowIndex:u}):d||null},getRowClass:(c,u)=>{const d=[i.e("row")];t!=null&&t.props.highlightCurrentRow&&c===e.store.states.currentRow.value&&d.push("current-row"),e.stripe&&u%2===1&&d.push(i.em("row","striped"));const h=t==null?void 0:t.props.rowClassName;return Et(h)?d.push(h):Wt(h)&&d.push(h.call(null,{row:c,rowIndex:u})),d},getCellStyle:(c,u,d,h)=>{const f=t==null?void 0:t.props.cellStyle;let p=f??{};Wt(f)&&(p=f.call(null,{rowIndex:c,columnIndex:u,row:d,column:h}));const m=L8(u,e==null?void 0:e.fixed,e.store);return kv(m,"left"),kv(m,"right"),Object.assign({},p,m)},getCellClass:(c,u,d,h,f)=>{const p=k8(i.b(),u,e==null?void 0:e.fixed,e.store,void 0,f),m=[h.id,h.align,h.className,...p],v=t==null?void 0:t.props.cellClassName;return Et(v)?m.push(v):Wt(v)&&m.push(v.call(null,{rowIndex:c,columnIndex:u,row:d,column:h})),m.push(i.e("cell")),m.filter(y=>!!y).join(" ")},getSpan:(c,u,d,h)=>{let f=1,p=1;const m=t==null?void 0:t.props.spanMethod;if(Wt(m)){const v=m({row:c,column:u,rowIndex:d,columnIndex:h});ct(v)?(f=v[0],p=v[1]):typeof v=="object"&&(f=v.rowspan,p=v.colspan)}return{rowspan:f,colspan:p}},getColspanRealWidth:(c,u,d)=>{if(u<1)return c[d].realWidth;const h=c.map(({realWidth:f,width:p})=>f||p).slice(d,d+u);return Number(h.reduce((f,p)=>Number(f)+Number(p),-1))}}}const _st=ce({name:"TableTdWrapper"}),Sst=ce({..._st,props:{colspan:{type:Number,default:1},rowspan:{type:Number,default:1}},setup(e){return(t,i)=>(F(),K("td",{colspan:e.colspan,rowspan:e.rowspan},[Ee(t.$slots,"default")],8,["colspan","rowspan"]))}});var Cst=Ze(Sst,[["__file","td-wrapper.vue"]]);function Est(e){const t=rt(Nc),i=Ve("table"),{handleDoubleClick:r,handleClick:n,handleContextMenu:a,handleMouseEnter:s,handleMouseLeave:o,handleCellMouseEnter:l,handleCellMouseLeave:c,tooltipContent:u,tooltipTrigger:d}=wst(e),{getRowStyle:h,getRowClass:f,getCellStyle:p,getCellClass:m,getSpan:v,getColspanRealWidth:y}=xst(e),x=O(()=>e.store.states.columns.value.findIndex(({type:E})=>E==="default")),b=(E,C)=>{const A=t.props.rowKey;return A?Fa(E,A):C},w=(E,C,A,M=!1)=>{const{tooltipEffect:T,tooltipOptions:P,store:D}=e,{indent:k,columns:L}=D.states,R=f(E,C);let N=!0;return A&&(R.push(i.em("row",`level-${A.level}`)),N=A.display),dt("tr",{style:[N?null:{display:"none"},h(E,C)],class:R,key:b(E,C),onDblclick:B=>r(B,E),onClick:B=>n(B,E),onContextmenu:B=>a(B,E),onMouseenter:()=>s(C),onMouseleave:o},L.value.map((B,z)=>{const{rowspan:V,colspan:W}=v(E,B,C,z);if(!V||!W)return null;const G=Object.assign({},B);G.realWidth=y(L.value,W,z);const q={store:e.store,_self:e.context||t,column:G,row:E,$index:C,cellIndex:z,expanded:M};z===x.value&&A&&(q.treeNode={indent:A.level*k.value,level:A.level},Gi(A.expanded)&&(q.treeNode.expanded=A.expanded,"loading"in A&&(q.treeNode.loading=A.loading),"noLazyChildren"in A&&(q.treeNode.noLazyChildren=A.noLazyChildren)));const ae=`${b(E,C)},${z}`,J=G.columnKey||G.rawColumnKey||"",$=B.showOverflowTooltip&&CI({effect:T},P,B.showOverflowTooltip);return dt(Cst,{style:p(C,z,E,B),class:m(C,z,E,B,W-1),key:`${J}${ae}`,rowspan:V,colspan:W,onMouseenter:te=>l(te,E,$),onMouseleave:c},{default:()=>S(z,B,q)})}))},S=(E,C,A)=>C.renderCell(A);return{wrappedRowRender:(E,C)=>{const A=e.store,{isRowExpanded:M,assertRowKey:T}=A,{treeData:P,lazyTreeNodeMap:D,childrenColumnName:k,rowKey:L}=A.states,R=A.states.columns.value;if(R.some(({type:I})=>I==="expand")){const I=M(E),B=w(E,C,void 0,I),z=t.renderExpanded;return I?z?[[B,dt("tr",{key:`expanded-row__${B.key}`},[dt("td",{colspan:R.length,class:`${i.e("cell")} ${i.e("expanded-cell")}`},[z({row:E,$index:C,store:A,expanded:I})])])]]:(console.error("[Element Error]renderExpanded is required."),B):[[B]]}else if(Object.keys(P.value).length){T();const I=Fa(E,L.value);let B=P.value[I],z=null;B&&(z={expanded:B.expanded,level:B.level,display:!0},Gi(B.lazy)&&(Gi(B.loaded)&&B.loaded&&(z.noLazyChildren=!(B.children&&B.children.length)),z.loading=B.loading));const V=[w(E,C,z)];if(B){let W=0;const G=(ae,J)=>{ae&&ae.length&&J&&ae.forEach($=>{const te={display:J.display&&J.expanded,level:J.level+1,expanded:!1,noLazyChildren:!1,loading:!1},Q=Fa($,L.value);if(Q==null)throw new Error("For nested data item, row-key is required.");if(B={...P.value[Q]},B&&(te.expanded=B.expanded,B.level=B.level||te.level,B.display=!!(B.expanded&&te.display),Gi(B.lazy)&&(Gi(B.loaded)&&B.loaded&&(te.noLazyChildren=!(B.children&&B.children.length)),te.loading=B.loading)),W++,V.push(w($,C+W,te)),B){const pe=D.value[Q]||$[k.value];G(pe,B)}})};B.display=!0;const q=D.value[I]||E[k.value];G(q,B)}return V}else return w(E,C,void 0)},tooltipContent:u,tooltipTrigger:d}}const Ast={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var Mst=Ast,Tst=ce({name:"ElTableBody",props:Mst,setup(e){const t=Ut(),i=rt(Nc),r=Ve("table"),{wrappedRowRender:n,tooltipContent:a,tooltipTrigger:s}=Est(e),{onColumnsChange:o,onScrollableChange:l}=DJ(i),c=[];return Ne(e.store.states.hoverRow,(u,d)=>{var h;const f=t==null?void 0:t.vnode.el,p=Array.from((f==null?void 0:f.children)||[]).filter(y=>y==null?void 0:y.classList.contains(`${r.e("row")}`));let m=u;const v=(h=p[m])==null?void 0:h.childNodes;if(v!=null&&v.length){let y=0;Array.from(v).reduce((b,w,S)=>{var _,E;return((_=v[S])==null?void 0:_.colSpan)>1&&(y=(E=v[S])==null?void 0:E.colSpan),w.nodeName!=="TD"&&y===0&&b.push(S),y>0&&y--,b},[]).forEach(b=>{var w;for(m=u;m>0;){const S=(w=p[m-1])==null?void 0:w.childNodes;if(S[b]&&S[b].nodeName==="TD"&&S[b].rowSpan>1){Eo(S[b],"hover-cell"),c.push(S[b]);break}m--}})}else c.forEach(y=>Wa(y,"hover-cell")),c.length=0;!e.store.states.isComplex.value||!si||fh(()=>{const y=p[d],x=p[u];y&&!y.classList.contains("hover-fixed-row")&&Wa(y,"hover-row"),x&&Eo(x,"hover-row")})}),zu(()=>{var u;(u=fo)==null||u()}),{ns:r,onColumnsChange:o,onScrollableChange:l,wrappedRowRender:n,tooltipContent:a,tooltipTrigger:s}},render(){const{wrappedRowRender:e,store:t}=this,i=t.states.data.value||[];return dt("tbody",{tabIndex:-1},[i.reduce((r,n)=>r.concat(e(n,r.length)),[])])}});function Pst(){const e=rt(Nc),t=e==null?void 0:e.store,i=O(()=>t.states.fixedLeafColumnsLength.value),r=O(()=>t.states.rightFixedColumns.value.length),n=O(()=>t.states.columns.value.length),a=O(()=>t.states.fixedColumns.value.length),s=O(()=>t.states.rightFixedColumns.value.length);return{leftFixedLeafCount:i,rightFixedLeafCount:r,columnsCount:n,leftFixedCount:a,rightFixedCount:s,columns:t.states.columns}}function Dst(e){const{columns:t}=Pst(),i=Ve("table");return{getCellClasses:(a,s)=>{const o=a[s],l=[i.e("cell"),o.id,o.align,o.labelClassName,...k8(i.b(),s,o.fixed,e.store)];return o.className&&l.push(o.className),o.children||l.push(i.is("leaf")),l},getCellStyles:(a,s)=>{const o=L8(s,a.fixed,e.store);return kv(o,"left"),kv(o,"right"),o},columns:t}}var Ist=ce({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e){const{getCellClasses:t,getCellStyles:i,columns:r}=Dst(e);return{ns:Ve("table"),getCellClasses:t,getCellStyles:i,columns:r}},render(){const{columns:e,getCellStyles:t,getCellClasses:i,summaryMethod:r,sumText:n}=this,a=this.store.states.data.value;let s=[];return r?s=r({columns:e,data:a}):e.forEach((o,l)=>{if(l===0){s[l]=n;return}const c=a.map(f=>Number(f[o.property])),u=[];let d=!0;c.forEach(f=>{if(!Number.isNaN(+f)){d=!1;const p=`${f}`.split(".")[1];u.push(p?p.length:0)}});const h=Math.max.apply(null,u);d?s[l]="":s[l]=c.reduce((f,p)=>{const m=Number(p);return Number.isNaN(+m)?f:Number.parseFloat((f+p).toFixed(Math.min(h,20)))},0)}),dt(dt("tfoot",[dt("tr",{},[...e.map((o,l)=>dt("td",{key:l,colspan:o.colSpan,rowspan:o.rowSpan,class:i(e,l),style:t(o,l)},[dt("div",{class:["cell",o.labelClassName]},[s[l]])]))])]))}});function Ost(e){return{setCurrentRow:d=>{e.commit("setCurrentRow",d)},getSelectionRows:()=>e.getSelectionRows(),toggleRowSelection:(d,h,f=!0)=>{e.toggleRowSelection(d,h,!1,f),e.updateAllSelected()},clearSelection:()=>{e.clearSelection()},clearFilter:d=>{e.clearFilter(d)},toggleAllSelection:()=>{e.commit("toggleAllSelection")},toggleRowExpansion:(d,h)=>{e.toggleRowExpansionAdapter(d,h)},clearSort:()=>{e.clearSort()},sort:(d,h)=>{e.commit("sort",{prop:d,order:h})},updateKeyChildren:(d,h)=>{e.updateKeyChildren(d,h)}}}function Rst(e,t,i,r){const n=j(!1),a=j(null),s=j(!1),o=I=>{s.value=I},l=j({width:null,height:null,headerHeight:null}),c=j(!1),u={display:"inline-block",verticalAlign:"middle"},d=j(),h=j(0),f=j(0),p=j(0),m=j(0),v=j(0);Ca(()=>{t.setHeight(e.height)}),Ca(()=>{t.setMaxHeight(e.maxHeight)}),Ne(()=>[e.currentRowKey,i.states.rowKey],([I,B])=>{!g(B)||!g(I)||i.setCurrentRowKey(`${I}`)},{immediate:!0}),Ne(()=>e.data,I=>{r.store.commit("setData",I)},{immediate:!0,deep:!0}),Ca(()=>{e.expandRowKeys&&i.setExpandRowKeysAdapter(e.expandRowKeys)});const y=()=>{r.store.commit("setHoverRow",null),r.hoverState&&(r.hoverState=null)},x=(I,B)=>{const{pixelX:z,pixelY:V}=B;Math.abs(z)>=Math.abs(V)&&(r.refs.bodyWrapper.scrollLeft+=B.pixelX/5)},b=O(()=>e.height||e.maxHeight||i.states.fixedColumns.value.length>0||i.states.rightFixedColumns.value.length>0),w=O(()=>({width:t.bodyWidth.value?`${t.bodyWidth.value}px`:""})),S=()=>{b.value&&t.updateElsHeight(),t.updateColumnsWidth(),requestAnimationFrame(A)};Lt(async()=>{await ft(),i.updateColumns(),M(),requestAnimationFrame(S);const I=r.vnode.el,B=r.refs.headerWrapper;e.flexible&&I&&I.parentElement&&(I.parentElement.style.minWidth="0"),l.value={width:d.value=I.offsetWidth,height:I.offsetHeight,headerHeight:e.showHeader&&B?B.offsetHeight:null},i.states.columns.value.forEach(z=>{z.filteredValue&&z.filteredValue.length&&r.store.commit("filterChange",{column:z,values:z.filteredValue,silent:!0})}),r.$ready=!0});const _=(I,B)=>{if(!I)return;const z=Array.from(I.classList).filter(V=>!V.startsWith("is-scrolling-"));z.push(t.scrollX.value?B:"is-scrolling-none"),I.className=z.join(" ")},E=I=>{const{tableWrapper:B}=r.refs;_(B,I)},C=I=>{const{tableWrapper:B}=r.refs;return!!(B&&B.classList.contains(I))},A=function(){if(!r.refs.scrollBarRef)return;if(!t.scrollX.value){const ae="is-scrolling-none";C(ae)||E(ae);return}const I=r.refs.scrollBarRef.wrapRef;if(!I)return;const{scrollLeft:B,offsetWidth:z,scrollWidth:V}=I,{headerWrapper:W,footerWrapper:G}=r.refs;W&&(W.scrollLeft=B),G&&(G.scrollLeft=B);const q=V-z-1;B>=q?E("is-scrolling-right"):E(B===0?"is-scrolling-left":"is-scrolling-middle")},M=()=>{r.refs.scrollBarRef&&(r.refs.scrollBarRef.wrapRef&&Oi(r.refs.scrollBarRef.wrapRef,"scroll",A,{passive:!0}),e.fit?gr(r.vnode.el,T):Oi(window,"resize",T),gr(r.refs.bodyWrapper,()=>{var I,B;T(),(B=(I=r.refs)==null?void 0:I.scrollBarRef)==null||B.update()}))},T=()=>{var I,B,z,V;const W=r.vnode.el;if(!r.$ready||!W)return;let G=!1;const{width:q,height:ae,headerHeight:J}=l.value,$=d.value=W.offsetWidth;q!==$&&(G=!0);const te=W.offsetHeight;(e.height||b.value)&&ae!==te&&(G=!0);const Q=e.tableLayout==="fixed"?r.refs.headerWrapper:(I=r.refs.tableHeaderRef)==null?void 0:I.$el;e.showHeader&&(Q==null?void 0:Q.offsetHeight)!==J&&(G=!0),h.value=((B=r.refs.tableWrapper)==null?void 0:B.scrollHeight)||0,p.value=(Q==null?void 0:Q.scrollHeight)||0,m.value=((z=r.refs.footerWrapper)==null?void 0:z.offsetHeight)||0,v.value=((V=r.refs.appendWrapper)==null?void 0:V.offsetHeight)||0,f.value=h.value-p.value-m.value-v.value,G&&(l.value={width:$,height:te,headerHeight:e.showHeader&&(Q==null?void 0:Q.offsetHeight)||0},S())},P=on(),D=O(()=>{const{bodyWidth:I,scrollY:B,gutterWidth:z}=t;return I.value?`${I.value-(B.value?z:0)}px`:""}),k=O(()=>e.maxHeight?"fixed":e.tableLayout),L=O(()=>{if(e.data&&e.data.length)return null;let I="100%";e.height&&f.value&&(I=`${f.value}px`);const B=d.value;return{width:B?`${B}px`:"",height:I}}),R=O(()=>e.height?{height:"100%"}:e.maxHeight?Number.isNaN(Number(e.maxHeight))?{maxHeight:`calc(${e.maxHeight} - ${p.value+m.value}px)`}:{maxHeight:`${e.maxHeight-p.value-m.value}px`}:{});return{isHidden:n,renderExpanded:a,setDragVisible:o,isGroup:c,handleMouseLeave:y,handleHeaderFooterMousewheel:x,tableSize:P,emptyBlockStyle:L,handleFixedMousewheel:(I,B)=>{const z=r.refs.bodyWrapper;if(Math.abs(B.spinY)>0){const V=z.scrollTop;B.pixelY<0&&V!==0&&I.preventDefault(),B.pixelY>0&&z.scrollHeight-z.clientHeight>V&&I.preventDefault(),z.scrollTop+=Math.ceil(B.pixelY/5)}else z.scrollLeft+=Math.ceil(B.pixelX/5)},resizeProxyVisible:s,bodyWidth:D,resizeState:l,doLayout:S,tableBodyStyles:w,tableLayout:k,scrollbarViewStyle:u,scrollbarStyle:R}}function kst(e){const t=j(),i=()=>{const n=e.vnode.el.querySelector(".hidden-columns"),a={childList:!0,subtree:!0},s=e.store.states.updateOrderFns;t.value=new MutationObserver(()=>{s.forEach(o=>o())}),t.value.observe(n,a)};Lt(()=>{i()}),zu(()=>{var r;(r=t.value)==null||r.disconnect()})}var Lst={data:{type:Array,default:()=>[]},size:wn,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children",checkStrictly:!1})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:Boolean,flexible:Boolean,showOverflowTooltip:[Boolean,Object],appendFilterPanelTo:String,scrollbarTabindex:{type:[Number,String],default:void 0}};function RJ(e){const t=e.tableLayout==="auto";let i=e.columns||[];t&&i.every(n=>n.width===void 0)&&(i=[]);const r=n=>{const a={key:`${e.tableLayout}_${n.id}`,style:{},name:void 0};return t?a.style={width:`${n.width}px`}:a.name=n.id,a};return dt("colgroup",{},i.map(n=>dt("col",r(n))))}RJ.props=["columns","tableLayout"];const Bst=()=>{const e=j(),t=(a,s)=>{const o=e.value;o&&o.scrollTo(a,s)},i=(a,s)=>{const o=e.value;o&&gt(s)&&["Top","Left"].includes(a)&&o[`setScroll${a}`](s)};return{scrollBarRef:e,scrollTo:t,setScrollTop:a=>i("Top",a),setScrollLeft:a=>i("Left",a)}};let Nst=1;const Fst=ce({name:"ElTable",directives:{Mousewheel:YYe},components:{TableHeader:bst,TableBody:Tst,TableFooter:Ist,ElScrollbar:Bc,hColgroup:RJ},props:Lst,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(e){const{t}=di(),i=Ve("table"),r=Ut();Yt(Nc,r);const n=lst(r,e);r.store=n;const a=new dst({store:r.store,table:r,fit:e.fit,showHeader:e.showHeader});r.layout=a;const s=O(()=>(n.states.data.value||[]).length===0),{setCurrentRow:o,getSelectionRows:l,toggleRowSelection:c,clearSelection:u,clearFilter:d,toggleAllSelection:h,toggleRowExpansion:f,clearSort:p,sort:m,updateKeyChildren:v}=Ost(n),{isHidden:y,renderExpanded:x,setDragVisible:b,isGroup:w,handleMouseLeave:S,handleHeaderFooterMousewheel:_,tableSize:E,emptyBlockStyle:C,handleFixedMousewheel:A,resizeProxyVisible:M,bodyWidth:T,resizeState:P,doLayout:D,tableBodyStyles:k,tableLayout:L,scrollbarViewStyle:R,scrollbarStyle:N}=Rst(e,a,n,r),{scrollBarRef:I,scrollTo:B,setScrollLeft:z,setScrollTop:V}=Bst(),W=gs(D,50),G=`${i.namespace.value}-table_${Nst++}`;r.tableId=G,r.state={isGroup:w,resizeState:P,doLayout:D,debouncedUpdateLayout:W};const q=O(()=>{var $;return($=e.sumText)!=null?$:t("el.table.sumText")}),ae=O(()=>{var $;return($=e.emptyText)!=null?$:t("el.table.emptyText")}),J=O(()=>OJ(n.states.originColumns.value)[0]);return kst(r),Bi(()=>{W.cancel()}),{ns:i,layout:a,store:n,columns:J,handleHeaderFooterMousewheel:_,handleMouseLeave:S,tableId:G,tableSize:E,isHidden:y,isEmpty:s,renderExpanded:x,resizeProxyVisible:M,resizeState:P,isGroup:w,bodyWidth:T,tableBodyStyles:k,emptyBlockStyle:C,debouncedUpdateLayout:W,handleFixedMousewheel:A,setCurrentRow:o,getSelectionRows:l,toggleRowSelection:c,clearSelection:u,clearFilter:d,toggleAllSelection:h,toggleRowExpansion:f,clearSort:p,doLayout:D,sort:m,updateKeyChildren:v,t,setDragVisible:b,context:r,computedSumText:q,computedEmptyText:ae,tableLayout:L,scrollbarViewStyle:R,scrollbarStyle:N,scrollBarRef:I,scrollTo:B,setScrollLeft:z,setScrollTop:V}}});function zst(e,t,i,r,n,a){const s=Ht("hColgroup"),o=Ht("table-header"),l=Ht("table-body"),c=Ht("table-footer"),u=Ht("el-scrollbar"),d=O_("mousewheel");return F(),K("div",{ref:"tableWrapper",class:U([{[e.ns.m("fit")]:e.fit,[e.ns.m("striped")]:e.stripe,[e.ns.m("border")]:e.border||e.isGroup,[e.ns.m("hidden")]:e.isHidden,[e.ns.m("group")]:e.isGroup,[e.ns.m("fluid-height")]:e.maxHeight,[e.ns.m("scrollable-x")]:e.layout.scrollX.value,[e.ns.m("scrollable-y")]:e.layout.scrollY.value,[e.ns.m("enable-row-hover")]:!e.store.states.isComplex.value,[e.ns.m("enable-row-transition")]:(e.store.states.data.value||[]).length!==0&&(e.store.states.data.value||[]).length<100,"has-footer":e.showSummary},e.ns.m(e.tableSize),e.className,e.ns.b(),e.ns.m(`layout-${e.tableLayout}`)]),style:mt(e.style),"data-prefix":e.ns.namespace.value,onMouseleave:e.handleMouseLeave},[ie("div",{class:U(e.ns.e("inner-wrapper"))},[ie("div",{ref:"hiddenColumns",class:"hidden-columns"},[Ee(e.$slots,"default")],512),e.showHeader&&e.tableLayout==="fixed"?Nt((F(),K("div",{key:0,ref:"headerWrapper",class:U(e.ns.e("header-wrapper"))},[ie("table",{ref:"tableHeader",class:U(e.ns.e("header")),style:mt(e.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[ne(s,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),ne(o,{ref:"tableHeaderRef",border:e.border,"default-sort":e.defaultSort,store:e.store,"append-filter-panel-to":e.appendFilterPanelTo,onSetDragVisible:e.setDragVisible},null,8,["border","default-sort","store","append-filter-panel-to","onSetDragVisible"])],6)],2)),[[d,e.handleHeaderFooterMousewheel]]):Ae("v-if",!0),ie("div",{ref:"bodyWrapper",class:U(e.ns.e("body-wrapper"))},[ne(u,{ref:"scrollBarRef","view-style":e.scrollbarViewStyle,"wrap-style":e.scrollbarStyle,always:e.scrollbarAlwaysOn,tabindex:e.scrollbarTabindex},{default:ve(()=>[ie("table",{ref:"tableBody",class:U(e.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:mt({width:e.bodyWidth,tableLayout:e.tableLayout})},[ne(s,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),e.showHeader&&e.tableLayout==="auto"?(F(),De(o,{key:0,ref:"tableHeaderRef",class:U(e.ns.e("body-header")),border:e.border,"default-sort":e.defaultSort,store:e.store,"append-filter-panel-to":e.appendFilterPanelTo,onSetDragVisible:e.setDragVisible},null,8,["class","border","default-sort","store","append-filter-panel-to","onSetDragVisible"])):Ae("v-if",!0),ne(l,{context:e.context,highlight:e.highlightCurrentRow,"row-class-name":e.rowClassName,"tooltip-effect":e.tooltipEffect,"tooltip-options":e.tooltipOptions,"row-style":e.rowStyle,store:e.store,stripe:e.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),e.showSummary&&e.tableLayout==="auto"?(F(),De(c,{key:1,class:U(e.ns.e("body-footer")),border:e.border,"default-sort":e.defaultSort,store:e.store,"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):Ae("v-if",!0)],6),e.isEmpty?(F(),K("div",{key:0,ref:"emptyBlock",style:mt(e.emptyBlockStyle),class:U(e.ns.e("empty-block"))},[ie("span",{class:U(e.ns.e("empty-text"))},[Ee(e.$slots,"empty",{},()=>[Xt(Ye(e.computedEmptyText),1)])],2)],6)):Ae("v-if",!0),e.$slots.append?(F(),K("div",{key:1,ref:"appendWrapper",class:U(e.ns.e("append-wrapper"))},[Ee(e.$slots,"append")],2)):Ae("v-if",!0)]),_:3},8,["view-style","wrap-style","always","tabindex"])],2),e.showSummary&&e.tableLayout==="fixed"?Nt((F(),K("div",{key:1,ref:"footerWrapper",class:U(e.ns.e("footer-wrapper"))},[ie("table",{class:U(e.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:mt(e.tableBodyStyles)},[ne(s,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),ne(c,{border:e.border,"default-sort":e.defaultSort,store:e.store,"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[_i,!e.isEmpty],[d,e.handleHeaderFooterMousewheel]]):Ae("v-if",!0),e.border||e.isGroup?(F(),K("div",{key:2,class:U(e.ns.e("border-left-patch"))},null,2)):Ae("v-if",!0)],2),Nt(ie("div",{ref:"resizeProxy",class:U(e.ns.e("column-resize-proxy"))},null,2),[[_i,e.resizeProxyVisible]])],46,["data-prefix","onMouseleave"])}var Vst=Ze(Fst,[["render",zst],["__file","table.vue"]]);const Ust={selection:"table-column--selection",expand:"table__expand-column"},Hst={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},jst=e=>Ust[e]||"",Wst={selection:{renderHeader({store:e,column:t}){function i(){return e.states.data.value&&e.states.data.value.length===0}return dt(jo,{disabled:i(),size:e.states.tableSize.value,indeterminate:e.states.selection.value.length>0&&!e.states.isAllSelected.value,"onUpdate:modelValue":e.toggleAllSelection,modelValue:e.states.isAllSelected.value,ariaLabel:t.label})},renderCell({row:e,column:t,store:i,$index:r}){return dt(jo,{disabled:t.selectable?!t.selectable.call(null,e,r):!1,size:i.states.tableSize.value,onChange:()=>{i.commit("rowSelectedChanged",e)},onClick:n=>n.stopPropagation(),modelValue:i.isSelected(e),ariaLabel:t.label})},sortable:!1,resizable:!1},index:{renderHeader({column:e}){return e.label||"#"},renderCell({column:e,$index:t}){let i=t+1;const r=e.index;return gt(r)?i=t+r:Wt(r)&&(i=r(t)),dt("div",{},[i])},sortable:!1},expand:{renderHeader({column:e}){return e.label||""},renderCell({row:e,store:t,expanded:i}){const{ns:r}=t,n=[r.e("expand-icon")];return i&&n.push(r.em("expand-icon","expanded")),dt("div",{class:n,onClick:function(s){s.stopPropagation(),t.toggleRowExpansion(e)}},{default:()=>[dt(ut,null,{default:()=>[dt(hs)]})]})},sortable:!1,resizable:!1}};function Gst({row:e,column:t,$index:i}){var r;const n=t.property,a=n&&p2(e,n).value;return t&&t.formatter?t.formatter(e,t,a,i):((r=a==null?void 0:a.toString)==null?void 0:r.call(a))||""}function $st({row:e,treeNode:t,store:i},r=!1){const{ns:n}=i;if(!t)return r?[dt("span",{class:n.e("placeholder")})]:null;const a=[],s=function(o){o.stopPropagation(),!t.loading&&i.loadOrToggle(e)};if(t.indent&&a.push(dt("span",{class:n.e("indent"),style:{"padding-left":`${t.indent}px`}})),Gi(t.expanded)&&!t.noLazyChildren){const o=[n.e("expand-icon"),t.expanded?n.em("expand-icon","expanded"):""];let l=hs;t.loading&&(l=_c),a.push(dt("div",{class:o,onClick:s},{default:()=>[dt(ut,{class:{[n.is("loading")]:t.loading}},{default:()=>[dt(l)]})]}))}else a.push(dt("span",{class:n.e("placeholder")}));return a}function Uz(e,t){return e.reduce((i,r)=>(i[r]=r,i),t)}function Zst(e,t){const i=Ut();return{registerComplexWatchers:()=>{const a=["fixed"],s={realWidth:"width",realMinWidth:"minWidth"},o=Uz(a,s);Object.keys(o).forEach(l=>{const c=s[l];Ma(t,c)&&Ne(()=>t[c],u=>{let d=u;c==="width"&&l==="realWidth"&&(d=R8(u)),c==="minWidth"&&l==="realMinWidth"&&(d=EJ(u)),i.columnConfig.value[c]=d,i.columnConfig.value[l]=d;const h=c==="fixed";e.value.store.scheduleLayout(h)})})},registerNormalWatchers:()=>{const a=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip"],s={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},o=Uz(a,s);Object.keys(o).forEach(l=>{const c=s[l];Ma(t,c)&&Ne(()=>t[c],u=>{i.columnConfig.value[l]=u})})}}}function qst(e,t,i){const r=Ut(),n=j(""),a=j(!1),s=j(),o=j(),l=Ve("table");Ca(()=>{s.value=e.align?`is-${e.align}`:null,s.value}),Ca(()=>{o.value=e.headerAlign?`is-${e.headerAlign}`:s.value,o.value});const c=O(()=>{let w=r.vnode.vParent||r.parent;for(;w&&!w.tableId&&!w.columnId;)w=w.vnode.vParent||w.parent;return w}),u=O(()=>{const{store:w}=r.parent;if(!w)return!1;const{treeData:S}=w.states,_=S.value;return _&&Object.keys(_).length>0}),d=j(R8(e.width)),h=j(EJ(e.minWidth)),f=w=>(d.value&&(w.width=d.value),h.value&&(w.minWidth=h.value),!d.value&&h.value&&(w.width=void 0),w.minWidth||(w.minWidth=80),w.realWidth=Number(w.width===void 0?w.minWidth:w.width),w),p=w=>{const S=w.type,_=Wst[S]||{};Object.keys(_).forEach(C=>{const A=_[C];C!=="className"&&A!==void 0&&(w[C]=A)});const E=jst(S);if(E){const C=`${g(l.namespace)}-${E}`;w.className=w.className?`${w.className} ${C}`:C}return w},m=w=>{ct(w)?w.forEach(_=>S(_)):S(w);function S(_){var E;((E=_==null?void 0:_.type)==null?void 0:E.name)==="ElTableColumn"&&(_.vParent=r)}};return{columnId:n,realAlign:s,isSubColumn:a,realHeaderAlign:o,columnOrTableParent:c,setColumnWidth:f,setColumnForcedProps:p,setColumnRenders:w=>{e.renderHeader||w.type!=="selection"&&(w.renderHeader=_=>(r.columnConfig.value.label,Ee(t,"header",_,()=>[w.label]))),t["filter-icon"]&&(w.renderFilterIcon=_=>Ee(t,"filter-icon",_));let S=w.renderCell;return w.type==="expand"?(w.renderCell=_=>dt("div",{class:"cell"},[S(_)]),i.value.renderExpanded=_=>t.default?t.default(_):t.default):(S=S||Gst,w.renderCell=_=>{let E=null;if(t.default){const D=t.default(_);E=D.some(k=>k.type!==Zr)?D:S(_)}else E=S(_);const{columns:C}=i.value.store.states,A=C.value.findIndex(D=>D.type==="default"),M=u.value&&_.cellIndex===A,T=$st(_,M),P={class:"cell",style:{}};return w.showOverflowTooltip&&(P.class=`${P.class} ${g(l.namespace)}-tooltip`,P.style={width:`${(_.column.realWidth||Number(_.column.width))-1}px`}),m(E),dt("div",P,[T,E])}),w},getPropsData:(...w)=>w.reduce((S,_)=>(ct(_)&&_.forEach(E=>{S[E]=e[E]}),S),{}),getColumnElIndex:(w,S)=>Array.prototype.indexOf.call(w,S),updateColumnOrder:()=>{i.value.store.commit("updateColumnOrder",r.columnConfig.value)}}}var Yst={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:e=>e.every(t=>["ascending","descending",null].includes(t))}};let Kst=1;var kJ=ce({name:"ElTableColumn",components:{ElCheckbox:jo},props:Yst,setup(e,{slots:t}){const i=Ut(),r=j({}),n=O(()=>{let b=i.parent;for(;b&&!b.tableId;)b=b.parent;return b}),{registerNormalWatchers:a,registerComplexWatchers:s}=Zst(n,e),{columnId:o,isSubColumn:l,realHeaderAlign:c,columnOrTableParent:u,setColumnWidth:d,setColumnForcedProps:h,setColumnRenders:f,getPropsData:p,getColumnElIndex:m,realAlign:v,updateColumnOrder:y}=qst(e,t,n),x=u.value;o.value=`${x.tableId||x.columnId}_column_${Kst++}`,I_(()=>{l.value=n.value!==x;const b=e.type||"default",w=e.sortable===""?!0:e.sortable,S=Qi(e.showOverflowTooltip)?x.props.showOverflowTooltip:e.showOverflowTooltip,_={...Hst[b],id:o.value,type:b,property:e.prop||e.property,align:v,headerAlign:c,showOverflowTooltip:S,filterable:e.filters||e.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:w,index:e.index,rawColumnKey:i.vnode.key};let T=p(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);T=Xat(_,T),T=Jat(f,d,h)(T),r.value=T,a(),s()}),Lt(()=>{var b;const w=u.value,S=l.value?w.vnode.el.children:(b=w.refs.hiddenColumns)==null?void 0:b.children,_=()=>m(S||[],i.vnode.el);r.value.getColumnIndex=_,_()>-1&&n.value.store.commit("insertColumn",r.value,l.value?w.columnConfig.value:null,y)}),Bi(()=>{const b=r.value.getColumnIndex;(b?b():-1)>-1&&n.value.store.commit("removeColumn",r.value,l.value?x.columnConfig.value:null,y)}),i.columnId=o.value,i.columnConfig=r},render(){var e,t,i;try{const r=(t=(e=this.$slots).default)==null?void 0:t.call(e,{row:{},column:{},$index:-1}),n=[];if(ct(r))for(const s of r)((i=s.type)==null?void 0:i.name)==="ElTableColumn"||s.shapeFlag&2?n.push(s):s.type===ht&&ct(s.children)&&s.children.forEach(o=>{(o==null?void 0:o.patchFlag)!==1024&&!Et(o==null?void 0:o.children)&&n.push(o)});return dt("div",n)}catch{return dt("div",[])}}});const Xst=Rt(Vst,{TableColumn:kJ}),Qst=Tr(kJ);var G1=(e=>(e.ASC="asc",e.DESC="desc",e))(G1||{}),$1=(e=>(e.CENTER="center",e.RIGHT="right",e))($1||{}),LJ=(e=>(e.LEFT="left",e.RIGHT="right",e))(LJ||{});const o5={asc:"desc",desc:"asc"},Z1=Symbol("placeholder"),Jst=(e,t,i)=>{var r;const n={flexGrow:0,flexShrink:0,...i?{}:{flexGrow:e.flexGrow||0,flexShrink:e.flexShrink||1}};i||(n.flexShrink=1);const a={...(r=e.style)!=null?r:{},...n,flexBasis:"auto",width:e.width};return t||(e.maxWidth&&(a.maxWidth=e.maxWidth),e.minWidth&&(a.minWidth=e.minWidth)),a};function eot(e,t,i){const r=O(()=>g(t).map((v,y)=>{var x,b;return{...v,key:(b=(x=v.key)!=null?x:v.dataKey)!=null?b:y}})),n=O(()=>g(r).filter(v=>!v.hidden)),a=O(()=>g(n).filter(v=>v.fixed==="left"||v.fixed===!0)),s=O(()=>g(n).filter(v=>v.fixed==="right")),o=O(()=>g(n).filter(v=>!v.fixed)),l=O(()=>{const v=[];return g(a).forEach(y=>{v.push({...y,placeholderSign:Z1})}),g(o).forEach(y=>{v.push(y)}),g(s).forEach(y=>{v.push({...y,placeholderSign:Z1})}),v}),c=O(()=>g(a).length||g(s).length),u=O(()=>g(r).reduce((v,y)=>(v[y.key]=Jst(y,g(i),e.fixed),v),{})),d=O(()=>g(n).reduce((v,y)=>v+y.width,0)),h=v=>g(r).find(y=>y.key===v),f=v=>g(u)[v],p=(v,y)=>{v.width=y};function m(v){var y;const{key:x}=v.currentTarget.dataset;if(!x)return;const{sortState:b,sortBy:w}=e;let S=G1.ASC;Ri(b)?S=o5[b[x]]:S=o5[w.order],(y=e.onColumnSort)==null||y.call(e,{column:h(x),key:x,order:S})}return{columns:r,columnsStyles:u,columnsTotalWidth:d,fixedColumnsOnLeft:a,fixedColumnsOnRight:s,hasFixedColumns:c,mainColumns:l,normalColumns:o,visibleColumns:n,getColumn:h,getColumnStyle:f,updateColumnWidth:p,onColumnSorted:m}}const tot=(e,{mainTableRef:t,leftTableRef:i,rightTableRef:r,onMaybeEndReached:n})=>{const a=j({scrollLeft:0,scrollTop:0});function s(f){var p,m,v;const{scrollTop:y}=f;(p=t.value)==null||p.scrollTo(f),(m=i.value)==null||m.scrollToTop(y),(v=r.value)==null||v.scrollToTop(y)}function o(f){a.value=f,s(f)}function l(f){a.value.scrollTop=f,s(g(a))}function c(f){var p,m;a.value.scrollLeft=f,(m=(p=t.value)==null?void 0:p.scrollTo)==null||m.call(p,g(a))}function u(f){var p;o(f),(p=e.onScroll)==null||p.call(e,f)}function d({scrollTop:f}){const{scrollTop:p}=g(a);f!==p&&l(f)}function h(f,p="auto"){var m;(m=t.value)==null||m.scrollToRow(f,p)}return Ne(()=>g(a).scrollTop,(f,p)=>{f>p&&n()}),{scrollPos:a,scrollTo:o,scrollToLeft:c,scrollToTop:l,scrollToRow:h,onScroll:u,onVerticalScroll:d}},iot=(e,{mainTableRef:t,leftTableRef:i,rightTableRef:r,tableInstance:n,ns:a,isScrolling:s})=>{const o=Ut(),{emit:l}=o,c=Wi(!1),u=j(e.defaultExpandedRowKeys||[]),d=j(-1),h=Wi(null),f=j({}),p=j({}),m=Wi({}),v=Wi({}),y=Wi({}),x=O(()=>gt(e.estimatedRowHeight));function b(M){var T;(T=e.onRowsRendered)==null||T.call(e,M),M.rowCacheEnd>g(d)&&(d.value=M.rowCacheEnd)}function w({hovered:M,rowKey:T}){if(s.value)return;n.vnode.el.querySelectorAll(`[rowkey="${String(T)}"]`).forEach(k=>{M?k.classList.add(a.is("hovered")):k.classList.remove(a.is("hovered"))})}function S({expanded:M,rowData:T,rowIndex:P,rowKey:D}){var k,L;const R=[...g(u)],N=R.indexOf(D);M?N===-1&&R.push(D):N>-1&&R.splice(N,1),u.value=R,l("update:expandedRowKeys",R),(k=e.onRowExpand)==null||k.call(e,{expanded:M,rowData:T,rowIndex:P,rowKey:D}),(L=e.onExpandedRowsChange)==null||L.call(e,R)}const _=gs(()=>{var M,T,P,D;c.value=!0,f.value={...g(f),...g(p)},E(g(h),!1),p.value={},h.value=null,(M=t.value)==null||M.forceUpdate(),(T=i.value)==null||T.forceUpdate(),(P=r.value)==null||P.forceUpdate(),(D=o.proxy)==null||D.$forceUpdate(),c.value=!1},0);function E(M,T=!1){g(x)&&[t,i,r].forEach(P=>{const D=g(P);D&&D.resetAfterRowIndex(M,T)})}function C(M,T,P){const D=g(h);(D===null||D>P)&&(h.value=P),p.value[M]=T}function A({rowKey:M,height:T,rowIndex:P},D){D?D===LJ.RIGHT?y.value[M]=T:m.value[M]=T:v.value[M]=T;const k=Math.max(...[m,y,v].map(L=>L.value[M]||0));g(f)[M]!==k&&(C(M,k,P),_())}return{expandedRowKeys:u,lastRenderedRowIndex:d,isDynamic:x,isResetting:c,rowHeights:f,resetAfterIndex:E,onRowExpanded:S,onRowHovered:w,onRowsRendered:b,onRowHeightChange:A}},rot=(e,{expandedRowKeys:t,lastRenderedRowIndex:i,resetAfterIndex:r})=>{const n=j({}),a=O(()=>{const o={},{data:l,rowKey:c}=e,u=g(t);if(!u||!u.length)return l;const d=[],h=new Set;u.forEach(p=>h.add(p));let f=l.slice();for(f.forEach(p=>o[p[c]]=0);f.length>0;){const p=f.shift();d.push(p),h.has(p[c])&&ct(p.children)&&p.children.length>0&&(f=[...p.children,...f],p.children.forEach(m=>o[m[c]]=o[p[c]]+1))}return n.value=o,d}),s=O(()=>{const{data:o,expandColumnKey:l}=e;return l?g(a):o});return Ne(s,(o,l)=>{o!==l&&(i.value=-1,r(0,!0))}),{data:s,depthMap:n}},not=(e,t)=>e+t,S2=e=>ct(e)?e.reduce(not,0):e,ip=(e,t,i={})=>Wt(e)?e(t):e??i,Wd=e=>(["width","maxWidth","minWidth","height"].forEach(t=>{e[t]=zr(e[t])}),e),BJ=e=>rr(e)?t=>dt(e,t):e,aot=(e,{columnsTotalWidth:t,data:i,fixedColumnsOnLeft:r,fixedColumnsOnRight:n})=>{const a=O(()=>{const{fixed:b,width:w,vScrollbarSize:S}=e,_=w-S;return b?Math.max(Math.round(g(t)),_):_}),s=O(()=>g(a)+e.vScrollbarSize),o=O(()=>{const{height:b=0,maxHeight:w=0,footerHeight:S,hScrollbarSize:_}=e;if(w>0){const E=g(p),C=g(l),M=g(f)+E+C+_;return Math.min(M,w-S)}return b-S}),l=O(()=>{const{rowHeight:b,estimatedRowHeight:w}=e,S=g(i);return gt(w)?S.length*w:S.length*b}),c=O(()=>{const{maxHeight:b}=e,w=g(o);if(gt(b)&&b>0)return w;const S=g(l)+g(f)+g(p);return Math.min(w,S)}),u=b=>b.width,d=O(()=>S2(g(r).map(u))),h=O(()=>S2(g(n).map(u))),f=O(()=>S2(e.headerHeight)),p=O(()=>{var b;return(((b=e.fixedData)==null?void 0:b.length)||0)*e.rowHeight}),m=O(()=>g(o)-g(f)-g(p)),v=O(()=>{const{style:b={},height:w,width:S}=e;return Wd({...b,height:w,width:S})}),y=O(()=>Wd({height:e.footerHeight})),x=O(()=>({top:zr(g(f)),bottom:zr(e.footerHeight),width:zr(e.width)}));return{bodyWidth:a,fixedTableHeight:c,mainTableHeight:o,leftTableWidth:d,rightTableWidth:h,headerWidth:s,rowsHeight:l,windowHeight:m,footerHeight:y,emptyStyle:x,rootStyle:v,headerHeight:f}},sot=e=>{const t=j(),i=j(0),r=j(0);let n;return Lt(()=>{n=gr(t,([a])=>{const{width:s,height:o}=a.contentRect,{paddingLeft:l,paddingRight:c,paddingTop:u,paddingBottom:d}=getComputedStyle(a.target),h=Number.parseInt(l)||0,f=Number.parseInt(c)||0,p=Number.parseInt(u)||0,m=Number.parseInt(d)||0;i.value=s-h-f,r.value=o-p-m}).stop}),Bi(()=>{n==null||n()}),Ne([i,r],([a,s])=>{var o;(o=e.onResize)==null||o.call(e,{width:a,height:s})}),{sizer:t,width:i,height:r}};function oot(e){const t=j(),i=j(),r=j(),{columns:n,columnsStyles:a,columnsTotalWidth:s,fixedColumnsOnLeft:o,fixedColumnsOnRight:l,hasFixedColumns:c,mainColumns:u,onColumnSorted:d}=eot(e,Di(e,"columns"),Di(e,"fixed")),{scrollTo:h,scrollToLeft:f,scrollToTop:p,scrollToRow:m,onScroll:v,onVerticalScroll:y,scrollPos:x}=tot(e,{mainTableRef:t,leftTableRef:i,rightTableRef:r,onMaybeEndReached:Z}),b=Ve("table-v2"),w=Ut(),S=Wi(!1),{expandedRowKeys:_,lastRenderedRowIndex:E,isDynamic:C,isResetting:A,rowHeights:M,resetAfterIndex:T,onRowExpanded:P,onRowHeightChange:D,onRowHovered:k,onRowsRendered:L}=iot(e,{mainTableRef:t,leftTableRef:i,rightTableRef:r,tableInstance:w,ns:b,isScrolling:S}),{data:R,depthMap:N}=rot(e,{expandedRowKeys:_,lastRenderedRowIndex:E,resetAfterIndex:T}),{bodyWidth:I,fixedTableHeight:B,mainTableHeight:z,leftTableWidth:V,rightTableWidth:W,headerWidth:G,rowsHeight:q,windowHeight:ae,footerHeight:J,emptyStyle:$,rootStyle:te,headerHeight:Q}=aot(e,{columnsTotalWidth:s,data:R,fixedColumnsOnLeft:o,fixedColumnsOnRight:l}),pe=j(),me=O(()=>{const oe=g(R).length===0;return ct(e.fixedData)?e.fixedData.length===0&&oe:oe});function le(oe){const{estimatedRowHeight:ge,rowHeight:Ie,rowKey:we}=e;return ge?g(M)[g(R)[oe][we]]||ge:Ie}function Z(){const{onEndReached:oe}=e;if(!oe)return;const{scrollTop:ge}=g(x),Ie=g(q),we=g(ae),xe=Ie-(ge+we)+e.hScrollbarSize;g(E)>=0&&Ie===ge+g(z)-g(Q)&&oe(xe)}return Ne(()=>e.expandedRowKeys,oe=>_.value=oe,{deep:!0}),{columns:n,containerRef:pe,mainTableRef:t,leftTableRef:i,rightTableRef:r,isDynamic:C,isResetting:A,isScrolling:S,hasFixedColumns:c,columnsStyles:a,columnsTotalWidth:s,data:R,expandedRowKeys:_,depthMap:N,fixedColumnsOnLeft:o,fixedColumnsOnRight:l,mainColumns:u,bodyWidth:I,emptyStyle:$,rootStyle:te,headerWidth:G,footerHeight:J,mainTableHeight:z,fixedTableHeight:B,leftTableWidth:V,rightTableWidth:W,showEmpty:me,getRowHeight:le,onColumnSorted:d,onRowHovered:k,onRowExpanded:P,onRowsRendered:L,onRowHeightChange:D,scrollTo:h,scrollToLeft:f,scrollToTop:p,scrollToRow:m,onScroll:v,onVerticalScroll:y}}const B8=Symbol("tableV2"),NJ=String,By={type:be(Array),required:!0},N8={type:be(Array)},FJ={...N8,required:!0},lot=String,Hz={type:be(Array),default:()=>Er([])},uf={type:Number,required:!0},zJ={type:be([String,Number,Symbol]),default:"id"},jz={type:be(Object)},Mf=je({class:String,columns:By,columnsStyles:{type:be(Object),required:!0},depth:Number,expandColumnKey:lot,estimatedRowHeight:{...zf.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:be(Function)},onRowHover:{type:be(Function)},onRowHeightChange:{type:be(Function)},rowData:{type:be(Object),required:!0},rowEventHandlers:{type:be(Object)},rowIndex:{type:Number,required:!0},rowKey:zJ,style:{type:be(Object)}}),dE={type:Number,required:!0},F8=je({class:String,columns:By,fixedHeaderData:{type:be(Array)},headerData:{type:be(Array),required:!0},headerHeight:{type:be([Number,Array]),default:50},rowWidth:dE,rowHeight:{type:Number,default:50},height:dE,width:dE}),C2=je({columns:By,data:FJ,fixedData:N8,estimatedRowHeight:Mf.estimatedRowHeight,width:uf,height:uf,headerWidth:uf,headerHeight:F8.headerHeight,bodyWidth:uf,rowHeight:uf,cache:sJ.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:zf.scrollbarAlwaysOn,scrollbarStartGap:zf.scrollbarStartGap,scrollbarEndGap:zf.scrollbarEndGap,class:NJ,style:jz,containerStyle:jz,getRowHeight:{type:be(Function),required:!0},rowKey:Mf.rowKey,onRowsRendered:{type:be(Function)},onScroll:{type:be(Function)}}),cot=je({cache:C2.cache,estimatedRowHeight:Mf.estimatedRowHeight,rowKey:zJ,headerClass:{type:be([String,Function])},headerProps:{type:be([Object,Function])},headerCellProps:{type:be([Object,Function])},headerHeight:F8.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:be([String,Function])},rowProps:{type:be([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:be([Object,Function])},columns:By,data:FJ,dataGetter:{type:be(Function)},fixedData:N8,expandColumnKey:Mf.expandColumnKey,expandedRowKeys:Hz,defaultExpandedRowKeys:Hz,class:NJ,fixed:Boolean,style:{type:be(Object)},width:uf,height:uf,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:zf.hScrollbarSize,vScrollbarSize:zf.vScrollbarSize,scrollbarAlwaysOn:cJ.alwaysOn,sortBy:{type:be(Object),default:()=>({})},sortState:{type:be(Object),default:void 0},onColumnSort:{type:be(Function)},onExpandedRowsChange:{type:be(Function)},onEndReached:{type:be(Function)},onRowExpand:Mf.onRowExpand,onScroll:C2.onScroll,onRowsRendered:C2.onRowsRendered,rowEventHandlers:Mf.rowEventHandlers}),z8=(e,{slots:t})=>{var i;const{cellData:r,style:n}=e,a=((i=r==null?void 0:r.toString)==null?void 0:i.call(r))||"",s=Ee(t,"default",e,()=>[a]);return ne("div",{class:e.class,title:a,style:n},[s])};z8.displayName="ElTableV2Cell";z8.inheritAttrs=!1;var uot=z8;const V8=(e,{slots:t})=>Ee(t,"default",e,()=>{var i,r;return[ne("div",{class:e.class,title:(i=e.column)==null?void 0:i.title},[(r=e.column)==null?void 0:r.title])]});V8.displayName="ElTableV2HeaderCell";V8.inheritAttrs=!1;var dot=V8;const hot=je({class:String,columns:By,columnsStyles:{type:be(Object),required:!0},headerIndex:Number,style:{type:be(Object)}}),fot=ce({name:"ElTableV2HeaderRow",props:hot,setup(e,{slots:t}){return()=>{const{columns:i,columnsStyles:r,headerIndex:n,style:a}=e;let s=i.map((o,l)=>t.cell({columns:i,column:o,columnIndex:l,headerIndex:n,style:r[o.key]}));return t.header&&(s=t.header({cells:s.map(o=>ct(o)&&o.length===1?o[0]:o),columns:i,headerIndex:n})),ne("div",{class:e.class,style:a,role:"row"},[s])}}});var pot=fot;const mot="ElTableV2Header",vot=ce({name:mot,props:F8,setup(e,{slots:t,expose:i}){const r=Ve("table-v2"),n=rt("tableV2GridScrollLeft"),a=j(),s=O(()=>Wd({width:e.width,height:e.height})),o=O(()=>Wd({width:e.rowWidth,height:e.height})),l=O(()=>wa(g(e.headerHeight))),c=h=>{const f=g(a);ft(()=>{f!=null&&f.scroll&&f.scroll({left:h})})},u=()=>{const h=r.e("fixed-header-row"),{columns:f,fixedHeaderData:p,rowHeight:m}=e;return p==null?void 0:p.map((v,y)=>{var x;const b=Wd({height:m,width:"100%"});return(x=t.fixed)==null?void 0:x.call(t,{class:h,columns:f,rowData:v,rowIndex:-(y+1),style:b})})},d=()=>{const h=r.e("dynamic-header-row"),{columns:f}=e;return g(l).map((p,m)=>{var v;const y=Wd({width:"100%",height:p});return(v=t.dynamic)==null?void 0:v.call(t,{class:h,columns:f,headerIndex:m,style:y})})};return Tl(()=>{n!=null&&n.value&&c(n.value)}),i({scrollToLeft:c}),()=>{if(!(e.height<=0))return ne("div",{ref:a,class:e.class,style:g(s),role:"rowgroup"},[ne("div",{style:g(o),class:r.e("header")},[d(),u()])])}}});var got=vot;const yot=e=>{const{isScrolling:t}=rt(B8),i=j(!1),r=j(),n=O(()=>gt(e.estimatedRowHeight)&&e.rowIndex>=0),a=(l=!1)=>{const c=g(r);if(!c)return;const{columns:u,onRowHeightChange:d,rowKey:h,rowIndex:f,style:p}=e,{height:m}=c.getBoundingClientRect();i.value=!0,ft(()=>{if(l||m!==Number.parseInt(p.height)){const v=u[0],y=(v==null?void 0:v.placeholderSign)===Z1;d==null||d({rowKey:h,height:m,rowIndex:f},v&&!y&&v.fixed)}})},s=O(()=>{const{rowData:l,rowIndex:c,rowKey:u,onRowHover:d}=e,h=e.rowEventHandlers||{},f={};return Object.entries(h).forEach(([p,m])=>{Wt(m)&&(f[p]=v=>{m({event:v,rowData:l,rowIndex:c,rowKey:u})})}),d&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:p,hovered:m})=>{const v=f[p];f[p]=y=>{d({event:y,hovered:m,rowData:l,rowIndex:c,rowKey:u}),v==null||v(y)}}),f}),o=l=>{const{onRowExpand:c,rowData:u,rowIndex:d,rowKey:h}=e;c==null||c({expanded:l,rowData:u,rowIndex:d,rowKey:h})};return Lt(()=>{g(n)&&a(!0)}),{isScrolling:t,measurable:n,measured:i,rowRef:r,eventHandlers:s,onExpand:o}},bot="ElTableV2TableRow",wot=ce({name:bot,props:Mf,setup(e,{expose:t,slots:i,attrs:r}){const{eventHandlers:n,isScrolling:a,measurable:s,measured:o,rowRef:l,onExpand:c}=yot(e);return t({onExpand:c}),()=>{const{columns:u,columnsStyles:d,expandColumnKey:h,depth:f,rowData:p,rowIndex:m,style:v}=e;let y=u.map((x,b)=>{const w=ct(p.children)&&p.children.length>0&&x.key===h;return i.cell({column:x,columns:u,columnIndex:b,depth:f,style:d[x.key],rowData:p,rowIndex:m,isScrolling:g(a),expandIconProps:w?{rowData:p,rowIndex:m,onExpand:c}:void 0})});if(i.row&&(y=i.row({cells:y.map(x=>ct(x)&&x.length===1?x[0]:x),style:v,columns:u,depth:f,rowData:p,rowIndex:m,isScrolling:g(a)})),g(s)){const{height:x,...b}=v||{},w=g(o);return ne("div",$t({ref:l,class:e.class,style:w?v:b,role:"row"},r,g(n)),[y])}return ne("div",$t(r,{ref:l,class:e.class,style:v,role:"row"},g(n)),[y])}}});var xot=wot;const _ot=e=>{const{sortOrder:t}=e;return ne(ut,{size:14,class:e.class},{default:()=>[t===G1.ASC?ne(Cje,null,null):ne(_je,null,null)]})};var Sot=_ot;const Cot=e=>{const{expanded:t,expandable:i,onExpand:r,style:n,size:a}=e,s={onClick:i?()=>r(!t):void 0,class:e.class};return ne(ut,$t(s,{size:a,style:n}),{default:()=>[ne(hs,null,null)]})};var Eot=Cot;const Aot="ElTableV2Grid",Mot=e=>{const t=j(),i=j(),r=j(0),n=O(()=>{const{data:v,rowHeight:y,estimatedRowHeight:x}=e;if(!x)return v.length*y}),a=O(()=>{const{fixedData:v,rowHeight:y}=e;return((v==null?void 0:v.length)||0)*y}),s=O(()=>S2(e.headerHeight)),o=O(()=>{const{height:v}=e;return Math.max(0,v-g(s)-g(a))}),l=O(()=>g(s)+g(a)>0),c=({data:v,rowIndex:y})=>v[y][e.rowKey];function u({rowCacheStart:v,rowCacheEnd:y,rowVisibleStart:x,rowVisibleEnd:b}){var w;(w=e.onRowsRendered)==null||w.call(e,{rowCacheStart:v,rowCacheEnd:y,rowVisibleStart:x,rowVisibleEnd:b})}function d(v,y){var x;(x=i.value)==null||x.resetAfterRowIndex(v,y)}function h(v,y){const x=g(t),b=g(i);Ri(v)?(x==null||x.scrollToLeft(v.scrollLeft),r.value=v.scrollLeft,b==null||b.scrollTo(v)):(x==null||x.scrollToLeft(v),r.value=v,b==null||b.scrollTo({scrollLeft:v,scrollTop:y}))}function f(v){var y;(y=g(i))==null||y.scrollTo({scrollTop:v})}function p(v,y){var x;(x=g(i))==null||x.scrollToItem(v,1,y)}function m(){var v,y;(v=g(i))==null||v.$forceUpdate(),(y=g(t))==null||y.$forceUpdate()}return{bodyRef:i,forceUpdate:m,fixedRowHeight:a,gridHeight:o,hasHeader:l,headerHeight:s,headerRef:t,totalHeight:n,itemKey:c,onItemRendered:u,resetAfterRowIndex:d,scrollTo:h,scrollToTop:f,scrollToRow:p,scrollLeft:r}},U8=ce({name:Aot,props:C2,setup(e,{slots:t,expose:i}){const{ns:r}=rt(B8),{bodyRef:n,fixedRowHeight:a,gridHeight:s,hasHeader:o,headerRef:l,headerHeight:c,totalHeight:u,forceUpdate:d,itemKey:h,onItemRendered:f,resetAfterRowIndex:p,scrollTo:m,scrollToTop:v,scrollToRow:y,scrollLeft:x}=Mot(e);Yt("tableV2GridScrollLeft",x),i({forceUpdate:d,totalHeight:u,scrollTo:m,scrollToTop:v,scrollToRow:y,resetAfterRowIndex:p});const b=()=>e.bodyWidth;return()=>{const{cache:w,columns:S,data:_,fixedData:E,useIsScrolling:C,scrollbarAlwaysOn:A,scrollbarEndGap:M,scrollbarStartGap:T,style:P,rowHeight:D,bodyWidth:k,estimatedRowHeight:L,headerWidth:R,height:N,width:I,getRowHeight:B,onScroll:z}=e,V=gt(L),W=V?xnt:vnt,G=g(c);return ne("div",{role:"table",class:[r.e("table"),e.class],style:P},[ne(W,{ref:n,data:_,useIsScrolling:C,itemKey:h,columnCache:0,columnWidth:V?b:k,totalColumn:1,totalRow:_.length,rowCache:w,rowHeight:V?B:D,width:I,height:g(s),class:r.e("body"),role:"rowgroup",scrollbarStartGap:T,scrollbarEndGap:M,scrollbarAlwaysOn:A,onScroll:z,onItemRendered:f,perfMode:!1},{default:q=>{var ae;const J=_[q.rowIndex];return(ae=t.row)==null?void 0:ae.call(t,{...q,columns:S,rowData:J})}}),g(o)&&ne(got,{ref:l,class:r.e("header-wrapper"),columns:S,headerData:_,headerHeight:e.headerHeight,fixedHeaderData:E,rowWidth:R,rowHeight:D,width:I,height:Math.min(G+g(a),N)},{dynamic:t.header,fixed:t.row})])}}});function Tot(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!rr(e)}const Pot=(e,{slots:t})=>{const{mainTableRef:i,...r}=e;return ne(U8,$t({ref:i},r),Tot(t)?t:{default:()=>[t]})};function Dot(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!rr(e)}const Iot=(e,{slots:t})=>{if(!e.columns.length)return;const{leftTableRef:i,...r}=e;return ne(U8,$t({ref:i},r),Dot(t)?t:{default:()=>[t]})};function Oot(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!rr(e)}const Rot=(e,{slots:t})=>{if(!e.columns.length)return;const{rightTableRef:i,...r}=e;return ne(U8,$t({ref:i},r),Oot(t)?t:{default:()=>[t]})};function kot(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!rr(e)}const Lot=(e,{slots:t})=>{const{columns:i,columnsStyles:r,depthMap:n,expandColumnKey:a,expandedRowKeys:s,estimatedRowHeight:o,hasFixedColumns:l,rowData:c,rowIndex:u,style:d,isScrolling:h,rowProps:f,rowClass:p,rowKey:m,rowEventHandlers:v,ns:y,onRowHovered:x,onRowExpanded:b}=e,w=ip(p,{columns:i,rowData:c,rowIndex:u},""),S=ip(f,{columns:i,rowData:c,rowIndex:u}),_=c[m],E=n[_]||0,C=!!a,A=u<0,M=[y.e("row"),w,{[y.e(`row-depth-${E}`)]:C&&u>=0,[y.is("expanded")]:C&&s.includes(_),[y.is("fixed")]:!E&&A,[y.is("customized")]:!!t.row}],T=l?x:void 0,P={...S,columns:i,columnsStyles:r,class:M,depth:E,expandColumnKey:a,estimatedRowHeight:A?void 0:o,isScrolling:h,rowIndex:u,rowData:c,rowKey:_,rowEventHandlers:v,style:d};return ne(xot,$t(P,{onRowExpand:b,onMouseenter:L=>{T==null||T({hovered:!0,rowKey:_,event:L,rowData:c,rowIndex:u})},onMouseleave:L=>{T==null||T({hovered:!1,rowKey:_,event:L,rowData:c,rowIndex:u})},rowkey:_}),kot(t)?t:{default:()=>[t]})},l5=({columns:e,column:t,columnIndex:i,depth:r,expandIconProps:n,isScrolling:a,rowData:s,rowIndex:o,style:l,expandedRowKeys:c,ns:u,cellProps:d,expandColumnKey:h,indentSize:f,iconSize:p,rowKey:m},{slots:v})=>{const y=Wd(l);if(t.placeholderSign===Z1)return ne("div",{class:u.em("row-cell","placeholder"),style:y},null);const{cellRenderer:x,dataKey:b,dataGetter:w}=t,S=Wt(w)?w({columns:e,column:t,columnIndex:i,rowData:s,rowIndex:o}):Nr(s,b??""),_=ip(d,{cellData:S,columns:e,column:t,columnIndex:i,rowIndex:o,rowData:s}),E={class:u.e("cell-text"),columns:e,column:t,columnIndex:i,cellData:S,isScrolling:a,rowData:s,rowIndex:o},C=BJ(x),A=C?C(E):Ee(v,"default",E,()=>[ne(uot,E,null)]),M=[u.e("row-cell"),t.class,t.align===$1.CENTER&&u.is("align-center"),t.align===$1.RIGHT&&u.is("align-right")],T=o>=0&&h&&t.key===h,P=o>=0&&c.includes(s[m]);let D;const k=`margin-inline-start: ${r*f}px;`;return T&&(Ri(n)?D=ne(Eot,$t(n,{class:[u.e("expand-icon"),u.is("expanded",P)],size:p,expanded:P,style:k,expandable:!0}),null):D=ne("div",{style:[k,`width: ${p}px; height: ${p}px;`].join(" ")},null)),ne("div",$t({class:M,style:y},_,{role:"cell"}),[D,A])};l5.inheritAttrs=!1;function Bot(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!rr(e)}const Not=({columns:e,columnsStyles:t,headerIndex:i,style:r,headerClass:n,headerProps:a,ns:s},{slots:o})=>{const l={columns:e,headerIndex:i},c=[s.e("header-row"),ip(n,l,""),{[s.is("customized")]:!!o.header}],u={...ip(a,l),columnsStyles:t,class:c,columns:e,headerIndex:i,style:r};return ne(pot,u,Bot(o)?o:{default:()=>[o]})},Wz=(e,{slots:t})=>{const{column:i,ns:r,style:n,onColumnSorted:a}=e,s=Wd(n);if(i.placeholderSign===Z1)return ne("div",{class:r.em("header-row-cell","placeholder"),style:s},null);const{headerCellRenderer:o,headerClass:l,sortable:c}=i,u={...e,class:r.e("header-cell-text")},d=BJ(o),h=d?d(u):Ee(t,"default",u,()=>[ne(dot,u,null)]),{sortBy:f,sortState:p,headerCellProps:m}=e;let v,y;if(p){const w=p[i.key];v=!!o5[w],y=v?w:G1.ASC}else v=i.key===f.key,y=v?f.order:G1.ASC;const x=[r.e("header-cell"),ip(l,e,""),i.align===$1.CENTER&&r.is("align-center"),i.align===$1.RIGHT&&r.is("align-right"),c&&r.is("sortable")],b={...ip(m,e),onClick:i.sortable?a:void 0,class:x,style:s,"data-key":i.key};return ne("div",$t(b,{role:"columnheader"}),[h,c&&ne(Sot,{class:[r.e("sort-icon"),v&&r.is("sorting")],sortOrder:y},null)])},VJ=(e,{slots:t})=>{var i;return ne("div",{class:e.class,style:e.style},[(i=t.default)==null?void 0:i.call(t)])};VJ.displayName="ElTableV2Footer";const UJ=(e,{slots:t})=>{const i=Ee(t,"default",{},()=>[ne(GQ,null,null)]);return ne("div",{class:e.class,style:e.style},[i])};UJ.displayName="ElTableV2Empty";const HJ=(e,{slots:t})=>{var i;return ne("div",{class:e.class,style:e.style},[(i=t.default)==null?void 0:i.call(t)])};HJ.displayName="ElTableV2Overlay";function tg(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!rr(e)}const Fot="ElTableV2",zot=ce({name:Fot,props:cot,setup(e,{slots:t,expose:i}){const r=Ve("table-v2"),{columnsStyles:n,fixedColumnsOnLeft:a,fixedColumnsOnRight:s,mainColumns:o,mainTableHeight:l,fixedTableHeight:c,leftTableWidth:u,rightTableWidth:d,data:h,depthMap:f,expandedRowKeys:p,hasFixedColumns:m,mainTableRef:v,leftTableRef:y,rightTableRef:x,isDynamic:b,isResetting:w,isScrolling:S,bodyWidth:_,emptyStyle:E,rootStyle:C,headerWidth:A,footerHeight:M,showEmpty:T,scrollTo:P,scrollToLeft:D,scrollToTop:k,scrollToRow:L,getRowHeight:R,onColumnSorted:N,onRowHeightChange:I,onRowHovered:B,onRowExpanded:z,onRowsRendered:V,onScroll:W,onVerticalScroll:G}=oot(e);return i({scrollTo:P,scrollToLeft:D,scrollToTop:k,scrollToRow:L}),Yt(B8,{ns:r,isResetting:w,isScrolling:S}),()=>{const{cache:q,cellProps:ae,estimatedRowHeight:J,expandColumnKey:$,fixedData:te,headerHeight:Q,headerClass:pe,headerProps:me,headerCellProps:le,sortBy:Z,sortState:oe,rowHeight:ge,rowClass:Ie,rowEventHandlers:we,rowKey:xe,rowProps:Se,scrollbarAlwaysOn:Le,indentSize:Be,iconSize:ee,useIsScrolling:X,vScrollbarSize:ue,width:Oe}=e,Y=g(h),qe={cache:q,class:r.e("main"),columns:g(o),data:Y,fixedData:te,estimatedRowHeight:J,bodyWidth:g(_)+ue,headerHeight:Q,headerWidth:g(A),height:g(l),mainTableRef:v,rowKey:xe,rowHeight:ge,scrollbarAlwaysOn:Le,scrollbarStartGap:2,scrollbarEndGap:ue,useIsScrolling:X,width:Oe,getRowHeight:R,onRowsRendered:V,onScroll:W},et=g(u),tt=g(c),ze={cache:q,class:r.e("left"),columns:g(a),data:Y,estimatedRowHeight:J,leftTableRef:y,rowHeight:ge,bodyWidth:et,headerWidth:et,headerHeight:Q,height:tt,rowKey:xe,scrollbarAlwaysOn:Le,scrollbarStartGap:2,scrollbarEndGap:ue,useIsScrolling:X,width:et,getRowHeight:R,onScroll:G},_e=g(d)+ue,Fe={cache:q,class:r.e("right"),columns:g(s),data:Y,estimatedRowHeight:J,rightTableRef:x,rowHeight:ge,bodyWidth:_e,headerWidth:_e,headerHeight:Q,height:tt,rowKey:xe,scrollbarAlwaysOn:Le,scrollbarStartGap:2,scrollbarEndGap:ue,width:_e,style:`--${g(r.namespace)}-table-scrollbar-size: ${ue}px`,useIsScrolling:X,getRowHeight:R,onScroll:G},he=g(n),ke={ns:r,depthMap:g(f),columnsStyles:he,expandColumnKey:$,expandedRowKeys:g(p),estimatedRowHeight:J,hasFixedColumns:g(m),rowProps:Se,rowClass:Ie,rowKey:xe,rowEventHandlers:we,onRowHovered:B,onRowExpanded:z,onRowHeightChange:I},se={cellProps:ae,expandColumnKey:$,indentSize:Be,iconSize:ee,rowKey:xe,expandedRowKeys:g(p),ns:r},He={ns:r,headerClass:pe,headerProps:me,columnsStyles:he},yt={ns:r,sortBy:Z,sortState:oe,headerCellProps:le,onColumnSorted:N},Te={row:wt=>ne(Lot,$t(wt,ke),{row:t.row,cell:Pt=>{let _t;return t.cell?ne(l5,$t(Pt,se,{style:he[Pt.column.key]}),tg(_t=t.cell(Pt))?_t:{default:()=>[_t]}):ne(l5,$t(Pt,se,{style:he[Pt.column.key]}),null)}}),header:wt=>ne(Not,$t(wt,He),{header:t.header,cell:Pt=>{let _t;return t["header-cell"]?ne(Wz,$t(Pt,yt,{style:he[Pt.column.key]}),tg(_t=t["header-cell"](Pt))?_t:{default:()=>[_t]}):ne(Wz,$t(Pt,yt,{style:he[Pt.column.key]}),null)}})},$e=[e.class,r.b(),r.e("root"),{[r.is("dynamic")]:g(b)}],st={class:r.e("footer"),style:g(M)};return ne("div",{class:$e,style:g(C)},[ne(Pot,qe,tg(Te)?Te:{default:()=>[Te]}),ne(Iot,ze,tg(Te)?Te:{default:()=>[Te]}),ne(Rot,Fe,tg(Te)?Te:{default:()=>[Te]}),t.footer&&ne(VJ,st,{default:t.footer}),g(T)&&ne(UJ,{class:r.e("empty"),style:g(E)},{default:t.empty}),t.overlay&&ne(HJ,{class:r.e("overlay")},{default:t.overlay})])}}});var Vot=zot;const Uot=je({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:be(Function)}}),Hot=ce({name:"ElAutoResizer",props:Uot,setup(e,{slots:t}){const i=Ve("auto-resizer"),{height:r,width:n,sizer:a}=sot(e),s={width:"100%",height:"100%"};return()=>{var o;return ne("div",{ref:a,class:i.b(),style:s},[(o=t.default)==null?void 0:o.call(t,{height:r.value,width:n.value})])}}}),jot=Rt(Vot),Wot=Rt(Hot),a3=Symbol("tabsRootContextKey"),Got=je({tabs:{type:be(Array),default:()=>Er([])}}),jJ="ElTabBar",$ot=ce({name:jJ}),Zot=ce({...$ot,props:Got,setup(e,{expose:t}){const i=e,r=Ut(),n=rt(a3);n||bn(jJ,"<el-tabs><el-tab-bar /></el-tabs>");const a=Ve("tabs"),s=j(),o=j(),l=()=>{let f=0,p=0;const m=["top","bottom"].includes(n.props.tabPosition)?"width":"height",v=m==="width"?"x":"y",y=v==="x"?"left":"top";return i.tabs.every(x=>{var b,w;const S=(w=(b=r.parent)==null?void 0:b.refs)==null?void 0:w[`tab-${x.uid}`];if(!S)return!1;if(!x.active)return!0;f=S[`offset${sc(y)}`],p=S[`client${sc(m)}`];const _=window.getComputedStyle(S);return m==="width"&&(p-=Number.parseFloat(_.paddingLeft)+Number.parseFloat(_.paddingRight),f+=Number.parseFloat(_.paddingLeft)),!1}),{[m]:`${p}px`,transform:`translate${sc(v)}(${f}px)`}},c=()=>o.value=l(),u=[],d=()=>{var f;u.forEach(m=>m.stop()),u.length=0;const p=(f=r.parent)==null?void 0:f.refs;if(p){for(const m in p)if(m.startsWith("tab-")){const v=p[m];v&&u.push(gr(v,c))}}};Ne(()=>i.tabs,async()=>{await ft(),c(),d()},{immediate:!0});const h=gr(s,()=>c());return Bi(()=>{u.forEach(f=>f.stop()),u.length=0,h.stop()}),t({ref:s,update:c}),(f,p)=>(F(),K("div",{ref_key:"barRef",ref:s,class:U([g(a).e("active-bar"),g(a).is(g(n).props.tabPosition)]),style:mt(o.value)},null,6))}});var qot=Ze(Zot,[["__file","tab-bar.vue"]]);const Yot=je({panes:{type:be(Array),default:()=>Er([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Kot={tabClick:(e,t,i)=>i instanceof Event,tabRemove:(e,t)=>t instanceof Event},Gz="ElTabNav",Xot=ce({name:Gz,props:Yot,emits:Kot,setup(e,{expose:t,emit:i}){const r=rt(a3);r||bn(Gz,"<el-tabs><tab-nav /></el-tabs>");const n=Ve("tabs"),a=HIe(),s=e8e(),o=j(),l=j(),c=j(),u=j(),d=j(!1),h=j(0),f=j(!1),p=j(!0),m=O(()=>["top","bottom"].includes(r.props.tabPosition)?"width":"height"),v=O(()=>({transform:`translate${m.value==="width"?"X":"Y"}(-${h.value}px)`})),y=()=>{if(!o.value)return;const C=o.value[`offset${sc(m.value)}`],A=h.value;if(!A)return;const M=A>C?A-C:0;h.value=M},x=()=>{if(!o.value||!l.value)return;const C=l.value[`offset${sc(m.value)}`],A=o.value[`offset${sc(m.value)}`],M=h.value;if(C-M<=A)return;const T=C-M>A*2?M+A:C-A;h.value=T},b=async()=>{const C=l.value;if(!d.value||!c.value||!o.value||!C)return;await ft();const A=c.value.querySelector(".is-active");if(!A)return;const M=o.value,T=["top","bottom"].includes(r.props.tabPosition),P=A.getBoundingClientRect(),D=M.getBoundingClientRect(),k=T?C.offsetWidth-D.width:C.offsetHeight-D.height,L=h.value;let R=L;T?(P.left<D.left&&(R=L-(D.left-P.left)),P.right>D.right&&(R=L+P.right-D.right)):(P.top<D.top&&(R=L-(D.top-P.top)),P.bottom>D.bottom&&(R=L+(P.bottom-D.bottom))),R=Math.max(R,0),h.value=Math.min(R,k)},w=()=>{var C;if(!l.value||!o.value)return;e.stretch&&((C=u.value)==null||C.update());const A=l.value[`offset${sc(m.value)}`],M=o.value[`offset${sc(m.value)}`],T=h.value;M<A?(d.value=d.value||{},d.value.prev=T,d.value.next=T+M<A,A-T<M&&(h.value=A-M)):(d.value=!1,T>0&&(h.value=0))},S=C=>{let A=0;switch(C.code){case at.left:case at.up:A=-1;break;case at.right:case at.down:A=1;break;default:return}const M=Array.from(C.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let P=M.indexOf(C.target)+A;P<0?P=M.length-1:P>=M.length&&(P=0),M[P].focus({preventScroll:!0}),M[P].click(),_()},_=()=>{p.value&&(f.value=!0)},E=()=>f.value=!1;return Ne(a,C=>{C==="hidden"?p.value=!1:C==="visible"&&setTimeout(()=>p.value=!0,50)}),Ne(s,C=>{C?setTimeout(()=>p.value=!0,50):p.value=!1}),gr(c,w),Lt(()=>setTimeout(()=>b(),0)),Tl(()=>w()),t({scrollToActiveTab:b,removeFocus:E}),()=>{const C=d.value?[ne("span",{class:[n.e("nav-prev"),n.is("disabled",!d.value.prev)],onClick:y},[ne(ut,null,{default:()=>[ne(ph,null,null)]})]),ne("span",{class:[n.e("nav-next"),n.is("disabled",!d.value.next)],onClick:x},[ne(ut,null,{default:()=>[ne(hs,null,null)]})])]:null,A=e.panes.map((M,T)=>{var P,D,k,L;const R=M.uid,N=M.props.disabled,I=(D=(P=M.props.name)!=null?P:M.index)!=null?D:`${T}`,B=!N&&(M.isClosable||e.editable);M.index=`${T}`;const z=B?ne(ut,{class:"is-icon-close",onClick:G=>i("tabRemove",M,G)},{default:()=>[ne(Ml,null,null)]}):null,V=((L=(k=M.slots).label)==null?void 0:L.call(k))||M.props.label,W=!N&&M.active?0:-1;return ne("div",{ref:`tab-${R}`,class:[n.e("item"),n.is(r.props.tabPosition),n.is("active",M.active),n.is("disabled",N),n.is("closable",B),n.is("focus",f.value)],id:`tab-${I}`,key:`tab-${R}`,"aria-controls":`pane-${I}`,role:"tab","aria-selected":M.active,tabindex:W,onFocus:()=>_(),onBlur:()=>E(),onClick:G=>{E(),i("tabClick",M,I,G)},onKeydown:G=>{B&&(G.code===at.delete||G.code===at.backspace)&&i("tabRemove",M,G)}},[V,z])});return ne("div",{ref:c,class:[n.e("nav-wrap"),n.is("scrollable",!!d.value),n.is(r.props.tabPosition)]},[C,ne("div",{class:n.e("nav-scroll"),ref:o},[ne("div",{class:[n.e("nav"),n.is(r.props.tabPosition),n.is("stretch",e.stretch&&["top","bottom"].includes(r.props.tabPosition))],ref:l,style:v.value,role:"tablist",onKeydown:S},[e.type?null:ne(qot,{ref:u,tabs:[...e.panes]},null),A])])])}}}),Qot=je({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:be(Function),default:()=>!0},stretch:Boolean}),hE=e=>Et(e)||gt(e),Jot={[Vt]:e=>hE(e),tabClick:(e,t)=>t instanceof Event,tabChange:e=>hE(e),edit:(e,t)=>["remove","add"].includes(t),tabRemove:e=>hE(e),tabAdd:()=>!0},elt=ce({name:"ElTabs",props:Qot,emits:Jot,setup(e,{emit:t,slots:i,expose:r}){var n;const a=Ve("tabs"),s=O(()=>["left","right"].includes(e.tabPosition)),{children:o,addChild:l,removeChild:c}=a8(Ut(),"ElTabPane"),u=j(),d=j((n=e.modelValue)!=null?n:"0"),h=async(y,x=!1)=>{var b,w,S;if(!(d.value===y||Qi(y)))try{await((b=e.beforeLeave)==null?void 0:b.call(e,y,d.value))!==!1&&(d.value=y,x&&(t(Vt,y),t("tabChange",y)),(S=(w=u.value)==null?void 0:w.removeFocus)==null||S.call(w))}catch{}},f=(y,x,b)=>{y.props.disabled||(h(x,!0),t("tabClick",y,b))},p=(y,x)=>{y.props.disabled||Qi(y.props.name)||(x.stopPropagation(),t("edit",y.props.name,"remove"),t("tabRemove",y.props.name))},m=()=>{t("edit",void 0,"add"),t("tabAdd")};Ne(()=>e.modelValue,y=>h(y)),Ne(d,async()=>{var y;await ft(),(y=u.value)==null||y.scrollToActiveTab()}),Yt(a3,{props:e,currentName:d,registerPane:y=>{o.value.push(y)},sortPane:l,unregisterPane:c}),r({currentName:d});const v=({render:y})=>y();return()=>{const y=i["add-icon"],x=e.editable||e.addable?ne("div",{class:[a.e("new-tab"),s.value&&a.e("new-tab-vertical")],tabindex:"0",onClick:m,onKeydown:S=>{[at.enter,at.numpadEnter].includes(S.code)&&m()}},[y?Ee(i,"add-icon"):ne(ut,{class:a.is("icon-plus")},{default:()=>[ne(xK,null,null)]})]):null,b=ne("div",{class:[a.e("header"),s.value&&a.e("header-vertical"),a.is(e.tabPosition)]},[ne(v,{render:()=>{const S=o.value.some(_=>_.slots.label);return ne(Xot,{ref:u,currentName:d.value,editable:e.editable,type:e.type,panes:o.value,stretch:e.stretch,onTabClick:f,onTabRemove:p},{$stable:!S})}},null),x]),w=ne("div",{class:a.e("content")},[Ee(i,"default")]);return ne("div",{class:[a.b(),a.m(e.tabPosition),{[a.m("card")]:e.type==="card",[a.m("border-card")]:e.type==="border-card"}]},[w,b])}}}),tlt=je({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),WJ="ElTabPane",ilt=ce({name:WJ}),rlt=ce({...ilt,props:tlt,setup(e){const t=e,i=Ut(),r=In(),n=rt(a3);n||bn(WJ,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const a=Ve("tab-pane"),s=j(),o=O(()=>t.closable||n.props.closable),l=iT(()=>{var f;return n.currentName.value===((f=t.name)!=null?f:s.value)}),c=j(l.value),u=O(()=>{var f;return(f=t.name)!=null?f:s.value}),d=iT(()=>!t.lazy||c.value||l.value);Ne(l,f=>{f&&(c.value=!0)});const h=bi({uid:i.uid,slots:r,props:t,paneName:u,active:l,index:s,isClosable:o});return n.registerPane(h),Lt(()=>{n.sortPane(h)}),zu(()=>{n.unregisterPane(h.uid)}),(f,p)=>g(d)?Nt((F(),K("div",{key:0,id:`pane-${g(u)}`,class:U(g(a).b()),role:"tabpanel","aria-hidden":!g(l),"aria-labelledby":`tab-${g(u)}`},[Ee(f.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[_i,g(l)]]):Ae("v-if",!0)}});var GJ=Ze(rlt,[["__file","tab-pane.vue"]]);const nlt=Rt(elt,{TabPane:GJ}),alt=Tr(GJ),slt=je({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:Lc,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),olt=ce({name:"ElText"}),llt=ce({...olt,props:slt,setup(e){const t=e,i=on(),r=Ve("text"),n=O(()=>[r.b(),r.m(t.type),r.m(i.value),r.is("truncated",t.truncated),r.is("line-clamp",!Qi(t.lineClamp))]);return(a,s)=>(F(),De(jt(a.tag),{class:U(g(n)),style:mt({"-webkit-line-clamp":a.lineClamp})},{default:ve(()=>[Ee(a.$slots,"default")]),_:3},8,["class","style"]))}});var clt=Ze(llt,[["__file","text.vue"]]);const ult=Rt(clt),dlt=je({format:{type:String,default:"HH:mm"},modelValue:String,disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:be(String),default:"light"},clearable:{type:Boolean,default:!0},size:wn,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:String,maxTime:String,name:String,prefixIcon:{type:be([String,Object]),default:()=>wK},clearIcon:{type:be([String,Object]),default:()=>Ih},...h0}),pu=e=>{const t=(e||"").split(":");if(t.length>=2){let i=Number.parseInt(t[0],10);const r=Number.parseInt(t[1],10),n=e.toUpperCase();return n.includes("AM")&&i===12?i=0:n.includes("PM")&&i!==12&&(i+=12),{hours:i,minutes:r}}return null},fE=(e,t)=>{const i=pu(e);if(!i)return-1;const r=pu(t);if(!r)return-1;const n=i.minutes+i.hours*60,a=r.minutes+r.hours*60;return n===a?0:n>a?1:-1},$z=e=>`${e}`.padStart(2,"0"),mm=e=>`${$z(e.hours)}:${$z(e.minutes)}`,hlt=(e,t)=>{const i=pu(e);if(!i)return"";const r=pu(t);if(!r)return"";const n={hours:i.hours,minutes:i.minutes};return n.minutes+=r.minutes,n.hours+=r.hours,n.hours+=Math.floor(n.minutes/60),n.minutes=n.minutes%60,mm(n)},flt=ce({name:"ElTimeSelect"}),plt=ce({...flt,props:dlt,emits:["change","blur","focus","clear","update:modelValue"],setup(e,{expose:t}){const i=e;Dt.extend(f8);const{Option:r}=tp,n=Ve("input"),a=j(),s=qa(),{lang:o}=di(),l=O(()=>i.modelValue),c=O(()=>{const y=pu(i.start);return y?mm(y):null}),u=O(()=>{const y=pu(i.end);return y?mm(y):null}),d=O(()=>{const y=pu(i.step);return y?mm(y):null}),h=O(()=>{const y=pu(i.minTime||"");return y?mm(y):null}),f=O(()=>{const y=pu(i.maxTime||"");return y?mm(y):null}),p=O(()=>{const y=[];if(i.start&&i.end&&i.step){let x=c.value,b;for(;x&&u.value&&fE(x,u.value)<=0;)b=Dt(x,"HH:mm").locale(o.value).format(i.format),y.push({value:b,disabled:fE(x,h.value||"-1:-1")<=0||fE(x,f.value||"100:100")>=0}),x=hlt(x,d.value)}return y});return t({blur:()=>{var y,x;(x=(y=a.value)==null?void 0:y.blur)==null||x.call(y)},focus:()=>{var y,x;(x=(y=a.value)==null?void 0:y.focus)==null||x.call(y)}}),(y,x)=>(F(),De(g(tp),{ref_key:"select",ref:a,"model-value":g(l),disabled:g(s),clearable:y.clearable,"clear-icon":y.clearIcon,size:y.size,effect:y.effect,placeholder:y.placeholder,"default-first-option":"",filterable:y.editable,"empty-values":y.emptyValues,"value-on-clear":y.valueOnClear,"onUpdate:modelValue":b=>y.$emit("update:modelValue",b),onChange:b=>y.$emit("change",b),onBlur:b=>y.$emit("blur",b),onFocus:b=>y.$emit("focus",b),onClear:()=>y.$emit("clear")},{prefix:ve(()=>[y.prefixIcon?(F(),De(g(ut),{key:0,class:U(g(n).e("prefix-icon"))},{default:ve(()=>[(F(),De(jt(y.prefixIcon)))]),_:1},8,["class"])):Ae("v-if",!0)]),default:ve(()=>[(F(!0),K(ht,null,Qt(g(p),b=>(F(),De(g(r),{key:b.value,label:b.value,value:b.value,disabled:b.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable","empty-values","value-on-clear","onUpdate:modelValue","onChange","onBlur","onFocus","onClear"]))}});var mlt=Ze(plt,[["__file","time-select.vue"]]);const vlt=Rt(mlt),glt=ce({name:"ElTimeline",setup(e,{slots:t}){const i=Ve("timeline");return Yt("timeline",t),()=>dt("ul",{class:[i.b()]},[Ee(t,"default")])}});var ylt=glt;const blt=je({timestamp:{type:String,default:""},hideTimestamp:Boolean,center:Boolean,placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:zi},hollow:Boolean}),wlt=ce({name:"ElTimelineItem"}),xlt=ce({...wlt,props:blt,setup(e){const t=e,i=Ve("timeline-item"),r=O(()=>[i.e("node"),i.em("node",t.size||""),i.em("node",t.type||""),i.is("hollow",t.hollow)]);return(n,a)=>(F(),K("li",{class:U([g(i).b(),{[g(i).e("center")]:n.center}])},[ie("div",{class:U(g(i).e("tail"))},null,2),n.$slots.dot?Ae("v-if",!0):(F(),K("div",{key:0,class:U(g(r)),style:mt({backgroundColor:n.color})},[n.icon?(F(),De(g(ut),{key:0,class:U(g(i).e("icon"))},{default:ve(()=>[(F(),De(jt(n.icon)))]),_:1},8,["class"])):Ae("v-if",!0)],6)),n.$slots.dot?(F(),K("div",{key:1,class:U(g(i).e("dot"))},[Ee(n.$slots,"dot")],2)):Ae("v-if",!0),ie("div",{class:U(g(i).e("wrapper"))},[!n.hideTimestamp&&n.placement==="top"?(F(),K("div",{key:0,class:U([g(i).e("timestamp"),g(i).is("top")])},Ye(n.timestamp),3)):Ae("v-if",!0),ie("div",{class:U(g(i).e("content"))},[Ee(n.$slots,"default")],2),!n.hideTimestamp&&n.placement==="bottom"?(F(),K("div",{key:1,class:U([g(i).e("timestamp"),g(i).is("bottom")])},Ye(n.timestamp),3)):Ae("v-if",!0)],2)],2))}});var $J=Ze(xlt,[["__file","timeline-item.vue"]]);const _lt=Rt(ylt,{TimelineItem:$J}),Slt=Tr($J),ZJ=je({nowrap:Boolean});var qJ=(e=>(e.top="top",e.bottom="bottom",e.left="left",e.right="right",e))(qJ||{});const Clt=Object.values(qJ),H8=je({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:be(Object),default:null}}),Elt=je({side:{type:be(String),values:Clt,required:!0}}),Alt=["absolute","fixed"],Mlt=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],j8=je({arrowPadding:{type:be(Number),default:5},effect:{type:be(String),default:"light"},contentClass:String,placement:{type:be(String),values:Mlt,default:"bottom"},reference:{type:be(Object),default:null},offset:{type:Number,default:8},strategy:{type:be(String),values:Alt,default:"absolute"},showArrow:Boolean,...ha(["ariaLabel"])}),W8=je({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:be(Function)},"onUpdate:open":{type:be(Function)}}),tm={type:be(Function)},G8=je({onBlur:tm,onClick:tm,onFocus:tm,onMouseDown:tm,onMouseEnter:tm,onMouseLeave:tm}),Tlt=je({...W8,...H8,...G8,...j8,alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:be(Object),default:null},teleported:Boolean,to:{type:be(String),default:"body"}}),s3=Symbol("tooltipV2"),YJ=Symbol("tooltipV2Content"),pE="tooltip_v2.open",Plt=ce({name:"ElTooltipV2Root"}),Dlt=ce({...Plt,props:W8,setup(e,{expose:t}){const i=e,r=j(i.defaultOpen),n=j(null),a=O({get:()=>Qf(i.open)?r.value:i.open,set:v=>{var y;r.value=v,(y=i["onUpdate:open"])==null||y.call(i,v)}}),s=O(()=>gt(i.delayDuration)&&i.delayDuration>0),{start:o,stop:l}=qf(()=>{a.value=!0},O(()=>i.delayDuration),{immediate:!1}),c=Ve("tooltip-v2"),u=ua(),d=()=>{l(),a.value=!0},h=()=>{g(s)?o():d()},f=d,p=()=>{l(),a.value=!1};return Ne(a,v=>{var y;v&&(document.dispatchEvent(new CustomEvent(pE)),f()),(y=i.onOpenChange)==null||y.call(i,v)}),Lt(()=>{document.addEventListener(pE,p)}),Bi(()=>{l(),document.removeEventListener(pE,p)}),Yt(s3,{contentId:u,triggerRef:n,ns:c,onClose:p,onDelayOpen:h,onOpen:f}),t({onOpen:f,onClose:p}),(v,y)=>Ee(v.$slots,"default",{open:g(a)})}});var Ilt=Ze(Dlt,[["__file","root.vue"]]);const Olt=ce({name:"ElTooltipV2Arrow"}),Rlt=ce({...Olt,props:{...H8,...Elt},setup(e){const t=e,{ns:i}=rt(s3),{arrowRef:r}=rt(YJ),n=O(()=>{const{style:a,width:s,height:o}=t,l=i.namespace.value;return{[`--${l}-tooltip-v2-arrow-width`]:`${s}px`,[`--${l}-tooltip-v2-arrow-height`]:`${o}px`,[`--${l}-tooltip-v2-arrow-border-width`]:`${s/2}px`,[`--${l}-tooltip-v2-arrow-cover-width`]:s/2-1,...a||{}}});return(a,s)=>(F(),K("span",{ref_key:"arrowRef",ref:r,style:mt(g(n)),class:U(g(i).e("arrow"))},null,6))}});var Zz=Ze(Rlt,[["__file","arrow.vue"]]);const klt=je({style:{type:be([String,Object,Array]),default:()=>({})}}),Llt=ce({name:"ElVisuallyHidden"}),Blt=ce({...Llt,props:klt,setup(e){const t=e,i=O(()=>[t.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}]);return(r,n)=>(F(),K("span",$t(r.$attrs,{style:g(i)}),[Ee(r.$slots,"default")],16))}});var Nlt=Ze(Blt,[["__file","visual-hidden.vue"]]);const Flt=ce({name:"ElTooltipV2Content"}),zlt=ce({...Flt,props:{...j8,...ZJ},setup(e){const t=e,{triggerRef:i,contentId:r}=rt(s3),n=j(t.placement),a=j(t.strategy),s=j(null),{referenceRef:o,contentRef:l,middlewareData:c,x:u,y:d,update:h}=HGe({placement:n,strategy:a,middleware:O(()=>{const b=[qK(t.offset)];return t.showArrow&&b.push(jGe({arrowRef:s})),b})}),f=d0().nextZIndex(),p=Ve("tooltip-v2"),m=O(()=>n.value.split("-")[0]),v=O(()=>({position:g(a),top:`${g(d)||0}px`,left:`${g(u)||0}px`,zIndex:f})),y=O(()=>{if(!t.showArrow)return{};const{arrow:b}=g(c);return{[`--${p.namespace.value}-tooltip-v2-arrow-x`]:`${b==null?void 0:b.x}px`||"",[`--${p.namespace.value}-tooltip-v2-arrow-y`]:`${b==null?void 0:b.y}px`||""}}),x=O(()=>[p.e("content"),p.is("dark",t.effect==="dark"),p.is(g(a)),t.contentClass]);return Ne(s,()=>h()),Ne(()=>t.placement,b=>n.value=b),Lt(()=>{Ne(()=>t.reference||i.value,b=>{o.value=b||void 0},{immediate:!0})}),Yt(YJ,{arrowRef:s}),(b,w)=>(F(),K("div",{ref_key:"contentRef",ref:l,style:mt(g(v)),"data-tooltip-v2-root":""},[b.nowrap?Ae("v-if",!0):(F(),K("div",{key:0,"data-side":g(m),class:U(g(x))},[Ee(b.$slots,"default",{contentStyle:g(v),contentClass:g(x)}),ne(g(Nlt),{id:g(r),role:"tooltip"},{default:ve(()=>[b.ariaLabel?(F(),K(ht,{key:0},[Xt(Ye(b.ariaLabel),1)],64)):Ee(b.$slots,"default",{key:1})]),_:3},8,["id"]),Ee(b.$slots,"arrow",{style:mt(g(y)),side:g(m)})],10,["data-side"]))],4))}});var qz=Ze(zlt,[["__file","content.vue"]]);const Vlt=je({setRef:{type:be(Function),required:!0},onlyChild:Boolean});var Ult=ce({props:Vlt,setup(e,{slots:t}){const i=j(),r=HS(i,n=>{n?e.setRef(n.nextElementSibling):e.setRef(null)});return()=>{var n;const[a]=((n=t.default)==null?void 0:n.call(t))||[],s=e.onlyChild?Uje(a.children):a.children;return ne(ht,{ref:r},[s])}}});const Hlt=ce({name:"ElTooltipV2Trigger"}),jlt=ce({...Hlt,props:{...ZJ,...G8},setup(e){const t=e,{onClose:i,onOpen:r,onDelayOpen:n,triggerRef:a,contentId:s}=rt(s3);let o=!1;const l=x=>{a.value=x},c=()=>{o=!1},u=Br(t.onMouseEnter,n),d=Br(t.onMouseLeave,i),h=Br(t.onMouseDown,()=>{i(),o=!0,document.addEventListener("mouseup",c,{once:!0})}),f=Br(t.onFocus,()=>{o||r()}),p=Br(t.onBlur,i),m=Br(t.onClick,x=>{x.detail===0&&i()}),v={blur:p,click:m,focus:f,mousedown:h,mouseenter:u,mouseleave:d},y=(x,b,w)=>{x&&Object.entries(b).forEach(([S,_])=>{x[w](S,_)})};return Ne(a,(x,b)=>{y(x,v,"addEventListener"),y(b,v,"removeEventListener"),x&&x.setAttribute("aria-describedby",s.value)}),Bi(()=>{y(a.value,v,"removeEventListener"),document.removeEventListener("mouseup",c)}),(x,b)=>x.nowrap?(F(),De(g(Ult),{key:0,"set-ref":l,"only-child":""},{default:ve(()=>[Ee(x.$slots,"default")]),_:3})):(F(),K("button",$t({key:1,ref_key:"triggerRef",ref:a},x.$attrs),[Ee(x.$slots,"default")],16))}});var Wlt=Ze(jlt,[["__file","trigger.vue"]]);const Glt=ce({name:"ElTooltipV2"}),$lt=ce({...Glt,props:Tlt,setup(e){const i=Gn(e),r=bi(Co(i,Object.keys(H8))),n=bi(Co(i,Object.keys(j8))),a=bi(Co(i,Object.keys(W8))),s=bi(Co(i,Object.keys(G8)));return(o,l)=>(F(),De(Ilt,_o(Au(a)),{default:ve(({open:c})=>[ne(Wlt,$t(s,{nowrap:""}),{default:ve(()=>[Ee(o.$slots,"trigger")]),_:3},16),ne(g(f0),{to:o.to,disabled:!o.teleported},{default:ve(()=>[o.fullTransition?(F(),De(Pn,_o($t({key:0},o.transitionProps)),{default:ve(()=>[o.alwaysOn||c?(F(),De(qz,_o($t({key:0},n)),{arrow:ve(({style:u,side:d})=>[o.showArrow?(F(),De(Zz,$t({key:0},r,{style:u,side:d}),null,16,["style","side"])):Ae("v-if",!0)]),default:ve(()=>[Ee(o.$slots,"default")]),_:3},16)):Ae("v-if",!0)]),_:2},1040)):(F(),K(ht,{key:1},[o.alwaysOn||c?(F(),De(qz,_o($t({key:0},n)),{arrow:ve(({style:u,side:d})=>[o.showArrow?(F(),De(Zz,$t({key:0},r,{style:u,side:d}),null,16,["style","side"])):Ae("v-if",!0)]),default:ve(()=>[Ee(o.$slots,"default")]),_:3},16)):Ae("v-if",!0)],64))]),_:2},1032,["to","disabled"])]),_:3},16))}});var Zlt=Ze($lt,[["__file","tooltip.vue"]]);const qlt=Rt(Zlt),KJ="left-check-change",XJ="right-check-change",vm=je({data:{type:be(Array),default:()=>[]},titles:{type:be(Array),default:()=>[]},buttonTexts:{type:be(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:be(Function)},leftDefaultChecked:{type:be(Array),default:()=>[]},rightDefaultChecked:{type:be(Array),default:()=>[]},renderContent:{type:be(Function)},modelValue:{type:be(Array),default:()=>[]},format:{type:be(Object),default:()=>({})},filterable:Boolean,props:{type:be(Object),default:()=>Er({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),c5=(e,t)=>[e,t].every(ct)||ct(e)&&mn(t),Ylt={[nr]:(e,t,i)=>[e,i].every(ct)&&["left","right"].includes(t),[Vt]:e=>ct(e),[KJ]:c5,[XJ]:c5},u5="checked-change",Klt=je({data:vm.data,optionRender:{type:be(Function)},placeholder:String,title:String,filterable:Boolean,format:vm.format,filterMethod:vm.filterMethod,defaultChecked:vm.leftDefaultChecked,props:vm.props}),Xlt={[u5]:c5},Ny=e=>{const t={label:"label",key:"key",disabled:"disabled"};return O(()=>({...t,...e.props}))},Qlt=(e,t,i)=>{const r=Ny(e),n=O(()=>e.data.filter(u=>Wt(e.filterMethod)?e.filterMethod(t.query,u):String(u[r.value.label]||u[r.value.key]).toLowerCase().includes(t.query.toLowerCase()))),a=O(()=>n.value.filter(u=>!u[r.value.disabled])),s=O(()=>{const u=t.checked.length,d=e.data.length,{noChecked:h,hasChecked:f}=e.format;return h&&f?u>0?f.replace(/\${checked}/g,u.toString()).replace(/\${total}/g,d.toString()):h.replace(/\${total}/g,d.toString()):`${u}/${d}`}),o=O(()=>{const u=t.checked.length;return u>0&&u<a.value.length}),l=()=>{const u=a.value.map(d=>d[r.value.key]);t.allChecked=u.length>0&&u.every(d=>t.checked.includes(d))},c=u=>{t.checked=u?a.value.map(d=>d[r.value.key]):[]};return Ne(()=>t.checked,(u,d)=>{if(l(),t.checkChangeByUser){const h=u.concat(d).filter(f=>!u.includes(f)||!d.includes(f));i(u5,u,h)}else i(u5,u),t.checkChangeByUser=!0}),Ne(a,()=>{l()}),Ne(()=>e.data,()=>{const u=[],d=n.value.map(h=>h[r.value.key]);t.checked.forEach(h=>{d.includes(h)&&u.push(h)}),t.checkChangeByUser=!1,t.checked=u}),Ne(()=>e.defaultChecked,(u,d)=>{if(d&&u.length===d.length&&u.every(p=>d.includes(p)))return;const h=[],f=a.value.map(p=>p[r.value.key]);u.forEach(p=>{f.includes(p)&&h.push(p)}),t.checkChangeByUser=!1,t.checked=h},{immediate:!0}),{filteredData:n,checkableData:a,checkedSummary:s,isIndeterminate:o,updateAllChecked:l,handleAllCheckedChange:c}},Jlt=(e,t)=>({onSourceCheckedChange:(n,a)=>{e.leftChecked=n,a&&t(KJ,n,a)},onTargetCheckedChange:(n,a)=>{e.rightChecked=n,a&&t(XJ,n,a)}}),ect=e=>{const t=Ny(e),i=O(()=>e.data.reduce((a,s)=>(a[s[t.value.key]]=s)&&a,{})),r=O(()=>e.data.filter(a=>!e.modelValue.includes(a[t.value.key]))),n=O(()=>e.targetOrder==="original"?e.data.filter(a=>e.modelValue.includes(a[t.value.key])):e.modelValue.reduce((a,s)=>{const o=i.value[s];return o&&a.push(o),a},[]));return{sourceData:r,targetData:n}},tct=(e,t,i)=>{const r=Ny(e),n=(o,l,c)=>{i(Vt,o),i(nr,o,l,c)};return{addToLeft:()=>{const o=e.modelValue.slice();t.rightChecked.forEach(l=>{const c=o.indexOf(l);c>-1&&o.splice(c,1)}),n(o,"left",t.rightChecked)},addToRight:()=>{let o=e.modelValue.slice();const l=e.data.filter(c=>{const u=c[r.value.key];return t.leftChecked.includes(u)&&!e.modelValue.includes(u)}).map(c=>c[r.value.key]);o=e.targetOrder==="unshift"?l.concat(o):o.concat(l),e.targetOrder==="original"&&(o=e.data.filter(c=>o.includes(c[r.value.key])).map(c=>c[r.value.key])),n(o,"right",t.leftChecked)}}},ict=ce({name:"ElTransferPanel"}),rct=ce({...ict,props:Klt,emits:Xlt,setup(e,{expose:t,emit:i}){const r=e,n=In(),a=({option:b})=>b,{t:s}=di(),o=Ve("transfer"),l=bi({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),c=Ny(r),{filteredData:u,checkedSummary:d,isIndeterminate:h,handleAllCheckedChange:f}=Qlt(r,l,i),p=O(()=>!Zs(l.query)&&Zs(u.value)),m=O(()=>!Zs(n.default()[0].children)),{checked:v,allChecked:y,query:x}=Gn(l);return t({query:x}),(b,w)=>(F(),K("div",{class:U(g(o).b("panel"))},[ie("p",{class:U(g(o).be("panel","header"))},[ne(g(jo),{modelValue:g(y),"onUpdate:modelValue":S=>Ji(y)?y.value=S:null,indeterminate:g(h),"validate-event":!1,onChange:g(f)},{default:ve(()=>[Xt(Ye(b.title)+" ",1),ie("span",null,Ye(g(d)),1)]),_:1},8,["modelValue","onUpdate:modelValue","indeterminate","onChange"])],2),ie("div",{class:U([g(o).be("panel","body"),g(o).is("with-footer",g(m))])},[b.filterable?(F(),De(g(Ha),{key:0,modelValue:g(x),"onUpdate:modelValue":S=>Ji(x)?x.value=S:null,class:U(g(o).be("panel","filter")),size:"default",placeholder:b.placeholder,"prefix-icon":g(wje),clearable:"","validate-event":!1},null,8,["modelValue","onUpdate:modelValue","class","placeholder","prefix-icon"])):Ae("v-if",!0),Nt(ne(g(rQ),{modelValue:g(v),"onUpdate:modelValue":S=>Ji(v)?v.value=S:null,"validate-event":!1,class:U([g(o).is("filterable",b.filterable),g(o).be("panel","list")])},{default:ve(()=>[(F(!0),K(ht,null,Qt(g(u),S=>(F(),De(g(jo),{key:S[g(c).key],class:U(g(o).be("panel","item")),value:S[g(c).key],disabled:S[g(c).disabled],"validate-event":!1},{default:ve(()=>{var _;return[ne(a,{option:(_=b.optionRender)==null?void 0:_.call(b,S)},null,8,["option"])]}),_:2},1032,["class","value","disabled"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"]),[[_i,!g(p)&&!g(Zs)(b.data)]]),Nt(ie("p",{class:U(g(o).be("panel","empty"))},Ye(g(p)?g(s)("el.transfer.noMatch"):g(s)("el.transfer.noData")),3),[[_i,g(p)||g(Zs)(b.data)]])],2),g(m)?(F(),K("p",{key:0,class:U(g(o).be("panel","footer"))},[Ee(b.$slots,"default")],2)):Ae("v-if",!0)],2))}});var Yz=Ze(rct,[["__file","transfer-panel.vue"]]);const nct=ce({name:"ElTransfer"}),act=ce({...nct,props:vm,emits:Ylt,setup(e,{expose:t,emit:i}){const r=e,n=In(),{t:a}=di(),s=Ve("transfer"),{formItem:o}=Ya(),l=bi({leftChecked:[],rightChecked:[]}),c=Ny(r),{sourceData:u,targetData:d}=ect(r),{onSourceCheckedChange:h,onTargetCheckedChange:f}=Jlt(l,i),{addToLeft:p,addToRight:m}=tct(r,l,i),v=j(),y=j(),x=C=>{switch(C){case"left":v.value.query="";break;case"right":y.value.query="";break}},b=O(()=>r.buttonTexts.length===2),w=O(()=>r.titles[0]||a("el.transfer.titles.0")),S=O(()=>r.titles[1]||a("el.transfer.titles.1")),_=O(()=>r.filterPlaceholder||a("el.transfer.filterPlaceholder"));Ne(()=>r.modelValue,()=>{var C;r.validateEvent&&((C=o==null?void 0:o.validate)==null||C.call(o,"change").catch(A=>void 0))});const E=O(()=>C=>{var A;if(r.renderContent)return r.renderContent(dt,C);const M=(((A=n.default)==null?void 0:A.call(n,{option:C}))||[]).filter(T=>T.type!==Zr);return M.length?M:dt("span",C[c.value.label]||C[c.value.key])});return t({clearQuery:x,leftPanel:v,rightPanel:y}),(C,A)=>(F(),K("div",{class:U(g(s).b())},[ne(Yz,{ref_key:"leftPanel",ref:v,data:g(u),"option-render":g(E),placeholder:g(_),title:g(w),filterable:C.filterable,format:C.format,"filter-method":C.filterMethod,"default-checked":C.leftDefaultChecked,props:r.props,onCheckedChange:g(h)},{default:ve(()=>[Ee(C.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),ie("div",{class:U(g(s).e("buttons"))},[ne(g(Wn),{type:"primary",class:U([g(s).e("button"),g(s).is("with-texts",g(b))]),disabled:g(Zs)(l.rightChecked),onClick:g(p)},{default:ve(()=>[ne(g(ut),null,{default:ve(()=>[ne(g(ph))]),_:1}),g(Qi)(C.buttonTexts[0])?Ae("v-if",!0):(F(),K("span",{key:0},Ye(C.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),ne(g(Wn),{type:"primary",class:U([g(s).e("button"),g(s).is("with-texts",g(b))]),disabled:g(Zs)(l.leftChecked),onClick:g(m)},{default:ve(()=>[g(Qi)(C.buttonTexts[1])?Ae("v-if",!0):(F(),K("span",{key:0},Ye(C.buttonTexts[1]),1)),ne(g(ut),null,{default:ve(()=>[ne(g(hs))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),ne(Yz,{ref_key:"rightPanel",ref:y,data:g(d),"option-render":g(E),placeholder:g(_),filterable:C.filterable,format:C.format,"filter-method":C.filterMethod,title:g(S),"default-checked":C.rightDefaultChecked,props:r.props,onCheckedChange:g(f)},{default:ve(()=>[Ee(C.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var sct=Ze(act,[["__file","transfer.vue"]]);const oct=Rt(sct),ev="$treeNodeId",Kz=function(e,t){!t||t[ev]||Object.defineProperty(t,ev,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},$8=function(e,t){return e?t[e]:t[ev]},d5=(e,t,i)=>{const r=e.value.currentNode;i();const n=e.value.currentNode;r!==n&&t("current-change",n?n.data:null,n)},h5=e=>{let t=!0,i=!0,r=!0;for(let n=0,a=e.length;n<a;n++){const s=e[n];(s.checked!==!0||s.indeterminate)&&(t=!1,s.disabled||(r=!1)),(s.checked!==!1||s.indeterminate)&&(i=!1)}return{all:t,none:i,allWithoutDisable:r,half:!t&&!i}},mg=function(e){if(e.childNodes.length===0||e.loading)return;const{all:t,none:i,half:r}=h5(e.childNodes);t?(e.checked=!0,e.indeterminate=!1):r?(e.checked=!1,e.indeterminate=!0):i&&(e.checked=!1,e.indeterminate=!1);const n=e.parent;!n||n.level===0||e.store.checkStrictly||mg(n)},Nw=function(e,t){const i=e.store.props,r=e.data||{},n=i[t];if(Wt(n))return n(r,e);if(Et(n))return r[n];if(Qi(n)){const a=r[t];return a===void 0?"":a}};let lct=0;class Yg{constructor(t){this.id=lct++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const i in t)Ma(t,i)&&(this[i]=t[i]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const t=this.store;if(!t)throw new Error("[Node]store is required!");t.registerNode(this);const i=t.props;if(i&&typeof i.isLeaf<"u"){const a=Nw(this,"isLeaf");Gi(a)&&(this.isLeafByUser=a)}if(t.lazy!==!0&&this.data?(this.setData(this.data),t.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&t.lazy&&t.defaultExpandAll&&!this.isLeafByUser&&this.expand(),ct(this.data)||Kz(this,this.data),!this.data)return;const r=t.defaultExpandedKeys,n=t.key;n&&r&&r.includes(this.key)&&this.expand(null,t.autoExpandParent),n&&t.currentNodeKey!==void 0&&this.key===t.currentNodeKey&&(t.currentNode=this,t.currentNode.isCurrent=!0),t.lazy&&t._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(t){ct(t)||Kz(this,t),this.data=t,this.childNodes=[];let i;this.level===0&&ct(this.data)?i=this.data:i=Nw(this,"children")||[];for(let r=0,n=i.length;r<n;r++)this.insertChild({data:i[r]})}get label(){return Nw(this,"label")}get key(){const t=this.store.key;return this.data?this.data[t]:null}get disabled(){return Nw(this,"disabled")}get nextSibling(){const t=this.parent;if(t){const i=t.childNodes.indexOf(this);if(i>-1)return t.childNodes[i+1]}return null}get previousSibling(){const t=this.parent;if(t){const i=t.childNodes.indexOf(this);if(i>-1)return i>0?t.childNodes[i-1]:null}return null}contains(t,i=!0){return(this.childNodes||[]).some(r=>r===t||i&&r.contains(t))}remove(){const t=this.parent;t&&t.removeChild(this)}insertChild(t,i,r){if(!t)throw new Error("InsertChild error: child is required.");if(!(t instanceof Yg)){if(!r){const n=this.getChildren(!0);n.includes(t.data)||(Qi(i)||i<0?n.push(t.data):n.splice(i,0,t.data))}Object.assign(t,{parent:this,store:this.store}),t=bi(new Yg(t)),t instanceof Yg&&t.initialize()}t.level=this.level+1,Qi(i)||i<0?this.childNodes.push(t):this.childNodes.splice(i,0,t),this.updateLeafState()}insertBefore(t,i){let r;i&&(r=this.childNodes.indexOf(i)),this.insertChild(t,r)}insertAfter(t,i){let r;i&&(r=this.childNodes.indexOf(i),r!==-1&&(r+=1)),this.insertChild(t,r)}removeChild(t){const i=this.getChildren()||[],r=i.indexOf(t.data);r>-1&&i.splice(r,1);const n=this.childNodes.indexOf(t);n>-1&&(this.store&&this.store.deregisterNode(t),t.parent=null,this.childNodes.splice(n,1)),this.updateLeafState()}removeChildByData(t){let i=null;for(let r=0;r<this.childNodes.length;r++)if(this.childNodes[r].data===t){i=this.childNodes[r];break}i&&this.removeChild(i)}expand(t,i){const r=()=>{if(i){let n=this.parent;for(;n.level>0;)n.expanded=!0,n=n.parent}this.expanded=!0,t&&t(),this.childNodes.forEach(n=>{n.canFocus=!0})};this.shouldLoadData()?this.loadData(n=>{ct(n)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||mg(this),r())}):r()}doCreateChildren(t,i={}){t.forEach(r=>{this.insertChild(Object.assign({data:r},i),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(t=>{t.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const t=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!t||t.length===0;return}this.isLeaf=!1}setChecked(t,i,r,n){if(this.indeterminate=t==="half",this.checked=t===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:s,allWithoutDisable:o}=h5(this.childNodes);!this.isLeaf&&!s&&o&&(this.checked=!1,t=!1);const l=()=>{if(i){const c=this.childNodes;for(let h=0,f=c.length;h<f;h++){const p=c[h];n=n||t!==!1;const m=p.disabled?p.checked:n;p.setChecked(m,i,!0,n)}const{half:u,all:d}=h5(c);d||(this.checked=d,this.indeterminate=u)}};if(this.shouldLoadData()){this.loadData(()=>{l(),mg(this)},{checked:t!==!1});return}else l()}const a=this.parent;!a||a.level===0||r||mg(a)}getChildren(t=!1){if(this.level===0)return this.data;const i=this.data;if(!i)return null;const r=this.store.props;let n="children";return r&&(n=r.children||"children"),i[n]===void 0&&(i[n]=null),t&&!i[n]&&(i[n]=[]),i[n]}updateChildren(){const t=this.getChildren()||[],i=this.childNodes.map(a=>a.data),r={},n=[];t.forEach((a,s)=>{const o=a[ev];!!o&&i.findIndex(c=>c[ev]===o)>=0?r[o]={index:s,data:a}:n.push({index:s,data:a})}),this.store.lazy||i.forEach(a=>{r[a[ev]]||this.removeChildByData(a)}),n.forEach(({index:a,data:s})=>{this.insertChild({data:s},a)}),this.updateLeafState()}loadData(t,i={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(i).length)){this.loading=!0;const r=a=>{this.childNodes=[],this.doCreateChildren(a,i),this.loaded=!0,this.loading=!1,this.updateLeafState(),t&&t.call(this,a)},n=()=>{this.loading=!1};this.store.load(this,r,n)}else t&&t.call(this)}eachNode(t){const i=[this];for(;i.length;){const r=i.shift();i.unshift(...r.childNodes),t(r)}}reInitChecked(){this.store.checkStrictly||mg(this)}}var f5=Yg;class cct{constructor(t){this.currentNode=null,this.currentNodeKey=null;for(const i in t)Ma(t,i)&&(this[i]=t[i]);this.nodesMap={}}initialize(){if(this.root=new f5({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const t=this.load;t(this.root,i=>{this.root.doCreateChildren(i),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(t){const i=this.filterNodeMethod,r=this.lazy,n=function(a){const s=a.root?a.root.childNodes:a.childNodes;if(s.forEach(o=>{o.visible=i.call(o,t,o.data,o),n(o)}),!a.visible&&s.length){let o=!0;o=!s.some(l=>l.visible),a.root?a.root.visible=o===!1:a.visible=o===!1}t&&a.visible&&!a.isLeaf&&(!r||a.loaded)&&a.expand()};n(this)}setData(t){t!==this.root.data?(this.nodesMap={},this.root.setData(t),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey)):this.root.updateChildren()}getNode(t){if(t instanceof f5)return t;const i=Ri(t)?$8(this.key,t):t;return this.nodesMap[i]||null}insertBefore(t,i){const r=this.getNode(i);r.parent.insertBefore({data:t},r)}insertAfter(t,i){const r=this.getNode(i);r.parent.insertAfter({data:t},r)}remove(t){const i=this.getNode(t);i&&i.parent&&(i===this.currentNode&&(this.currentNode=null),i.parent.removeChild(i))}append(t,i){const r=Qf(i)?this.root:this.getNode(i);r&&r.insertChild({data:t})}_initDefaultCheckedNodes(){const t=this.defaultCheckedKeys||[],i=this.nodesMap;t.forEach(r=>{const n=i[r];n&&n.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(t){(this.defaultCheckedKeys||[]).includes(t.key)&&t.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(t){t!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=t,this._initDefaultCheckedNodes())}registerNode(t){const i=this.key;!t||!t.data||(i?t.key!==void 0&&(this.nodesMap[t.key]=t):this.nodesMap[t.id]=t)}deregisterNode(t){!this.key||!t||!t.data||(t.childNodes.forEach(r=>{this.deregisterNode(r)}),delete this.nodesMap[t.key])}getCheckedNodes(t=!1,i=!1){const r=[],n=function(a){(a.root?a.root.childNodes:a.childNodes).forEach(o=>{(o.checked||i&&o.indeterminate)&&(!t||t&&o.isLeaf)&&r.push(o.data),n(o)})};return n(this),r}getCheckedKeys(t=!1){return this.getCheckedNodes(t).map(i=>(i||{})[this.key])}getHalfCheckedNodes(){const t=[],i=function(r){(r.root?r.root.childNodes:r.childNodes).forEach(a=>{a.indeterminate&&t.push(a.data),i(a)})};return i(this),t}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(t=>(t||{})[this.key])}_getAllNodes(){const t=[],i=this.nodesMap;for(const r in i)Ma(i,r)&&t.push(i[r]);return t}updateChildren(t,i){const r=this.nodesMap[t];if(!r)return;const n=r.childNodes;for(let a=n.length-1;a>=0;a--){const s=n[a];this.remove(s.data)}for(let a=0,s=i.length;a<s;a++){const o=i[a];this.append(o,r.data)}}_setCheckedKeys(t,i=!1,r){const n=this._getAllNodes().sort((l,c)=>l.level-c.level),a=Object.create(null),s=Object.keys(r);n.forEach(l=>l.setChecked(!1,!1));const o=l=>{l.childNodes.forEach(c=>{var u;a[c.data[t]]=!0,(u=c.childNodes)!=null&&u.length&&o(c)})};for(let l=0,c=n.length;l<c;l++){const u=n[l],d=u.data[t].toString();if(!s.includes(d)){u.checked&&!a[d]&&u.setChecked(!1,!1);continue}if(u.childNodes.length&&o(u),u.isLeaf||this.checkStrictly){u.setChecked(!0,!1);continue}if(u.setChecked(!0,!0),i){u.setChecked(!1,!1);const f=function(p){p.childNodes.forEach(v=>{v.isLeaf||v.setChecked(!1,!1),f(v)})};f(u)}}}setCheckedNodes(t,i=!1){const r=this.key,n={};t.forEach(a=>{n[(a||{})[r]]=!0}),this._setCheckedKeys(r,i,n)}setCheckedKeys(t,i=!1){this.defaultCheckedKeys=t;const r=this.key,n={};t.forEach(a=>{n[a]=!0}),this._setCheckedKeys(r,i,n)}setDefaultExpandedKeys(t){t=t||[],this.defaultExpandedKeys=t,t.forEach(i=>{const r=this.getNode(i);r&&r.expand(null,this.autoExpandParent)})}setChecked(t,i,r){const n=this.getNode(t);n&&n.setChecked(!!i,r)}getCurrentNode(){return this.currentNode}setCurrentNode(t){const i=this.currentNode;i&&(i.isCurrent=!1),this.currentNode=t,this.currentNode.isCurrent=!0}setUserCurrentNode(t,i=!0){const r=t[this.key],n=this.nodesMap[r];this.setCurrentNode(n),i&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(t,i=!0){if(this.currentNodeKey=t,t==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const r=this.getNode(t);r&&(this.setCurrentNode(r),i&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const uct=ce({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const t=Ve("tree"),i=rt("NodeInstance"),r=rt("RootTree");return()=>{const n=e.node,{data:a,store:s}=n;return e.renderContent?e.renderContent(dt,{_self:i,node:n,data:a,store:s}):Ee(r.ctx.slots,"default",{node:n,data:a},()=>[dt("span",{class:t.be("node","label")},[n.label])])}}});var dct=Ze(uct,[["__file","tree-node-content.vue"]]);function QJ(e){const t=rt("TreeNodeMap",null),i={treeNodeExpand:r=>{e.node!==r&&e.node.collapse()},children:[]};return t&&t.children.push(i),Yt("TreeNodeMap",i),{broadcastExpanded:r=>{if(e.accordion)for(const n of i.children)n.treeNodeExpand(r)}}}const JJ=Symbol("dragEvents");function hct({props:e,ctx:t,el$:i,dropIndicator$:r,store:n}){const a=Ve("tree"),s=j({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return Yt(JJ,{treeNodeDragStart:({event:u,treeNode:d})=>{if(Wt(e.allowDrag)&&!e.allowDrag(d.node))return u.preventDefault(),!1;u.dataTransfer.effectAllowed="move";try{u.dataTransfer.setData("text/plain","")}catch{}s.value.draggingNode=d,t.emit("node-drag-start",d.node,u)},treeNodeDragOver:({event:u,treeNode:d})=>{const h=d,f=s.value.dropNode;f&&f.node.id!==h.node.id&&Wa(f.$el,a.is("drop-inner"));const p=s.value.draggingNode;if(!p||!h)return;let m=!0,v=!0,y=!0,x=!0;Wt(e.allowDrop)&&(m=e.allowDrop(p.node,h.node,"prev"),x=v=e.allowDrop(p.node,h.node,"inner"),y=e.allowDrop(p.node,h.node,"next")),u.dataTransfer.dropEffect=v||m||y?"move":"none",(m||v||y)&&(f==null?void 0:f.node.id)!==h.node.id&&(f&&t.emit("node-drag-leave",p.node,f.node,u),t.emit("node-drag-enter",p.node,h.node,u)),m||v||y?s.value.dropNode=h:s.value.dropNode=null,h.node.nextSibling===p.node&&(y=!1),h.node.previousSibling===p.node&&(m=!1),h.node.contains(p.node,!1)&&(v=!1),(p.node===h.node||p.node.contains(h.node))&&(m=!1,v=!1,y=!1);const b=h.$el.querySelector(`.${a.be("node","content")}`).getBoundingClientRect(),w=i.value.getBoundingClientRect();let S;const _=m?v?.25:y?.45:1:-1,E=y?v?.75:m?.55:0:1;let C=-9999;const A=u.clientY-b.top;A<b.height*_?S="before":A>b.height*E?S="after":v?S="inner":S="none";const M=h.$el.querySelector(`.${a.be("node","expand-icon")}`).getBoundingClientRect(),T=r.value;S==="before"?C=M.top-w.top:S==="after"&&(C=M.bottom-w.top),T.style.top=`${C}px`,T.style.left=`${M.right-w.left}px`,S==="inner"?Eo(h.$el,a.is("drop-inner")):Wa(h.$el,a.is("drop-inner")),s.value.showDropIndicator=S==="before"||S==="after",s.value.allowDrop=s.value.showDropIndicator||x,s.value.dropType=S,t.emit("node-drag-over",p.node,h.node,u)},treeNodeDragEnd:u=>{const{draggingNode:d,dropType:h,dropNode:f}=s.value;if(u.preventDefault(),u.dataTransfer&&(u.dataTransfer.dropEffect="move"),d&&f){const p={data:d.node.data};h!=="none"&&d.node.remove(),h==="before"?f.node.parent.insertBefore(p,f.node):h==="after"?f.node.parent.insertAfter(p,f.node):h==="inner"&&f.node.insertChild(p),h!=="none"&&(n.value.registerNode(p),n.value.key&&d.node.eachNode(m=>{var v;(v=n.value.nodesMap[m.data[n.value.key]])==null||v.setChecked(m.checked,!n.value.checkStrictly)})),Wa(f.$el,a.is("drop-inner")),t.emit("node-drag-end",d.node,f.node,h,u),h!=="none"&&t.emit("node-drop",d.node,f.node,h,u)}d&&!f&&t.emit("node-drag-end",d.node,null,h,u),s.value.showDropIndicator=!1,s.value.draggingNode=null,s.value.dropNode=null,s.value.allowDrop=!0}}),{dragState:s}}const fct=ce({name:"ElTreeNode",components:{ElCollapseTransition:e3,ElCheckbox:jo,NodeContent:dct,ElIcon:ut,Loading:_c},props:{node:{type:f5,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(e,t){const i=Ve("tree"),{broadcastExpanded:r}=QJ(e),n=rt("RootTree"),a=j(!1),s=j(!1),o=j(null),l=j(null),c=j(null),u=rt(JJ),d=Ut();Yt("NodeInstance",d),e.node.expanded&&(a.value=!0,s.value=!0);const h=n.props.props.children||"children";Ne(()=>{const A=e.node.data[h];return A&&[...A]},()=>{e.node.updateChildren()}),Ne(()=>e.node.indeterminate,A=>{m(e.node.checked,A)}),Ne(()=>e.node.checked,A=>{m(A,e.node.indeterminate)}),Ne(()=>e.node.childNodes.length,()=>e.node.reInitChecked()),Ne(()=>e.node.expanded,A=>{ft(()=>a.value=A),A&&(s.value=!0)});const f=A=>$8(n.props.nodeKey,A.data),p=A=>{const M=e.props.class;if(!M)return{};let T;if(Wt(M)){const{data:P}=A;T=M(P,A)}else T=M;return Et(T)?{[T]:!0}:T},m=(A,M)=>{(o.value!==A||l.value!==M)&&n.ctx.emit("check-change",e.node.data,A,M),o.value=A,l.value=M},v=A=>{d5(n.store,n.ctx.emit,()=>{var M;if((M=n==null?void 0:n.props)==null?void 0:M.nodeKey){const P=f(e.node);n.store.value.setCurrentNodeKey(P)}else n.store.value.setCurrentNode(e.node)}),n.currentNode.value=e.node,n.props.expandOnClickNode&&x(),n.props.checkOnClickNode&&!e.node.disabled&&b(null,{target:{checked:!e.node.checked}}),n.ctx.emit("node-click",e.node.data,e.node,d,A)},y=A=>{n.instance.vnode.props.onNodeContextmenu&&(A.stopPropagation(),A.preventDefault()),n.ctx.emit("node-contextmenu",A,e.node.data,e.node,d)},x=()=>{e.node.isLeaf||(a.value?(n.ctx.emit("node-collapse",e.node.data,e.node,d),e.node.collapse()):e.node.expand(()=>{t.emit("node-expand",e.node.data,e.node,d)}))},b=(A,M)=>{e.node.setChecked(M.target.checked,!n.props.checkStrictly),ft(()=>{const T=n.store.value;n.ctx.emit("check",e.node.data,{checkedNodes:T.getCheckedNodes(),checkedKeys:T.getCheckedKeys(),halfCheckedNodes:T.getHalfCheckedNodes(),halfCheckedKeys:T.getHalfCheckedKeys()})})};return{ns:i,node$:c,tree:n,expanded:a,childNodeRendered:s,oldChecked:o,oldIndeterminate:l,getNodeKey:f,getNodeClass:p,handleSelectChange:m,handleClick:v,handleContextMenu:y,handleExpandIconClick:x,handleCheckChange:b,handleChildNodeExpand:(A,M,T)=>{r(M),n.ctx.emit("node-expand",A,M,T)},handleDragStart:A=>{n.props.draggable&&u.treeNodeDragStart({event:A,treeNode:e})},handleDragOver:A=>{A.preventDefault(),n.props.draggable&&u.treeNodeDragOver({event:A,treeNode:{$el:c.value,node:e.node}})},handleDrop:A=>{A.preventDefault()},handleDragEnd:A=>{n.props.draggable&&u.treeNodeDragEnd(A)},CaretRight:bK}}});function pct(e,t,i,r,n,a){const s=Ht("el-icon"),o=Ht("el-checkbox"),l=Ht("loading"),c=Ht("node-content"),u=Ht("el-tree-node"),d=Ht("el-collapse-transition");return Nt((F(),K("div",{ref:"node$",class:U([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:xt(e.handleClick,["stop"]),onContextmenu:e.handleContextMenu,onDragstart:xt(e.handleDragStart,["stop"]),onDragover:xt(e.handleDragOver,["stop"]),onDragend:xt(e.handleDragEnd,["stop"]),onDrop:xt(e.handleDrop,["stop"])},[ie("div",{class:U(e.ns.be("node","content")),style:mt({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(F(),De(s,{key:0,class:U([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:xt(e.handleExpandIconClick,["stop"])},{default:ve(()=>[(F(),De(jt(e.tree.props.icon||e.CaretRight)))]),_:1},8,["class","onClick"])):Ae("v-if",!0),e.showCheckbox?(F(),De(o,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:xt(()=>{},["stop"]),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):Ae("v-if",!0),e.node.loading?(F(),De(s,{key:2,class:U([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:ve(()=>[ne(l)]),_:1},8,["class"])):Ae("v-if",!0),ne(c,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),ne(d,null,{default:ve(()=>[!e.renderAfterExpand||e.childNodeRendered?Nt((F(),K("div",{key:0,class:U(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded},[(F(!0),K(ht,null,Qt(e.node.childNodes,h=>(F(),De(u,{key:e.getNodeKey(h),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:h,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded"])),[[_i,e.expanded]]):Ae("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[_i,e.node.visible]])}var mct=Ze(fct,[["render",pct],["__file","tree-node.vue"]]);function vct({el$:e},t){const i=Ve("tree"),r=Wi([]),n=Wi([]);Lt(()=>{s()}),Tl(()=>{r.value=Array.from(e.value.querySelectorAll("[role=treeitem]")),n.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"))}),Ne(n,o=>{o.forEach(l=>{l.setAttribute("tabindex","-1")})}),Oi(e,"keydown",o=>{const l=o.target;if(!l.className.includes(i.b("node")))return;const c=o.code;r.value=Array.from(e.value.querySelectorAll(`.${i.is("focusable")}[role=treeitem]`));const u=r.value.indexOf(l);let d;if([at.up,at.down].includes(c)){if(o.preventDefault(),c===at.up){d=u===-1?0:u!==0?u-1:r.value.length-1;const f=d;for(;!t.value.getNode(r.value[d].dataset.key).canFocus;){if(d--,d===f){d=-1;break}d<0&&(d=r.value.length-1)}}else{d=u===-1?0:u<r.value.length-1?u+1:0;const f=d;for(;!t.value.getNode(r.value[d].dataset.key).canFocus;){if(d++,d===f){d=-1;break}d>=r.value.length&&(d=0)}}d!==-1&&r.value[d].focus()}[at.left,at.right].includes(c)&&(o.preventDefault(),l.click());const h=l.querySelector('[type="checkbox"]');[at.enter,at.numpadEnter,at.space].includes(c)&&h&&(o.preventDefault(),h.click())});const s=()=>{var o;r.value=Array.from(e.value.querySelectorAll(`.${i.is("focusable")}[role=treeitem]`)),n.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"));const l=e.value.querySelectorAll(`.${i.is("checked")}[role=treeitem]`);if(l.length){l[0].setAttribute("tabindex","0");return}(o=r.value[0])==null||o.setAttribute("tabindex","0")}}const gct=ce({name:"ElTree",components:{ElTreeNode:mct},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:zi}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,t){const{t:i}=di(),r=Ve("tree"),n=rt(m0,null),a=j(new cct({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));a.value.initialize();const s=j(a.value.root),o=j(null),l=j(null),c=j(null),{broadcastExpanded:u}=QJ(e),{dragState:d}=hct({props:e,ctx:t,el$:l,dropIndicator$:c,store:a});vct({el$:l},a);const h=O(()=>{const{childNodes:I}=s.value,B=n?n.hasFilteredOptions!==0:!1;return(!I||I.length===0||I.every(({visible:z})=>!z))&&!B});Ne(()=>e.currentNodeKey,I=>{a.value.setCurrentNodeKey(I)}),Ne(()=>e.defaultCheckedKeys,I=>{a.value.setDefaultCheckedKey(I)}),Ne(()=>e.defaultExpandedKeys,I=>{a.value.setDefaultExpandedKeys(I)}),Ne(()=>e.data,I=>{a.value.setData(I)},{deep:!0}),Ne(()=>e.checkStrictly,I=>{a.value.checkStrictly=I});const f=I=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");a.value.filter(I)},p=I=>$8(e.nodeKey,I.data),m=I=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const B=a.value.getNode(I);if(!B)return[];const z=[B.data];let V=B.parent;for(;V&&V!==s.value;)z.push(V.data),V=V.parent;return z.reverse()},v=(I,B)=>a.value.getCheckedNodes(I,B),y=I=>a.value.getCheckedKeys(I),x=()=>{const I=a.value.getCurrentNode();return I?I.data:null},b=()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const I=x();return I?I[e.nodeKey]:null},w=(I,B)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");a.value.setCheckedNodes(I,B)},S=(I,B)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");a.value.setCheckedKeys(I,B)},_=(I,B,z)=>{a.value.setChecked(I,B,z)},E=()=>a.value.getHalfCheckedNodes(),C=()=>a.value.getHalfCheckedKeys(),A=(I,B=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");d5(a,t.emit,()=>{u(I),a.value.setUserCurrentNode(I,B)})},M=(I,B=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");d5(a,t.emit,()=>{u(),a.value.setCurrentNodeKey(I,B)})},T=I=>a.value.getNode(I),P=I=>{a.value.remove(I)},D=(I,B)=>{a.value.append(I,B)},k=(I,B)=>{a.value.insertBefore(I,B)},L=(I,B)=>{a.value.insertAfter(I,B)},R=(I,B,z)=>{u(B),t.emit("node-expand",I,B,z)},N=(I,B)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");a.value.updateChildren(I,B)};return Yt("RootTree",{ctx:t,props:e,store:a,root:s,currentNode:o,instance:Ut()}),Yt(Ac,void 0),{ns:r,store:a,root:s,currentNode:o,dragState:d,el$:l,dropIndicator$:c,isEmpty:h,filter:f,getNodeKey:p,getNodePath:m,getCheckedNodes:v,getCheckedKeys:y,getCurrentNode:x,getCurrentKey:b,setCheckedNodes:w,setCheckedKeys:S,setChecked:_,getHalfCheckedNodes:E,getHalfCheckedKeys:C,setCurrentNode:A,setCurrentKey:M,t:i,getNode:T,remove:P,append:D,insertBefore:k,insertAfter:L,handleNodeExpand:R,updateKeyChildren:N}}});function yct(e,t,i,r,n,a){const s=Ht("el-tree-node");return F(),K("div",{ref:"el$",class:U([e.ns.b(),e.ns.is("dragging",!!e.dragState.draggingNode),e.ns.is("drop-not-allow",!e.dragState.allowDrop),e.ns.is("drop-inner",e.dragState.dropType==="inner"),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[(F(!0),K(ht,null,Qt(e.root.childNodes,o=>(F(),De(s,{key:e.getNodeKey(o),node:o,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),e.isEmpty?(F(),K("div",{key:0,class:U(e.ns.e("empty-block"))},[Ee(e.$slots,"empty",{},()=>{var o;return[ie("span",{class:U(e.ns.e("empty-text"))},Ye((o=e.emptyText)!=null?o:e.t("el.tree.emptyText")),3)]})],2)):Ae("v-if",!0),Nt(ie("div",{ref:"dropIndicator$",class:U(e.ns.e("drop-indicator"))},null,2),[[_i,e.dragState.showDropIndicator]])],2)}var bct=Ze(gct,[["render",yct],["__file","tree.vue"]]);const S_=Rt(bct),wct=(e,{attrs:t,emit:i},{select:r,tree:n,key:a})=>{const s=Ve("tree-select");return Ne(()=>e.data,()=>{e.filterable&&ft(()=>{var l,c;(c=n.value)==null||c.filter((l=r.value)==null?void 0:l.states.inputValue)})},{flush:"post"}),{...Co(Gn(e),Object.keys(tp.props)),...t,"onUpdate:modelValue":l=>i(Vt,l),valueKey:a,popperClass:O(()=>{const l=[s.e("popper")];return e.popperClass&&l.push(e.popperClass),l.join(" ")}),filterMethod:(l="")=>{var c;e.filterMethod?e.filterMethod(l):e.remoteMethod?e.remoteMethod(l):(c=n.value)==null||c.filter(l)}}},xct=ce({extends:p_,setup(e,t){const i=p_.setup(e,t);delete i.selectOptionClick;const r=Ut().proxy;return ft(()=>{i.select.states.cachedOptions.get(r.value)||i.select.onOptionCreate(r)}),Ne(()=>t.attrs.visible,n=>{i.states.visible=n},{immediate:!0}),i},methods:{selectOptionClick(){this.$el.parentElement.click()}}});var _ct=xct;function p5(e){return e||e===0}function Z8(e){return ct(e)&&e.length}function im(e){return ct(e)?e:p5(e)?[e]:[]}function E2(e,t,i,r,n){for(let a=0;a<e.length;a++){const s=e[a];if(t(s,a,e,n))return r?r(s,a,e,n):s;{const o=i(s);if(Z8(o)){const l=E2(o,t,i,r,s);if(l)return l}}}}function A2(e,t,i,r){for(let n=0;n<e.length;n++){const a=e[n];t(a,n,e,r);const s=i(a);Z8(s)&&A2(s,t,i,a)}}const Sct=(e,{attrs:t,slots:i,emit:r},{select:n,tree:a,key:s})=>{Ne(()=>e.modelValue,()=>{e.showCheckbox&&ft(()=>{const h=a.value;h&&!jn(h.getCheckedKeys(),im(e.modelValue))&&h.setCheckedKeys(im(e.modelValue))})},{immediate:!0,deep:!0});const o=O(()=>({value:s.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...e.props})),l=(h,f)=>{var p;const m=o.value[h];return Wt(m)?m(f,(p=a.value)==null?void 0:p.getNode(l("value",f))):f[m]},c=im(e.modelValue).map(h=>E2(e.data||[],f=>l("value",f)===h,f=>l("children",f),(f,p,m,v)=>v&&l("value",v))).filter(h=>p5(h)),u=O(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const h=[];return A2(e.data.concat(e.cacheData),f=>{const p=l("value",f);h.push({value:p,currentLabel:l("label",f),isDisabled:l("disabled",f)})},f=>l("children",f)),h}),d=()=>{var h;return(h=a.value)==null?void 0:h.getCheckedKeys().filter(f=>{var p;const m=(p=a.value)==null?void 0:p.getNode(f);return!mn(m)&&Zs(m.childNodes)})};return{...Co(Gn(e),Object.keys(S_.props)),...t,nodeKey:s,expandOnClickNode:O(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:O(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(c):c),renderContent:(h,{node:f,data:p,store:m})=>h(_ct,{value:l("value",p),label:l("label",p),disabled:l("disabled",p),visible:f.visible},e.renderContent?()=>e.renderContent(h,{node:f,data:p,store:m}):i.default?()=>i.default({node:f,data:p,store:m}):void 0),filterNodeMethod:(h,f,p)=>e.filterNodeMethod?e.filterNodeMethod(h,f,p):h?new RegExp(LI(h),"i").test(l("label",f)||""):!0,onNodeClick:(h,f,p)=>{var m,v,y,x;if((m=t.onNodeClick)==null||m.call(t,h,f,p),!(e.showCheckbox&&e.checkOnClickNode)){if(!e.showCheckbox&&(e.checkStrictly||f.isLeaf)){if(!l("disabled",h)){const b=(v=n.value)==null?void 0:v.states.options.get(l("value",h));(y=n.value)==null||y.handleOptionSelect(b)}}else e.expandOnClickNode&&p.proxy.handleExpandIconClick();(x=n.value)==null||x.focus()}},onCheck:(h,f)=>{var p;if(!e.showCheckbox)return;const m=l("value",h),v={};A2([a.value.store.root],w=>v[w.key]=w,w=>w.childNodes);const y=f.checkedKeys,x=e.multiple?im(e.modelValue).filter(w=>!(w in v)&&!y.includes(w)):[],b=x.concat(y);if(e.checkStrictly)r(Vt,e.multiple?b:b.includes(m)?m:void 0);else if(e.multiple){const w=d();r(Vt,x.concat(w))}else{const w=E2([h],E=>!Z8(l("children",E))&&!l("disabled",E),E=>l("children",E)),S=w?l("value",w):void 0,_=p5(e.modelValue)&&!!E2([h],E=>l("value",E)===e.modelValue,E=>l("children",E));r(Vt,S===e.modelValue||_?void 0:S)}ft(()=>{var w;const S=im(e.modelValue);a.value.setCheckedKeys(S),(w=t.onCheck)==null||w.call(t,h,{checkedKeys:a.value.getCheckedKeys(),checkedNodes:a.value.getCheckedNodes(),halfCheckedKeys:a.value.getHalfCheckedKeys(),halfCheckedNodes:a.value.getHalfCheckedNodes()})}),(p=n.value)==null||p.focus()},onNodeExpand:(h,f,p)=>{var m;(m=t.onNodeExpand)==null||m.call(t,h,f,p),ft(()=>{if(!e.checkStrictly&&e.lazy&&e.multiple&&f.checked){const v={},y=a.value.getCheckedKeys();A2([a.value.store.root],w=>v[w.key]=w,w=>w.childNodes);const x=im(e.modelValue).filter(w=>!(w in v)&&!y.includes(w)),b=d();r(Vt,x.concat(b))}})},cacheOptions:u}};var Cct=ce({props:{data:{type:Array,default:()=>[]}},setup(e){const t=rt(m0);return Ne(()=>e.data,()=>{var i;e.data.forEach(n=>{t.states.cachedOptions.has(n.value)||t.states.cachedOptions.set(n.value,n)});const r=((i=t.selectRef)==null?void 0:i.querySelectorAll("input"))||[];si&&!Array.from(r).includes(document.activeElement)&&t.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const Ect=ce({name:"ElTreeSelect",inheritAttrs:!1,props:{...tp.props,...S_.props,cacheData:{type:Array,default:()=>[]}},setup(e,t){const{slots:i,expose:r}=t,n=j(),a=j(),s=O(()=>e.nodeKey||e.valueKey||"value"),o=wct(e,t,{select:n,tree:a,key:s}),{cacheOptions:l,...c}=Sct(e,t,{select:n,tree:a,key:s}),u=bi({});return r(u),Lt(()=>{Object.assign(u,{...Co(a.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...Co(n.value,["focus","blur"])})}),()=>dt(tp,bi({...o,ref:d=>n.value=d}),{...i,default:()=>[dt(Cct,{data:l.value}),dt(S_,bi({...c,ref:d=>a.value=d}))]})}});var Act=Ze(Ect,[["__file","tree-select.vue"]]);const Mct=Rt(Act),q8=Symbol(),Tct={key:-1,level:-1,data:{}};var vg=(e=>(e.KEY="id",e.LABEL="label",e.CHILDREN="children",e.DISABLED="disabled",e))(vg||{}),m5=(e=>(e.ADD="add",e.DELETE="delete",e))(m5||{});const eee={type:Number,default:26},Pct=je({data:{type:be(Array),default:()=>Er([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:be(Object),default:()=>Er({children:"children",label:"label",disabled:"disabled",value:"id"})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:be(Array),default:()=>Er([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:be(Array),default:()=>Er([])},indent:{type:Number,default:16},itemSize:eee,icon:{type:zi},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:be([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:be(Function)},perfMode:{type:Boolean,default:!0}}),Dct=je({node:{type:be(Object),default:()=>Er(Tct)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1},itemSize:eee}),Ict=je({node:{type:be(Object),required:!0}}),tee="node-click",iee="node-drop",ree="node-expand",nee="node-collapse",aee="current-change",see="check",oee="check-change",lee="node-contextmenu",Oct={[tee]:(e,t,i)=>e&&t&&i,[iee]:(e,t,i)=>e&&t&&i,[ree]:(e,t)=>e&&t,[nee]:(e,t)=>e&&t,[aee]:(e,t)=>e&&t,[see]:(e,t)=>e&&t,[oee]:(e,t)=>e&&Gi(t),[lee]:(e,t,i)=>e&&t&&i},Rct={click:(e,t)=>!!(e&&t),drop:(e,t)=>!!(e&&t),toggle:e=>!!e,check:(e,t)=>e&&Gi(t)};function kct(e,t){const i=j(new Set),r=j(new Set),{emit:n}=Ut();Ne([()=>t.value,()=>e.defaultCheckedKeys],()=>ft(()=>{x(e.defaultCheckedKeys)}),{immediate:!0});const a=()=>{if(!t.value||!e.showCheckbox||e.checkStrictly)return;const{levelTreeNodeMap:b,maxLevel:w}=t.value,S=i.value,_=new Set;for(let E=w-1;E>=1;--E){const C=b.get(E);C&&C.forEach(A=>{const M=A.children;if(M){let T=!0,P=!1;for(const D of M){const k=D.key;if(S.has(k))P=!0;else if(_.has(k)){T=!1,P=!0;break}else T=!1}T?S.add(A.key):P?(_.add(A.key),S.delete(A.key)):(S.delete(A.key),_.delete(A.key))}})}r.value=_},s=b=>i.value.has(b.key),o=b=>r.value.has(b.key),l=(b,w,S=!0)=>{const _=i.value,E=(C,A)=>{_[A?m5.ADD:m5.DELETE](C.key);const M=C.children;!e.checkStrictly&&M&&M.forEach(T=>{T.disabled||E(T,A)})};E(b,w),a(),S&&c(b,w)},c=(b,w)=>{const{checkedNodes:S,checkedKeys:_}=p(),{halfCheckedNodes:E,halfCheckedKeys:C}=m();n(see,b.data,{checkedKeys:_,checkedNodes:S,halfCheckedKeys:C,halfCheckedNodes:E}),n(oee,b.data,w)};function u(b=!1){return p(b).checkedKeys}function d(b=!1){return p(b).checkedNodes}function h(){return m().halfCheckedKeys}function f(){return m().halfCheckedNodes}function p(b=!1){const w=[],S=[];if(t!=null&&t.value&&e.showCheckbox){const{treeNodeMap:_}=t.value;i.value.forEach(E=>{const C=_.get(E);C&&(!b||b&&C.isLeaf)&&(S.push(E),w.push(C.data))})}return{checkedKeys:S,checkedNodes:w}}function m(){const b=[],w=[];if(t!=null&&t.value&&e.showCheckbox){const{treeNodeMap:S}=t.value;r.value.forEach(_=>{const E=S.get(_);E&&(w.push(_),b.push(E.data))})}return{halfCheckedNodes:b,halfCheckedKeys:w}}function v(b){i.value.clear(),r.value.clear(),ft(()=>{x(b)})}function y(b,w){if(t!=null&&t.value&&e.showCheckbox){const S=t.value.treeNodeMap.get(b);S&&l(S,w,!1)}}function x(b){if(t!=null&&t.value){const{treeNodeMap:w}=t.value;if(e.showCheckbox&&w&&b)for(const S of b){const _=w.get(S);_&&!s(_)&&l(_,!0,!1)}}}return{updateCheckedKeys:a,toggleCheckbox:l,isChecked:s,isIndeterminate:o,getCheckedKeys:u,getCheckedNodes:d,getHalfCheckedKeys:h,getHalfCheckedNodes:f,setChecked:y,setCheckedKeys:v}}function Lct(e,t){const i=j(new Set([])),r=j(new Set([])),n=O(()=>Wt(e.filterMethod));function a(o){var l;if(!n.value)return;const c=new Set,u=r.value,d=i.value,h=[],f=((l=t.value)==null?void 0:l.treeNodes)||[],p=e.filterMethod;d.clear();function m(v){v.forEach(y=>{h.push(y),p!=null&&p(o,y.data)?h.forEach(b=>{c.add(b.key)}):y.isLeaf&&d.add(y.key);const x=y.children;if(x&&m(x),!y.isLeaf){if(!c.has(y.key))d.add(y.key);else if(x){let b=!0;for(const w of x)if(!d.has(w.key)){b=!1;break}b?u.add(y.key):u.delete(y.key)}}h.pop()})}return m(f),c}function s(o){return r.value.has(o.key)}return{hiddenExpandIconKeySet:r,hiddenNodeKeySet:i,doFilter:a,isForceHiddenExpandIcon:s}}function Bct(e,t){const i=j(new Set(e.defaultExpandedKeys)),r=j(),n=Wi(),a=j();Ne(()=>e.currentNodeKey,le=>{r.value=le},{immediate:!0}),Ne(()=>e.data,le=>{te(le)},{immediate:!0});const{isIndeterminate:s,isChecked:o,toggleCheckbox:l,getCheckedKeys:c,getCheckedNodes:u,getHalfCheckedKeys:d,getHalfCheckedNodes:h,setChecked:f,setCheckedKeys:p}=kct(e,n),{doFilter:m,hiddenNodeKeySet:v,isForceHiddenExpandIcon:y}=Lct(e,n),x=O(()=>{var le;return((le=e.props)==null?void 0:le.value)||vg.KEY}),b=O(()=>{var le;return((le=e.props)==null?void 0:le.children)||vg.CHILDREN}),w=O(()=>{var le;return((le=e.props)==null?void 0:le.disabled)||vg.DISABLED}),S=O(()=>{var le;return((le=e.props)==null?void 0:le.label)||vg.LABEL}),_=O(()=>{var le;const Z=i.value,oe=v.value,ge=[],Ie=((le=n.value)==null?void 0:le.treeNodes)||[],we=[];for(let xe=Ie.length-1;xe>=0;--xe)we.push(Ie[xe]);for(;we.length;){const xe=we.pop();if(!oe.has(xe.key)&&(ge.push(xe),xe.children&&Z.has(xe.key)))for(let Se=xe.children.length-1;Se>=0;--Se)we.push(xe.children[Se])}return ge}),E=O(()=>_.value.length>0);function C(le){const Z=new Map,oe=new Map;let ge=1;function Ie(xe,Se=1,Le=void 0){var Be;const ee=[];for(const X of xe){const ue=T(X),Oe={level:Se,key:ue,data:X};Oe.label=D(X),Oe.parent=Le;const Y=M(X);Oe.disabled=P(X),Oe.isLeaf=!Y||Y.length===0,Y&&Y.length&&(Oe.children=Ie(Y,Se+1,Oe)),ee.push(Oe),Z.set(ue,Oe),oe.has(Se)||oe.set(Se,[]),(Be=oe.get(Se))==null||Be.push(Oe)}return Se>ge&&(ge=Se),ee}const we=Ie(le);return{treeNodeMap:Z,levelTreeNodeMap:oe,maxLevel:ge,treeNodes:we}}function A(le){const Z=m(le);Z&&(i.value=Z)}function M(le){return le[b.value]}function T(le){return le?le[x.value]:""}function P(le){return le[w.value]}function D(le){return le[S.value]}function k(le){i.value.has(le.key)?V(le):z(le)}function L(le){const Z=new Set,oe=n.value.treeNodeMap;le.forEach(ge=>{let Ie=oe.get(ge);for(;Ie&&!Z.has(Ie.key);)Z.add(Ie.key),Ie=Ie.parent}),i.value=Z}function R(le,Z){t(tee,le.data,le,Z),I(le),e.expandOnClickNode&&k(le),e.showCheckbox&&e.checkOnClickNode&&!le.disabled&&l(le,!o(le),!0)}function N(le,Z){t(iee,le.data,le,Z)}function I(le){q(le)||(r.value=le.key,t(aee,le.data,le))}function B(le,Z){l(le,Z)}function z(le){const Z=i.value;if(n.value&&e.accordion){const{treeNodeMap:oe}=n.value;Z.forEach(ge=>{const Ie=oe.get(ge);le&&le.level===(Ie==null?void 0:Ie.level)&&Z.delete(ge)})}Z.add(le.key),t(ree,le.data,le)}function V(le){i.value.delete(le.key),t(nee,le.data,le)}function W(le){return i.value.has(le.key)}function G(le){return!!le.disabled}function q(le){const Z=r.value;return Z!==void 0&&Z===le.key}function ae(){var le,Z;if(r.value)return(Z=(le=n.value)==null?void 0:le.treeNodeMap.get(r.value))==null?void 0:Z.data}function J(){return r.value}function $(le){r.value=le}function te(le){ft(()=>n.value=C(le))}function Q(le){var Z;const oe=Ri(le)?T(le):le;return(Z=n.value)==null?void 0:Z.treeNodeMap.get(oe)}function pe(le,Z="auto"){const oe=Q(le);oe&&a.value&&a.value.scrollToItem(_.value.indexOf(oe),Z)}function me(le){var Z;(Z=a.value)==null||Z.scrollTo(le)}return{tree:n,flattenTree:_,isNotEmpty:E,listRef:a,getKey:T,getChildren:M,toggleExpand:k,toggleCheckbox:l,isExpanded:W,isChecked:o,isIndeterminate:s,isDisabled:G,isCurrent:q,isForceHiddenExpandIcon:y,handleNodeClick:R,handleNodeDrop:N,handleNodeCheck:B,getCurrentNode:ae,getCurrentKey:J,setCurrentKey:$,getCheckedKeys:c,getCheckedNodes:u,getHalfCheckedKeys:d,getHalfCheckedNodes:h,setChecked:f,setCheckedKeys:p,filter:A,setData:te,getNode:Q,expandNode:z,collapseNode:V,setExpandedKeys:L,scrollToNode:pe,scrollTo:me}}var Nct=ce({name:"ElTreeNodeContent",props:Ict,setup(e){const t=rt(q8),i=Ve("tree");return()=>{const r=e.node,{data:n}=r;return t!=null&&t.ctx.slots.default?t.ctx.slots.default({node:r,data:n}):dt("span",{class:i.be("node","label")},[r==null?void 0:r.label])}}});const Fct=ce({name:"ElTreeNode"}),zct=ce({...Fct,props:Dct,emits:Rct,setup(e,{emit:t}){const i=e,r=rt(q8),n=Ve("tree"),a=O(()=>{var h;return(h=r==null?void 0:r.props.indent)!=null?h:16}),s=O(()=>{var h;return(h=r==null?void 0:r.props.icon)!=null?h:bK}),o=h=>{t("click",i.node,h)},l=h=>{t("drop",i.node,h)},c=()=>{t("toggle",i.node)},u=h=>{t("check",i.node,h)},d=h=>{var f,p,m,v;(m=(p=(f=r==null?void 0:r.instance)==null?void 0:f.vnode)==null?void 0:p.props)!=null&&m.onNodeContextmenu&&(h.stopPropagation(),h.preventDefault()),r==null||r.ctx.emit(lee,h,(v=i.node)==null?void 0:v.data,i.node)};return(h,f)=>{var p,m,v;return F(),K("div",{ref:"node$",class:U([g(n).b("node"),g(n).is("expanded",h.expanded),g(n).is("current",h.current),g(n).is("focusable",!h.disabled),g(n).is("checked",!h.disabled&&h.checked)]),role:"treeitem",tabindex:"-1","aria-expanded":h.expanded,"aria-disabled":h.disabled,"aria-checked":h.checked,"data-key":(p=h.node)==null?void 0:p.key,onClick:xt(o,["stop"]),onContextmenu:d,onDragover:xt(()=>{},["prevent"]),onDragenter:xt(()=>{},["prevent"]),onDrop:xt(l,["stop"])},[ie("div",{class:U(g(n).be("node","content")),style:mt({paddingLeft:`${(h.node.level-1)*g(a)}px`,height:h.itemSize+"px"})},[g(s)?(F(),De(g(ut),{key:0,class:U([g(n).is("leaf",!!((m=h.node)!=null&&m.isLeaf)),g(n).is("hidden",h.hiddenExpandIcon),{expanded:!((v=h.node)!=null&&v.isLeaf)&&h.expanded},g(n).be("node","expand-icon")]),onClick:xt(c,["stop"])},{default:ve(()=>[(F(),De(jt(g(s))))]),_:1},8,["class","onClick"])):Ae("v-if",!0),h.showCheckbox?(F(),De(g(jo),{key:1,"model-value":h.checked,indeterminate:h.indeterminate,disabled:h.disabled,onChange:u,onClick:xt(()=>{},["stop"])},null,8,["model-value","indeterminate","disabled","onClick"])):Ae("v-if",!0),ne(g(Nct),{node:h.node},null,8,["node"])],6)],42,["aria-expanded","aria-disabled","aria-checked","data-key","onClick","onDragover","onDragenter","onDrop"])}}});var Vct=Ze(zct,[["__file","tree-node.vue"]]);const Uct=ce({name:"ElTreeV2"}),Hct=ce({...Uct,props:Pct,emits:Oct,setup(e,{expose:t,emit:i}){const r=e,n=In(),a=O(()=>r.itemSize);Yt(q8,{ctx:{emit:i,slots:n},props:r,instance:Ut()}),Yt(Ac,void 0);const{t:s}=di(),o=Ve("tree"),{flattenTree:l,isNotEmpty:c,listRef:u,toggleExpand:d,isExpanded:h,isIndeterminate:f,isChecked:p,isDisabled:m,isCurrent:v,isForceHiddenExpandIcon:y,handleNodeClick:x,handleNodeDrop:b,handleNodeCheck:w,toggleCheckbox:S,getCurrentNode:_,getCurrentKey:E,setCurrentKey:C,getCheckedKeys:A,getCheckedNodes:M,getHalfCheckedKeys:T,getHalfCheckedNodes:P,setChecked:D,setCheckedKeys:k,filter:L,setData:R,getNode:N,expandNode:I,collapseNode:B,setExpandedKeys:z,scrollToNode:V,scrollTo:W}=Bct(r,i);return t({toggleCheckbox:S,getCurrentNode:_,getCurrentKey:E,setCurrentKey:C,getCheckedKeys:A,getCheckedNodes:M,getHalfCheckedKeys:T,getHalfCheckedNodes:P,setChecked:D,setCheckedKeys:k,filter:L,setData:R,getNode:N,expandNode:I,collapseNode:B,setExpandedKeys:z,scrollToNode:V,scrollTo:W}),(G,q)=>{var ae;return F(),K("div",{class:U([g(o).b(),{[g(o).m("highlight-current")]:G.highlightCurrent}]),role:"tree"},[g(c)?(F(),De(g(dJ),{key:0,ref_key:"listRef",ref:u,"class-name":g(o).b("virtual-list"),data:g(l),total:g(l).length,height:G.height,"item-size":g(a),"perf-mode":G.perfMode},{default:ve(({data:J,index:$,style:te})=>[(F(),De(Vct,{key:J[$].key,style:mt(te),node:J[$],expanded:g(h)(J[$]),"show-checkbox":G.showCheckbox,checked:g(p)(J[$]),indeterminate:g(f)(J[$]),"item-size":g(a),disabled:g(m)(J[$]),current:g(v)(J[$]),"hidden-expand-icon":g(y)(J[$]),onClick:g(x),onToggle:g(d),onCheck:g(w),onDrop:g(b)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck","onDrop"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode"])):(F(),K("div",{key:1,class:U(g(o).e("empty-block"))},[ie("span",{class:U(g(o).e("empty-text"))},Ye((ae=G.emptyText)!=null?ae:g(s)("el.tree.emptyText")),3)],2))],2)}}});var jct=Ze(Hct,[["__file","tree.vue"]]);const Wct=Rt(jct),cee=Symbol("uploadContextKey"),Gct="ElUpload";class $ct extends Error{constructor(t,i,r,n){super(t),this.name="UploadAjaxError",this.status=i,this.method=r,this.url=n}}function Xz(e,t,i){let r;return i.response?r=`${i.response.error||i.response}`:i.responseText?r=`${i.responseText}`:r=`fail to ${t.method} ${e} ${i.status}`,new $ct(r,i.status,t.method,e)}function Zct(e){const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}const qct=e=>{typeof XMLHttpRequest>"u"&&bn(Gct,"XMLHttpRequest is undefined");const t=new XMLHttpRequest,i=e.action;t.upload&&t.upload.addEventListener("progress",a=>{const s=a;s.percent=a.total>0?a.loaded/a.total*100:0,e.onProgress(s)});const r=new FormData;if(e.data)for(const[a,s]of Object.entries(e.data))ct(s)&&s.length?r.append(a,...s):r.append(a,s);r.append(e.filename,e.file,e.file.name),t.addEventListener("error",()=>{e.onError(Xz(i,e,t))}),t.addEventListener("load",()=>{if(t.status<200||t.status>=300)return e.onError(Xz(i,e,t));e.onSuccess(Zct(t))}),t.open(e.method,i,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const n=e.headers||{};if(n instanceof Headers)n.forEach((a,s)=>t.setRequestHeader(s,a));else for(const[a,s]of Object.entries(n))mn(s)||t.setRequestHeader(a,String(s));return t.send(r),t},uee=["text","picture","picture-card"];let Yct=1;const v5=()=>Date.now()+Yct++,dee=je({action:{type:String,default:"#"},headers:{type:be(Object)},method:{type:String,default:"post"},data:{type:be([Object,Function,Promise]),default:()=>Er({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:be(Array),default:()=>Er([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:uee,default:"text"},httpRequest:{type:be(Function),default:qct},disabled:Boolean,limit:Number}),Kct=je({...dee,beforeUpload:{type:be(Function),default:Sr},beforeRemove:{type:be(Function)},onRemove:{type:be(Function),default:Sr},onChange:{type:be(Function),default:Sr},onPreview:{type:be(Function),default:Sr},onSuccess:{type:be(Function),default:Sr},onProgress:{type:be(Function),default:Sr},onError:{type:be(Function),default:Sr},onExceed:{type:be(Function),default:Sr},crossorigin:{type:be(String)}}),Xct=je({files:{type:be(Array),default:()=>Er([])},disabled:{type:Boolean,default:!1},handlePreview:{type:be(Function),default:Sr},listType:{type:String,values:uee,default:"text"},crossorigin:{type:be(String)}}),Qct={remove:e=>!!e},Jct=ce({name:"ElUploadList"}),eut=ce({...Jct,props:Xct,emits:Qct,setup(e,{emit:t}){const i=e,{t:r}=di(),n=Ve("upload"),a=Ve("icon"),s=Ve("list"),o=qa(),l=j(!1),c=O(()=>[n.b("list"),n.bm("list",i.listType),n.is("disabled",i.disabled)]),u=d=>{t("remove",d)};return(d,h)=>(F(),De(NU,{tag:"ul",class:U(g(c)),name:g(s).b()},{default:ve(()=>[(F(!0),K(ht,null,Qt(d.files,(f,p)=>(F(),K("li",{key:f.uid||f.name,class:U([g(n).be("list","item"),g(n).is(f.status),{focusing:l.value}]),tabindex:"0",onKeydown:Hi(m=>!g(o)&&u(f),["delete"]),onFocus:m=>l.value=!0,onBlur:m=>l.value=!1,onClick:m=>l.value=!1},[Ee(d.$slots,"default",{file:f,index:p},()=>[d.listType==="picture"||f.status!=="uploading"&&d.listType==="picture-card"?(F(),K("img",{key:0,class:U(g(n).be("list","item-thumbnail")),src:f.url,crossorigin:d.crossorigin,alt:""},null,10,["src","crossorigin"])):Ae("v-if",!0),f.status==="uploading"||d.listType!=="picture-card"?(F(),K("div",{key:1,class:U(g(n).be("list","item-info"))},[ie("a",{class:U(g(n).be("list","item-name")),onClick:xt(m=>d.handlePreview(f),["prevent"])},[ne(g(ut),{class:U(g(a).m("document"))},{default:ve(()=>[ne(g(KHe))]),_:1},8,["class"]),ie("span",{class:U(g(n).be("list","item-file-name")),title:f.name},Ye(f.name),11,["title"])],10,["onClick"]),f.status==="uploading"?(F(),De(g(iJ),{key:0,type:d.listType==="picture-card"?"circle":"line","stroke-width":d.listType==="picture-card"?6:2,percentage:Number(f.percentage),style:mt(d.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):Ae("v-if",!0)],2)):Ae("v-if",!0),ie("label",{class:U(g(n).be("list","item-status-label"))},[d.listType==="text"?(F(),De(g(ut),{key:0,class:U([g(a).m("upload-success"),g(a).m("circle-check")])},{default:ve(()=>[ne(g(zI))]),_:1},8,["class"])):["picture-card","picture"].includes(d.listType)?(F(),De(g(ut),{key:1,class:U([g(a).m("upload-success"),g(a).m("check")])},{default:ve(()=>[ne(g(Py))]),_:1},8,["class"])):Ae("v-if",!0)],2),g(o)?Ae("v-if",!0):(F(),De(g(ut),{key:2,class:U(g(a).m("close")),onClick:m=>u(f)},{default:ve(()=>[ne(g(Ml))]),_:2},1032,["class","onClick"])),Ae(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),Ae(" This is a bug which needs to be fixed "),Ae(" TODO: Fix the incorrect navigation interaction "),g(o)?Ae("v-if",!0):(F(),K("i",{key:3,class:U(g(a).m("close-tip"))},Ye(g(r)("el.upload.deleteTip")),3)),d.listType==="picture-card"?(F(),K("span",{key:4,class:U(g(n).be("list","item-actions"))},[ie("span",{class:U(g(n).be("list","item-preview")),onClick:m=>d.handlePreview(f)},[ne(g(ut),{class:U(g(a).m("zoom-in"))},{default:ve(()=>[ne(g(SK))]),_:1},8,["class"])],10,["onClick"]),g(o)?Ae("v-if",!0):(F(),K("span",{key:0,class:U(g(n).be("list","item-delete")),onClick:m=>u(f)},[ne(g(ut),{class:U(g(a).m("delete"))},{default:ve(()=>[ne(g(qHe))]),_:1},8,["class"])],10,["onClick"]))],2)):Ae("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),Ee(d.$slots,"append")]),_:3},8,["class","name"]))}});var Qz=Ze(eut,[["__file","upload-list.vue"]]);const tut=je({disabled:{type:Boolean,default:!1}}),iut={file:e=>ct(e)},hee="ElUploadDrag",rut=ce({name:hee}),nut=ce({...rut,props:tut,emits:iut,setup(e,{emit:t}){rt(cee)||bn(hee,"usage: <el-upload><el-upload-dragger /></el-upload>");const r=Ve("upload"),n=j(!1),a=qa(),s=l=>{if(a.value)return;n.value=!1,l.stopPropagation();const c=Array.from(l.dataTransfer.files);t("file",c)},o=()=>{a.value||(n.value=!0)};return(l,c)=>(F(),K("div",{class:U([g(r).b("dragger"),g(r).is("dragover",n.value)]),onDrop:xt(s,["prevent"]),onDragover:xt(o,["prevent"]),onDragleave:xt(u=>n.value=!1,["prevent"])},[Ee(l.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var aut=Ze(nut,[["__file","upload-dragger.vue"]]);const sut=je({...dee,beforeUpload:{type:be(Function),default:Sr},onRemove:{type:be(Function),default:Sr},onStart:{type:be(Function),default:Sr},onSuccess:{type:be(Function),default:Sr},onProgress:{type:be(Function),default:Sr},onError:{type:be(Function),default:Sr},onExceed:{type:be(Function),default:Sr}}),out=ce({name:"ElUploadContent",inheritAttrs:!1}),lut=ce({...out,props:sut,setup(e,{expose:t}){const i=e,r=Ve("upload"),n=qa(),a=Wi({}),s=Wi(),o=m=>{if(m.length===0)return;const{autoUpload:v,limit:y,fileList:x,multiple:b,onStart:w,onExceed:S}=i;if(y&&x.length+m.length>y){S(m,x);return}b||(m=m.slice(0,1));for(const _ of m){const E=_;E.uid=v5(),w(E),v&&l(E)}},l=async m=>{if(s.value.value="",!i.beforeUpload)return u(m);let v,y={};try{const b=i.data,w=i.beforeUpload(m);y=aT(i.data)?O1(i.data):i.data,v=await w,aT(i.data)&&jn(b,y)&&(y=O1(i.data))}catch{v=!1}if(v===!1){i.onRemove(m);return}let x=m;v instanceof Blob&&(v instanceof File?x=v:x=new File([v],m.name,{type:m.type})),u(Object.assign(x,{uid:m.uid}),y)},c=async(m,v)=>Wt(m)?m(v):m,u=async(m,v)=>{const{headers:y,data:x,method:b,withCredentials:w,name:S,action:_,onProgress:E,onSuccess:C,onError:A,httpRequest:M}=i;try{v=await c(v??x,m)}catch{i.onRemove(m);return}const{uid:T}=m,P={headers:y||{},withCredentials:w,file:m,data:v,method:b,filename:S,action:_,onProgress:k=>{E(k,m)},onSuccess:k=>{C(k,m),delete a.value[T]},onError:k=>{A(k,m),delete a.value[T]}},D=M(P);a.value[T]=D,D instanceof Promise&&D.then(P.onSuccess,P.onError)},d=m=>{const v=m.target.files;v&&o(Array.from(v))},h=()=>{n.value||(s.value.value="",s.value.click())},f=()=>{h()};return t({abort:m=>{_He(a.value).filter(m?([y])=>String(m.uid)===y:()=>!0).forEach(([y,x])=>{x instanceof XMLHttpRequest&&x.abort(),delete a.value[y]})},upload:l}),(m,v)=>(F(),K("div",{class:U([g(r).b(),g(r).m(m.listType),g(r).is("drag",m.drag),g(r).is("disabled",g(n))]),tabindex:g(n)?"-1":"0",onClick:h,onKeydown:Hi(xt(f,["self"]),["enter","space"])},[m.drag?(F(),De(aut,{key:0,disabled:g(n),onFile:o},{default:ve(()=>[Ee(m.$slots,"default")]),_:3},8,["disabled"])):Ee(m.$slots,"default",{key:1}),ie("input",{ref_key:"inputRef",ref:s,class:U(g(r).e("input")),name:m.name,disabled:g(n),multiple:m.multiple,accept:m.accept,type:"file",onChange:d,onClick:xt(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var Jz=Ze(lut,[["__file","upload-content.vue"]]);const eV="ElUpload",tV=e=>{var t;(t=e.url)!=null&&t.startsWith("blob:")&&URL.revokeObjectURL(e.url)},cut=(e,t)=>{const i=$Z(e,"fileList",void 0,{passive:!0}),r=f=>i.value.find(p=>p.uid===f.uid);function n(f){var p;(p=t.value)==null||p.abort(f)}function a(f=["ready","uploading","success","fail"]){i.value=i.value.filter(p=>!f.includes(p.status))}function s(f){i.value=i.value.filter(p=>p!==f)}const o=(f,p)=>{const m=r(p);m&&(console.error(f),m.status="fail",s(m),e.onError(f,m,i.value),e.onChange(m,i.value))},l=(f,p)=>{const m=r(p);m&&(e.onProgress(f,m,i.value),m.status="uploading",m.percentage=Math.round(f.percent))},c=(f,p)=>{const m=r(p);m&&(m.status="success",m.response=f,e.onSuccess(f,m,i.value),e.onChange(m,i.value))},u=f=>{mn(f.uid)&&(f.uid=v5());const p={name:f.name,percentage:0,status:"ready",size:f.size,raw:f,uid:f.uid};if(e.listType==="picture-card"||e.listType==="picture")try{p.url=URL.createObjectURL(f)}catch(m){m.message,e.onError(m,p,i.value)}i.value=[...i.value,p],e.onChange(p,i.value)},d=async f=>{const p=f instanceof File?r(f):f;p||bn(eV,"file to be removed not found");const m=v=>{n(v),s(v),e.onRemove(v,i.value),tV(v)};e.beforeRemove?await e.beforeRemove(p,i.value)!==!1&&m(p):m(p)};function h(){i.value.filter(({status:f})=>f==="ready").forEach(({raw:f})=>{var p;return f&&((p=t.value)==null?void 0:p.upload(f))})}return Ne(()=>e.listType,f=>{f!=="picture-card"&&f!=="picture"||(i.value=i.value.map(p=>{const{raw:m,url:v}=p;if(!v&&m)try{p.url=URL.createObjectURL(m)}catch(y){e.onError(y,p,i.value)}return p}))}),Ne(i,f=>{for(const p of f)p.uid||(p.uid=v5()),p.status||(p.status="success")},{immediate:!0,deep:!0}),{uploadFiles:i,abort:n,clearFiles:a,handleError:o,handleProgress:l,handleStart:u,handleSuccess:c,handleRemove:d,submit:h,revokeFileObjectURL:tV}},uut=ce({name:"ElUpload"}),dut=ce({...uut,props:Kct,setup(e,{expose:t}){const i=e,r=qa(),n=Wi(),{abort:a,submit:s,clearFiles:o,uploadFiles:l,handleStart:c,handleError:u,handleRemove:d,handleSuccess:h,handleProgress:f,revokeFileObjectURL:p}=cut(i,n),m=O(()=>i.listType==="picture-card"),v=O(()=>({...i,fileList:l.value,onStart:c,onProgress:f,onSuccess:h,onError:u,onRemove:d}));return Bi(()=>{l.value.forEach(p)}),Yt(cee,{accept:Di(i,"accept")}),t({abort:a,submit:s,clearFiles:o,handleStart:c,handleRemove:d}),(y,x)=>(F(),K("div",null,[g(m)&&y.showFileList?(F(),De(Qz,{key:0,disabled:g(r),"list-type":y.listType,files:g(l),crossorigin:y.crossorigin,"handle-preview":y.onPreview,onRemove:g(d)},Lo({append:ve(()=>[ne(Jz,$t({ref_key:"uploadRef",ref:n},g(v)),{default:ve(()=>[y.$slots.trigger?Ee(y.$slots,"trigger",{key:0}):Ae("v-if",!0),!y.$slots.trigger&&y.$slots.default?Ee(y.$slots,"default",{key:1}):Ae("v-if",!0)]),_:3},16)]),_:2},[y.$slots.file?{name:"default",fn:ve(({file:b,index:w})=>[Ee(y.$slots,"file",{file:b,index:w})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):Ae("v-if",!0),!g(m)||g(m)&&!y.showFileList?(F(),De(Jz,$t({key:1,ref_key:"uploadRef",ref:n},g(v)),{default:ve(()=>[y.$slots.trigger?Ee(y.$slots,"trigger",{key:0}):Ae("v-if",!0),!y.$slots.trigger&&y.$slots.default?Ee(y.$slots,"default",{key:1}):Ae("v-if",!0)]),_:3},16)):Ae("v-if",!0),y.$slots.trigger?Ee(y.$slots,"default",{key:2}):Ae("v-if",!0),Ee(y.$slots,"tip"),!g(m)&&y.showFileList?(F(),De(Qz,{key:3,disabled:g(r),"list-type":y.listType,files:g(l),crossorigin:y.crossorigin,"handle-preview":y.onPreview,onRemove:g(d)},Lo({_:2},[y.$slots.file?{name:"default",fn:ve(({file:b,index:w})=>[Ee(y.$slots,"file",{file:b,index:w})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):Ae("v-if",!0)]))}});var hut=Ze(dut,[["__file","upload.vue"]]);const fut=Rt(hut),put=je({zIndex:{type:Number,default:9},rotate:{type:Number,default:-22},width:Number,height:Number,image:String,content:{type:be([String,Array]),default:"Element Plus"},font:{type:be(Object)},gap:{type:be(Array),default:()=>[100,100]},offset:{type:be(Array)}});function mut(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function vut(e){return Object.keys(e).map(t=>`${mut(t)}: ${e[t]};`).join(" ")}function gut(){return window.devicePixelRatio||1}const yut=(e,t)=>{let i=!1;return e.removedNodes.length&&t&&(i=Array.from(e.removedNodes).includes(t)),e.type==="attributes"&&e.target===t&&(i=!0),i},fee=3;function mE(e,t,i=1){const r=document.createElement("canvas"),n=r.getContext("2d"),a=e*i,s=t*i;return r.setAttribute("width",`${a}px`),r.setAttribute("height",`${s}px`),n.save(),[n,r,a,s]}function but(){function e(t,i,r,n,a,s,o,l){const[c,u,d,h]=mE(n,a,r);if(t instanceof HTMLImageElement)c.drawImage(t,0,0,d,h);else{const{color:V,fontSize:W,fontStyle:G,fontWeight:q,fontFamily:ae,textAlign:J,textBaseline:$}=s,te=Number(W)*r;c.font=`${G} normal ${q} ${te}px/${a}px ${ae}`,c.fillStyle=V,c.textAlign=J,c.textBaseline=$;const Q=ct(t)?t:[t];Q==null||Q.forEach((pe,me)=>{c.fillText(pe??"",d/2,me*(te+fee*r))})}const f=Math.PI/180*Number(i),p=Math.max(n,a),[m,v,y]=mE(p,p,r);m.translate(y/2,y/2),m.rotate(f),d>0&&h>0&&m.drawImage(u,-d/2,-h/2);function x(V,W){const G=V*Math.cos(f)-W*Math.sin(f),q=V*Math.sin(f)+W*Math.cos(f);return[G,q]}let b=0,w=0,S=0,_=0;const E=d/2,C=h/2;[[0-E,0-C],[0+E,0-C],[0+E,0+C],[0-E,0+C]].forEach(([V,W])=>{const[G,q]=x(V,W);b=Math.min(b,G),w=Math.max(w,G),S=Math.min(S,q),_=Math.max(_,q)});const M=b+y/2,T=S+y/2,P=w-b,D=_-S,k=o*r,L=l*r,R=(P+k)*2,N=D+L,[I,B]=mE(R,N);function z(V=0,W=0){I.drawImage(v,M,T,P,D,V,W,P,D)}return z(),z(P+k,-D/2-L/2),z(P+k,+D/2+L/2),[B.toDataURL(),R/r,N/r]}return e}const wut=ce({name:"ElWatermark"}),xut=ce({...wut,props:put,setup(e){const t=e,i={position:"relative"},r=O(()=>{var M,T;return(T=(M=t.font)==null?void 0:M.color)!=null?T:"rgba(0,0,0,.15)"}),n=O(()=>{var M,T;return(T=(M=t.font)==null?void 0:M.fontSize)!=null?T:16}),a=O(()=>{var M,T;return(T=(M=t.font)==null?void 0:M.fontWeight)!=null?T:"normal"}),s=O(()=>{var M,T;return(T=(M=t.font)==null?void 0:M.fontStyle)!=null?T:"normal"}),o=O(()=>{var M,T;return(T=(M=t.font)==null?void 0:M.fontFamily)!=null?T:"sans-serif"}),l=O(()=>{var M,T;return(T=(M=t.font)==null?void 0:M.textAlign)!=null?T:"center"}),c=O(()=>{var M,T;return(T=(M=t.font)==null?void 0:M.textBaseline)!=null?T:"hanging"}),u=O(()=>t.gap[0]),d=O(()=>t.gap[1]),h=O(()=>u.value/2),f=O(()=>d.value/2),p=O(()=>{var M,T;return(T=(M=t.offset)==null?void 0:M[0])!=null?T:h.value}),m=O(()=>{var M,T;return(T=(M=t.offset)==null?void 0:M[1])!=null?T:f.value}),v=()=>{const M={zIndex:t.zIndex,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let T=p.value-h.value,P=m.value-f.value;return T>0&&(M.left=`${T}px`,M.width=`calc(100% - ${T}px)`,T=0),P>0&&(M.top=`${P}px`,M.height=`calc(100% - ${P}px)`,P=0),M.backgroundPosition=`${T}px ${P}px`,M},y=Wi(null),x=Wi(),b=j(!1),w=()=>{x.value&&(x.value.remove(),x.value=void 0)},S=(M,T)=>{var P;y.value&&x.value&&(b.value=!0,x.value.setAttribute("style",vut({...v(),backgroundImage:`url('${M}')`,backgroundSize:`${Math.floor(T)}px`})),(P=y.value)==null||P.append(x.value),setTimeout(()=>{b.value=!1}))},_=M=>{let T=120,P=64;const D=t.image,k=t.content,L=t.width,R=t.height;if(!D&&M.measureText){M.font=`${Number(n.value)}px ${o.value}`;const N=ct(k)?k:[k],I=N.map(B=>{const z=M.measureText(B);return[z.width,z.fontBoundingBoxAscent!==void 0?z.fontBoundingBoxAscent+z.fontBoundingBoxDescent:z.actualBoundingBoxAscent+z.actualBoundingBoxDescent]});T=Math.ceil(Math.max(...I.map(B=>B[0]))),P=Math.ceil(Math.max(...I.map(B=>B[1])))*N.length+(N.length-1)*fee}return[L??T,R??P]},E=but(),C=()=>{const T=document.createElement("canvas").getContext("2d"),P=t.image,D=t.content,k=t.rotate;if(T){x.value||(x.value=document.createElement("div"));const L=gut(),[R,N]=_(T),I=B=>{const[z,V]=E(B||"",k,L,R,N,{color:r.value,fontSize:n.value,fontStyle:s.value,fontWeight:a.value,fontFamily:o.value,textAlign:l.value,textBaseline:c.value},u.value,d.value);S(z,V)};if(P){const B=new Image;B.onload=()=>{I(B)},B.onerror=()=>{I(D)},B.crossOrigin="anonymous",B.referrerPolicy="no-referrer",B.src=P}else I(D)}};return Lt(()=>{C()}),Ne(()=>t,()=>{C()},{deep:!0,flush:"post"}),Bi(()=>{w()}),GZ(y,M=>{b.value||M.forEach(T=>{yut(T,x.value)&&(w(),C())})},{attributes:!0,subtree:!0,childList:!0}),(M,T)=>(F(),K("div",{ref_key:"containerRef",ref:y,style:mt([i])},[Ee(M.$slots,"default")],4))}});var _ut=Ze(xut,[["__file","watermark.vue"]]);const Sut=Rt(_ut),Cut=je({zIndex:{type:Number,default:1001},visible:Boolean,fill:{type:String,default:"rgba(0,0,0,0.5)"},pos:{type:be(Object)},targetAreaClickable:{type:Boolean,default:!0}}),Eut=(e,t,i,r,n)=>{const a=j(null),s=()=>{let d;return Et(e.value)?d=document.querySelector(e.value):Wt(e.value)?d=e.value():d=e.value,d},o=()=>{const d=s();if(!d||!t.value){a.value=null;return}Aut(d)||d.scrollIntoView(n.value);const{left:h,top:f,width:p,height:m}=d.getBoundingClientRect();a.value={left:h,top:f,width:p,height:m,radius:0}};Lt(()=>{Ne([t,e],()=>{o()},{immediate:!0}),window.addEventListener("resize",o)}),Bi(()=>{window.removeEventListener("resize",o)});const l=d=>{var h;return(h=ct(i.value.offset)?i.value.offset[d]:i.value.offset)!=null?h:6},c=O(()=>{var d;if(!a.value)return a.value;const h=l(0),f=l(1),p=((d=i.value)==null?void 0:d.radius)||2;return{left:a.value.left-h,top:a.value.top-f,width:a.value.width+h*2,height:a.value.height+f*2,radius:p}}),u=O(()=>{const d=s();return!r.value||!d||!window.DOMRect?d||void 0:{getBoundingClientRect(){var h,f,p,m;return window.DOMRect.fromRect({width:((h=c.value)==null?void 0:h.width)||0,height:((f=c.value)==null?void 0:f.height)||0,x:((p=c.value)==null?void 0:p.left)||0,y:((m=c.value)==null?void 0:m.top)||0})}}});return{mergedPosInfo:c,triggerTarget:u}},o3=Symbol("ElTour");function Aut(e){const t=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,{top:r,right:n,bottom:a,left:s}=e.getBoundingClientRect();return r>=0&&s>=0&&n<=t&&a<=i}const Mut=(e,t,i,r,n,a,s,o)=>{const l=j(),c=j(),u=j({}),d={x:l,y:c,placement:r,strategy:n,middlewareData:u},h=O(()=>{const y=[qK(g(a)),_Ge(),EGe(),Tut()];return g(o)&&g(i)&&y.push(ZK({element:g(i)})),y}),f=async()=>{if(!si)return;const y=g(e),x=g(t);if(!y||!x)return;const b=await iX(y,x,{placement:g(r),strategy:g(n),middleware:g(h)});Ev(d).forEach(w=>{d[w].value=b[w]})},p=O(()=>{if(!g(e))return{position:"fixed",top:"50%",left:"50%",transform:"translate3d(-50%, -50%, 0)",maxWidth:"100vw",zIndex:g(s)};const{overflow:y}=g(u);return{position:g(n),zIndex:g(s),top:g(c)!=null?`${g(c)}px`:"",left:g(l)!=null?`${g(l)}px`:"",maxWidth:y!=null&&y.maxWidth?`${y==null?void 0:y.maxWidth}px`:""}}),m=O(()=>{if(!g(o))return{};const{arrow:y}=g(u);return{left:(y==null?void 0:y.x)!=null?`${y==null?void 0:y.x}px`:"",top:(y==null?void 0:y.y)!=null?`${y==null?void 0:y.y}px`:""}});let v;return Lt(()=>{const y=g(e),x=g(t);y&&x&&(v=VGe(y,x,f)),Ca(()=>{f()})}),Bi(()=>{v&&v()}),{update:f,contentStyle:p,arrowStyle:m}},Tut=()=>({name:"overflow",async fn(e){const t=await n8(e);let i=0;return t.left>0&&(i=t.left),t.right>0&&(i=t.right),{data:{maxWidth:e.rects.floating.width-i}}}}),Put=ce({name:"ElTourMask",inheritAttrs:!1}),Dut=ce({...Put,props:Cut,setup(e){const t=e,{ns:i}=rt(o3),r=O(()=>{var o,l;return(l=(o=t.pos)==null?void 0:o.radius)!=null?l:2}),n=O(()=>{const o=r.value,l=`a${o},${o} 0 0 1`;return{topRight:`${l} ${o},${o}`,bottomRight:`${l} ${-o},${o}`,bottomLeft:`${l} ${-o},${-o}`,topLeft:`${l} ${o},${-o}`}}),a=O(()=>{const o=window.innerWidth,l=window.innerHeight,c=n.value,u=`M${o},0 L0,0 L0,${l} L${o},${l} L${o},0 Z`,d=r.value;return t.pos?`${u} M${t.pos.left+d},${t.pos.top} h${t.pos.width-d*2} ${c.topRight} v${t.pos.height-d*2} ${c.bottomRight} h${-t.pos.width+d*2} ${c.bottomLeft} v${-t.pos.height+d*2} ${c.topLeft} z`:u}),s=O(()=>({fill:t.fill,pointerEvents:"auto",cursor:"auto"}));return $I(Di(t,"visible"),{ns:i}),(o,l)=>o.visible?(F(),K("div",$t({key:0,class:g(i).e("mask"),style:{position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:o.zIndex,pointerEvents:o.pos&&o.targetAreaClickable?"none":"auto"}},o.$attrs),[(F(),K("svg",{style:{width:"100%",height:"100%"}},[ie("path",{class:U(g(i).e("hollow")),style:mt(g(s)),d:g(a)},null,14,["d"])]))],16)):Ae("v-if",!0)}});var Iut=Ze(Dut,[["__file","mask.vue"]]);const Out=["absolute","fixed"],Rut=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],Y8=je({placement:{type:be(String),values:Rut,default:"bottom"},reference:{type:be(Object),default:null},strategy:{type:be(String),values:Out,default:"absolute"},offset:{type:Number,default:10},showArrow:Boolean,zIndex:{type:Number,default:2001}}),kut={close:()=>!0},Lut=ce({name:"ElTourContent"}),But=ce({...Lut,props:Y8,emits:kut,setup(e,{emit:t}){const i=e,r=j(i.placement),n=j(i.strategy),a=j(null),s=j(null);Ne(()=>i.placement,()=>{r.value=i.placement});const{contentStyle:o,arrowStyle:l}=Mut(Di(i,"reference"),a,s,r,n,Di(i,"offset"),Di(i,"zIndex"),Di(i,"showArrow")),c=O(()=>r.value.split("-")[0]),{ns:u}=rt(o3),d=()=>{t("close")},h=f=>{f.detail.focusReason==="pointer"&&f.preventDefault()};return(f,p)=>(F(),K("div",{ref_key:"contentRef",ref:a,style:mt(g(o)),class:U(g(u).e("content")),"data-side":g(c),tabindex:"-1"},[ne(g(Ly),{loop:"",trapped:"","focus-start-el":"container","focus-trap-el":a.value||void 0,onReleaseRequested:d,onFocusoutPrevented:h},{default:ve(()=>[Ee(f.$slots,"default")]),_:3},8,["focus-trap-el"]),f.showArrow?(F(),K("span",{key:0,ref_key:"arrowRef",ref:s,style:mt(g(l)),class:U(g(u).e("arrow"))},null,6)):Ae("v-if",!0)],14,["data-side"]))}});var Nut=Ze(But,[["__file","content.vue"]]),Fut=ce({name:"ElTourSteps",props:{current:{type:Number,default:0}},emits:["update-total"],setup(e,{slots:t,emit:i}){let r=0;return()=>{var n,a;const s=(n=t.default)==null?void 0:n.call(t),o=[];let l=0;function c(u){ct(u)&&u.forEach(d=>{var h;((h=(d==null?void 0:d.type)||{})==null?void 0:h.name)==="ElTourStep"&&(o.push(d),l+=1)})}return s.length&&c(eh((a=s[0])==null?void 0:a.children)),r!==l&&(r=l,i("update-total",l)),o.length?o[e.current]:null}}});const zut=je({modelValue:Boolean,current:{type:Number,default:0},showArrow:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeIcon:{type:zi},placement:Y8.placement,contentStyle:{type:be([Object])},mask:{type:be([Boolean,Object]),default:!0},gap:{type:be(Object),default:()=>({offset:6,radius:2})},zIndex:{type:Number},scrollIntoViewOptions:{type:be([Boolean,Object]),default:()=>({block:"center"})},type:{type:be(String)},appendTo:{type:be([String,Object]),default:"body"},closeOnPressEscape:{type:Boolean,default:!0},targetAreaClickable:{type:Boolean,default:!0}}),Vut={[Vt]:e=>Gi(e),"update:current":e=>gt(e),close:e=>gt(e),finish:()=>!0,change:e=>gt(e)},Uut=ce({name:"ElTour"}),Hut=ce({...Uut,props:zut,emits:Vut,setup(e,{emit:t}){const i=e,r=Ve("tour"),n=j(0),a=j(),s=$Z(i,"current",t,{passive:!0}),o=O(()=>{var A;return(A=a.value)==null?void 0:A.target}),l=O(()=>[r.b(),v.value==="primary"?r.m("primary"):""]),c=O(()=>{var A;return((A=a.value)==null?void 0:A.placement)||i.placement}),u=O(()=>{var A,M;return(M=(A=a.value)==null?void 0:A.contentStyle)!=null?M:i.contentStyle}),d=O(()=>{var A,M;return(M=(A=a.value)==null?void 0:A.mask)!=null?M:i.mask}),h=O(()=>!!d.value&&i.modelValue),f=O(()=>Gi(d.value)?void 0:d.value),p=O(()=>{var A,M;return!!o.value&&((M=(A=a.value)==null?void 0:A.showArrow)!=null?M:i.showArrow)}),m=O(()=>{var A,M;return(M=(A=a.value)==null?void 0:A.scrollIntoViewOptions)!=null?M:i.scrollIntoViewOptions}),v=O(()=>{var A,M;return(M=(A=a.value)==null?void 0:A.type)!=null?M:i.type}),{nextZIndex:y}=d0(),x=y(),b=O(()=>{var A;return(A=i.zIndex)!=null?A:x}),{mergedPosInfo:w,triggerTarget:S}=Eut(o,Di(i,"modelValue"),Di(i,"gap"),d,m);Ne(()=>i.modelValue,A=>{A||(s.value=0)});const _=()=>{i.closeOnPressEscape&&(t("update:modelValue",!1),t("close",s.value))},E=A=>{n.value=A},C=In();return Yt(o3,{currentStep:a,current:s,total:n,showClose:Di(i,"showClose"),closeIcon:Di(i,"closeIcon"),mergedType:v,ns:r,slots:C,updateModelValue(A){t("update:modelValue",A)},onClose(){t("close",s.value)},onFinish(){t("finish")},onChange(){t("change",s.value)}}),(A,M)=>(F(),K(ht,null,[ne(g(f0),{to:A.appendTo},{default:ve(()=>{var T,P;return[ie("div",$t({class:g(l)},A.$attrs),[ne(Iut,{visible:g(h),fill:(T=g(f))==null?void 0:T.color,style:mt((P=g(f))==null?void 0:P.style),pos:g(w),"z-index":g(b),"target-area-clickable":A.targetAreaClickable},null,8,["visible","fill","style","pos","z-index","target-area-clickable"]),A.modelValue?(F(),De(Nut,{key:g(s),reference:g(S),placement:g(c),"show-arrow":g(p),"z-index":g(b),style:mt(g(u)),onClose:_},{default:ve(()=>[ne(g(Fut),{current:g(s),onUpdateTotal:E},{default:ve(()=>[Ee(A.$slots,"default")]),_:3},8,["current"])]),_:3},8,["reference","placement","show-arrow","z-index","style"])):Ae("v-if",!0)],16)]}),_:3},8,["to"]),Ae(" just for IDE "),Ae("v-if",!0)],64))}});var jut=Ze(Hut,[["__file","tour.vue"]]);const Wut=je({target:{type:be([String,Object,Function])},title:String,description:String,showClose:{type:Boolean,default:void 0},closeIcon:{type:zi},showArrow:{type:Boolean,default:void 0},placement:Y8.placement,mask:{type:be([Boolean,Object]),default:void 0},contentStyle:{type:be([Object])},prevButtonProps:{type:be(Object)},nextButtonProps:{type:be(Object)},scrollIntoViewOptions:{type:be([Boolean,Object]),default:void 0},type:{type:be(String)}}),Gut={close:()=>!0},$ut=ce({name:"ElTourStep"}),Zut=ce({...$ut,props:Wut,emits:Gut,setup(e,{emit:t}){const i=e,{Close:r}=HI,{t:n}=di(),{currentStep:a,current:s,total:o,showClose:l,closeIcon:c,mergedType:u,ns:d,slots:h,updateModelValue:f,onClose:p,onFinish:m,onChange:v}=rt(o3);Ne(i,C=>{a.value=C},{immediate:!0});const y=O(()=>{var C;return(C=i.showClose)!=null?C:l.value}),x=O(()=>{var C,A;return(A=(C=i.closeIcon)!=null?C:c.value)!=null?A:r}),b=C=>{if(C)return HY(C,["children","onClick"])},w=()=>{var C,A;s.value-=1,(C=i.prevButtonProps)!=null&&C.onClick&&((A=i.prevButtonProps)==null||A.onClick()),v()},S=()=>{var C;s.value>=o.value-1?_():s.value+=1,(C=i.nextButtonProps)!=null&&C.onClick&&i.nextButtonProps.onClick(),v()},_=()=>{E(),m()},E=()=>{f(!1),p(),t("close")};return(C,A)=>(F(),K(ht,null,[g(y)?(F(),K("button",{key:0,"aria-label":"Close",class:U(g(d).e("closebtn")),type:"button",onClick:E},[ne(g(ut),{class:U(g(d).e("close"))},{default:ve(()=>[(F(),De(jt(g(x))))]),_:1},8,["class"])],2)):Ae("v-if",!0),ie("header",{class:U([g(d).e("header"),{"show-close":g(l)}])},[Ee(C.$slots,"header",{},()=>[ie("span",{role:"heading",class:U(g(d).e("title"))},Ye(C.title),3)])],2),ie("div",{class:U(g(d).e("body"))},[Ee(C.$slots,"default",{},()=>[ie("span",null,Ye(C.description),1)])],2),ie("footer",{class:U(g(d).e("footer"))},[ie("div",{class:U(g(d).b("indicators"))},[g(h).indicators?(F(),De(jt(g(h).indicators),{key:0,current:g(s),total:g(o)},null,8,["current","total"])):(F(!0),K(ht,{key:1},Qt(g(o),(M,T)=>(F(),K("span",{key:M,class:U([g(d).b("indicator"),T===g(s)?"is-active":""])},null,2))),128))],2),ie("div",{class:U(g(d).b("buttons"))},[g(s)>0?(F(),De(g(Wn),$t({key:0,size:"small",type:g(u)},b(C.prevButtonProps),{onClick:w}),{default:ve(()=>{var M,T;return[Xt(Ye((T=(M=C.prevButtonProps)==null?void 0:M.children)!=null?T:g(n)("el.tour.previous")),1)]}),_:1},16,["type"])):Ae("v-if",!0),g(s)<=g(o)-1?(F(),De(g(Wn),$t({key:1,size:"small",type:g(u)==="primary"?"default":"primary"},b(C.nextButtonProps),{onClick:S}),{default:ve(()=>{var M,T;return[Xt(Ye((T=(M=C.nextButtonProps)==null?void 0:M.children)!=null?T:g(s)===g(o)-1?g(n)("el.tour.finish"):g(n)("el.tour.next")),1)]}),_:1},16,["type"])):Ae("v-if",!0)],2)],2)],64))}});var pee=Ze(Zut,[["__file","step.vue"]]);const qut=Rt(jut,{TourStep:pee}),Yut=Tr(pee),Kut=je({container:{type:be([String,Object])},offset:{type:Number,default:0},bound:{type:Number,default:15},duration:{type:Number,default:300},marker:{type:Boolean,default:!0},type:{type:be(String),default:"default"},direction:{type:be(String),default:"vertical"}}),Xut={change:e=>Et(e),click:(e,t)=>e instanceof MouseEvent&&(Et(t)||Qi(t))},mee=Symbol("anchor"),Qut=ce({name:"ElAnchor"}),Jut=ce({...Qut,props:Kut,emits:Xut,setup(e,{expose:t,emit:i}){const r=e,n=j(""),a=j(null),s=j(null),o=j(),l={};let c=!1,u=0;const d=Ve("anchor"),h=O(()=>[d.b(),r.type==="underline"?d.m("underline"):"",d.m(r.direction)]),f=C=>{l[C.href]=C.el},p=C=>{delete l[C]},m=C=>{n.value!==C&&(n.value=C,i("change",C))};let v=null;const y=C=>{if(!o.value)return;const A=Cw(C);if(!A)return;v&&v(),c=!0;const M=lF(A,o.value),T=rT(A,M),P=M.scrollHeight-M.clientHeight,D=Math.min(T-r.offset,P);v=EHe(o.value,u,D,r.duration,()=>{setTimeout(()=>{c=!1},20)})},x=C=>{C&&(m(C),y(C))},b=(C,A)=>{i("click",C,A),x(A)},w=jje(()=>{o.value&&(u=cF(o.value));const C=S();c||Qi(C)||m(C)}),S=()=>{if(!o.value)return;const C=cF(o.value),A=[];for(const M of Object.keys(l)){const T=Cw(M);if(!T)continue;const P=lF(T,o.value),D=rT(T,P);A.push({top:D-r.offset-r.bound,href:M})}A.sort((M,T)=>M.top-T.top);for(let M=0;M<A.length;M++){const T=A[M],P=A[M+1];if(M===0&&C===0)return"";if(T.top<=C&&(!P||P.top>C))return T.href}},_=()=>{const C=Cw(r.container);!C||VS(C)?o.value=window:o.value=C};Oi(o,"scroll",w);const E=O(()=>{if(!a.value||!s.value||!n.value)return{};const C=l[n.value];if(!C)return{};const A=a.value.getBoundingClientRect(),M=s.value.getBoundingClientRect(),T=C.getBoundingClientRect();return r.direction==="horizontal"?{left:`${T.left-A.left}px`,width:`${T.width}px`,opacity:1}:{top:`${T.top-A.top+(T.height-M.height)/2}px`,opacity:1}});return Lt(()=>{_();const C=decodeURIComponent(window.location.hash);Cw(C)?x(C):w()}),Ne(()=>r.container,()=>{_()}),Yt(mee,{ns:d,direction:r.direction,currentAnchor:n,addLink:f,removeLink:p,handleClick:b}),t({scrollTo:x}),(C,A)=>(F(),K("div",{ref_key:"anchorRef",ref:a,class:U(g(h))},[C.marker?(F(),K("div",{key:0,ref_key:"markerRef",ref:s,class:U(g(d).e("marker")),style:mt(g(E))},null,6)):Ae("v-if",!0),ie("div",{class:U(g(d).e("list"))},[Ee(C.$slots,"default")],2)],2))}});var edt=Ze(Jut,[["__file","anchor.vue"]]);const tdt=je({title:String,href:String}),idt=ce({name:"ElAnchorLink"}),rdt=ce({...idt,props:tdt,setup(e){const t=e,i=j(null),{ns:r,direction:n,currentAnchor:a,addLink:s,removeLink:o,handleClick:l}=rt(mee),c=O(()=>[r.e("link"),r.is("active",a.value===t.href)]),u=d=>{l(d,t.href)};return Ne(()=>t.href,(d,h)=>{ft(()=>{h&&o(h),d&&s({href:d,el:i.value})})}),Lt(()=>{const{href:d}=t;d&&s({href:d,el:i.value})}),Bi(()=>{const{href:d}=t;d&&o(d)}),(d,h)=>(F(),K("div",{class:U(g(r).e("item"))},[ie("a",{ref_key:"linkRef",ref:i,class:U(g(c)),href:d.href,onClick:u},[Ee(d.$slots,"default",{},()=>[Xt(Ye(d.title),1)])],10,["href"]),d.$slots["sub-link"]&&g(n)==="vertical"?(F(),K("div",{key:0,class:U(g(r).e("list"))},[Ee(d.$slots,"sub-link")],2)):Ae("v-if",!0)],2))}});var vee=Ze(rdt,[["__file","anchor-link.vue"]]);const ndt=Rt(edt,{AnchorLink:vee}),adt=Tr(vee),sdt=je({direction:{type:be(String),default:"horizontal"},options:{type:be(Array),default:()=>[]},modelValue:{type:[String,Number,Boolean],default:void 0},block:Boolean,size:wn,disabled:Boolean,validateEvent:{type:Boolean,default:!0},id:String,name:String,...ha(["ariaLabel"])}),odt={[Vt]:e=>Et(e)||gt(e)||Gi(e),[nr]:e=>Et(e)||gt(e)||Gi(e)},ldt=ce({name:"ElSegmented"}),cdt=ce({...ldt,props:sdt,emits:odt,setup(e,{emit:t}){const i=e,r=Ve("segmented"),n=ua(),a=on(),s=qa(),{formItem:o}=Ya(),{inputId:l,isLabeledByFormItem:c}=kl(i,{formItemContext:o}),u=j(null),d=VIe(),h=bi({isInit:!1,width:0,height:0,translateX:0,translateY:0,focusVisible:!1}),f=A=>{const M=p(A);t(Vt,M),t(nr,M)},p=A=>Ri(A)?A.value:A,m=A=>Ri(A)?A.label:A,v=A=>!!(s.value||Ri(A)&&A.disabled),y=A=>i.modelValue===p(A),x=A=>i.options.find(M=>p(M)===A),b=A=>[r.e("item"),r.is("selected",y(A)),r.is("disabled",v(A))],w=()=>{if(!u.value)return;const A=u.value.querySelector(".is-selected"),M=u.value.querySelector(".is-selected input");if(!A||!M){h.width=0,h.height=0,h.translateX=0,h.translateY=0,h.focusVisible=!1;return}const T=A.getBoundingClientRect();h.isInit=!0,i.direction==="vertical"?(h.height=T.height,h.translateY=A.offsetTop):(h.width=T.width,h.translateX=A.offsetLeft);try{h.focusVisible=M.matches(":focus-visible")}catch{}},S=O(()=>[r.b(),r.m(a.value),r.is("block",i.block)]),_=O(()=>({width:i.direction==="vertical"?"100%":`${h.width}px`,height:i.direction==="vertical"?`${h.height}px`:"100%",transform:i.direction==="vertical"?`translateY(${h.translateY}px)`:`translateX(${h.translateX}px)`,display:h.isInit?"block":"none"})),E=O(()=>[r.e("item-selected"),r.is("disabled",v(x(i.modelValue))),r.is("focus-visible",h.focusVisible)]),C=O(()=>i.name||n.value);return gr(u,w),Ne(d,w),Ne(()=>i.modelValue,()=>{var A;w(),i.validateEvent&&((A=o==null?void 0:o.validate)==null||A.call(o,"change").catch(M=>void 0))},{flush:"post"}),(A,M)=>A.options.length?(F(),K("div",{key:0,id:g(l),ref_key:"segmentedRef",ref:u,class:U(g(S)),role:"radiogroup","aria-label":g(c)?void 0:A.ariaLabel||"segmented","aria-labelledby":g(c)?g(o).labelId:void 0},[ie("div",{class:U([g(r).e("group"),g(r).m(i.direction)])},[ie("div",{style:mt(g(_)),class:U(g(E))},null,6),(F(!0),K(ht,null,Qt(A.options,(T,P)=>(F(),K("label",{key:P,class:U(b(T))},[ie("input",{class:U(g(r).e("item-input")),type:"radio",name:g(C),disabled:v(T),checked:y(T),onChange:D=>f(T)},null,42,["name","disabled","checked","onChange"]),ie("div",{class:U(g(r).e("item-label"))},[Ee(A.$slots,"default",{item:T},()=>[Xt(Ye(m(T)),1)])],2)],2))),128))],2)],10,["id","aria-label","aria-labelledby"])):Ae("v-if",!0)}});var udt=Ze(cdt,[["__file","segmented.vue"]]);const ddt=Rt(udt),hdt=(e,t)=>{const i=e.toLowerCase();return(t.label||t.value).toLowerCase().includes(i)},fdt=(e,t,i)=>{const{selectionEnd:r}=e;if(r===null)return;const n=e.value,a=wa(t);let s=-1,o;for(let l=r-1;l>=0;--l){const c=n[l];if(c===i||c===`
`||c==="\r"){s=l;continue}if(a.includes(c)){const u=s===-1?r:s;o={pattern:n.slice(l+1,u),start:l+1,end:u,prefix:c,prefixIndex:l,splitIndex:s,selectionEnd:r};break}}return o},pdt=(e,t={debug:!1,useSelectionEnd:!1})=>{const i=e.selectionStart!==null?e.selectionStart:0,r=e.selectionEnd!==null?e.selectionEnd:0,n=t.useSelectionEnd?r:i,a=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];if(t.debug){const h=document.querySelector("#input-textarea-caret-position-mirror-div");h!=null&&h.parentNode&&h.parentNode.removeChild(h)}const s=document.createElement("div");s.id="input-textarea-caret-position-mirror-div",document.body.appendChild(s);const o=s.style,l=window.getComputedStyle(e),c=e.nodeName==="INPUT";o.whiteSpace=c?"nowrap":"pre-wrap",c||(o.wordWrap="break-word"),o.position="absolute",t.debug||(o.visibility="hidden"),a.forEach(h=>{if(c&&h==="lineHeight")if(l.boxSizing==="border-box"){const f=Number.parseInt(l.height),p=Number.parseInt(l.paddingTop)+Number.parseInt(l.paddingBottom)+Number.parseInt(l.borderTopWidth)+Number.parseInt(l.borderBottomWidth),m=p+Number.parseInt(l.lineHeight);f>m?o.lineHeight=`${f-p}px`:f===m?o.lineHeight=l.lineHeight:o.lineHeight="0"}else o.lineHeight=l.height;else o[h]=l[h]}),BD()?e.scrollHeight>Number.parseInt(l.height)&&(o.overflowY="scroll"):o.overflow="hidden",s.textContent=e.value.slice(0,Math.max(0,n)),c&&s.textContent&&(s.textContent=s.textContent.replace(/\s/g,""));const u=document.createElement("span");u.textContent=e.value.slice(Math.max(0,n))||".",u.style.position="relative",u.style.left=`${-e.scrollLeft}px`,u.style.top=`${-e.scrollTop}px`,s.appendChild(u);const d={top:u.offsetTop+Number.parseInt(l.borderTopWidth),left:u.offsetLeft+Number.parseInt(l.borderLeftWidth),height:Number.parseInt(l.fontSize)*1.5};return t.debug?u.style.backgroundColor="#aaa":document.body.removeChild(s),d.left>=e.clientWidth&&(d.left=e.clientWidth),d},mdt=je({...o8,options:{type:be(Array),default:()=>[]},prefix:{type:be([String,Array]),default:"@",validator:e=>Et(e)?e.length===1:e.every(t=>Et(t)&&t.length===1)},split:{type:String,default:" ",validator:e=>e.length===1},filterOption:{type:be([Boolean,Function]),default:()=>hdt,validator:e=>e===!1?!0:Wt(e)},placement:{type:be(String),default:"bottom"},showArrow:Boolean,offset:{type:Number,default:0},whole:Boolean,checkIsWhole:{type:be(Function)},modelValue:String,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:be(Object),default:()=>({})}}),vdt={[Vt]:e=>Et(e),search:(e,t)=>Et(e)&&Et(t),select:(e,t)=>Et(e.value)&&Et(t),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent},gdt=je({options:{type:be(Array),default:()=>[]},loading:Boolean,disabled:Boolean,contentId:String,ariaLabel:String}),ydt={select:e=>Et(e.value)},bdt=ce({name:"ElMentionDropdown"}),wdt=ce({...bdt,props:gdt,emits:ydt,setup(e,{expose:t,emit:i}){const r=e,n=Ve("mention"),{t:a}=di(),s=j(-1),o=j(),l=j(),c=j(),u=(b,w)=>[n.be("dropdown","item"),n.is("hovering",s.value===w),n.is("disabled",b.disabled||r.disabled)],d=b=>{b.disabled||r.disabled||i("select",b)},h=b=>{s.value=b},f=O(()=>r.disabled||r.options.every(b=>b.disabled)),p=O(()=>r.options[s.value]),m=()=>{p.value&&i("select",p.value)},v=b=>{const{options:w}=r;if(w.length===0||f.value)return;b==="next"?(s.value++,s.value===w.length&&(s.value=0)):b==="prev"&&(s.value--,s.value<0&&(s.value=w.length-1));const S=w[s.value];if(S.disabled){v(b);return}ft(()=>y(S))},y=b=>{var w,S,_,E;const{options:C}=r,A=C.findIndex(T=>T.value===b.value),M=(w=l.value)==null?void 0:w[A];if(M){const T=(_=(S=c.value)==null?void 0:S.querySelector)==null?void 0:_.call(S,`.${n.be("dropdown","wrap")}`);T&&NI(T,M)}(E=o.value)==null||E.handleScroll()};return Ne(()=>r.options,()=>{f.value||r.options.length===0?s.value=-1:s.value=0},{immediate:!0}),t({hoveringIndex:s,navigateOptions:v,selectHoverOption:m,hoverOption:p}),(b,w)=>(F(),K("div",{ref_key:"dropdownRef",ref:c,class:U(g(n).b("dropdown"))},[b.$slots.header?(F(),K("div",{key:0,class:U(g(n).be("dropdown","header"))},[Ee(b.$slots,"header")],2)):Ae("v-if",!0),Nt(ne(g(Bc),{id:b.contentId,ref_key:"scrollbarRef",ref:o,tag:"ul","wrap-class":g(n).be("dropdown","wrap"),"view-class":g(n).be("dropdown","list"),role:"listbox","aria-label":b.ariaLabel,"aria-orientation":"vertical"},{default:ve(()=>[(F(!0),K(ht,null,Qt(b.options,(S,_)=>(F(),K("li",{id:`${b.contentId}-${_}`,ref_for:!0,ref_key:"optionRefs",ref:l,key:_,class:U(u(S,_)),role:"option","aria-disabled":S.disabled||b.disabled||void 0,"aria-selected":s.value===_,onMousemove:E=>h(_),onClick:xt(E=>d(S),["stop"])},[Ee(b.$slots,"label",{item:S,index:_},()=>{var E;return[ie("span",null,Ye((E=S.label)!=null?E:S.value),1)]})],42,["id","aria-disabled","aria-selected","onMousemove","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class","aria-label"]),[[_i,b.options.length>0&&!b.loading]]),b.loading?(F(),K("div",{key:1,class:U(g(n).be("dropdown","loading"))},[Ee(b.$slots,"loading",{},()=>[Xt(Ye(g(a)("el.mention.loading")),1)])],2)):Ae("v-if",!0),b.$slots.footer?(F(),K("div",{key:2,class:U(g(n).be("dropdown","footer"))},[Ee(b.$slots,"footer")],2)):Ae("v-if",!0)],2))}});var xdt=Ze(wdt,[["__file","mention-dropdown.vue"]]);const _dt=ce({name:"ElMention",inheritAttrs:!1}),Sdt=ce({..._dt,props:mdt,emits:vdt,setup(e,{expose:t,emit:i}){const r=e,n=O(()=>Co(r,Object.keys(o8))),a=Ve("mention"),s=qa(),o=ua(),l=j(),c=j(),u=j(),d=j(!1),h=j(),f=j(),p=O(()=>r.showArrow?r.placement:`${r.placement}-start`),m=O(()=>r.showArrow?["bottom","top"]:["bottom-start","top-start"]),v=O(()=>{const{filterOption:P,options:D}=r;return!f.value||!P?D:D.filter(k=>P(f.value.pattern,k))}),y=O(()=>d.value&&(!!v.value.length||r.loading)),x=O(()=>{var P;return`${o.value}-${(P=u.value)==null?void 0:P.hoveringIndex}`}),b=P=>{i("update:modelValue",P),A()},w=P=>{var D,k,L,R;if(!(!("code"in P)||(D=l.value)!=null&&D.isComposing))switch(P.code){case at.left:case at.right:A();break;case at.up:case at.down:if(!d.value)return;P.preventDefault(),(k=u.value)==null||k.navigateOptions(P.code===at.up?"prev":"next");break;case at.enter:case at.numpadEnter:if(!d.value)return;P.preventDefault(),(L=u.value)!=null&&L.hoverOption?(R=u.value)==null||R.selectHoverOption():d.value=!1;break;case at.esc:if(!d.value)return;P.preventDefault(),d.value=!1;break;case at.backspace:if(r.whole&&f.value){const{splitIndex:N,selectionEnd:I,pattern:B,prefixIndex:z,prefix:V}=f.value,W=C();if(!W)return;const G=W.value,q=r.options.find(J=>J.value===B);if((Wt(r.checkIsWhole)?r.checkIsWhole(B,V):q)&&N!==-1&&N+1===I){P.preventDefault();const J=G.slice(0,z)+G.slice(N+1);i(Vt,J);const $=z;ft(()=>{W.selectionStart=$,W.selectionEnd=$,T()})}}}},{wrapperRef:S}=mp(l,{beforeFocus(){return s.value},afterFocus(){A()},beforeBlur(P){var D;return(D=c.value)==null?void 0:D.isFocusInsideContent(P)},afterBlur(){d.value=!1}}),_=()=>{A()},E=P=>{if(!f.value)return;const D=C();if(!D)return;const k=D.value,{split:L}=r,R=k.slice(f.value.end),N=R.startsWith(L),I=`${P.value}${N?"":L}`,B=k.slice(0,f.value.start)+I+R;i(Vt,B),i("select",P,f.value.prefix);const z=f.value.start+I.length+(N?1:0);ft(()=>{D.selectionStart=z,D.selectionEnd=z,D.focus(),T()})},C=()=>{var P,D;return r.type==="textarea"?(P=l.value)==null?void 0:P.textarea:(D=l.value)==null?void 0:D.input},A=()=>{setTimeout(()=>{M(),T(),ft(()=>{var P;return(P=c.value)==null?void 0:P.updatePopper()})},0)},M=()=>{const P=C();if(!P)return;const D=pdt(P),k=P.getBoundingClientRect(),L=l.value.$el.getBoundingClientRect();h.value={position:"absolute",width:0,height:`${D.height}px`,left:`${D.left+k.left-L.left}px`,top:`${D.top+k.top-L.top}px`}},T=()=>{const P=C();if(document.activeElement!==P){d.value=!1;return}const{prefix:D,split:k}=r;if(f.value=fdt(P,D,k),f.value&&f.value.splitIndex===-1){d.value=!0,i("search",f.value.pattern,f.value.prefix);return}d.value=!1};return t({input:l,tooltip:c,dropdownVisible:y}),(P,D)=>(F(),K("div",{ref_key:"wrapperRef",ref:S,class:U(g(a).b())},[ne(g(Ha),$t($t(g(n),P.$attrs),{ref_key:"elInputRef",ref:l,"model-value":P.modelValue,disabled:g(s),role:g(y)?"combobox":void 0,"aria-activedescendant":g(y)?g(x)||"":void 0,"aria-controls":g(y)?g(o):void 0,"aria-expanded":g(y)||void 0,"aria-label":P.ariaLabel,"aria-autocomplete":g(y)?"none":void 0,"aria-haspopup":g(y)?"listbox":void 0,onInput:b,onKeydown:w,onMousedown:_}),Lo({_:2},[Qt(P.$slots,(k,L)=>({name:L,fn:ve(R=>[Ee(P.$slots,L,_o(Au(R)))])}))]),1040,["model-value","disabled","role","aria-activedescendant","aria-controls","aria-expanded","aria-label","aria-autocomplete","aria-haspopup"]),ne(g(Ta),{ref_key:"tooltipRef",ref:c,visible:g(y),"popper-class":[g(a).e("popper"),P.popperClass],"popper-options":P.popperOptions,placement:g(p),"fallback-placements":g(m),effect:"light",pure:"",offset:P.offset,"show-arrow":P.showArrow},{default:ve(()=>[ie("div",{style:mt(h.value)},null,4)]),content:ve(()=>{var k;return[ne(xdt,{ref_key:"dropdownRef",ref:u,options:g(v),disabled:g(s),loading:P.loading,"content-id":g(o),"aria-label":P.ariaLabel,onSelect:E,onClick:xt((k=l.value)==null?void 0:k.focus,["stop"])},Lo({_:2},[Qt(P.$slots,(L,R)=>({name:R,fn:ve(N=>[Ee(P.$slots,R,_o(Au(N)))])}))]),1032,["options","disabled","loading","content-id","aria-label","onClick"])]}),_:3},8,["visible","popper-class","popper-options","placement","fallback-placements","offset","show-arrow"])],2))}});var Cdt=Ze(Sdt,[["__file","mention.vue"]]);const Edt=Rt(Cdt);var Adt=[s$e,g$e,Nqe,Wot,jqe,Kqe,_X,lYe,cYe,Wn,PX,_Ke,MKe,zKe,VKe,VXe,hQ,$Xe,jo,eXe,rQ,nQe,wQe,xQe,e3,$Qe,QGe,nJe,aJe,sJe,oJe,lJe,qJe,net,aet,yet,BQ,Pet,ytt,btt,wtt,GQ,cZe,uZe,ut,Ftt,$Q,Ha,ZQ,Ytt,yit,bit,wit,xit,Mit,yrt,Crt,Rrt,bX,iJ,uQ,fXe,hXe,jrt,qrt,JXe,Bc,tp,p_,Qit,Hnt,Knt,Xnt,vat,xat,xJ,Oat,Uat,Hat,qat,Xst,Qst,jot,nlt,alt,F1,ult,rKe,vlt,_lt,Slt,Ta,qlt,oct,S_,Mct,Wct,fut,Sut,qut,Yut,ndt,adt,ddt,Edt];const bo="ElInfiniteScroll",Mdt=50,Tdt=200,Pdt=0,Ddt={delay:{type:Number,default:Tdt},distance:{type:Number,default:Pdt},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},K8=(e,t)=>Object.entries(Ddt).reduce((i,[r,n])=>{var a,s;const{type:o,default:l}=n,c=e.getAttribute(`infinite-scroll-${r}`);let u=(s=(a=t[c])!=null?a:c)!=null?s:l;return u=u==="false"?!1:u,u=o(u),i[r]=Number.isNaN(u)?l:u,i},{}),gee=e=>{const{observer:t}=e[bo];t&&(t.disconnect(),delete e[bo].observer)},Idt=(e,t)=>{const{container:i,containerEl:r,instance:n,observer:a,lastScrollTop:s}=e[bo],{disabled:o,distance:l}=K8(e,n),{clientHeight:c,scrollHeight:u,scrollTop:d}=r,h=d-s;if(e[bo].lastScrollTop=d,a||o||h<0)return;let f=!1;if(i===e)f=u-(c+d)<=l;else{const{clientTop:p,scrollHeight:m}=e,v=rT(e,r);f=d+c>=v+p+m-l}f&&t.call(n)};function vE(e,t){const{containerEl:i,instance:r}=e[bo],{disabled:n}=K8(e,r);n||i.clientHeight===0||(i.scrollHeight<=i.clientHeight?t.call(r):gee(e))}const Odt={async mounted(e,t){const{instance:i,value:r}=t;Wt(r)||bn(bo,"'v-infinite-scroll' binding value must be a function"),await ft();const{delay:n,immediate:a}=K8(e,i),s=BI(e,!0),o=s===window?document.documentElement:s,l=Jd(Idt.bind(null,e,r),n);if(s){if(e[bo]={instance:i,container:s,containerEl:o,delay:n,cb:r,onScroll:l,lastScrollTop:o.scrollTop},a){const c=new MutationObserver(Jd(vE.bind(null,e,r),Mdt));e[bo].observer=c,c.observe(e,{childList:!0,subtree:!0}),vE(e,r)}s.addEventListener("scroll",l)}},unmounted(e){if(!e[bo])return;const{container:t,onScroll:i}=e[bo];t==null||t.removeEventListener("scroll",i),gee(e)},async updated(e){if(!e[bo])await ft();else{const{containerEl:t,cb:i,observer:r}=e[bo];t.clientHeight&&r&&vE(e,i)}}};var Rdt=Odt;const g5=Rdt;g5.install=e=>{e.directive("InfiniteScroll",g5)};const kdt=g5;function Ldt(e){let t;const i=j(!1),r=bi({...e,originalPosition:"",originalOverflow:"",visible:!1});function n(h){r.text=h}function a(){const h=r.parent,f=d.ns;if(!h.vLoadingAddClassList){let p=h.getAttribute("loading-number");p=Number.parseInt(p)-1,p?h.setAttribute("loading-number",p.toString()):(Wa(h,f.bm("parent","relative")),h.removeAttribute("loading-number")),Wa(h,f.bm("parent","hidden"))}s(),u.unmount()}function s(){var h,f;(f=(h=d.$el)==null?void 0:h.parentNode)==null||f.removeChild(d.$el)}function o(){var h;e.beforeClose&&!e.beforeClose()||(i.value=!0,clearTimeout(t),t=setTimeout(l,400),r.visible=!1,(h=e.closed)==null||h.call(e))}function l(){if(!i.value)return;const h=r.parent;i.value=!1,h.vLoadingAddClassList=void 0,a()}const u=jU(ce({name:"ElLoading",setup(h,{expose:f}){const{ns:p,zIndex:m}=XS("loading");return f({ns:p,zIndex:m}),()=>{const v=r.spinner||r.svg,y=dt("svg",{class:"circular",viewBox:r.svgViewBox?r.svgViewBox:"0 0 50 50",...v?{innerHTML:v}:{}},[dt("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),x=r.text?dt("p",{class:p.b("text")},[r.text]):void 0;return dt(Pn,{name:p.b("fade"),onAfterLeave:l},{default:ve(()=>[Nt(ne("div",{style:{backgroundColor:r.background||""},class:[p.b("mask"),r.customClass,r.fullscreen?"is-fullscreen":""]},[dt("div",{class:p.b("spinner")},[y,x])]),[[_i,r.visible]])])})}}})),d=u.mount(document.createElement("div"));return{...Gn(r),setText:n,removeElLoadingChild:s,close:o,handleAfterLeave:l,vm:d,get $el(){return d.$el}}}let Fw;const y5=function(e={}){if(!si)return;const t=Bdt(e);if(t.fullscreen&&Fw)return Fw;const i=Ldt({...t,closed:()=>{var n;(n=t.closed)==null||n.call(t),t.fullscreen&&(Fw=void 0)}});Ndt(t,t.parent,i),iV(t,t.parent,i),t.parent.vLoadingAddClassList=()=>iV(t,t.parent,i);let r=t.parent.getAttribute("loading-number");return r?r=`${Number.parseInt(r)+1}`:r="1",t.parent.setAttribute("loading-number",r),t.parent.appendChild(i.$el),ft(()=>i.visible.value=t.visible),t.fullscreen&&(Fw=i),i},Bdt=e=>{var t,i,r,n;let a;return Et(e.target)?a=(t=document.querySelector(e.target))!=null?t:document.body:a=e.target||document.body,{parent:a===document.body||e.body?document.body:a,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:a===document.body&&((i=e.fullscreen)!=null?i:!0),lock:(r=e.lock)!=null?r:!1,customClass:e.customClass||"",visible:(n=e.visible)!=null?n:!0,beforeClose:e.beforeClose,closed:e.closed,target:a}},Ndt=async(e,t,i)=>{const{nextZIndex:r}=i.vm.zIndex||i.vm._.exposed.zIndex,n={};if(e.fullscreen)i.originalPosition.value=Rd(document.body,"position"),i.originalOverflow.value=Rd(document.body,"overflow"),n.zIndex=r();else if(e.parent===document.body){i.originalPosition.value=Rd(document.body,"position"),await ft();for(const a of["top","left"]){const s=a==="top"?"scrollTop":"scrollLeft";n[a]=`${e.target.getBoundingClientRect()[a]+document.body[s]+document.documentElement[s]-Number.parseInt(Rd(document.body,`margin-${a}`),10)}px`}for(const a of["height","width"])n[a]=`${e.target.getBoundingClientRect()[a]}px`}else i.originalPosition.value=Rd(t,"position");for(const[a,s]of Object.entries(n))i.$el.style[a]=s},iV=(e,t,i)=>{const r=i.vm.ns||i.vm._.exposed.ns;["absolute","fixed","sticky"].includes(i.originalPosition.value)?Wa(t,r.bm("parent","relative")):Eo(t,r.bm("parent","relative")),e.fullscreen&&e.lock?Eo(t,r.bm("parent","hidden")):Wa(t,r.bm("parent","hidden"))},M2=Symbol("ElLoading"),rV=(e,t)=>{var i,r,n,a;const s=t.instance,o=h=>Ri(t.value)?t.value[h]:void 0,l=h=>{const f=Et(h)&&(s==null?void 0:s[h])||h;return f&&j(f)},c=h=>l(o(h)||e.getAttribute(`element-loading-${l8e(h)}`)),u=(i=o("fullscreen"))!=null?i:t.modifiers.fullscreen,d={text:c("text"),svg:c("svg"),svgViewBox:c("svgViewBox"),spinner:c("spinner"),background:c("background"),customClass:c("customClass"),fullscreen:u,target:(r=o("target"))!=null?r:u?void 0:e,body:(n=o("body"))!=null?n:t.modifiers.body,lock:(a=o("lock"))!=null?a:t.modifiers.lock};e[M2]={options:d,instance:y5(d)}},Fdt=(e,t)=>{for(const i of Object.keys(t))Ji(t[i])&&(t[i].value=e[i])},nV={mounted(e,t){t.value&&rV(e,t)},updated(e,t){const i=e[M2];t.oldValue!==t.value&&(t.value&&!t.oldValue?rV(e,t):t.value&&t.oldValue?Ri(t.value)&&Fdt(t.value,i.options):i==null||i.instance.close())},unmounted(e){var t;(t=e[M2])==null||t.instance.close(),e[M2]=null}},zdt={install(e){e.directive("loading",nV),e.config.globalProperties.$loading=y5},directive:nV,service:y5},yee=["success","info","warning","error"],Ra=Er({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:si?document.body:void 0}),Vdt=je({customClass:{type:String,default:Ra.customClass},center:{type:Boolean,default:Ra.center},dangerouslyUseHTMLString:{type:Boolean,default:Ra.dangerouslyUseHTMLString},duration:{type:Number,default:Ra.duration},icon:{type:zi,default:Ra.icon},id:{type:String,default:Ra.id},message:{type:be([String,Object,Function]),default:Ra.message},onClose:{type:be(Function),default:Ra.onClose},showClose:{type:Boolean,default:Ra.showClose},type:{type:String,values:yee,default:Ra.type},plain:{type:Boolean,default:Ra.plain},offset:{type:Number,default:Ra.offset},zIndex:{type:Number,default:Ra.zIndex},grouping:{type:Boolean,default:Ra.grouping},repeatNum:{type:Number,default:Ra.repeatNum}}),Udt={destroy:()=>!0},pl=oc([]),Hdt=e=>{const t=pl.findIndex(n=>n.id===e),i=pl[t];let r;return t>0&&(r=pl[t-1]),{current:i,prev:r}},jdt=e=>{const{prev:t}=Hdt(e);return t?t.vm.exposed.bottom.value:0},Wdt=(e,t)=>pl.findIndex(r=>r.id===e)>0?16:t,Gdt=ce({name:"ElMessage"}),$dt=ce({...Gdt,props:Vdt,emits:Udt,setup(e,{expose:t}){const i=e,{Close:r}=jI,{ns:n,zIndex:a}=XS("message"),{currentZIndex:s,nextZIndex:o}=a,l=j(),c=j(!1),u=j(0);let d;const h=O(()=>i.type?i.type==="error"?"danger":i.type:"info"),f=O(()=>{const E=i.type;return{[n.bm("icon",E)]:E&&gh[E]}}),p=O(()=>i.icon||gh[i.type]||""),m=O(()=>jdt(i.id)),v=O(()=>Wdt(i.id,i.offset)+m.value),y=O(()=>u.value+v.value),x=O(()=>({top:`${v.value}px`,zIndex:s.value}));function b(){i.duration!==0&&({stop:d}=qf(()=>{S()},i.duration))}function w(){d==null||d()}function S(){c.value=!1}function _({code:E}){E===at.esc&&S()}return Lt(()=>{b(),o(),c.value=!0}),Ne(()=>i.repeatNum,()=>{w(),b()}),Oi(document,"keydown",_),gr(l,()=>{u.value=l.value.getBoundingClientRect().height}),t({visible:c,bottom:y,close:S}),(E,C)=>(F(),De(Pn,{name:g(n).b("fade"),onBeforeLeave:E.onClose,onAfterLeave:A=>E.$emit("destroy"),persisted:""},{default:ve(()=>[Nt(ie("div",{id:E.id,ref_key:"messageRef",ref:l,class:U([g(n).b(),{[g(n).m(E.type)]:E.type},g(n).is("center",E.center),g(n).is("closable",E.showClose),g(n).is("plain",E.plain),E.customClass]),style:mt(g(x)),role:"alert",onMouseenter:w,onMouseleave:b},[E.repeatNum>1?(F(),De(g(_X),{key:0,value:E.repeatNum,type:g(h),class:U(g(n).e("badge"))},null,8,["value","type","class"])):Ae("v-if",!0),g(p)?(F(),De(g(ut),{key:1,class:U([g(n).e("icon"),g(f)])},{default:ve(()=>[(F(),De(jt(g(p))))]),_:1},8,["class"])):Ae("v-if",!0),Ee(E.$slots,"default",{},()=>[E.dangerouslyUseHTMLString?(F(),K(ht,{key:1},[Ae(" Caution here, message could've been compromised, never use user's input as message "),ie("p",{class:U(g(n).e("content")),innerHTML:E.message},null,10,["innerHTML"])],2112)):(F(),K("p",{key:0,class:U(g(n).e("content"))},Ye(E.message),3))]),E.showClose?(F(),De(g(ut),{key:2,class:U(g(n).e("closeBtn")),onClick:xt(S,["stop"])},{default:ve(()=>[ne(g(r))]),_:1},8,["class","onClick"])):Ae("v-if",!0)],46,["id"]),[[_i,c.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var Zdt=Ze($dt,[["__file","message.vue"]]);let qdt=1;const bee=e=>{const t=!e||Et(e)||rr(e)||Wt(e)?{message:e}:e,i={...Ra,...t};if(!i.appendTo)i.appendTo=document.body;else if(Et(i.appendTo)){let r=document.querySelector(i.appendTo);Xs(r)||(r=document.body),i.appendTo=r}return Gi(sl.grouping)&&!i.grouping&&(i.grouping=sl.grouping),gt(sl.duration)&&i.duration===3e3&&(i.duration=sl.duration),gt(sl.offset)&&i.offset===16&&(i.offset=sl.offset),Gi(sl.showClose)&&!i.showClose&&(i.showClose=sl.showClose),i},Ydt=e=>{const t=pl.indexOf(e);if(t===-1)return;pl.splice(t,1);const{handler:i}=e;i.close()},Kdt=({appendTo:e,...t},i)=>{const r=`message_${qdt++}`,n=t.onClose,a=document.createElement("div"),s={...t,id:r,onClose:()=>{n==null||n(),Ydt(u)},onDestroy:()=>{ah(null,a)}},o=ne(Zdt,s,Wt(s.message)||rr(s.message)?{default:Wt(s.message)?s.message:()=>s.message}:null);o.appContext=i||Lv._context,ah(o,a),e.appendChild(a.firstElementChild);const l=o.component,u={id:r,vnode:o,vm:l,handler:{close:()=>{l.exposed.visible.value=!1}},props:o.component.props};return u},Lv=(e={},t)=>{if(!si)return{close:()=>{}};const i=bee(e);if(i.grouping&&pl.length){const n=pl.find(({vnode:a})=>{var s;return((s=a.props)==null?void 0:s.message)===i.message});if(n)return n.props.repeatNum+=1,n.props.type=i.type,n.handler}if(gt(sl.max)&&pl.length>=sl.max)return{close:()=>{}};const r=Kdt(i,t);return pl.push(r),r.handler};yee.forEach(e=>{Lv[e]=(t={},i)=>{const r=bee(t);return Lv({...r,type:e},i)}});function Xdt(e){for(const t of pl)(!e||e===t.props.type)&&t.handler.close()}Lv.closeAll=Xdt;Lv._context=null;var Qdt=Lv;const Jdt=EK(Qdt,"$message"),eht=ce({name:"ElMessageBox",directives:{TrapFocus:HYe},components:{ElButton:Wn,ElFocusTrap:Ly,ElInput:Ha,ElOverlay:_8,ElIcon:ut,...jI},inheritAttrs:!1,props:{buttonSize:{type:String,validator:AK},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:t}){const{locale:i,zIndex:r,ns:n,size:a}=XS("message-box",O(()=>e.buttonSize)),{t:s}=i,{nextZIndex:o}=r,l=j(!1),c=bi({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:$d(_c),cancelButtonLoadingIcon:$d(_c),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:o()}),u=O(()=>{const R=c.type;return{[n.bm("icon",R)]:R&&gh[R]}}),d=ua(),h=ua(),f=O(()=>c.icon||gh[c.type]||""),p=O(()=>!!c.message),m=j(),v=j(),y=j(),x=j(),b=j(),w=O(()=>c.confirmButtonClass);Ne(()=>c.inputValue,async R=>{await ft(),e.boxType==="prompt"&&R!==null&&P()},{immediate:!0}),Ne(()=>l.value,R=>{var N,I;R&&(e.boxType!=="prompt"&&(c.autofocus?y.value=(I=(N=b.value)==null?void 0:N.$el)!=null?I:m.value:y.value=m.value),c.zIndex=o()),e.boxType==="prompt"&&(R?ft().then(()=>{var B;x.value&&x.value.$el&&(c.autofocus?y.value=(B=D())!=null?B:m.value:y.value=m.value)}):(c.editorErrorMessage="",c.validateError=!1))});const S=O(()=>e.draggable),_=O(()=>e.overflow);MK(m,v,S,_),Lt(async()=>{await ft(),e.closeOnHashChange&&window.addEventListener("hashchange",E)}),Bi(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",E)});function E(){l.value&&(l.value=!1,ft(()=>{c.action&&t("action",c.action)}))}const C=()=>{e.closeOnClickModal&&T(c.distinguishCancelAndClose?"close":"cancel")},A=t8(C),M=R=>{if(c.inputType!=="textarea")return R.preventDefault(),T("confirm")},T=R=>{var N;e.boxType==="prompt"&&R==="confirm"&&!P()||(c.action=R,c.beforeClose?(N=c.beforeClose)==null||N.call(c,R,c,E):E())},P=()=>{if(e.boxType==="prompt"){const R=c.inputPattern;if(R&&!R.test(c.inputValue||""))return c.editorErrorMessage=c.inputErrorMessage||s("el.messagebox.error"),c.validateError=!0,!1;const N=c.inputValidator;if(Wt(N)){const I=N(c.inputValue);if(I===!1)return c.editorErrorMessage=c.inputErrorMessage||s("el.messagebox.error"),c.validateError=!0,!1;if(Et(I))return c.editorErrorMessage=I,c.validateError=!0,!1}}return c.editorErrorMessage="",c.validateError=!1,!0},D=()=>{const R=x.value.$refs;return R.input||R.textarea},k=()=>{T("close")},L=()=>{e.closeOnPressEscape&&k()};return e.lockScroll&&$I(l),{...Gn(c),ns:n,overlayEvent:A,visible:l,hasMessage:p,typeClass:u,contentId:d,inputId:h,btnSize:a,iconComponent:f,confirmButtonClasses:w,rootRef:m,focusStartRef:y,headerRef:v,inputRef:x,confirmRef:b,doClose:E,handleClose:k,onCloseRequested:L,handleWrapperClick:C,handleInputEnter:M,handleAction:T,t:s}}});function tht(e,t,i,r,n,a){const s=Ht("el-icon"),o=Ht("close"),l=Ht("el-input"),c=Ht("el-button"),u=Ht("el-focus-trap"),d=Ht("el-overlay");return F(),De(Pn,{name:"fade-in-linear",onAfterLeave:h=>e.$emit("vanish"),persisted:""},{default:ve(()=>[Nt(ne(d,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:ve(()=>[ie("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:U(`${e.ns.namespace.value}-overlay-message-box`),onClick:e.overlayEvent.onClick,onMousedown:e.overlayEvent.onMousedown,onMouseup:e.overlayEvent.onMouseup},[ne(u,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:ve(()=>[ie("div",{ref:"rootRef",class:U([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:mt(e.customStyle),tabindex:"-1",onClick:xt(()=>{},["stop"])},[e.title!==null&&e.title!==void 0?(F(),K("div",{key:0,ref:"headerRef",class:U([e.ns.e("header"),{"show-close":e.showClose}])},[ie("div",{class:U(e.ns.e("title"))},[e.iconComponent&&e.center?(F(),De(s,{key:0,class:U([e.ns.e("status"),e.typeClass])},{default:ve(()=>[(F(),De(jt(e.iconComponent)))]),_:1},8,["class"])):Ae("v-if",!0),ie("span",null,Ye(e.title),1)],2),e.showClose?(F(),K("button",{key:0,type:"button",class:U(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:h=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),onKeydown:Hi(xt(h=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[ne(s,{class:U(e.ns.e("close"))},{default:ve(()=>[ne(o)]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):Ae("v-if",!0)],2)):Ae("v-if",!0),ie("div",{id:e.contentId,class:U(e.ns.e("content"))},[ie("div",{class:U(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(F(),De(s,{key:0,class:U([e.ns.e("status"),e.typeClass])},{default:ve(()=>[(F(),De(jt(e.iconComponent)))]),_:1},8,["class"])):Ae("v-if",!0),e.hasMessage?(F(),K("div",{key:1,class:U(e.ns.e("message"))},[Ee(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(F(),De(jt(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(F(),De(jt(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:ve(()=>[Xt(Ye(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):Ae("v-if",!0)],2),Nt(ie("div",{class:U(e.ns.e("input"))},[ne(l,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":h=>e.inputValue=h,type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:U({invalid:e.validateError}),onKeydown:Hi(e.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),ie("div",{class:U(e.ns.e("errormsg")),style:mt({visibility:e.editorErrorMessage?"visible":"hidden"})},Ye(e.editorErrorMessage),7)],2),[[_i,e.showInput]])],10,["id"]),ie("div",{class:U(e.ns.e("btns"))},[e.showCancelButton?(F(),De(c,{key:0,loading:e.cancelButtonLoading,"loading-icon":e.cancelButtonLoadingIcon,class:U([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:h=>e.handleAction("cancel"),onKeydown:Hi(xt(h=>e.handleAction("cancel"),["prevent"]),["enter"])},{default:ve(()=>[Xt(Ye(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):Ae("v-if",!0),Nt(ne(c,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,"loading-icon":e.confirmButtonLoadingIcon,class:U([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:h=>e.handleAction("confirm"),onKeydown:Hi(xt(h=>e.handleAction("confirm"),["prevent"]),["enter"])},{default:ve(()=>[Xt(Ye(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[_i,e.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[_i,e.visible]])]),_:3},8,["onAfterLeave"])}var iht=Ze(eht,[["render",tht],["__file","index.vue"]]);const q1=new Map,rht=e=>{let t=document.body;return e.appendTo&&(Et(e.appendTo)&&(t=document.querySelector(e.appendTo)),Xs(e.appendTo)&&(t=e.appendTo),Xs(t)||(t=document.body)),t},nht=(e,t,i=null)=>{const r=ne(iht,e,Wt(e.message)||rr(e.message)?{default:Wt(e.message)?e.message:()=>e.message}:null);return r.appContext=i,ah(r,t),rht(e).appendChild(t.firstElementChild),r.component},aht=()=>document.createElement("div"),sht=(e,t)=>{const i=aht();e.onVanish=()=>{ah(null,i),q1.delete(n)},e.onAction=a=>{const s=q1.get(n);let o;e.showInput?o={value:n.inputValue,action:a}:o=a,e.callback?e.callback(o,r.proxy):a==="cancel"||a==="close"?e.distinguishCancelAndClose&&a!=="cancel"?s.reject("close"):s.reject("cancel"):s.resolve(o)};const r=nht(e,i,t),n=r.proxy;for(const a in e)Ma(e,a)&&!Ma(n.$props,a)&&(n[a]=e[a]);return n.visible=!0,n};function v0(e,t=null){if(!si)return Promise.reject();let i;return Et(e)||rr(e)?e={message:e}:i=e.callback,new Promise((r,n)=>{const a=sht(e,t??v0._context);q1.set(a,{options:e,callback:i,resolve:r,reject:n})})}const oht=["alert","confirm","prompt"],lht={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};oht.forEach(e=>{v0[e]=cht(e)});function cht(e){return(t,i,r,n)=>{let a="";return Ri(i)?(r=i,a=""):Qi(i)?a="":a=i,v0(Object.assign({title:a,message:t,type:"",...lht[e]},r,{boxType:e}),n)}}v0.close=()=>{q1.forEach((e,t)=>{t.doClose()}),q1.clear()};v0._context=null;const wd=v0;wd.install=e=>{wd._context=e._context,e.config.globalProperties.$msgbox=wd,e.config.globalProperties.$messageBox=wd,e.config.globalProperties.$alert=wd.alert,e.config.globalProperties.$confirm=wd.confirm,e.config.globalProperties.$prompt=wd.prompt};const uht=wd,wee=["success","info","warning","error"],dht=je({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:zi},id:{type:String,default:""},message:{type:be([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:be(Function),default:()=>{}},onClose:{type:be(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...wee,""],default:""},zIndex:Number}),hht={destroy:()=>!0},fht=ce({name:"ElNotification"}),pht=ce({...fht,props:dht,emits:hht,setup(e,{expose:t}){const i=e,{ns:r,zIndex:n}=XS("notification"),{nextZIndex:a,currentZIndex:s}=n,{Close:o}=HI,l=j(!1);let c;const u=O(()=>{const b=i.type;return b&&gh[i.type]?r.m(b):""}),d=O(()=>i.type&&gh[i.type]||i.icon),h=O(()=>i.position.endsWith("right")?"right":"left"),f=O(()=>i.position.startsWith("top")?"top":"bottom"),p=O(()=>{var b;return{[f.value]:`${i.offset}px`,zIndex:(b=i.zIndex)!=null?b:s.value}});function m(){i.duration>0&&({stop:c}=qf(()=>{l.value&&y()},i.duration))}function v(){c==null||c()}function y(){l.value=!1}function x({code:b}){b===at.delete||b===at.backspace?v():b===at.esc?l.value&&y():m()}return Lt(()=>{m(),a(),l.value=!0}),Oi(document,"keydown",x),t({visible:l,close:y}),(b,w)=>(F(),De(Pn,{name:g(r).b("fade"),onBeforeLeave:b.onClose,onAfterLeave:S=>b.$emit("destroy"),persisted:""},{default:ve(()=>[Nt(ie("div",{id:b.id,class:U([g(r).b(),b.customClass,g(h)]),style:mt(g(p)),role:"alert",onMouseenter:v,onMouseleave:m,onClick:b.onClick},[g(d)?(F(),De(g(ut),{key:0,class:U([g(r).e("icon"),g(u)])},{default:ve(()=>[(F(),De(jt(g(d))))]),_:1},8,["class"])):Ae("v-if",!0),ie("div",{class:U(g(r).e("group"))},[ie("h2",{class:U(g(r).e("title")),textContent:Ye(b.title)},null,10,["textContent"]),Nt(ie("div",{class:U(g(r).e("content")),style:mt(b.title?void 0:{margin:0})},[Ee(b.$slots,"default",{},()=>[b.dangerouslyUseHTMLString?(F(),K(ht,{key:1},[Ae(" Caution here, message could've been compromised, never use user's input as message "),ie("p",{innerHTML:b.message},null,8,["innerHTML"])],2112)):(F(),K("p",{key:0},Ye(b.message),1))])],6),[[_i,b.message]]),b.showClose?(F(),De(g(ut),{key:0,class:U(g(r).e("closeBtn")),onClick:xt(y,["stop"])},{default:ve(()=>[ne(g(o))]),_:1},8,["class","onClick"])):Ae("v-if",!0)],2)],46,["id","onClick"]),[[_i,l.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var mht=Ze(pht,[["__file","notification.vue"]]);const C_={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},b5=16;let vht=1;const Bv=function(e={},t=null){if(!si)return{close:()=>{}};(Et(e)||rr(e))&&(e={message:e});const i=e.position||"top-right";let r=e.offset||0;C_[i].forEach(({vm:u})=>{var d;r+=(((d=u.el)==null?void 0:d.offsetHeight)||0)+b5}),r+=b5;const n=`notification_${vht++}`,a=e.onClose,s={...e,offset:r,id:n,onClose:()=>{ght(n,i,a)}};let o=document.body;Xs(e.appendTo)?o=e.appendTo:Et(e.appendTo)&&(o=document.querySelector(e.appendTo)),Xs(o)||(o=document.body);const l=document.createElement("div"),c=ne(mht,s,rr(s.message)?{default:()=>s.message}:null);return c.appContext=t??Bv._context,c.props.onDestroy=()=>{ah(null,l)},ah(c,l),C_[i].push({vm:c}),o.appendChild(l.firstElementChild),{close:()=>{c.component.exposed.visible.value=!1}}};wee.forEach(e=>{Bv[e]=(t={})=>((Et(t)||rr(t))&&(t={message:t}),Bv({...t,type:e}))});function ght(e,t,i){const r=C_[t],n=r.findIndex(({vm:c})=>{var u;return((u=c.component)==null?void 0:u.props.id)===e});if(n===-1)return;const{vm:a}=r[n];if(!a)return;i==null||i(a);const s=a.el.offsetHeight,o=t.split("-")[0];r.splice(n,1);const l=r.length;if(!(l<1))for(let c=n;c<l;c++){const{el:u,component:d}=r[c].vm,h=Number.parseInt(u.style[o],10)-s-b5;d.props.offset=h}}function yht(){for(const e of Object.values(C_))e.forEach(({vm:t})=>{t.component.exposed.visible.value=!1})}Bv.closeAll=yht;Bv._context=null;var bht=Bv;const wht=EK(bht,"$notify");var xht=[kdt,zdt,Jdt,uht,wht,tJ],X8=e$e([...Adt,...xht]);X8.install;X8.version;const _ht=Wo(e=>{e.vueApp.use(X8)}),Sht=["xlink:href"],Q8={__name:"svgIcon",props:{name:{type:String,required:!0},color:{type:String,default:""}},setup(e){const t=e,i=O(()=>`#icon-${t.name}`),r=O(()=>t.name?`svg-icon icon-${t.name}`:"svg-icon");return(n,a)=>(F(),K("svg",$t({class:r.value},n.$attrs,{style:{color:e.color}}),[ie("use",{"xlink:href":i.value},null,8,Sht)],16))}};if(typeof window<"u"){let e=function(){var t=document.body,i=document.getElementById("__svg__icons__dom__");i||(i=document.createElementNS("http://www.w3.org/2000/svg","svg"),i.style.position="absolute",i.style.width="0",i.style.height="0",i.id="__svg__icons__dom__",i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("xmlns:link","http://www.w3.org/1999/xlink")),i.innerHTML='<symbol fill="none"  viewBox="0 0 102 92" id="icon-1"><path d="M1.04 68.319a.5.5 0 1 0 0 1v-1Zm17.376.5h.5a.5.5 0 0 0-.5-.5v.5Zm0 11.09h-.5a.5.5 0 0 0 .5.5v-.5Zm8.708.5a.5.5 0 1 0 0-1v1ZM1.04 35.005a.5.5 0 1 0 0 1v-1Zm15.188.5v.5a.5.5 0 0 0 .5-.5h-.5Zm0-8.897v-.5a.5.5 0 0 0-.5.5h.5Zm8.708.5a.5.5 0 1 0 0-1v1ZM1.04 54.993a.5.5 0 1 0 0 1v-1ZM22.75 42.168v-.5a.5.5 0 0 0-.5.5h.5Zm8.708.5a.5.5 0 1 0 0-1v1Zm13 13.325a.5.5 0 0 0 0-1v1Zm48.293 8.356a.5.5 0 1 0-1 0h1Zm-4.955 22.099.358.35.002-.003-.36-.347ZM3.552 88.393l-.358.35.005.004.353-.354Zm0-70.269-.358-.35-.004.005.362.346Zm84.285 1.946.357-.35-.002-.003-.355.353Zm-9.599-4.351a.5.5 0 0 0 .971-.238l-.97.238ZM75.97 4.344l-.49.103a.45.45 0 0 0 .004.016l.486-.119Zm-.73-1.573.408-.29a.45.45 0 0 0-.017-.022l-.39.312Zm-1.295-1.158-.256.43.015.008.24-.438Zm-3.322-.456L70.516.67a.505.505 0 0 0-.025.006l.132.482Zm-52.34 13.878a.5.5 0 1 0 .266.964l-.266-.964Zm73.968 18.736a.5.5 0 1 0 0-1v1Zm-19.562-.5h-.5a.5.5 0 0 0 .5.5v-.5Zm0-8.898h.5a.5.5 0 0 0-.5-.5v.5Zm-6.52-.5a.5.5 0 1 0 0 1v-1ZM81.896 64.35a.5.5 0 1 0-1 0h1Zm-.5 11.091v.5a.5.5 0 0 0 .5-.5h-.5Zm-17.376-.5a.5.5 0 1 0 0 1v-1Zm-62.98-5.621h17.375v-1H1.041v1Zm16.875-.5v11.09h1V68.82h-1Zm.5 11.59h8.708v-1h-8.708v1ZM1.041 36.005h15.188v-1H1.04v1Zm15.688-.5v-8.897h-1v8.897h1Zm-.5-8.397h8.708v-1h-8.708v1ZM1.04 55.993H22.75v-1H1.04v1Zm22.209-.5V42.168h-1v13.325h1Zm-.5-12.825h8.708v-1H22.75v1Zm0 13.325h21.709v-1h-21.71v1ZM91.75 64.35V75.44h1V64.35h-1Zm0 11.091c0 4.007-1.568 7.814-4.315 10.66l.72.695a16.348 16.348 0 0 0 4.595-11.355h-1ZM87.44 86.098A14.604 14.604 0 0 1 77.023 90.5v1c4.186 0 8.203-1.71 11.13-4.702l-.714-.7ZM77.023 90.5H9.708v1h67.315v-1Zm-67.315 0c-2.168 0-4.23-.894-5.803-2.461l-.706.708C4.947 90.49 7.259 91.5 9.708 91.5v-1Zm-5.799-2.457a8.53 8.53 0 0 1-2.409-5.94h-1a9.53 9.53 0 0 0 2.694 6.64l.715-.7ZM1.5 82.103V24.415h-1v57.688h1Zm0-57.688c0-2.226.879-4.338 2.413-5.945l-.723-.69C1.484 19.564.5 21.921.5 24.414h1Zm2.409-5.94a8.147 8.147 0 0 1 5.799-2.458v-1a9.147 9.147 0 0 0-6.514 2.758l.715.7Zm5.799-2.458h67.355v-1H9.708v1Zm67.355 0c3.912 0 7.634 1.599 10.419 4.405l.71-.705c-2.966-2.987-6.94-4.7-11.129-4.7v1ZM87.48 20.42c2.743 2.803 4.313 6.65 4.313 10.658h1c0-4.267-1.67-8.366-4.598-11.357l-.715.7Zm4.313 10.658v11.091h1v-11.09h-1ZM79.209 15.481 76.455 4.225l-.971.238 2.754 11.256.971-.238Zm-2.75-11.24c-.14-.668-.462-1.269-.811-1.76l-.815.58c.3.42.544.895.647 1.386l.979-.206Zm-.828-1.782c-.383-.479-.837-.95-1.445-1.284l-.483.876c.445.244.802.601 1.147 1.033l.78-.625ZM74.2 1.183A4.984 4.984 0 0 0 72.397.54l-.145.99c.5.072 1.005.256 1.437.513l.512-.859ZM72.397.54c-.659-.097-1.297.002-1.88.13l.213.977c.55-.12 1.046-.187 1.522-.118l.145-.99ZM70.49.675l-52.208 14.36.266.964L70.756 1.64 70.49.676Zm21.801 40.993H79.25v1h13.042v-1Zm-13.042 0c-5.106 0-9.208 4.207-9.208 9.397h1c0-4.658 3.675-8.397 8.208-8.397v-1Zm-9.208 9.397v4.428h1v-4.428h-1Zm0 4.428c0 5.148 4.1 9.398 9.208 9.398v-1c-4.532 0-8.208-3.779-8.208-8.398h-1Zm9.208 9.398h13.042v-1H79.25v1Zm13.042 0c5.106 0 9.208-4.207 9.208-9.398h-1c0 4.659-3.674 8.398-8.208 8.398v1Zm9.208-9.398v-4.428h-1v4.428h1Zm0-4.428c0-5.19-4.102-9.397-9.208-9.397v1c4.534 0 8.208 3.739 8.208 8.397h1Zm-21.197 2.811a.601.601 0 0 1-.593-.617h-1c0 .886.7 1.617 1.593 1.617v-1Zm-.593-.617c0-.355.272-.618.593-.618v-1c-.893 0-1.593.731-1.593 1.618h1Zm.593 1.617a1.6 1.6 0 0 0 1.594-1.617h-1a.601.601 0 0 1-.594.617v1Zm1.594-1.617c0-.887-.7-1.618-1.594-1.618v1c.322 0 .594.263.594.618h1ZM41.219 42.785a.601.601 0 0 1-.594-.617h-1c0 .887.7 1.617 1.594 1.617v-1Zm-.594-.617c0-.355.272-.617.594-.617v-1a1.6 1.6 0 0 0-1.594 1.617h1Zm.594 1.617c.893 0 1.593-.73 1.593-1.617h-1a.601.601 0 0 1-.593.617v1Zm1.593-1.617c0-.887-.7-1.617-1.593-1.617v1c.321 0 .593.262.593.617h1Zm13.595-17.136a.601.601 0 0 1-.593-.617h-1c0 .886.7 1.617 1.593 1.617v-1Zm-.593-.617c0-.355.272-.618.593-.618v-1a1.6 1.6 0 0 0-1.593 1.618h1Zm.593 1.617c.894 0 1.594-.73 1.594-1.617h-1a.601.601 0 0 1-.594.617v1Zm1.594-1.617c0-.887-.7-1.618-1.594-1.618v1c.321 0 .594.263.594.618h1ZM36.885 80.527a.601.601 0 0 1-.594-.618h-1c0 .887.7 1.618 1.594 1.618v-1Zm-.594-.618c0-.355.273-.617.594-.617v-1c-.894 0-1.594.73-1.594 1.617h1Zm.553 1.618c.894 0 1.594-.731 1.594-1.618h-1a.601.601 0 0 1-.594.618v1Zm1.594-1.618a1.6 1.6 0 0 0-1.594-1.617v1c.322 0 .594.263.594.617h1Zm53.813-47.138H72.69v1h19.563v-1Zm-19.062.5v-8.898h-1v8.898h1Zm-.5-9.398h-6.52v1h6.52v-1Zm8.208 40.476V75.44h1V64.35h-1Zm.5 10.591H64.02v1h17.376v-1Z" fill="#fff" /></symbol><symbol fill="none"  viewBox="0 0 102 92" id="icon-11"><path d="M1.04 68.319a.5.5 0 1 0 0 1v-1Zm17.376.5h.5a.5.5 0 0 0-.5-.5v.5Zm0 11.09h-.5a.5.5 0 0 0 .5.5v-.5Zm8.708.5a.5.5 0 1 0 0-1v1ZM1.04 35.005a.5.5 0 1 0 0 1v-1Zm15.188.5v.5a.5.5 0 0 0 .5-.5h-.5Zm0-8.897v-.5a.5.5 0 0 0-.5.5h.5Zm8.708.5a.5.5 0 1 0 0-1v1ZM1.04 54.993a.5.5 0 1 0 0 1v-1ZM22.75 42.168v-.5a.5.5 0 0 0-.5.5h.5Zm8.708.5a.5.5 0 1 0 0-1v1Zm13 13.325a.5.5 0 0 0 0-1v1Zm48.293 8.356a.5.5 0 1 0-1 0h1Zm-4.955 22.099.358.35.002-.003-.36-.347ZM3.552 88.393l-.358.35.005.004.353-.354Zm0-70.269-.358-.35-.004.005.362.346Zm84.285 1.946.357-.35-.002-.003-.355.353Zm-9.599-4.351a.5.5 0 0 0 .971-.238l-.97.238ZM75.97 4.344l-.49.103a.45.45 0 0 0 .004.016l.486-.119Zm-.73-1.573.408-.29a.45.45 0 0 0-.017-.022l-.39.312Zm-1.295-1.158-.256.43.015.008.24-.438Zm-3.322-.456L70.516.67a.505.505 0 0 0-.025.006l.132.482Zm-52.34 13.878a.5.5 0 1 0 .266.964l-.266-.964Zm73.968 18.736a.5.5 0 1 0 0-1v1Zm-19.562-.5h-.5a.5.5 0 0 0 .5.5v-.5Zm0-8.898h.5a.5.5 0 0 0-.5-.5v.5Zm-6.52-.5a.5.5 0 1 0 0 1v-1ZM81.896 64.35a.5.5 0 1 0-1 0h1Zm-.5 11.091v.5a.5.5 0 0 0 .5-.5h-.5Zm-17.376-.5a.5.5 0 1 0 0 1v-1Zm-62.98-5.621h17.375v-1H1.041v1Zm16.875-.5v11.09h1V68.82h-1Zm.5 11.59h8.708v-1h-8.708v1ZM1.041 36.005h15.188v-1H1.04v1Zm15.688-.5v-8.897h-1v8.897h1Zm-.5-8.397h8.708v-1h-8.708v1ZM1.04 55.993H22.75v-1H1.04v1Zm22.209-.5V42.168h-1v13.325h1Zm-.5-12.825h8.708v-1H22.75v1Zm0 13.325h21.709v-1h-21.71v1ZM91.75 64.35V75.44h1V64.35h-1Zm0 11.091c0 4.007-1.568 7.814-4.315 10.66l.72.695a16.348 16.348 0 0 0 4.595-11.355h-1ZM87.44 86.098A14.604 14.604 0 0 1 77.023 90.5v1c4.186 0 8.203-1.71 11.13-4.702l-.714-.7ZM77.023 90.5H9.708v1h67.315v-1Zm-67.315 0c-2.168 0-4.23-.894-5.803-2.461l-.706.708C4.947 90.49 7.259 91.5 9.708 91.5v-1Zm-5.799-2.457a8.53 8.53 0 0 1-2.409-5.94h-1a9.53 9.53 0 0 0 2.694 6.64l.715-.7ZM1.5 82.103V24.415h-1v57.688h1Zm0-57.688c0-2.226.879-4.338 2.413-5.945l-.723-.69C1.484 19.564.5 21.921.5 24.414h1Zm2.409-5.94a8.147 8.147 0 0 1 5.799-2.458v-1a9.147 9.147 0 0 0-6.514 2.758l.715.7Zm5.799-2.458h67.355v-1H9.708v1Zm67.355 0c3.912 0 7.634 1.599 10.419 4.405l.71-.705c-2.966-2.987-6.94-4.7-11.129-4.7v1ZM87.48 20.42c2.743 2.803 4.313 6.65 4.313 10.658h1c0-4.267-1.67-8.366-4.598-11.357l-.715.7Zm4.313 10.658v11.091h1v-11.09h-1ZM79.209 15.481 76.455 4.225l-.971.238 2.754 11.256.971-.238Zm-2.75-11.24c-.14-.668-.462-1.269-.811-1.76l-.815.58c.3.42.544.895.647 1.386l.979-.206Zm-.828-1.782c-.383-.479-.837-.95-1.445-1.284l-.483.876c.445.244.802.601 1.147 1.033l.78-.625ZM74.2 1.183A4.984 4.984 0 0 0 72.397.54l-.145.99c.5.072 1.005.256 1.437.513l.512-.859ZM72.397.54c-.659-.097-1.297.002-1.88.13l.213.977c.55-.12 1.046-.187 1.522-.118l.145-.99ZM70.49.675l-52.208 14.36.266.964L70.756 1.64 70.49.676Zm21.801 40.993H79.25v1h13.042v-1Zm-13.042 0c-5.106 0-9.208 4.207-9.208 9.397h1c0-4.658 3.675-8.397 8.208-8.397v-1Zm-9.208 9.397v4.428h1v-4.428h-1Zm0 4.428c0 5.148 4.1 9.398 9.208 9.398v-1c-4.532 0-8.208-3.779-8.208-8.398h-1Zm9.208 9.398h13.042v-1H79.25v1Zm13.042 0c5.106 0 9.208-4.207 9.208-9.398h-1c0 4.659-3.674 8.398-8.208 8.398v1Zm9.208-9.398v-4.428h-1v4.428h1Zm0-4.428c0-5.19-4.102-9.397-9.208-9.397v1c4.534 0 8.208 3.739 8.208 8.397h1Zm-21.197 2.811a.601.601 0 0 1-.593-.617h-1c0 .886.7 1.617 1.593 1.617v-1Zm-.593-.617c0-.355.272-.618.593-.618v-1c-.893 0-1.593.731-1.593 1.618h1Zm.593 1.617a1.6 1.6 0 0 0 1.594-1.617h-1a.601.601 0 0 1-.594.617v1Zm1.594-1.617c0-.887-.7-1.618-1.594-1.618v1c.322 0 .594.263.594.618h1ZM41.219 42.785a.601.601 0 0 1-.594-.617h-1c0 .887.7 1.617 1.594 1.617v-1Zm-.594-.617c0-.355.272-.617.594-.617v-1a1.6 1.6 0 0 0-1.594 1.617h1Zm.594 1.617c.893 0 1.593-.73 1.593-1.617h-1a.601.601 0 0 1-.593.617v1Zm1.593-1.617c0-.887-.7-1.617-1.593-1.617v1c.321 0 .593.262.593.617h1Zm13.595-17.136a.601.601 0 0 1-.593-.617h-1c0 .886.7 1.617 1.593 1.617v-1Zm-.593-.617c0-.355.272-.618.593-.618v-1a1.6 1.6 0 0 0-1.593 1.618h1Zm.593 1.617c.894 0 1.594-.73 1.594-1.617h-1a.601.601 0 0 1-.594.617v1Zm1.594-1.617c0-.887-.7-1.618-1.594-1.618v1c.321 0 .594.263.594.618h1ZM36.885 80.527a.601.601 0 0 1-.594-.618h-1c0 .887.7 1.618 1.594 1.618v-1Zm-.594-.618c0-.355.273-.617.594-.617v-1c-.894 0-1.594.73-1.594 1.617h1Zm.553 1.618c.894 0 1.594-.731 1.594-1.618h-1a.601.601 0 0 1-.594.618v1Zm1.594-1.618a1.6 1.6 0 0 0-1.594-1.617v1c.322 0 .594.263.594.617h1Zm53.813-47.138H72.69v1h19.563v-1Zm-19.062.5v-8.898h-1v8.898h1Zm-.5-9.398h-6.52v1h6.52v-1Zm8.208 40.476V75.44h1V64.35h-1Zm.5 10.591H64.02v1h17.376v-1Z" fill="#fff" /></symbol><symbol fill="none"  viewBox="0 0 102 92" id="icon-111"><path d="M1.04 68.319a.5.5 0 1 0 0 1v-1Zm17.376.5h.5a.5.5 0 0 0-.5-.5v.5Zm0 11.09h-.5a.5.5 0 0 0 .5.5v-.5Zm8.708.5a.5.5 0 1 0 0-1v1ZM1.04 35.005a.5.5 0 1 0 0 1v-1Zm15.188.5v.5a.5.5 0 0 0 .5-.5h-.5Zm0-8.897v-.5a.5.5 0 0 0-.5.5h.5Zm8.708.5a.5.5 0 1 0 0-1v1ZM1.04 54.993a.5.5 0 1 0 0 1v-1ZM22.75 42.168v-.5a.5.5 0 0 0-.5.5h.5Zm8.708.5a.5.5 0 1 0 0-1v1Zm13 13.325a.5.5 0 0 0 0-1v1Zm48.293 8.356a.5.5 0 1 0-1 0h1Zm-4.955 22.099.358.35.002-.003-.36-.347ZM3.552 88.393l-.358.35.005.004.353-.354Zm0-70.269-.358-.35-.004.005.362.346Zm84.285 1.946.357-.35-.002-.003-.355.353Zm-9.599-4.351a.5.5 0 0 0 .971-.238l-.97.238ZM75.97 4.344l-.49.103a.45.45 0 0 0 .004.016l.486-.119Zm-.73-1.573.408-.29a.45.45 0 0 0-.017-.022l-.39.312Zm-1.295-1.158-.256.43.015.008.24-.438Zm-3.322-.456L70.516.67a.505.505 0 0 0-.025.006l.132.482Zm-52.34 13.878a.5.5 0 1 0 .266.964l-.266-.964Zm73.968 18.736a.5.5 0 1 0 0-1v1Zm-19.562-.5h-.5a.5.5 0 0 0 .5.5v-.5Zm0-8.898h.5a.5.5 0 0 0-.5-.5v.5Zm-6.52-.5a.5.5 0 1 0 0 1v-1ZM81.896 64.35a.5.5 0 1 0-1 0h1Zm-.5 11.091v.5a.5.5 0 0 0 .5-.5h-.5Zm-17.376-.5a.5.5 0 1 0 0 1v-1Zm-62.98-5.621h17.375v-1H1.041v1Zm16.875-.5v11.09h1V68.82h-1Zm.5 11.59h8.708v-1h-8.708v1ZM1.041 36.005h15.188v-1H1.04v1Zm15.688-.5v-8.897h-1v8.897h1Zm-.5-8.397h8.708v-1h-8.708v1ZM1.04 55.993H22.75v-1H1.04v1Zm22.209-.5V42.168h-1v13.325h1Zm-.5-12.825h8.708v-1H22.75v1Zm0 13.325h21.709v-1h-21.71v1ZM91.75 64.35V75.44h1V64.35h-1Zm0 11.091c0 4.007-1.568 7.814-4.315 10.66l.72.695a16.348 16.348 0 0 0 4.595-11.355h-1ZM87.44 86.098A14.604 14.604 0 0 1 77.023 90.5v1c4.186 0 8.203-1.71 11.13-4.702l-.714-.7ZM77.023 90.5H9.708v1h67.315v-1Zm-67.315 0c-2.168 0-4.23-.894-5.803-2.461l-.706.708C4.947 90.49 7.259 91.5 9.708 91.5v-1Zm-5.799-2.457a8.53 8.53 0 0 1-2.409-5.94h-1a9.53 9.53 0 0 0 2.694 6.64l.715-.7ZM1.5 82.103V24.415h-1v57.688h1Zm0-57.688c0-2.226.879-4.338 2.413-5.945l-.723-.69C1.484 19.564.5 21.921.5 24.414h1Zm2.409-5.94a8.147 8.147 0 0 1 5.799-2.458v-1a9.147 9.147 0 0 0-6.514 2.758l.715.7Zm5.799-2.458h67.355v-1H9.708v1Zm67.355 0c3.912 0 7.634 1.599 10.419 4.405l.71-.705c-2.966-2.987-6.94-4.7-11.129-4.7v1ZM87.48 20.42c2.743 2.803 4.313 6.65 4.313 10.658h1c0-4.267-1.67-8.366-4.598-11.357l-.715.7Zm4.313 10.658v11.091h1v-11.09h-1ZM79.209 15.481 76.455 4.225l-.971.238 2.754 11.256.971-.238Zm-2.75-11.24c-.14-.668-.462-1.269-.811-1.76l-.815.58c.3.42.544.895.647 1.386l.979-.206Zm-.828-1.782c-.383-.479-.837-.95-1.445-1.284l-.483.876c.445.244.802.601 1.147 1.033l.78-.625ZM74.2 1.183A4.984 4.984 0 0 0 72.397.54l-.145.99c.5.072 1.005.256 1.437.513l.512-.859ZM72.397.54c-.659-.097-1.297.002-1.88.13l.213.977c.55-.12 1.046-.187 1.522-.118l.145-.99ZM70.49.675l-52.208 14.36.266.964L70.756 1.64 70.49.676Zm21.801 40.993H79.25v1h13.042v-1Zm-13.042 0c-5.106 0-9.208 4.207-9.208 9.397h1c0-4.658 3.675-8.397 8.208-8.397v-1Zm-9.208 9.397v4.428h1v-4.428h-1Zm0 4.428c0 5.148 4.1 9.398 9.208 9.398v-1c-4.532 0-8.208-3.779-8.208-8.398h-1Zm9.208 9.398h13.042v-1H79.25v1Zm13.042 0c5.106 0 9.208-4.207 9.208-9.398h-1c0 4.659-3.674 8.398-8.208 8.398v1Zm9.208-9.398v-4.428h-1v4.428h1Zm0-4.428c0-5.19-4.102-9.397-9.208-9.397v1c4.534 0 8.208 3.739 8.208 8.397h1Zm-21.197 2.811a.601.601 0 0 1-.593-.617h-1c0 .886.7 1.617 1.593 1.617v-1Zm-.593-.617c0-.355.272-.618.593-.618v-1c-.893 0-1.593.731-1.593 1.618h1Zm.593 1.617a1.6 1.6 0 0 0 1.594-1.617h-1a.601.601 0 0 1-.594.617v1Zm1.594-1.617c0-.887-.7-1.618-1.594-1.618v1c.322 0 .594.263.594.618h1ZM41.219 42.785a.601.601 0 0 1-.594-.617h-1c0 .887.7 1.617 1.594 1.617v-1Zm-.594-.617c0-.355.272-.617.594-.617v-1a1.6 1.6 0 0 0-1.594 1.617h1Zm.594 1.617c.893 0 1.593-.73 1.593-1.617h-1a.601.601 0 0 1-.593.617v1Zm1.593-1.617c0-.887-.7-1.617-1.593-1.617v1c.321 0 .593.262.593.617h1Zm13.595-17.136a.601.601 0 0 1-.593-.617h-1c0 .886.7 1.617 1.593 1.617v-1Zm-.593-.617c0-.355.272-.618.593-.618v-1a1.6 1.6 0 0 0-1.593 1.618h1Zm.593 1.617c.894 0 1.594-.73 1.594-1.617h-1a.601.601 0 0 1-.594.617v1Zm1.594-1.617c0-.887-.7-1.618-1.594-1.618v1c.321 0 .594.263.594.618h1ZM36.885 80.527a.601.601 0 0 1-.594-.618h-1c0 .887.7 1.618 1.594 1.618v-1Zm-.594-.618c0-.355.273-.617.594-.617v-1c-.894 0-1.594.73-1.594 1.617h1Zm.553 1.618c.894 0 1.594-.731 1.594-1.618h-1a.601.601 0 0 1-.594.618v1Zm1.594-1.618a1.6 1.6 0 0 0-1.594-1.617v1c.322 0 .594.263.594.617h1Zm53.813-47.138H72.69v1h19.563v-1Zm-19.062.5v-8.898h-1v8.898h1Zm-.5-9.398h-6.52v1h6.52v-1Zm8.208 40.476V75.44h1V64.35h-1Zm.5 10.591H64.02v1h17.376v-1Z" fill="#FC15EF" /></symbol><symbol fill="none"  viewBox="0 0 92 92" id="icon-2"><path d="M24.454 12.206a.5.5 0 0 0 0 1v-1Zm9.777 1a.5.5 0 0 0 0-1v1ZM24.454 45.48a.5.5 0 0 0 0 1v-1Zm9.777 1a.5.5 0 1 0 0-1v1Zm-9.777 32.315a.5.5 0 0 0 0 1v-1Zm9.777 1a.5.5 0 1 0 0-1v1Zm23.496-67.588a.5.5 0 1 0 0 1v-1Zm9.777 1a.5.5 0 0 0 0-1v1ZM57.727 45.48a.5.5 0 1 0 0 1v-1Zm9.777 1a.5.5 0 1 0 0-1v1Zm-9.777 32.315a.5.5 0 1 0 0 1v-1Zm9.777 1a.5.5 0 1 0 0-1v1Zm12.29-55.34a.5.5 0 1 0-1 0h1Zm-1 9.777a.5.5 0 0 0 1 0h-1ZM46.52 24.454a.5.5 0 0 0-1 0h1Zm-1 9.777a.5.5 0 1 0 1 0h-1Zm-32.315-9.777a.5.5 0 0 0-1 0h1Zm-1 9.777a.5.5 0 0 0 1 0h-1Zm67.588 23.496a.5.5 0 1 0-1 0h1Zm-1 9.777a.5.5 0 0 0 1 0h-1ZM46.52 57.727a.5.5 0 1 0-1 0h1Zm-1 9.777a.5.5 0 1 0 1 0h-1Zm-32.315-9.777a.5.5 0 1 0-1 0h1Zm-1 9.777a.5.5 0 0 0 1 0h-1ZM1.5 4.902A3.368 3.368 0 0 1 4.902 1.5v-1A4.368 4.368 0 0 0 .5 4.902h1ZM4.902 1.5h15.65v-1H4.902v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1A4.395 4.395 0 0 0 20.552.5v1Zm3.402 3.402v15.65h1V4.902h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1Zm-3.402 3.402H4.902v1h15.65v-1Zm-15.65 0A3.395 3.395 0 0 1 1.5 20.552h-1a4.395 4.395 0 0 0 4.402 4.402v-1ZM1.5 20.552V4.902h-1v15.65h1Zm6.804-7.846a4.395 4.395 0 0 0 4.402 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.402 4.402c2.416 0 4.402-1.986 4.402-4.402h-1a3.422 3.422 0 0 1-3.402 3.402v1Zm4.402-4.402a4.395 4.395 0 0 0-4.402-4.402v1c1.867 0 3.402 1.5 3.402 3.402h1Zm-4.402-4.402a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1ZM8.304 45.98a4.395 4.395 0 0 0 4.402 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.402 4.402c2.416 0 4.402-1.986 4.402-4.402h-1a3.422 3.422 0 0 1-3.402 3.402v1Zm4.402-4.402a4.395 4.395 0 0 0-4.402-4.402v1c1.867 0 3.402 1.5 3.402 3.402h1Zm-4.402-4.402a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1ZM8.304 79.252a4.395 4.395 0 0 0 4.402 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.402 4.402c2.416 0 4.402-1.986 4.402-4.402h-1a3.422 3.422 0 0 1-3.402 3.402v1Zm4.402-4.402a4.395 4.395 0 0 0-4.402-4.402v1c1.867 0 3.402 1.5 3.402 3.402h1Zm-4.402-4.402a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1Zm28.87-62.144a4.395 4.395 0 0 0 4.403 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.403 4.402c2.416 0 4.402-1.986 4.402-4.402h-1a3.422 3.422 0 0 1-3.402 3.402v1Zm4.402-4.402a4.395 4.395 0 0 0-4.402-4.402v1c1.867 0 3.402 1.5 3.402 3.402h1ZM45.98 8.304a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1Zm28.87 4.402a4.395 4.395 0 0 0 4.403 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.403 4.402a4.395 4.395 0 0 0 4.402-4.402h-1c0 1.867-1.5 3.402-3.402 3.402v1Zm4.402-4.402c0-2.454-1.983-4.444-4.402-4.444v1c1.86 0 3.402 1.535 3.402 3.444h1Zm-4.402-4.444a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1ZM41.577 45.98a4.395 4.395 0 0 0 4.402 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.402 4.402c2.416 0 4.402-1.986 4.402-4.402h-1a3.422 3.422 0 0 1-3.402 3.402v1Zm4.402-4.402a4.395 4.395 0 0 0-4.402-4.402v1c1.867 0 3.402 1.5 3.402 3.402h1Zm-4.402-4.402a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1Zm28.87 4.402a4.395 4.395 0 0 0 4.403 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.403 4.402a4.395 4.395 0 0 0 4.402-4.402h-1c0 1.867-1.5 3.402-3.402 3.402v1Zm4.402-4.402c0-2.454-1.983-4.444-4.402-4.444v1c1.86 0 3.402 1.535 3.402 3.444h1Zm-4.402-4.444a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1ZM41.577 79.252a4.395 4.395 0 0 0 4.402 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.402 4.402c2.416 0 4.402-1.986 4.402-4.402h-1a3.422 3.422 0 0 1-3.402 3.402v1Zm4.402-4.402a4.395 4.395 0 0 0-4.402-4.402v1c1.867 0 3.402 1.5 3.402 3.402h1ZM45.98 74.85a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1Zm28.87 4.402a4.395 4.395 0 0 0 4.403 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.403 4.402a4.395 4.395 0 0 0 4.402-4.402h-1c0 1.867-1.5 3.402-3.402 3.402v1Zm4.402-4.402c0-2.455-1.983-4.444-4.402-4.444v1c1.86 0 3.402 1.535 3.402 3.444h1Zm-4.402-4.444a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1ZM34.772 4.902A3.395 3.395 0 0 1 38.176 1.5v-1a4.395 4.395 0 0 0-4.402 4.402h1ZM38.176 1.5h15.65v-1h-15.65v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1A4.395 4.395 0 0 0 53.825.5v1Zm3.402 3.402v15.65h1V4.902h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1Zm-3.402 3.402h-15.65v1h15.65v-1Zm-15.65 0a3.395 3.395 0 0 1-3.402-3.402h-1a4.395 4.395 0 0 0 4.402 4.402v-1Zm-3.402-3.402V4.902h-1v15.65h1Zm33.273-15.65A3.395 3.395 0 0 1 71.448 1.5v-1a4.395 4.395 0 0 0-4.402 4.402h1ZM71.448 1.5h15.65v-1h-15.65v1Zm15.65 0A3.395 3.395 0 0 1 90.5 4.902h1A4.395 4.395 0 0 0 87.098.5v1ZM90.5 4.902v15.65h1V4.902h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1Zm-3.402 3.402h-15.65v1h15.65v-1Zm-15.65 0a3.395 3.395 0 0 1-3.402-3.402h-1a4.395 4.395 0 0 0 4.402 4.402v-1Zm-3.402-3.402V4.902h-1v15.65h1ZM1.5 38.175a3.395 3.395 0 0 1 3.402-3.402v-1A4.395 4.395 0 0 0 .5 38.175h1Zm3.402-3.402h15.65v-1H4.902v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1a4.395 4.395 0 0 0-4.402-4.402v1Zm3.402 3.402v15.65h1v-15.65h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1Zm-3.402 3.402H4.902v1h15.65v-1Zm-15.65 0A3.395 3.395 0 0 1 1.5 53.825h-1a4.395 4.395 0 0 0 4.402 4.402v-1ZM1.5 53.825v-15.65h-1v15.65h1Zm0 17.623a3.395 3.395 0 0 1 3.402-3.402v-1A4.395 4.395 0 0 0 .5 71.448h1Zm3.402-3.402h15.65v-1H4.902v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1a4.395 4.395 0 0 0-4.402-4.402v1Zm3.402 3.402v15.65h1v-15.65h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1ZM20.552 90.5H4.902v1h15.65v-1Zm-15.65 0A3.395 3.395 0 0 1 1.5 87.098h-1A4.395 4.395 0 0 0 4.902 91.5v-1ZM1.5 87.098v-15.65h-1v15.65h1Zm33.273-48.923a3.395 3.395 0 0 1 3.402-3.402v-1a4.395 4.395 0 0 0-4.402 4.402h1Zm3.402-3.402h15.65v-1h-15.65v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1a4.395 4.395 0 0 0-4.402-4.402v1Zm3.402 3.402v15.65h1v-15.65h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1Zm-3.402 3.402h-15.65v1h15.65v-1Zm-15.65 0a3.395 3.395 0 0 1-3.402-3.402h-1a4.395 4.395 0 0 0 4.402 4.402v-1Zm-3.402-3.402v-15.65h-1v15.65h1Zm0 17.623a3.395 3.395 0 0 1 3.402-3.402v-1a4.395 4.395 0 0 0-4.402 4.402h1Zm3.402-3.402h15.65v-1h-15.65v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1a4.395 4.395 0 0 0-4.402-4.402v1Zm3.402 3.402v15.65h1v-15.65h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1ZM53.825 90.5h-15.65v1h15.65v-1Zm-15.65 0a3.395 3.395 0 0 1-3.402-3.402h-1a4.395 4.395 0 0 0 4.402 4.402v-1Zm-3.402-3.402v-15.65h-1v15.65h1Zm33.273-48.923a3.395 3.395 0 0 1 3.402-3.402v-1a4.395 4.395 0 0 0-4.402 4.402h1Zm3.402-3.402h15.65v-1h-15.65v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1a4.395 4.395 0 0 0-4.402-4.402v1Zm3.402 3.402v15.65h1v-15.65h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1Zm-3.402 3.402h-15.65v1h15.65v-1Zm-15.65 0a3.395 3.395 0 0 1-3.402-3.402h-1a4.395 4.395 0 0 0 4.402 4.402v-1Zm-3.402-3.402v-15.65h-1v15.65h1Zm0 17.623a3.395 3.395 0 0 1 3.402-3.402v-1a4.395 4.395 0 0 0-4.402 4.402h1Zm3.402-3.402h15.65v-1h-15.65v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1a4.395 4.395 0 0 0-4.402-4.402v1Zm3.402 3.402v15.65h1v-15.65h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1ZM87.098 90.5h-15.65v1h15.65v-1Zm-15.65 0a3.395 3.395 0 0 1-3.402-3.402h-1a4.395 4.395 0 0 0 4.402 4.402v-1Zm-3.402-3.402v-15.65h-1v15.65h1ZM24.454 13.206h9.777v-1h-9.777v1Zm0 33.273h9.777v-1h-9.777v1Zm0 33.315h9.777v-1h-9.777v1Zm33.273-66.588h9.777v-1h-9.777v1Zm0 33.273h9.777v-1h-9.777v1Zm0 33.315h9.777v-1h-9.777v1Zm21.067-55.34v9.777h1v-9.777h-1Zm-33.273 0v9.777h1v-9.777h-1Zm-33.315 0v9.777h1v-9.777h-1Zm66.588 33.273v9.777h1v-9.777h-1Zm-33.273 0v9.777h1v-9.777h-1Zm-33.315 0v9.777h1v-9.777h-1Z" fill="#fff" /></symbol><symbol fill="none"  viewBox="0 0 92 92" id="icon-22"><path d="M24.454 12.206a.5.5 0 0 0 0 1v-1Zm9.777 1a.5.5 0 0 0 0-1v1ZM24.454 45.48a.5.5 0 0 0 0 1v-1Zm9.777 1a.5.5 0 1 0 0-1v1Zm-9.777 32.315a.5.5 0 0 0 0 1v-1Zm9.777 1a.5.5 0 1 0 0-1v1Zm23.496-67.588a.5.5 0 1 0 0 1v-1Zm9.777 1a.5.5 0 0 0 0-1v1ZM57.727 45.48a.5.5 0 1 0 0 1v-1Zm9.777 1a.5.5 0 1 0 0-1v1Zm-9.777 32.315a.5.5 0 1 0 0 1v-1Zm9.777 1a.5.5 0 1 0 0-1v1Zm12.29-55.34a.5.5 0 1 0-1 0h1Zm-1 9.777a.5.5 0 0 0 1 0h-1ZM46.52 24.454a.5.5 0 0 0-1 0h1Zm-1 9.777a.5.5 0 1 0 1 0h-1Zm-32.315-9.777a.5.5 0 0 0-1 0h1Zm-1 9.777a.5.5 0 0 0 1 0h-1Zm67.588 23.496a.5.5 0 1 0-1 0h1Zm-1 9.777a.5.5 0 0 0 1 0h-1ZM46.52 57.727a.5.5 0 1 0-1 0h1Zm-1 9.777a.5.5 0 1 0 1 0h-1Zm-32.315-9.777a.5.5 0 1 0-1 0h1Zm-1 9.777a.5.5 0 0 0 1 0h-1ZM1.5 4.902A3.368 3.368 0 0 1 4.902 1.5v-1A4.368 4.368 0 0 0 .5 4.902h1ZM4.902 1.5h15.65v-1H4.902v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1A4.395 4.395 0 0 0 20.552.5v1Zm3.402 3.402v15.65h1V4.902h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1Zm-3.402 3.402H4.902v1h15.65v-1Zm-15.65 0A3.395 3.395 0 0 1 1.5 20.552h-1a4.395 4.395 0 0 0 4.402 4.402v-1ZM1.5 20.552V4.902h-1v15.65h1Zm6.804-7.846a4.395 4.395 0 0 0 4.402 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.402 4.402c2.416 0 4.402-1.986 4.402-4.402h-1a3.422 3.422 0 0 1-3.402 3.402v1Zm4.402-4.402a4.395 4.395 0 0 0-4.402-4.402v1c1.867 0 3.402 1.5 3.402 3.402h1Zm-4.402-4.402a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1ZM8.304 45.98a4.395 4.395 0 0 0 4.402 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.402 4.402c2.416 0 4.402-1.986 4.402-4.402h-1a3.422 3.422 0 0 1-3.402 3.402v1Zm4.402-4.402a4.395 4.395 0 0 0-4.402-4.402v1c1.867 0 3.402 1.5 3.402 3.402h1Zm-4.402-4.402a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1ZM8.304 79.252a4.395 4.395 0 0 0 4.402 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.402 4.402c2.416 0 4.402-1.986 4.402-4.402h-1a3.422 3.422 0 0 1-3.402 3.402v1Zm4.402-4.402a4.395 4.395 0 0 0-4.402-4.402v1c1.867 0 3.402 1.5 3.402 3.402h1Zm-4.402-4.402a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1Zm28.87-62.144a4.395 4.395 0 0 0 4.403 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.403 4.402c2.416 0 4.402-1.986 4.402-4.402h-1a3.422 3.422 0 0 1-3.402 3.402v1Zm4.402-4.402a4.395 4.395 0 0 0-4.402-4.402v1c1.867 0 3.402 1.5 3.402 3.402h1ZM45.98 8.304a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1Zm28.87 4.402a4.395 4.395 0 0 0 4.403 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.403 4.402a4.395 4.395 0 0 0 4.402-4.402h-1c0 1.867-1.5 3.402-3.402 3.402v1Zm4.402-4.402c0-2.454-1.983-4.444-4.402-4.444v1c1.86 0 3.402 1.535 3.402 3.444h1Zm-4.402-4.444a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1ZM41.577 45.98a4.395 4.395 0 0 0 4.402 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.402 4.402c2.416 0 4.402-1.986 4.402-4.402h-1a3.422 3.422 0 0 1-3.402 3.402v1Zm4.402-4.402a4.395 4.395 0 0 0-4.402-4.402v1c1.867 0 3.402 1.5 3.402 3.402h1Zm-4.402-4.402a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1Zm28.87 4.402a4.395 4.395 0 0 0 4.403 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.403 4.402a4.395 4.395 0 0 0 4.402-4.402h-1c0 1.867-1.5 3.402-3.402 3.402v1Zm4.402-4.402c0-2.454-1.983-4.444-4.402-4.444v1c1.86 0 3.402 1.535 3.402 3.444h1Zm-4.402-4.444a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1ZM41.577 79.252a4.395 4.395 0 0 0 4.402 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.402 4.402c2.416 0 4.402-1.986 4.402-4.402h-1a3.422 3.422 0 0 1-3.402 3.402v1Zm4.402-4.402a4.395 4.395 0 0 0-4.402-4.402v1c1.867 0 3.402 1.5 3.402 3.402h1ZM45.98 74.85a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1Zm28.87 4.402a4.395 4.395 0 0 0 4.403 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.403 4.402a4.395 4.395 0 0 0 4.402-4.402h-1c0 1.867-1.5 3.402-3.402 3.402v1Zm4.402-4.402c0-2.455-1.983-4.444-4.402-4.444v1c1.86 0 3.402 1.535 3.402 3.444h1Zm-4.402-4.444a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1ZM34.772 4.902A3.395 3.395 0 0 1 38.176 1.5v-1a4.395 4.395 0 0 0-4.402 4.402h1ZM38.176 1.5h15.65v-1h-15.65v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1A4.395 4.395 0 0 0 53.825.5v1Zm3.402 3.402v15.65h1V4.902h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1Zm-3.402 3.402h-15.65v1h15.65v-1Zm-15.65 0a3.395 3.395 0 0 1-3.402-3.402h-1a4.395 4.395 0 0 0 4.402 4.402v-1Zm-3.402-3.402V4.902h-1v15.65h1Zm33.273-15.65A3.395 3.395 0 0 1 71.448 1.5v-1a4.395 4.395 0 0 0-4.402 4.402h1ZM71.448 1.5h15.65v-1h-15.65v1Zm15.65 0A3.395 3.395 0 0 1 90.5 4.902h1A4.395 4.395 0 0 0 87.098.5v1ZM90.5 4.902v15.65h1V4.902h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1Zm-3.402 3.402h-15.65v1h15.65v-1Zm-15.65 0a3.395 3.395 0 0 1-3.402-3.402h-1a4.395 4.395 0 0 0 4.402 4.402v-1Zm-3.402-3.402V4.902h-1v15.65h1ZM1.5 38.175a3.395 3.395 0 0 1 3.402-3.402v-1A4.395 4.395 0 0 0 .5 38.175h1Zm3.402-3.402h15.65v-1H4.902v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1a4.395 4.395 0 0 0-4.402-4.402v1Zm3.402 3.402v15.65h1v-15.65h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1Zm-3.402 3.402H4.902v1h15.65v-1Zm-15.65 0A3.395 3.395 0 0 1 1.5 53.825h-1a4.395 4.395 0 0 0 4.402 4.402v-1ZM1.5 53.825v-15.65h-1v15.65h1Zm0 17.623a3.395 3.395 0 0 1 3.402-3.402v-1A4.395 4.395 0 0 0 .5 71.448h1Zm3.402-3.402h15.65v-1H4.902v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1a4.395 4.395 0 0 0-4.402-4.402v1Zm3.402 3.402v15.65h1v-15.65h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1ZM20.552 90.5H4.902v1h15.65v-1Zm-15.65 0A3.395 3.395 0 0 1 1.5 87.098h-1A4.395 4.395 0 0 0 4.902 91.5v-1ZM1.5 87.098v-15.65h-1v15.65h1Zm33.273-48.923a3.395 3.395 0 0 1 3.402-3.402v-1a4.395 4.395 0 0 0-4.402 4.402h1Zm3.402-3.402h15.65v-1h-15.65v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1a4.395 4.395 0 0 0-4.402-4.402v1Zm3.402 3.402v15.65h1v-15.65h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1Zm-3.402 3.402h-15.65v1h15.65v-1Zm-15.65 0a3.395 3.395 0 0 1-3.402-3.402h-1a4.395 4.395 0 0 0 4.402 4.402v-1Zm-3.402-3.402v-15.65h-1v15.65h1Zm0 17.623a3.395 3.395 0 0 1 3.402-3.402v-1a4.395 4.395 0 0 0-4.402 4.402h1Zm3.402-3.402h15.65v-1h-15.65v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1a4.395 4.395 0 0 0-4.402-4.402v1Zm3.402 3.402v15.65h1v-15.65h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1ZM53.825 90.5h-15.65v1h15.65v-1Zm-15.65 0a3.395 3.395 0 0 1-3.402-3.402h-1a4.395 4.395 0 0 0 4.402 4.402v-1Zm-3.402-3.402v-15.65h-1v15.65h1Zm33.273-48.923a3.395 3.395 0 0 1 3.402-3.402v-1a4.395 4.395 0 0 0-4.402 4.402h1Zm3.402-3.402h15.65v-1h-15.65v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1a4.395 4.395 0 0 0-4.402-4.402v1Zm3.402 3.402v15.65h1v-15.65h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1Zm-3.402 3.402h-15.65v1h15.65v-1Zm-15.65 0a3.395 3.395 0 0 1-3.402-3.402h-1a4.395 4.395 0 0 0 4.402 4.402v-1Zm-3.402-3.402v-15.65h-1v15.65h1Zm0 17.623a3.395 3.395 0 0 1 3.402-3.402v-1a4.395 4.395 0 0 0-4.402 4.402h1Zm3.402-3.402h15.65v-1h-15.65v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1a4.395 4.395 0 0 0-4.402-4.402v1Zm3.402 3.402v15.65h1v-15.65h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1ZM87.098 90.5h-15.65v1h15.65v-1Zm-15.65 0a3.395 3.395 0 0 1-3.402-3.402h-1a4.395 4.395 0 0 0 4.402 4.402v-1Zm-3.402-3.402v-15.65h-1v15.65h1ZM24.454 13.206h9.777v-1h-9.777v1Zm0 33.273h9.777v-1h-9.777v1Zm0 33.315h9.777v-1h-9.777v1Zm33.273-66.588h9.777v-1h-9.777v1Zm0 33.273h9.777v-1h-9.777v1Zm0 33.315h9.777v-1h-9.777v1Zm21.067-55.34v9.777h1v-9.777h-1Zm-33.273 0v9.777h1v-9.777h-1Zm-33.315 0v9.777h1v-9.777h-1Zm66.588 33.273v9.777h1v-9.777h-1Zm-33.273 0v9.777h1v-9.777h-1Zm-33.315 0v9.777h1v-9.777h-1Z" fill="#fff" /></symbol><symbol fill="none"  viewBox="0 0 92 92" id="icon-222"><path d="M24.454 12.206a.5.5 0 0 0 0 1v-1Zm9.777 1a.5.5 0 0 0 0-1v1ZM24.454 45.48a.5.5 0 0 0 0 1v-1Zm9.777 1a.5.5 0 1 0 0-1v1Zm-9.777 32.315a.5.5 0 0 0 0 1v-1Zm9.777 1a.5.5 0 1 0 0-1v1Zm23.496-67.588a.5.5 0 1 0 0 1v-1Zm9.777 1a.5.5 0 0 0 0-1v1ZM57.727 45.48a.5.5 0 1 0 0 1v-1Zm9.777 1a.5.5 0 1 0 0-1v1Zm-9.777 32.315a.5.5 0 1 0 0 1v-1Zm9.777 1a.5.5 0 1 0 0-1v1Zm12.29-55.34a.5.5 0 1 0-1 0h1Zm-1 9.777a.5.5 0 0 0 1 0h-1ZM46.52 24.454a.5.5 0 0 0-1 0h1Zm-1 9.777a.5.5 0 1 0 1 0h-1Zm-32.315-9.777a.5.5 0 0 0-1 0h1Zm-1 9.777a.5.5 0 0 0 1 0h-1Zm67.588 23.496a.5.5 0 1 0-1 0h1Zm-1 9.777a.5.5 0 0 0 1 0h-1ZM46.52 57.727a.5.5 0 1 0-1 0h1Zm-1 9.777a.5.5 0 1 0 1 0h-1Zm-32.315-9.777a.5.5 0 1 0-1 0h1Zm-1 9.777a.5.5 0 0 0 1 0h-1ZM1.5 4.902A3.368 3.368 0 0 1 4.902 1.5v-1A4.368 4.368 0 0 0 .5 4.902h1ZM4.902 1.5h15.65v-1H4.902v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1A4.395 4.395 0 0 0 20.552.5v1Zm3.402 3.402v15.65h1V4.902h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1Zm-3.402 3.402H4.902v1h15.65v-1Zm-15.65 0A3.395 3.395 0 0 1 1.5 20.552h-1a4.395 4.395 0 0 0 4.402 4.402v-1ZM1.5 20.552V4.902h-1v15.65h1Zm6.804-7.846a4.395 4.395 0 0 0 4.402 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.402 4.402c2.416 0 4.402-1.986 4.402-4.402h-1a3.422 3.422 0 0 1-3.402 3.402v1Zm4.402-4.402a4.395 4.395 0 0 0-4.402-4.402v1c1.867 0 3.402 1.5 3.402 3.402h1Zm-4.402-4.402a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1ZM8.304 45.98a4.395 4.395 0 0 0 4.402 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.402 4.402c2.416 0 4.402-1.986 4.402-4.402h-1a3.422 3.422 0 0 1-3.402 3.402v1Zm4.402-4.402a4.395 4.395 0 0 0-4.402-4.402v1c1.867 0 3.402 1.5 3.402 3.402h1Zm-4.402-4.402a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1ZM8.304 79.252a4.395 4.395 0 0 0 4.402 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.402 4.402c2.416 0 4.402-1.986 4.402-4.402h-1a3.422 3.422 0 0 1-3.402 3.402v1Zm4.402-4.402a4.395 4.395 0 0 0-4.402-4.402v1c1.867 0 3.402 1.5 3.402 3.402h1Zm-4.402-4.402a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1Zm28.87-62.144a4.395 4.395 0 0 0 4.403 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.403 4.402c2.416 0 4.402-1.986 4.402-4.402h-1a3.422 3.422 0 0 1-3.402 3.402v1Zm4.402-4.402a4.395 4.395 0 0 0-4.402-4.402v1c1.867 0 3.402 1.5 3.402 3.402h1ZM45.98 8.304a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1Zm28.87 4.402a4.395 4.395 0 0 0 4.403 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.403 4.402a4.395 4.395 0 0 0 4.402-4.402h-1c0 1.867-1.5 3.402-3.402 3.402v1Zm4.402-4.402c0-2.454-1.983-4.444-4.402-4.444v1c1.86 0 3.402 1.535 3.402 3.444h1Zm-4.402-4.444a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1ZM41.577 45.98a4.395 4.395 0 0 0 4.402 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.402 4.402c2.416 0 4.402-1.986 4.402-4.402h-1a3.422 3.422 0 0 1-3.402 3.402v1Zm4.402-4.402a4.395 4.395 0 0 0-4.402-4.402v1c1.867 0 3.402 1.5 3.402 3.402h1Zm-4.402-4.402a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1Zm28.87 4.402a4.395 4.395 0 0 0 4.403 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.403 4.402a4.395 4.395 0 0 0 4.402-4.402h-1c0 1.867-1.5 3.402-3.402 3.402v1Zm4.402-4.402c0-2.454-1.983-4.444-4.402-4.444v1c1.86 0 3.402 1.535 3.402 3.444h1Zm-4.402-4.444a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1ZM41.577 79.252a4.395 4.395 0 0 0 4.402 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.402 4.402c2.416 0 4.402-1.986 4.402-4.402h-1a3.422 3.422 0 0 1-3.402 3.402v1Zm4.402-4.402a4.395 4.395 0 0 0-4.402-4.402v1c1.867 0 3.402 1.5 3.402 3.402h1ZM45.98 74.85a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1Zm28.87 4.402a4.395 4.395 0 0 0 4.403 4.402v-1a3.395 3.395 0 0 1-3.402-3.402h-1Zm4.403 4.402a4.395 4.395 0 0 0 4.402-4.402h-1c0 1.867-1.5 3.402-3.402 3.402v1Zm4.402-4.402c0-2.455-1.983-4.444-4.402-4.444v1c1.86 0 3.402 1.535 3.402 3.444h1Zm-4.402-4.444a4.395 4.395 0 0 0-4.402 4.402h1c0-1.867 1.5-3.402 3.402-3.402v-1ZM34.772 4.902A3.395 3.395 0 0 1 38.176 1.5v-1a4.395 4.395 0 0 0-4.402 4.402h1ZM38.176 1.5h15.65v-1h-15.65v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1A4.395 4.395 0 0 0 53.825.5v1Zm3.402 3.402v15.65h1V4.902h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1Zm-3.402 3.402h-15.65v1h15.65v-1Zm-15.65 0a3.395 3.395 0 0 1-3.402-3.402h-1a4.395 4.395 0 0 0 4.402 4.402v-1Zm-3.402-3.402V4.902h-1v15.65h1Zm33.273-15.65A3.395 3.395 0 0 1 71.448 1.5v-1a4.395 4.395 0 0 0-4.402 4.402h1ZM71.448 1.5h15.65v-1h-15.65v1Zm15.65 0A3.395 3.395 0 0 1 90.5 4.902h1A4.395 4.395 0 0 0 87.098.5v1ZM90.5 4.902v15.65h1V4.902h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1Zm-3.402 3.402h-15.65v1h15.65v-1Zm-15.65 0a3.395 3.395 0 0 1-3.402-3.402h-1a4.395 4.395 0 0 0 4.402 4.402v-1Zm-3.402-3.402V4.902h-1v15.65h1ZM1.5 38.175a3.395 3.395 0 0 1 3.402-3.402v-1A4.395 4.395 0 0 0 .5 38.175h1Zm3.402-3.402h15.65v-1H4.902v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1a4.395 4.395 0 0 0-4.402-4.402v1Zm3.402 3.402v15.65h1v-15.65h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1Zm-3.402 3.402H4.902v1h15.65v-1Zm-15.65 0A3.395 3.395 0 0 1 1.5 53.825h-1a4.395 4.395 0 0 0 4.402 4.402v-1ZM1.5 53.825v-15.65h-1v15.65h1Zm0 17.623a3.395 3.395 0 0 1 3.402-3.402v-1A4.395 4.395 0 0 0 .5 71.448h1Zm3.402-3.402h15.65v-1H4.902v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1a4.395 4.395 0 0 0-4.402-4.402v1Zm3.402 3.402v15.65h1v-15.65h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1ZM20.552 90.5H4.902v1h15.65v-1Zm-15.65 0A3.395 3.395 0 0 1 1.5 87.098h-1A4.395 4.395 0 0 0 4.902 91.5v-1ZM1.5 87.098v-15.65h-1v15.65h1Zm33.273-48.923a3.395 3.395 0 0 1 3.402-3.402v-1a4.395 4.395 0 0 0-4.402 4.402h1Zm3.402-3.402h15.65v-1h-15.65v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1a4.395 4.395 0 0 0-4.402-4.402v1Zm3.402 3.402v15.65h1v-15.65h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1Zm-3.402 3.402h-15.65v1h15.65v-1Zm-15.65 0a3.395 3.395 0 0 1-3.402-3.402h-1a4.395 4.395 0 0 0 4.402 4.402v-1Zm-3.402-3.402v-15.65h-1v15.65h1Zm0 17.623a3.395 3.395 0 0 1 3.402-3.402v-1a4.395 4.395 0 0 0-4.402 4.402h1Zm3.402-3.402h15.65v-1h-15.65v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1a4.395 4.395 0 0 0-4.402-4.402v1Zm3.402 3.402v15.65h1v-15.65h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1ZM53.825 90.5h-15.65v1h15.65v-1Zm-15.65 0a3.395 3.395 0 0 1-3.402-3.402h-1a4.395 4.395 0 0 0 4.402 4.402v-1Zm-3.402-3.402v-15.65h-1v15.65h1Zm33.273-48.923a3.395 3.395 0 0 1 3.402-3.402v-1a4.395 4.395 0 0 0-4.402 4.402h1Zm3.402-3.402h15.65v-1h-15.65v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1a4.395 4.395 0 0 0-4.402-4.402v1Zm3.402 3.402v15.65h1v-15.65h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1Zm-3.402 3.402h-15.65v1h15.65v-1Zm-15.65 0a3.395 3.395 0 0 1-3.402-3.402h-1a4.395 4.395 0 0 0 4.402 4.402v-1Zm-3.402-3.402v-15.65h-1v15.65h1Zm0 17.623a3.395 3.395 0 0 1 3.402-3.402v-1a4.395 4.395 0 0 0-4.402 4.402h1Zm3.402-3.402h15.65v-1h-15.65v1Zm15.65 0a3.395 3.395 0 0 1 3.402 3.402h1a4.395 4.395 0 0 0-4.402-4.402v1Zm3.402 3.402v15.65h1v-15.65h-1Zm0 15.65a3.395 3.395 0 0 1-3.402 3.402v1a4.395 4.395 0 0 0 4.402-4.402h-1ZM87.098 90.5h-15.65v1h15.65v-1Zm-15.65 0a3.395 3.395 0 0 1-3.402-3.402h-1a4.395 4.395 0 0 0 4.402 4.402v-1Zm-3.402-3.402v-15.65h-1v15.65h1ZM24.454 13.206h9.777v-1h-9.777v1Zm0 33.273h9.777v-1h-9.777v1Zm0 33.315h9.777v-1h-9.777v1Zm33.273-66.588h9.777v-1h-9.777v1Zm0 33.273h9.777v-1h-9.777v1Zm0 33.315h9.777v-1h-9.777v1Zm21.067-55.34v9.777h1v-9.777h-1Zm-33.273 0v9.777h1v-9.777h-1Zm-33.315 0v9.777h1v-9.777h-1Zm66.588 33.273v9.777h1v-9.777h-1Zm-33.273 0v9.777h1v-9.777h-1Zm-33.315 0v9.777h1v-9.777h-1Z" fill="#FC15EF" /></symbol><symbol fill="none"  viewBox="0 0 92 92" id="icon-3"><path d="M8.823 48.435a.5.5 0 0 0 0-1v1Zm73.854-10.278a.5.5 0 1 0 1 0h-1ZM45.98 71.944a.5.5 0 1 0 0-1v1Zm5.907-23.468a.5.5 0 0 0 0-1v1Zm11.734 11.193h-.5a.5.5 0 0 0 .5.5v-.5Zm19.556 0v.5a.5.5 0 0 0 .5-.5h-.5Zm-.5-43.024a7.33 7.33 0 0 1-2.135 5.188l.707.707a8.33 8.33 0 0 0 2.428-5.895h-1Zm-2.135 5.188a7.33 7.33 0 0 1-5.187 2.135v1a8.33 8.33 0 0 0 5.894-2.428l-.707-.707Zm-5.187 2.135H8.823v1h66.532v-1Zm-66.532 0a7.33 7.33 0 0 1-5.188-2.136l-.707.708a8.33 8.33 0 0 0 5.895 2.428v-1Zm-5.188-2.136A7.33 7.33 0 0 1 1.5 16.645h-1a8.33 8.33 0 0 0 2.428 5.895l.707-.707ZM1.5 16.645V8.823h-1v7.822h1Zm0-7.822a7.33 7.33 0 0 1 2.135-5.188l-.707-.707A8.33 8.33 0 0 0 .5 8.823h1Zm2.135-5.188A7.33 7.33 0 0 1 8.823 1.5v-1a8.33 8.33 0 0 0-5.895 2.428l.707.707ZM8.823 1.5h66.532v-1H8.823v1Zm66.532 0a7.33 7.33 0 0 1 5.187 2.135l.707-.707A8.33 8.33 0 0 0 75.355.5v1Zm5.187 2.135a7.33 7.33 0 0 1 2.135 5.188h1a8.33 8.33 0 0 0-2.428-5.895l-.707.707Zm2.135 5.188v7.822h1V8.823h-1ZM8.823 47.435A7.33 7.33 0 0 1 3.635 45.3l-.707.707a8.33 8.33 0 0 0 5.895 2.428v-1ZM3.635 45.3A7.33 7.33 0 0 1 1.5 40.113h-1a8.33 8.33 0 0 0 2.428 5.894l.707-.707ZM1.5 40.113V32.29h-1v7.823h1Zm0-7.823a7.33 7.33 0 0 1 2.135-5.187l-.707-.707A8.33 8.33 0 0 0 .5 32.29h1Zm2.135-5.187a7.33 7.33 0 0 1 5.188-2.135v-1a8.33 8.33 0 0 0-5.895 2.428l.707.707Zm71.72-2.135a7.33 7.33 0 0 1 5.187 2.135l.707-.707a8.33 8.33 0 0 0-5.894-2.428v1Zm5.187 2.135a7.33 7.33 0 0 1 2.135 5.187h1a8.33 8.33 0 0 0-2.428-5.894l-.707.707Zm2.135 5.187v5.867h1V32.29h-1ZM45.98 70.944H8.823v1H45.98v-1Zm-37.157 0a7.33 7.33 0 0 1-5.188-2.136l-.707.708a8.33 8.33 0 0 0 5.895 2.428v-1Zm-5.188-2.136A7.33 7.33 0 0 1 1.5 63.621h-1a8.33 8.33 0 0 0 2.428 5.895l.707-.708ZM1.5 63.621v-7.823h-1v7.823h1Zm0-7.823a7.33 7.33 0 0 1 2.135-5.187l-.707-.707A8.33 8.33 0 0 0 .5 55.798h1Zm2.135-5.187a7.331 7.331 0 0 1 5.188-2.135v-1a8.331 8.331 0 0 0-5.895 2.428l.707.707Zm5.188-2.135h43.064v-1H8.823v1ZM90.5 87.089c0 .89-.357 1.78-.994 2.417l.707.707a4.451 4.451 0 0 0 1.287-3.124h-1Zm-.994 2.417a3.38 3.38 0 0 1-2.417.994v1a4.38 4.38 0 0 0 3.124-1.287l-.707-.707Zm-2.417.994h-27.38v1h27.38v-1Zm-27.38 0c-.889 0-1.779-.357-2.416-.994l-.707.707A4.451 4.451 0 0 0 59.71 91.5v-1Zm-2.416-.994a3.38 3.38 0 0 1-.995-2.417h-1a4.38 4.38 0 0 0 1.288 3.124l.707-.707Zm-.995-2.417V63.62h-1V87.09h1Zm0-23.468c0-.89.358-1.78.995-2.417l-.707-.707a4.45 4.45 0 0 0-1.288 3.124h1Zm.995-2.417a3.38 3.38 0 0 1 2.417-.994v-1a4.38 4.38 0 0 0-3.124 1.287l.707.707Zm2.417-.994h27.379v-1h-27.38v1Zm27.379 0c.89 0 1.78.357 2.417.994l.707-.707a4.451 4.451 0 0 0-3.124-1.287v1Zm2.417.994a3.38 3.38 0 0 1 .994 2.417h1a4.38 4.38 0 0 0-1.287-3.124l-.707.707Zm.994 2.417V87.09h1V63.62h-1ZM73.4 80.988c2.964 0 5.388-2.424 5.388-5.389h-1a4.404 4.404 0 0 1-4.389 4.39v1Zm5.388-5.389c0-2.965-2.424-5.389-5.389-5.389v1a4.403 4.403 0 0 1 4.39 4.39h1ZM73.4 70.21c-2.965 0-5.389 2.424-5.389 5.39h1a4.403 4.403 0 0 1 4.39-4.39v-1ZM68.01 75.6c0 2.965 2.424 5.389 5.39 5.389v-1a4.403 4.403 0 0 1-4.39-4.39h-1Zm15.667-21.798a10.27 10.27 0 0 0-2.998-7.28l-.707.708a9.27 9.27 0 0 1 2.706 6.572h1Zm-2.998-7.28a10.27 10.27 0 0 0-7.28-2.998v1a9.27 9.27 0 0 1 6.573 2.706l.707-.708Zm-7.28-2.998a10.27 10.27 0 0 0-7.28 2.998l.708.708a9.271 9.271 0 0 1 6.572-2.706v-1Zm-7.28 2.998a10.271 10.271 0 0 0-2.998 7.28h1c0-2.477.967-4.834 2.706-6.572l-.707-.708Zm-2.998 7.28v5.867h1v-5.867h-1Zm.5 6.367h19.556v-1H63.621v1Zm20.056-.5v-5.867h-1v5.867h1ZM17.623 13.212a.492.492 0 0 1-.478-.478h-1c0 .806.672 1.478 1.478 1.478v-1Zm-.478-.478c0-.254.224-.478.478-.478v-1c-.806 0-1.478.672-1.478 1.478h1Zm.478 1.478c.806 0 1.478-.672 1.478-1.478h-1a.492.492 0 0 1-.478.478v1Zm1.478-1.478c0-.806-.672-1.478-1.478-1.478v1c.253 0 .478.224.478.478h1Zm12.211.478a.492.492 0 0 1-.478-.478h-1c0 .806.673 1.478 1.478 1.478v-1Zm-.478-.478c0-.254.225-.478.478-.478v-1c-.805 0-1.478.672-1.478 1.478h1Zm.478 1.478c.806 0 1.478-.672 1.478-1.478h-1a.492.492 0 0 1-.478.478v1Zm1.478-1.478c0-.806-.672-1.478-1.478-1.478v1c.254 0 .478.224.478.478h1ZM17.623 36.679a.492.492 0 0 1-.478-.477h-1c0 .805.672 1.477 1.478 1.477v-1Zm-.478-.477c0-.254.224-.478.478-.478v-1c-.806 0-1.478.672-1.478 1.478h1Zm.478 1.477c.806 0 1.478-.672 1.478-1.477h-1a.492.492 0 0 1-.478.477v1Zm1.478-1.477c0-.806-.672-1.478-1.478-1.478v1c.253 0 .478.224.478.478h1Zm-1.478 23.945a.492.492 0 0 1-.478-.478h-1c0 .806.672 1.478 1.478 1.478v-1Zm-.478-.478c0-.253.224-.478.478-.478v-1c-.806 0-1.478.672-1.478 1.478h1Zm.478 1.478c.806 0 1.478-.672 1.478-1.478h-1a.492.492 0 0 1-.478.478v1Zm1.478-1.478c0-.806-.672-1.478-1.478-1.478v1c.253 0 .478.225.478.478h1Zm12.211-22.99a.492.492 0 0 1-.478-.477h-1c0 .805.673 1.477 1.478 1.477v-1Zm-.478-.477c0-.254.225-.478.478-.478v-1c-.805 0-1.478.672-1.478 1.478h1Zm.478 1.477c.806 0 1.478-.672 1.478-1.477h-1a.492.492 0 0 1-.478.477v1Zm1.478-1.477c0-.806-.672-1.478-1.478-1.478v1c.254 0 .478.224.478.478h1Zm-1.478 23.945a.492.492 0 0 1-.478-.478h-1c0 .806.673 1.478 1.478 1.478v-1Zm-.478-.478c0-.253.225-.478.478-.478v-1c-.805 0-1.478.672-1.478 1.478h1Zm.478 1.478c.806 0 1.478-.672 1.478-1.478h-1a.492.492 0 0 1-.478.478v1Zm1.478-1.478c0-.806-.672-1.478-1.478-1.478v1c.254 0 .478.225.478.478h1Z" fill="#fff" /></symbol><symbol fill="none"  viewBox="0 0 92 92" id="icon-33"><path d="M8.823 48.435a.5.5 0 0 0 0-1v1Zm73.854-10.278a.5.5 0 1 0 1 0h-1ZM45.98 71.944a.5.5 0 1 0 0-1v1Zm5.907-23.468a.5.5 0 0 0 0-1v1Zm11.734 11.193h-.5a.5.5 0 0 0 .5.5v-.5Zm19.556 0v.5a.5.5 0 0 0 .5-.5h-.5Zm-.5-43.024a7.33 7.33 0 0 1-2.135 5.188l.707.707a8.33 8.33 0 0 0 2.428-5.895h-1Zm-2.135 5.188a7.33 7.33 0 0 1-5.187 2.135v1a8.33 8.33 0 0 0 5.894-2.428l-.707-.707Zm-5.187 2.135H8.823v1h66.532v-1Zm-66.532 0a7.33 7.33 0 0 1-5.188-2.136l-.707.708a8.33 8.33 0 0 0 5.895 2.428v-1Zm-5.188-2.136A7.33 7.33 0 0 1 1.5 16.645h-1a8.33 8.33 0 0 0 2.428 5.895l.707-.707ZM1.5 16.645V8.823h-1v7.822h1Zm0-7.822a7.33 7.33 0 0 1 2.135-5.188l-.707-.707A8.33 8.33 0 0 0 .5 8.823h1Zm2.135-5.188A7.33 7.33 0 0 1 8.823 1.5v-1a8.33 8.33 0 0 0-5.895 2.428l.707.707ZM8.823 1.5h66.532v-1H8.823v1Zm66.532 0a7.33 7.33 0 0 1 5.187 2.135l.707-.707A8.33 8.33 0 0 0 75.355.5v1Zm5.187 2.135a7.33 7.33 0 0 1 2.135 5.188h1a8.33 8.33 0 0 0-2.428-5.895l-.707.707Zm2.135 5.188v7.822h1V8.823h-1ZM8.823 47.435A7.33 7.33 0 0 1 3.635 45.3l-.707.707a8.33 8.33 0 0 0 5.895 2.428v-1ZM3.635 45.3A7.33 7.33 0 0 1 1.5 40.113h-1a8.33 8.33 0 0 0 2.428 5.894l.707-.707ZM1.5 40.113V32.29h-1v7.823h1Zm0-7.823a7.33 7.33 0 0 1 2.135-5.187l-.707-.707A8.33 8.33 0 0 0 .5 32.29h1Zm2.135-5.187a7.33 7.33 0 0 1 5.188-2.135v-1a8.33 8.33 0 0 0-5.895 2.428l.707.707Zm71.72-2.135a7.33 7.33 0 0 1 5.187 2.135l.707-.707a8.33 8.33 0 0 0-5.894-2.428v1Zm5.187 2.135a7.33 7.33 0 0 1 2.135 5.187h1a8.33 8.33 0 0 0-2.428-5.894l-.707.707Zm2.135 5.187v5.867h1V32.29h-1ZM45.98 70.944H8.823v1H45.98v-1Zm-37.157 0a7.33 7.33 0 0 1-5.188-2.136l-.707.708a8.33 8.33 0 0 0 5.895 2.428v-1Zm-5.188-2.136A7.33 7.33 0 0 1 1.5 63.621h-1a8.33 8.33 0 0 0 2.428 5.895l.707-.708ZM1.5 63.621v-7.823h-1v7.823h1Zm0-7.823a7.33 7.33 0 0 1 2.135-5.187l-.707-.707A8.33 8.33 0 0 0 .5 55.798h1Zm2.135-5.187a7.331 7.331 0 0 1 5.188-2.135v-1a8.331 8.331 0 0 0-5.895 2.428l.707.707Zm5.188-2.135h43.064v-1H8.823v1ZM90.5 87.089c0 .89-.357 1.78-.994 2.417l.707.707a4.451 4.451 0 0 0 1.287-3.124h-1Zm-.994 2.417a3.38 3.38 0 0 1-2.417.994v1a4.38 4.38 0 0 0 3.124-1.287l-.707-.707Zm-2.417.994h-27.38v1h27.38v-1Zm-27.38 0c-.889 0-1.779-.357-2.416-.994l-.707.707A4.451 4.451 0 0 0 59.71 91.5v-1Zm-2.416-.994a3.38 3.38 0 0 1-.995-2.417h-1a4.38 4.38 0 0 0 1.288 3.124l.707-.707Zm-.995-2.417V63.62h-1V87.09h1Zm0-23.468c0-.89.358-1.78.995-2.417l-.707-.707a4.45 4.45 0 0 0-1.288 3.124h1Zm.995-2.417a3.38 3.38 0 0 1 2.417-.994v-1a4.38 4.38 0 0 0-3.124 1.287l.707.707Zm2.417-.994h27.379v-1h-27.38v1Zm27.379 0c.89 0 1.78.357 2.417.994l.707-.707a4.451 4.451 0 0 0-3.124-1.287v1Zm2.417.994a3.38 3.38 0 0 1 .994 2.417h1a4.38 4.38 0 0 0-1.287-3.124l-.707.707Zm.994 2.417V87.09h1V63.62h-1ZM73.4 80.988c2.964 0 5.388-2.424 5.388-5.389h-1a4.404 4.404 0 0 1-4.389 4.39v1Zm5.388-5.389c0-2.965-2.424-5.389-5.389-5.389v1a4.403 4.403 0 0 1 4.39 4.39h1ZM73.4 70.21c-2.965 0-5.389 2.424-5.389 5.39h1a4.403 4.403 0 0 1 4.39-4.39v-1ZM68.01 75.6c0 2.965 2.424 5.389 5.39 5.389v-1a4.403 4.403 0 0 1-4.39-4.39h-1Zm15.667-21.798a10.27 10.27 0 0 0-2.998-7.28l-.707.708a9.27 9.27 0 0 1 2.706 6.572h1Zm-2.998-7.28a10.27 10.27 0 0 0-7.28-2.998v1a9.27 9.27 0 0 1 6.573 2.706l.707-.708Zm-7.28-2.998a10.27 10.27 0 0 0-7.28 2.998l.708.708a9.271 9.271 0 0 1 6.572-2.706v-1Zm-7.28 2.998a10.271 10.271 0 0 0-2.998 7.28h1c0-2.477.967-4.834 2.706-6.572l-.707-.708Zm-2.998 7.28v5.867h1v-5.867h-1Zm.5 6.367h19.556v-1H63.621v1Zm20.056-.5v-5.867h-1v5.867h1ZM17.623 13.212a.492.492 0 0 1-.478-.478h-1c0 .806.672 1.478 1.478 1.478v-1Zm-.478-.478c0-.254.224-.478.478-.478v-1c-.806 0-1.478.672-1.478 1.478h1Zm.478 1.478c.806 0 1.478-.672 1.478-1.478h-1a.492.492 0 0 1-.478.478v1Zm1.478-1.478c0-.806-.672-1.478-1.478-1.478v1c.253 0 .478.224.478.478h1Zm12.211.478a.492.492 0 0 1-.478-.478h-1c0 .806.673 1.478 1.478 1.478v-1Zm-.478-.478c0-.254.225-.478.478-.478v-1c-.805 0-1.478.672-1.478 1.478h1Zm.478 1.478c.806 0 1.478-.672 1.478-1.478h-1a.492.492 0 0 1-.478.478v1Zm1.478-1.478c0-.806-.672-1.478-1.478-1.478v1c.254 0 .478.224.478.478h1ZM17.623 36.679a.492.492 0 0 1-.478-.477h-1c0 .805.672 1.477 1.478 1.477v-1Zm-.478-.477c0-.254.224-.478.478-.478v-1c-.806 0-1.478.672-1.478 1.478h1Zm.478 1.477c.806 0 1.478-.672 1.478-1.477h-1a.492.492 0 0 1-.478.477v1Zm1.478-1.477c0-.806-.672-1.478-1.478-1.478v1c.253 0 .478.224.478.478h1Zm-1.478 23.945a.492.492 0 0 1-.478-.478h-1c0 .806.672 1.478 1.478 1.478v-1Zm-.478-.478c0-.253.224-.478.478-.478v-1c-.806 0-1.478.672-1.478 1.478h1Zm.478 1.478c.806 0 1.478-.672 1.478-1.478h-1a.492.492 0 0 1-.478.478v1Zm1.478-1.478c0-.806-.672-1.478-1.478-1.478v1c.253 0 .478.225.478.478h1Zm12.211-22.99a.492.492 0 0 1-.478-.477h-1c0 .805.673 1.477 1.478 1.477v-1Zm-.478-.477c0-.254.225-.478.478-.478v-1c-.805 0-1.478.672-1.478 1.478h1Zm.478 1.477c.806 0 1.478-.672 1.478-1.477h-1a.492.492 0 0 1-.478.477v1Zm1.478-1.477c0-.806-.672-1.478-1.478-1.478v1c.254 0 .478.224.478.478h1Zm-1.478 23.945a.492.492 0 0 1-.478-.478h-1c0 .806.673 1.478 1.478 1.478v-1Zm-.478-.478c0-.253.225-.478.478-.478v-1c-.805 0-1.478.672-1.478 1.478h1Zm.478 1.478c.806 0 1.478-.672 1.478-1.478h-1a.492.492 0 0 1-.478.478v1Zm1.478-1.478c0-.806-.672-1.478-1.478-1.478v1c.254 0 .478.225.478.478h1Z" fill="#fff" /></symbol><symbol fill="none"  viewBox="0 0 92 92" id="icon-333"><path d="M8.823 48.435a.5.5 0 0 0 0-1v1Zm73.854-10.278a.5.5 0 1 0 1 0h-1ZM45.98 71.944a.5.5 0 1 0 0-1v1Zm5.907-23.468a.5.5 0 0 0 0-1v1Zm11.734 11.193h-.5a.5.5 0 0 0 .5.5v-.5Zm19.556 0v.5a.5.5 0 0 0 .5-.5h-.5Zm-.5-43.024a7.33 7.33 0 0 1-2.135 5.188l.707.707a8.33 8.33 0 0 0 2.428-5.895h-1Zm-2.135 5.188a7.33 7.33 0 0 1-5.187 2.135v1a8.33 8.33 0 0 0 5.894-2.428l-.707-.707Zm-5.187 2.135H8.823v1h66.532v-1Zm-66.532 0a7.33 7.33 0 0 1-5.188-2.136l-.707.708a8.33 8.33 0 0 0 5.895 2.428v-1Zm-5.188-2.136A7.33 7.33 0 0 1 1.5 16.645h-1a8.33 8.33 0 0 0 2.428 5.895l.707-.707ZM1.5 16.645V8.823h-1v7.822h1Zm0-7.822a7.33 7.33 0 0 1 2.135-5.188l-.707-.707A8.33 8.33 0 0 0 .5 8.823h1Zm2.135-5.188A7.33 7.33 0 0 1 8.823 1.5v-1a8.33 8.33 0 0 0-5.895 2.428l.707.707ZM8.823 1.5h66.532v-1H8.823v1Zm66.532 0a7.33 7.33 0 0 1 5.187 2.135l.707-.707A8.33 8.33 0 0 0 75.355.5v1Zm5.187 2.135a7.33 7.33 0 0 1 2.135 5.188h1a8.33 8.33 0 0 0-2.428-5.895l-.707.707Zm2.135 5.188v7.822h1V8.823h-1ZM8.823 47.435A7.33 7.33 0 0 1 3.635 45.3l-.707.707a8.33 8.33 0 0 0 5.895 2.428v-1ZM3.635 45.3A7.33 7.33 0 0 1 1.5 40.113h-1a8.33 8.33 0 0 0 2.428 5.894l.707-.707ZM1.5 40.113V32.29h-1v7.823h1Zm0-7.823a7.33 7.33 0 0 1 2.135-5.187l-.707-.707A8.33 8.33 0 0 0 .5 32.29h1Zm2.135-5.187a7.33 7.33 0 0 1 5.188-2.135v-1a8.33 8.33 0 0 0-5.895 2.428l.707.707Zm71.72-2.135a7.33 7.33 0 0 1 5.187 2.135l.707-.707a8.33 8.33 0 0 0-5.894-2.428v1Zm5.187 2.135a7.33 7.33 0 0 1 2.135 5.187h1a8.33 8.33 0 0 0-2.428-5.894l-.707.707Zm2.135 5.187v5.867h1V32.29h-1ZM45.98 70.944H8.823v1H45.98v-1Zm-37.157 0a7.33 7.33 0 0 1-5.188-2.136l-.707.708a8.33 8.33 0 0 0 5.895 2.428v-1Zm-5.188-2.136A7.33 7.33 0 0 1 1.5 63.621h-1a8.33 8.33 0 0 0 2.428 5.895l.707-.708ZM1.5 63.621v-7.823h-1v7.823h1Zm0-7.823a7.33 7.33 0 0 1 2.135-5.187l-.707-.707A8.33 8.33 0 0 0 .5 55.798h1Zm2.135-5.187a7.331 7.331 0 0 1 5.188-2.135v-1a8.331 8.331 0 0 0-5.895 2.428l.707.707Zm5.188-2.135h43.064v-1H8.823v1ZM90.5 87.089c0 .89-.357 1.78-.994 2.417l.707.707a4.451 4.451 0 0 0 1.287-3.124h-1Zm-.994 2.417a3.38 3.38 0 0 1-2.417.994v1a4.38 4.38 0 0 0 3.124-1.287l-.707-.707Zm-2.417.994h-27.38v1h27.38v-1Zm-27.38 0c-.889 0-1.779-.357-2.416-.994l-.707.707A4.451 4.451 0 0 0 59.71 91.5v-1Zm-2.416-.994a3.38 3.38 0 0 1-.995-2.417h-1a4.38 4.38 0 0 0 1.288 3.124l.707-.707Zm-.995-2.417V63.62h-1V87.09h1Zm0-23.468c0-.89.358-1.78.995-2.417l-.707-.707a4.45 4.45 0 0 0-1.288 3.124h1Zm.995-2.417a3.38 3.38 0 0 1 2.417-.994v-1a4.38 4.38 0 0 0-3.124 1.287l.707.707Zm2.417-.994h27.379v-1h-27.38v1Zm27.379 0c.89 0 1.78.357 2.417.994l.707-.707a4.451 4.451 0 0 0-3.124-1.287v1Zm2.417.994a3.38 3.38 0 0 1 .994 2.417h1a4.38 4.38 0 0 0-1.287-3.124l-.707.707Zm.994 2.417V87.09h1V63.62h-1ZM73.4 80.988c2.964 0 5.388-2.424 5.388-5.389h-1a4.404 4.404 0 0 1-4.389 4.39v1Zm5.388-5.389c0-2.965-2.424-5.389-5.389-5.389v1a4.403 4.403 0 0 1 4.39 4.39h1ZM73.4 70.21c-2.965 0-5.389 2.424-5.389 5.39h1a4.403 4.403 0 0 1 4.39-4.39v-1ZM68.01 75.6c0 2.965 2.424 5.389 5.39 5.389v-1a4.403 4.403 0 0 1-4.39-4.39h-1Zm15.667-21.798a10.27 10.27 0 0 0-2.998-7.28l-.707.708a9.27 9.27 0 0 1 2.706 6.572h1Zm-2.998-7.28a10.27 10.27 0 0 0-7.28-2.998v1a9.27 9.27 0 0 1 6.573 2.706l.707-.708Zm-7.28-2.998a10.27 10.27 0 0 0-7.28 2.998l.708.708a9.271 9.271 0 0 1 6.572-2.706v-1Zm-7.28 2.998a10.271 10.271 0 0 0-2.998 7.28h1c0-2.477.967-4.834 2.706-6.572l-.707-.708Zm-2.998 7.28v5.867h1v-5.867h-1Zm.5 6.367h19.556v-1H63.621v1Zm20.056-.5v-5.867h-1v5.867h1ZM17.623 13.212a.492.492 0 0 1-.478-.478h-1c0 .806.672 1.478 1.478 1.478v-1Zm-.478-.478c0-.254.224-.478.478-.478v-1c-.806 0-1.478.672-1.478 1.478h1Zm.478 1.478c.806 0 1.478-.672 1.478-1.478h-1a.492.492 0 0 1-.478.478v1Zm1.478-1.478c0-.806-.672-1.478-1.478-1.478v1c.253 0 .478.224.478.478h1Zm12.211.478a.492.492 0 0 1-.478-.478h-1c0 .806.673 1.478 1.478 1.478v-1Zm-.478-.478c0-.254.225-.478.478-.478v-1c-.805 0-1.478.672-1.478 1.478h1Zm.478 1.478c.806 0 1.478-.672 1.478-1.478h-1a.492.492 0 0 1-.478.478v1Zm1.478-1.478c0-.806-.672-1.478-1.478-1.478v1c.254 0 .478.224.478.478h1ZM17.623 36.679a.492.492 0 0 1-.478-.477h-1c0 .805.672 1.477 1.478 1.477v-1Zm-.478-.477c0-.254.224-.478.478-.478v-1c-.806 0-1.478.672-1.478 1.478h1Zm.478 1.477c.806 0 1.478-.672 1.478-1.477h-1a.492.492 0 0 1-.478.477v1Zm1.478-1.477c0-.806-.672-1.478-1.478-1.478v1c.253 0 .478.224.478.478h1Zm-1.478 23.945a.492.492 0 0 1-.478-.478h-1c0 .806.672 1.478 1.478 1.478v-1Zm-.478-.478c0-.253.224-.478.478-.478v-1c-.806 0-1.478.672-1.478 1.478h1Zm.478 1.478c.806 0 1.478-.672 1.478-1.478h-1a.492.492 0 0 1-.478.478v1Zm1.478-1.478c0-.806-.672-1.478-1.478-1.478v1c.253 0 .478.225.478.478h1Zm12.211-22.99a.492.492 0 0 1-.478-.477h-1c0 .805.673 1.477 1.478 1.477v-1Zm-.478-.477c0-.254.225-.478.478-.478v-1c-.805 0-1.478.672-1.478 1.478h1Zm.478 1.477c.806 0 1.478-.672 1.478-1.477h-1a.492.492 0 0 1-.478.477v1Zm1.478-1.477c0-.806-.672-1.478-1.478-1.478v1c.254 0 .478.224.478.478h1Zm-1.478 23.945a.492.492 0 0 1-.478-.478h-1c0 .806.673 1.478 1.478 1.478v-1Zm-.478-.478c0-.253.225-.478.478-.478v-1c-.805 0-1.478.672-1.478 1.478h1Zm.478 1.478c.806 0 1.478-.672 1.478-1.478h-1a.492.492 0 0 1-.478.478v1Zm1.478-1.478c0-.806-.672-1.478-1.478-1.478v1c.254 0 .478.225.478.478h1Z" fill="#FC15EF" /></symbol><symbol fill="none"  viewBox="0 0 102 92" id="icon-4"><path d="M16.673 91H85.89l15.069-27.02H31.701M35.367 1h31.185L101 63.98H69.816S36.818 3.553 35.367 1Zm0 0L1 62.044 16.713 91S49.55 31.975 50.96 29.462" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol fill="none"  viewBox="0 0 102 92" id="icon-44"><path d="M16.673 91H85.89l15.069-27.02H31.701M35.367 1h31.185L101 63.98H69.816S36.818 3.553 35.367 1Zm0 0L1 62.044 16.713 91S49.55 31.975 50.96 29.462" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol fill="none"  viewBox="0 0 102 92" id="icon-444"><path d="M16.673 91H85.89l15.069-27.02H31.701M35.367 1h31.185L101 63.98H69.816S36.818 3.553 35.367 1Zm0 0L1 62.044 16.713 91S49.55 31.975 50.96 29.462" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol fill="none"  viewBox="0 0 92 92" id="icon-5"><path d="M75.394 16.647c0 8.628-16.678 15.647-37.197 15.647-20.518 0-37.156-7.019-37.156-15.647C1 7.977 17.638 1 38.197 1c20.56 0 37.197 6.977 37.197 15.647Zm0 0v17.628M38.197 47.94c-20.518 0-37.156-7.018-37.156-15.646m31.294 33.068C14.583 64.206 1.04 57.725 1.04 49.922m33.234 33.151C15.573 82.248 1 75.601 1 67.51V16.647M60.408 65.94l14.285-8.587M61.028 73.702l13.004 5.202M44.06 70.44c0 4.872 3.963 8.794 8.793 8.794 4.83 0 8.794-3.963 8.794-8.794 0-4.83-3.963-8.793-8.794-8.793-4.83 0-8.793 3.963-8.793 8.793Zm29.353 11.766c0 4.872 3.963 8.794 8.793 8.794C87.036 91 91 87.037 91 82.206c0-4.83-3.963-8.793-8.794-8.793-4.83 0-8.793 3.963-8.793 8.793Zm0-29.353c0 4.872 3.963 8.794 8.793 8.794 4.83 0 8.794-3.963 8.794-8.794 0-4.83-3.963-8.793-8.794-8.793-4.83 0-8.793 3.963-8.793 8.793Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol fill="none"  viewBox="0 0 92 92" id="icon-55"><path d="M75.394 16.647c0 8.628-16.678 15.647-37.197 15.647-20.518 0-37.156-7.019-37.156-15.647C1 7.977 17.638 1 38.197 1c20.56 0 37.197 6.977 37.197 15.647Zm0 0v17.628M38.197 47.94c-20.518 0-37.156-7.018-37.156-15.646m31.294 33.068C14.583 64.206 1.04 57.725 1.04 49.922m33.234 33.151C15.573 82.248 1 75.601 1 67.51V16.647M60.408 65.94l14.285-8.587M61.028 73.702l13.004 5.202M44.06 70.44c0 4.872 3.963 8.794 8.793 8.794 4.83 0 8.794-3.963 8.794-8.794 0-4.83-3.963-8.793-8.794-8.793-4.83 0-8.793 3.963-8.793 8.793Zm29.353 11.766c0 4.872 3.963 8.794 8.793 8.794C87.036 91 91 87.037 91 82.206c0-4.83-3.963-8.793-8.794-8.793-4.83 0-8.793 3.963-8.793 8.793Zm0-29.353c0 4.872 3.963 8.794 8.793 8.794 4.83 0 8.794-3.963 8.794-8.794 0-4.83-3.963-8.793-8.794-8.793-4.83 0-8.793 3.963-8.793 8.793Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol fill="none"  viewBox="0 0 92 92" id="icon-555"><path d="M75.394 16.647c0 8.628-16.678 15.647-37.197 15.647-20.518 0-37.156-7.019-37.156-15.647C1 7.977 17.638 1 38.197 1c20.56 0 37.197 6.977 37.197 15.647Zm0 0v17.628M38.197 47.94c-20.518 0-37.156-7.018-37.156-15.646m31.294 33.068C14.583 64.206 1.04 57.725 1.04 49.922m33.234 33.151C15.573 82.248 1 75.601 1 67.51V16.647M60.408 65.94l14.285-8.587M61.028 73.702l13.004 5.202M44.06 70.44c0 4.872 3.963 8.794 8.793 8.794 4.83 0 8.794-3.963 8.794-8.794 0-4.83-3.963-8.793-8.794-8.793-4.83 0-8.793 3.963-8.793 8.793Zm29.353 11.766c0 4.872 3.963 8.794 8.793 8.794C87.036 91 91 87.037 91 82.206c0-4.83-3.963-8.793-8.794-8.793-4.83 0-8.793 3.963-8.793 8.793Zm0-29.353c0 4.872 3.963 8.794 8.793 8.794 4.83 0 8.794-3.963 8.794-8.794 0-4.83-3.963-8.793-8.794-8.793-4.83 0-8.793 3.963-8.793 8.793Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol fill="none"  viewBox="0 0 92 92" id="icon-6"><path d="M49 37.5a.5.5 0 0 0 0-1v1ZM6.272 31.728l.354-.354-.354.354Zm0-25.456L5.92 5.92l.353.353ZM67 1v.5V1Zm10.765 3.571-.299.401.3-.4Zm6.493 9.3-.48.143.48-.142Zm-.359 11.337.47.173-.47-.173Zm-7.34 8.453a.5.5 0 0 0 .546.838l-.546-.838ZM31 73.5a.5.5 0 0 0 0-1v1ZM6.272 67.728l.354-.354-.354.354Zm0-25.456.354.354-.354-.354ZM40 18.5a.5.5 0 1 0 0 1v-1Zm27 1a.5.5 0 1 0 0-1v1Zm.5 35.5a.5.5 0 1 0-1 0h1Zm-1 24a.5.5 0 0 0 1 0h-1ZM55 66.5a.5.5 0 1 0 0 1v-1Zm24 1a.5.5 0 1 0 0-1v1Zm-30-31H19v1h30v-1Zm-30 0a17.5 17.5 0 0 1-12.374-5.126l-.707.707A18.5 18.5 0 0 0 19 37.5v-1ZM6.626 31.374A17.5 17.5 0 0 1 1.5 19h-1a18.5 18.5 0 0 0 5.419 13.081l.707-.707ZM1.5 19A17.5 17.5 0 0 1 6.626 6.626l-.707-.707A18.5 18.5 0 0 0 .5 19h1ZM6.626 6.626A17.5 17.5 0 0 1 19 1.5v-1A18.5 18.5 0 0 0 5.919 5.919l.707.707ZM19 1.5h48v-1H19v1Zm48 0c3.772 0 7.443 1.217 10.466 3.472l.598-.801A18.499 18.499 0 0 0 67 .5v1Zm10.466 3.472a17.499 17.499 0 0 1 6.312 9.042l.959-.285a18.5 18.5 0 0 0-6.673-9.559l-.598.802Zm6.312 9.042a17.5 17.5 0 0 1-.348 11.022l.938.345a18.499 18.499 0 0 0 .369-11.652l-.959.285Zm-.348 11.022a17.503 17.503 0 0 1-6.871 8.625l.546.838a18.502 18.502 0 0 0 7.263-9.118l-.938-.345ZM31 72.5H19v1h12v-1Zm-12 0a17.5 17.5 0 0 1-12.374-5.126l-.707.707A18.5 18.5 0 0 0 19 73.5v-1ZM6.626 67.374A17.5 17.5 0 0 1 1.5 55h-1A18.5 18.5 0 0 0 5.919 68.08l.707-.707ZM1.5 55a17.5 17.5 0 0 1 5.126-12.374l-.707-.707A18.5 18.5 0 0 0 .5 54.999h1Zm5.126-12.374A17.5 17.5 0 0 1 19 37.5v-1a18.5 18.5 0 0 0-13.081 5.419l.707.707ZM40 19.5h27v-1H40v1Zm27 72c13.531 0 24.5-10.969 24.5-24.5h-1c0 12.979-10.521 23.5-23.5 23.5v1ZM91.5 67c0-13.531-10.969-24.5-24.5-24.5v1c12.979 0 23.5 10.521 23.5 23.5h1ZM67 42.5c-13.53 0-24.5 10.969-24.5 24.5h1c0-12.979 10.521-23.5 23.5-23.5v-1ZM42.5 67c0 13.531 10.97 24.5 24.5 24.5v-1c-12.979 0-23.5-10.521-23.5-23.5h-1Zm24-12v24h1V55h-1ZM55 67.5h24v-1H55v1ZM19 20a1 1 0 0 1-1-1h-1a2 2 0 0 0 2 2v-1Zm-1-1a1 1 0 0 1 1-1v-1a2 2 0 0 0-2 2h1Zm1 2a2 2 0 0 0 2-2h-1a1 1 0 0 1-1 1v1Zm2-2a2 2 0 0 0-2-2v1a1 1 0 0 1 1 1h1Zm-2 37a1 1 0 0 1-1-1h-1a2 2 0 0 0 2 2v-1Zm-1-1a1 1 0 0 1 1-1v-1a2 2 0 0 0-2 2h1Zm1 2a2 2 0 0 0 2-2h-1a1 1 0 0 1-1 1v1Zm2-2a2 2 0 0 0-2-2v1a1 1 0 0 1 1 1h1Z" fill="#fff" /></symbol><symbol fill="none"  viewBox="0 0 92 92" id="icon-66"><path d="M49 37.5a.5.5 0 0 0 0-1v1ZM6.272 31.728l.354-.354-.354.354Zm0-25.456L5.92 5.92l.353.353ZM67 1v.5V1Zm10.765 3.571-.299.401.3-.4Zm6.493 9.3-.48.143.48-.142Zm-.359 11.337.47.173-.47-.173Zm-7.34 8.453a.5.5 0 0 0 .546.838l-.546-.838ZM31 73.5a.5.5 0 0 0 0-1v1ZM6.272 67.728l.354-.354-.354.354Zm0-25.456.354.354-.354-.354ZM40 18.5a.5.5 0 1 0 0 1v-1Zm27 1a.5.5 0 1 0 0-1v1Zm.5 35.5a.5.5 0 1 0-1 0h1Zm-1 24a.5.5 0 0 0 1 0h-1ZM55 66.5a.5.5 0 1 0 0 1v-1Zm24 1a.5.5 0 1 0 0-1v1Zm-30-31H19v1h30v-1Zm-30 0a17.5 17.5 0 0 1-12.374-5.126l-.707.707A18.5 18.5 0 0 0 19 37.5v-1ZM6.626 31.374A17.5 17.5 0 0 1 1.5 19h-1a18.5 18.5 0 0 0 5.419 13.081l.707-.707ZM1.5 19A17.5 17.5 0 0 1 6.626 6.626l-.707-.707A18.5 18.5 0 0 0 .5 19h1ZM6.626 6.626A17.5 17.5 0 0 1 19 1.5v-1A18.5 18.5 0 0 0 5.919 5.919l.707.707ZM19 1.5h48v-1H19v1Zm48 0c3.772 0 7.443 1.217 10.466 3.472l.598-.801A18.499 18.499 0 0 0 67 .5v1Zm10.466 3.472a17.499 17.499 0 0 1 6.312 9.042l.959-.285a18.5 18.5 0 0 0-6.673-9.559l-.598.802Zm6.312 9.042a17.5 17.5 0 0 1-.348 11.022l.938.345a18.499 18.499 0 0 0 .369-11.652l-.959.285Zm-.348 11.022a17.503 17.503 0 0 1-6.871 8.625l.546.838a18.502 18.502 0 0 0 7.263-9.118l-.938-.345ZM31 72.5H19v1h12v-1Zm-12 0a17.5 17.5 0 0 1-12.374-5.126l-.707.707A18.5 18.5 0 0 0 19 73.5v-1ZM6.626 67.374A17.5 17.5 0 0 1 1.5 55h-1A18.5 18.5 0 0 0 5.919 68.08l.707-.707ZM1.5 55a17.5 17.5 0 0 1 5.126-12.374l-.707-.707A18.5 18.5 0 0 0 .5 54.999h1Zm5.126-12.374A17.5 17.5 0 0 1 19 37.5v-1a18.5 18.5 0 0 0-13.081 5.419l.707.707ZM40 19.5h27v-1H40v1Zm27 72c13.531 0 24.5-10.969 24.5-24.5h-1c0 12.979-10.521 23.5-23.5 23.5v1ZM91.5 67c0-13.531-10.969-24.5-24.5-24.5v1c12.979 0 23.5 10.521 23.5 23.5h1ZM67 42.5c-13.53 0-24.5 10.969-24.5 24.5h1c0-12.979 10.521-23.5 23.5-23.5v-1ZM42.5 67c0 13.531 10.97 24.5 24.5 24.5v-1c-12.979 0-23.5-10.521-23.5-23.5h-1Zm24-12v24h1V55h-1ZM55 67.5h24v-1H55v1ZM19 20a1 1 0 0 1-1-1h-1a2 2 0 0 0 2 2v-1Zm-1-1a1 1 0 0 1 1-1v-1a2 2 0 0 0-2 2h1Zm1 2a2 2 0 0 0 2-2h-1a1 1 0 0 1-1 1v1Zm2-2a2 2 0 0 0-2-2v1a1 1 0 0 1 1 1h1Zm-2 37a1 1 0 0 1-1-1h-1a2 2 0 0 0 2 2v-1Zm-1-1a1 1 0 0 1 1-1v-1a2 2 0 0 0-2 2h1Zm1 2a2 2 0 0 0 2-2h-1a1 1 0 0 1-1 1v1Zm2-2a2 2 0 0 0-2-2v1a1 1 0 0 1 1 1h1Z" fill="#fff" /></symbol><symbol fill="none"  viewBox="0 0 92 92" id="icon-666"><path d="M49 37.5a.5.5 0 0 0 0-1v1ZM6.272 31.728l.354-.354-.354.354Zm0-25.456L5.92 5.92l.353.353ZM67 1v.5V1Zm10.765 3.571-.299.401.3-.4Zm6.493 9.3-.48.143.48-.142Zm-.359 11.337.47.173-.47-.173Zm-7.34 8.453a.5.5 0 0 0 .546.838l-.546-.838ZM31 73.5a.5.5 0 0 0 0-1v1ZM6.272 67.728l.354-.354-.354.354Zm0-25.456.354.354-.354-.354ZM40 18.5a.5.5 0 1 0 0 1v-1Zm27 1a.5.5 0 1 0 0-1v1Zm.5 35.5a.5.5 0 1 0-1 0h1Zm-1 24a.5.5 0 0 0 1 0h-1ZM55 66.5a.5.5 0 1 0 0 1v-1Zm24 1a.5.5 0 1 0 0-1v1Zm-30-31H19v1h30v-1Zm-30 0a17.5 17.5 0 0 1-12.374-5.126l-.707.707A18.5 18.5 0 0 0 19 37.5v-1ZM6.626 31.374A17.5 17.5 0 0 1 1.5 19h-1a18.5 18.5 0 0 0 5.419 13.081l.707-.707ZM1.5 19A17.5 17.5 0 0 1 6.626 6.626l-.707-.707A18.5 18.5 0 0 0 .5 19h1ZM6.626 6.626A17.5 17.5 0 0 1 19 1.5v-1A18.5 18.5 0 0 0 5.919 5.919l.707.707ZM19 1.5h48v-1H19v1Zm48 0c3.772 0 7.443 1.217 10.466 3.472l.598-.801A18.499 18.499 0 0 0 67 .5v1Zm10.466 3.472a17.499 17.499 0 0 1 6.312 9.042l.959-.285a18.5 18.5 0 0 0-6.673-9.559l-.598.802Zm6.312 9.042a17.5 17.5 0 0 1-.348 11.022l.938.345a18.499 18.499 0 0 0 .369-11.652l-.959.285Zm-.348 11.022a17.503 17.503 0 0 1-6.871 8.625l.546.838a18.502 18.502 0 0 0 7.263-9.118l-.938-.345ZM31 72.5H19v1h12v-1Zm-12 0a17.5 17.5 0 0 1-12.374-5.126l-.707.707A18.5 18.5 0 0 0 19 73.5v-1ZM6.626 67.374A17.5 17.5 0 0 1 1.5 55h-1A18.5 18.5 0 0 0 5.919 68.08l.707-.707ZM1.5 55a17.5 17.5 0 0 1 5.126-12.374l-.707-.707A18.5 18.5 0 0 0 .5 54.999h1Zm5.126-12.374A17.5 17.5 0 0 1 19 37.5v-1a18.5 18.5 0 0 0-13.081 5.419l.707.707ZM40 19.5h27v-1H40v1Zm27 72c13.531 0 24.5-10.969 24.5-24.5h-1c0 12.979-10.521 23.5-23.5 23.5v1ZM91.5 67c0-13.531-10.969-24.5-24.5-24.5v1c12.979 0 23.5 10.521 23.5 23.5h1ZM67 42.5c-13.53 0-24.5 10.969-24.5 24.5h1c0-12.979 10.521-23.5 23.5-23.5v-1ZM42.5 67c0 13.531 10.97 24.5 24.5 24.5v-1c-12.979 0-23.5-10.521-23.5-23.5h-1Zm24-12v24h1V55h-1ZM55 67.5h24v-1H55v1ZM19 20a1 1 0 0 1-1-1h-1a2 2 0 0 0 2 2v-1Zm-1-1a1 1 0 0 1 1-1v-1a2 2 0 0 0-2 2h1Zm1 2a2 2 0 0 0 2-2h-1a1 1 0 0 1-1 1v1Zm2-2a2 2 0 0 0-2-2v1a1 1 0 0 1 1 1h1Zm-2 37a1 1 0 0 1-1-1h-1a2 2 0 0 0 2 2v-1Zm-1-1a1 1 0 0 1 1-1v-1a2 2 0 0 0-2 2h1Zm1 2a2 2 0 0 0 2-2h-1a1 1 0 0 1-1 1v1Zm2-2a2 2 0 0 0-2-2v1a1 1 0 0 1 1 1h1Z" fill="#FC15EF" /></symbol><symbol fill="none"  viewBox="0 0 31 31" id="icon-Button-1"><rect width="30.39" height="30.39" rx="15.195" transform="matrix(-1 0 0 1 30.695 0)" fill="#5A0A93" /><rect x="-.5" y=".5" width="29.39" height="29.39" rx="14.695" transform="matrix(-1 0 0 1 29.695 0)" stroke="currentColor" stroke-opacity=".4" /><path d="M13.49 10.466a.708.708 0 0 0-1 1l4.088 4.088-4.089 4.088a.708.708 0 0 0 1 1l4.587-4.585a.702.702 0 0 0 .206-.502.706.706 0 0 0-.206-.504l-4.587-4.585Z" fill="#fff" /></symbol><symbol fill="none"  viewBox="0 0 31 31" id="icon-Button"><rect x=".305" width="30.39" height="30.39" rx="15.195" fill="#5A0A93" /><rect x=".805" y=".5" width="29.39" height="29.39" rx="14.695" stroke="currentColor" stroke-opacity=".4" /><path d="M17.51 10.466a.708.708 0 0 1 1 1l-4.088 4.088 4.089 4.088a.708.708 0 0 1-1 1l-4.587-4.585a.7.7 0 0 1-.206-.502c0-.184.067-.365.206-.504l4.587-4.585Z" fill="#fff" /></symbol><symbol  fill="none" viewBox="0 0 40 40" id="icon-DC-2"><defs><clipPath id="icon-DC-2_b"><rect x="8" y="8" width="24" height="24" rx="0" /></clipPath><clipPath id="icon-DC-2_c"><rect x="8" y="8" width="24" height="24" rx="0" /></clipPath><clipPath id="icon-DC-2_d"><rect x="8" y="8" width="24" height="24" rx="0" /></clipPath><filter id="icon-DC-2_a" filterUnits="objectBoundingBox" color-interpolation-filters="sRGB" x="0" y="0" width="1" height="1"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape"></feBlend><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset></feOffset><feGaussianBlur stdDeviation="3"></feGaussianBlur><feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"></feComposite><feColorMatrix values="0 0 0 0 0.03921568766236305 0 0 0 0 0.9176470637321472 0 0 0 0 0.9450980424880981 0 0 0 1 0"></feColorMatrix><feBlend in2="shape" result="effect1_innerShadow"></feBlend><feGaussianBlur in="BackgroundImageFix" stdDeviation="15"></feGaussianBlur><feComposite in2="SourceAlpha" operator="in" result="effect2_foregroundBlur"></feComposite><feBlend in="SourceGraphic" in2="effect2_foregroundBlur" result="shape"></feBlend></filter></defs><g filter="url(#icon-DC-2_a)"><rect width="40" height="40" rx="10" fill="#320A8C" fill-opacity=".4" /><rect x=".5" y=".5" width="39" height="39" rx="9.5" stroke="currentColor" /><g clip-path="url(#icon-DC-2_b)"><g clip-path="url(#icon-DC-2_c)"><g clip-path="url(#icon-DC-2_d)"><path d="M27.304 13.337a17.32 17.32 0 0 0-4.341-1.338c-.191.33-.404.775-.552 1.125a16.592 16.592 0 0 0-4.809 0 13.795 13.795 0 0 0-.552-1.125 17.077 17.077 0 0 0-4.342 1.338c-2.748 4.054-3.49 8.011-3.12 11.917a17.686 17.686 0 0 0 5.319 2.664c.425-.573.807-1.19 1.135-1.836a11.144 11.144 0 0 1-1.793-.86c.148-.106.298-.222.436-.34 3.458 1.583 7.206 1.583 10.623 0 .149.118.287.234.436.34-.574.34-1.168.626-1.794.86.329.648.711 1.263 1.135 1.836a17.59 17.59 0 0 0 5.318-2.664c.457-4.52-.722-8.447-3.1-11.917ZM16.52 22.845c-1.04 0-1.89-.945-1.89-2.101 0-1.156.83-2.101 1.89-2.101 1.05 0 1.91.945 1.89 2.101 0 1.156-.84 2.101-1.89 2.101Zm6.974 0c-1.04 0-1.89-.945-1.89-2.101 0-1.156.829-2.101 1.89-2.101 1.05 0 1.91.945 1.889 2.101 0 1.156-.828 2.101-1.889 2.101Z" fill="#0AEAF1" /></g></g></g></g></symbol><symbol fill="none"  viewBox="0 0 40 40" id="icon-DC-Click"><g filter="url(#icon-DC-Click_a)"><rect width="40" height="40" rx="10" fill="#320A8C" fill-opacity=".4" /><rect x=".5" y=".5" width="39" height="39" rx="9.5" stroke="currentColor" /><g clip-path="url(#icon-DC-Click_b)"><g clip-path="url(#icon-DC-Click_c)"><path d="M27.304 13.337a17.318 17.318 0 0 0-4.341-1.338c-.191.33-.404.775-.552 1.125a16.593 16.593 0 0 0-4.809 0 13.804 13.804 0 0 0-.552-1.125 17.072 17.072 0 0 0-4.342 1.338c-2.748 4.053-3.49 8.011-3.12 11.917a17.689 17.689 0 0 0 5.319 2.664c.425-.573.807-1.19 1.135-1.836a11.142 11.142 0 0 1-1.793-.86 6.97 6.97 0 0 0 .436-.34c3.458 1.583 7.205 1.583 10.623 0 .149.118.287.234.436.34-.574.34-1.168.626-1.794.86.329.648.712 1.263 1.135 1.836 1.91-.58 3.71-1.48 5.318-2.664.457-4.52-.722-8.447-3.1-11.917ZM16.52 22.845c-1.04 0-1.89-.945-1.89-2.101 0-1.156.83-2.101 1.89-2.101 1.05 0 1.91.945 1.89 2.101 0 1.156-.84 2.101-1.89 2.101Zm6.974 0c-1.04 0-1.89-.945-1.89-2.101 0-1.156.829-2.101 1.89-2.101 1.05 0 1.91.945 1.889 2.101 0 1.156-.828 2.101-1.889 2.101Z" fill="#0AEAF1" /></g></g></g><defs><clipPath id="icon-DC-Click_b"><path fill="#fff" transform="translate(8 8)" d="M0 0h24v24H0z" /></clipPath><clipPath id="icon-DC-Click_c"><path fill="#fff" transform="translate(8 8)" d="M0 0h24v24H0z" /></clipPath><filter id="icon-DC-Click_a" x="-30" y="-30" width="100" height="100" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feGaussianBlur in="BackgroundImageFix" stdDeviation="15"></feGaussianBlur><feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur_1285_1871"></feComposite><feBlend in="SourceGraphic" in2="effect1_backgroundBlur_1285_1871" result="shape"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset></feOffset><feGaussianBlur stdDeviation="3"></feGaussianBlur><feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"></feComposite><feColorMatrix values="0 0 0 0 0.0392157 0 0 0 0 0.917647 0 0 0 0 0.945098 0 0 0 1 0"></feColorMatrix><feBlend in2="shape" result="effect2_innerShadow_1285_1871"></feBlend></filter></defs></symbol><symbol  fill="none" viewBox="0 0 40 40" id="icon-DC"><defs><clipPath id="icon-DC_a"><rect x="8" y="8" width="24" height="24" rx="0" /></clipPath><clipPath id="icon-DC_b"><rect x="8" y="8" width="24" height="24" rx="0" /></clipPath><clipPath id="icon-DC_c"><rect x="8" y="8" width="24" height="24" rx="0" /></clipPath></defs><rect width="40" height="40" rx="10" fill="#320A8C" fill-opacity=".4" /><rect x=".5" y=".5" width="39" height="39" rx="9.5" stroke-opacity=".4" stroke="currentColor" /><g clip-path="url(#icon-DC_a)"><g clip-path="url(#icon-DC_b)"><g clip-path="url(#icon-DC_c)"><path d="M27.304 13.337a17.32 17.32 0 0 0-4.341-1.338c-.191.33-.404.775-.552 1.125a16.592 16.592 0 0 0-4.809 0 13.795 13.795 0 0 0-.552-1.125 17.077 17.077 0 0 0-4.342 1.338c-2.748 4.054-3.49 8.011-3.12 11.917a17.686 17.686 0 0 0 5.319 2.664c.425-.573.807-1.19 1.135-1.836a11.144 11.144 0 0 1-1.793-.86c.148-.106.298-.222.436-.34 3.458 1.583 7.206 1.583 10.623 0 .149.118.287.234.436.34-.574.34-1.168.626-1.794.86.329.648.711 1.263 1.135 1.836a17.59 17.59 0 0 0 5.318-2.664c.457-4.52-.722-8.447-3.1-11.917ZM16.52 22.845c-1.04 0-1.89-.945-1.89-2.101 0-1.156.83-2.101 1.89-2.101 1.05 0 1.91.945 1.89 2.101 0 1.156-.84 2.101-1.89 2.101Zm6.974 0c-1.04 0-1.89-.945-1.89-2.101 0-1.156.829-2.101 1.89-2.101 1.05 0 1.91.945 1.889 2.101 0 1.156-.828 2.101-1.889 2.101Z" fill="#FFF" /></g></g></g></symbol><symbol fill="none"  viewBox="0 0 40 40" id="icon-GitHub-Click"><g filter="url(#icon-GitHub-Click_a)"><rect width="40" height="40" rx="10" fill="#320A8C" fill-opacity=".4" /><rect x=".5" y=".5" width="39" height="39" rx="9.5" stroke="currentColor" /><g clip-path="url(#icon-GitHub-Click_b)"><g clip-path="url(#icon-GitHub-Click_c)"><path d="M20 10a9.998 9.998 0 0 0-10 10.001 9.994 9.994 0 0 0 6.839 9.488c.5.087.687-.213.687-.476 0-.238-.013-1.025-.013-1.862-2.513.463-3.163-.613-3.362-1.175-.113-.288-.6-1.175-1.026-1.413-.349-.187-.85-.65-.01-.662.786-.013 1.349.725 1.535 1.026.9 1.512 2.338 1.086 2.913.823.087-.649.35-1.086.638-1.337-2.225-.25-4.55-1.113-4.55-4.938 0-1.086.387-1.986 1.025-2.687-.1-.25-.45-1.275.1-2.65 0 0 .838-.262 2.749 1.025a9.283 9.283 0 0 1 2.501-.338c.85 0 1.7.113 2.5.338 1.912-1.3 2.75-1.025 2.75-1.025.55 1.375.2 2.4.1 2.65.637.7 1.025 1.588 1.025 2.687 0 3.838-2.337 4.688-4.563 4.938.362.313.675.913.675 1.85 0 1.337-.013 2.413-.013 2.75 0 .262.188.575.688.476a10.016 10.016 0 0 0 6.053-13.316A9.997 9.997 0 0 0 20.002 10H20Z" fill="#0AEAF1" /></g></g></g><defs><clipPath id="icon-GitHub-Click_b"><path fill="#fff" transform="translate(8 8)" d="M0 0h24v24H0z" /></clipPath><clipPath id="icon-GitHub-Click_c"><path fill="#fff" transform="translate(8 8)" d="M0 0h24v24H0z" /></clipPath><filter id="icon-GitHub-Click_a" x="-30" y="-30" width="100" height="100" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feGaussianBlur in="BackgroundImageFix" stdDeviation="15"></feGaussianBlur><feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur_1285_1881"></feComposite><feBlend in="SourceGraphic" in2="effect1_backgroundBlur_1285_1881" result="shape"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset></feOffset><feGaussianBlur stdDeviation="3"></feGaussianBlur><feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"></feComposite><feColorMatrix values="0 0 0 0 0.0392157 0 0 0 0 0.917647 0 0 0 0 0.945098 0 0 0 1 0"></feColorMatrix><feBlend in2="shape" result="effect2_innerShadow_1285_1881"></feBlend></filter></defs></symbol><symbol  fill="none" viewBox="0 0 36 36" id="icon-Github-2"><defs><clipPath id="icon-Github-2_a"><rect x="6" y="6" width="24" height="24" rx="0" /></clipPath></defs><rect width="36" height="36" rx="8" fill="#320A8C" fill-opacity=".4" /><rect x=".5" y=".5" width="35" height="35" rx="7.5" stroke-opacity=".4" stroke="currentColor" /><g clip-path="url(#icon-Github-2_a)"><path d="M18 8.001a9.997 9.997 0 0 0-10 10 9.992 9.992 0 0 0 6.838 9.488c.5.087.687-.213.687-.476 0-.237-.013-1.025-.013-1.862-2.512.463-3.163-.613-3.362-1.175-.113-.288-.6-1.174-1.026-1.412-.349-.188-.85-.65-.01-.663.786-.013 1.349.725 1.535 1.026.9 1.512 2.338 1.087 2.913.824.087-.65.35-1.087.638-1.338-2.225-.25-4.55-1.113-4.55-4.937 0-1.087.387-1.987 1.026-2.687-.1-.251-.45-1.276.099-2.651 0 0 .838-.262 2.749 1.025a9.28 9.28 0 0 1 2.502-.338c.85 0 1.7.114 2.499.338 1.912-1.299 2.75-1.025 2.75-1.025.55 1.375.2 2.4.1 2.65.637.701 1.026 1.588 1.026 2.688 0 3.837-2.338 4.687-4.564 4.937.363.313.676.913.676 1.85 0 1.338-.013 2.413-.013 2.75 0 .262.187.575.687.476a10.017 10.017 0 0 0 6.053-13.316A9.998 9.998 0 0 0 18.003 8l-.003.001Z" fill="#FFF" /></g></symbol><symbol  fill="none" viewBox="0 0 36 36" id="icon-Github"><defs><clipPath id="icon-Github_b"><rect x="6" y="6" width="24" height="24" rx="0" /></clipPath><filter id="icon-Github_a" filterUnits="objectBoundingBox" color-interpolation-filters="sRGB" x="0" y="0" width="1" height="1"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape"></feBlend><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset></feOffset><feGaussianBlur stdDeviation="3"></feGaussianBlur><feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"></feComposite><feColorMatrix values="0 0 0 0 0.03921568766236305 0 0 0 0 0.9176470637321472 0 0 0 0 0.9450980424880981 0 0 0 1 0"></feColorMatrix><feBlend in2="shape" result="effect1_innerShadow"></feBlend><feGaussianBlur in="BackgroundImageFix" stdDeviation="15"></feGaussianBlur><feComposite in2="SourceAlpha" operator="in" result="effect2_foregroundBlur"></feComposite><feBlend in="SourceGraphic" in2="effect2_foregroundBlur" result="shape"></feBlend></filter></defs><g filter="url(#icon-Github_a)"><rect width="36" height="36" rx="8" fill="#320A8C" fill-opacity=".4" /><rect x=".5" y=".5" width="35" height="35" rx="7.5" stroke="currentColor" /><g clip-path="url(#icon-Github_b)"><path d="M18 8.001a9.997 9.997 0 0 0-10 10 9.992 9.992 0 0 0 6.838 9.488c.5.087.687-.213.687-.476 0-.237-.013-1.025-.013-1.862-2.512.463-3.163-.613-3.362-1.175-.113-.288-.6-1.174-1.026-1.412-.349-.188-.85-.65-.01-.663.786-.013 1.349.725 1.535 1.026.9 1.512 2.338 1.087 2.913.824.087-.65.35-1.087.638-1.338-2.225-.25-4.55-1.113-4.55-4.937 0-1.087.387-1.987 1.026-2.687-.1-.251-.45-1.276.099-2.651 0 0 .838-.262 2.749 1.025a9.28 9.28 0 0 1 2.502-.338c.85 0 1.7.114 2.499.338 1.912-1.299 2.75-1.025 2.75-1.025.55 1.375.2 2.4.1 2.65.637.701 1.026 1.588 1.026 2.688 0 3.837-2.338 4.687-4.564 4.937.363.313.676.913.676 1.85 0 1.338-.013 2.413-.013 2.75 0 .262.187.575.687.476a10.017 10.017 0 0 0 6.053-13.316A9.998 9.998 0 0 0 18.003 8l-.003.001Z" fill="#0AEAF1" /></g></g></symbol><symbol  fill="none" viewBox="0 0 40 40" id="icon-Link-2"><rect width="40" height="40" rx="10" fill="#320A8C" fill-opacity=".4" /><rect x=".5" y=".5" width="39" height="39" rx="9.5" stroke-opacity=".4" stroke="currentColor" /><path d="M12.284 14.445a2.286 2.286 0 0 0 2.283-2.287 2.286 2.286 0 0 0-2.283-2.288A2.286 2.286 0 0 0 10 12.158a2.286 2.286 0 0 0 2.284 2.287Zm4.439 1.733V28.87h3.934v-6.276c0-1.656.31-3.26 2.36-3.26 2.022 0 2.047 1.894 2.047 3.365v6.172H29v-6.96c0-3.418-.735-6.045-4.724-6.045-1.915 0-3.199 1.052-3.724 2.049H20.5v-1.736h-3.776Zm-6.41 0h3.94V28.87h-3.94V16.18Z" fill="#FFF" /></symbol><symbol fill="none"  viewBox="0 0 40 40" id="icon-Link-Click"><g filter="url(#icon-Link-Click_a)"><rect width="40" height="40" rx="10" fill="#320A8C" fill-opacity=".4" /><rect x=".5" y=".5" width="39" height="39" rx="9.5" stroke="currentColor" /><path d="M12.284 14.445a2.285 2.285 0 0 0 2.283-2.287 2.286 2.286 0 0 0-2.283-2.288A2.286 2.286 0 0 0 10 12.158a2.285 2.285 0 0 0 2.284 2.287ZM16.723 16.178V28.87h3.934v-6.276c0-1.656.31-3.26 2.36-3.26 2.022 0 2.047 1.894 2.047 3.365v6.172H29v-6.96c0-3.418-.735-6.045-4.724-6.045-1.915 0-3.199 1.052-3.724 2.049H20.5v-1.736h-3.776Zm-6.41 0h3.94V28.87h-3.94V16.18Z" fill="#0AEAF1" /></g><defs><filter id="icon-Link-Click_a" x="-30" y="-30" width="100" height="100" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feGaussianBlur in="BackgroundImageFix" stdDeviation="15"></feGaussianBlur><feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur_1285_1886"></feComposite><feBlend in="SourceGraphic" in2="effect1_backgroundBlur_1285_1886" result="shape"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset></feOffset><feGaussianBlur stdDeviation="3"></feGaussianBlur><feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"></feComposite><feColorMatrix values="0 0 0 0 0.0392157 0 0 0 0 0.917647 0 0 0 0 0.945098 0 0 0 1 0"></feColorMatrix><feBlend in2="shape" result="effect2_innerShadow_1285_1886"></feBlend></filter></defs></symbol><symbol  fill="none" viewBox="0 0 40 40" id="icon-Link"><defs><filter id="icon-Link_a" filterUnits="objectBoundingBox" color-interpolation-filters="sRGB" x="0" y="0" width="1" height="1"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape"></feBlend><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset></feOffset><feGaussianBlur stdDeviation="3"></feGaussianBlur><feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"></feComposite><feColorMatrix values="0 0 0 0 0.03921568766236305 0 0 0 0 0.9176470637321472 0 0 0 0 0.9450980424880981 0 0 0 1 0"></feColorMatrix><feBlend in2="shape" result="effect1_innerShadow"></feBlend><feGaussianBlur in="BackgroundImageFix" stdDeviation="15"></feGaussianBlur><feComposite in2="SourceAlpha" operator="in" result="effect2_foregroundBlur"></feComposite><feBlend in="SourceGraphic" in2="effect2_foregroundBlur" result="shape"></feBlend></filter></defs><g filter="url(#icon-Link_a)"><rect width="40" height="40" rx="10" fill="#320A8C" fill-opacity=".4" /><rect x=".5" y=".5" width="39" height="39" rx="9.5" stroke="currentColor" /><path d="M12.284 14.445a2.286 2.286 0 0 0 2.283-2.287 2.286 2.286 0 0 0-2.283-2.288A2.286 2.286 0 0 0 10 12.158a2.286 2.286 0 0 0 2.284 2.287Zm4.439 1.733V28.87h3.934v-6.276c0-1.656.31-3.26 2.36-3.26 2.022 0 2.047 1.894 2.047 3.365v6.172H29v-6.96c0-3.418-.735-6.045-4.724-6.045-1.915 0-3.199 1.052-3.724 2.049H20.5v-1.736h-3.776Zm-6.41 0h3.94V28.87h-3.94V16.18Z" fill="#0AEAF1" /></g></symbol><symbol fill="none"  viewBox="0 0 40 40" id="icon-TG-Click"><g filter="url(#icon-TG-Click_a)"><rect width="40" height="40" rx="10" fill="#320A8C" fill-opacity=".4" /><rect x=".5" y=".5" width="39" height="39" rx="9.5" stroke="currentColor" /><g clip-path="url(#icon-TG-Click_b)"><g clip-path="url(#icon-TG-Click_c)"><path d="M28.71 11.655s1.942-.758 1.78 1.083c-.054.757-.539 3.408-.916 6.276l-1.296 8.495s-.108 1.243-1.08 1.462c-.971.215-2.427-.759-2.697-.976-.216-.162-4.047-2.596-5.397-3.787-.377-.324-.81-.973.055-1.732l5.665-5.41c.648-.65 1.296-2.164-1.403-.325l-7.554 5.14s-.863.542-2.482.055l-3.509-1.083s-1.295-.812.918-1.623c5.397-2.542 12.034-5.14 17.916-7.574v-.002Z" fill="#0AEAF1" /></g></g></g><defs><clipPath id="icon-TG-Click_b"><path fill="#fff" transform="translate(8 8)" d="M0 0h24v24H0z" /></clipPath><clipPath id="icon-TG-Click_c"><path fill="#fff" transform="translate(8 8)" d="M0 0h24v24H0z" /></clipPath><filter id="icon-TG-Click_a" x="-30" y="-30" width="100" height="100" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feGaussianBlur in="BackgroundImageFix" stdDeviation="15"></feGaussianBlur><feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur_1285_1876"></feComposite><feBlend in="SourceGraphic" in2="effect1_backgroundBlur_1285_1876" result="shape"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset></feOffset><feGaussianBlur stdDeviation="3"></feGaussianBlur><feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"></feComposite><feColorMatrix values="0 0 0 0 0.0392157 0 0 0 0 0.917647 0 0 0 0 0.945098 0 0 0 1 0"></feColorMatrix><feBlend in2="shape" result="effect2_innerShadow_1285_1876"></feBlend></filter></defs></symbol><symbol  fill="none" viewBox="0 0 36 36" id="icon-Telegram-2"><defs><clipPath id="icon-Telegram-2_a"><rect x="6" y="6" width="24" height="24" rx="0" /></clipPath></defs><rect width="36" height="36" rx="8" fill="#320A8C" fill-opacity=".4" /><rect x=".5" y=".5" width="35" height="35" rx="7.5" stroke-opacity=".4" stroke="currentColor" /><g clip-path="url(#icon-Telegram-2_a)"><path d="M26.21 9.154s1.942-.757 1.78 1.084c-.054.757-.538 3.408-.916 6.276l-1.296 8.494s-.108 1.244-1.08 1.462c-.97.216-2.427-.758-2.697-.975-.216-.163-4.047-2.596-5.396-3.788-.378-.324-.81-.973.054-1.73l5.665-5.412c.648-.649 1.296-2.163-1.403-.324l-7.554 5.14s-.863.542-2.482.055l-3.508-1.083s-1.295-.812.917-1.623c5.397-2.542 12.034-5.14 17.916-7.575Z" fill="#FFF" /></g></symbol><symbol  fill="none" viewBox="0 0 36 36" id="icon-Telegram"><defs><clipPath id="icon-Telegram_b"><rect x="6" y="6" width="24" height="24" rx="0" /></clipPath><filter id="icon-Telegram_a" filterUnits="objectBoundingBox" color-interpolation-filters="sRGB" x="0" y="0" width="1" height="1"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape"></feBlend><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset></feOffset><feGaussianBlur stdDeviation="3"></feGaussianBlur><feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"></feComposite><feColorMatrix values="0 0 0 0 0.03921568766236305 0 0 0 0 0.9176470637321472 0 0 0 0 0.9450980424880981 0 0 0 1 0"></feColorMatrix><feBlend in2="shape" result="effect1_innerShadow"></feBlend><feGaussianBlur in="BackgroundImageFix" stdDeviation="15"></feGaussianBlur><feComposite in2="SourceAlpha" operator="in" result="effect2_foregroundBlur"></feComposite><feBlend in="SourceGraphic" in2="effect2_foregroundBlur" result="shape"></feBlend></filter></defs><g filter="url(#icon-Telegram_a)"><rect width="36" height="36" rx="8" fill="#320A8C" fill-opacity=".4" /><rect x=".5" y=".5" width="35" height="35" rx="7.5" stroke="currentColor" /><g clip-path="url(#icon-Telegram_b)"><path d="M26.21 9.154s1.942-.757 1.78 1.084c-.054.757-.538 3.408-.916 6.276l-1.296 8.494s-.108 1.244-1.08 1.462c-.97.216-2.427-.758-2.697-.975-.216-.163-4.047-2.596-5.396-3.788-.378-.324-.81-.973.054-1.73l5.665-5.412c.648-.649 1.296-2.163-1.403-.324l-7.554 5.14s-.863.542-2.482.055l-3.508-1.083s-1.295-.812.917-1.623c5.397-2.542 12.034-5.14 17.916-7.575Z" fill="#0AEAF1" /></g></g></symbol><symbol  fill="none" viewBox="0 0 36 36" id="icon-Twitter-2"><rect width="36" height="36" rx="8" fill="#320A8C" fill-opacity=".4" /><rect x=".5" y=".5" width="35" height="35" rx="7.5" stroke-opacity=".4" stroke="currentColor" /><path d="M14.728 10H9l6.758 8.811L9.368 26h2.169l5.227-5.879L21.272 26H27l-7.044-9.182L26.018 10H23.85l-4.897 5.508L14.728 10Zm7.363 14.4-9.818-12.8h1.636l9.818 12.8H22.09Z" fill="#FFF" /></symbol><symbol  fill="none" viewBox="0 0 36 36" id="icon-Twitter"><defs><filter id="icon-Twitter_a" filterUnits="objectBoundingBox" color-interpolation-filters="sRGB" x="0" y="0" width="1" height="1"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape"></feBlend><feColorMatrix in="SourceAlpha" result="hardAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset></feOffset><feGaussianBlur stdDeviation="3"></feGaussianBlur><feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"></feComposite><feColorMatrix values="0 0 0 0 0.03921568766236305 0 0 0 0 0.9176470637321472 0 0 0 0 0.9450980424880981 0 0 0 1 0"></feColorMatrix><feBlend in2="shape" result="effect1_innerShadow"></feBlend><feGaussianBlur in="BackgroundImageFix" stdDeviation="15"></feGaussianBlur><feComposite in2="SourceAlpha" operator="in" result="effect2_foregroundBlur"></feComposite><feBlend in="SourceGraphic" in2="effect2_foregroundBlur" result="shape"></feBlend></filter></defs><g filter="url(#icon-Twitter_a)"><rect width="36" height="36" rx="8" fill="#320A8C" fill-opacity=".4" /><rect x=".5" y=".5" width="35" height="35" rx="7.5" stroke="currentColor" /><path d="M14.728 10H9l6.758 8.811L9.368 26h2.169l5.227-5.879L21.272 26H27l-7.044-9.182L26.018 10H23.85l-4.897 5.508L14.728 10Zm7.363 14.4-9.818-12.8h1.636l9.818 12.8H22.09Z" fill="#0AEAF1" /></g></symbol><symbol fill="none"  viewBox="0 0 40 40" id="icon-X-1"><g filter="url(#icon-X-1_a)"><rect width="40" height="40" rx="10" fill="#320A8C" fill-opacity=".4" /><rect x=".5" y=".5" width="39" height="39" rx="9.5" stroke="currentColor" /><g clip-path="url(#icon-X-1_b)"><g clip-path="url(#icon-X-1_c)"><path d="M16.046 11H10l7.134 9.512-6.745 7.76h2.289l5.517-6.346 4.76 6.347H29l-7.436-9.912 6.4-7.361h-2.29l-5.168 5.946L16.046 11Zm7.772 15.545L13.455 12.727h1.727l10.363 13.818h-1.727Z" fill="#0AEAF1" /></g></g></g><defs><clipPath id="icon-X-1_b"><path fill="#fff" transform="translate(8 8)" d="M0 0h24v24H0z" /></clipPath><clipPath id="icon-X-1_c"><path fill="#fff" transform="translate(8 8)" d="M0 0h24v24H0z" /></clipPath><filter id="icon-X-1_a" x="-30" y="-30" width="100" height="100" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feGaussianBlur in="BackgroundImageFix" stdDeviation="15"></feGaussianBlur><feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur_1285_1866"></feComposite><feBlend in="SourceGraphic" in2="effect1_backgroundBlur_1285_1866" result="shape"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset></feOffset><feGaussianBlur stdDeviation="3"></feGaussianBlur><feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"></feComposite><feColorMatrix values="0 0 0 0 0.0392157 0 0 0 0 0.917647 0 0 0 0 0.945098 0 0 0 1 0"></feColorMatrix><feBlend in2="shape" result="effect2_innerShadow_1285_1866"></feBlend></filter></defs></symbol><symbol fill="none"  viewBox="0 0 40 40" id="icon-X-Click"><g filter="url(#icon-X-Click_a)"><rect width="40" height="40" rx="10" fill="#320A8C" fill-opacity=".4" /><rect x=".5" y=".5" width="39" height="39" rx="9.5" stroke="currentColor" /><g clip-path="url(#icon-X-Click_b)"><g clip-path="url(#icon-X-Click_c)"><path d="M17.09 12.728H12l6.007 8.01-5.68 6.535h1.927L18.9 21.93l4.008 5.345H28l-6.262-8.347 5.389-6.199h-1.928l-4.353 5.007-3.756-5.007Zm6.546 13.09-8.727-11.636h1.454L25.09 25.82h-1.454Z" fill="#0AEAF1" /></g></g></g><defs><clipPath id="icon-X-Click_b"><path fill="#fff" transform="translate(8 8)" d="M0 0h24v24H0z" /></clipPath><clipPath id="icon-X-Click_c"><path fill="#fff" transform="translate(8 8)" d="M0 0h24v24H0z" /></clipPath><filter id="icon-X-Click_a" x="-30" y="-30" width="100" height="100" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feGaussianBlur in="BackgroundImageFix" stdDeviation="15"></feGaussianBlur><feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur_1285_1866"></feComposite><feBlend in="SourceGraphic" in2="effect1_backgroundBlur_1285_1866" result="shape"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset></feOffset><feGaussianBlur stdDeviation="3"></feGaussianBlur><feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"></feComposite><feColorMatrix values="0 0 0 0 0.0392157 0 0 0 0 0.917647 0 0 0 0 0.945098 0 0 0 1 0"></feColorMatrix><feBlend in2="shape" result="effect2_innerShadow_1285_1866"></feBlend></filter></defs></symbol><symbol fill="none"  viewBox="0 0 40 40" id="icon-X"><rect width="40" height="40" rx="10" fill="#320A8C" fill-opacity=".4" /><rect x=".5" y=".5" width="39" height="39" rx="9.5" stroke="currentColor" stroke-opacity=".4" /><g clip-path="url(#icon-X_a)"><g clip-path="url(#icon-X_b)"><path d="M16.046 11H10l7.134 9.512-6.745 7.76h2.289l5.517-6.346 4.76 6.347H29l-7.436-9.912 6.4-7.361h-2.29l-5.168 5.946L16.046 11Zm7.772 15.545L13.455 12.727h1.727l10.363 13.818h-1.727Z" fill="#fff" /></g></g><defs><clipPath id="icon-X_a"><path fill="#fff" transform="translate(8 8)" d="M0 0h24v24H0z" /></clipPath><clipPath id="icon-X_b"><path fill="#fff" transform="translate(8 8)" d="M0 0h24v24H0z" /></clipPath></defs></symbol><symbol fill="none"  viewBox="0 0 40 40" id="icon-YouTube-1"><g filter="url(#icon-YouTube-1_a)"><rect width="40" height="40" rx="10" fill="#320A8C" fill-opacity=".4" /><rect x=".5" y=".5" width="39" height="39" rx="9.5" stroke="currentColor" /><path d="M20.244 12c.535.003 1.87.016 3.29.073l.504.022c1.43.067 2.858.183 3.567.38.944.266 1.687 1.04 1.938 2.022.4 1.56.45 4.603.456 5.34l.001.152v.174c-.007.736-.057 3.78-.457 5.339-.254.985-.997 1.76-1.938 2.021-.709.198-2.137.314-3.567.381l-.503.022c-1.42.057-2.756.07-3.29.073h-.49c-1.13-.006-5.857-.057-7.36-.476-.945-.265-1.688-1.04-1.94-2.021-.399-1.56-.449-4.603-.455-5.34v-.326c.006-.736.056-3.78.456-5.339.254-.985.997-1.76 1.939-2.021 1.503-.419 6.23-.47 7.36-.476h.49ZM18 16.5v7l6-3.5-6-3.5Z" fill="#0AEAF1" /></g><defs><filter id="icon-YouTube-1_a" x="-30" y="-30" width="100" height="100" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feGaussianBlur in="BackgroundImageFix" stdDeviation="15"></feGaussianBlur><feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur_1353_70"></feComposite><feBlend in="SourceGraphic" in2="effect1_backgroundBlur_1353_70" result="shape"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset></feOffset><feGaussianBlur stdDeviation="3"></feGaussianBlur><feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"></feComposite><feColorMatrix values="0 0 0 0 0.0392157 0 0 0 0 0.917647 0 0 0 0 0.945098 0 0 0 1 0"></feColorMatrix><feBlend in2="shape" result="effect2_innerShadow_1353_70"></feBlend></filter></defs></symbol><symbol fill="none"  viewBox="0 0 40 40" id="icon-YouTube"><rect width="40" height="40" rx="10" fill="#320A8C" fill-opacity=".4" /><rect x=".5" y=".5" width="39" height="39" rx="9.5" stroke="currentColor" stroke-opacity=".4" /><path d="M20.244 12c.535.003 1.87.016 3.29.073l.504.022c1.43.067 2.858.183 3.567.38.944.266 1.687 1.04 1.938 2.022.4 1.56.45 4.603.456 5.34l.001.152v.174c-.007.736-.057 3.78-.457 5.339-.254.985-.997 1.76-1.938 2.021-.709.198-2.137.314-3.567.381l-.503.022c-1.42.057-2.756.07-3.29.073h-.49c-1.13-.006-5.857-.057-7.36-.476-.945-.265-1.688-1.04-1.94-2.021-.399-1.56-.449-4.603-.455-5.34v-.326c.006-.736.056-3.78.456-5.339.254-.985.997-1.76 1.939-2.021 1.503-.419 6.23-.47 7.36-.476h.49ZM18 16.5v7l6-3.5-6-3.5Z" fill="#fff" /></symbol><symbol fill="none"  viewBox="0 0 40 40" id="icon-email"><rect x=".5" y=".5" width="39" height="39" rx="9.5" stroke="currentColor" stroke-opacity=".4" /><path fill-rule="evenodd" clip-rule="evenodd" d="M10 14.143A2.143 2.143 0 0 1 12.143 12h15.714A2.143 2.143 0 0 1 30 14.143v.488l-9.453 6.303c-.165.1-.354.15-.547.147a1.028 1.028 0 0 1-.547-.147L10 14.631v-.488Zm0 2.634v9.509a2.143 2.143 0 0 0 2.143 2.143h15.714A2.143 2.143 0 0 0 30 26.286v-9.509l-8.467 5.646-.007.006c-.456.29-.986.442-1.526.438a2.81 2.81 0 0 1-1.526-.438l-.007-.006L10 16.777Z" fill="#fff" /></symbol><symbol fill="none"  viewBox="0 0 40 40" id="icon-email1"><g filter="url(#icon-email1_a)"><rect width="40" height="40" rx="10" fill="#320A8C" fill-opacity=".05" /><rect x=".5" y=".5" width="39" height="39" rx="9.5" stroke="currentColor" /><path fill-rule="evenodd" clip-rule="evenodd" d="M10 14.143A2.143 2.143 0 0 1 12.143 12h15.714A2.143 2.143 0 0 1 30 14.143v.488l-9.453 6.303c-.165.1-.354.15-.547.147a1.028 1.028 0 0 1-.547-.147L10 14.631v-.488Zm0 2.634v9.509a2.143 2.143 0 0 0 2.143 2.143h15.714A2.143 2.143 0 0 0 30 26.286v-9.509l-8.467 5.646-.007.006c-.456.29-.986.442-1.526.438a2.81 2.81 0 0 1-1.526-.438l-.007-.006L10 16.777Z" fill="#0AEAF1" /></g><defs><filter id="icon-email1_a" x="-30" y="-30" width="100" height="100" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feGaussianBlur in="BackgroundImageFix" stdDeviation="15"></feGaussianBlur><feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur_1473_2397"></feComposite><feBlend in="SourceGraphic" in2="effect1_backgroundBlur_1473_2397" result="shape"></feBlend><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset></feOffset><feGaussianBlur stdDeviation="3"></feGaussianBlur><feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"></feComposite><feColorMatrix values="0 0 0 0 0.0392157 0 0 0 0 0.917647 0 0 0 0 0.945098 0 0 0 1 0"></feColorMatrix><feBlend in2="shape" result="effect2_innerShadow_1473_2397"></feBlend></filter></defs></symbol><symbol fill="none"  viewBox="0 0 208 52" id="icon-footer"><path d="M131.13 12.992c0-1.42 1.174-2.575 2.618-2.575s2.618 1.155 2.618 2.575c0 1.42-1.174 2.574-2.618 2.574s-2.618-1.155-2.618-2.575ZM136.358 20.995c0-1.42-1.174-2.574-2.618-2.574s-2.618 1.154-2.618 2.574v15.422c0 1.42 1.174 2.575 2.618 2.575s2.618-1.155 2.618-2.575V20.995ZM90.806 18.42c-5.777 0-10.457 4.602-10.457 10.282s4.68 10.282 10.457 10.282c5.777 0 10.457-4.602 10.457-10.282s-4.68-10.281-10.457-10.281Zm0 15.43c-2.888 0-5.229-2.3-5.229-5.14s2.34-5.14 5.23-5.14c2.888 0 5.228 2.3 5.228 5.14s-2.34 5.14-5.229 5.14Z" fill="#FB15EE" /><path d="M174.396 18.42c-5.777 0-10.458 4.602-10.458 10.282s4.681 10.282 10.458 10.282 10.457-4.602 10.457-10.282-4.68-10.281-10.457-10.281Zm0 15.43c-2.889 0-5.229-2.3-5.229-5.14s2.34-5.14 5.229-5.14c2.888 0 5.228 2.3 5.228 5.14s-2.34 5.14-5.228 5.14ZM151.257 18.42c-2.001 0-3.87.555-5.461 1.512a2.616 2.616 0 0 0-2.379-1.511c-1.444 0-2.618 1.154-2.618 2.574v23.236c0 1.42 1.174 2.574 2.618 2.574 1.445 0 2.619-1.154 2.619-2.574v-6.614A10.555 10.555 0 0 0 151.264 39c5.777 0 10.458-4.601 10.458-10.281 0-5.68-4.681-10.282-10.458-10.282v-.015h-.007Zm0 15.43c-2.881 0-5.221-2.292-5.229-5.132v-.023c0-2.832 2.348-5.133 5.229-5.133 2.88 0 5.228 2.3 5.228 5.14s-2.34 5.141-5.228 5.141v.008ZM197.535 18.42c-2 0-3.87.555-5.461 1.512a2.615 2.615 0 0 0-2.378-1.511c-1.445 0-2.619 1.154-2.619 2.574v23.236c0 1.42 1.174 2.574 2.619 2.574 1.444 0 2.618-1.154 2.618-2.574v-6.614A10.556 10.556 0 0 0 197.543 39C203.32 39 208 34.398 208 28.718c0-5.68-4.68-10.282-10.457-10.282v-.015h-.008Zm0 15.43c-2.881 0-5.221-2.292-5.229-5.132v-.023c0-2.832 2.348-5.133 5.229-5.133 2.881 0 5.229 2.3 5.229 5.14s-2.341 5.141-5.229 5.141v.008Z" fill="#0AE9F0" /><path d="M77.738 33.843h-1.977c-.98 0-1.784-.782-1.784-1.754V12.984c0-1.42-1.174-2.574-2.618-2.574-1.445 0-2.618 1.154-2.618 2.574v19.105c0 3.805 3.135 6.895 7.012 6.895h1.977c1.445 0 2.619-1.154 2.619-2.574s-1.174-2.574-2.619-2.574l.008.007ZM112.478 33.843h-1.977c-.981 0-1.785-.782-1.785-1.754V12.984c0-1.42-1.173-2.574-2.618-2.574-1.444 0-2.618 1.154-2.618 2.574v19.105c0 3.805 3.136 6.895 7.013 6.895h1.977c1.444 0 2.618-1.154 2.618-2.574s-1.174-2.574-2.618-2.574l.008.007ZM126.295 33.843h-1.977c-.981 0-1.784-.782-1.784-1.754V12.984c0-1.42-1.174-2.574-2.619-2.574-1.444 0-2.618 1.154-2.618 2.574v19.105c0 3.805 3.136 6.895 7.013 6.895h1.977c1.444 0 2.618-1.154 2.618-2.574s-1.174-2.574-2.618-2.574l.008.007Z" fill="#FB15EE" /><path d="M19.929.804C5.803 4.334-2.878 18.86.875 32.712c3.02 11.154 12.976 18.664 24.082 19.28 3.591.197 6.333-3.121 5.398-6.538l-1.112-4.078c.433-.076.865-.167 1.29-.281.425-.114.85-.243 1.267-.387l1.112 4.077c.934 3.425 4.997 4.944 8.017 3C50.228 41.8 55.016 30.418 51.98 19.294 48.235 5.519 33.93-2.69 19.929.804Z" fill="url(#icon-footer_a)" /><path d="M25.065 20.987C13.65 23.994 5.007 28.68 5.765 31.46c.756 2.779 10.619 2.59 22.042-.418 11.415-3.007 20.057-7.692 19.3-10.471-.757-2.78-10.62-2.59-22.042.417Zm14.404 3.106c-3.337 1.64-7.723 3.212-12.35 4.435-4.634 1.222-9.229 2.012-12.952 2.232-2.502.152-4.124 0-5.082-.175.742-.63 2.07-1.549 4.318-2.65 3.336-1.64 7.723-3.212 12.35-4.434 4.626-1.223 9.229-2.013 12.951-2.233 2.503-.152 4.125 0 5.082.175-.741.63-2.07 1.549-4.317 2.65ZM5.309 24.427c1.023 0 1.853-.816 1.853-1.822 0-1.007-.83-1.823-1.853-1.823-1.024 0-1.854.816-1.854 1.823 0 1.006.83 1.822 1.854 1.822ZM7.61 17.061a1.05 1.05 0 0 0 1.058-1.04 1.05 1.05 0 0 0-1.058-1.04 1.05 1.05 0 0 0-1.058 1.04c0 .575.474 1.04 1.058 1.04Z" fill="#fff" /><path d="M28.486 33.554c-4.255 1.124-8.418 1.891-12.071 2.248a1.039 1.039 0 0 0-.595 1.815 16.041 16.041 0 0 0 14.72 3.47c5.384-1.42 9.377-5.399 10.983-10.243.286-.866-.594-1.656-1.436-1.284-3.344 1.489-7.345 2.87-11.6 3.987v.008ZM22.323 10.941c-8.465 2.233-13.492 10.79-11.222 19.113.07.258.147.509.224.752a33.94 33.94 0 0 0 2.835-.046c3.722-.22 8.318-1.01 12.952-2.232 4.634-1.223 9.02-2.795 12.35-4.435a30.806 30.806 0 0 0 2.478-1.352 13.868 13.868 0 0 0-.185-.767c-2.27-8.322-10.975-13.265-19.44-11.033h.008Z" fill="#0AE9F0" /><defs><radialGradient id="icon-footer_a" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="matrix(25.29746 -6.66451 6.56715 24.92787 26.3 25.516)"><stop stop-color="#A730D2" /><stop offset=".21" stop-color="#AB2ED3" /><stop offset=".43" stop-color="#B72AD7" /><stop offset=".66" stop-color="#CC24DE" /><stop offset=".88" stop-color="#E91AE8" /><stop offset="1" stop-color="#FB15EE" /></radialGradient></defs></symbol><symbol fill="none"  viewBox="0 0 60 60" id="icon-logo Mark"><path d="M22.608.927C6.583 5.002-3.265 21.763.993 37.744 4.42 50.615 15.713 59.281 28.312 59.99c4.074.228 7.184-3.6 6.124-7.544l-1.261-4.705c.49-.087.98-.192 1.463-.324.482-.131.964-.28 1.437-.447l1.261 4.705c1.06 3.952 5.67 5.704 9.095 3.461 10.549-6.904 15.981-20.038 12.538-32.874C54.719 6.368 38.493-3.103 22.609.927Z" fill="url(#icon-logo Mark_a)" /><path d="M28.435 24.216c-12.95 3.47-22.754 8.876-21.896 12.082.859 3.207 12.048 2.988 25.006-.481 12.95-3.47 22.754-8.876 21.895-12.083-.858-3.207-12.047-2.988-25.005.482Zm16.34 3.584c-3.785 1.892-8.762 3.706-14.01 5.116-5.257 1.411-10.47 2.322-14.693 2.577-2.839.175-4.679 0-5.765-.202.84-.727 2.348-1.787 4.897-3.058 3.786-1.892 8.762-3.706 14.01-5.117 5.249-1.41 10.47-2.322 14.694-2.576 2.838-.175 4.678 0 5.765.202-.841.727-2.348 1.787-4.898 3.058ZM6.022 28.185a2.103 2.103 0 1 0 0-4.205 2.103 2.103 0 0 0 0 4.205ZM8.633 19.686a1.2 1.2 0 1 0 0-2.4 1.2 1.2 0 0 0 0 2.4Z" fill="#fff" /><path d="M32.316 38.717c-4.828 1.297-9.55 2.181-13.694 2.593-1.043.105-1.446 1.393-.675 2.094 4.38 3.934 10.593 5.643 16.7 4.004 6.106-1.638 10.636-6.23 12.459-11.82.324-.998-.675-1.91-1.63-1.48-3.794 1.717-8.332 3.312-13.16 4.6v.009ZM25.324 12.624c-9.603 2.576-15.306 12.45-12.73 22.054.078.297.166.587.254.867.893.026 1.954.018 3.215-.053 4.223-.254 9.436-1.165 14.693-2.575 5.257-1.411 10.234-3.225 14.01-5.117a34.807 34.807 0 0 0 2.813-1.56 16.11 16.11 0 0 0-.21-.885c-2.577-9.603-12.45-15.307-22.054-12.73h.01Z" fill="#0AE9F0" /><defs><radialGradient id="icon-logo Mark_a" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="matrix(28.6983 -7.6898 7.6899 28.6987 29.835 29.442)"><stop stop-color="#A730D2" /><stop offset=".21" stop-color="#AB2ED3" /><stop offset=".43" stop-color="#B72AD7" /><stop offset=".66" stop-color="#CC24DE" /><stop offset=".88" stop-color="#E91AE8" /><stop offset="1" stop-color="#FB15EE" /></radialGradient></defs></symbol><symbol fill="none"  viewBox="0 0 200 50" id="icon-logo"><path d="M126.086 12.492c0-1.366 1.129-2.475 2.518-2.475 1.388 0 2.517 1.11 2.517 2.475s-1.129 2.475-2.517 2.475c-1.389 0-2.518-1.11-2.518-2.475ZM131.114 20.188c0-1.366-1.129-2.476-2.518-2.476-1.388 0-2.517 1.11-2.517 2.476v14.829c0 1.365 1.129 2.475 2.517 2.475 1.389 0 2.518-1.11 2.518-2.475v-14.83ZM87.314 17.712c-5.555 0-10.056 4.425-10.056 9.887 0 5.461 4.5 9.886 10.056 9.886 5.554 0 10.055-4.425 10.055-9.886 0-5.462-4.5-9.887-10.055-9.887Zm0 14.837c-2.778 0-5.028-2.212-5.028-4.943 0-2.731 2.25-4.943 5.028-4.943 2.777 0 5.027 2.212 5.027 4.943 0 2.73-2.25 4.943-5.027 4.943Z" fill="#FB15EE" /><path d="M167.688 17.712c-5.555 0-10.055 4.425-10.055 9.887 0 5.461 4.5 9.886 10.055 9.886s10.055-4.425 10.055-9.886c0-5.462-4.5-9.887-10.055-9.887Zm0 14.837c-2.777 0-5.027-2.212-5.027-4.943 0-2.731 2.25-4.943 5.027-4.943 2.778 0 5.028 2.212 5.028 4.943 0 2.73-2.25 4.943-5.028 4.943ZM145.439 17.712c-1.923 0-3.72.533-5.25 1.453a2.517 2.517 0 0 0-2.288-1.453c-1.388 0-2.517 1.11-2.517 2.476V42.53c0 1.365 1.129 2.475 2.517 2.475 1.389 0 2.518-1.11 2.518-2.475v-6.36a10.15 10.15 0 0 0 5.028 1.33c5.554 0 10.055-4.425 10.055-9.887 0-5.461-4.501-9.886-10.055-9.886v-.015h-.008Zm0 14.837c-2.77 0-5.02-2.205-5.028-4.936v-.022c0-2.723 2.258-4.936 5.028-4.936 2.77 0 5.028 2.213 5.028 4.944 0 2.73-2.25 4.943-5.028 4.943v.007ZM189.937 17.712c-1.923 0-3.72.533-5.25 1.453a2.516 2.516 0 0 0-2.287-1.453c-1.389 0-2.518 1.11-2.518 2.476V42.53c0 1.365 1.129 2.475 2.518 2.475 1.388 0 2.517-1.11 2.517-2.475v-6.36a10.152 10.152 0 0 0 5.028 1.33C195.5 37.5 200 33.074 200 27.612c0-5.461-4.5-9.886-10.055-9.886v-.015h-.008Zm0 14.837c-2.77 0-5.02-2.205-5.027-4.936v-.022c0-2.723 2.257-4.936 5.027-4.936s5.028 2.213 5.028 4.944c0 2.73-2.25 4.943-5.028 4.943v.007Z" fill="#0AE9F0" /><path d="M74.748 32.542h-1.9c-.944 0-1.716-.753-1.716-1.687v-18.37c0-1.366-1.13-2.476-2.518-2.476-1.389 0-2.517 1.11-2.517 2.476v18.37c0 3.658 3.015 6.63 6.743 6.63h1.9c1.39 0 2.518-1.11 2.518-2.475 0-1.366-1.129-2.476-2.517-2.476l.007.008ZM108.152 32.542h-1.901c-.944 0-1.716-.753-1.716-1.687v-18.37c0-1.366-1.129-2.476-2.517-2.476-1.389 0-2.518 1.11-2.518 2.476v18.37c0 3.658 3.015 6.63 6.743 6.63h1.901c1.389 0 2.518-1.11 2.518-2.475 0-1.366-1.129-2.476-2.518-2.476l.008.008ZM121.437 32.542h-1.901c-.943 0-1.715-.753-1.715-1.687v-18.37c0-1.366-1.129-2.476-2.518-2.476-1.389 0-2.517 1.11-2.517 2.476v18.37c0 3.658 3.015 6.63 6.743 6.63h1.901c1.389 0 2.517-1.11 2.517-2.475 0-1.366-1.128-2.476-2.517-2.476l.007.008Z" fill="#FB15EE" /><path d="M19.163.773C5.58 4.168-2.767 18.136.841 31.453 3.745 42.18 13.318 49.401 23.997 49.992c3.453.19 6.09-3.001 5.191-6.287l-1.07-3.92c.417-.073.832-.161 1.24-.27.41-.11.818-.234 1.219-.373l1.07 3.92c.898 3.294 4.804 4.754 7.708 2.885 8.94-5.754 13.545-16.699 10.627-27.395C46.38 5.307 32.626-2.586 19.162.772Z" fill="url(#icon-logo_a)" /><path d="M24.101 20.18C13.125 23.072 4.815 27.576 5.543 30.25c.727 2.672 10.21 2.49 21.194-.402 10.976-2.891 19.286-7.396 18.559-10.069-.728-2.672-10.212-2.49-21.195.402Zm13.85 2.986c-3.208 1.578-7.426 3.089-11.875 4.264-4.455 1.176-8.874 1.935-12.454 2.147-2.406.146-3.965 0-4.886-.168.713-.606 1.99-1.49 4.151-2.548 3.208-1.577 7.427-3.089 11.875-4.264 4.448-1.176 8.874-1.935 12.454-2.147 2.406-.146 3.965 0 4.886.168-.713.606-1.99 1.49-4.151 2.548ZM5.105 23.488c.984 0 1.782-.785 1.782-1.753 0-.968-.798-1.752-1.782-1.752-.985 0-1.783.784-1.783 1.752s.798 1.753 1.783 1.753ZM7.318 16.405c.561 0 1.017-.448 1.017-1 0-.553-.456-1-1.017-1-.562 0-1.018.447-1.018 1 0 .552.456 1 1.018 1Z" fill="#fff" /><path d="M27.39 32.264c-4.091 1.08-8.094 1.818-11.607 2.161a.999.999 0 0 0-.571 1.745 15.425 15.425 0 0 0 14.154 3.337c5.176-1.365 9.016-5.191 10.56-9.85.275-.832-.571-1.591-1.38-1.234-3.216 1.432-7.063 2.76-11.155 3.834v.007ZM21.465 10.52c-8.14 2.147-12.974 10.376-10.79 18.378.066.248.14.49.215.723.757.022 1.656.015 2.725-.044 3.58-.212 7.998-.971 12.454-2.147 4.456-1.175 8.674-2.686 11.875-4.264a29.642 29.642 0 0 0 2.383-1.3c-.052-.247-.111-.488-.178-.737-2.183-8.002-10.553-12.755-18.692-10.609h.008Z" fill="#0AE9F0" /><defs><radialGradient id="icon-logo_a" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="rotate(-14.759 107.364 -85.36) scale(25.1544 24.7869)"><stop stop-color="#A730D2" /><stop offset=".21" stop-color="#AB2ED3" /><stop offset=".43" stop-color="#B72AD7" /><stop offset=".66" stop-color="#CC24DE" /><stop offset=".88" stop-color="#E91AE8" /><stop offset="1" stop-color="#FB15EE" /></radialGradient></defs></symbol><symbol fill="none"  viewBox="0 0 60 60" id="icon-logose"><path d="M22.608.927C6.583 5.002-3.265 21.763.993 37.744 4.42 50.615 15.713 59.281 28.312 59.99c4.074.228 7.184-3.6 6.124-7.544l-1.261-4.705c.49-.087.98-.192 1.463-.324.482-.131.964-.28 1.437-.447l1.261 4.705c1.06 3.952 5.67 5.704 9.095 3.461 10.549-6.904 15.981-20.038 12.538-32.874C54.719 6.368 38.493-3.103 22.609.927Z" fill="url(#icon-logose_a)" /><path d="M28.435 24.216c-12.95 3.47-22.754 8.876-21.896 12.082.859 3.207 12.048 2.988 25.006-.481 12.95-3.47 22.754-8.876 21.895-12.083-.858-3.207-12.047-2.988-25.005.482Zm16.34 3.584c-3.785 1.892-8.762 3.706-14.01 5.116-5.257 1.411-10.47 2.322-14.693 2.577-2.839.175-4.679 0-5.765-.202.84-.727 2.348-1.787 4.897-3.058 3.786-1.892 8.762-3.706 14.01-5.117 5.249-1.41 10.47-2.322 14.694-2.576 2.838-.175 4.678 0 5.765.202-.841.727-2.348 1.787-4.898 3.058ZM6.022 28.185a2.103 2.103 0 1 0 0-4.205 2.103 2.103 0 0 0 0 4.205ZM8.633 19.686a1.2 1.2 0 1 0 0-2.4 1.2 1.2 0 0 0 0 2.4Z" fill="#fff" /><path d="M32.316 38.717c-4.828 1.297-9.55 2.181-13.694 2.593-1.043.105-1.446 1.393-.675 2.094 4.38 3.934 10.593 5.643 16.7 4.004 6.106-1.638 10.636-6.23 12.459-11.82.324-.998-.675-1.91-1.63-1.48-3.794 1.717-8.332 3.312-13.16 4.6v.009ZM25.324 12.624c-9.603 2.576-15.306 12.45-12.73 22.054.078.297.166.587.254.867.893.026 1.954.018 3.215-.053 4.223-.254 9.436-1.165 14.693-2.575 5.257-1.411 10.234-3.225 14.01-5.117a34.807 34.807 0 0 0 2.813-1.56 16.11 16.11 0 0 0-.21-.885c-2.577-9.603-12.45-15.307-22.054-12.73h.01Z" fill="#0AE9F0" /><defs><radialGradient id="icon-logose_a" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="matrix(28.6983 -7.6898 7.6899 28.6987 29.835 29.442)"><stop stop-color="#A730D2" /><stop offset=".21" stop-color="#AB2ED3" /><stop offset=".43" stop-color="#B72AD7" /><stop offset=".66" stop-color="#CC24DE" /><stop offset=".88" stop-color="#E91AE8" /><stop offset="1" stop-color="#FB15EE" /></radialGradient></defs></symbol>',t.insertBefore(i,t.lastChild)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}const Cht=Wo(e=>{e.vueApp.component("svg-icon",Q8)}),Eht=[yae,wae,Vse,Hse,jse,Wse,$se,Zse,qse,_Ie,_ht,Cht],J8=(e,t)=>{const i=e.__vccOpts||e;for(const[r,n]of t)i[r]=n;return i},Aht={class:"left-header-list"},Mht={class:"list-item"},Tht={class:"list-item"},Pht={class:"list-item"},Dht={class:"logo-center absolute left-1/2 -translate-x-1/2"},Iht={class:"right-wrap"},Oht={class:"right-header-list"},Rht={class:"item-svg"},kht={class:"item-svg"},Lht={class:"item-svg"},Bht={__name:"headView",setup(e){const t=j("Twitter-2"),i=j("Telegram-2"),r=j("Github-2"),n=j(!1);let a=0;const s=()=>{const o=window.scrollY||document.documentElement.scrollTop;o>a?n.value=!0:o<a&&(n.value=!1),a=o};return Lt(()=>{window.addEventListener("scroll",s)}),zu(()=>{window.removeEventListener("scroll",s)}),(o,l)=>{const c=BH,u=Q8;return F(),K("div",{class:"header flex justify-between relative",style:mt(`opacity:${n.value?".6":"1"};`)},[l[4]||(l[4]=ie("div",{class:"absolute"},null,-1)),ie("ul",Aht,[ie("li",Mht,[ne(c,{to:"/"},{default:ve(()=>l[0]||(l[0]=[Xt("HOME")])),_:1})]),ie("li",Tht,[ne(c,{to:"/about"},{default:ve(()=>l[1]||(l[1]=[Xt("ABOUT")])),_:1})]),l[3]||(l[3]=ie("li",{class:"list-item"},"BUILDERS",-1)),ie("li",Pht,[ne(c,{to:"/research"},{default:ve(()=>l[2]||(l[2]=[Xt("RESEARCH")])),_:1})])]),ie("div",Dht,[ne(u,{name:n.value?"logose":"logo"},null,8,["name"])]),ie("div",Iht,[ie("ul",Oht,[ie("li",Rht,[ne(c,{target:"_blank",to:"https://x.com/LollipopHQ"},{default:ve(()=>[ne(u,{name:t.value},null,8,["name"])]),_:1})]),ie("li",kht,[ne(c,{target:"_blank",to:"https://t.me/lollipopbuilders"},{default:ve(()=>[ne(u,{name:i.value},null,8,["name"])]),_:1})]),ie("li",Lht,[ne(c,{target:"_blank",to:"https://github.com/LollipopBuilders"},{default:ve(()=>[ne(u,{name:r.value},null,8,["name"])]),_:1})])])])],4)}}},Nht=J8(Bht,[["__scopeId","data-v-24621bc9"]]),Fht=ce({props:{vnode:{type:Object,required:!0},route:{type:Object,required:!0},vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const t=e.renderKey,i=e.route,r={};for(const n in e.route)Object.defineProperty(r,n,{get:()=>t===e.renderKey?e.route[n]:i[n],enumerable:!0});return Yt(F_,oc(r)),()=>dt(e.vnode,{ref:e.vnodeRef})}}),zht=ce({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(e,{attrs:t,slots:i,expose:r}){const n=Xr(),a=j(),s=rt(F_,null);let o;r({pageRef:a});const l=rt(mne,null);let c;const u=n.deferHydration();if(n.isHydrating){const d=n.hooks.hookOnce("app:error",u);Ns().beforeEach(d)}return e.pageKey&&Ne(()=>e.pageKey,(d,h)=>{d!==h&&n.callHook("page:loading:start")}),()=>dt(kH,{name:e.name,route:e.route,...t},{default:d=>{const h=Uht(s,d.route,d.Component),f=s&&s.matched.length===d.route.matched.length;if(!d.Component){if(c&&!f)return c;u();return}if(c&&l&&!l.isCurrent(d.route))return c;if(h&&s&&(!l||l!=null&&l.isCurrent(s)))return f?c:null;const p=QE(d,e.pageKey);!n.isHydrating&&!Hht(s,d.route,d.Component)&&o===p&&n.callHook("page:loading:end"),o=p;const m=!!(e.transition??d.route.meta.pageTransition??FE),v=m&&Vht([e.transition,d.route.meta.pageTransition,FE,{onAfterLeave:()=>{n.callHook("page:transition:finish",d.Component)}}].filter(Boolean)),y=e.keepalive??d.route.meta.keepalive??Kre;return c=Pse(Pn,m&&v,Ase(y,dt(bU,{suspensible:!0,onPending:()=>n.callHook("page:start",d.Component),onResolve:()=>{ft(()=>n.callHook("page:finish",d.Component).then(()=>n.callHook("page:loading:end")).finally(u))}},{default:()=>{const x=dt(Fht,{key:p||void 0,vnode:i.default?dt(ht,void 0,i.default(d)):d.Component,route:d.route,renderKey:p||void 0,trackRootNodes:m,vnodeRef:a});return y&&(x.type.name=d.Component.type.name||d.Component.type.__name||"RouteProvider"),x}}))).default(),c}})}});function Vht(e){const t=e.map(i=>({...i,onAfterLeave:i.onAfterLeave?Y5(i.onAfterLeave):void 0}));return aH(...t)}function Uht(e,t,i){if(!e)return!1;const r=t.matched.findIndex(n=>{var a;return((a=n.components)==null?void 0:a.default)===(i==null?void 0:i.type)});return!r||r===-1?!1:t.matched.slice(0,r).some((n,a)=>{var s,o,l;return((s=n.components)==null?void 0:s.default)!==((l=(o=e.matched[a])==null?void 0:o.components)==null?void 0:l.default)})||i&&QE({route:t,Component:i})!==QE({route:e,Component:i})}function Hht(e,t,i){return e?t.matched.findIndex(n=>{var a;return((a=n.components)==null?void 0:a.default)===(i==null?void 0:i.type)})<t.matched.length-1:!1}const jht={},Wht={class:"bottom-box"},Ght={class:"box-container"},$ht={class:"left"},Zht={class:"svg-logo"},qht={class:"footer-list"},Yht={class:"svg-logo-icon"},Kht={class:"svg-logo-icon"},Xht={class:"svg-logo-icon"},Qht={class:"svg-logo-icon"},Jht={class:"svg-logo-icon"},eft={class:"svg-logo-icon"},tft={class:"svg-logo-icon"},ift={href:"mailto:team@lollipop.builders"};function rft(e,t){const i=Q8,r=BH;return F(),K("div",Wht,[ie("div",Ght,[ie("div",$ht,[t[1]||(t[1]=xO('<div class="nav-list" data-v-52a46999><div class="nav-item" data-v-52a46999>HOME</div><div class="nav-item" data-v-52a46999>RESEARCH</div><div class="nav-item" data-v-52a46999>ABOUT</div><div class="nav-item opacity-[.8]" style="font-family:&#39;SpaceGrotesk&#39;, sans-serif;font-size:14px;font-weight:normal;line-height:18px;display:flex;align-items:center;letter-spacing:0em;color:rgba(255, 255, 255, 0.8);white-space:nowrap;" data-v-52a46999> White paper </div><div class="nav-item" data-v-52a46999>BUILDERS</div><div class="nav-item text-[14px] opacity-[.8] leading-[18px] text-[#ccFFFFFF]" style="font-family:&#39;SpaceGrotesk&#39;, sans-serif;font-size:14px;font-weight:normal;line-height:18px;display:flex;align-items:center;letter-spacing:0em;color:rgba(255, 255, 255, 0.8);" data-v-52a46999> Doc </div></div>',1)),ie("div",Zht,[ne(i,{name:"logo"})]),ie("div",qht,[t[0]||(t[0]=ie("span",null,"Find us on",-1)),ie("div",Yht,[ne(r,{to:"https://x.com/LollipopHQ",target:"_blank"},{default:ve(()=>[ne(i,{class:"icon",name:"X"}),ne(i,{class:"icon_active",name:"X-1"})]),_:1})]),ie("div",Kht,[ne(r,{to:"https://discord.gg/DxRXcNQp ",target:"_blank"},{default:ve(()=>[ne(i,{class:"icon",name:"DC"}),ne(i,{class:"icon_active",name:"DC-Click"})]),_:1})]),ie("div",Xht,[ne(r,{target:"_blank",to:"https://t.me/lollipopbuilders"},{default:ve(()=>[ne(i,{class:"icon",name:"Telegram-2"}),ne(i,{class:"icon_active",name:"TG-Click"})]),_:1})]),ie("div",Qht,[ne(r,{target:"_blank",to:"https://github.com"},{default:ve(()=>[ne(i,{class:"icon",name:"Github-2"}),ne(i,{class:"icon_active",name:"GitHub-Click"})]),_:1})]),ie("div",Jht,[ne(r,{target:"_blank",to:"https://www.linkedin.com/company/lollipop-builders"},{default:ve(()=>[ne(i,{class:"icon",name:"Link-2"}),ne(i,{class:"icon_active",name:"Link-Click"})]),_:1})]),ie("div",eft,[ne(r,{target:"_blank",to:"https://www.youtube.com/@LollipopBuilders"},{default:ve(()=>[ne(i,{class:"icon",name:"YouTube"}),ne(i,{class:"icon_active",name:"YouTube-1"})]),_:1})]),ie("div",tft,[ie("a",ift,[ne(i,{class:"icon",name:"email"}),ne(i,{class:"icon_active",name:"email1"})])])])]),t[2]||(t[2]=xO('<div class="right" data-v-52a46999><div class="right-wrap" data-v-52a46999><div class="search" data-v-52a46999><input placeholder="Enter your email" type="text" data-v-52a46999></div><div class="input-buttom" data-v-52a46999>Subscribe</div></div><div class="bottom-title" data-v-52a46999> 2024 Lollipop. All rights reserved.</div></div>',1))])])}const nft=J8(jht,[["render",rft],["__scopeId","data-v-52a46999"]]),aft={};function sft(e,t){const i=Nht,r=zht,n=nft;return F(),K("div",null,[ne(i),ne(r),ne(n)])}const oft=J8(aft,[["render",sft]]),lft={__name:"nuxt-error-page",props:{error:Object},setup(e){const i=e.error;i.stack&&i.stack.split(`
`).splice(1).map(d=>({text:d.replace("webpack:/","").replace(".vue",".js").trim(),internal:d.includes("node_modules")&&!d.includes(".cache")||d.includes("internal")||d.includes("new Promise")})).map(d=>`<span class="stack${d.internal?" internal":""}">${d.text}</span>`).join(`
`);const r=Number(i.statusCode||500),n=r===404,a=i.statusMessage??(n?"Page Not Found":"Internal Server Error"),s=i.message||i.toString(),o=void 0,u=n?dO(()=>Ks(()=>import("./B7dQ1S4Q.js"),__vite__mapDeps([6,7,8]),import.meta.url)):dO(()=>Ks(()=>import("./C2cLfdw7.js"),__vite__mapDeps([9,7,10]),import.meta.url));return(d,h)=>(F(),De(g(u),_o(Au({statusCode:g(r),statusMessage:g(a),description:g(s),stack:g(o)})),null,16))}},cft={key:0},aV={__name:"nuxt-root",setup(e){const t=()=>null,i=Xr(),r=i.deferHydration();if(i.isHydrating){const l=i.hooks.hookOnce("app:error",r);Ns().beforeEach(l)}const n=!1;Yt(F_,oH()),i.hooks.callHookWith(l=>l.map(c=>c()),"vue:setup");const a=z_(),s=!1;QV((l,c,u)=>{if(i.hooks.callHook("vue:error",l,c,u).catch(d=>console.error("[nuxt] Error in `vue:error` hook",d)),bne(l)&&(l.fatal||l.unhandled))return i.runWithContext(()=>ym(l)),!1});const o=!1;return(l,c)=>(F(),De(bU,{onResolve:g(r)},{default:ve(()=>[g(s)?(F(),K("div",cft)):g(a)?(F(),De(g(lft),{key:1,error:g(a)},null,8,["error"])):g(o)?(F(),De(g(t),{key:2,context:g(o)},null,8,["context"])):g(n)?(F(),De(jt(g(n)),{key:3})):(F(),De(g(oft),{key:4}))]),_:1},8,["onResolve"]))}};let sV;{let e;sV=async function(){var s,o;if(e)return e;const r=!!(((s=window.__NUXT__)==null?void 0:s.serverRendered)??((o=document.getElementById("__NUXT_DATA__"))==null?void 0:o.dataset.ssr)==="true")?Wie(aV):jU(aV),n=ine({vueApp:r});async function a(l){await n.callHook("app:error",l),n.payload.error=n.payload.error||V_(l)}r.config.errorHandler=a,n.hook("app:suspense:resolve",()=>{r.config.errorHandler===a&&(r.config.errorHandler=void 0)});try{await ane(n,Eht)}catch(l){a(l)}try{await n.hooks.callHook("app:created",r),await n.hooks.callHook("app:beforeMount",r),r.mount(Jre),await n.hooks.callHook("app:mounted",r),await ft()}catch(l){a(l)}return r},e=sV().catch(t=>{throw console.error("Error while mounting app:",t),t})}export{ht as F,J8 as _,ie as a,ne as b,K as c,Xt as d,BH as e,Ca as f,$E as g,Ne as h,dft as i,Bi as j,YV as k,L5 as l,Ut as m,Lt as n,F as o,Ht as p,xO as q,j as r,Qt as s,Ye as t,U as u,xIe as v,ve as w,Q8 as x,Ae as y,bi as z};
